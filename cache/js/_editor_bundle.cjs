(() => {
  var __create = Object.create;
  var __defProp = Object.defineProperty;
  var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
  var __getOwnPropNames = Object.getOwnPropertyNames;
  var __getProtoOf = Object.getPrototypeOf;
  var __hasOwnProp = Object.prototype.hasOwnProperty;
  var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
  var __esm = (fn, res) => function __init() {
    return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
  };
  var __commonJS = (cb, mod) => function __require() {
    return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
  };
  var __export = (target, all) => {
    for (var name in all)
      __defProp(target, name, { get: all[name], enumerable: true });
  };
  var __copyProps = (to, from, except, desc) => {
    if (from && typeof from === "object" || typeof from === "function") {
      for (let key of __getOwnPropNames(from))
        if (!__hasOwnProp.call(to, key) && key !== except)
          __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
    }
    return to;
  };
  var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
    // If the importer is in node compatibility mode or this is not an ESM
    // file that has been converted to a CommonJS file using a Babel-
    // compatible transform (i.e. "__esModule" has not been set), then set
    // "default" to the CommonJS "module.exports" for node compatibility.
    isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
    mod
  ));
  var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
  var __publicField = (obj, key, value) => {
    __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);
    return value;
  };
  var __accessCheck = (obj, member, msg) => {
    if (!member.has(obj))
      throw TypeError("Cannot " + msg);
  };
  var __privateGet = (obj, member, getter) => {
    __accessCheck(obj, member, "read from private field");
    return getter ? getter.call(obj) : member.get(obj);
  };
  var __privateAdd = (obj, member, value) => {
    if (member.has(obj))
      throw TypeError("Cannot add the same private member more than once");
    member instanceof WeakSet ? member.add(obj) : member.set(obj, value);
  };
  var __privateMethod = (obj, member, method) => {
    __accessCheck(obj, member, "access private method");
    return method;
  };

  // node_modules/howler/dist/howler.js
  var require_howler = __commonJS({
    "node_modules/howler/dist/howler.js"(exports) {
      (function() {
        "use strict";
        var HowlerGlobal2 = function() {
          this.init();
        };
        HowlerGlobal2.prototype = {
          /**
           * Initialize the global Howler object.
           * @return {Howler}
           */
          init: function() {
            var self2 = this || Howler2;
            self2._counter = 1e3;
            self2._html5AudioPool = [];
            self2.html5PoolSize = 10;
            self2._codecs = {};
            self2._howls = [];
            self2._muted = false;
            self2._volume = 1;
            self2._canPlayEvent = "canplaythrough";
            self2._navigator = typeof window !== "undefined" && window.navigator ? window.navigator : null;
            self2.masterGain = null;
            self2.noAudio = false;
            self2.usingWebAudio = true;
            self2.autoSuspend = true;
            self2.ctx = null;
            self2.autoUnlock = true;
            self2._setup();
            return self2;
          },
          /**
           * Get/set the global volume for all sounds.
           * @param  {Float} vol Volume from 0.0 to 1.0.
           * @return {Howler/Float}     Returns self or current volume.
           */
          volume: function(vol) {
            var self2 = this || Howler2;
            vol = parseFloat(vol);
            if (!self2.ctx) {
              setupAudioContext();
            }
            if (typeof vol !== "undefined" && vol >= 0 && vol <= 1) {
              self2._volume = vol;
              if (self2._muted) {
                return self2;
              }
              if (self2.usingWebAudio) {
                self2.masterGain.gain.setValueAtTime(vol, Howler2.ctx.currentTime);
              }
              for (var i = 0; i < self2._howls.length; i++) {
                if (!self2._howls[i]._webAudio) {
                  var ids = self2._howls[i]._getSoundIds();
                  for (var j = 0; j < ids.length; j++) {
                    var sound = self2._howls[i]._soundById(ids[j]);
                    if (sound && sound._node) {
                      sound._node.volume = sound._volume * vol;
                    }
                  }
                }
              }
              return self2;
            }
            return self2._volume;
          },
          /**
           * Handle muting and unmuting globally.
           * @param  {Boolean} muted Is muted or not.
           */
          mute: function(muted) {
            var self2 = this || Howler2;
            if (!self2.ctx) {
              setupAudioContext();
            }
            self2._muted = muted;
            if (self2.usingWebAudio) {
              self2.masterGain.gain.setValueAtTime(muted ? 0 : self2._volume, Howler2.ctx.currentTime);
            }
            for (var i = 0; i < self2._howls.length; i++) {
              if (!self2._howls[i]._webAudio) {
                var ids = self2._howls[i]._getSoundIds();
                for (var j = 0; j < ids.length; j++) {
                  var sound = self2._howls[i]._soundById(ids[j]);
                  if (sound && sound._node) {
                    sound._node.muted = muted ? true : sound._muted;
                  }
                }
              }
            }
            return self2;
          },
          /**
           * Handle stopping all sounds globally.
           */
          stop: function() {
            var self2 = this || Howler2;
            for (var i = 0; i < self2._howls.length; i++) {
              self2._howls[i].stop();
            }
            return self2;
          },
          /**
           * Unload and destroy all currently loaded Howl objects.
           * @return {Howler}
           */
          unload: function() {
            var self2 = this || Howler2;
            for (var i = self2._howls.length - 1; i >= 0; i--) {
              self2._howls[i].unload();
            }
            if (self2.usingWebAudio && self2.ctx && typeof self2.ctx.close !== "undefined") {
              self2.ctx.close();
              self2.ctx = null;
              setupAudioContext();
            }
            return self2;
          },
          /**
           * Check for codec support of specific extension.
           * @param  {String} ext Audio file extention.
           * @return {Boolean}
           */
          codecs: function(ext) {
            return (this || Howler2)._codecs[ext.replace(/^x-/, "")];
          },
          /**
           * Setup various state values for global tracking.
           * @return {Howler}
           */
          _setup: function() {
            var self2 = this || Howler2;
            self2.state = self2.ctx ? self2.ctx.state || "suspended" : "suspended";
            self2._autoSuspend();
            if (!self2.usingWebAudio) {
              if (typeof Audio !== "undefined") {
                try {
                  var test = new Audio();
                  if (typeof test.oncanplaythrough === "undefined") {
                    self2._canPlayEvent = "canplay";
                  }
                } catch (e) {
                  self2.noAudio = true;
                }
              } else {
                self2.noAudio = true;
              }
            }
            try {
              var test = new Audio();
              if (test.muted) {
                self2.noAudio = true;
              }
            } catch (e) {
            }
            if (!self2.noAudio) {
              self2._setupCodecs();
            }
            return self2;
          },
          /**
           * Check for browser support for various codecs and cache the results.
           * @return {Howler}
           */
          _setupCodecs: function() {
            var self2 = this || Howler2;
            var audioTest = null;
            try {
              audioTest = typeof Audio !== "undefined" ? new Audio() : null;
            } catch (err) {
              return self2;
            }
            if (!audioTest || typeof audioTest.canPlayType !== "function") {
              return self2;
            }
            var mpegTest = audioTest.canPlayType("audio/mpeg;").replace(/^no$/, "");
            var ua = self2._navigator ? self2._navigator.userAgent : "";
            var checkOpera = ua.match(/OPR\/(\d+)/g);
            var isOldOpera = checkOpera && parseInt(checkOpera[0].split("/")[1], 10) < 33;
            var checkSafari = ua.indexOf("Safari") !== -1 && ua.indexOf("Chrome") === -1;
            var safariVersion = ua.match(/Version\/(.*?) /);
            var isOldSafari = checkSafari && safariVersion && parseInt(safariVersion[1], 10) < 15;
            self2._codecs = {
              mp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType("audio/mp3;").replace(/^no$/, ""))),
              mpeg: !!mpegTest,
              opus: !!audioTest.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/, ""),
              ogg: !!audioTest.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""),
              oga: !!audioTest.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""),
              wav: !!(audioTest.canPlayType('audio/wav; codecs="1"') || audioTest.canPlayType("audio/wav")).replace(/^no$/, ""),
              aac: !!audioTest.canPlayType("audio/aac;").replace(/^no$/, ""),
              caf: !!audioTest.canPlayType("audio/x-caf;").replace(/^no$/, ""),
              m4a: !!(audioTest.canPlayType("audio/x-m4a;") || audioTest.canPlayType("audio/m4a;") || audioTest.canPlayType("audio/aac;")).replace(/^no$/, ""),
              m4b: !!(audioTest.canPlayType("audio/x-m4b;") || audioTest.canPlayType("audio/m4b;") || audioTest.canPlayType("audio/aac;")).replace(/^no$/, ""),
              mp4: !!(audioTest.canPlayType("audio/x-mp4;") || audioTest.canPlayType("audio/mp4;") || audioTest.canPlayType("audio/aac;")).replace(/^no$/, ""),
              weba: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, "")),
              webm: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, "")),
              dolby: !!audioTest.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/, ""),
              flac: !!(audioTest.canPlayType("audio/x-flac;") || audioTest.canPlayType("audio/flac;")).replace(/^no$/, "")
            };
            return self2;
          },
          /**
           * Some browsers/devices will only allow audio to be played after a user interaction.
           * Attempt to automatically unlock audio on the first user interaction.
           * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/
           * @return {Howler}
           */
          _unlockAudio: function() {
            var self2 = this || Howler2;
            if (self2._audioUnlocked || !self2.ctx) {
              return;
            }
            self2._audioUnlocked = false;
            self2.autoUnlock = false;
            if (!self2._mobileUnloaded && self2.ctx.sampleRate !== 44100) {
              self2._mobileUnloaded = true;
              self2.unload();
            }
            self2._scratchBuffer = self2.ctx.createBuffer(1, 1, 22050);
            var unlock = function(e) {
              while (self2._html5AudioPool.length < self2.html5PoolSize) {
                try {
                  var audioNode = new Audio();
                  audioNode._unlocked = true;
                  self2._releaseHtml5Audio(audioNode);
                } catch (e2) {
                  self2.noAudio = true;
                  break;
                }
              }
              for (var i = 0; i < self2._howls.length; i++) {
                if (!self2._howls[i]._webAudio) {
                  var ids = self2._howls[i]._getSoundIds();
                  for (var j = 0; j < ids.length; j++) {
                    var sound = self2._howls[i]._soundById(ids[j]);
                    if (sound && sound._node && !sound._node._unlocked) {
                      sound._node._unlocked = true;
                      sound._node.load();
                    }
                  }
                }
              }
              self2._autoResume();
              var source = self2.ctx.createBufferSource();
              source.buffer = self2._scratchBuffer;
              source.connect(self2.ctx.destination);
              if (typeof source.start === "undefined") {
                source.noteOn(0);
              } else {
                source.start(0);
              }
              if (typeof self2.ctx.resume === "function") {
                self2.ctx.resume();
              }
              source.onended = function() {
                source.disconnect(0);
                self2._audioUnlocked = true;
                document.removeEventListener("touchstart", unlock, true);
                document.removeEventListener("touchend", unlock, true);
                document.removeEventListener("click", unlock, true);
                document.removeEventListener("keydown", unlock, true);
                for (var i2 = 0; i2 < self2._howls.length; i2++) {
                  self2._howls[i2]._emit("unlock");
                }
              };
            };
            document.addEventListener("touchstart", unlock, true);
            document.addEventListener("touchend", unlock, true);
            document.addEventListener("click", unlock, true);
            document.addEventListener("keydown", unlock, true);
            return self2;
          },
          /**
           * Get an unlocked HTML5 Audio object from the pool. If none are left,
           * return a new Audio object and throw a warning.
           * @return {Audio} HTML5 Audio object.
           */
          _obtainHtml5Audio: function() {
            var self2 = this || Howler2;
            if (self2._html5AudioPool.length) {
              return self2._html5AudioPool.pop();
            }
            var testPlay = new Audio().play();
            if (testPlay && typeof Promise !== "undefined" && (testPlay instanceof Promise || typeof testPlay.then === "function")) {
              testPlay.catch(function() {
                console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.");
              });
            }
            return new Audio();
          },
          /**
           * Return an activated HTML5 Audio object to the pool.
           * @return {Howler}
           */
          _releaseHtml5Audio: function(audio) {
            var self2 = this || Howler2;
            if (audio._unlocked) {
              self2._html5AudioPool.push(audio);
            }
            return self2;
          },
          /**
           * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.
           * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.
           * @return {Howler}
           */
          _autoSuspend: function() {
            var self2 = this;
            if (!self2.autoSuspend || !self2.ctx || typeof self2.ctx.suspend === "undefined" || !Howler2.usingWebAudio) {
              return;
            }
            for (var i = 0; i < self2._howls.length; i++) {
              if (self2._howls[i]._webAudio) {
                for (var j = 0; j < self2._howls[i]._sounds.length; j++) {
                  if (!self2._howls[i]._sounds[j]._paused) {
                    return self2;
                  }
                }
              }
            }
            if (self2._suspendTimer) {
              clearTimeout(self2._suspendTimer);
            }
            self2._suspendTimer = setTimeout(function() {
              if (!self2.autoSuspend) {
                return;
              }
              self2._suspendTimer = null;
              self2.state = "suspending";
              var handleSuspension = function() {
                self2.state = "suspended";
                if (self2._resumeAfterSuspend) {
                  delete self2._resumeAfterSuspend;
                  self2._autoResume();
                }
              };
              self2.ctx.suspend().then(handleSuspension, handleSuspension);
            }, 3e4);
            return self2;
          },
          /**
           * Automatically resume the Web Audio AudioContext when a new sound is played.
           * @return {Howler}
           */
          _autoResume: function() {
            var self2 = this;
            if (!self2.ctx || typeof self2.ctx.resume === "undefined" || !Howler2.usingWebAudio) {
              return;
            }
            if (self2.state === "running" && self2.ctx.state !== "interrupted" && self2._suspendTimer) {
              clearTimeout(self2._suspendTimer);
              self2._suspendTimer = null;
            } else if (self2.state === "suspended" || self2.state === "running" && self2.ctx.state === "interrupted") {
              self2.ctx.resume().then(function() {
                self2.state = "running";
                for (var i = 0; i < self2._howls.length; i++) {
                  self2._howls[i]._emit("resume");
                }
              });
              if (self2._suspendTimer) {
                clearTimeout(self2._suspendTimer);
                self2._suspendTimer = null;
              }
            } else if (self2.state === "suspending") {
              self2._resumeAfterSuspend = true;
            }
            return self2;
          }
        };
        var Howler2 = new HowlerGlobal2();
        var Howl2 = function(o) {
          var self2 = this;
          if (!o.src || o.src.length === 0) {
            console.error("An array of source files must be passed with any new Howl.");
            return;
          }
          self2.init(o);
        };
        Howl2.prototype = {
          /**
           * Initialize a new Howl group object.
           * @param  {Object} o Passed in properties for this group.
           * @return {Howl}
           */
          init: function(o) {
            var self2 = this;
            if (!Howler2.ctx) {
              setupAudioContext();
            }
            self2._autoplay = o.autoplay || false;
            self2._format = typeof o.format !== "string" ? o.format : [o.format];
            self2._html5 = o.html5 || false;
            self2._muted = o.mute || false;
            self2._loop = o.loop || false;
            self2._pool = o.pool || 5;
            self2._preload = typeof o.preload === "boolean" || o.preload === "metadata" ? o.preload : true;
            self2._rate = o.rate || 1;
            self2._sprite = o.sprite || {};
            self2._src = typeof o.src !== "string" ? o.src : [o.src];
            self2._volume = o.volume !== void 0 ? o.volume : 1;
            self2._xhr = {
              method: o.xhr && o.xhr.method ? o.xhr.method : "GET",
              headers: o.xhr && o.xhr.headers ? o.xhr.headers : null,
              withCredentials: o.xhr && o.xhr.withCredentials ? o.xhr.withCredentials : false
            };
            self2._duration = 0;
            self2._state = "unloaded";
            self2._sounds = [];
            self2._endTimers = {};
            self2._queue = [];
            self2._playLock = false;
            self2._onend = o.onend ? [{ fn: o.onend }] : [];
            self2._onfade = o.onfade ? [{ fn: o.onfade }] : [];
            self2._onload = o.onload ? [{ fn: o.onload }] : [];
            self2._onloaderror = o.onloaderror ? [{ fn: o.onloaderror }] : [];
            self2._onplayerror = o.onplayerror ? [{ fn: o.onplayerror }] : [];
            self2._onpause = o.onpause ? [{ fn: o.onpause }] : [];
            self2._onplay = o.onplay ? [{ fn: o.onplay }] : [];
            self2._onstop = o.onstop ? [{ fn: o.onstop }] : [];
            self2._onmute = o.onmute ? [{ fn: o.onmute }] : [];
            self2._onvolume = o.onvolume ? [{ fn: o.onvolume }] : [];
            self2._onrate = o.onrate ? [{ fn: o.onrate }] : [];
            self2._onseek = o.onseek ? [{ fn: o.onseek }] : [];
            self2._onunlock = o.onunlock ? [{ fn: o.onunlock }] : [];
            self2._onresume = [];
            self2._webAudio = Howler2.usingWebAudio && !self2._html5;
            if (typeof Howler2.ctx !== "undefined" && Howler2.ctx && Howler2.autoUnlock) {
              Howler2._unlockAudio();
            }
            Howler2._howls.push(self2);
            if (self2._autoplay) {
              self2._queue.push({
                event: "play",
                action: function() {
                  self2.play();
                }
              });
            }
            if (self2._preload && self2._preload !== "none") {
              self2.load();
            }
            return self2;
          },
          /**
           * Load the audio file.
           * @return {Howler}
           */
          load: function() {
            var self2 = this;
            var url = null;
            if (Howler2.noAudio) {
              self2._emit("loaderror", null, "No audio support.");
              return;
            }
            if (typeof self2._src === "string") {
              self2._src = [self2._src];
            }
            for (var i = 0; i < self2._src.length; i++) {
              var ext, str5;
              if (self2._format && self2._format[i]) {
                ext = self2._format[i];
              } else {
                str5 = self2._src[i];
                if (typeof str5 !== "string") {
                  self2._emit("loaderror", null, "Non-string found in selected audio sources - ignoring.");
                  continue;
                }
                ext = /^data:audio\/([^;,]+);/i.exec(str5);
                if (!ext) {
                  ext = /\.([^.]+)$/.exec(str5.split("?", 1)[0]);
                }
                if (ext) {
                  ext = ext[1].toLowerCase();
                }
              }
              if (!ext) {
                console.warn('No file extension was found. Consider using the "format" property or specify an extension.');
              }
              if (ext && Howler2.codecs(ext)) {
                url = self2._src[i];
                break;
              }
            }
            if (!url) {
              self2._emit("loaderror", null, "No codec support for selected audio sources.");
              return;
            }
            self2._src = url;
            self2._state = "loading";
            if (window.location.protocol === "https:" && url.slice(0, 5) === "http:") {
              self2._html5 = true;
              self2._webAudio = false;
            }
            new Sound2(self2);
            if (self2._webAudio) {
              loadBuffer(self2);
            }
            return self2;
          },
          /**
           * Play a sound or resume previous playback.
           * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.
           * @param  {Boolean} internal Internal Use: true prevents event firing.
           * @return {Number}          Sound ID.
           */
          play: function(sprite, internal) {
            var self2 = this;
            var id = null;
            if (typeof sprite === "number") {
              id = sprite;
              sprite = null;
            } else if (typeof sprite === "string" && self2._state === "loaded" && !self2._sprite[sprite]) {
              return null;
            } else if (typeof sprite === "undefined") {
              sprite = "__default";
              if (!self2._playLock) {
                var num = 0;
                for (var i = 0; i < self2._sounds.length; i++) {
                  if (self2._sounds[i]._paused && !self2._sounds[i]._ended) {
                    num++;
                    id = self2._sounds[i]._id;
                  }
                }
                if (num === 1) {
                  sprite = null;
                } else {
                  id = null;
                }
              }
            }
            var sound = id ? self2._soundById(id) : self2._inactiveSound();
            if (!sound) {
              return null;
            }
            if (id && !sprite) {
              sprite = sound._sprite || "__default";
            }
            if (self2._state !== "loaded") {
              sound._sprite = sprite;
              sound._ended = false;
              var soundId = sound._id;
              self2._queue.push({
                event: "play",
                action: function() {
                  self2.play(soundId);
                }
              });
              return soundId;
            }
            if (id && !sound._paused) {
              if (!internal) {
                self2._loadQueue("play");
              }
              return sound._id;
            }
            if (self2._webAudio) {
              Howler2._autoResume();
            }
            var seek = Math.max(0, sound._seek > 0 ? sound._seek : self2._sprite[sprite][0] / 1e3);
            var duration = Math.max(0, (self2._sprite[sprite][0] + self2._sprite[sprite][1]) / 1e3 - seek);
            var timeout = duration * 1e3 / Math.abs(sound._rate);
            var start = self2._sprite[sprite][0] / 1e3;
            var stop = (self2._sprite[sprite][0] + self2._sprite[sprite][1]) / 1e3;
            sound._sprite = sprite;
            sound._ended = false;
            var setParams = function() {
              sound._paused = false;
              sound._seek = seek;
              sound._start = start;
              sound._stop = stop;
              sound._loop = !!(sound._loop || self2._sprite[sprite][2]);
            };
            if (seek >= stop) {
              self2._ended(sound);
              return;
            }
            var node = sound._node;
            if (self2._webAudio) {
              var playWebAudio = function() {
                self2._playLock = false;
                setParams();
                self2._refreshBuffer(sound);
                var vol = sound._muted || self2._muted ? 0 : sound._volume;
                node.gain.setValueAtTime(vol, Howler2.ctx.currentTime);
                sound._playStart = Howler2.ctx.currentTime;
                if (typeof node.bufferSource.start === "undefined") {
                  sound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);
                } else {
                  sound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);
                }
                if (timeout !== Infinity) {
                  self2._endTimers[sound._id] = setTimeout(self2._ended.bind(self2, sound), timeout);
                }
                if (!internal) {
                  setTimeout(function() {
                    self2._emit("play", sound._id);
                    self2._loadQueue();
                  }, 0);
                }
              };
              if (Howler2.state === "running" && Howler2.ctx.state !== "interrupted") {
                playWebAudio();
              } else {
                self2._playLock = true;
                self2.once("resume", playWebAudio);
                self2._clearTimer(sound._id);
              }
            } else {
              var playHtml5 = function() {
                node.currentTime = seek;
                node.muted = sound._muted || self2._muted || Howler2._muted || node.muted;
                node.volume = sound._volume * Howler2.volume();
                node.playbackRate = sound._rate;
                try {
                  var play = node.play();
                  if (play && typeof Promise !== "undefined" && (play instanceof Promise || typeof play.then === "function")) {
                    self2._playLock = true;
                    setParams();
                    play.then(function() {
                      self2._playLock = false;
                      node._unlocked = true;
                      if (!internal) {
                        self2._emit("play", sound._id);
                      } else {
                        self2._loadQueue();
                      }
                    }).catch(function() {
                      self2._playLock = false;
                      self2._emit("playerror", sound._id, "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");
                      sound._ended = true;
                      sound._paused = true;
                    });
                  } else if (!internal) {
                    self2._playLock = false;
                    setParams();
                    self2._emit("play", sound._id);
                  }
                  node.playbackRate = sound._rate;
                  if (node.paused) {
                    self2._emit("playerror", sound._id, "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");
                    return;
                  }
                  if (sprite !== "__default" || sound._loop) {
                    self2._endTimers[sound._id] = setTimeout(self2._ended.bind(self2, sound), timeout);
                  } else {
                    self2._endTimers[sound._id] = function() {
                      self2._ended(sound);
                      node.removeEventListener("ended", self2._endTimers[sound._id], false);
                    };
                    node.addEventListener("ended", self2._endTimers[sound._id], false);
                  }
                } catch (err) {
                  self2._emit("playerror", sound._id, err);
                }
              };
              if (node.src === "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA") {
                node.src = self2._src;
                node.load();
              }
              var loadedNoReadyState = window && window.ejecta || !node.readyState && Howler2._navigator.isCocoonJS;
              if (node.readyState >= 3 || loadedNoReadyState) {
                playHtml5();
              } else {
                self2._playLock = true;
                self2._state = "loading";
                var listener = function() {
                  self2._state = "loaded";
                  playHtml5();
                  node.removeEventListener(Howler2._canPlayEvent, listener, false);
                };
                node.addEventListener(Howler2._canPlayEvent, listener, false);
                self2._clearTimer(sound._id);
              }
            }
            return sound._id;
          },
          /**
           * Pause playback and save current position.
           * @param  {Number} id The sound ID (empty to pause all in group).
           * @return {Howl}
           */
          pause: function(id) {
            var self2 = this;
            if (self2._state !== "loaded" || self2._playLock) {
              self2._queue.push({
                event: "pause",
                action: function() {
                  self2.pause(id);
                }
              });
              return self2;
            }
            var ids = self2._getSoundIds(id);
            for (var i = 0; i < ids.length; i++) {
              self2._clearTimer(ids[i]);
              var sound = self2._soundById(ids[i]);
              if (sound && !sound._paused) {
                sound._seek = self2.seek(ids[i]);
                sound._rateSeek = 0;
                sound._paused = true;
                self2._stopFade(ids[i]);
                if (sound._node) {
                  if (self2._webAudio) {
                    if (!sound._node.bufferSource) {
                      continue;
                    }
                    if (typeof sound._node.bufferSource.stop === "undefined") {
                      sound._node.bufferSource.noteOff(0);
                    } else {
                      sound._node.bufferSource.stop(0);
                    }
                    self2._cleanBuffer(sound._node);
                  } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {
                    sound._node.pause();
                  }
                }
              }
              if (!arguments[1]) {
                self2._emit("pause", sound ? sound._id : null);
              }
            }
            return self2;
          },
          /**
           * Stop playback and reset to start.
           * @param  {Number} id The sound ID (empty to stop all in group).
           * @param  {Boolean} internal Internal Use: true prevents event firing.
           * @return {Howl}
           */
          stop: function(id, internal) {
            var self2 = this;
            if (self2._state !== "loaded" || self2._playLock) {
              self2._queue.push({
                event: "stop",
                action: function() {
                  self2.stop(id);
                }
              });
              return self2;
            }
            var ids = self2._getSoundIds(id);
            for (var i = 0; i < ids.length; i++) {
              self2._clearTimer(ids[i]);
              var sound = self2._soundById(ids[i]);
              if (sound) {
                sound._seek = sound._start || 0;
                sound._rateSeek = 0;
                sound._paused = true;
                sound._ended = true;
                self2._stopFade(ids[i]);
                if (sound._node) {
                  if (self2._webAudio) {
                    if (sound._node.bufferSource) {
                      if (typeof sound._node.bufferSource.stop === "undefined") {
                        sound._node.bufferSource.noteOff(0);
                      } else {
                        sound._node.bufferSource.stop(0);
                      }
                      self2._cleanBuffer(sound._node);
                    }
                  } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {
                    sound._node.currentTime = sound._start || 0;
                    sound._node.pause();
                    if (sound._node.duration === Infinity) {
                      self2._clearSound(sound._node);
                    }
                  }
                }
                if (!internal) {
                  self2._emit("stop", sound._id);
                }
              }
            }
            return self2;
          },
          /**
           * Mute/unmute a single sound or all sounds in this Howl group.
           * @param  {Boolean} muted Set to true to mute and false to unmute.
           * @param  {Number} id    The sound ID to update (omit to mute/unmute all).
           * @return {Howl}
           */
          mute: function(muted, id) {
            var self2 = this;
            if (self2._state !== "loaded" || self2._playLock) {
              self2._queue.push({
                event: "mute",
                action: function() {
                  self2.mute(muted, id);
                }
              });
              return self2;
            }
            if (typeof id === "undefined") {
              if (typeof muted === "boolean") {
                self2._muted = muted;
              } else {
                return self2._muted;
              }
            }
            var ids = self2._getSoundIds(id);
            for (var i = 0; i < ids.length; i++) {
              var sound = self2._soundById(ids[i]);
              if (sound) {
                sound._muted = muted;
                if (sound._interval) {
                  self2._stopFade(sound._id);
                }
                if (self2._webAudio && sound._node) {
                  sound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler2.ctx.currentTime);
                } else if (sound._node) {
                  sound._node.muted = Howler2._muted ? true : muted;
                }
                self2._emit("mute", sound._id);
              }
            }
            return self2;
          },
          /**
           * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.
           *   volume() -> Returns the group's volume value.
           *   volume(id) -> Returns the sound id's current volume.
           *   volume(vol) -> Sets the volume of all sounds in this Howl group.
           *   volume(vol, id) -> Sets the volume of passed sound id.
           * @return {Howl/Number} Returns self or current volume.
           */
          volume: function() {
            var self2 = this;
            var args = arguments;
            var vol, id;
            if (args.length === 0) {
              return self2._volume;
            } else if (args.length === 1 || args.length === 2 && typeof args[1] === "undefined") {
              var ids = self2._getSoundIds();
              var index = ids.indexOf(args[0]);
              if (index >= 0) {
                id = parseInt(args[0], 10);
              } else {
                vol = parseFloat(args[0]);
              }
            } else if (args.length >= 2) {
              vol = parseFloat(args[0]);
              id = parseInt(args[1], 10);
            }
            var sound;
            if (typeof vol !== "undefined" && vol >= 0 && vol <= 1) {
              if (self2._state !== "loaded" || self2._playLock) {
                self2._queue.push({
                  event: "volume",
                  action: function() {
                    self2.volume.apply(self2, args);
                  }
                });
                return self2;
              }
              if (typeof id === "undefined") {
                self2._volume = vol;
              }
              id = self2._getSoundIds(id);
              for (var i = 0; i < id.length; i++) {
                sound = self2._soundById(id[i]);
                if (sound) {
                  sound._volume = vol;
                  if (!args[2]) {
                    self2._stopFade(id[i]);
                  }
                  if (self2._webAudio && sound._node && !sound._muted) {
                    sound._node.gain.setValueAtTime(vol, Howler2.ctx.currentTime);
                  } else if (sound._node && !sound._muted) {
                    sound._node.volume = vol * Howler2.volume();
                  }
                  self2._emit("volume", sound._id);
                }
              }
            } else {
              sound = id ? self2._soundById(id) : self2._sounds[0];
              return sound ? sound._volume : 0;
            }
            return self2;
          },
          /**
           * Fade a currently playing sound between two volumes (if no id is passed, all sounds will fade).
           * @param  {Number} from The value to fade from (0.0 to 1.0).
           * @param  {Number} to   The volume to fade to (0.0 to 1.0).
           * @param  {Number} len  Time in milliseconds to fade.
           * @param  {Number} id   The sound id (omit to fade all sounds).
           * @return {Howl}
           */
          fade: function(from, to, len4, id) {
            var self2 = this;
            if (self2._state !== "loaded" || self2._playLock) {
              self2._queue.push({
                event: "fade",
                action: function() {
                  self2.fade(from, to, len4, id);
                }
              });
              return self2;
            }
            from = Math.min(Math.max(0, parseFloat(from)), 1);
            to = Math.min(Math.max(0, parseFloat(to)), 1);
            len4 = parseFloat(len4);
            self2.volume(from, id);
            var ids = self2._getSoundIds(id);
            for (var i = 0; i < ids.length; i++) {
              var sound = self2._soundById(ids[i]);
              if (sound) {
                if (!id) {
                  self2._stopFade(ids[i]);
                }
                if (self2._webAudio && !sound._muted) {
                  var currentTime = Howler2.ctx.currentTime;
                  var end = currentTime + len4 / 1e3;
                  sound._volume = from;
                  sound._node.gain.setValueAtTime(from, currentTime);
                  sound._node.gain.linearRampToValueAtTime(to, end);
                }
                self2._startFadeInterval(sound, from, to, len4, ids[i], typeof id === "undefined");
              }
            }
            return self2;
          },
          /**
           * Starts the internal interval to fade a sound.
           * @param  {Object} sound Reference to sound to fade.
           * @param  {Number} from The value to fade from (0.0 to 1.0).
           * @param  {Number} to   The volume to fade to (0.0 to 1.0).
           * @param  {Number} len  Time in milliseconds to fade.
           * @param  {Number} id   The sound id to fade.
           * @param  {Boolean} isGroup   If true, set the volume on the group.
           */
          _startFadeInterval: function(sound, from, to, len4, id, isGroup) {
            var self2 = this;
            var vol = from;
            var diff = to - from;
            var steps = Math.abs(diff / 0.01);
            var stepLen = Math.max(4, steps > 0 ? len4 / steps : len4);
            var lastTick = Date.now();
            sound._fadeTo = to;
            sound._interval = setInterval(function() {
              var tick = (Date.now() - lastTick) / len4;
              lastTick = Date.now();
              vol += diff * tick;
              vol = Math.round(vol * 100) / 100;
              if (diff < 0) {
                vol = Math.max(to, vol);
              } else {
                vol = Math.min(to, vol);
              }
              if (self2._webAudio) {
                sound._volume = vol;
              } else {
                self2.volume(vol, sound._id, true);
              }
              if (isGroup) {
                self2._volume = vol;
              }
              if (to < from && vol <= to || to > from && vol >= to) {
                clearInterval(sound._interval);
                sound._interval = null;
                sound._fadeTo = null;
                self2.volume(to, sound._id);
                self2._emit("fade", sound._id);
              }
            }, stepLen);
          },
          /**
           * Internal method that stops the currently playing fade when
           * a new fade starts, volume is changed or the sound is stopped.
           * @param  {Number} id The sound id.
           * @return {Howl}
           */
          _stopFade: function(id) {
            var self2 = this;
            var sound = self2._soundById(id);
            if (sound && sound._interval) {
              if (self2._webAudio) {
                sound._node.gain.cancelScheduledValues(Howler2.ctx.currentTime);
              }
              clearInterval(sound._interval);
              sound._interval = null;
              self2.volume(sound._fadeTo, id);
              sound._fadeTo = null;
              self2._emit("fade", id);
            }
            return self2;
          },
          /**
           * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.
           *   loop() -> Returns the group's loop value.
           *   loop(id) -> Returns the sound id's loop value.
           *   loop(loop) -> Sets the loop value for all sounds in this Howl group.
           *   loop(loop, id) -> Sets the loop value of passed sound id.
           * @return {Howl/Boolean} Returns self or current loop value.
           */
          loop: function() {
            var self2 = this;
            var args = arguments;
            var loop, id, sound;
            if (args.length === 0) {
              return self2._loop;
            } else if (args.length === 1) {
              if (typeof args[0] === "boolean") {
                loop = args[0];
                self2._loop = loop;
              } else {
                sound = self2._soundById(parseInt(args[0], 10));
                return sound ? sound._loop : false;
              }
            } else if (args.length === 2) {
              loop = args[0];
              id = parseInt(args[1], 10);
            }
            var ids = self2._getSoundIds(id);
            for (var i = 0; i < ids.length; i++) {
              sound = self2._soundById(ids[i]);
              if (sound) {
                sound._loop = loop;
                if (self2._webAudio && sound._node && sound._node.bufferSource) {
                  sound._node.bufferSource.loop = loop;
                  if (loop) {
                    sound._node.bufferSource.loopStart = sound._start || 0;
                    sound._node.bufferSource.loopEnd = sound._stop;
                    if (self2.playing(ids[i])) {
                      self2.pause(ids[i], true);
                      self2.play(ids[i], true);
                    }
                  }
                }
              }
            }
            return self2;
          },
          /**
           * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.
           *   rate() -> Returns the first sound node's current playback rate.
           *   rate(id) -> Returns the sound id's current playback rate.
           *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.
           *   rate(rate, id) -> Sets the playback rate of passed sound id.
           * @return {Howl/Number} Returns self or the current playback rate.
           */
          rate: function() {
            var self2 = this;
            var args = arguments;
            var rate, id;
            if (args.length === 0) {
              id = self2._sounds[0]._id;
            } else if (args.length === 1) {
              var ids = self2._getSoundIds();
              var index = ids.indexOf(args[0]);
              if (index >= 0) {
                id = parseInt(args[0], 10);
              } else {
                rate = parseFloat(args[0]);
              }
            } else if (args.length === 2) {
              rate = parseFloat(args[0]);
              id = parseInt(args[1], 10);
            }
            var sound;
            if (typeof rate === "number") {
              if (self2._state !== "loaded" || self2._playLock) {
                self2._queue.push({
                  event: "rate",
                  action: function() {
                    self2.rate.apply(self2, args);
                  }
                });
                return self2;
              }
              if (typeof id === "undefined") {
                self2._rate = rate;
              }
              id = self2._getSoundIds(id);
              for (var i = 0; i < id.length; i++) {
                sound = self2._soundById(id[i]);
                if (sound) {
                  if (self2.playing(id[i])) {
                    sound._rateSeek = self2.seek(id[i]);
                    sound._playStart = self2._webAudio ? Howler2.ctx.currentTime : sound._playStart;
                  }
                  sound._rate = rate;
                  if (self2._webAudio && sound._node && sound._node.bufferSource) {
                    sound._node.bufferSource.playbackRate.setValueAtTime(rate, Howler2.ctx.currentTime);
                  } else if (sound._node) {
                    sound._node.playbackRate = rate;
                  }
                  var seek = self2.seek(id[i]);
                  var duration = (self2._sprite[sound._sprite][0] + self2._sprite[sound._sprite][1]) / 1e3 - seek;
                  var timeout = duration * 1e3 / Math.abs(sound._rate);
                  if (self2._endTimers[id[i]] || !sound._paused) {
                    self2._clearTimer(id[i]);
                    self2._endTimers[id[i]] = setTimeout(self2._ended.bind(self2, sound), timeout);
                  }
                  self2._emit("rate", sound._id);
                }
              }
            } else {
              sound = self2._soundById(id);
              return sound ? sound._rate : self2._rate;
            }
            return self2;
          },
          /**
           * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.
           *   seek() -> Returns the first sound node's current seek position.
           *   seek(id) -> Returns the sound id's current seek position.
           *   seek(seek) -> Sets the seek position of the first sound node.
           *   seek(seek, id) -> Sets the seek position of passed sound id.
           * @return {Howl/Number} Returns self or the current seek position.
           */
          seek: function() {
            var self2 = this;
            var args = arguments;
            var seek, id;
            if (args.length === 0) {
              if (self2._sounds.length) {
                id = self2._sounds[0]._id;
              }
            } else if (args.length === 1) {
              var ids = self2._getSoundIds();
              var index = ids.indexOf(args[0]);
              if (index >= 0) {
                id = parseInt(args[0], 10);
              } else if (self2._sounds.length) {
                id = self2._sounds[0]._id;
                seek = parseFloat(args[0]);
              }
            } else if (args.length === 2) {
              seek = parseFloat(args[0]);
              id = parseInt(args[1], 10);
            }
            if (typeof id === "undefined") {
              return 0;
            }
            if (typeof seek === "number" && (self2._state !== "loaded" || self2._playLock)) {
              self2._queue.push({
                event: "seek",
                action: function() {
                  self2.seek.apply(self2, args);
                }
              });
              return self2;
            }
            var sound = self2._soundById(id);
            if (sound) {
              if (typeof seek === "number" && seek >= 0) {
                var playing = self2.playing(id);
                if (playing) {
                  self2.pause(id, true);
                }
                sound._seek = seek;
                sound._ended = false;
                self2._clearTimer(id);
                if (!self2._webAudio && sound._node && !isNaN(sound._node.duration)) {
                  sound._node.currentTime = seek;
                }
                var seekAndEmit = function() {
                  if (playing) {
                    self2.play(id, true);
                  }
                  self2._emit("seek", id);
                };
                if (playing && !self2._webAudio) {
                  var emitSeek = function() {
                    if (!self2._playLock) {
                      seekAndEmit();
                    } else {
                      setTimeout(emitSeek, 0);
                    }
                  };
                  setTimeout(emitSeek, 0);
                } else {
                  seekAndEmit();
                }
              } else {
                if (self2._webAudio) {
                  var realTime = self2.playing(id) ? Howler2.ctx.currentTime - sound._playStart : 0;
                  var rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;
                  return sound._seek + (rateSeek + realTime * Math.abs(sound._rate));
                } else {
                  return sound._node.currentTime;
                }
              }
            }
            return self2;
          },
          /**
           * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.
           * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.
           * @return {Boolean} True if playing and false if not.
           */
          playing: function(id) {
            var self2 = this;
            if (typeof id === "number") {
              var sound = self2._soundById(id);
              return sound ? !sound._paused : false;
            }
            for (var i = 0; i < self2._sounds.length; i++) {
              if (!self2._sounds[i]._paused) {
                return true;
              }
            }
            return false;
          },
          /**
           * Get the duration of this sound. Passing a sound id will return the sprite duration.
           * @param  {Number} id The sound id to check. If none is passed, return full source duration.
           * @return {Number} Audio duration in seconds.
           */
          duration: function(id) {
            var self2 = this;
            var duration = self2._duration;
            var sound = self2._soundById(id);
            if (sound) {
              duration = self2._sprite[sound._sprite][1] / 1e3;
            }
            return duration;
          },
          /**
           * Returns the current loaded state of this Howl.
           * @return {String} 'unloaded', 'loading', 'loaded'
           */
          state: function() {
            return this._state;
          },
          /**
           * Unload and destroy the current Howl object.
           * This will immediately stop all sound instances attached to this group.
           */
          unload: function() {
            var self2 = this;
            var sounds = self2._sounds;
            for (var i = 0; i < sounds.length; i++) {
              if (!sounds[i]._paused) {
                self2.stop(sounds[i]._id);
              }
              if (!self2._webAudio) {
                self2._clearSound(sounds[i]._node);
                sounds[i]._node.removeEventListener("error", sounds[i]._errorFn, false);
                sounds[i]._node.removeEventListener(Howler2._canPlayEvent, sounds[i]._loadFn, false);
                sounds[i]._node.removeEventListener("ended", sounds[i]._endFn, false);
                Howler2._releaseHtml5Audio(sounds[i]._node);
              }
              delete sounds[i]._node;
              self2._clearTimer(sounds[i]._id);
            }
            var index = Howler2._howls.indexOf(self2);
            if (index >= 0) {
              Howler2._howls.splice(index, 1);
            }
            var remCache = true;
            for (i = 0; i < Howler2._howls.length; i++) {
              if (Howler2._howls[i]._src === self2._src || self2._src.indexOf(Howler2._howls[i]._src) >= 0) {
                remCache = false;
                break;
              }
            }
            if (cache && remCache) {
              delete cache[self2._src];
            }
            Howler2.noAudio = false;
            self2._state = "unloaded";
            self2._sounds = [];
            self2 = null;
            return null;
          },
          /**
           * Listen to a custom event.
           * @param  {String}   event Event name.
           * @param  {Function} fn    Listener to call.
           * @param  {Number}   id    (optional) Only listen to events for this sound.
           * @param  {Number}   once  (INTERNAL) Marks event to fire only once.
           * @return {Howl}
           */
          on: function(event, fn, id, once) {
            var self2 = this;
            var events = self2["_on" + event];
            if (typeof fn === "function") {
              events.push(once ? { id, fn, once } : { id, fn });
            }
            return self2;
          },
          /**
           * Remove a custom event. Call without parameters to remove all events.
           * @param  {String}   event Event name.
           * @param  {Function} fn    Listener to remove. Leave empty to remove all.
           * @param  {Number}   id    (optional) Only remove events for this sound.
           * @return {Howl}
           */
          off: function(event, fn, id) {
            var self2 = this;
            var events = self2["_on" + event];
            var i = 0;
            if (typeof fn === "number") {
              id = fn;
              fn = null;
            }
            if (fn || id) {
              for (i = 0; i < events.length; i++) {
                var isId = id === events[i].id;
                if (fn === events[i].fn && isId || !fn && isId) {
                  events.splice(i, 1);
                  break;
                }
              }
            } else if (event) {
              self2["_on" + event] = [];
            } else {
              var keys = Object.keys(self2);
              for (i = 0; i < keys.length; i++) {
                if (keys[i].indexOf("_on") === 0 && Array.isArray(self2[keys[i]])) {
                  self2[keys[i]] = [];
                }
              }
            }
            return self2;
          },
          /**
           * Listen to a custom event and remove it once fired.
           * @param  {String}   event Event name.
           * @param  {Function} fn    Listener to call.
           * @param  {Number}   id    (optional) Only listen to events for this sound.
           * @return {Howl}
           */
          once: function(event, fn, id) {
            var self2 = this;
            self2.on(event, fn, id, 1);
            return self2;
          },
          /**
           * Emit all events of a specific type and pass the sound id.
           * @param  {String} event Event name.
           * @param  {Number} id    Sound ID.
           * @param  {Number} msg   Message to go with event.
           * @return {Howl}
           */
          _emit: function(event, id, msg) {
            var self2 = this;
            var events = self2["_on" + event];
            for (var i = events.length - 1; i >= 0; i--) {
              if (!events[i].id || events[i].id === id || event === "load") {
                setTimeout(function(fn) {
                  fn.call(this, id, msg);
                }.bind(self2, events[i].fn), 0);
                if (events[i].once) {
                  self2.off(event, events[i].fn, events[i].id);
                }
              }
            }
            self2._loadQueue(event);
            return self2;
          },
          /**
           * Queue of actions initiated before the sound has loaded.
           * These will be called in sequence, with the next only firing
           * after the previous has finished executing (even if async like play).
           * @return {Howl}
           */
          _loadQueue: function(event) {
            var self2 = this;
            if (self2._queue.length > 0) {
              var task = self2._queue[0];
              if (task.event === event) {
                self2._queue.shift();
                self2._loadQueue();
              }
              if (!event) {
                task.action();
              }
            }
            return self2;
          },
          /**
           * Fired when playback ends at the end of the duration.
           * @param  {Sound} sound The sound object to work with.
           * @return {Howl}
           */
          _ended: function(sound) {
            var self2 = this;
            var sprite = sound._sprite;
            if (!self2._webAudio && sound._node && !sound._node.paused && !sound._node.ended && sound._node.currentTime < sound._stop) {
              setTimeout(self2._ended.bind(self2, sound), 100);
              return self2;
            }
            var loop = !!(sound._loop || self2._sprite[sprite][2]);
            self2._emit("end", sound._id);
            if (!self2._webAudio && loop) {
              self2.stop(sound._id, true).play(sound._id);
            }
            if (self2._webAudio && loop) {
              self2._emit("play", sound._id);
              sound._seek = sound._start || 0;
              sound._rateSeek = 0;
              sound._playStart = Howler2.ctx.currentTime;
              var timeout = (sound._stop - sound._start) * 1e3 / Math.abs(sound._rate);
              self2._endTimers[sound._id] = setTimeout(self2._ended.bind(self2, sound), timeout);
            }
            if (self2._webAudio && !loop) {
              sound._paused = true;
              sound._ended = true;
              sound._seek = sound._start || 0;
              sound._rateSeek = 0;
              self2._clearTimer(sound._id);
              self2._cleanBuffer(sound._node);
              Howler2._autoSuspend();
            }
            if (!self2._webAudio && !loop) {
              self2.stop(sound._id, true);
            }
            return self2;
          },
          /**
           * Clear the end timer for a sound playback.
           * @param  {Number} id The sound ID.
           * @return {Howl}
           */
          _clearTimer: function(id) {
            var self2 = this;
            if (self2._endTimers[id]) {
              if (typeof self2._endTimers[id] !== "function") {
                clearTimeout(self2._endTimers[id]);
              } else {
                var sound = self2._soundById(id);
                if (sound && sound._node) {
                  sound._node.removeEventListener("ended", self2._endTimers[id], false);
                }
              }
              delete self2._endTimers[id];
            }
            return self2;
          },
          /**
           * Return the sound identified by this ID, or return null.
           * @param  {Number} id Sound ID
           * @return {Object}    Sound object or null.
           */
          _soundById: function(id) {
            var self2 = this;
            for (var i = 0; i < self2._sounds.length; i++) {
              if (id === self2._sounds[i]._id) {
                return self2._sounds[i];
              }
            }
            return null;
          },
          /**
           * Return an inactive sound from the pool or create a new one.
           * @return {Sound} Sound playback object.
           */
          _inactiveSound: function() {
            var self2 = this;
            self2._drain();
            for (var i = 0; i < self2._sounds.length; i++) {
              if (self2._sounds[i]._ended) {
                return self2._sounds[i].reset();
              }
            }
            return new Sound2(self2);
          },
          /**
           * Drain excess inactive sounds from the pool.
           */
          _drain: function() {
            var self2 = this;
            var limit = self2._pool;
            var cnt = 0;
            var i = 0;
            if (self2._sounds.length < limit) {
              return;
            }
            for (i = 0; i < self2._sounds.length; i++) {
              if (self2._sounds[i]._ended) {
                cnt++;
              }
            }
            for (i = self2._sounds.length - 1; i >= 0; i--) {
              if (cnt <= limit) {
                return;
              }
              if (self2._sounds[i]._ended) {
                if (self2._webAudio && self2._sounds[i]._node) {
                  self2._sounds[i]._node.disconnect(0);
                }
                self2._sounds.splice(i, 1);
                cnt--;
              }
            }
          },
          /**
           * Get all ID's from the sounds pool.
           * @param  {Number} id Only return one ID if one is passed.
           * @return {Array}    Array of IDs.
           */
          _getSoundIds: function(id) {
            var self2 = this;
            if (typeof id === "undefined") {
              var ids = [];
              for (var i = 0; i < self2._sounds.length; i++) {
                ids.push(self2._sounds[i]._id);
              }
              return ids;
            } else {
              return [id];
            }
          },
          /**
           * Load the sound back into the buffer source.
           * @param  {Sound} sound The sound object to work with.
           * @return {Howl}
           */
          _refreshBuffer: function(sound) {
            var self2 = this;
            sound._node.bufferSource = Howler2.ctx.createBufferSource();
            sound._node.bufferSource.buffer = cache[self2._src];
            if (sound._panner) {
              sound._node.bufferSource.connect(sound._panner);
            } else {
              sound._node.bufferSource.connect(sound._node);
            }
            sound._node.bufferSource.loop = sound._loop;
            if (sound._loop) {
              sound._node.bufferSource.loopStart = sound._start || 0;
              sound._node.bufferSource.loopEnd = sound._stop || 0;
            }
            sound._node.bufferSource.playbackRate.setValueAtTime(sound._rate, Howler2.ctx.currentTime);
            return self2;
          },
          /**
           * Prevent memory leaks by cleaning up the buffer source after playback.
           * @param  {Object} node Sound's audio node containing the buffer source.
           * @return {Howl}
           */
          _cleanBuffer: function(node) {
            var self2 = this;
            var isIOS = Howler2._navigator && Howler2._navigator.vendor.indexOf("Apple") >= 0;
            if (!node.bufferSource) {
              return self2;
            }
            if (Howler2._scratchBuffer && node.bufferSource) {
              node.bufferSource.onended = null;
              node.bufferSource.disconnect(0);
              if (isIOS) {
                try {
                  node.bufferSource.buffer = Howler2._scratchBuffer;
                } catch (e) {
                }
              }
            }
            node.bufferSource = null;
            return self2;
          },
          /**
           * Set the source to a 0-second silence to stop any downloading (except in IE).
           * @param  {Object} node Audio node to clear.
           */
          _clearSound: function(node) {
            var checkIE = /MSIE |Trident\//.test(Howler2._navigator && Howler2._navigator.userAgent);
            if (!checkIE) {
              node.src = "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA";
            }
          }
        };
        var Sound2 = function(howl) {
          this._parent = howl;
          this.init();
        };
        Sound2.prototype = {
          /**
           * Initialize a new Sound object.
           * @return {Sound}
           */
          init: function() {
            var self2 = this;
            var parent = self2._parent;
            self2._muted = parent._muted;
            self2._loop = parent._loop;
            self2._volume = parent._volume;
            self2._rate = parent._rate;
            self2._seek = 0;
            self2._paused = true;
            self2._ended = true;
            self2._sprite = "__default";
            self2._id = ++Howler2._counter;
            parent._sounds.push(self2);
            self2.create();
            return self2;
          },
          /**
           * Create and setup a new sound object, whether HTML5 Audio or Web Audio.
           * @return {Sound}
           */
          create: function() {
            var self2 = this;
            var parent = self2._parent;
            var volume = Howler2._muted || self2._muted || self2._parent._muted ? 0 : self2._volume;
            if (parent._webAudio) {
              self2._node = typeof Howler2.ctx.createGain === "undefined" ? Howler2.ctx.createGainNode() : Howler2.ctx.createGain();
              self2._node.gain.setValueAtTime(volume, Howler2.ctx.currentTime);
              self2._node.paused = true;
              self2._node.connect(Howler2.masterGain);
            } else if (!Howler2.noAudio) {
              self2._node = Howler2._obtainHtml5Audio();
              self2._errorFn = self2._errorListener.bind(self2);
              self2._node.addEventListener("error", self2._errorFn, false);
              self2._loadFn = self2._loadListener.bind(self2);
              self2._node.addEventListener(Howler2._canPlayEvent, self2._loadFn, false);
              self2._endFn = self2._endListener.bind(self2);
              self2._node.addEventListener("ended", self2._endFn, false);
              self2._node.src = parent._src;
              self2._node.preload = parent._preload === true ? "auto" : parent._preload;
              self2._node.volume = volume * Howler2.volume();
              self2._node.load();
            }
            return self2;
          },
          /**
           * Reset the parameters of this sound to the original state (for recycle).
           * @return {Sound}
           */
          reset: function() {
            var self2 = this;
            var parent = self2._parent;
            self2._muted = parent._muted;
            self2._loop = parent._loop;
            self2._volume = parent._volume;
            self2._rate = parent._rate;
            self2._seek = 0;
            self2._rateSeek = 0;
            self2._paused = true;
            self2._ended = true;
            self2._sprite = "__default";
            self2._id = ++Howler2._counter;
            return self2;
          },
          /**
           * HTML5 Audio error listener callback.
           */
          _errorListener: function() {
            var self2 = this;
            self2._parent._emit("loaderror", self2._id, self2._node.error ? self2._node.error.code : 0);
            self2._node.removeEventListener("error", self2._errorFn, false);
          },
          /**
           * HTML5 Audio canplaythrough listener callback.
           */
          _loadListener: function() {
            var self2 = this;
            var parent = self2._parent;
            parent._duration = Math.ceil(self2._node.duration * 10) / 10;
            if (Object.keys(parent._sprite).length === 0) {
              parent._sprite = { __default: [0, parent._duration * 1e3] };
            }
            if (parent._state !== "loaded") {
              parent._state = "loaded";
              parent._emit("load");
              parent._loadQueue();
            }
            self2._node.removeEventListener(Howler2._canPlayEvent, self2._loadFn, false);
          },
          /**
           * HTML5 Audio ended listener callback.
           */
          _endListener: function() {
            var self2 = this;
            var parent = self2._parent;
            if (parent._duration === Infinity) {
              parent._duration = Math.ceil(self2._node.duration * 10) / 10;
              if (parent._sprite.__default[1] === Infinity) {
                parent._sprite.__default[1] = parent._duration * 1e3;
              }
              parent._ended(self2);
            }
            self2._node.removeEventListener("ended", self2._endFn, false);
          }
        };
        var cache = {};
        var loadBuffer = function(self2) {
          var url = self2._src;
          if (cache[url]) {
            self2._duration = cache[url].duration;
            loadSound(self2);
            return;
          }
          if (/^data:[^;]+;base64,/.test(url)) {
            var data = atob(url.split(",")[1]);
            var dataView = new Uint8Array(data.length);
            for (var i = 0; i < data.length; ++i) {
              dataView[i] = data.charCodeAt(i);
            }
            decodeAudioData(dataView.buffer, self2);
          } else {
            var xhr = new XMLHttpRequest();
            xhr.open(self2._xhr.method, url, true);
            xhr.withCredentials = self2._xhr.withCredentials;
            xhr.responseType = "arraybuffer";
            if (self2._xhr.headers) {
              Object.keys(self2._xhr.headers).forEach(function(key) {
                xhr.setRequestHeader(key, self2._xhr.headers[key]);
              });
            }
            xhr.onload = function() {
              var code = (xhr.status + "")[0];
              if (code !== "0" && code !== "2" && code !== "3") {
                self2._emit("loaderror", null, "Failed loading audio file with status: " + xhr.status + ".");
                return;
              }
              decodeAudioData(xhr.response, self2);
            };
            xhr.onerror = function() {
              if (self2._webAudio) {
                self2._html5 = true;
                self2._webAudio = false;
                self2._sounds = [];
                delete cache[url];
                self2.load();
              }
            };
            safeXhrSend(xhr);
          }
        };
        var safeXhrSend = function(xhr) {
          try {
            xhr.send();
          } catch (e) {
            xhr.onerror();
          }
        };
        var decodeAudioData = function(arraybuffer, self2) {
          var error = function() {
            self2._emit("loaderror", null, "Decoding audio data failed.");
          };
          var success = function(buffer) {
            if (buffer && self2._sounds.length > 0) {
              cache[self2._src] = buffer;
              loadSound(self2, buffer);
            } else {
              error();
            }
          };
          if (typeof Promise !== "undefined" && Howler2.ctx.decodeAudioData.length === 1) {
            Howler2.ctx.decodeAudioData(arraybuffer).then(success).catch(error);
          } else {
            Howler2.ctx.decodeAudioData(arraybuffer, success, error);
          }
        };
        var loadSound = function(self2, buffer) {
          if (buffer && !self2._duration) {
            self2._duration = buffer.duration;
          }
          if (Object.keys(self2._sprite).length === 0) {
            self2._sprite = { __default: [0, self2._duration * 1e3] };
          }
          if (self2._state !== "loaded") {
            self2._state = "loaded";
            self2._emit("load");
            self2._loadQueue();
          }
        };
        var setupAudioContext = function() {
          if (!Howler2.usingWebAudio) {
            return;
          }
          try {
            if (typeof AudioContext !== "undefined") {
              Howler2.ctx = new AudioContext();
            } else if (typeof webkitAudioContext !== "undefined") {
              Howler2.ctx = new webkitAudioContext();
            } else {
              Howler2.usingWebAudio = false;
            }
          } catch (e) {
            Howler2.usingWebAudio = false;
          }
          if (!Howler2.ctx) {
            Howler2.usingWebAudio = false;
          }
          var iOS = /iP(hone|od|ad)/.test(Howler2._navigator && Howler2._navigator.platform);
          var appVersion = Howler2._navigator && Howler2._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);
          var version = appVersion ? parseInt(appVersion[1], 10) : null;
          if (iOS && version && version < 9) {
            var safari = /safari/.test(Howler2._navigator && Howler2._navigator.userAgent.toLowerCase());
            if (Howler2._navigator && !safari) {
              Howler2.usingWebAudio = false;
            }
          }
          if (Howler2.usingWebAudio) {
            Howler2.masterGain = typeof Howler2.ctx.createGain === "undefined" ? Howler2.ctx.createGainNode() : Howler2.ctx.createGain();
            Howler2.masterGain.gain.setValueAtTime(Howler2._muted ? 0 : Howler2._volume, Howler2.ctx.currentTime);
            Howler2.masterGain.connect(Howler2.ctx.destination);
          }
          Howler2._setup();
        };
        if (typeof define === "function" && define.amd) {
          define([], function() {
            return {
              Howler: Howler2,
              Howl: Howl2
            };
          });
        }
        if (typeof exports !== "undefined") {
          exports.Howler = Howler2;
          exports.Howl = Howl2;
        }
        if (typeof global !== "undefined") {
          global.HowlerGlobal = HowlerGlobal2;
          global.Howler = Howler2;
          global.Howl = Howl2;
          global.Sound = Sound2;
        } else if (typeof window !== "undefined") {
          window.HowlerGlobal = HowlerGlobal2;
          window.Howler = Howler2;
          window.Howl = Howl2;
          window.Sound = Sound2;
        }
      })();
      (function() {
        "use strict";
        HowlerGlobal.prototype._pos = [0, 0, 0];
        HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];
        HowlerGlobal.prototype.stereo = function(pan) {
          var self2 = this;
          if (!self2.ctx || !self2.ctx.listener) {
            return self2;
          }
          for (var i = self2._howls.length - 1; i >= 0; i--) {
            self2._howls[i].stereo(pan);
          }
          return self2;
        };
        HowlerGlobal.prototype.pos = function(x, y, z) {
          var self2 = this;
          if (!self2.ctx || !self2.ctx.listener) {
            return self2;
          }
          y = typeof y !== "number" ? self2._pos[1] : y;
          z = typeof z !== "number" ? self2._pos[2] : z;
          if (typeof x === "number") {
            self2._pos = [x, y, z];
            if (typeof self2.ctx.listener.positionX !== "undefined") {
              self2.ctx.listener.positionX.setTargetAtTime(self2._pos[0], Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.positionY.setTargetAtTime(self2._pos[1], Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.positionZ.setTargetAtTime(self2._pos[2], Howler.ctx.currentTime, 0.1);
            } else {
              self2.ctx.listener.setPosition(self2._pos[0], self2._pos[1], self2._pos[2]);
            }
          } else {
            return self2._pos;
          }
          return self2;
        };
        HowlerGlobal.prototype.orientation = function(x, y, z, xUp, yUp, zUp) {
          var self2 = this;
          if (!self2.ctx || !self2.ctx.listener) {
            return self2;
          }
          var or = self2._orientation;
          y = typeof y !== "number" ? or[1] : y;
          z = typeof z !== "number" ? or[2] : z;
          xUp = typeof xUp !== "number" ? or[3] : xUp;
          yUp = typeof yUp !== "number" ? or[4] : yUp;
          zUp = typeof zUp !== "number" ? or[5] : zUp;
          if (typeof x === "number") {
            self2._orientation = [x, y, z, xUp, yUp, zUp];
            if (typeof self2.ctx.listener.forwardX !== "undefined") {
              self2.ctx.listener.forwardX.setTargetAtTime(x, Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.forwardY.setTargetAtTime(y, Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.forwardZ.setTargetAtTime(z, Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.upX.setTargetAtTime(xUp, Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.upY.setTargetAtTime(yUp, Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.upZ.setTargetAtTime(zUp, Howler.ctx.currentTime, 0.1);
            } else {
              self2.ctx.listener.setOrientation(x, y, z, xUp, yUp, zUp);
            }
          } else {
            return or;
          }
          return self2;
        };
        Howl.prototype.init = function(_super) {
          return function(o) {
            var self2 = this;
            self2._orientation = o.orientation || [1, 0, 0];
            self2._stereo = o.stereo || null;
            self2._pos = o.pos || null;
            self2._pannerAttr = {
              coneInnerAngle: typeof o.coneInnerAngle !== "undefined" ? o.coneInnerAngle : 360,
              coneOuterAngle: typeof o.coneOuterAngle !== "undefined" ? o.coneOuterAngle : 360,
              coneOuterGain: typeof o.coneOuterGain !== "undefined" ? o.coneOuterGain : 0,
              distanceModel: typeof o.distanceModel !== "undefined" ? o.distanceModel : "inverse",
              maxDistance: typeof o.maxDistance !== "undefined" ? o.maxDistance : 1e4,
              panningModel: typeof o.panningModel !== "undefined" ? o.panningModel : "HRTF",
              refDistance: typeof o.refDistance !== "undefined" ? o.refDistance : 1,
              rolloffFactor: typeof o.rolloffFactor !== "undefined" ? o.rolloffFactor : 1
            };
            self2._onstereo = o.onstereo ? [{ fn: o.onstereo }] : [];
            self2._onpos = o.onpos ? [{ fn: o.onpos }] : [];
            self2._onorientation = o.onorientation ? [{ fn: o.onorientation }] : [];
            return _super.call(this, o);
          };
        }(Howl.prototype.init);
        Howl.prototype.stereo = function(pan, id) {
          var self2 = this;
          if (!self2._webAudio) {
            return self2;
          }
          if (self2._state !== "loaded") {
            self2._queue.push({
              event: "stereo",
              action: function() {
                self2.stereo(pan, id);
              }
            });
            return self2;
          }
          var pannerType = typeof Howler.ctx.createStereoPanner === "undefined" ? "spatial" : "stereo";
          if (typeof id === "undefined") {
            if (typeof pan === "number") {
              self2._stereo = pan;
              self2._pos = [pan, 0, 0];
            } else {
              return self2._stereo;
            }
          }
          var ids = self2._getSoundIds(id);
          for (var i = 0; i < ids.length; i++) {
            var sound = self2._soundById(ids[i]);
            if (sound) {
              if (typeof pan === "number") {
                sound._stereo = pan;
                sound._pos = [pan, 0, 0];
                if (sound._node) {
                  sound._pannerAttr.panningModel = "equalpower";
                  if (!sound._panner || !sound._panner.pan) {
                    setupPanner(sound, pannerType);
                  }
                  if (pannerType === "spatial") {
                    if (typeof sound._panner.positionX !== "undefined") {
                      sound._panner.positionX.setValueAtTime(pan, Howler.ctx.currentTime);
                      sound._panner.positionY.setValueAtTime(0, Howler.ctx.currentTime);
                      sound._panner.positionZ.setValueAtTime(0, Howler.ctx.currentTime);
                    } else {
                      sound._panner.setPosition(pan, 0, 0);
                    }
                  } else {
                    sound._panner.pan.setValueAtTime(pan, Howler.ctx.currentTime);
                  }
                }
                self2._emit("stereo", sound._id);
              } else {
                return sound._stereo;
              }
            }
          }
          return self2;
        };
        Howl.prototype.pos = function(x, y, z, id) {
          var self2 = this;
          if (!self2._webAudio) {
            return self2;
          }
          if (self2._state !== "loaded") {
            self2._queue.push({
              event: "pos",
              action: function() {
                self2.pos(x, y, z, id);
              }
            });
            return self2;
          }
          y = typeof y !== "number" ? 0 : y;
          z = typeof z !== "number" ? -0.5 : z;
          if (typeof id === "undefined") {
            if (typeof x === "number") {
              self2._pos = [x, y, z];
            } else {
              return self2._pos;
            }
          }
          var ids = self2._getSoundIds(id);
          for (var i = 0; i < ids.length; i++) {
            var sound = self2._soundById(ids[i]);
            if (sound) {
              if (typeof x === "number") {
                sound._pos = [x, y, z];
                if (sound._node) {
                  if (!sound._panner || sound._panner.pan) {
                    setupPanner(sound, "spatial");
                  }
                  if (typeof sound._panner.positionX !== "undefined") {
                    sound._panner.positionX.setValueAtTime(x, Howler.ctx.currentTime);
                    sound._panner.positionY.setValueAtTime(y, Howler.ctx.currentTime);
                    sound._panner.positionZ.setValueAtTime(z, Howler.ctx.currentTime);
                  } else {
                    sound._panner.setPosition(x, y, z);
                  }
                }
                self2._emit("pos", sound._id);
              } else {
                return sound._pos;
              }
            }
          }
          return self2;
        };
        Howl.prototype.orientation = function(x, y, z, id) {
          var self2 = this;
          if (!self2._webAudio) {
            return self2;
          }
          if (self2._state !== "loaded") {
            self2._queue.push({
              event: "orientation",
              action: function() {
                self2.orientation(x, y, z, id);
              }
            });
            return self2;
          }
          y = typeof y !== "number" ? self2._orientation[1] : y;
          z = typeof z !== "number" ? self2._orientation[2] : z;
          if (typeof id === "undefined") {
            if (typeof x === "number") {
              self2._orientation = [x, y, z];
            } else {
              return self2._orientation;
            }
          }
          var ids = self2._getSoundIds(id);
          for (var i = 0; i < ids.length; i++) {
            var sound = self2._soundById(ids[i]);
            if (sound) {
              if (typeof x === "number") {
                sound._orientation = [x, y, z];
                if (sound._node) {
                  if (!sound._panner) {
                    if (!sound._pos) {
                      sound._pos = self2._pos || [0, 0, -0.5];
                    }
                    setupPanner(sound, "spatial");
                  }
                  if (typeof sound._panner.orientationX !== "undefined") {
                    sound._panner.orientationX.setValueAtTime(x, Howler.ctx.currentTime);
                    sound._panner.orientationY.setValueAtTime(y, Howler.ctx.currentTime);
                    sound._panner.orientationZ.setValueAtTime(z, Howler.ctx.currentTime);
                  } else {
                    sound._panner.setOrientation(x, y, z);
                  }
                }
                self2._emit("orientation", sound._id);
              } else {
                return sound._orientation;
              }
            }
          }
          return self2;
        };
        Howl.prototype.pannerAttr = function() {
          var self2 = this;
          var args = arguments;
          var o, id, sound;
          if (!self2._webAudio) {
            return self2;
          }
          if (args.length === 0) {
            return self2._pannerAttr;
          } else if (args.length === 1) {
            if (typeof args[0] === "object") {
              o = args[0];
              if (typeof id === "undefined") {
                if (!o.pannerAttr) {
                  o.pannerAttr = {
                    coneInnerAngle: o.coneInnerAngle,
                    coneOuterAngle: o.coneOuterAngle,
                    coneOuterGain: o.coneOuterGain,
                    distanceModel: o.distanceModel,
                    maxDistance: o.maxDistance,
                    refDistance: o.refDistance,
                    rolloffFactor: o.rolloffFactor,
                    panningModel: o.panningModel
                  };
                }
                self2._pannerAttr = {
                  coneInnerAngle: typeof o.pannerAttr.coneInnerAngle !== "undefined" ? o.pannerAttr.coneInnerAngle : self2._coneInnerAngle,
                  coneOuterAngle: typeof o.pannerAttr.coneOuterAngle !== "undefined" ? o.pannerAttr.coneOuterAngle : self2._coneOuterAngle,
                  coneOuterGain: typeof o.pannerAttr.coneOuterGain !== "undefined" ? o.pannerAttr.coneOuterGain : self2._coneOuterGain,
                  distanceModel: typeof o.pannerAttr.distanceModel !== "undefined" ? o.pannerAttr.distanceModel : self2._distanceModel,
                  maxDistance: typeof o.pannerAttr.maxDistance !== "undefined" ? o.pannerAttr.maxDistance : self2._maxDistance,
                  refDistance: typeof o.pannerAttr.refDistance !== "undefined" ? o.pannerAttr.refDistance : self2._refDistance,
                  rolloffFactor: typeof o.pannerAttr.rolloffFactor !== "undefined" ? o.pannerAttr.rolloffFactor : self2._rolloffFactor,
                  panningModel: typeof o.pannerAttr.panningModel !== "undefined" ? o.pannerAttr.panningModel : self2._panningModel
                };
              }
            } else {
              sound = self2._soundById(parseInt(args[0], 10));
              return sound ? sound._pannerAttr : self2._pannerAttr;
            }
          } else if (args.length === 2) {
            o = args[0];
            id = parseInt(args[1], 10);
          }
          var ids = self2._getSoundIds(id);
          for (var i = 0; i < ids.length; i++) {
            sound = self2._soundById(ids[i]);
            if (sound) {
              var pa = sound._pannerAttr;
              pa = {
                coneInnerAngle: typeof o.coneInnerAngle !== "undefined" ? o.coneInnerAngle : pa.coneInnerAngle,
                coneOuterAngle: typeof o.coneOuterAngle !== "undefined" ? o.coneOuterAngle : pa.coneOuterAngle,
                coneOuterGain: typeof o.coneOuterGain !== "undefined" ? o.coneOuterGain : pa.coneOuterGain,
                distanceModel: typeof o.distanceModel !== "undefined" ? o.distanceModel : pa.distanceModel,
                maxDistance: typeof o.maxDistance !== "undefined" ? o.maxDistance : pa.maxDistance,
                refDistance: typeof o.refDistance !== "undefined" ? o.refDistance : pa.refDistance,
                rolloffFactor: typeof o.rolloffFactor !== "undefined" ? o.rolloffFactor : pa.rolloffFactor,
                panningModel: typeof o.panningModel !== "undefined" ? o.panningModel : pa.panningModel
              };
              var panner = sound._panner;
              if (!panner) {
                if (!sound._pos) {
                  sound._pos = self2._pos || [0, 0, -0.5];
                }
                setupPanner(sound, "spatial");
                panner = sound._panner;
              }
              panner.coneInnerAngle = pa.coneInnerAngle;
              panner.coneOuterAngle = pa.coneOuterAngle;
              panner.coneOuterGain = pa.coneOuterGain;
              panner.distanceModel = pa.distanceModel;
              panner.maxDistance = pa.maxDistance;
              panner.refDistance = pa.refDistance;
              panner.rolloffFactor = pa.rolloffFactor;
              panner.panningModel = pa.panningModel;
            }
          }
          return self2;
        };
        Sound.prototype.init = function(_super) {
          return function() {
            var self2 = this;
            var parent = self2._parent;
            self2._orientation = parent._orientation;
            self2._stereo = parent._stereo;
            self2._pos = parent._pos;
            self2._pannerAttr = parent._pannerAttr;
            _super.call(this);
            if (self2._stereo) {
              parent.stereo(self2._stereo);
            } else if (self2._pos) {
              parent.pos(self2._pos[0], self2._pos[1], self2._pos[2], self2._id);
            }
          };
        }(Sound.prototype.init);
        Sound.prototype.reset = function(_super) {
          return function() {
            var self2 = this;
            var parent = self2._parent;
            self2._orientation = parent._orientation;
            self2._stereo = parent._stereo;
            self2._pos = parent._pos;
            self2._pannerAttr = parent._pannerAttr;
            if (self2._stereo) {
              parent.stereo(self2._stereo);
            } else if (self2._pos) {
              parent.pos(self2._pos[0], self2._pos[1], self2._pos[2], self2._id);
            } else if (self2._panner) {
              self2._panner.disconnect(0);
              self2._panner = void 0;
              parent._refreshBuffer(self2);
            }
            return _super.call(this);
          };
        }(Sound.prototype.reset);
        var setupPanner = function(sound, type) {
          type = type || "spatial";
          if (type === "spatial") {
            sound._panner = Howler.ctx.createPanner();
            sound._panner.coneInnerAngle = sound._pannerAttr.coneInnerAngle;
            sound._panner.coneOuterAngle = sound._pannerAttr.coneOuterAngle;
            sound._panner.coneOuterGain = sound._pannerAttr.coneOuterGain;
            sound._panner.distanceModel = sound._pannerAttr.distanceModel;
            sound._panner.maxDistance = sound._pannerAttr.maxDistance;
            sound._panner.refDistance = sound._pannerAttr.refDistance;
            sound._panner.rolloffFactor = sound._pannerAttr.rolloffFactor;
            sound._panner.panningModel = sound._pannerAttr.panningModel;
            if (typeof sound._panner.positionX !== "undefined") {
              sound._panner.positionX.setValueAtTime(sound._pos[0], Howler.ctx.currentTime);
              sound._panner.positionY.setValueAtTime(sound._pos[1], Howler.ctx.currentTime);
              sound._panner.positionZ.setValueAtTime(sound._pos[2], Howler.ctx.currentTime);
            } else {
              sound._panner.setPosition(sound._pos[0], sound._pos[1], sound._pos[2]);
            }
            if (typeof sound._panner.orientationX !== "undefined") {
              sound._panner.orientationX.setValueAtTime(sound._orientation[0], Howler.ctx.currentTime);
              sound._panner.orientationY.setValueAtTime(sound._orientation[1], Howler.ctx.currentTime);
              sound._panner.orientationZ.setValueAtTime(sound._orientation[2], Howler.ctx.currentTime);
            } else {
              sound._panner.setOrientation(sound._orientation[0], sound._orientation[1], sound._orientation[2]);
            }
          } else {
            sound._panner = Howler.ctx.createStereoPanner();
            sound._panner.pan.setValueAtTime(sound._stereo, Howler.ctx.currentTime);
          }
          sound._panner.connect(sound._node);
          if (!sound._paused) {
            sound._parent.pause(sound._id, true).play(sound._id, true);
          }
        };
      })();
    }
  });

  // node_modules/earcut/src/earcut.js
  var require_earcut = __commonJS({
    "node_modules/earcut/src/earcut.js"(exports, module) {
      "use strict";
      module.exports = earcut2;
      module.exports.default = earcut2;
      function earcut2(data, holeIndices, dim) {
        dim = dim || 2;
        var hasHoles = holeIndices && holeIndices.length, outerLen = hasHoles ? holeIndices[0] * dim : data.length, outerNode = linkedList(data, 0, outerLen, dim, true), triangles = [];
        if (!outerNode || outerNode.next === outerNode.prev)
          return triangles;
        var minX, minY, maxX, maxY, x, y, invSize;
        if (hasHoles)
          outerNode = eliminateHoles(data, holeIndices, outerNode, dim);
        if (data.length > 80 * dim) {
          minX = maxX = data[0];
          minY = maxY = data[1];
          for (var i = dim; i < outerLen; i += dim) {
            x = data[i];
            y = data[i + 1];
            if (x < minX)
              minX = x;
            if (y < minY)
              minY = y;
            if (x > maxX)
              maxX = x;
            if (y > maxY)
              maxY = y;
          }
          invSize = Math.max(maxX - minX, maxY - minY);
          invSize = invSize !== 0 ? 32767 / invSize : 0;
        }
        earcutLinked(outerNode, triangles, dim, minX, minY, invSize, 0);
        return triangles;
      }
      function linkedList(data, start, end, dim, clockwise) {
        var i, last;
        if (clockwise === signedArea(data, start, end, dim) > 0) {
          for (i = start; i < end; i += dim)
            last = insertNode(i, data[i], data[i + 1], last);
        } else {
          for (i = end - dim; i >= start; i -= dim)
            last = insertNode(i, data[i], data[i + 1], last);
        }
        if (last && equals6(last, last.next)) {
          removeNode(last);
          last = last.next;
        }
        return last;
      }
      function filterPoints(start, end) {
        if (!start)
          return start;
        if (!end)
          end = start;
        var p = start, again;
        do {
          again = false;
          if (!p.steiner && (equals6(p, p.next) || area(p.prev, p, p.next) === 0)) {
            removeNode(p);
            p = end = p.prev;
            if (p === p.next)
              break;
            again = true;
          } else {
            p = p.next;
          }
        } while (again || p !== end);
        return end;
      }
      function earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {
        if (!ear)
          return;
        if (!pass && invSize)
          indexCurve(ear, minX, minY, invSize);
        var stop = ear, prev, next;
        while (ear.prev !== ear.next) {
          prev = ear.prev;
          next = ear.next;
          if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {
            triangles.push(prev.i / dim | 0);
            triangles.push(ear.i / dim | 0);
            triangles.push(next.i / dim | 0);
            removeNode(ear);
            ear = next.next;
            stop = next.next;
            continue;
          }
          ear = next;
          if (ear === stop) {
            if (!pass) {
              earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);
            } else if (pass === 1) {
              ear = cureLocalIntersections(filterPoints(ear), triangles, dim);
              earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);
            } else if (pass === 2) {
              splitEarcut(ear, triangles, dim, minX, minY, invSize);
            }
            break;
          }
        }
      }
      function isEar(ear) {
        var a = ear.prev, b = ear, c = ear.next;
        if (area(a, b, c) >= 0)
          return false;
        var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;
        var x0 = ax < bx ? ax < cx ? ax : cx : bx < cx ? bx : cx, y0 = ay < by ? ay < cy ? ay : cy : by < cy ? by : cy, x1 = ax > bx ? ax > cx ? ax : cx : bx > cx ? bx : cx, y1 = ay > by ? ay > cy ? ay : cy : by > cy ? by : cy;
        var p = c.next;
        while (p !== a) {
          if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0)
            return false;
          p = p.next;
        }
        return true;
      }
      function isEarHashed(ear, minX, minY, invSize) {
        var a = ear.prev, b = ear, c = ear.next;
        if (area(a, b, c) >= 0)
          return false;
        var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;
        var x0 = ax < bx ? ax < cx ? ax : cx : bx < cx ? bx : cx, y0 = ay < by ? ay < cy ? ay : cy : by < cy ? by : cy, x1 = ax > bx ? ax > cx ? ax : cx : bx > cx ? bx : cx, y1 = ay > by ? ay > cy ? ay : cy : by > cy ? by : cy;
        var minZ = zOrder(x0, y0, minX, minY, invSize), maxZ = zOrder(x1, y1, minX, minY, invSize);
        var p = ear.prevZ, n = ear.nextZ;
        while (p && p.z >= minZ && n && n.z <= maxZ) {
          if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c && pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0)
            return false;
          p = p.prevZ;
          if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c && pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0)
            return false;
          n = n.nextZ;
        }
        while (p && p.z >= minZ) {
          if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c && pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0)
            return false;
          p = p.prevZ;
        }
        while (n && n.z <= maxZ) {
          if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c && pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0)
            return false;
          n = n.nextZ;
        }
        return true;
      }
      function cureLocalIntersections(start, triangles, dim) {
        var p = start;
        do {
          var a = p.prev, b = p.next.next;
          if (!equals6(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {
            triangles.push(a.i / dim | 0);
            triangles.push(p.i / dim | 0);
            triangles.push(b.i / dim | 0);
            removeNode(p);
            removeNode(p.next);
            p = start = b;
          }
          p = p.next;
        } while (p !== start);
        return filterPoints(p);
      }
      function splitEarcut(start, triangles, dim, minX, minY, invSize) {
        var a = start;
        do {
          var b = a.next.next;
          while (b !== a.prev) {
            if (a.i !== b.i && isValidDiagonal(a, b)) {
              var c = splitPolygon(a, b);
              a = filterPoints(a, a.next);
              c = filterPoints(c, c.next);
              earcutLinked(a, triangles, dim, minX, minY, invSize, 0);
              earcutLinked(c, triangles, dim, minX, minY, invSize, 0);
              return;
            }
            b = b.next;
          }
          a = a.next;
        } while (a !== start);
      }
      function eliminateHoles(data, holeIndices, outerNode, dim) {
        var queue = [], i, len4, start, end, list;
        for (i = 0, len4 = holeIndices.length; i < len4; i++) {
          start = holeIndices[i] * dim;
          end = i < len4 - 1 ? holeIndices[i + 1] * dim : data.length;
          list = linkedList(data, start, end, dim, false);
          if (list === list.next)
            list.steiner = true;
          queue.push(getLeftmost(list));
        }
        queue.sort(compareX);
        for (i = 0; i < queue.length; i++) {
          outerNode = eliminateHole(queue[i], outerNode);
        }
        return outerNode;
      }
      function compareX(a, b) {
        return a.x - b.x;
      }
      function eliminateHole(hole, outerNode) {
        var bridge = findHoleBridge(hole, outerNode);
        if (!bridge) {
          return outerNode;
        }
        var bridgeReverse = splitPolygon(bridge, hole);
        filterPoints(bridgeReverse, bridgeReverse.next);
        return filterPoints(bridge, bridge.next);
      }
      function findHoleBridge(hole, outerNode) {
        var p = outerNode, hx = hole.x, hy = hole.y, qx = -Infinity, m;
        do {
          if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {
            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);
            if (x <= hx && x > qx) {
              qx = x;
              m = p.x < p.next.x ? p : p.next;
              if (x === hx)
                return m;
            }
          }
          p = p.next;
        } while (p !== outerNode);
        if (!m)
          return null;
        var stop = m, mx = m.x, my = m.y, tanMin = Infinity, tan;
        p = m;
        do {
          if (hx >= p.x && p.x >= mx && hx !== p.x && pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {
            tan = Math.abs(hy - p.y) / (hx - p.x);
            if (locallyInside(p, hole) && (tan < tanMin || tan === tanMin && (p.x > m.x || p.x === m.x && sectorContainsSector(m, p)))) {
              m = p;
              tanMin = tan;
            }
          }
          p = p.next;
        } while (p !== stop);
        return m;
      }
      function sectorContainsSector(m, p) {
        return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;
      }
      function indexCurve(start, minX, minY, invSize) {
        var p = start;
        do {
          if (p.z === 0)
            p.z = zOrder(p.x, p.y, minX, minY, invSize);
          p.prevZ = p.prev;
          p.nextZ = p.next;
          p = p.next;
        } while (p !== start);
        p.prevZ.nextZ = null;
        p.prevZ = null;
        sortLinked(p);
      }
      function sortLinked(list) {
        var i, p, q, e, tail, numMerges, pSize, qSize, inSize = 1;
        do {
          p = list;
          list = null;
          tail = null;
          numMerges = 0;
          while (p) {
            numMerges++;
            q = p;
            pSize = 0;
            for (i = 0; i < inSize; i++) {
              pSize++;
              q = q.nextZ;
              if (!q)
                break;
            }
            qSize = inSize;
            while (pSize > 0 || qSize > 0 && q) {
              if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {
                e = p;
                p = p.nextZ;
                pSize--;
              } else {
                e = q;
                q = q.nextZ;
                qSize--;
              }
              if (tail)
                tail.nextZ = e;
              else
                list = e;
              e.prevZ = tail;
              tail = e;
            }
            p = q;
          }
          tail.nextZ = null;
          inSize *= 2;
        } while (numMerges > 1);
        return list;
      }
      function zOrder(x, y, minX, minY, invSize) {
        x = (x - minX) * invSize | 0;
        y = (y - minY) * invSize | 0;
        x = (x | x << 8) & 16711935;
        x = (x | x << 4) & 252645135;
        x = (x | x << 2) & 858993459;
        x = (x | x << 1) & 1431655765;
        y = (y | y << 8) & 16711935;
        y = (y | y << 4) & 252645135;
        y = (y | y << 2) & 858993459;
        y = (y | y << 1) & 1431655765;
        return x | y << 1;
      }
      function getLeftmost(start) {
        var p = start, leftmost = start;
        do {
          if (p.x < leftmost.x || p.x === leftmost.x && p.y < leftmost.y)
            leftmost = p;
          p = p.next;
        } while (p !== start);
        return leftmost;
      }
      function pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {
        return (cx - px) * (ay - py) >= (ax - px) * (cy - py) && (ax - px) * (by - py) >= (bx - px) * (ay - py) && (bx - px) * (cy - py) >= (cx - px) * (by - py);
      }
      function isValidDiagonal(a, b) {
        return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && // dones't intersect other edges
        (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && // locally visible
        (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors
        equals6(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0);
      }
      function area(p, q, r) {
        return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);
      }
      function equals6(p1, p2) {
        return p1.x === p2.x && p1.y === p2.y;
      }
      function intersects(p1, q1, p2, q2) {
        var o1 = sign(area(p1, q1, p2));
        var o2 = sign(area(p1, q1, q2));
        var o3 = sign(area(p2, q2, p1));
        var o4 = sign(area(p2, q2, q1));
        if (o1 !== o2 && o3 !== o4)
          return true;
        if (o1 === 0 && onSegment(p1, p2, q1))
          return true;
        if (o2 === 0 && onSegment(p1, q2, q1))
          return true;
        if (o3 === 0 && onSegment(p2, p1, q2))
          return true;
        if (o4 === 0 && onSegment(p2, q1, q2))
          return true;
        return false;
      }
      function onSegment(p, q, r) {
        return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);
      }
      function sign(num) {
        return num > 0 ? 1 : num < 0 ? -1 : 0;
      }
      function intersectsPolygon(a, b) {
        var p = a;
        do {
          if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i && intersects(p, p.next, a, b))
            return true;
          p = p.next;
        } while (p !== a);
        return false;
      }
      function locallyInside(a, b) {
        return area(a.prev, a, a.next) < 0 ? area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 : area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;
      }
      function middleInside(a, b) {
        var p = a, inside = false, px = (a.x + b.x) / 2, py = (a.y + b.y) / 2;
        do {
          if (p.y > py !== p.next.y > py && p.next.y !== p.y && px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x)
            inside = !inside;
          p = p.next;
        } while (p !== a);
        return inside;
      }
      function splitPolygon(a, b) {
        var a2 = new Node(a.i, a.x, a.y), b2 = new Node(b.i, b.x, b.y), an = a.next, bp = b.prev;
        a.next = b;
        b.prev = a;
        a2.next = an;
        an.prev = a2;
        b2.next = a2;
        a2.prev = b2;
        bp.next = b2;
        b2.prev = bp;
        return b2;
      }
      function insertNode(i, x, y, last) {
        var p = new Node(i, x, y);
        if (!last) {
          p.prev = p;
          p.next = p;
        } else {
          p.next = last.next;
          p.prev = last;
          last.next.prev = p;
          last.next = p;
        }
        return p;
      }
      function removeNode(p) {
        p.next.prev = p.prev;
        p.prev.next = p.next;
        if (p.prevZ)
          p.prevZ.nextZ = p.nextZ;
        if (p.nextZ)
          p.nextZ.prevZ = p.prevZ;
      }
      function Node(i, x, y) {
        this.i = i;
        this.x = x;
        this.y = y;
        this.prev = null;
        this.next = null;
        this.z = 0;
        this.prevZ = null;
        this.nextZ = null;
        this.steiner = false;
      }
      earcut2.deviation = function(data, holeIndices, dim, triangles) {
        var hasHoles = holeIndices && holeIndices.length;
        var outerLen = hasHoles ? holeIndices[0] * dim : data.length;
        var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));
        if (hasHoles) {
          for (var i = 0, len4 = holeIndices.length; i < len4; i++) {
            var start = holeIndices[i] * dim;
            var end = i < len4 - 1 ? holeIndices[i + 1] * dim : data.length;
            polygonArea -= Math.abs(signedArea(data, start, end, dim));
          }
        }
        var trianglesArea = 0;
        for (i = 0; i < triangles.length; i += 3) {
          var a = triangles[i] * dim;
          var b = triangles[i + 1] * dim;
          var c = triangles[i + 2] * dim;
          trianglesArea += Math.abs(
            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) - (data[a] - data[b]) * (data[c + 1] - data[a + 1])
          );
        }
        return polygonArea === 0 && trianglesArea === 0 ? 0 : Math.abs((trianglesArea - polygonArea) / polygonArea);
      };
      function signedArea(data, start, end, dim) {
        var sum = 0;
        for (var i = start, j = end - dim; i < end; i += dim) {
          sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);
          j = i;
        }
        return sum;
      }
      earcut2.flatten = function(data) {
        var dim = data[0][0].length, result = { vertices: [], holes: [], dimensions: dim }, holeIndex = 0;
        for (var i = 0; i < data.length; i++) {
          for (var j = 0; j < data[i].length; j++) {
            for (var d = 0; d < dim; d++)
              result.vertices.push(data[i][j][d]);
          }
          if (i > 0) {
            holeIndex += data[i - 1].length;
            result.holes.push(holeIndex);
          }
        }
        return result;
      };
    }
  });

  // node_modules/colyseus.js/lib/legacy.js
  var require_legacy = __commonJS({
    "node_modules/colyseus.js/lib/legacy.js"() {
      if (!ArrayBuffer.isView) {
        ArrayBuffer.isView = (a) => {
          return a !== null && typeof a === "object" && a.buffer instanceof ArrayBuffer;
        };
      }
      if (typeof globalThis === "undefined" && typeof window !== "undefined") {
        window["globalThis"] = window;
      }
    }
  });

  // node_modules/colyseus.js/lib/errors/ServerError.js
  var require_ServerError = __commonJS({
    "node_modules/colyseus.js/lib/errors/ServerError.js"(exports) {
      "use strict";
      Object.defineProperty(exports, "__esModule", { value: true });
      exports.ServerError = exports.CloseCode = void 0;
      var CloseCode;
      (function(CloseCode2) {
        CloseCode2[CloseCode2["CONSENTED"] = 4e3] = "CONSENTED";
        CloseCode2[CloseCode2["DEVMODE_RESTART"] = 4010] = "DEVMODE_RESTART";
      })(CloseCode = exports.CloseCode || (exports.CloseCode = {}));
      var ServerError = class extends Error {
        constructor(code, message) {
          super(message);
          this.name = "ServerError";
          this.code = code;
        }
      };
      exports.ServerError = ServerError;
    }
  });

  // node_modules/colyseus.js/lib/msgpack/index.js
  var require_msgpack = __commonJS({
    "node_modules/colyseus.js/lib/msgpack/index.js"(exports) {
      "use strict";
      Object.defineProperty(exports, "__esModule", { value: true });
      exports.decode = exports.encode = void 0;
      function Decoder(buffer, offset2) {
        this._offset = offset2;
        if (buffer instanceof ArrayBuffer) {
          this._buffer = buffer;
          this._view = new DataView(this._buffer);
        } else if (ArrayBuffer.isView(buffer)) {
          this._buffer = buffer.buffer;
          this._view = new DataView(this._buffer, buffer.byteOffset, buffer.byteLength);
        } else {
          throw new Error("Invalid argument");
        }
      }
      function utf8Read(view, offset2, length5) {
        var string = "", chr = 0;
        for (var i = offset2, end = offset2 + length5; i < end; i++) {
          var byte = view.getUint8(i);
          if ((byte & 128) === 0) {
            string += String.fromCharCode(byte);
            continue;
          }
          if ((byte & 224) === 192) {
            string += String.fromCharCode((byte & 31) << 6 | view.getUint8(++i) & 63);
            continue;
          }
          if ((byte & 240) === 224) {
            string += String.fromCharCode((byte & 15) << 12 | (view.getUint8(++i) & 63) << 6 | (view.getUint8(++i) & 63) << 0);
            continue;
          }
          if ((byte & 248) === 240) {
            chr = (byte & 7) << 18 | (view.getUint8(++i) & 63) << 12 | (view.getUint8(++i) & 63) << 6 | (view.getUint8(++i) & 63) << 0;
            if (chr >= 65536) {
              chr -= 65536;
              string += String.fromCharCode((chr >>> 10) + 55296, (chr & 1023) + 56320);
            } else {
              string += String.fromCharCode(chr);
            }
            continue;
          }
          throw new Error("Invalid byte " + byte.toString(16));
        }
        return string;
      }
      Decoder.prototype._array = function(length5) {
        var value = new Array(length5);
        for (var i = 0; i < length5; i++) {
          value[i] = this._parse();
        }
        return value;
      };
      Decoder.prototype._map = function(length5) {
        var key = "", value = {};
        for (var i = 0; i < length5; i++) {
          key = this._parse();
          value[key] = this._parse();
        }
        return value;
      };
      Decoder.prototype._str = function(length5) {
        var value = utf8Read(this._view, this._offset, length5);
        this._offset += length5;
        return value;
      };
      Decoder.prototype._bin = function(length5) {
        var value = this._buffer.slice(this._offset, this._offset + length5);
        this._offset += length5;
        return value;
      };
      Decoder.prototype._parse = function() {
        var prefix = this._view.getUint8(this._offset++);
        var value, length5 = 0, type = 0, hi = 0, lo = 0;
        if (prefix < 192) {
          if (prefix < 128) {
            return prefix;
          }
          if (prefix < 144) {
            return this._map(prefix & 15);
          }
          if (prefix < 160) {
            return this._array(prefix & 15);
          }
          return this._str(prefix & 31);
        }
        if (prefix > 223) {
          return (255 - prefix + 1) * -1;
        }
        switch (prefix) {
          case 192:
            return null;
          case 194:
            return false;
          case 195:
            return true;
          case 196:
            length5 = this._view.getUint8(this._offset);
            this._offset += 1;
            return this._bin(length5);
          case 197:
            length5 = this._view.getUint16(this._offset);
            this._offset += 2;
            return this._bin(length5);
          case 198:
            length5 = this._view.getUint32(this._offset);
            this._offset += 4;
            return this._bin(length5);
          case 199:
            length5 = this._view.getUint8(this._offset);
            type = this._view.getInt8(this._offset + 1);
            this._offset += 2;
            if (type === -1) {
              var ns = this._view.getUint32(this._offset);
              hi = this._view.getInt32(this._offset + 4);
              lo = this._view.getUint32(this._offset + 8);
              this._offset += 12;
              return new Date((hi * 4294967296 + lo) * 1e3 + ns / 1e6);
            }
            return [type, this._bin(length5)];
          case 200:
            length5 = this._view.getUint16(this._offset);
            type = this._view.getInt8(this._offset + 2);
            this._offset += 3;
            return [type, this._bin(length5)];
          case 201:
            length5 = this._view.getUint32(this._offset);
            type = this._view.getInt8(this._offset + 4);
            this._offset += 5;
            return [type, this._bin(length5)];
          case 202:
            value = this._view.getFloat32(this._offset);
            this._offset += 4;
            return value;
          case 203:
            value = this._view.getFloat64(this._offset);
            this._offset += 8;
            return value;
          case 204:
            value = this._view.getUint8(this._offset);
            this._offset += 1;
            return value;
          case 205:
            value = this._view.getUint16(this._offset);
            this._offset += 2;
            return value;
          case 206:
            value = this._view.getUint32(this._offset);
            this._offset += 4;
            return value;
          case 207:
            hi = this._view.getUint32(this._offset) * Math.pow(2, 32);
            lo = this._view.getUint32(this._offset + 4);
            this._offset += 8;
            return hi + lo;
          case 208:
            value = this._view.getInt8(this._offset);
            this._offset += 1;
            return value;
          case 209:
            value = this._view.getInt16(this._offset);
            this._offset += 2;
            return value;
          case 210:
            value = this._view.getInt32(this._offset);
            this._offset += 4;
            return value;
          case 211:
            hi = this._view.getInt32(this._offset) * Math.pow(2, 32);
            lo = this._view.getUint32(this._offset + 4);
            this._offset += 8;
            return hi + lo;
          case 212:
            type = this._view.getInt8(this._offset);
            this._offset += 1;
            if (type === 0) {
              this._offset += 1;
              return void 0;
            }
            return [type, this._bin(1)];
          case 213:
            type = this._view.getInt8(this._offset);
            this._offset += 1;
            return [type, this._bin(2)];
          case 214:
            type = this._view.getInt8(this._offset);
            this._offset += 1;
            if (type === -1) {
              value = this._view.getUint32(this._offset);
              this._offset += 4;
              return new Date(value * 1e3);
            }
            return [type, this._bin(4)];
          case 215:
            type = this._view.getInt8(this._offset);
            this._offset += 1;
            if (type === 0) {
              hi = this._view.getInt32(this._offset) * Math.pow(2, 32);
              lo = this._view.getUint32(this._offset + 4);
              this._offset += 8;
              return new Date(hi + lo);
            }
            if (type === -1) {
              hi = this._view.getUint32(this._offset);
              lo = this._view.getUint32(this._offset + 4);
              this._offset += 8;
              var s = (hi & 3) * 4294967296 + lo;
              return new Date(s * 1e3 + (hi >>> 2) / 1e6);
            }
            return [type, this._bin(8)];
          case 216:
            type = this._view.getInt8(this._offset);
            this._offset += 1;
            return [type, this._bin(16)];
          case 217:
            length5 = this._view.getUint8(this._offset);
            this._offset += 1;
            return this._str(length5);
          case 218:
            length5 = this._view.getUint16(this._offset);
            this._offset += 2;
            return this._str(length5);
          case 219:
            length5 = this._view.getUint32(this._offset);
            this._offset += 4;
            return this._str(length5);
          case 220:
            length5 = this._view.getUint16(this._offset);
            this._offset += 2;
            return this._array(length5);
          case 221:
            length5 = this._view.getUint32(this._offset);
            this._offset += 4;
            return this._array(length5);
          case 222:
            length5 = this._view.getUint16(this._offset);
            this._offset += 2;
            return this._map(length5);
          case 223:
            length5 = this._view.getUint32(this._offset);
            this._offset += 4;
            return this._map(length5);
        }
        throw new Error("Could not parse");
      };
      function decode2(buffer, offset2 = 0) {
        var decoder = new Decoder(buffer, offset2);
        var value = decoder._parse();
        if (decoder._offset !== buffer.byteLength) {
          throw new Error(buffer.byteLength - decoder._offset + " trailing bytes");
        }
        return value;
      }
      exports.decode = decode2;
      var TIMESTAMP32_MAX_SEC = 4294967296 - 1;
      var TIMESTAMP64_MAX_SEC = 17179869184 - 1;
      function utf8Write(view, offset2, str5) {
        var c = 0;
        for (var i = 0, l = str5.length; i < l; i++) {
          c = str5.charCodeAt(i);
          if (c < 128) {
            view.setUint8(offset2++, c);
          } else if (c < 2048) {
            view.setUint8(offset2++, 192 | c >> 6);
            view.setUint8(offset2++, 128 | c & 63);
          } else if (c < 55296 || c >= 57344) {
            view.setUint8(offset2++, 224 | c >> 12);
            view.setUint8(offset2++, 128 | c >> 6 & 63);
            view.setUint8(offset2++, 128 | c & 63);
          } else {
            i++;
            c = 65536 + ((c & 1023) << 10 | str5.charCodeAt(i) & 1023);
            view.setUint8(offset2++, 240 | c >> 18);
            view.setUint8(offset2++, 128 | c >> 12 & 63);
            view.setUint8(offset2++, 128 | c >> 6 & 63);
            view.setUint8(offset2++, 128 | c & 63);
          }
        }
      }
      function utf8Length(str5) {
        var c = 0, length5 = 0;
        for (var i = 0, l = str5.length; i < l; i++) {
          c = str5.charCodeAt(i);
          if (c < 128) {
            length5 += 1;
          } else if (c < 2048) {
            length5 += 2;
          } else if (c < 55296 || c >= 57344) {
            length5 += 3;
          } else {
            i++;
            length5 += 4;
          }
        }
        return length5;
      }
      function _encode(bytes, defers, value) {
        var type = typeof value, i = 0, l = 0, hi = 0, lo = 0, length5 = 0, size = 0;
        if (type === "string") {
          length5 = utf8Length(value);
          if (length5 < 32) {
            bytes.push(length5 | 160);
            size = 1;
          } else if (length5 < 256) {
            bytes.push(217, length5);
            size = 2;
          } else if (length5 < 65536) {
            bytes.push(218, length5 >> 8, length5);
            size = 3;
          } else if (length5 < 4294967296) {
            bytes.push(219, length5 >> 24, length5 >> 16, length5 >> 8, length5);
            size = 5;
          } else {
            throw new Error("String too long");
          }
          defers.push({ _str: value, _length: length5, _offset: bytes.length });
          return size + length5;
        }
        if (type === "number") {
          if (Math.floor(value) !== value || !isFinite(value)) {
            bytes.push(203);
            defers.push({ _float: value, _length: 8, _offset: bytes.length });
            return 9;
          }
          if (value >= 0) {
            if (value < 128) {
              bytes.push(value);
              return 1;
            }
            if (value < 256) {
              bytes.push(204, value);
              return 2;
            }
            if (value < 65536) {
              bytes.push(205, value >> 8, value);
              return 3;
            }
            if (value < 4294967296) {
              bytes.push(206, value >> 24, value >> 16, value >> 8, value);
              return 5;
            }
            hi = value / Math.pow(2, 32) >> 0;
            lo = value >>> 0;
            bytes.push(207, hi >> 24, hi >> 16, hi >> 8, hi, lo >> 24, lo >> 16, lo >> 8, lo);
            return 9;
          } else {
            if (value >= -32) {
              bytes.push(value);
              return 1;
            }
            if (value >= -128) {
              bytes.push(208, value);
              return 2;
            }
            if (value >= -32768) {
              bytes.push(209, value >> 8, value);
              return 3;
            }
            if (value >= -2147483648) {
              bytes.push(210, value >> 24, value >> 16, value >> 8, value);
              return 5;
            }
            hi = Math.floor(value / Math.pow(2, 32));
            lo = value >>> 0;
            bytes.push(211, hi >> 24, hi >> 16, hi >> 8, hi, lo >> 24, lo >> 16, lo >> 8, lo);
            return 9;
          }
        }
        if (type === "object") {
          if (value === null) {
            bytes.push(192);
            return 1;
          }
          if (Array.isArray(value)) {
            length5 = value.length;
            if (length5 < 16) {
              bytes.push(length5 | 144);
              size = 1;
            } else if (length5 < 65536) {
              bytes.push(220, length5 >> 8, length5);
              size = 3;
            } else if (length5 < 4294967296) {
              bytes.push(221, length5 >> 24, length5 >> 16, length5 >> 8, length5);
              size = 5;
            } else {
              throw new Error("Array too large");
            }
            for (i = 0; i < length5; i++) {
              size += _encode(bytes, defers, value[i]);
            }
            return size;
          }
          if (value instanceof Date) {
            var ms = value.getTime();
            var s = Math.floor(ms / 1e3);
            var ns = (ms - s * 1e3) * 1e6;
            if (s >= 0 && ns >= 0 && s <= TIMESTAMP64_MAX_SEC) {
              if (ns === 0 && s <= TIMESTAMP32_MAX_SEC) {
                bytes.push(214, 255, s >> 24, s >> 16, s >> 8, s);
                return 6;
              } else {
                hi = s / 4294967296;
                lo = s & 4294967295;
                bytes.push(215, 255, ns >> 22, ns >> 14, ns >> 6, hi, lo >> 24, lo >> 16, lo >> 8, lo);
                return 10;
              }
            } else {
              hi = Math.floor(s / 4294967296);
              lo = s >>> 0;
              bytes.push(199, 12, 255, ns >> 24, ns >> 16, ns >> 8, ns, hi >> 24, hi >> 16, hi >> 8, hi, lo >> 24, lo >> 16, lo >> 8, lo);
              return 15;
            }
          }
          if (value instanceof ArrayBuffer) {
            length5 = value.byteLength;
            if (length5 < 256) {
              bytes.push(196, length5);
              size = 2;
            } else if (length5 < 65536) {
              bytes.push(197, length5 >> 8, length5);
              size = 3;
            } else if (length5 < 4294967296) {
              bytes.push(198, length5 >> 24, length5 >> 16, length5 >> 8, length5);
              size = 5;
            } else {
              throw new Error("Buffer too large");
            }
            defers.push({ _bin: value, _length: length5, _offset: bytes.length });
            return size + length5;
          }
          if (typeof value.toJSON === "function") {
            return _encode(bytes, defers, value.toJSON());
          }
          var keys = [], key = "";
          var allKeys = Object.keys(value);
          for (i = 0, l = allKeys.length; i < l; i++) {
            key = allKeys[i];
            if (value[key] !== void 0 && typeof value[key] !== "function") {
              keys.push(key);
            }
          }
          length5 = keys.length;
          if (length5 < 16) {
            bytes.push(length5 | 128);
            size = 1;
          } else if (length5 < 65536) {
            bytes.push(222, length5 >> 8, length5);
            size = 3;
          } else if (length5 < 4294967296) {
            bytes.push(223, length5 >> 24, length5 >> 16, length5 >> 8, length5);
            size = 5;
          } else {
            throw new Error("Object too large");
          }
          for (i = 0; i < length5; i++) {
            key = keys[i];
            size += _encode(bytes, defers, key);
            size += _encode(bytes, defers, value[key]);
          }
          return size;
        }
        if (type === "boolean") {
          bytes.push(value ? 195 : 194);
          return 1;
        }
        if (type === "undefined") {
          bytes.push(192);
          return 1;
        }
        if (typeof value.toJSON === "function") {
          return _encode(bytes, defers, value.toJSON());
        }
        throw new Error("Could not encode");
      }
      function encode(value) {
        var bytes = [];
        var defers = [];
        var size = _encode(bytes, defers, value);
        var buf = new ArrayBuffer(size);
        var view = new DataView(buf);
        var deferIndex = 0;
        var deferWritten = 0;
        var nextOffset = -1;
        if (defers.length > 0) {
          nextOffset = defers[0]._offset;
        }
        var defer, deferLength = 0, offset2 = 0;
        for (var i = 0, l = bytes.length; i < l; i++) {
          view.setUint8(deferWritten + i, bytes[i]);
          if (i + 1 !== nextOffset) {
            continue;
          }
          defer = defers[deferIndex];
          deferLength = defer._length;
          offset2 = deferWritten + nextOffset;
          if (defer._bin) {
            var bin = new Uint8Array(defer._bin);
            for (var j = 0; j < deferLength; j++) {
              view.setUint8(offset2 + j, bin[j]);
            }
          } else if (defer._str) {
            utf8Write(view, offset2, defer._str);
          } else if (defer._float !== void 0) {
            view.setFloat64(offset2, defer._float);
          }
          deferIndex++;
          deferWritten += deferLength;
          if (defers[deferIndex]) {
            nextOffset = defers[deferIndex]._offset;
          }
        }
        return buf;
      }
      exports.encode = encode;
    }
  });

  // node_modules/ws/browser.js
  var require_browser = __commonJS({
    "node_modules/ws/browser.js"(exports, module) {
      "use strict";
      module.exports = function() {
        throw new Error(
          "ws does not work in the browser. Browser clients must use the native WebSocket object"
        );
      };
    }
  });

  // node_modules/colyseus.js/lib/transport/WebSocketTransport.js
  var require_WebSocketTransport = __commonJS({
    "node_modules/colyseus.js/lib/transport/WebSocketTransport.js"(exports) {
      "use strict";
      var __importDefault = exports && exports.__importDefault || function(mod) {
        return mod && mod.__esModule ? mod : { "default": mod };
      };
      Object.defineProperty(exports, "__esModule", { value: true });
      exports.WebSocketTransport = void 0;
      var ws_1 = __importDefault(require_browser());
      var WebSocket = globalThis.WebSocket || ws_1.default;
      var WebSocketTransport = class {
        constructor(events) {
          this.events = events;
        }
        send(data) {
          if (data instanceof ArrayBuffer) {
            this.ws.send(data);
          } else if (Array.isArray(data)) {
            this.ws.send(new Uint8Array(data).buffer);
          }
        }
        connect(url) {
          this.ws = new WebSocket(url, this.protocols);
          this.ws.binaryType = "arraybuffer";
          this.ws.onopen = this.events.onopen;
          this.ws.onmessage = this.events.onmessage;
          this.ws.onclose = this.events.onclose;
          this.ws.onerror = this.events.onerror;
        }
        close(code, reason) {
          this.ws.close(code, reason);
        }
        get isOpen() {
          return this.ws.readyState === WebSocket.OPEN;
        }
      };
      exports.WebSocketTransport = WebSocketTransport;
    }
  });

  // node_modules/colyseus.js/lib/Connection.js
  var require_Connection = __commonJS({
    "node_modules/colyseus.js/lib/Connection.js"(exports) {
      "use strict";
      Object.defineProperty(exports, "__esModule", { value: true });
      exports.Connection = void 0;
      var WebSocketTransport_1 = require_WebSocketTransport();
      var Connection = class {
        constructor() {
          this.events = {};
          this.transport = new WebSocketTransport_1.WebSocketTransport(this.events);
        }
        send(data) {
          this.transport.send(data);
        }
        connect(url) {
          this.transport.connect(url);
        }
        close(code, reason) {
          this.transport.close(code, reason);
        }
        get isOpen() {
          return this.transport.isOpen;
        }
      };
      exports.Connection = Connection;
    }
  });

  // node_modules/colyseus.js/lib/Protocol.js
  var require_Protocol = __commonJS({
    "node_modules/colyseus.js/lib/Protocol.js"(exports) {
      "use strict";
      Object.defineProperty(exports, "__esModule", { value: true });
      exports.utf8Length = exports.utf8Read = exports.ErrorCode = exports.Protocol = void 0;
      var Protocol;
      (function(Protocol2) {
        Protocol2[Protocol2["HANDSHAKE"] = 9] = "HANDSHAKE";
        Protocol2[Protocol2["JOIN_ROOM"] = 10] = "JOIN_ROOM";
        Protocol2[Protocol2["ERROR"] = 11] = "ERROR";
        Protocol2[Protocol2["LEAVE_ROOM"] = 12] = "LEAVE_ROOM";
        Protocol2[Protocol2["ROOM_DATA"] = 13] = "ROOM_DATA";
        Protocol2[Protocol2["ROOM_STATE"] = 14] = "ROOM_STATE";
        Protocol2[Protocol2["ROOM_STATE_PATCH"] = 15] = "ROOM_STATE_PATCH";
        Protocol2[Protocol2["ROOM_DATA_SCHEMA"] = 16] = "ROOM_DATA_SCHEMA";
        Protocol2[Protocol2["ROOM_DATA_BYTES"] = 17] = "ROOM_DATA_BYTES";
      })(Protocol = exports.Protocol || (exports.Protocol = {}));
      var ErrorCode;
      (function(ErrorCode2) {
        ErrorCode2[ErrorCode2["MATCHMAKE_NO_HANDLER"] = 4210] = "MATCHMAKE_NO_HANDLER";
        ErrorCode2[ErrorCode2["MATCHMAKE_INVALID_CRITERIA"] = 4211] = "MATCHMAKE_INVALID_CRITERIA";
        ErrorCode2[ErrorCode2["MATCHMAKE_INVALID_ROOM_ID"] = 4212] = "MATCHMAKE_INVALID_ROOM_ID";
        ErrorCode2[ErrorCode2["MATCHMAKE_UNHANDLED"] = 4213] = "MATCHMAKE_UNHANDLED";
        ErrorCode2[ErrorCode2["MATCHMAKE_EXPIRED"] = 4214] = "MATCHMAKE_EXPIRED";
        ErrorCode2[ErrorCode2["AUTH_FAILED"] = 4215] = "AUTH_FAILED";
        ErrorCode2[ErrorCode2["APPLICATION_ERROR"] = 4216] = "APPLICATION_ERROR";
      })(ErrorCode = exports.ErrorCode || (exports.ErrorCode = {}));
      function utf8Read(view, offset2) {
        const length5 = view[offset2++];
        var string = "", chr = 0;
        for (var i = offset2, end = offset2 + length5; i < end; i++) {
          var byte = view[i];
          if ((byte & 128) === 0) {
            string += String.fromCharCode(byte);
            continue;
          }
          if ((byte & 224) === 192) {
            string += String.fromCharCode((byte & 31) << 6 | view[++i] & 63);
            continue;
          }
          if ((byte & 240) === 224) {
            string += String.fromCharCode((byte & 15) << 12 | (view[++i] & 63) << 6 | (view[++i] & 63) << 0);
            continue;
          }
          if ((byte & 248) === 240) {
            chr = (byte & 7) << 18 | (view[++i] & 63) << 12 | (view[++i] & 63) << 6 | (view[++i] & 63) << 0;
            if (chr >= 65536) {
              chr -= 65536;
              string += String.fromCharCode((chr >>> 10) + 55296, (chr & 1023) + 56320);
            } else {
              string += String.fromCharCode(chr);
            }
            continue;
          }
          throw new Error("Invalid byte " + byte.toString(16));
        }
        return string;
      }
      exports.utf8Read = utf8Read;
      function utf8Length(str5 = "") {
        let c = 0;
        let length5 = 0;
        for (let i = 0, l = str5.length; i < l; i++) {
          c = str5.charCodeAt(i);
          if (c < 128) {
            length5 += 1;
          } else if (c < 2048) {
            length5 += 2;
          } else if (c < 55296 || c >= 57344) {
            length5 += 3;
          } else {
            i++;
            length5 += 4;
          }
        }
        return length5 + 1;
      }
      exports.utf8Length = utf8Length;
    }
  });

  // node_modules/colyseus.js/lib/serializer/Serializer.js
  var require_Serializer = __commonJS({
    "node_modules/colyseus.js/lib/serializer/Serializer.js"(exports) {
      "use strict";
      Object.defineProperty(exports, "__esModule", { value: true });
      exports.getSerializer = exports.registerSerializer = void 0;
      var serializers = {};
      function registerSerializer(id, serializer) {
        serializers[id] = serializer;
      }
      exports.registerSerializer = registerSerializer;
      function getSerializer(id) {
        const serializer = serializers[id];
        if (!serializer) {
          throw new Error("missing serializer: " + id);
        }
        return serializer;
      }
      exports.getSerializer = getSerializer;
    }
  });

  // node_modules/colyseus.js/lib/core/nanoevents.js
  var require_nanoevents = __commonJS({
    "node_modules/colyseus.js/lib/core/nanoevents.js"(exports) {
      "use strict";
      Object.defineProperty(exports, "__esModule", { value: true });
      exports.createNanoEvents = void 0;
      var createNanoEvents = () => ({
        emit(event, ...args) {
          let callbacks = this.events[event] || [];
          for (let i = 0, length5 = callbacks.length; i < length5; i++) {
            callbacks[i](...args);
          }
        },
        events: {},
        on(event, cb) {
          var _a;
          ((_a = this.events[event]) === null || _a === void 0 ? void 0 : _a.push(cb)) || (this.events[event] = [cb]);
          return () => {
            var _a2;
            this.events[event] = (_a2 = this.events[event]) === null || _a2 === void 0 ? void 0 : _a2.filter((i) => cb !== i);
          };
        }
      });
      exports.createNanoEvents = createNanoEvents;
    }
  });

  // node_modules/colyseus.js/lib/core/signal.js
  var require_signal = __commonJS({
    "node_modules/colyseus.js/lib/core/signal.js"(exports) {
      "use strict";
      Object.defineProperty(exports, "__esModule", { value: true });
      exports.createSignal = exports.EventEmitter = void 0;
      var EventEmitter = class {
        constructor() {
          this.handlers = [];
        }
        register(cb, once = false) {
          this.handlers.push(cb);
          return this;
        }
        invoke(...args) {
          this.handlers.forEach((handler) => handler.apply(this, args));
        }
        invokeAsync(...args) {
          return Promise.all(this.handlers.map((handler) => handler.apply(this, args)));
        }
        remove(cb) {
          const index = this.handlers.indexOf(cb);
          this.handlers[index] = this.handlers[this.handlers.length - 1];
          this.handlers.pop();
        }
        clear() {
          this.handlers = [];
        }
      };
      exports.EventEmitter = EventEmitter;
      function createSignal() {
        const emitter = new EventEmitter();
        function register(cb) {
          return emitter.register(cb, this === null);
        }
        ;
        register.once = (cb) => {
          const callback = function(...args) {
            cb.apply(this, args);
            emitter.remove(callback);
          };
          emitter.register(callback);
        };
        register.remove = (cb) => emitter.remove(cb);
        register.invoke = (...args) => emitter.invoke(...args);
        register.invokeAsync = (...args) => emitter.invokeAsync(...args);
        register.clear = () => emitter.clear();
        return register;
      }
      exports.createSignal = createSignal;
    }
  });

  // node_modules/@colyseus/schema/build/umd/index.js
  var require_umd = __commonJS({
    "node_modules/@colyseus/schema/build/umd/index.js"(exports, module) {
      (function(global2, factory) {
        typeof exports === "object" && typeof module !== "undefined" ? factory(exports) : typeof define === "function" && define.amd ? define(["exports"], factory) : (global2 = typeof globalThis !== "undefined" ? globalThis : global2 || self, factory(global2.schema = {}));
      })(exports, function(exports2) {
        "use strict";
        var extendStatics = function(d, b) {
          extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
            d2.__proto__ = b2;
          } || function(d2, b2) {
            for (var p in b2)
              if (Object.prototype.hasOwnProperty.call(b2, p))
                d2[p] = b2[p];
          };
          return extendStatics(d, b);
        };
        function __extends(d, b) {
          if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
          extendStatics(d, b);
          function __() {
            this.constructor = d;
          }
          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
        }
        function __decorate13(decorators, target, key, desc) {
          var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
          if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
            r = Reflect.decorate(decorators, target, key, desc);
          else
            for (var i = decorators.length - 1; i >= 0; i--)
              if (d = decorators[i])
                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
          return c > 3 && r && Object.defineProperty(target, key, r), r;
        }
        function __spreadArray(to, from, pack) {
          if (pack || arguments.length === 2)
            for (var i = 0, l = from.length, ar; i < l; i++) {
              if (ar || !(i in from)) {
                if (!ar)
                  ar = Array.prototype.slice.call(from, 0, i);
                ar[i] = from[i];
              }
            }
          return to.concat(ar || Array.prototype.slice.call(from));
        }
        typeof SuppressedError === "function" ? SuppressedError : function(error, suppressed, message) {
          var e = new Error(message);
          return e.name = "SuppressedError", e.error = error, e.suppressed = suppressed, e;
        };
        var SWITCH_TO_STRUCTURE = 255;
        var TYPE_ID = 213;
        exports2.OPERATION = void 0;
        (function(OPERATION) {
          OPERATION[OPERATION["ADD"] = 128] = "ADD";
          OPERATION[OPERATION["REPLACE"] = 0] = "REPLACE";
          OPERATION[OPERATION["DELETE"] = 64] = "DELETE";
          OPERATION[OPERATION["DELETE_AND_ADD"] = 192] = "DELETE_AND_ADD";
          OPERATION[OPERATION["TOUCH"] = 1] = "TOUCH";
          OPERATION[OPERATION["CLEAR"] = 10] = "CLEAR";
        })(exports2.OPERATION || (exports2.OPERATION = {}));
        var ChangeTree = (
          /** @class */
          function() {
            function ChangeTree2(ref, parent, root) {
              this.changed = false;
              this.changes = /* @__PURE__ */ new Map();
              this.allChanges = /* @__PURE__ */ new Set();
              this.caches = {};
              this.currentCustomOperation = 0;
              this.ref = ref;
              this.setParent(parent, root);
            }
            ChangeTree2.prototype.setParent = function(parent, root, parentIndex) {
              var _this = this;
              if (!this.indexes) {
                this.indexes = this.ref instanceof Schema ? this.ref["_definition"].indexes : {};
              }
              this.parent = parent;
              this.parentIndex = parentIndex;
              if (!root) {
                return;
              }
              this.root = root;
              if (this.ref instanceof Schema) {
                var definition = this.ref["_definition"];
                for (var field in definition.schema) {
                  var value = this.ref[field];
                  if (value && value["$changes"]) {
                    var parentIndex_1 = definition.indexes[field];
                    value["$changes"].setParent(this.ref, root, parentIndex_1);
                  }
                }
              } else if (typeof this.ref === "object") {
                this.ref.forEach(function(value2, key) {
                  if (value2 instanceof Schema) {
                    var changeTreee = value2["$changes"];
                    var parentIndex_2 = _this.ref["$changes"].indexes[key];
                    changeTreee.setParent(_this.ref, _this.root, parentIndex_2);
                  }
                });
              }
            };
            ChangeTree2.prototype.operation = function(op) {
              this.changes.set(--this.currentCustomOperation, op);
            };
            ChangeTree2.prototype.change = function(fieldName, operation) {
              if (operation === void 0) {
                operation = exports2.OPERATION.ADD;
              }
              var index = typeof fieldName === "number" ? fieldName : this.indexes[fieldName];
              this.assertValidIndex(index, fieldName);
              var previousChange = this.changes.get(index);
              if (!previousChange || previousChange.op === exports2.OPERATION.DELETE || previousChange.op === exports2.OPERATION.TOUCH) {
                this.changes.set(index, {
                  op: !previousChange ? operation : previousChange.op === exports2.OPERATION.DELETE ? exports2.OPERATION.DELETE_AND_ADD : operation,
                  // : OPERATION.REPLACE,
                  index
                });
              }
              this.allChanges.add(index);
              this.changed = true;
              this.touchParents();
            };
            ChangeTree2.prototype.touch = function(fieldName) {
              var index = typeof fieldName === "number" ? fieldName : this.indexes[fieldName];
              this.assertValidIndex(index, fieldName);
              if (!this.changes.has(index)) {
                this.changes.set(index, { op: exports2.OPERATION.TOUCH, index });
              }
              this.allChanges.add(index);
              this.touchParents();
            };
            ChangeTree2.prototype.touchParents = function() {
              if (this.parent) {
                this.parent["$changes"].touch(this.parentIndex);
              }
            };
            ChangeTree2.prototype.getType = function(index) {
              if (this.ref["_definition"]) {
                var definition = this.ref["_definition"];
                return definition.schema[definition.fieldsByIndex[index]];
              } else {
                var definition = this.parent["_definition"];
                var parentType = definition.schema[definition.fieldsByIndex[this.parentIndex]];
                return Object.values(parentType)[0];
              }
            };
            ChangeTree2.prototype.getChildrenFilter = function() {
              var childFilters = this.parent["_definition"].childFilters;
              return childFilters && childFilters[this.parentIndex];
            };
            ChangeTree2.prototype.getValue = function(index) {
              return this.ref["getByIndex"](index);
            };
            ChangeTree2.prototype.delete = function(fieldName) {
              var index = typeof fieldName === "number" ? fieldName : this.indexes[fieldName];
              if (index === void 0) {
                console.warn("@colyseus/schema ".concat(this.ref.constructor.name, ": trying to delete non-existing index: ").concat(fieldName, " (").concat(index, ")"));
                return;
              }
              var previousValue = this.getValue(index);
              this.changes.set(index, { op: exports2.OPERATION.DELETE, index });
              this.allChanges.delete(index);
              delete this.caches[index];
              if (previousValue && previousValue["$changes"]) {
                previousValue["$changes"].parent = void 0;
              }
              this.changed = true;
              this.touchParents();
            };
            ChangeTree2.prototype.discard = function(changed, discardAll) {
              var _this = this;
              if (changed === void 0) {
                changed = false;
              }
              if (discardAll === void 0) {
                discardAll = false;
              }
              if (!(this.ref instanceof Schema)) {
                this.changes.forEach(function(change) {
                  if (change.op === exports2.OPERATION.DELETE) {
                    var index = _this.ref["getIndex"](change.index);
                    delete _this.indexes[index];
                  }
                });
              }
              this.changes.clear();
              this.changed = changed;
              if (discardAll) {
                this.allChanges.clear();
              }
              this.currentCustomOperation = 0;
            };
            ChangeTree2.prototype.discardAll = function() {
              var _this = this;
              this.changes.forEach(function(change) {
                var value = _this.getValue(change.index);
                if (value && value["$changes"]) {
                  value["$changes"].discardAll();
                }
              });
              this.discard();
            };
            ChangeTree2.prototype.cache = function(field, cachedBytes) {
              this.caches[field] = cachedBytes;
            };
            ChangeTree2.prototype.clone = function() {
              return new ChangeTree2(this.ref, this.parent, this.root);
            };
            ChangeTree2.prototype.ensureRefId = function() {
              if (this.refId !== void 0) {
                return;
              }
              this.refId = this.root.getNextUniqueId();
            };
            ChangeTree2.prototype.assertValidIndex = function(index, fieldName) {
              if (index === void 0) {
                throw new Error('ChangeTree: missing index for field "'.concat(fieldName, '"'));
              }
            };
            return ChangeTree2;
          }()
        );
        function addCallback($callbacks, op, callback, existing) {
          if (!$callbacks[op]) {
            $callbacks[op] = [];
          }
          $callbacks[op].push(callback);
          existing === null || existing === void 0 ? void 0 : existing.forEach(function(item, key) {
            return callback(item, key);
          });
          return function() {
            return spliceOne($callbacks[op], $callbacks[op].indexOf(callback));
          };
        }
        function removeChildRefs(changes) {
          var _this = this;
          var needRemoveRef = typeof this.$changes.getType() !== "string";
          this.$items.forEach(function(item, key) {
            changes.push({
              refId: _this.$changes.refId,
              op: exports2.OPERATION.DELETE,
              field: key,
              value: void 0,
              previousValue: item
            });
            if (needRemoveRef) {
              _this.$changes.root.removeRef(item["$changes"].refId);
            }
          });
        }
        function spliceOne(arr, index) {
          if (index === -1 || index >= arr.length) {
            return false;
          }
          var len4 = arr.length - 1;
          for (var i = index; i < len4; i++) {
            arr[i] = arr[i + 1];
          }
          arr.length = len4;
          return true;
        }
        var DEFAULT_SORT = function(a, b) {
          var A = a.toString();
          var B = b.toString();
          if (A < B)
            return -1;
          else if (A > B)
            return 1;
          else
            return 0;
        };
        function getArrayProxy(value) {
          value["$proxy"] = true;
          value = new Proxy(value, {
            get: function(obj, prop) {
              if (typeof prop !== "symbol" && !isNaN(prop)) {
                return obj.at(prop);
              } else {
                return obj[prop];
              }
            },
            set: function(obj, prop, setValue) {
              if (typeof prop !== "symbol" && !isNaN(prop)) {
                var indexes = Array.from(obj["$items"].keys());
                var key = parseInt(indexes[prop] || prop);
                if (setValue === void 0 || setValue === null) {
                  obj.deleteAt(key);
                } else {
                  obj.setAt(key, setValue);
                }
              } else {
                obj[prop] = setValue;
              }
              return true;
            },
            deleteProperty: function(obj, prop) {
              if (typeof prop === "number") {
                obj.deleteAt(prop);
              } else {
                delete obj[prop];
              }
              return true;
            },
            has: function(obj, key) {
              if (typeof key !== "symbol" && !isNaN(Number(key))) {
                return obj["$items"].has(Number(key));
              }
              return Reflect.has(obj, key);
            }
          });
          return value;
        }
        var ArraySchema = (
          /** @class */
          function() {
            function ArraySchema2() {
              var items = [];
              for (var _i = 0; _i < arguments.length; _i++) {
                items[_i] = arguments[_i];
              }
              this.$changes = new ChangeTree(this);
              this.$items = /* @__PURE__ */ new Map();
              this.$indexes = /* @__PURE__ */ new Map();
              this.$refId = 0;
              this.push.apply(this, items);
            }
            ArraySchema2.prototype.onAdd = function(callback, triggerAll) {
              if (triggerAll === void 0) {
                triggerAll = true;
              }
              return addCallback(this.$callbacks || (this.$callbacks = {}), exports2.OPERATION.ADD, callback, triggerAll ? this.$items : void 0);
            };
            ArraySchema2.prototype.onRemove = function(callback) {
              return addCallback(this.$callbacks || (this.$callbacks = {}), exports2.OPERATION.DELETE, callback);
            };
            ArraySchema2.prototype.onChange = function(callback) {
              return addCallback(this.$callbacks || (this.$callbacks = {}), exports2.OPERATION.REPLACE, callback);
            };
            ArraySchema2.is = function(type2) {
              return (
                // type format: ["string"]
                Array.isArray(type2) || // type format: { array: "string" }
                type2["array"] !== void 0
              );
            };
            Object.defineProperty(ArraySchema2.prototype, "length", {
              get: function() {
                return this.$items.size;
              },
              set: function(value) {
                if (value === 0) {
                  this.clear();
                } else {
                  this.splice(value, this.length - value);
                }
              },
              enumerable: false,
              configurable: true
            });
            ArraySchema2.prototype.push = function() {
              var _this = this;
              var values = [];
              for (var _i = 0; _i < arguments.length; _i++) {
                values[_i] = arguments[_i];
              }
              var lastIndex;
              values.forEach(function(value) {
                lastIndex = _this.$refId++;
                _this.setAt(lastIndex, value);
              });
              return lastIndex;
            };
            ArraySchema2.prototype.pop = function() {
              var key = Array.from(this.$indexes.values()).pop();
              if (key === void 0) {
                return void 0;
              }
              this.$changes.delete(key);
              this.$indexes.delete(key);
              var value = this.$items.get(key);
              this.$items.delete(key);
              return value;
            };
            ArraySchema2.prototype.at = function(index) {
              index = Math.trunc(index) || 0;
              if (index < 0)
                index += this.length;
              if (index < 0 || index >= this.length)
                return void 0;
              var key = Array.from(this.$items.keys())[index];
              return this.$items.get(key);
            };
            ArraySchema2.prototype.setAt = function(index, value) {
              var _a, _b;
              if (value === void 0 || value === null) {
                console.error("ArraySchema items cannot be null nor undefined; Use `deleteAt(index)` instead.");
                return;
              }
              if (this.$items.get(index) === value) {
                return;
              }
              if (value["$changes"] !== void 0) {
                value["$changes"].setParent(this, this.$changes.root, index);
              }
              var operation = (_b = (_a = this.$changes.indexes[index]) === null || _a === void 0 ? void 0 : _a.op) !== null && _b !== void 0 ? _b : exports2.OPERATION.ADD;
              this.$changes.indexes[index] = index;
              this.$indexes.set(index, index);
              this.$items.set(index, value);
              this.$changes.change(index, operation);
            };
            ArraySchema2.prototype.deleteAt = function(index) {
              var key = Array.from(this.$items.keys())[index];
              if (key === void 0) {
                return false;
              }
              return this.$deleteAt(key);
            };
            ArraySchema2.prototype.$deleteAt = function(index) {
              this.$changes.delete(index);
              this.$indexes.delete(index);
              return this.$items.delete(index);
            };
            ArraySchema2.prototype.clear = function(changes) {
              this.$changes.discard(true, true);
              this.$changes.indexes = {};
              this.$indexes.clear();
              if (changes) {
                removeChildRefs.call(this, changes);
              }
              this.$items.clear();
              this.$changes.operation({ index: 0, op: exports2.OPERATION.CLEAR });
              this.$changes.touchParents();
            };
            ArraySchema2.prototype.concat = function() {
              var _a;
              var items = [];
              for (var _i = 0; _i < arguments.length; _i++) {
                items[_i] = arguments[_i];
              }
              return new (ArraySchema2.bind.apply(ArraySchema2, __spreadArray([void 0], (_a = Array.from(this.$items.values())).concat.apply(_a, items), false)))();
            };
            ArraySchema2.prototype.join = function(separator) {
              return Array.from(this.$items.values()).join(separator);
            };
            ArraySchema2.prototype.reverse = function() {
              var _this = this;
              var indexes = Array.from(this.$items.keys());
              var reversedItems = Array.from(this.$items.values()).reverse();
              reversedItems.forEach(function(item, i) {
                _this.setAt(indexes[i], item);
              });
              return this;
            };
            ArraySchema2.prototype.shift = function() {
              var indexes = Array.from(this.$items.keys());
              var shiftAt = indexes.shift();
              if (shiftAt === void 0) {
                return void 0;
              }
              var value = this.$items.get(shiftAt);
              this.$deleteAt(shiftAt);
              return value;
            };
            ArraySchema2.prototype.slice = function(start, end) {
              var sliced = new ArraySchema2();
              sliced.push.apply(sliced, Array.from(this.$items.values()).slice(start, end));
              return sliced;
            };
            ArraySchema2.prototype.sort = function(compareFn) {
              var _this = this;
              if (compareFn === void 0) {
                compareFn = DEFAULT_SORT;
              }
              var indexes = Array.from(this.$items.keys());
              var sortedItems = Array.from(this.$items.values()).sort(compareFn);
              sortedItems.forEach(function(item, i) {
                _this.setAt(indexes[i], item);
              });
              return this;
            };
            ArraySchema2.prototype.splice = function(start, deleteCount) {
              if (deleteCount === void 0) {
                deleteCount = this.length - start;
              }
              var items = [];
              for (var _i = 2; _i < arguments.length; _i++) {
                items[_i - 2] = arguments[_i];
              }
              var indexes = Array.from(this.$items.keys());
              var removedItems = [];
              for (var i = start; i < start + deleteCount; i++) {
                removedItems.push(this.$items.get(indexes[i]));
                this.$deleteAt(indexes[i]);
              }
              for (var i = 0; i < items.length; i++) {
                this.setAt(start + i, items[i]);
              }
              return removedItems;
            };
            ArraySchema2.prototype.unshift = function() {
              var _this = this;
              var items = [];
              for (var _i = 0; _i < arguments.length; _i++) {
                items[_i] = arguments[_i];
              }
              var length5 = this.length;
              var addedLength = items.length;
              var previousValues = Array.from(this.$items.values());
              items.forEach(function(item, i) {
                _this.setAt(i, item);
              });
              previousValues.forEach(function(previousValue, i) {
                _this.setAt(addedLength + i, previousValue);
              });
              return length5 + addedLength;
            };
            ArraySchema2.prototype.indexOf = function(searchElement, fromIndex) {
              return Array.from(this.$items.values()).indexOf(searchElement, fromIndex);
            };
            ArraySchema2.prototype.lastIndexOf = function(searchElement, fromIndex) {
              if (fromIndex === void 0) {
                fromIndex = this.length - 1;
              }
              return Array.from(this.$items.values()).lastIndexOf(searchElement, fromIndex);
            };
            ArraySchema2.prototype.every = function(callbackfn, thisArg) {
              return Array.from(this.$items.values()).every(callbackfn, thisArg);
            };
            ArraySchema2.prototype.some = function(callbackfn, thisArg) {
              return Array.from(this.$items.values()).some(callbackfn, thisArg);
            };
            ArraySchema2.prototype.forEach = function(callbackfn, thisArg) {
              Array.from(this.$items.values()).forEach(callbackfn, thisArg);
            };
            ArraySchema2.prototype.map = function(callbackfn, thisArg) {
              return Array.from(this.$items.values()).map(callbackfn, thisArg);
            };
            ArraySchema2.prototype.filter = function(callbackfn, thisArg) {
              return Array.from(this.$items.values()).filter(callbackfn, thisArg);
            };
            ArraySchema2.prototype.reduce = function(callbackfn, initialValue) {
              return Array.prototype.reduce.apply(Array.from(this.$items.values()), arguments);
            };
            ArraySchema2.prototype.reduceRight = function(callbackfn, initialValue) {
              return Array.prototype.reduceRight.apply(Array.from(this.$items.values()), arguments);
            };
            ArraySchema2.prototype.find = function(predicate, thisArg) {
              return Array.from(this.$items.values()).find(predicate, thisArg);
            };
            ArraySchema2.prototype.findIndex = function(predicate, thisArg) {
              return Array.from(this.$items.values()).findIndex(predicate, thisArg);
            };
            ArraySchema2.prototype.fill = function(value, start, end) {
              throw new Error("ArraySchema#fill() not implemented");
            };
            ArraySchema2.prototype.copyWithin = function(target, start, end) {
              throw new Error("ArraySchema#copyWithin() not implemented");
            };
            ArraySchema2.prototype.toString = function() {
              return this.$items.toString();
            };
            ArraySchema2.prototype.toLocaleString = function() {
              return this.$items.toLocaleString();
            };
            ArraySchema2.prototype[Symbol.iterator] = function() {
              return Array.from(this.$items.values())[Symbol.iterator]();
            };
            Object.defineProperty(ArraySchema2, Symbol.species, {
              get: function() {
                return ArraySchema2;
              },
              enumerable: false,
              configurable: true
            });
            ArraySchema2.prototype.entries = function() {
              return this.$items.entries();
            };
            ArraySchema2.prototype.keys = function() {
              return this.$items.keys();
            };
            ArraySchema2.prototype.values = function() {
              return this.$items.values();
            };
            ArraySchema2.prototype.includes = function(searchElement, fromIndex) {
              return Array.from(this.$items.values()).includes(searchElement, fromIndex);
            };
            ArraySchema2.prototype.flatMap = function(callback, thisArg) {
              throw new Error("ArraySchema#flatMap() is not supported.");
            };
            ArraySchema2.prototype.flat = function(depth) {
              throw new Error("ArraySchema#flat() is not supported.");
            };
            ArraySchema2.prototype.findLast = function() {
              var arr = Array.from(this.$items.values());
              return arr.findLast.apply(arr, arguments);
            };
            ArraySchema2.prototype.findLastIndex = function() {
              var arr = Array.from(this.$items.values());
              return arr.findLastIndex.apply(arr, arguments);
            };
            ArraySchema2.prototype.with = function(index, value) {
              var copy6 = Array.from(this.$items.values());
              copy6[index] = value;
              return new (ArraySchema2.bind.apply(ArraySchema2, __spreadArray([void 0], copy6, false)))();
            };
            ArraySchema2.prototype.toReversed = function() {
              return Array.from(this.$items.values()).reverse();
            };
            ArraySchema2.prototype.toSorted = function(compareFn) {
              return Array.from(this.$items.values()).sort(compareFn);
            };
            ArraySchema2.prototype.toSpliced = function(start, deleteCount) {
              var copy6 = Array.from(this.$items.values());
              return copy6.toSpliced.apply(copy6, arguments);
            };
            ArraySchema2.prototype.setIndex = function(index, key) {
              this.$indexes.set(index, key);
            };
            ArraySchema2.prototype.getIndex = function(index) {
              return this.$indexes.get(index);
            };
            ArraySchema2.prototype.getByIndex = function(index) {
              return this.$items.get(this.$indexes.get(index));
            };
            ArraySchema2.prototype.deleteByIndex = function(index) {
              var key = this.$indexes.get(index);
              this.$items.delete(key);
              this.$indexes.delete(index);
            };
            ArraySchema2.prototype.toArray = function() {
              return Array.from(this.$items.values());
            };
            ArraySchema2.prototype.toJSON = function() {
              return this.toArray().map(function(value) {
                return typeof value["toJSON"] === "function" ? value["toJSON"]() : value;
              });
            };
            ArraySchema2.prototype.clone = function(isDecoding) {
              var cloned;
              if (isDecoding) {
                cloned = new (ArraySchema2.bind.apply(ArraySchema2, __spreadArray([void 0], Array.from(this.$items.values()), false)))();
              } else {
                cloned = new (ArraySchema2.bind.apply(ArraySchema2, __spreadArray([void 0], this.map(function(item) {
                  return item["$changes"] ? item.clone() : item;
                }), false)))();
              }
              return cloned;
            };
            return ArraySchema2;
          }()
        );
        function getMapProxy(value) {
          value["$proxy"] = true;
          value = new Proxy(value, {
            get: function(obj, prop) {
              if (typeof prop !== "symbol" && // accessing properties
              typeof obj[prop] === "undefined") {
                return obj.get(prop);
              } else {
                return obj[prop];
              }
            },
            set: function(obj, prop, setValue) {
              if (typeof prop !== "symbol" && (prop.indexOf("$") === -1 && prop !== "onAdd" && prop !== "onRemove" && prop !== "onChange")) {
                obj.set(prop, setValue);
              } else {
                obj[prop] = setValue;
              }
              return true;
            },
            deleteProperty: function(obj, prop) {
              obj.delete(prop);
              return true;
            }
          });
          return value;
        }
        var MapSchema = (
          /** @class */
          function() {
            function MapSchema2(initialValues) {
              var _this = this;
              this.$changes = new ChangeTree(this);
              this.$items = /* @__PURE__ */ new Map();
              this.$indexes = /* @__PURE__ */ new Map();
              this.$refId = 0;
              if (initialValues) {
                if (initialValues instanceof Map || initialValues instanceof MapSchema2) {
                  initialValues.forEach(function(v, k2) {
                    return _this.set(k2, v);
                  });
                } else {
                  for (var k in initialValues) {
                    this.set(k, initialValues[k]);
                  }
                }
              }
            }
            MapSchema2.prototype.onAdd = function(callback, triggerAll) {
              if (triggerAll === void 0) {
                triggerAll = true;
              }
              return addCallback(this.$callbacks || (this.$callbacks = {}), exports2.OPERATION.ADD, callback, triggerAll ? this.$items : void 0);
            };
            MapSchema2.prototype.onRemove = function(callback) {
              return addCallback(this.$callbacks || (this.$callbacks = {}), exports2.OPERATION.DELETE, callback);
            };
            MapSchema2.prototype.onChange = function(callback) {
              return addCallback(this.$callbacks || (this.$callbacks = {}), exports2.OPERATION.REPLACE, callback);
            };
            MapSchema2.is = function(type2) {
              return type2["map"] !== void 0;
            };
            MapSchema2.prototype[Symbol.iterator] = function() {
              return this.$items[Symbol.iterator]();
            };
            Object.defineProperty(MapSchema2.prototype, Symbol.toStringTag, {
              get: function() {
                return this.$items[Symbol.toStringTag];
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(MapSchema2, Symbol.species, {
              get: function() {
                return MapSchema2;
              },
              enumerable: false,
              configurable: true
            });
            MapSchema2.prototype.set = function(key, value) {
              if (value === void 0 || value === null) {
                throw new Error("MapSchema#set('".concat(key, "', ").concat(value, "): trying to set ").concat(value, " value on '").concat(key, "'."));
              }
              key = key.toString();
              var hasIndex = typeof this.$changes.indexes[key] !== "undefined";
              var index = hasIndex ? this.$changes.indexes[key] : this.$refId++;
              var operation = hasIndex ? exports2.OPERATION.REPLACE : exports2.OPERATION.ADD;
              var isRef = value["$changes"] !== void 0;
              if (isRef) {
                value["$changes"].setParent(this, this.$changes.root, index);
              }
              if (!hasIndex) {
                this.$changes.indexes[key] = index;
                this.$indexes.set(index, key);
              } else if (!isRef && this.$items.get(key) === value) {
                return;
              } else if (isRef && // if is schema, force ADD operation if value differ from previous one.
              this.$items.get(key) !== value) {
                operation = exports2.OPERATION.ADD;
              }
              this.$items.set(key, value);
              this.$changes.change(key, operation);
              return this;
            };
            MapSchema2.prototype.get = function(key) {
              return this.$items.get(key);
            };
            MapSchema2.prototype.delete = function(key) {
              this.$changes.delete(key.toString());
              return this.$items.delete(key);
            };
            MapSchema2.prototype.clear = function(changes) {
              this.$changes.discard(true, true);
              this.$changes.indexes = {};
              this.$indexes.clear();
              if (changes) {
                removeChildRefs.call(this, changes);
              }
              this.$items.clear();
              this.$changes.operation({ index: 0, op: exports2.OPERATION.CLEAR });
              this.$changes.touchParents();
            };
            MapSchema2.prototype.has = function(key) {
              return this.$items.has(key);
            };
            MapSchema2.prototype.forEach = function(callbackfn) {
              this.$items.forEach(callbackfn);
            };
            MapSchema2.prototype.entries = function() {
              return this.$items.entries();
            };
            MapSchema2.prototype.keys = function() {
              return this.$items.keys();
            };
            MapSchema2.prototype.values = function() {
              return this.$items.values();
            };
            Object.defineProperty(MapSchema2.prototype, "size", {
              get: function() {
                return this.$items.size;
              },
              enumerable: false,
              configurable: true
            });
            MapSchema2.prototype.setIndex = function(index, key) {
              this.$indexes.set(index, key);
            };
            MapSchema2.prototype.getIndex = function(index) {
              return this.$indexes.get(index);
            };
            MapSchema2.prototype.getByIndex = function(index) {
              return this.$items.get(this.$indexes.get(index));
            };
            MapSchema2.prototype.deleteByIndex = function(index) {
              var key = this.$indexes.get(index);
              this.$items.delete(key);
              this.$indexes.delete(index);
            };
            MapSchema2.prototype.toJSON = function() {
              var map = {};
              this.forEach(function(value, key) {
                map[key] = typeof value["toJSON"] === "function" ? value["toJSON"]() : value;
              });
              return map;
            };
            MapSchema2.prototype.clone = function(isDecoding) {
              var cloned;
              if (isDecoding) {
                cloned = Object.assign(new MapSchema2(), this);
              } else {
                cloned = new MapSchema2();
                this.forEach(function(value, key) {
                  if (value["$changes"]) {
                    cloned.set(key, value["clone"]());
                  } else {
                    cloned.set(key, value);
                  }
                });
              }
              return cloned;
            };
            return MapSchema2;
          }()
        );
        var registeredTypes = {};
        function registerType(identifier, definition) {
          registeredTypes[identifier] = definition;
        }
        function getType(identifier) {
          return registeredTypes[identifier];
        }
        var SchemaDefinition = (
          /** @class */
          function() {
            function SchemaDefinition2() {
              this.indexes = {};
              this.fieldsByIndex = {};
              this.deprecated = {};
              this.descriptors = {};
            }
            SchemaDefinition2.create = function(parent) {
              var definition = new SchemaDefinition2();
              definition.schema = Object.assign({}, parent && parent.schema || {});
              definition.indexes = Object.assign({}, parent && parent.indexes || {});
              definition.fieldsByIndex = Object.assign({}, parent && parent.fieldsByIndex || {});
              definition.descriptors = Object.assign({}, parent && parent.descriptors || {});
              definition.deprecated = Object.assign({}, parent && parent.deprecated || {});
              return definition;
            };
            SchemaDefinition2.prototype.addField = function(field, type2) {
              var index = this.getNextFieldIndex();
              this.fieldsByIndex[index] = field;
              this.indexes[field] = index;
              this.schema[field] = Array.isArray(type2) ? { array: type2[0] } : type2;
            };
            SchemaDefinition2.prototype.hasField = function(field) {
              return this.indexes[field] !== void 0;
            };
            SchemaDefinition2.prototype.addFilter = function(field, cb) {
              if (!this.filters) {
                this.filters = {};
                this.indexesWithFilters = [];
              }
              this.filters[this.indexes[field]] = cb;
              this.indexesWithFilters.push(this.indexes[field]);
              return true;
            };
            SchemaDefinition2.prototype.addChildrenFilter = function(field, cb) {
              var index = this.indexes[field];
              var type2 = this.schema[field];
              if (getType(Object.keys(type2)[0])) {
                if (!this.childFilters) {
                  this.childFilters = {};
                }
                this.childFilters[index] = cb;
                return true;
              } else {
                console.warn("@filterChildren: field '".concat(field, "' can't have children. Ignoring filter."));
              }
            };
            SchemaDefinition2.prototype.getChildrenFilter = function(field) {
              return this.childFilters && this.childFilters[this.indexes[field]];
            };
            SchemaDefinition2.prototype.getNextFieldIndex = function() {
              return Object.keys(this.schema || {}).length;
            };
            return SchemaDefinition2;
          }()
        );
        function hasFilter(klass) {
          return klass._context && klass._context.useFilters;
        }
        var Context = (
          /** @class */
          function() {
            function Context2() {
              this.types = {};
              this.schemas = /* @__PURE__ */ new Map();
              this.useFilters = false;
            }
            Context2.prototype.has = function(schema) {
              return this.schemas.has(schema);
            };
            Context2.prototype.get = function(typeid) {
              return this.types[typeid];
            };
            Context2.prototype.add = function(schema, typeid) {
              if (typeid === void 0) {
                typeid = this.schemas.size;
              }
              schema._definition = SchemaDefinition.create(schema._definition);
              schema._typeid = typeid;
              this.types[typeid] = schema;
              this.schemas.set(schema, typeid);
            };
            Context2.create = function(options) {
              if (options === void 0) {
                options = {};
              }
              return function(definition) {
                if (!options.context) {
                  options.context = new Context2();
                }
                return type(definition, options);
              };
            };
            return Context2;
          }()
        );
        var globalContext = new Context();
        function type(type2, options) {
          if (options === void 0) {
            options = {};
          }
          return function(target, field) {
            var context = options.context || globalContext;
            var constructor = target.constructor;
            constructor._context = context;
            if (!type2) {
              throw new Error("".concat(constructor.name, ': @type() reference provided for "').concat(field, `" is undefined. Make sure you don't have any circular dependencies.`));
            }
            if (!context.has(constructor)) {
              context.add(constructor);
            }
            var definition = constructor._definition;
            definition.addField(field, type2);
            if (definition.descriptors[field]) {
              if (definition.deprecated[field]) {
                return;
              } else {
                try {
                  throw new Error("@colyseus/schema: Duplicate '".concat(field, "' definition on '").concat(constructor.name, "'.\nCheck @type() annotation"));
                } catch (e) {
                  var definitionAtLine = e.stack.split("\n")[4].trim();
                  throw new Error("".concat(e.message, " ").concat(definitionAtLine));
                }
              }
            }
            var isArray = ArraySchema.is(type2);
            var isMap = !isArray && MapSchema.is(type2);
            if (typeof type2 !== "string" && !Schema.is(type2)) {
              var childType = Object.values(type2)[0];
              if (typeof childType !== "string" && !context.has(childType)) {
                context.add(childType);
              }
            }
            if (options.manual) {
              definition.descriptors[field] = {
                enumerable: true,
                configurable: true,
                writable: true
              };
              return;
            }
            var fieldCached = "_".concat(field);
            definition.descriptors[fieldCached] = {
              enumerable: false,
              configurable: false,
              writable: true
            };
            definition.descriptors[field] = {
              get: function() {
                return this[fieldCached];
              },
              set: function(value) {
                if (value === this[fieldCached]) {
                  return;
                }
                if (value !== void 0 && value !== null) {
                  if (isArray && !(value instanceof ArraySchema)) {
                    value = new (ArraySchema.bind.apply(ArraySchema, __spreadArray([void 0], value, false)))();
                  }
                  if (isMap && !(value instanceof MapSchema)) {
                    value = new MapSchema(value);
                  }
                  if (value["$proxy"] === void 0) {
                    if (isMap) {
                      value = getMapProxy(value);
                    } else if (isArray) {
                      value = getArrayProxy(value);
                    }
                  }
                  this.$changes.change(field);
                  if (value["$changes"]) {
                    value["$changes"].setParent(this, this.$changes.root, this._definition.indexes[field]);
                  }
                } else if (this[fieldCached]) {
                  this.$changes.delete(field);
                }
                this[fieldCached] = value;
              },
              enumerable: true,
              configurable: true
            };
          };
        }
        function filter(cb) {
          return function(target, field) {
            var constructor = target.constructor;
            var definition = constructor._definition;
            if (definition.addFilter(field, cb)) {
              constructor._context.useFilters = true;
            }
          };
        }
        function filterChildren(cb) {
          return function(target, field) {
            var constructor = target.constructor;
            var definition = constructor._definition;
            if (definition.addChildrenFilter(field, cb)) {
              constructor._context.useFilters = true;
            }
          };
        }
        function deprecated(throws) {
          if (throws === void 0) {
            throws = true;
          }
          return function(target, field) {
            var constructor = target.constructor;
            var definition = constructor._definition;
            definition.deprecated[field] = true;
            if (throws) {
              definition.descriptors[field] = {
                get: function() {
                  throw new Error("".concat(field, " is deprecated."));
                },
                set: function(value) {
                },
                enumerable: false,
                configurable: true
              };
            }
          };
        }
        function defineTypes(target, fields, options) {
          if (options === void 0) {
            options = {};
          }
          if (!options.context) {
            options.context = target._context || options.context || globalContext;
          }
          for (var field in fields) {
            type(fields[field], options)(target.prototype, field);
          }
          return target;
        }
        function utf8Length(str5) {
          var c = 0, length5 = 0;
          for (var i = 0, l = str5.length; i < l; i++) {
            c = str5.charCodeAt(i);
            if (c < 128) {
              length5 += 1;
            } else if (c < 2048) {
              length5 += 2;
            } else if (c < 55296 || c >= 57344) {
              length5 += 3;
            } else {
              i++;
              length5 += 4;
            }
          }
          return length5;
        }
        function utf8Write(view, offset2, str5) {
          var c = 0;
          for (var i = 0, l = str5.length; i < l; i++) {
            c = str5.charCodeAt(i);
            if (c < 128) {
              view[offset2++] = c;
            } else if (c < 2048) {
              view[offset2++] = 192 | c >> 6;
              view[offset2++] = 128 | c & 63;
            } else if (c < 55296 || c >= 57344) {
              view[offset2++] = 224 | c >> 12;
              view[offset2++] = 128 | c >> 6 & 63;
              view[offset2++] = 128 | c & 63;
            } else {
              i++;
              c = 65536 + ((c & 1023) << 10 | str5.charCodeAt(i) & 1023);
              view[offset2++] = 240 | c >> 18;
              view[offset2++] = 128 | c >> 12 & 63;
              view[offset2++] = 128 | c >> 6 & 63;
              view[offset2++] = 128 | c & 63;
            }
          }
        }
        function int8$1(bytes, value) {
          bytes.push(value & 255);
        }
        function uint8$1(bytes, value) {
          bytes.push(value & 255);
        }
        function int16$1(bytes, value) {
          bytes.push(value & 255);
          bytes.push(value >> 8 & 255);
        }
        function uint16$1(bytes, value) {
          bytes.push(value & 255);
          bytes.push(value >> 8 & 255);
        }
        function int32$1(bytes, value) {
          bytes.push(value & 255);
          bytes.push(value >> 8 & 255);
          bytes.push(value >> 16 & 255);
          bytes.push(value >> 24 & 255);
        }
        function uint32$1(bytes, value) {
          var b4 = value >> 24;
          var b3 = value >> 16;
          var b2 = value >> 8;
          var b1 = value;
          bytes.push(b1 & 255);
          bytes.push(b2 & 255);
          bytes.push(b3 & 255);
          bytes.push(b4 & 255);
        }
        function int64$1(bytes, value) {
          var high = Math.floor(value / Math.pow(2, 32));
          var low = value >>> 0;
          uint32$1(bytes, low);
          uint32$1(bytes, high);
        }
        function uint64$1(bytes, value) {
          var high = value / Math.pow(2, 32) >> 0;
          var low = value >>> 0;
          uint32$1(bytes, low);
          uint32$1(bytes, high);
        }
        function float32$1(bytes, value) {
          writeFloat32(bytes, value);
        }
        function float64$1(bytes, value) {
          writeFloat64(bytes, value);
        }
        var _int32$1 = new Int32Array(2);
        var _float32$1 = new Float32Array(_int32$1.buffer);
        var _float64$1 = new Float64Array(_int32$1.buffer);
        function writeFloat32(bytes, value) {
          _float32$1[0] = value;
          int32$1(bytes, _int32$1[0]);
        }
        function writeFloat64(bytes, value) {
          _float64$1[0] = value;
          int32$1(bytes, _int32$1[0]);
          int32$1(bytes, _int32$1[1]);
        }
        function boolean$1(bytes, value) {
          return uint8$1(bytes, value ? 1 : 0);
        }
        function string$1(bytes, value) {
          if (!value) {
            value = "";
          }
          var length5 = utf8Length(value);
          var size = 0;
          if (length5 < 32) {
            bytes.push(length5 | 160);
            size = 1;
          } else if (length5 < 256) {
            bytes.push(217);
            uint8$1(bytes, length5);
            size = 2;
          } else if (length5 < 65536) {
            bytes.push(218);
            uint16$1(bytes, length5);
            size = 3;
          } else if (length5 < 4294967296) {
            bytes.push(219);
            uint32$1(bytes, length5);
            size = 5;
          } else {
            throw new Error("String too long");
          }
          utf8Write(bytes, bytes.length, value);
          return size + length5;
        }
        function number$1(bytes, value) {
          if (isNaN(value)) {
            return number$1(bytes, 0);
          } else if (!isFinite(value)) {
            return number$1(bytes, value > 0 ? Number.MAX_SAFE_INTEGER : -Number.MAX_SAFE_INTEGER);
          } else if (value !== (value | 0)) {
            bytes.push(203);
            writeFloat64(bytes, value);
            return 9;
          }
          if (value >= 0) {
            if (value < 128) {
              uint8$1(bytes, value);
              return 1;
            }
            if (value < 256) {
              bytes.push(204);
              uint8$1(bytes, value);
              return 2;
            }
            if (value < 65536) {
              bytes.push(205);
              uint16$1(bytes, value);
              return 3;
            }
            if (value < 4294967296) {
              bytes.push(206);
              uint32$1(bytes, value);
              return 5;
            }
            bytes.push(207);
            uint64$1(bytes, value);
            return 9;
          } else {
            if (value >= -32) {
              bytes.push(224 | value + 32);
              return 1;
            }
            if (value >= -128) {
              bytes.push(208);
              int8$1(bytes, value);
              return 2;
            }
            if (value >= -32768) {
              bytes.push(209);
              int16$1(bytes, value);
              return 3;
            }
            if (value >= -2147483648) {
              bytes.push(210);
              int32$1(bytes, value);
              return 5;
            }
            bytes.push(211);
            int64$1(bytes, value);
            return 9;
          }
        }
        var encode = /* @__PURE__ */ Object.freeze({
          __proto__: null,
          boolean: boolean$1,
          float32: float32$1,
          float64: float64$1,
          int16: int16$1,
          int32: int32$1,
          int64: int64$1,
          int8: int8$1,
          number: number$1,
          string: string$1,
          uint16: uint16$1,
          uint32: uint32$1,
          uint64: uint64$1,
          uint8: uint8$1,
          utf8Write,
          writeFloat32,
          writeFloat64
        });
        function utf8Read(bytes, offset2, length5) {
          var string2 = "", chr = 0;
          for (var i = offset2, end = offset2 + length5; i < end; i++) {
            var byte = bytes[i];
            if ((byte & 128) === 0) {
              string2 += String.fromCharCode(byte);
              continue;
            }
            if ((byte & 224) === 192) {
              string2 += String.fromCharCode((byte & 31) << 6 | bytes[++i] & 63);
              continue;
            }
            if ((byte & 240) === 224) {
              string2 += String.fromCharCode((byte & 15) << 12 | (bytes[++i] & 63) << 6 | (bytes[++i] & 63) << 0);
              continue;
            }
            if ((byte & 248) === 240) {
              chr = (byte & 7) << 18 | (bytes[++i] & 63) << 12 | (bytes[++i] & 63) << 6 | (bytes[++i] & 63) << 0;
              if (chr >= 65536) {
                chr -= 65536;
                string2 += String.fromCharCode((chr >>> 10) + 55296, (chr & 1023) + 56320);
              } else {
                string2 += String.fromCharCode(chr);
              }
              continue;
            }
            console.error("Invalid byte " + byte.toString(16));
          }
          return string2;
        }
        function int8(bytes, it) {
          return uint8(bytes, it) << 24 >> 24;
        }
        function uint8(bytes, it) {
          return bytes[it.offset++];
        }
        function int16(bytes, it) {
          return uint16(bytes, it) << 16 >> 16;
        }
        function uint16(bytes, it) {
          return bytes[it.offset++] | bytes[it.offset++] << 8;
        }
        function int32(bytes, it) {
          return bytes[it.offset++] | bytes[it.offset++] << 8 | bytes[it.offset++] << 16 | bytes[it.offset++] << 24;
        }
        function uint32(bytes, it) {
          return int32(bytes, it) >>> 0;
        }
        function float32(bytes, it) {
          return readFloat32(bytes, it);
        }
        function float64(bytes, it) {
          return readFloat64(bytes, it);
        }
        function int64(bytes, it) {
          var low = uint32(bytes, it);
          var high = int32(bytes, it) * Math.pow(2, 32);
          return high + low;
        }
        function uint64(bytes, it) {
          var low = uint32(bytes, it);
          var high = uint32(bytes, it) * Math.pow(2, 32);
          return high + low;
        }
        var _int32 = new Int32Array(2);
        var _float32 = new Float32Array(_int32.buffer);
        var _float64 = new Float64Array(_int32.buffer);
        function readFloat32(bytes, it) {
          _int32[0] = int32(bytes, it);
          return _float32[0];
        }
        function readFloat64(bytes, it) {
          _int32[0] = int32(bytes, it);
          _int32[1] = int32(bytes, it);
          return _float64[0];
        }
        function boolean(bytes, it) {
          return uint8(bytes, it) > 0;
        }
        function string(bytes, it) {
          var prefix = bytes[it.offset++];
          var length5;
          if (prefix < 192) {
            length5 = prefix & 31;
          } else if (prefix === 217) {
            length5 = uint8(bytes, it);
          } else if (prefix === 218) {
            length5 = uint16(bytes, it);
          } else if (prefix === 219) {
            length5 = uint32(bytes, it);
          }
          var value = utf8Read(bytes, it.offset, length5);
          it.offset += length5;
          return value;
        }
        function stringCheck(bytes, it) {
          var prefix = bytes[it.offset];
          return (
            // fixstr
            prefix < 192 && prefix > 160 || // str 8
            prefix === 217 || // str 16
            prefix === 218 || // str 32
            prefix === 219
          );
        }
        function number(bytes, it) {
          var prefix = bytes[it.offset++];
          if (prefix < 128) {
            return prefix;
          } else if (prefix === 202) {
            return readFloat32(bytes, it);
          } else if (prefix === 203) {
            return readFloat64(bytes, it);
          } else if (prefix === 204) {
            return uint8(bytes, it);
          } else if (prefix === 205) {
            return uint16(bytes, it);
          } else if (prefix === 206) {
            return uint32(bytes, it);
          } else if (prefix === 207) {
            return uint64(bytes, it);
          } else if (prefix === 208) {
            return int8(bytes, it);
          } else if (prefix === 209) {
            return int16(bytes, it);
          } else if (prefix === 210) {
            return int32(bytes, it);
          } else if (prefix === 211) {
            return int64(bytes, it);
          } else if (prefix > 223) {
            return (255 - prefix + 1) * -1;
          }
        }
        function numberCheck(bytes, it) {
          var prefix = bytes[it.offset];
          return prefix < 128 || prefix >= 202 && prefix <= 211;
        }
        function arrayCheck(bytes, it) {
          return bytes[it.offset] < 160;
        }
        function switchStructureCheck(bytes, it) {
          return (
            // previous byte should be `SWITCH_TO_STRUCTURE`
            bytes[it.offset - 1] === SWITCH_TO_STRUCTURE && // next byte should be a number
            (bytes[it.offset] < 128 || bytes[it.offset] >= 202 && bytes[it.offset] <= 211)
          );
        }
        var decode2 = /* @__PURE__ */ Object.freeze({
          __proto__: null,
          arrayCheck,
          boolean,
          float32,
          float64,
          int16,
          int32,
          int64,
          int8,
          number,
          numberCheck,
          readFloat32,
          readFloat64,
          string,
          stringCheck,
          switchStructureCheck,
          uint16,
          uint32,
          uint64,
          uint8
        });
        var CollectionSchema = (
          /** @class */
          function() {
            function CollectionSchema2(initialValues) {
              var _this = this;
              this.$changes = new ChangeTree(this);
              this.$items = /* @__PURE__ */ new Map();
              this.$indexes = /* @__PURE__ */ new Map();
              this.$refId = 0;
              if (initialValues) {
                initialValues.forEach(function(v) {
                  return _this.add(v);
                });
              }
            }
            CollectionSchema2.prototype.onAdd = function(callback, triggerAll) {
              if (triggerAll === void 0) {
                triggerAll = true;
              }
              return addCallback(this.$callbacks || (this.$callbacks = []), exports2.OPERATION.ADD, callback, triggerAll ? this.$items : void 0);
            };
            CollectionSchema2.prototype.onRemove = function(callback) {
              return addCallback(this.$callbacks || (this.$callbacks = []), exports2.OPERATION.DELETE, callback);
            };
            CollectionSchema2.prototype.onChange = function(callback) {
              return addCallback(this.$callbacks || (this.$callbacks = []), exports2.OPERATION.REPLACE, callback);
            };
            CollectionSchema2.is = function(type2) {
              return type2["collection"] !== void 0;
            };
            CollectionSchema2.prototype.add = function(value) {
              var index = this.$refId++;
              var isRef = value["$changes"] !== void 0;
              if (isRef) {
                value["$changes"].setParent(this, this.$changes.root, index);
              }
              this.$changes.indexes[index] = index;
              this.$indexes.set(index, index);
              this.$items.set(index, value);
              this.$changes.change(index);
              return index;
            };
            CollectionSchema2.prototype.at = function(index) {
              var key = Array.from(this.$items.keys())[index];
              return this.$items.get(key);
            };
            CollectionSchema2.prototype.entries = function() {
              return this.$items.entries();
            };
            CollectionSchema2.prototype.delete = function(item) {
              var entries = this.$items.entries();
              var index;
              var entry;
              while (entry = entries.next()) {
                if (entry.done) {
                  break;
                }
                if (item === entry.value[1]) {
                  index = entry.value[0];
                  break;
                }
              }
              if (index === void 0) {
                return false;
              }
              this.$changes.delete(index);
              this.$indexes.delete(index);
              return this.$items.delete(index);
            };
            CollectionSchema2.prototype.clear = function(changes) {
              this.$changes.discard(true, true);
              this.$changes.indexes = {};
              this.$indexes.clear();
              if (changes) {
                removeChildRefs.call(this, changes);
              }
              this.$items.clear();
              this.$changes.operation({ index: 0, op: exports2.OPERATION.CLEAR });
              this.$changes.touchParents();
            };
            CollectionSchema2.prototype.has = function(value) {
              return Array.from(this.$items.values()).some(function(v) {
                return v === value;
              });
            };
            CollectionSchema2.prototype.forEach = function(callbackfn) {
              var _this = this;
              this.$items.forEach(function(value, key, _) {
                return callbackfn(value, key, _this);
              });
            };
            CollectionSchema2.prototype.values = function() {
              return this.$items.values();
            };
            Object.defineProperty(CollectionSchema2.prototype, "size", {
              get: function() {
                return this.$items.size;
              },
              enumerable: false,
              configurable: true
            });
            CollectionSchema2.prototype.setIndex = function(index, key) {
              this.$indexes.set(index, key);
            };
            CollectionSchema2.prototype.getIndex = function(index) {
              return this.$indexes.get(index);
            };
            CollectionSchema2.prototype.getByIndex = function(index) {
              return this.$items.get(this.$indexes.get(index));
            };
            CollectionSchema2.prototype.deleteByIndex = function(index) {
              var key = this.$indexes.get(index);
              this.$items.delete(key);
              this.$indexes.delete(index);
            };
            CollectionSchema2.prototype.toArray = function() {
              return Array.from(this.$items.values());
            };
            CollectionSchema2.prototype.toJSON = function() {
              var values = [];
              this.forEach(function(value, key) {
                values.push(typeof value["toJSON"] === "function" ? value["toJSON"]() : value);
              });
              return values;
            };
            CollectionSchema2.prototype.clone = function(isDecoding) {
              var cloned;
              if (isDecoding) {
                cloned = Object.assign(new CollectionSchema2(), this);
              } else {
                cloned = new CollectionSchema2();
                this.forEach(function(value) {
                  if (value["$changes"]) {
                    cloned.add(value["clone"]());
                  } else {
                    cloned.add(value);
                  }
                });
              }
              return cloned;
            };
            return CollectionSchema2;
          }()
        );
        var SetSchema = (
          /** @class */
          function() {
            function SetSchema2(initialValues) {
              var _this = this;
              this.$changes = new ChangeTree(this);
              this.$items = /* @__PURE__ */ new Map();
              this.$indexes = /* @__PURE__ */ new Map();
              this.$refId = 0;
              if (initialValues) {
                initialValues.forEach(function(v) {
                  return _this.add(v);
                });
              }
            }
            SetSchema2.prototype.onAdd = function(callback, triggerAll) {
              if (triggerAll === void 0) {
                triggerAll = true;
              }
              return addCallback(this.$callbacks || (this.$callbacks = []), exports2.OPERATION.ADD, callback, triggerAll ? this.$items : void 0);
            };
            SetSchema2.prototype.onRemove = function(callback) {
              return addCallback(this.$callbacks || (this.$callbacks = []), exports2.OPERATION.DELETE, callback);
            };
            SetSchema2.prototype.onChange = function(callback) {
              return addCallback(this.$callbacks || (this.$callbacks = []), exports2.OPERATION.REPLACE, callback);
            };
            SetSchema2.is = function(type2) {
              return type2["set"] !== void 0;
            };
            SetSchema2.prototype.add = function(value) {
              var _a, _b;
              if (this.has(value)) {
                return false;
              }
              var index = this.$refId++;
              if (value["$changes"] !== void 0) {
                value["$changes"].setParent(this, this.$changes.root, index);
              }
              var operation = (_b = (_a = this.$changes.indexes[index]) === null || _a === void 0 ? void 0 : _a.op) !== null && _b !== void 0 ? _b : exports2.OPERATION.ADD;
              this.$changes.indexes[index] = index;
              this.$indexes.set(index, index);
              this.$items.set(index, value);
              this.$changes.change(index, operation);
              return index;
            };
            SetSchema2.prototype.entries = function() {
              return this.$items.entries();
            };
            SetSchema2.prototype.delete = function(item) {
              var entries = this.$items.entries();
              var index;
              var entry;
              while (entry = entries.next()) {
                if (entry.done) {
                  break;
                }
                if (item === entry.value[1]) {
                  index = entry.value[0];
                  break;
                }
              }
              if (index === void 0) {
                return false;
              }
              this.$changes.delete(index);
              this.$indexes.delete(index);
              return this.$items.delete(index);
            };
            SetSchema2.prototype.clear = function(changes) {
              this.$changes.discard(true, true);
              this.$changes.indexes = {};
              this.$indexes.clear();
              if (changes) {
                removeChildRefs.call(this, changes);
              }
              this.$items.clear();
              this.$changes.operation({ index: 0, op: exports2.OPERATION.CLEAR });
              this.$changes.touchParents();
            };
            SetSchema2.prototype.has = function(value) {
              var values = this.$items.values();
              var has = false;
              var entry;
              while (entry = values.next()) {
                if (entry.done) {
                  break;
                }
                if (value === entry.value) {
                  has = true;
                  break;
                }
              }
              return has;
            };
            SetSchema2.prototype.forEach = function(callbackfn) {
              var _this = this;
              this.$items.forEach(function(value, key, _) {
                return callbackfn(value, key, _this);
              });
            };
            SetSchema2.prototype.values = function() {
              return this.$items.values();
            };
            Object.defineProperty(SetSchema2.prototype, "size", {
              get: function() {
                return this.$items.size;
              },
              enumerable: false,
              configurable: true
            });
            SetSchema2.prototype.setIndex = function(index, key) {
              this.$indexes.set(index, key);
            };
            SetSchema2.prototype.getIndex = function(index) {
              return this.$indexes.get(index);
            };
            SetSchema2.prototype.getByIndex = function(index) {
              return this.$items.get(this.$indexes.get(index));
            };
            SetSchema2.prototype.deleteByIndex = function(index) {
              var key = this.$indexes.get(index);
              this.$items.delete(key);
              this.$indexes.delete(index);
            };
            SetSchema2.prototype.toArray = function() {
              return Array.from(this.$items.values());
            };
            SetSchema2.prototype.toJSON = function() {
              var values = [];
              this.forEach(function(value, key) {
                values.push(typeof value["toJSON"] === "function" ? value["toJSON"]() : value);
              });
              return values;
            };
            SetSchema2.prototype.clone = function(isDecoding) {
              var cloned;
              if (isDecoding) {
                cloned = Object.assign(new SetSchema2(), this);
              } else {
                cloned = new SetSchema2();
                this.forEach(function(value) {
                  if (value["$changes"]) {
                    cloned.add(value["clone"]());
                  } else {
                    cloned.add(value);
                  }
                });
              }
              return cloned;
            };
            return SetSchema2;
          }()
        );
        var ClientState = (
          /** @class */
          function() {
            function ClientState2() {
              this.refIds = /* @__PURE__ */ new WeakSet();
              this.containerIndexes = /* @__PURE__ */ new WeakMap();
            }
            ClientState2.prototype.addRefId = function(changeTree) {
              if (!this.refIds.has(changeTree)) {
                this.refIds.add(changeTree);
                this.containerIndexes.set(changeTree, /* @__PURE__ */ new Set());
              }
            };
            ClientState2.get = function(client) {
              if (client.$filterState === void 0) {
                client.$filterState = new ClientState2();
              }
              return client.$filterState;
            };
            return ClientState2;
          }()
        );
        var ReferenceTracker = (
          /** @class */
          function() {
            function ReferenceTracker2() {
              this.refs = /* @__PURE__ */ new Map();
              this.refCounts = {};
              this.deletedRefs = /* @__PURE__ */ new Set();
              this.nextUniqueId = 0;
            }
            ReferenceTracker2.prototype.getNextUniqueId = function() {
              return this.nextUniqueId++;
            };
            ReferenceTracker2.prototype.addRef = function(refId, ref, incrementCount) {
              if (incrementCount === void 0) {
                incrementCount = true;
              }
              this.refs.set(refId, ref);
              if (incrementCount) {
                this.refCounts[refId] = (this.refCounts[refId] || 0) + 1;
              }
            };
            ReferenceTracker2.prototype.removeRef = function(refId) {
              var refCount = this.refCounts[refId];
              if (refCount === void 0) {
                console.warn("trying to remove reference ".concat(refId, " that doesn't exist"));
                return;
              }
              if (refCount === 0) {
                console.warn("trying to remove reference ".concat(refId, " with 0 refCount"));
                return;
              }
              this.refCounts[refId] = refCount - 1;
              this.deletedRefs.add(refId);
            };
            ReferenceTracker2.prototype.clearRefs = function() {
              this.refs.clear();
              this.deletedRefs.clear();
              this.refCounts = {};
            };
            ReferenceTracker2.prototype.garbageCollectDeletedRefs = function() {
              var _this = this;
              this.deletedRefs.forEach(function(refId) {
                if (_this.refCounts[refId] > 0) {
                  return;
                }
                var ref = _this.refs.get(refId);
                if (ref instanceof Schema) {
                  for (var fieldName in ref["_definition"].schema) {
                    if (typeof ref["_definition"].schema[fieldName] !== "string" && ref[fieldName] && ref[fieldName]["$changes"]) {
                      _this.removeRef(ref[fieldName]["$changes"].refId);
                    }
                  }
                } else {
                  var definition = ref["$changes"].parent._definition;
                  var type2 = definition.schema[definition.fieldsByIndex[ref["$changes"].parentIndex]];
                  if (typeof Object.values(type2)[0] === "function") {
                    Array.from(ref.values()).forEach(function(child) {
                      return _this.removeRef(child["$changes"].refId);
                    });
                  }
                }
                _this.refs.delete(refId);
                delete _this.refCounts[refId];
              });
              this.deletedRefs.clear();
            };
            return ReferenceTracker2;
          }()
        );
        var EncodeSchemaError = (
          /** @class */
          function(_super) {
            __extends(EncodeSchemaError2, _super);
            function EncodeSchemaError2() {
              return _super !== null && _super.apply(this, arguments) || this;
            }
            return EncodeSchemaError2;
          }(Error)
        );
        function assertType(value, type2, klass, field) {
          var typeofTarget;
          var allowNull = false;
          switch (type2) {
            case "number":
            case "int8":
            case "uint8":
            case "int16":
            case "uint16":
            case "int32":
            case "uint32":
            case "int64":
            case "uint64":
            case "float32":
            case "float64":
              typeofTarget = "number";
              if (isNaN(value)) {
                console.log('trying to encode "NaN" in '.concat(klass.constructor.name, "#").concat(field));
              }
              break;
            case "string":
              typeofTarget = "string";
              allowNull = true;
              break;
            case "boolean":
              return;
          }
          if (typeof value !== typeofTarget && (!allowNull || allowNull && value !== null)) {
            var foundValue = "'".concat(JSON.stringify(value), "'").concat(value && value.constructor && " (".concat(value.constructor.name, ")") || "");
            throw new EncodeSchemaError("a '".concat(typeofTarget, "' was expected, but ").concat(foundValue, " was provided in ").concat(klass.constructor.name, "#").concat(field));
          }
        }
        function assertInstanceType(value, type2, klass, field) {
          if (!(value instanceof type2)) {
            throw new EncodeSchemaError("a '".concat(type2.name, "' was expected, but '").concat(value.constructor.name, "' was provided in ").concat(klass.constructor.name, "#").concat(field));
          }
        }
        function encodePrimitiveType(type2, bytes, value, klass, field) {
          assertType(value, type2, klass, field);
          var encodeFunc = encode[type2];
          if (encodeFunc) {
            encodeFunc(bytes, value);
          } else {
            throw new EncodeSchemaError("a '".concat(type2, "' was expected, but ").concat(value, " was provided in ").concat(klass.constructor.name, "#").concat(field));
          }
        }
        function decodePrimitiveType(type2, bytes, it) {
          return decode2[type2](bytes, it);
        }
        var Schema = (
          /** @class */
          function() {
            function Schema2() {
              var args = [];
              for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
              }
              Object.defineProperties(this, {
                $changes: {
                  value: new ChangeTree(this, void 0, new ReferenceTracker()),
                  enumerable: false,
                  writable: true
                },
                // $listeners: {
                //     value: undefined,
                //     enumerable: false,
                //     writable: true
                // },
                $callbacks: {
                  value: void 0,
                  enumerable: false,
                  writable: true
                }
              });
              var descriptors = this._definition.descriptors;
              if (descriptors) {
                Object.defineProperties(this, descriptors);
              }
              if (args[0]) {
                this.assign(args[0]);
              }
            }
            Schema2.onError = function(e) {
              console.error(e);
            };
            Schema2.is = function(type2) {
              return type2["_definition"] && type2["_definition"].schema !== void 0;
            };
            Schema2.prototype.onChange = function(callback) {
              return addCallback(this.$callbacks || (this.$callbacks = {}), exports2.OPERATION.REPLACE, callback);
            };
            Schema2.prototype.onRemove = function(callback) {
              return addCallback(this.$callbacks || (this.$callbacks = {}), exports2.OPERATION.DELETE, callback);
            };
            Schema2.prototype.assign = function(props) {
              Object.assign(this, props);
              return this;
            };
            Object.defineProperty(Schema2.prototype, "_definition", {
              get: function() {
                return this.constructor._definition;
              },
              enumerable: false,
              configurable: true
            });
            Schema2.prototype.setDirty = function(property2, operation) {
              this.$changes.change(property2, operation);
            };
            Schema2.prototype.listen = function(prop, callback, immediate) {
              var _this = this;
              if (immediate === void 0) {
                immediate = true;
              }
              if (!this.$callbacks) {
                this.$callbacks = {};
              }
              if (!this.$callbacks[prop]) {
                this.$callbacks[prop] = [];
              }
              this.$callbacks[prop].push(callback);
              if (immediate && this[prop] !== void 0) {
                callback(this[prop], void 0);
              }
              return function() {
                return spliceOne(_this.$callbacks[prop], _this.$callbacks[prop].indexOf(callback));
              };
            };
            Schema2.prototype.decode = function(bytes, it, ref) {
              if (it === void 0) {
                it = { offset: 0 };
              }
              if (ref === void 0) {
                ref = this;
              }
              var allChanges = [];
              var $root = this.$changes.root;
              var totalBytes = bytes.length;
              var refId = 0;
              $root.refs.set(refId, this);
              while (it.offset < totalBytes) {
                var byte = bytes[it.offset++];
                if (byte == SWITCH_TO_STRUCTURE) {
                  refId = number(bytes, it);
                  var nextRef = $root.refs.get(refId);
                  if (!nextRef) {
                    throw new Error('"refId" not found: '.concat(refId));
                  }
                  ref = nextRef;
                  continue;
                }
                var changeTree = ref["$changes"];
                var isSchema = ref["_definition"] !== void 0;
                var operation = isSchema ? byte >> 6 << 6 : byte;
                if (operation === exports2.OPERATION.CLEAR) {
                  ref.clear(allChanges);
                  continue;
                }
                var fieldIndex = isSchema ? byte % (operation || 255) : number(bytes, it);
                var fieldName = isSchema ? ref["_definition"].fieldsByIndex[fieldIndex] : "";
                var type2 = changeTree.getType(fieldIndex);
                var value = void 0;
                var previousValue = void 0;
                var dynamicIndex = void 0;
                if (!isSchema) {
                  previousValue = ref["getByIndex"](fieldIndex);
                  if ((operation & exports2.OPERATION.ADD) === exports2.OPERATION.ADD) {
                    dynamicIndex = ref instanceof MapSchema ? string(bytes, it) : fieldIndex;
                    ref["setIndex"](fieldIndex, dynamicIndex);
                  } else {
                    dynamicIndex = ref["getIndex"](fieldIndex);
                  }
                } else {
                  previousValue = ref["_".concat(fieldName)];
                }
                if ((operation & exports2.OPERATION.DELETE) === exports2.OPERATION.DELETE) {
                  if (operation !== exports2.OPERATION.DELETE_AND_ADD) {
                    ref["deleteByIndex"](fieldIndex);
                  }
                  if (previousValue && previousValue["$changes"]) {
                    $root.removeRef(previousValue["$changes"].refId);
                  }
                  value = null;
                }
                if (fieldName === void 0) {
                  console.warn("@colyseus/schema: definition mismatch");
                  var nextIterator = { offset: it.offset };
                  while (it.offset < totalBytes) {
                    if (switchStructureCheck(bytes, it)) {
                      nextIterator.offset = it.offset + 1;
                      if ($root.refs.has(number(bytes, nextIterator))) {
                        break;
                      }
                    }
                    it.offset++;
                  }
                  continue;
                } else if (operation === exports2.OPERATION.DELETE)
                  ;
                else if (Schema2.is(type2)) {
                  var refId_1 = number(bytes, it);
                  value = $root.refs.get(refId_1);
                  if (operation !== exports2.OPERATION.REPLACE) {
                    var childType = this.getSchemaType(bytes, it, type2);
                    if (!value) {
                      value = this.createTypeInstance(childType);
                      value.$changes.refId = refId_1;
                      if (previousValue) {
                        value.$callbacks = previousValue.$callbacks;
                        if (previousValue["$changes"].refId && refId_1 !== previousValue["$changes"].refId) {
                          $root.removeRef(previousValue["$changes"].refId);
                        }
                      }
                    }
                    $root.addRef(refId_1, value, value !== previousValue);
                  }
                } else if (typeof type2 === "string") {
                  value = decodePrimitiveType(type2, bytes, it);
                } else {
                  var typeDef = getType(Object.keys(type2)[0]);
                  var refId_2 = number(bytes, it);
                  var valueRef = $root.refs.has(refId_2) ? previousValue || $root.refs.get(refId_2) : new typeDef.constructor();
                  value = valueRef.clone(true);
                  value.$changes.refId = refId_2;
                  if (previousValue) {
                    value["$callbacks"] = previousValue["$callbacks"];
                    if (previousValue["$changes"].refId && refId_2 !== previousValue["$changes"].refId) {
                      $root.removeRef(previousValue["$changes"].refId);
                      var entries = previousValue.entries();
                      var iter = void 0;
                      while ((iter = entries.next()) && !iter.done) {
                        var _a = iter.value, key = _a[0], value_1 = _a[1];
                        allChanges.push({
                          refId: refId_2,
                          op: exports2.OPERATION.DELETE,
                          field: key,
                          value: void 0,
                          previousValue: value_1
                        });
                      }
                    }
                  }
                  $root.addRef(refId_2, value, valueRef !== previousValue);
                }
                if (value !== null && value !== void 0) {
                  if (value["$changes"]) {
                    value["$changes"].setParent(changeTree.ref, changeTree.root, fieldIndex);
                  }
                  if (ref instanceof Schema2) {
                    ref[fieldName] = value;
                  } else if (ref instanceof MapSchema) {
                    var key = dynamicIndex;
                    ref["$items"].set(key, value);
                    ref["$changes"].allChanges.add(fieldIndex);
                  } else if (ref instanceof ArraySchema) {
                    ref.setAt(fieldIndex, value);
                  } else if (ref instanceof CollectionSchema) {
                    var index = ref.add(value);
                    ref["setIndex"](fieldIndex, index);
                  } else if (ref instanceof SetSchema) {
                    var index = ref.add(value);
                    if (index !== false) {
                      ref["setIndex"](fieldIndex, index);
                    }
                  }
                }
                if (previousValue !== value) {
                  allChanges.push({
                    refId,
                    op: operation,
                    field: fieldName,
                    dynamicIndex,
                    value,
                    previousValue
                  });
                }
              }
              this._triggerChanges(allChanges);
              $root.garbageCollectDeletedRefs();
              return allChanges;
            };
            Schema2.prototype.encode = function(encodeAll, bytes, useFilters) {
              if (encodeAll === void 0) {
                encodeAll = false;
              }
              if (bytes === void 0) {
                bytes = [];
              }
              if (useFilters === void 0) {
                useFilters = false;
              }
              var rootChangeTree = this.$changes;
              var refIdsVisited = /* @__PURE__ */ new WeakSet();
              var changeTrees = [rootChangeTree];
              var numChangeTrees = 1;
              for (var i = 0; i < numChangeTrees; i++) {
                var changeTree = changeTrees[i];
                var ref = changeTree.ref;
                var isSchema = ref instanceof Schema2;
                changeTree.ensureRefId();
                refIdsVisited.add(changeTree);
                if (changeTree !== rootChangeTree && (changeTree.changed || encodeAll)) {
                  uint8$1(bytes, SWITCH_TO_STRUCTURE);
                  number$1(bytes, changeTree.refId);
                }
                var changes = encodeAll ? Array.from(changeTree.allChanges) : Array.from(changeTree.changes.values());
                for (var j = 0, cl = changes.length; j < cl; j++) {
                  var operation = encodeAll ? { op: exports2.OPERATION.ADD, index: changes[j] } : changes[j];
                  var fieldIndex = operation.index;
                  var field = isSchema ? ref["_definition"].fieldsByIndex && ref["_definition"].fieldsByIndex[fieldIndex] : fieldIndex;
                  var beginIndex = bytes.length;
                  if (operation.op !== exports2.OPERATION.TOUCH) {
                    if (isSchema) {
                      uint8$1(bytes, fieldIndex | operation.op);
                    } else {
                      uint8$1(bytes, operation.op);
                      if (operation.op === exports2.OPERATION.CLEAR) {
                        continue;
                      }
                      number$1(bytes, fieldIndex);
                    }
                  }
                  if (!isSchema && (operation.op & exports2.OPERATION.ADD) == exports2.OPERATION.ADD) {
                    if (ref instanceof MapSchema) {
                      var dynamicIndex = changeTree.ref["$indexes"].get(fieldIndex);
                      string$1(bytes, dynamicIndex);
                    }
                  }
                  if (operation.op === exports2.OPERATION.DELETE) {
                    continue;
                  }
                  var type2 = changeTree.getType(fieldIndex);
                  var value = changeTree.getValue(fieldIndex);
                  if (value && value["$changes"] && !refIdsVisited.has(value["$changes"])) {
                    changeTrees.push(value["$changes"]);
                    value["$changes"].ensureRefId();
                    numChangeTrees++;
                  }
                  if (operation.op === exports2.OPERATION.TOUCH) {
                    continue;
                  }
                  if (Schema2.is(type2)) {
                    assertInstanceType(value, type2, ref, field);
                    number$1(bytes, value.$changes.refId);
                    if ((operation.op & exports2.OPERATION.ADD) === exports2.OPERATION.ADD) {
                      this.tryEncodeTypeId(bytes, type2, value.constructor);
                    }
                  } else if (typeof type2 === "string") {
                    encodePrimitiveType(type2, bytes, value, ref, field);
                  } else {
                    var definition = getType(Object.keys(type2)[0]);
                    assertInstanceType(ref["_".concat(field)], definition.constructor, ref, field);
                    number$1(bytes, value.$changes.refId);
                  }
                  if (useFilters) {
                    changeTree.cache(fieldIndex, bytes.slice(beginIndex));
                  }
                }
                if (!encodeAll && !useFilters) {
                  changeTree.discard();
                }
              }
              return bytes;
            };
            Schema2.prototype.encodeAll = function(useFilters) {
              return this.encode(true, [], useFilters);
            };
            Schema2.prototype.applyFilters = function(client, encodeAll) {
              var _a, _b;
              if (encodeAll === void 0) {
                encodeAll = false;
              }
              var root = this;
              var refIdsDissallowed = /* @__PURE__ */ new Set();
              var $filterState = ClientState.get(client);
              var changeTrees = [this.$changes];
              var numChangeTrees = 1;
              var filteredBytes = [];
              var _loop_1 = function(i2) {
                var changeTree = changeTrees[i2];
                if (refIdsDissallowed.has(changeTree.refId)) {
                  return "continue";
                }
                var ref = changeTree.ref;
                var isSchema = ref instanceof Schema2;
                uint8$1(filteredBytes, SWITCH_TO_STRUCTURE);
                number$1(filteredBytes, changeTree.refId);
                var clientHasRefId = $filterState.refIds.has(changeTree);
                var isEncodeAll = encodeAll || !clientHasRefId;
                $filterState.addRefId(changeTree);
                var containerIndexes = $filterState.containerIndexes.get(changeTree);
                var changes = isEncodeAll ? Array.from(changeTree.allChanges) : Array.from(changeTree.changes.values());
                if (!encodeAll && isSchema && ref._definition.indexesWithFilters) {
                  var indexesWithFilters = ref._definition.indexesWithFilters;
                  indexesWithFilters.forEach(function(indexWithFilter) {
                    if (!containerIndexes.has(indexWithFilter) && changeTree.allChanges.has(indexWithFilter)) {
                      if (isEncodeAll) {
                        changes.push(indexWithFilter);
                      } else {
                        changes.push({ op: exports2.OPERATION.ADD, index: indexWithFilter });
                      }
                    }
                  });
                }
                for (var j = 0, cl = changes.length; j < cl; j++) {
                  var change = isEncodeAll ? { op: exports2.OPERATION.ADD, index: changes[j] } : changes[j];
                  if (change.op === exports2.OPERATION.CLEAR) {
                    uint8$1(filteredBytes, change.op);
                    continue;
                  }
                  var fieldIndex = change.index;
                  if (change.op === exports2.OPERATION.DELETE) {
                    if (isSchema) {
                      uint8$1(filteredBytes, change.op | fieldIndex);
                    } else {
                      uint8$1(filteredBytes, change.op);
                      number$1(filteredBytes, fieldIndex);
                    }
                    continue;
                  }
                  var value = changeTree.getValue(fieldIndex);
                  var type2 = changeTree.getType(fieldIndex);
                  if (isSchema) {
                    var filter2 = ref._definition.filters && ref._definition.filters[fieldIndex];
                    if (filter2 && !filter2.call(ref, client, value, root)) {
                      if (value && value["$changes"]) {
                        refIdsDissallowed.add(value["$changes"].refId);
                      }
                      continue;
                    }
                  } else {
                    var parent = changeTree.parent;
                    var filter2 = changeTree.getChildrenFilter();
                    if (filter2 && !filter2.call(parent, client, ref["$indexes"].get(fieldIndex), value, root)) {
                      if (value && value["$changes"]) {
                        refIdsDissallowed.add(value["$changes"].refId);
                      }
                      continue;
                    }
                  }
                  if (value["$changes"]) {
                    changeTrees.push(value["$changes"]);
                    numChangeTrees++;
                  }
                  if (change.op !== exports2.OPERATION.TOUCH) {
                    if (change.op === exports2.OPERATION.ADD || isSchema) {
                      filteredBytes.push.apply(filteredBytes, (_a = changeTree.caches[fieldIndex]) !== null && _a !== void 0 ? _a : []);
                      containerIndexes.add(fieldIndex);
                    } else {
                      if (containerIndexes.has(fieldIndex)) {
                        filteredBytes.push.apply(filteredBytes, (_b = changeTree.caches[fieldIndex]) !== null && _b !== void 0 ? _b : []);
                      } else {
                        containerIndexes.add(fieldIndex);
                        uint8$1(filteredBytes, exports2.OPERATION.ADD);
                        number$1(filteredBytes, fieldIndex);
                        if (ref instanceof MapSchema) {
                          var dynamicIndex = changeTree.ref["$indexes"].get(fieldIndex);
                          string$1(filteredBytes, dynamicIndex);
                        }
                        if (value["$changes"]) {
                          number$1(filteredBytes, value["$changes"].refId);
                        } else {
                          encode[type2](filteredBytes, value);
                        }
                      }
                    }
                  } else if (value["$changes"] && !isSchema) {
                    uint8$1(filteredBytes, exports2.OPERATION.ADD);
                    number$1(filteredBytes, fieldIndex);
                    if (ref instanceof MapSchema) {
                      var dynamicIndex = changeTree.ref["$indexes"].get(fieldIndex);
                      string$1(filteredBytes, dynamicIndex);
                    }
                    number$1(filteredBytes, value["$changes"].refId);
                  }
                }
              };
              for (var i = 0; i < numChangeTrees; i++) {
                _loop_1(i);
              }
              return filteredBytes;
            };
            Schema2.prototype.clone = function() {
              var _a;
              var cloned = new this.constructor();
              var schema = this._definition.schema;
              for (var field in schema) {
                if (typeof this[field] === "object" && typeof ((_a = this[field]) === null || _a === void 0 ? void 0 : _a.clone) === "function") {
                  cloned[field] = this[field].clone();
                } else {
                  cloned[field] = this[field];
                }
              }
              return cloned;
            };
            Schema2.prototype.toJSON = function() {
              var schema = this._definition.schema;
              var deprecated2 = this._definition.deprecated;
              var obj = {};
              for (var field in schema) {
                if (!deprecated2[field] && this[field] !== null && typeof this[field] !== "undefined") {
                  obj[field] = typeof this[field]["toJSON"] === "function" ? this[field]["toJSON"]() : this["_".concat(field)];
                }
              }
              return obj;
            };
            Schema2.prototype.discardAllChanges = function() {
              this.$changes.discardAll();
            };
            Schema2.prototype.getByIndex = function(index) {
              return this[this._definition.fieldsByIndex[index]];
            };
            Schema2.prototype.deleteByIndex = function(index) {
              this[this._definition.fieldsByIndex[index]] = void 0;
            };
            Schema2.prototype.tryEncodeTypeId = function(bytes, type2, targetType) {
              if (type2._typeid !== targetType._typeid) {
                uint8$1(bytes, TYPE_ID);
                number$1(bytes, targetType._typeid);
              }
            };
            Schema2.prototype.getSchemaType = function(bytes, it, defaultType) {
              var type2;
              if (bytes[it.offset] === TYPE_ID) {
                it.offset++;
                type2 = this.constructor._context.get(number(bytes, it));
              }
              return type2 || defaultType;
            };
            Schema2.prototype.createTypeInstance = function(type2) {
              var instance = new type2();
              instance.$changes.root = this.$changes.root;
              return instance;
            };
            Schema2.prototype._triggerChanges = function(changes) {
              var _a, _b, _c, _d, _e, _f, _g, _h, _j;
              var uniqueRefIds = /* @__PURE__ */ new Set();
              var $refs = this.$changes.root.refs;
              var _loop_2 = function(i2) {
                var change = changes[i2];
                var refId = change.refId;
                var ref = $refs.get(refId);
                var $callbacks = ref["$callbacks"];
                if ((change.op & exports2.OPERATION.DELETE) === exports2.OPERATION.DELETE && change.previousValue instanceof Schema2) {
                  (_b = (_a = change.previousValue["$callbacks"]) === null || _a === void 0 ? void 0 : _a[exports2.OPERATION.DELETE]) === null || _b === void 0 ? void 0 : _b.forEach(function(callback) {
                    return callback();
                  });
                }
                if (!$callbacks) {
                  return "continue";
                }
                if (ref instanceof Schema2) {
                  if (!uniqueRefIds.has(refId)) {
                    try {
                      (_c = $callbacks === null || $callbacks === void 0 ? void 0 : $callbacks[exports2.OPERATION.REPLACE]) === null || _c === void 0 ? void 0 : _c.forEach(function(callback) {
                        return callback();
                      });
                    } catch (e) {
                      Schema2.onError(e);
                    }
                  }
                  try {
                    if ($callbacks.hasOwnProperty(change.field)) {
                      (_d = $callbacks[change.field]) === null || _d === void 0 ? void 0 : _d.forEach(function(callback) {
                        return callback(change.value, change.previousValue);
                      });
                    }
                  } catch (e) {
                    Schema2.onError(e);
                  }
                } else {
                  if (change.op === exports2.OPERATION.ADD && change.previousValue === void 0) {
                    (_e = $callbacks[exports2.OPERATION.ADD]) === null || _e === void 0 ? void 0 : _e.forEach(function(callback) {
                      var _a2;
                      return callback(change.value, (_a2 = change.dynamicIndex) !== null && _a2 !== void 0 ? _a2 : change.field);
                    });
                  } else if (change.op === exports2.OPERATION.DELETE) {
                    if (change.previousValue !== void 0) {
                      (_f = $callbacks[exports2.OPERATION.DELETE]) === null || _f === void 0 ? void 0 : _f.forEach(function(callback) {
                        var _a2;
                        return callback(change.previousValue, (_a2 = change.dynamicIndex) !== null && _a2 !== void 0 ? _a2 : change.field);
                      });
                    }
                  } else if (change.op === exports2.OPERATION.DELETE_AND_ADD) {
                    if (change.previousValue !== void 0) {
                      (_g = $callbacks[exports2.OPERATION.DELETE]) === null || _g === void 0 ? void 0 : _g.forEach(function(callback) {
                        var _a2;
                        return callback(change.previousValue, (_a2 = change.dynamicIndex) !== null && _a2 !== void 0 ? _a2 : change.field);
                      });
                    }
                    (_h = $callbacks[exports2.OPERATION.ADD]) === null || _h === void 0 ? void 0 : _h.forEach(function(callback) {
                      var _a2;
                      return callback(change.value, (_a2 = change.dynamicIndex) !== null && _a2 !== void 0 ? _a2 : change.field);
                    });
                  }
                  if (change.value !== change.previousValue) {
                    (_j = $callbacks[exports2.OPERATION.REPLACE]) === null || _j === void 0 ? void 0 : _j.forEach(function(callback) {
                      var _a2;
                      return callback(change.value, (_a2 = change.dynamicIndex) !== null && _a2 !== void 0 ? _a2 : change.field);
                    });
                  }
                }
                uniqueRefIds.add(refId);
              };
              for (var i = 0; i < changes.length; i++) {
                _loop_2(i);
              }
            };
            Schema2._definition = SchemaDefinition.create();
            return Schema2;
          }()
        );
        function dumpChanges(schema) {
          var changeTrees = [schema["$changes"]];
          var numChangeTrees = 1;
          var dump = {};
          var currentStructure = dump;
          var _loop_1 = function(i2) {
            var changeTree = changeTrees[i2];
            changeTree.changes.forEach(function(change) {
              var ref = changeTree.ref;
              var fieldIndex = change.index;
              var field = ref["_definition"] ? ref["_definition"].fieldsByIndex[fieldIndex] : ref["$indexes"].get(fieldIndex);
              currentStructure[field] = changeTree.getValue(fieldIndex);
            });
          };
          for (var i = 0; i < numChangeTrees; i++) {
            _loop_1(i);
          }
          return dump;
        }
        var reflectionContext = { context: new Context() };
        var ReflectionField = (
          /** @class */
          function(_super) {
            __extends(ReflectionField2, _super);
            function ReflectionField2() {
              return _super !== null && _super.apply(this, arguments) || this;
            }
            __decorate13([
              type("string", reflectionContext)
            ], ReflectionField2.prototype, "name", void 0);
            __decorate13([
              type("string", reflectionContext)
            ], ReflectionField2.prototype, "type", void 0);
            __decorate13([
              type("number", reflectionContext)
            ], ReflectionField2.prototype, "referencedType", void 0);
            return ReflectionField2;
          }(Schema)
        );
        var ReflectionType = (
          /** @class */
          function(_super) {
            __extends(ReflectionType2, _super);
            function ReflectionType2() {
              var _this = _super !== null && _super.apply(this, arguments) || this;
              _this.fields = new ArraySchema();
              return _this;
            }
            __decorate13([
              type("number", reflectionContext)
            ], ReflectionType2.prototype, "id", void 0);
            __decorate13([
              type([ReflectionField], reflectionContext)
            ], ReflectionType2.prototype, "fields", void 0);
            return ReflectionType2;
          }(Schema)
        );
        var Reflection = (
          /** @class */
          function(_super) {
            __extends(Reflection2, _super);
            function Reflection2() {
              var _this = _super !== null && _super.apply(this, arguments) || this;
              _this.types = new ArraySchema();
              return _this;
            }
            Reflection2.encode = function(instance) {
              var _a;
              var rootSchemaType = instance.constructor;
              var reflection = new Reflection2();
              reflection.rootType = rootSchemaType._typeid;
              var buildType = function(currentType, schema) {
                for (var fieldName in schema) {
                  var field = new ReflectionField();
                  field.name = fieldName;
                  var fieldType = void 0;
                  if (typeof schema[fieldName] === "string") {
                    fieldType = schema[fieldName];
                  } else {
                    var type_1 = schema[fieldName];
                    var childTypeSchema = void 0;
                    if (Schema.is(type_1)) {
                      fieldType = "ref";
                      childTypeSchema = schema[fieldName];
                    } else {
                      fieldType = Object.keys(type_1)[0];
                      if (typeof type_1[fieldType] === "string") {
                        fieldType += ":" + type_1[fieldType];
                      } else {
                        childTypeSchema = type_1[fieldType];
                      }
                    }
                    field.referencedType = childTypeSchema ? childTypeSchema._typeid : -1;
                  }
                  field.type = fieldType;
                  currentType.fields.push(field);
                }
                reflection.types.push(currentType);
              };
              var types = (_a = rootSchemaType._context) === null || _a === void 0 ? void 0 : _a.types;
              for (var typeid in types) {
                var type_2 = new ReflectionType();
                type_2.id = Number(typeid);
                buildType(type_2, types[typeid]._definition.schema);
              }
              return reflection.encodeAll();
            };
            Reflection2.decode = function(bytes, it) {
              var context = new Context();
              var reflection = new Reflection2();
              reflection.decode(bytes, it);
              var schemaTypes = reflection.types.reduce(function(types, reflectionType) {
                var schema = (
                  /** @class */
                  function(_super2) {
                    __extends(_, _super2);
                    function _() {
                      return _super2 !== null && _super2.apply(this, arguments) || this;
                    }
                    return _;
                  }(Schema)
                );
                var typeid = reflectionType.id;
                types[typeid] = schema;
                context.add(schema, typeid);
                return types;
              }, {});
              reflection.types.forEach(function(reflectionType) {
                var schemaType = schemaTypes[reflectionType.id];
                reflectionType.fields.forEach(function(field) {
                  var _a;
                  if (field.referencedType !== void 0) {
                    var fieldType2 = field.type;
                    var refType = schemaTypes[field.referencedType];
                    if (!refType) {
                      var typeInfo = field.type.split(":");
                      fieldType2 = typeInfo[0];
                      refType = typeInfo[1];
                    }
                    if (fieldType2 === "ref") {
                      type(refType, { context })(schemaType.prototype, field.name);
                    } else {
                      type((_a = {}, _a[fieldType2] = refType, _a), { context })(schemaType.prototype, field.name);
                    }
                  } else {
                    type(field.type, { context })(schemaType.prototype, field.name);
                  }
                });
              });
              var rootType = schemaTypes[reflection.rootType];
              var rootInstance = new rootType();
              for (var fieldName in rootType._definition.schema) {
                var fieldType = rootType._definition.schema[fieldName];
                if (typeof fieldType !== "string") {
                  rootInstance[fieldName] = typeof fieldType === "function" ? new fieldType() : new (getType(Object.keys(fieldType)[0])).constructor();
                }
              }
              return rootInstance;
            };
            __decorate13([
              type([ReflectionType], reflectionContext)
            ], Reflection2.prototype, "types", void 0);
            __decorate13([
              type("number", reflectionContext)
            ], Reflection2.prototype, "rootType", void 0);
            return Reflection2;
          }(Schema)
        );
        registerType("map", { constructor: MapSchema });
        registerType("array", { constructor: ArraySchema });
        registerType("set", { constructor: SetSchema });
        registerType("collection", { constructor: CollectionSchema });
        exports2.ArraySchema = ArraySchema;
        exports2.CollectionSchema = CollectionSchema;
        exports2.Context = Context;
        exports2.MapSchema = MapSchema;
        exports2.Reflection = Reflection;
        exports2.ReflectionField = ReflectionField;
        exports2.ReflectionType = ReflectionType;
        exports2.Schema = Schema;
        exports2.SchemaDefinition = SchemaDefinition;
        exports2.SetSchema = SetSchema;
        exports2.decode = decode2;
        exports2.defineTypes = defineTypes;
        exports2.deprecated = deprecated;
        exports2.dumpChanges = dumpChanges;
        exports2.encode = encode;
        exports2.filter = filter;
        exports2.filterChildren = filterChildren;
        exports2.hasFilter = hasFilter;
        exports2.registerType = registerType;
        exports2.type = type;
      });
    }
  });

  // node_modules/colyseus.js/lib/Room.js
  var require_Room = __commonJS({
    "node_modules/colyseus.js/lib/Room.js"(exports) {
      "use strict";
      var __createBinding = exports && exports.__createBinding || (Object.create ? function(o, m, k, k2) {
        if (k2 === void 0)
          k2 = k;
        var desc = Object.getOwnPropertyDescriptor(m, k);
        if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
          desc = { enumerable: true, get: function() {
            return m[k];
          } };
        }
        Object.defineProperty(o, k2, desc);
      } : function(o, m, k, k2) {
        if (k2 === void 0)
          k2 = k;
        o[k2] = m[k];
      });
      var __setModuleDefault = exports && exports.__setModuleDefault || (Object.create ? function(o, v) {
        Object.defineProperty(o, "default", { enumerable: true, value: v });
      } : function(o, v) {
        o["default"] = v;
      });
      var __importStar = exports && exports.__importStar || function(mod) {
        if (mod && mod.__esModule)
          return mod;
        var result = {};
        if (mod != null) {
          for (var k in mod)
            if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k))
              __createBinding(result, mod, k);
        }
        __setModuleDefault(result, mod);
        return result;
      };
      Object.defineProperty(exports, "__esModule", { value: true });
      exports.Room = void 0;
      var msgpack = __importStar(require_msgpack());
      var Connection_1 = require_Connection();
      var Protocol_1 = require_Protocol();
      var Serializer_1 = require_Serializer();
      var nanoevents_1 = require_nanoevents();
      var signal_1 = require_signal();
      var schema_1 = require_umd();
      var ServerError_1 = require_ServerError();
      var Room = class {
        constructor(name, rootSchema) {
          this.onStateChange = (0, signal_1.createSignal)();
          this.onError = (0, signal_1.createSignal)();
          this.onLeave = (0, signal_1.createSignal)();
          this.onJoin = (0, signal_1.createSignal)();
          this.hasJoined = false;
          this.onMessageHandlers = (0, nanoevents_1.createNanoEvents)();
          this.roomId = null;
          this.name = name;
          if (rootSchema) {
            this.serializer = new ((0, Serializer_1.getSerializer)("schema"))();
            this.rootSchema = rootSchema;
            this.serializer.state = new rootSchema();
          }
          this.onError((code, message) => {
            var _a;
            return (_a = console.warn) === null || _a === void 0 ? void 0 : _a.call(console, `colyseus.js - onError => (${code}) ${message}`);
          });
          this.onLeave(() => this.removeAllListeners());
        }
        // TODO: deprecate me on version 1.0
        get id() {
          return this.roomId;
        }
        connect(endpoint, devModeCloseCallback, room = this) {
          const connection = new Connection_1.Connection();
          room.connection = connection;
          connection.events.onmessage = Room.prototype.onMessageCallback.bind(room);
          connection.events.onclose = function(e) {
            var _a;
            if (!room.hasJoined) {
              (_a = console.warn) === null || _a === void 0 ? void 0 : _a.call(console, `Room connection was closed unexpectedly (${e.code}): ${e.reason}`);
              room.onError.invoke(e.code, e.reason);
              return;
            }
            if (e.code === ServerError_1.CloseCode.DEVMODE_RESTART && devModeCloseCallback) {
              devModeCloseCallback();
            } else {
              room.onLeave.invoke(e.code);
              room.destroy();
            }
          };
          connection.events.onerror = function(e) {
            var _a;
            (_a = console.warn) === null || _a === void 0 ? void 0 : _a.call(console, `Room, onError (${e.code}): ${e.reason}`);
            room.onError.invoke(e.code, e.reason);
          };
          connection.connect(endpoint);
        }
        leave(consented = true) {
          return new Promise((resolve) => {
            this.onLeave((code) => resolve(code));
            if (this.connection) {
              if (consented) {
                this.connection.send([Protocol_1.Protocol.LEAVE_ROOM]);
              } else {
                this.connection.close();
              }
            } else {
              this.onLeave.invoke(ServerError_1.CloseCode.CONSENTED);
            }
          });
        }
        onMessage(type, callback) {
          return this.onMessageHandlers.on(this.getMessageHandlerKey(type), callback);
        }
        send(type, message) {
          const initialBytes = [Protocol_1.Protocol.ROOM_DATA];
          if (typeof type === "string") {
            schema_1.encode.string(initialBytes, type);
          } else {
            schema_1.encode.number(initialBytes, type);
          }
          let arr;
          if (message !== void 0) {
            const encoded = msgpack.encode(message);
            arr = new Uint8Array(initialBytes.length + encoded.byteLength);
            arr.set(new Uint8Array(initialBytes), 0);
            arr.set(new Uint8Array(encoded), initialBytes.length);
          } else {
            arr = new Uint8Array(initialBytes);
          }
          this.connection.send(arr.buffer);
        }
        sendBytes(type, bytes) {
          const initialBytes = [Protocol_1.Protocol.ROOM_DATA_BYTES];
          if (typeof type === "string") {
            schema_1.encode.string(initialBytes, type);
          } else {
            schema_1.encode.number(initialBytes, type);
          }
          let arr;
          arr = new Uint8Array(initialBytes.length + (bytes.byteLength || bytes.length));
          arr.set(new Uint8Array(initialBytes), 0);
          arr.set(new Uint8Array(bytes), initialBytes.length);
          this.connection.send(arr.buffer);
        }
        get state() {
          return this.serializer.getState();
        }
        removeAllListeners() {
          this.onJoin.clear();
          this.onStateChange.clear();
          this.onError.clear();
          this.onLeave.clear();
          this.onMessageHandlers.events = {};
        }
        onMessageCallback(event) {
          const bytes = Array.from(new Uint8Array(event.data));
          const code = bytes[0];
          if (code === Protocol_1.Protocol.JOIN_ROOM) {
            let offset2 = 1;
            const reconnectionToken = (0, Protocol_1.utf8Read)(bytes, offset2);
            offset2 += (0, Protocol_1.utf8Length)(reconnectionToken);
            this.serializerId = (0, Protocol_1.utf8Read)(bytes, offset2);
            offset2 += (0, Protocol_1.utf8Length)(this.serializerId);
            if (!this.serializer) {
              const serializer = (0, Serializer_1.getSerializer)(this.serializerId);
              this.serializer = new serializer();
            }
            if (bytes.length > offset2 && this.serializer.handshake) {
              this.serializer.handshake(bytes, { offset: offset2 });
            }
            this.reconnectionToken = `${this.roomId}:${reconnectionToken}`;
            this.hasJoined = true;
            this.onJoin.invoke();
            this.connection.send([Protocol_1.Protocol.JOIN_ROOM]);
          } else if (code === Protocol_1.Protocol.ERROR) {
            const it = { offset: 1 };
            const code2 = schema_1.decode.number(bytes, it);
            const message = schema_1.decode.string(bytes, it);
            this.onError.invoke(code2, message);
          } else if (code === Protocol_1.Protocol.LEAVE_ROOM) {
            this.leave();
          } else if (code === Protocol_1.Protocol.ROOM_DATA_SCHEMA) {
            const it = { offset: 1 };
            const context = this.serializer.getState().constructor._context;
            const type = context.get(schema_1.decode.number(bytes, it));
            const message = new type();
            message.decode(bytes, it);
            this.dispatchMessage(type, message);
          } else if (code === Protocol_1.Protocol.ROOM_STATE) {
            bytes.shift();
            this.setState(bytes);
          } else if (code === Protocol_1.Protocol.ROOM_STATE_PATCH) {
            bytes.shift();
            this.patch(bytes);
          } else if (code === Protocol_1.Protocol.ROOM_DATA) {
            const it = { offset: 1 };
            const type = schema_1.decode.stringCheck(bytes, it) ? schema_1.decode.string(bytes, it) : schema_1.decode.number(bytes, it);
            const message = bytes.length > it.offset ? msgpack.decode(event.data, it.offset) : void 0;
            this.dispatchMessage(type, message);
          } else if (code === Protocol_1.Protocol.ROOM_DATA_BYTES) {
            const it = { offset: 1 };
            const type = schema_1.decode.stringCheck(bytes, it) ? schema_1.decode.string(bytes, it) : schema_1.decode.number(bytes, it);
            this.dispatchMessage(type, new Uint8Array(bytes.slice(it.offset)));
          }
        }
        setState(encodedState) {
          this.serializer.setState(encodedState);
          this.onStateChange.invoke(this.serializer.getState());
        }
        patch(binaryPatch) {
          this.serializer.patch(binaryPatch);
          this.onStateChange.invoke(this.serializer.getState());
        }
        dispatchMessage(type, message) {
          var _a;
          const messageType = this.getMessageHandlerKey(type);
          if (this.onMessageHandlers.events[messageType]) {
            this.onMessageHandlers.emit(messageType, message);
          } else if (this.onMessageHandlers.events["*"]) {
            this.onMessageHandlers.emit("*", type, message);
          } else {
            (_a = console.warn) === null || _a === void 0 ? void 0 : _a.call(console, `colyseus.js: onMessage() not registered for type '${type}'.`);
          }
        }
        destroy() {
          if (this.serializer) {
            this.serializer.teardown();
          }
        }
        getMessageHandlerKey(type) {
          switch (typeof type) {
            case "function":
              return `$${type._typeid}`;
            case "string":
              return type;
            case "number":
              return `i${type}`;
            default:
              throw new Error("invalid message type.");
          }
        }
      };
      exports.Room = Room;
    }
  });

  // node_modules/httpie/xhr/index.mjs
  var xhr_exports = {};
  __export(xhr_exports, {
    del: () => del,
    get: () => get,
    patch: () => patch,
    post: () => post,
    put: () => put,
    send: () => send
  });
  function apply(src, tar) {
    tar.headers = src.headers || {};
    tar.statusMessage = src.statusText;
    tar.statusCode = src.status;
    tar.data = src.response;
  }
  function send(method, uri, opts) {
    return new Promise(function(res, rej) {
      opts = opts || {};
      var req = new XMLHttpRequest();
      var k, tmp, arr, str5 = opts.body;
      var headers = opts.headers || {};
      if (opts.timeout)
        req.timeout = opts.timeout;
      req.ontimeout = req.onerror = function(err) {
        err.timeout = err.type == "timeout";
        rej(err);
      };
      req.open(method, uri.href || uri);
      req.onload = function() {
        arr = req.getAllResponseHeaders().trim().split(/[\r\n]+/);
        apply(req, req);
        while (tmp = arr.shift()) {
          tmp = tmp.split(": ");
          req.headers[tmp.shift().toLowerCase()] = tmp.join(": ");
        }
        tmp = req.headers["content-type"];
        if (tmp && !!~tmp.indexOf("application/json")) {
          try {
            req.data = JSON.parse(req.data, opts.reviver);
          } catch (err) {
            apply(req, err);
            return rej(err);
          }
        }
        (req.status >= 400 ? rej : res)(req);
      };
      if (typeof FormData < "u" && str5 instanceof FormData) {
      } else if (str5 && typeof str5 == "object") {
        headers["content-type"] = "application/json";
        str5 = JSON.stringify(str5);
      }
      req.withCredentials = !!opts.withCredentials;
      for (k in headers) {
        req.setRequestHeader(k, headers[k]);
      }
      req.send(str5);
    });
  }
  var get, post, patch, del, put;
  var init_xhr = __esm({
    "node_modules/httpie/xhr/index.mjs"() {
      get = /* @__PURE__ */ send.bind(send, "GET");
      post = /* @__PURE__ */ send.bind(send, "POST");
      patch = /* @__PURE__ */ send.bind(send, "PATCH");
      del = /* @__PURE__ */ send.bind(send, "DELETE");
      put = /* @__PURE__ */ send.bind(send, "PUT");
    }
  });

  // node_modules/colyseus.js/lib/HTTP.js
  var require_HTTP = __commonJS({
    "node_modules/colyseus.js/lib/HTTP.js"(exports) {
      "use strict";
      var __createBinding = exports && exports.__createBinding || (Object.create ? function(o, m, k, k2) {
        if (k2 === void 0)
          k2 = k;
        var desc = Object.getOwnPropertyDescriptor(m, k);
        if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
          desc = { enumerable: true, get: function() {
            return m[k];
          } };
        }
        Object.defineProperty(o, k2, desc);
      } : function(o, m, k, k2) {
        if (k2 === void 0)
          k2 = k;
        o[k2] = m[k];
      });
      var __setModuleDefault = exports && exports.__setModuleDefault || (Object.create ? function(o, v) {
        Object.defineProperty(o, "default", { enumerable: true, value: v });
      } : function(o, v) {
        o["default"] = v;
      });
      var __importStar = exports && exports.__importStar || function(mod) {
        if (mod && mod.__esModule)
          return mod;
        var result = {};
        if (mod != null) {
          for (var k in mod)
            if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k))
              __createBinding(result, mod, k);
        }
        __setModuleDefault(result, mod);
        return result;
      };
      Object.defineProperty(exports, "__esModule", { value: true });
      exports.HTTP = void 0;
      var ServerError_1 = require_ServerError();
      var httpie = __importStar((init_xhr(), __toCommonJS(xhr_exports)));
      var HTTP = class {
        constructor(client) {
          this.client = client;
        }
        get(path, options = {}) {
          return this.request("get", path, options);
        }
        post(path, options = {}) {
          return this.request("post", path, options);
        }
        del(path, options = {}) {
          return this.request("del", path, options);
        }
        put(path, options = {}) {
          return this.request("put", path, options);
        }
        request(method, path, options = {}) {
          return httpie[method](this.client["getHttpEndpoint"](path), this.getOptions(options)).catch((e) => {
            var _a;
            const status = e.statusCode;
            const message = ((_a = e.data) === null || _a === void 0 ? void 0 : _a.error) || e.statusMessage || e.message;
            if (!status && !message) {
              throw e;
            }
            throw new ServerError_1.ServerError(status, message);
          });
        }
        getOptions(options) {
          if (this.authToken) {
            if (!options.headers) {
              options.headers = {};
            }
            options.headers["Authorization"] = `Bearer ${this.authToken}`;
          }
          if (typeof cc !== "undefined" && cc.sys && cc.sys.isNative) {
          } else {
            options.withCredentials = true;
          }
          return options;
        }
      };
      exports.HTTP = HTTP;
    }
  });

  // node_modules/colyseus.js/lib/Storage.js
  var require_Storage = __commonJS({
    "node_modules/colyseus.js/lib/Storage.js"(exports) {
      "use strict";
      Object.defineProperty(exports, "__esModule", { value: true });
      exports.getItem = exports.removeItem = exports.setItem = void 0;
      var storage;
      function getStorage() {
        if (!storage) {
          try {
            storage = typeof cc !== "undefined" && cc.sys && cc.sys.localStorage ? cc.sys.localStorage : window.localStorage;
          } catch (e) {
          }
        }
        if (!storage) {
          storage = {
            cache: {},
            setItem: function(key, value) {
              this.cache[key] = value;
            },
            getItem: function(key) {
              this.cache[key];
            },
            removeItem: function(key) {
              delete this.cache[key];
            }
          };
        }
        return storage;
      }
      function setItem(key, value) {
        getStorage().setItem(key, value);
      }
      exports.setItem = setItem;
      function removeItem(key) {
        getStorage().removeItem(key);
      }
      exports.removeItem = removeItem;
      function getItem(key, callback) {
        const value = getStorage().getItem(key);
        if (typeof Promise === "undefined" || // old browsers
        !(value instanceof Promise)) {
          callback(value);
        } else {
          value.then((id) => callback(id));
        }
      }
      exports.getItem = getItem;
    }
  });

  // node_modules/colyseus.js/lib/Auth.js
  var require_Auth = __commonJS({
    "node_modules/colyseus.js/lib/Auth.js"(exports) {
      "use strict";
      var __awaiter = exports && exports.__awaiter || function(thisArg, _arguments, P, generator) {
        function adopt(value) {
          return value instanceof P ? value : new P(function(resolve) {
            resolve(value);
          });
        }
        return new (P || (P = Promise))(function(resolve, reject) {
          function fulfilled(value) {
            try {
              step(generator.next(value));
            } catch (e) {
              reject(e);
            }
          }
          function rejected(value) {
            try {
              step(generator["throw"](value));
            } catch (e) {
              reject(e);
            }
          }
          function step(result) {
            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
          }
          step((generator = generator.apply(thisArg, _arguments || [])).next());
        });
      };
      var __classPrivateFieldGet = exports && exports.__classPrivateFieldGet || function(receiver, state, kind, f) {
        if (kind === "a" && !f)
          throw new TypeError("Private accessor was defined without a getter");
        if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver))
          throw new TypeError("Cannot read private member from an object whose class did not declare it");
        return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
      };
      var __classPrivateFieldSet = exports && exports.__classPrivateFieldSet || function(receiver, state, value, kind, f) {
        if (kind === "m")
          throw new TypeError("Private method is not writable");
        if (kind === "a" && !f)
          throw new TypeError("Private accessor was defined without a setter");
        if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver))
          throw new TypeError("Cannot write private member to an object whose class did not declare it");
        return kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;
      };
      var _Auth__initialized;
      var _Auth__initializationPromise;
      var _Auth__signInWindow;
      var _Auth__events;
      Object.defineProperty(exports, "__esModule", { value: true });
      exports.Auth = void 0;
      var Storage_1 = require_Storage();
      var nanoevents_1 = require_nanoevents();
      var Auth = class {
        constructor(http) {
          this.http = http;
          this.settings = {
            path: "/auth",
            key: "colyseus-auth-token"
          };
          _Auth__initialized.set(this, false);
          _Auth__initializationPromise.set(this, void 0);
          _Auth__signInWindow.set(this, void 0);
          _Auth__events.set(this, (0, nanoevents_1.createNanoEvents)());
          (0, Storage_1.getItem)(this.settings.key, (token) => this.token = token);
        }
        set token(token) {
          this.http.authToken = token;
        }
        get token() {
          return this.http.authToken;
        }
        onChange(callback) {
          const unbindChange = __classPrivateFieldGet(this, _Auth__events, "f").on("change", callback);
          if (!__classPrivateFieldGet(this, _Auth__initialized, "f")) {
            __classPrivateFieldSet(this, _Auth__initializationPromise, new Promise((resolve, reject) => {
              this.getUserData().then((userData) => {
                this.emitChange(Object.assign(Object.assign({}, userData), { token: this.token }));
              }).catch((e) => {
                this.emitChange({ user: null, token: void 0 });
              }).finally(() => {
                resolve();
              });
            }), "f");
          }
          __classPrivateFieldSet(this, _Auth__initialized, true, "f");
          return unbindChange;
        }
        getUserData() {
          return __awaiter(this, void 0, void 0, function* () {
            if (this.token) {
              return (yield this.http.get(`${this.settings.path}/userdata`)).data;
            } else {
              throw new Error("missing auth.token");
            }
          });
        }
        registerWithEmailAndPassword(email, password, options) {
          return __awaiter(this, void 0, void 0, function* () {
            const data = (yield this.http.post(`${this.settings.path}/register`, {
              body: { email, password, options }
            })).data;
            this.emitChange(data);
            return data;
          });
        }
        signInWithEmailAndPassword(email, password) {
          return __awaiter(this, void 0, void 0, function* () {
            const data = (yield this.http.post(`${this.settings.path}/login`, {
              body: { email, password }
            })).data;
            this.emitChange(data);
            return data;
          });
        }
        signInAnonymously(options) {
          return __awaiter(this, void 0, void 0, function* () {
            const data = (yield this.http.post(`${this.settings.path}/anonymous`, {
              body: { options }
            })).data;
            this.emitChange(data);
            return data;
          });
        }
        sendPasswordResetEmail(email) {
          return __awaiter(this, void 0, void 0, function* () {
            return (yield this.http.post(`${this.settings.path}/forgot-password`, {
              body: { email }
            })).data;
          });
        }
        signInWithProvider(providerName, settings = {}) {
          return __awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve, reject) => {
              const w = settings.width || 480;
              const h = settings.height || 768;
              const upgradingToken = this.token ? `?token=${this.token}` : "";
              const title = `Login with ${providerName[0].toUpperCase() + providerName.substring(1)}`;
              const url = this.http["client"]["getHttpEndpoint"](`${settings.prefix || `${this.settings.path}/provider`}/${providerName}${upgradingToken}`);
              const left = screen.width / 2 - w / 2;
              const top = screen.height / 2 - h / 2;
              __classPrivateFieldSet(this, _Auth__signInWindow, window.open(url, title, "toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=" + w + ", height=" + h + ", top=" + top + ", left=" + left), "f");
              const onMessage = (event) => {
                if (event.data.user === void 0 && event.data.token === void 0) {
                  return;
                }
                clearInterval(rejectionChecker);
                __classPrivateFieldGet(this, _Auth__signInWindow, "f").close();
                __classPrivateFieldSet(this, _Auth__signInWindow, void 0, "f");
                window.removeEventListener("message", onMessage);
                if (event.data.error !== void 0) {
                  reject(event.data.error);
                } else {
                  resolve(event.data);
                  this.emitChange(event.data);
                }
              };
              const rejectionChecker = setInterval(() => {
                if (!__classPrivateFieldGet(this, _Auth__signInWindow, "f") || __classPrivateFieldGet(this, _Auth__signInWindow, "f").closed) {
                  __classPrivateFieldSet(this, _Auth__signInWindow, void 0, "f");
                  reject("cancelled");
                  window.removeEventListener("message", onMessage);
                }
              }, 200);
              window.addEventListener("message", onMessage);
            });
          });
        }
        signOut() {
          return __awaiter(this, void 0, void 0, function* () {
            this.emitChange({ user: null, token: null });
          });
        }
        emitChange(authData) {
          if (authData.token !== void 0) {
            this.token = authData.token;
            if (authData.token === null) {
              (0, Storage_1.removeItem)(this.settings.key);
            } else {
              (0, Storage_1.setItem)(this.settings.key, authData.token);
            }
          }
          __classPrivateFieldGet(this, _Auth__events, "f").emit("change", authData);
        }
      };
      exports.Auth = Auth;
      _Auth__initialized = /* @__PURE__ */ new WeakMap(), _Auth__initializationPromise = /* @__PURE__ */ new WeakMap(), _Auth__signInWindow = /* @__PURE__ */ new WeakMap(), _Auth__events = /* @__PURE__ */ new WeakMap();
    }
  });

  // node_modules/colyseus.js/lib/Client.js
  var require_Client = __commonJS({
    "node_modules/colyseus.js/lib/Client.js"(exports) {
      "use strict";
      var __awaiter = exports && exports.__awaiter || function(thisArg, _arguments, P, generator) {
        function adopt(value) {
          return value instanceof P ? value : new P(function(resolve) {
            resolve(value);
          });
        }
        return new (P || (P = Promise))(function(resolve, reject) {
          function fulfilled(value) {
            try {
              step(generator.next(value));
            } catch (e) {
              reject(e);
            }
          }
          function rejected(value) {
            try {
              step(generator["throw"](value));
            } catch (e) {
              reject(e);
            }
          }
          function step(result) {
            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
          }
          step((generator = generator.apply(thisArg, _arguments || [])).next());
        });
      };
      var _a;
      Object.defineProperty(exports, "__esModule", { value: true });
      exports.Client = exports.MatchMakeError = void 0;
      var ServerError_1 = require_ServerError();
      var Room_1 = require_Room();
      var HTTP_1 = require_HTTP();
      var Auth_1 = require_Auth();
      var MatchMakeError = class extends Error {
        constructor(message, code) {
          super(message);
          this.code = code;
          Object.setPrototypeOf(this, MatchMakeError.prototype);
        }
      };
      exports.MatchMakeError = MatchMakeError;
      var DEFAULT_ENDPOINT = typeof window !== "undefined" && typeof ((_a = window === null || window === void 0 ? void 0 : window.location) === null || _a === void 0 ? void 0 : _a.hostname) !== "undefined" ? `${window.location.protocol.replace("http", "ws")}//${window.location.hostname}${window.location.port && `:${window.location.port}`}` : "ws://127.0.0.1:2567";
      var Client2 = class {
        constructor(settings = DEFAULT_ENDPOINT) {
          if (typeof settings === "string") {
            const url = settings.startsWith("/") ? new URL(settings, DEFAULT_ENDPOINT) : new URL(settings);
            const secure = url.protocol === "https:" || url.protocol === "wss:";
            const port = Number(url.port || (secure ? 443 : 80));
            this.settings = {
              hostname: url.hostname,
              pathname: url.pathname,
              port,
              secure
            };
          } else {
            if (settings.port === void 0) {
              settings.port = settings.secure ? 443 : 80;
            }
            if (settings.pathname === void 0) {
              settings.pathname = "";
            }
            this.settings = settings;
          }
          if (this.settings.pathname.endsWith("/")) {
            this.settings.pathname = this.settings.pathname.slice(0, -1);
          }
          this.http = new HTTP_1.HTTP(this);
          this.auth = new Auth_1.Auth(this.http);
        }
        joinOrCreate(roomName, options = {}, rootSchema) {
          return __awaiter(this, void 0, void 0, function* () {
            return yield this.createMatchMakeRequest("joinOrCreate", roomName, options, rootSchema);
          });
        }
        create(roomName, options = {}, rootSchema) {
          return __awaiter(this, void 0, void 0, function* () {
            return yield this.createMatchMakeRequest("create", roomName, options, rootSchema);
          });
        }
        join(roomName, options = {}, rootSchema) {
          return __awaiter(this, void 0, void 0, function* () {
            return yield this.createMatchMakeRequest("join", roomName, options, rootSchema);
          });
        }
        joinById(roomId, options = {}, rootSchema) {
          return __awaiter(this, void 0, void 0, function* () {
            return yield this.createMatchMakeRequest("joinById", roomId, options, rootSchema);
          });
        }
        /**
         * Re-establish connection with a room this client was previously connected to.
         *
         * @param reconnectionToken The `room.reconnectionToken` from previously connected room.
         * @param rootSchema (optional) Concrete root schema definition
         * @returns Promise<Room>
         */
        reconnect(reconnectionToken, rootSchema) {
          return __awaiter(this, void 0, void 0, function* () {
            if (typeof reconnectionToken === "string" && typeof rootSchema === "string") {
              throw new Error("DEPRECATED: .reconnect() now only accepts 'reconnectionToken' as argument.\nYou can get this token from previously connected `room.reconnectionToken`");
            }
            const [roomId, token] = reconnectionToken.split(":");
            if (!roomId || !token) {
              throw new Error("Invalid reconnection token format.\nThe format should be roomId:reconnectionToken");
            }
            return yield this.createMatchMakeRequest("reconnect", roomId, { reconnectionToken: token }, rootSchema);
          });
        }
        getAvailableRooms(roomName = "") {
          return __awaiter(this, void 0, void 0, function* () {
            return (yield this.http.get(`matchmake/${roomName}`, {
              headers: {
                "Accept": "application/json"
              }
            })).data;
          });
        }
        consumeSeatReservation(response, rootSchema, reuseRoomInstance) {
          return __awaiter(this, void 0, void 0, function* () {
            const room = this.createRoom(response.room.name, rootSchema);
            room.roomId = response.room.roomId;
            room.sessionId = response.sessionId;
            const options = { sessionId: room.sessionId };
            if (response.reconnectionToken) {
              options.reconnectionToken = response.reconnectionToken;
            }
            const targetRoom = reuseRoomInstance || room;
            room.connect(this.buildEndpoint(response.room, options), response.devMode && (() => __awaiter(this, void 0, void 0, function* () {
              console.info(`[Colyseus devMode]: ${String.fromCodePoint(128260)} Re-establishing connection with room id '${room.roomId}'...`);
              let retryCount = 0;
              let retryMaxRetries = 8;
              const retryReconnection = () => __awaiter(this, void 0, void 0, function* () {
                retryCount++;
                try {
                  yield this.consumeSeatReservation(response, rootSchema, targetRoom);
                  console.info(`[Colyseus devMode]: ${String.fromCodePoint(9989)} Successfully re-established connection with room '${room.roomId}'`);
                } catch (e) {
                  if (retryCount < retryMaxRetries) {
                    console.info(`[Colyseus devMode]: ${String.fromCodePoint(128260)} retrying... (${retryCount} out of ${retryMaxRetries})`);
                    setTimeout(retryReconnection, 2e3);
                  } else {
                    console.info(`[Colyseus devMode]: ${String.fromCodePoint(10060)} Failed to reconnect. Is your server running? Please check server logs.`);
                  }
                }
              });
              setTimeout(retryReconnection, 2e3);
            })), targetRoom);
            return new Promise((resolve, reject) => {
              const onError = (code, message) => reject(new ServerError_1.ServerError(code, message));
              targetRoom.onError.once(onError);
              targetRoom["onJoin"].once(() => {
                targetRoom.onError.remove(onError);
                resolve(targetRoom);
              });
            });
          });
        }
        createMatchMakeRequest(method, roomName, options = {}, rootSchema, reuseRoomInstance) {
          return __awaiter(this, void 0, void 0, function* () {
            const response = (yield this.http.post(`matchmake/${method}/${roomName}`, {
              headers: {
                "Accept": "application/json",
                "Content-Type": "application/json"
              },
              body: JSON.stringify(options)
            })).data;
            if (response.error) {
              throw new MatchMakeError(response.error, response.code);
            }
            if (method === "reconnect") {
              response.reconnectionToken = options.reconnectionToken;
            }
            return yield this.consumeSeatReservation(response, rootSchema, reuseRoomInstance);
          });
        }
        createRoom(roomName, rootSchema) {
          return new Room_1.Room(roomName, rootSchema);
        }
        buildEndpoint(room, options = {}) {
          const params = [];
          for (const name in options) {
            if (!options.hasOwnProperty(name)) {
              continue;
            }
            params.push(`${name}=${options[name]}`);
          }
          let endpoint = this.settings.secure ? "wss://" : "ws://";
          if (room.publicAddress) {
            endpoint += `${room.publicAddress}`;
          } else {
            endpoint += `${this.settings.hostname}${this.getEndpointPort()}${this.settings.pathname}`;
          }
          return `${endpoint}/${room.processId}/${room.roomId}?${params.join("&")}`;
        }
        getHttpEndpoint(segments = "") {
          const path = segments.startsWith("/") ? segments : `/${segments}`;
          return `${this.settings.secure ? "https" : "http"}://${this.settings.hostname}${this.getEndpointPort()}${this.settings.pathname}${path}`;
        }
        getEndpointPort() {
          return this.settings.port !== 80 && this.settings.port !== 443 ? `:${this.settings.port}` : "";
        }
      };
      exports.Client = Client2;
    }
  });

  // node_modules/colyseus.js/lib/serializer/SchemaSerializer.js
  var require_SchemaSerializer = __commonJS({
    "node_modules/colyseus.js/lib/serializer/SchemaSerializer.js"(exports) {
      "use strict";
      Object.defineProperty(exports, "__esModule", { value: true });
      exports.SchemaSerializer = void 0;
      var schema_1 = require_umd();
      var SchemaSerializer = class {
        setState(rawState) {
          return this.state.decode(rawState);
        }
        getState() {
          return this.state;
        }
        patch(patches) {
          return this.state.decode(patches);
        }
        teardown() {
          var _a, _b;
          (_b = (_a = this.state) === null || _a === void 0 ? void 0 : _a["$changes"]) === null || _b === void 0 ? void 0 : _b.root.clearRefs();
        }
        handshake(bytes, it) {
          if (this.state) {
            const reflection = new schema_1.Reflection();
            reflection.decode(bytes, it);
          } else {
            this.state = schema_1.Reflection.decode(bytes, it);
          }
        }
      };
      exports.SchemaSerializer = SchemaSerializer;
    }
  });

  // node_modules/colyseus.js/lib/serializer/NoneSerializer.js
  var require_NoneSerializer = __commonJS({
    "node_modules/colyseus.js/lib/serializer/NoneSerializer.js"(exports) {
      "use strict";
      Object.defineProperty(exports, "__esModule", { value: true });
      exports.NoneSerializer = void 0;
      var NoneSerializer = class {
        setState(rawState) {
        }
        getState() {
          return null;
        }
        patch(patches) {
        }
        teardown() {
        }
        handshake(bytes) {
        }
      };
      exports.NoneSerializer = NoneSerializer;
    }
  });

  // node_modules/colyseus.js/lib/index.js
  var require_lib = __commonJS({
    "node_modules/colyseus.js/lib/index.js"(exports) {
      "use strict";
      Object.defineProperty(exports, "__esModule", { value: true });
      exports.SchemaSerializer = exports.registerSerializer = exports.Auth = exports.Room = exports.ErrorCode = exports.Protocol = exports.Client = void 0;
      require_legacy();
      var Client_1 = require_Client();
      Object.defineProperty(exports, "Client", { enumerable: true, get: function() {
        return Client_1.Client;
      } });
      var Protocol_1 = require_Protocol();
      Object.defineProperty(exports, "Protocol", { enumerable: true, get: function() {
        return Protocol_1.Protocol;
      } });
      Object.defineProperty(exports, "ErrorCode", { enumerable: true, get: function() {
        return Protocol_1.ErrorCode;
      } });
      var Room_1 = require_Room();
      Object.defineProperty(exports, "Room", { enumerable: true, get: function() {
        return Room_1.Room;
      } });
      var Auth_1 = require_Auth();
      Object.defineProperty(exports, "Auth", { enumerable: true, get: function() {
        return Auth_1.Auth;
      } });
      var SchemaSerializer_1 = require_SchemaSerializer();
      Object.defineProperty(exports, "SchemaSerializer", { enumerable: true, get: function() {
        return SchemaSerializer_1.SchemaSerializer;
      } });
      var NoneSerializer_1 = require_NoneSerializer();
      var Serializer_1 = require_Serializer();
      Object.defineProperty(exports, "registerSerializer", { enumerable: true, get: function() {
        return Serializer_1.registerSerializer;
      } });
      (0, Serializer_1.registerSerializer)("schema", SchemaSerializer_1.SchemaSerializer);
      (0, Serializer_1.registerSerializer)("none", NoneSerializer_1.NoneSerializer);
    }
  });

  // node_modules/@wonderlandengine/components/dist/index.js
  var dist_exports = {};
  __export(dist_exports, {
    ARCamera8thwall: () => ARCamera8thwall,
    Anchor: () => Anchor,
    Cursor: () => Cursor,
    CursorTarget: () => CursorTarget,
    DebugObject: () => DebugObject,
    DeviceOrientationLook: () => DeviceOrientationLook,
    FingerCursor: () => FingerCursor,
    FixedFoveation: () => FixedFoveation,
    HandTracking: () => HandTracking,
    HitTestLocation: () => HitTestLocation,
    HowlerAudioListener: () => HowlerAudioListener,
    HowlerAudioSource: () => HowlerAudioSource,
    ImageTexture: () => ImageTexture,
    InputProfile: () => InputProfile,
    MouseLookComponent: () => MouseLookComponent,
    OrbitalCamera: () => OrbitalCamera,
    PlaneDetection: () => PlaneDetection,
    PlayerHeight: () => PlayerHeight,
    TargetFramerate: () => TargetFramerate,
    TeleportComponent: () => TeleportComponent,
    Trail: () => Trail,
    TwoJointIkSolver: () => TwoJointIkSolver,
    VideoTexture: () => VideoTexture,
    VrModeActiveSwitch: () => VrModeActiveSwitch,
    Vrm: () => Vrm,
    WasdControlsComponent: () => WasdControlsComponent,
    isPointLocalOnXRPlanePolygon: () => isPointLocalOnXRPlanePolygon,
    isPointWorldOnXRPlanePolygon: () => isPointWorldOnXRPlanePolygon
  });

  // node_modules/@wonderlandengine/api/dist/property.js
  var Type;
  (function(Type2) {
    Type2[Type2["Native"] = 0] = "Native";
    Type2[Type2["Bool"] = 1] = "Bool";
    Type2[Type2["Int"] = 2] = "Int";
    Type2[Type2["Float"] = 3] = "Float";
    Type2[Type2["String"] = 4] = "String";
    Type2[Type2["Enum"] = 5] = "Enum";
    Type2[Type2["Object"] = 6] = "Object";
    Type2[Type2["Mesh"] = 7] = "Mesh";
    Type2[Type2["Texture"] = 8] = "Texture";
    Type2[Type2["Material"] = 9] = "Material";
    Type2[Type2["Animation"] = 10] = "Animation";
    Type2[Type2["Skin"] = 11] = "Skin";
    Type2[Type2["Color"] = 12] = "Color";
    Type2[Type2["Vector2"] = 13] = "Vector2";
    Type2[Type2["Vector3"] = 14] = "Vector3";
    Type2[Type2["Vector4"] = 15] = "Vector4";
  })(Type || (Type = {}));
  var DefaultPropertyCloner = class {
    clone(type, value) {
      switch (type) {
        case Type.Color:
        case Type.Vector2:
        case Type.Vector3:
        case Type.Vector4:
          return value.slice();
        default:
          return value;
      }
    }
  };
  var defaultPropertyCloner = new DefaultPropertyCloner();
  var Property = {
    /**
     * Create an boolean property.
     *
     * @param defaultValue The default value. If not provided, defaults to `false`.
     */
    bool(defaultValue = false) {
      return { type: Type.Bool, default: defaultValue };
    },
    /**
     * Create an integer property.
     *
     * @param defaultValue The default value. If not provided, defaults to `0`.
     */
    int(defaultValue = 0) {
      return { type: Type.Int, default: defaultValue };
    },
    /**
     * Create an float property.
     *
     * @param defaultValue The default value. If not provided, defaults to `0.0`.
     */
    float(defaultValue = 0) {
      return { type: Type.Float, default: defaultValue };
    },
    /**
     * Create an string property.
     *
     * @param defaultValue The default value. If not provided, defaults to `''`.
     */
    string(defaultValue = "") {
      return { type: Type.String, default: defaultValue };
    },
    /**
     * Create an enumeration property.
     *
     * @param values The list of values.
     * @param defaultValue The default value. Can be a string or an index into
     *     `values`. If not provided, defaults to the first element.
     */
    enum(values, defaultValue) {
      return { type: Type.Enum, values, default: defaultValue };
    },
    /** Create an {@link Object3D} reference property. */
    object(opts) {
      return { type: Type.Object, default: null, required: opts?.required ?? false };
    },
    /** Create a {@link Mesh} reference property. */
    mesh(opts) {
      return { type: Type.Mesh, default: null, required: opts?.required ?? false };
    },
    /** Create a {@link Texture} reference property. */
    texture(opts) {
      return { type: Type.Texture, default: null, required: opts?.required ?? false };
    },
    /** Create a {@link Material} reference property. */
    material(opts) {
      return { type: Type.Material, default: null, required: opts?.required ?? false };
    },
    /** Create an {@link Animation} reference property. */
    animation(opts) {
      return { type: Type.Animation, default: null, required: opts?.required ?? false };
    },
    /** Create a {@link Skin} reference property. */
    skin(opts) {
      return { type: Type.Skin, default: null, required: opts?.required ?? false };
    },
    /**
     * Create a color property.
     *
     * @param r The red component, in the range [0; 1].
     * @param g The green component, in the range [0; 1].
     * @param b The blue component, in the range [0; 1].
     * @param a The alpha component, in the range [0; 1].
     */
    color(r = 0, g = 0, b = 0, a = 1) {
      return { type: Type.Color, default: [r, g, b, a] };
    },
    /**
     * Create a two-element vector property.
     *
     * @param x The x component.
     * @param y The y component.
     */
    vector2(x = 0, y = 0) {
      return { type: Type.Vector2, default: [x, y] };
    },
    /**
     * Create a three-element vector property.
     *
     * @param x The x component.
     * @param y The y component.
     * @param z The z component.
     */
    vector3(x = 0, y = 0, z = 0) {
      return { type: Type.Vector3, default: [x, y, z] };
    },
    /**
     * Create a four-element vector property.
     *
     * @param x The x component.
     * @param y The y component.
     * @param z The z component.
     * @param w The w component.
     */
    vector4(x = 0, y = 0, z = 0, w = 0) {
      return { type: Type.Vector4, default: [x, y, z, w] };
    }
  };

  // node_modules/@wonderlandengine/api/dist/decorators.js
  function propertyDecorator(data) {
    return function(target, propertyKey) {
      const ctor = target.constructor;
      ctor.Properties = ctor.hasOwnProperty("Properties") ? ctor.Properties : {};
      ctor.Properties[propertyKey] = data;
    };
  }
  function enumerable() {
    return function(_, __, descriptor) {
      descriptor.enumerable = true;
    };
  }
  function nativeProperty() {
    return function(target, propertyKey, descriptor) {
      enumerable()(target, propertyKey, descriptor);
      propertyDecorator({ type: Type.Native })(target, propertyKey);
    };
  }
  var property = {};
  for (const name in Property) {
    property[name] = (...args) => {
      const functor = Property[name];
      return propertyDecorator(functor(...args));
    };
  }

  // node_modules/@wonderlandengine/api/dist/utils/object.js
  function isNumber(value) {
    if (value === null || value === void 0)
      return false;
    return typeof value === "number" || value.constructor === Number;
  }
  function isImageLike(value) {
    return value instanceof HTMLImageElement || value instanceof HTMLVideoElement || value instanceof HTMLCanvasElement;
  }

  // node_modules/@wonderlandengine/api/dist/utils/event.js
  var TransactionType;
  (function(TransactionType2) {
    TransactionType2[TransactionType2["Addition"] = 1] = "Addition";
    TransactionType2[TransactionType2["Removal"] = 2] = "Removal";
  })(TransactionType || (TransactionType = {}));
  var Emitter = class {
    /**
     * List of listeners to trigger when `notify` is called.
     *
     * @hidden
     */
    _listeners = [];
    /**
     * `true` if the emitter is currently notifying listeners. This
     * is used to defer addition and removal.
     *
     * @hidden
     */
    _notifying = false;
    /**
     * Pending additions / removals, performed during a notification.
     *
     * @hidden
     */
    _transactions = [];
    /**
     * Register a new listener to be triggered on {@link Emitter.notify}.
     *
     * Basic usage:
     *
     * ```js
     * emitter.add((data) => {
     *     console.log('event received!');
     *     console.log(data);
     * });
     * ```
     *
     * Automatically remove the listener when an event is received:
     *
     * ```js
     * emitter.add((data) => {
     *     console.log('event received!');
     *     console.log(data);
     * }, {once: true});
     * ```
     *
     * @param listener The callback to register.
     * @param opts The listener options. For more information, please have a look
     *     at the {@link ListenerOptions} interface.
     *
     * @returns Reference to self (for method chaining)
     */
    add(listener, opts = {}) {
      const { once = false, id = void 0 } = opts;
      const data = { id, once, callback: listener };
      if (this._notifying) {
        this._transactions.push({ type: TransactionType.Addition, data });
        return this;
      }
      this._listeners.push(data);
      return this;
    }
    /**
     * Equivalent to {@link Emitter.add}.
     *
     * @param listeners The callback(s) to register.
     * @returns Reference to self (for method chaining).
     *
     * @deprecated Please use {@link Emitter.add} instead.
     */
    push(...listeners) {
      for (const cb of listeners)
        this.add(cb);
      return this;
    }
    /**
     * Register a new listener to be triggered on {@link Emitter.notify}.
     *
     * Once notified, the listener will be automatically removed.
     *
     * The method is equivalent to calling {@link Emitter.add} with:
     *
     * ```js
     * emitter.add(listener, {once: true});
     * ```
     *
     * @param listener The callback to register.
     *
     * @returns Reference to self (for method chaining).
     */
    once(listener) {
      return this.add(listener, { once: true });
    }
    /**
     * Remove a registered listener.
     *
     * Usage with a callback:
     *
     * ```js
     * const listener = (data) => console.log(data);
     * emitter.add(listener);
     *
     * // Remove using the callback reference:
     * emitter.remove(listener);
     * ```
     *
     * Usage with an id:
     *
     * ```js
     * emitter.add((data) => console.log(data), {id: 'my-callback'});
     *
     * // Remove using the id:
     * emitter.remove('my-callback');
     * ```
     *
     * Using identifiers, you will need to ensure your value is unique to avoid
     * removing listeners from other libraries, e.g.,:
     *
     * ```js
     * emitter.add((data) => console.log(data), {id: 'non-unique'});
     * // This second listener could be added by a third-party library.
     * emitter.add((data) => console.log('Hello From Library!'), {id: 'non-unique'});
     *
     * // Ho Snap! This also removed the library listener!
     * emitter.remove('non-unique');
     * ```
     *
     * The identifier can be any type. However, remember that the comparison will be
     * by-value for primitive types (string, number), but by reference for objects.
     *
     * Example:
     *
     * ```js
     * emitter.add(() => console.log('Hello'), {id: {value: 42}});
     * emitter.add(() => console.log('World!'), {id: {value: 42}});
     * emitter.remove({value: 42}); // None of the above listeners match!
     * emitter.notify(); // Prints 'Hello' and 'World!'.
     * ```
     *
     * Here, both emitters have id `{value: 42}`, but the comparison is made by reference. Thus,
     * the `remove()` call has no effect. We can make it work by doing:
     *
     * ```js
     * const id = {value: 42};
     * emitter.add(() => console.log('Hello'), {id});
     * emitter.add(() => console.log('World!'), {id});
     * emitter.remove(id); // Same reference, it works!
     * emitter.notify(); // Doesn't print.
     * ```
     *
     * @param listener The registered callback or a value representing the `id`.
     *
     * @returns Reference to self (for method chaining)
     */
    remove(listener) {
      if (this._notifying) {
        this._transactions.push({ type: TransactionType.Removal, data: listener });
        return this;
      }
      const listeners = this._listeners;
      for (let i = 0; i < listeners.length; ++i) {
        const target = listeners[i];
        if (target.callback === listener || target.id === listener) {
          listeners.splice(i--, 1);
        }
      }
      return this;
    }
    /**
     * Check whether the listener is registered.
     *
     * @note This method performs a linear search.
     *
     * * @note Doesn't account for pending listeners, i.e.,
     * listeners added / removed during a notification.
     *
     * @param listener The registered callback or a value representing the `id`.
     * @returns `true` if the handle is found, `false` otherwise.
     */
    has(listener) {
      const listeners = this._listeners;
      for (let i = 0; i < listeners.length; ++i) {
        const target = listeners[i];
        if (target.callback === listener || target.id === listener)
          return true;
      }
      return false;
    }
    /**
     * Notify listeners with the given data object.
     *
     * @note This method ensures all listeners are called even if
     * an exception is thrown. For (possibly) faster notification,
     * please use {@link Emitter.notifyUnsafe}.
     *
     * @param data The data to pass to listener when invoked.
     */
    notify(...data) {
      const listeners = this._listeners;
      this._notifying = true;
      for (let i = 0; i < listeners.length; ++i) {
        const listener = listeners[i];
        if (listener.once)
          listeners.splice(i--, 1);
        try {
          listener.callback(...data);
        } catch (e) {
          console.error(e);
        }
      }
      this._notifying = false;
      this._flushTransactions();
    }
    /**
     * Notify listeners with the given data object.
     *
     * @note Because this method doesn't catch exceptions, some listeners
     * will be skipped on a throw. Please use {@link Emitter.notify} for safe
     * notification.
     *
     * @param data The data to pass to listener when invoked.
     */
    notifyUnsafe(...data) {
      const listeners = this._listeners;
      for (let i = 0; i < listeners.length; ++i) {
        const listener = listeners[i];
        if (listener.once)
          listeners.splice(i--, 1);
        listener.callback(...data);
      }
      this._flushTransactions();
    }
    /**
     * Return a promise that will resolve on the next event.
     *
     * @note The promise might never resolve if no event is sent.
     *
     * @returns A promise that resolves with the data passed to
     *     {@link Emitter.notify}.
     */
    promise() {
      return new Promise((res, _) => {
        this.once((...args) => {
          if (args.length > 1) {
            res(args);
          } else {
            res(args[0]);
          }
        });
      });
    }
    /**
     * Number of listeners.
     *
     * @note Doesn't account for pending listeners, i.e.,
     * listeners added / removed during a notification.
     */
    get listenerCount() {
      return this._listeners.length;
    }
    /** `true` if it has no listeners, `false` otherwise. */
    get isEmpty() {
      return this.listenerCount === 0;
    }
    /**
     * Flush all pending transactions.
     *
     * @hidden
     */
    _flushTransactions() {
      const listeners = this._listeners;
      for (const transaction of this._transactions) {
        if (transaction.type === TransactionType.Addition) {
          listeners.push(transaction.data);
        } else {
          this.remove(transaction.data);
        }
      }
      this._transactions.length = 0;
    }
  };
  var RetainEmitterUndefined = {};
  var RetainEmitter = class extends Emitter {
    /** Pre-resolved data. @hidden */
    _event = RetainEmitterUndefined;
    /**
     * Emitter target used to reset the state of this emitter.
     *
     * @hidden
     */
    _reset;
    /** @override */
    add(listener, opts) {
      const immediate = opts?.immediate ?? true;
      if (this._event !== RetainEmitterUndefined && immediate) {
        listener(...this._event);
      }
      super.add(listener, opts);
      return this;
    }
    /**
     * @override
     *
     * @param listener The callback to register.
     * @param immediate If `true`, directly resolves if the emitter retains a value.
     *
     * @returns Reference to self (for method chaining).
     */
    once(listener, immediate) {
      return this.add(listener, { once: true, immediate });
    }
    /** @override */
    notify(...data) {
      this._event = data;
      super.notify(...data);
    }
    /** @override */
    notifyUnsafe(...data) {
      this._event = data;
      super.notifyUnsafe(...data);
    }
    /**
     * Reset the state of the emitter.
     *
     * Further call to {@link Emitter.add} will not automatically resolve,
     * until a new call to {@link Emitter.notify} is performed.
     *
     * @returns Reference to self (for method chaining)
     */
    reset() {
      this._event = RetainEmitterUndefined;
      return this;
    }
    /** Returns the retained data, or `undefined` if no data was retained. */
    get data() {
      return this.isDataRetained ? this._event : void 0;
    }
    /** `true` if data is retained from the last event, `false` otherwise. */
    get isDataRetained() {
      return this._event !== RetainEmitterUndefined;
    }
  };

  // node_modules/@wonderlandengine/api/dist/resources/resource.js
  var Resource = class {
    /** Relative index in the host. @hidden */
    _index = -1;
    /** For compatibility with SceneResource. @hidden */
    _id = -1;
    /** @hidden */
    _engine;
    constructor(engine, index) {
      this._engine = engine;
      this._index = index;
      this._id = index;
    }
    /** Hosting engine instance. */
    get engine() {
      return this._engine;
    }
    /** Index of this resource in the {@link Scene}'s manager. */
    get index() {
      return this._index;
    }
    /**
     * Checks equality by comparing ids and **not** the JavaScript reference.
     *
     * @deprecated Use JavaScript reference comparison instead:
     *
     * ```js
     * const meshA = engine.meshes.create({vertexCount: 1});
     * const meshB = engine.meshes.create({vertexCount: 1});
     * const meshC = meshB;
     * console.log(meshA === meshB); // false
     * console.log(meshA === meshA); // true
     * console.log(meshB === meshC); // true
     * ```
     */
    equals(other) {
      if (!other)
        return false;
      return this._index === other._index;
    }
    /**
     * `true` if the object is destroyed, `false` otherwise.
     *
     * If {@link WonderlandEngine.erasePrototypeOnDestroy} is `true`,
     * reading a class attribute / method will throw.
     */
    get isDestroyed() {
      return this._index <= 0;
    }
  };

  // node_modules/@wonderlandengine/api/dist/utils/misc.js
  function createDestroyedProxy(type) {
    return new Proxy({}, {
      get(_, param) {
        if (param === "isDestroyed")
          return true;
        throw new Error(`Cannot read '${param}' of destroyed ${type}`);
      },
      set(_, param) {
        throw new Error(`Cannot write '${param}' of destroyed ${type}`);
      }
    });
  }

  // node_modules/@wonderlandengine/api/dist/wonderland.js
  var __decorate = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var LogTag;
  (function(LogTag2) {
    LogTag2[LogTag2["Engine"] = 0] = "Engine";
    LogTag2[LogTag2["Scene"] = 1] = "Scene";
    LogTag2[LogTag2["Component"] = 2] = "Component";
  })(LogTag || (LogTag = {}));
  var Collider;
  (function(Collider2) {
    Collider2[Collider2["Sphere"] = 0] = "Sphere";
    Collider2[Collider2["AxisAlignedBox"] = 1] = "AxisAlignedBox";
    Collider2[Collider2["Box"] = 2] = "Box";
  })(Collider || (Collider = {}));
  var Alignment;
  (function(Alignment2) {
    Alignment2[Alignment2["Left"] = 0] = "Left";
    Alignment2[Alignment2["Center"] = 1] = "Center";
    Alignment2[Alignment2["Right"] = 2] = "Right";
  })(Alignment || (Alignment = {}));
  var VerticalAlignment;
  (function(VerticalAlignment2) {
    VerticalAlignment2[VerticalAlignment2["Line"] = 0] = "Line";
    VerticalAlignment2[VerticalAlignment2["Middle"] = 1] = "Middle";
    VerticalAlignment2[VerticalAlignment2["Top"] = 2] = "Top";
    VerticalAlignment2[VerticalAlignment2["Bottom"] = 3] = "Bottom";
  })(VerticalAlignment || (VerticalAlignment = {}));
  var TextEffect;
  (function(TextEffect2) {
    TextEffect2[TextEffect2["None"] = 0] = "None";
    TextEffect2[TextEffect2["Outline"] = 1] = "Outline";
  })(TextEffect || (TextEffect = {}));
  var TextWrapMode;
  (function(TextWrapMode2) {
    TextWrapMode2[TextWrapMode2["None"] = 0] = "None";
    TextWrapMode2[TextWrapMode2["Soft"] = 1] = "Soft";
    TextWrapMode2[TextWrapMode2["Hard"] = 2] = "Hard";
    TextWrapMode2[TextWrapMode2["Clip"] = 3] = "Clip";
  })(TextWrapMode || (TextWrapMode = {}));
  var InputType;
  (function(InputType2) {
    InputType2[InputType2["Head"] = 0] = "Head";
    InputType2[InputType2["EyeLeft"] = 1] = "EyeLeft";
    InputType2[InputType2["EyeRight"] = 2] = "EyeRight";
    InputType2[InputType2["ControllerLeft"] = 3] = "ControllerLeft";
    InputType2[InputType2["ControllerRight"] = 4] = "ControllerRight";
    InputType2[InputType2["RayLeft"] = 5] = "RayLeft";
    InputType2[InputType2["RayRight"] = 6] = "RayRight";
  })(InputType || (InputType = {}));
  var LightType;
  (function(LightType2) {
    LightType2[LightType2["Point"] = 0] = "Point";
    LightType2[LightType2["Spot"] = 1] = "Spot";
    LightType2[LightType2["Sun"] = 2] = "Sun";
  })(LightType || (LightType = {}));
  var AnimationState;
  (function(AnimationState2) {
    AnimationState2[AnimationState2["Playing"] = 0] = "Playing";
    AnimationState2[AnimationState2["Paused"] = 1] = "Paused";
    AnimationState2[AnimationState2["Stopped"] = 2] = "Stopped";
  })(AnimationState || (AnimationState = {}));
  var ForceMode;
  (function(ForceMode2) {
    ForceMode2[ForceMode2["Force"] = 0] = "Force";
    ForceMode2[ForceMode2["Impulse"] = 1] = "Impulse";
    ForceMode2[ForceMode2["VelocityChange"] = 2] = "VelocityChange";
    ForceMode2[ForceMode2["Acceleration"] = 3] = "Acceleration";
  })(ForceMode || (ForceMode = {}));
  var CollisionEventType;
  (function(CollisionEventType2) {
    CollisionEventType2[CollisionEventType2["Touch"] = 0] = "Touch";
    CollisionEventType2[CollisionEventType2["TouchLost"] = 1] = "TouchLost";
    CollisionEventType2[CollisionEventType2["TriggerTouch"] = 2] = "TriggerTouch";
    CollisionEventType2[CollisionEventType2["TriggerTouchLost"] = 3] = "TriggerTouchLost";
  })(CollisionEventType || (CollisionEventType = {}));
  var Shape;
  (function(Shape2) {
    Shape2[Shape2["None"] = 0] = "None";
    Shape2[Shape2["Sphere"] = 1] = "Sphere";
    Shape2[Shape2["Capsule"] = 2] = "Capsule";
    Shape2[Shape2["Box"] = 3] = "Box";
    Shape2[Shape2["Plane"] = 4] = "Plane";
    Shape2[Shape2["ConvexMesh"] = 5] = "ConvexMesh";
    Shape2[Shape2["TriangleMesh"] = 6] = "TriangleMesh";
  })(Shape || (Shape = {}));
  var MeshAttribute;
  (function(MeshAttribute2) {
    MeshAttribute2[MeshAttribute2["Position"] = 0] = "Position";
    MeshAttribute2[MeshAttribute2["Tangent"] = 1] = "Tangent";
    MeshAttribute2[MeshAttribute2["Normal"] = 2] = "Normal";
    MeshAttribute2[MeshAttribute2["TextureCoordinate"] = 3] = "TextureCoordinate";
    MeshAttribute2[MeshAttribute2["Color"] = 4] = "Color";
    MeshAttribute2[MeshAttribute2["JointId"] = 5] = "JointId";
    MeshAttribute2[MeshAttribute2["JointWeight"] = 6] = "JointWeight";
  })(MeshAttribute || (MeshAttribute = {}));
  var DestroyedObjectInstance = createDestroyedProxy("object");
  var DestroyedComponentInstance = createDestroyedProxy("component");
  var DestroyedPrefabInstance = createDestroyedProxy("prefab/scene");
  function isMeshShape(shape) {
    return shape === Shape.ConvexMesh || shape === Shape.TriangleMesh;
  }
  function isBaseComponentClass(value) {
    return !!value && value.hasOwnProperty("_isBaseComponent") && value._isBaseComponent;
  }
  var SQRT_3 = Math.sqrt(3);
  var _Component = class {
    /**
     * Pack scene index and component id.
     *
     * @param scene Scene index.
     * @param id Component id.
     * @returns The packed id.
     *
     * @hidden
     */
    static _pack(scene, id) {
      return scene << 22 | id;
    }
    /**
     * Allows to inherit properties directly inside the editor.
     *
     * @note Do not use directly, prefer using {@link inheritProperties}.
     *
     * @hidden
     */
    static _inheritProperties() {
      inheritProperties(this);
    }
    /** Manager index. @hidden */
    _manager;
    /** Packed id, containing the scene and the local id. @hidden */
    _id;
    /** Id relative to the scene component's manager. @hidden */
    _localId;
    /**
     * Object containing this object.
     *
     * **Note**: This is cached for faster retrieval.
     *
     * @hidden
     */
    _object;
    /** Scene instance. @hidden */
    _scene;
    /**
     * Create a new instance
     *
     * @param engine The engine instance.
     * @param manager Index of the manager.
     * @param id WASM component instance index.
     *
     * @hidden
     */
    constructor(scene, manager = -1, id = -1) {
      this._scene = scene;
      this._manager = manager;
      this._localId = id;
      this._id = _Component._pack(scene._index, id);
      this._object = null;
    }
    /** Scene this component is part of. */
    get scene() {
      return this._scene;
    }
    /** Hosting engine instance. */
    get engine() {
      return this._scene.engine;
    }
    /** The name of this component's type */
    get type() {
      const ctor = this.constructor;
      return ctor.TypeName;
    }
    /** The object this component is attached to. */
    get object() {
      if (!this._object) {
        const objectId = this.engine.wasm._wl_component_get_object(this._manager, this._id);
        this._object = this._scene.wrap(objectId);
      }
      return this._object;
    }
    /**
     * Set whether this component is active.
     *
     * Activating/deactivating a component comes at a small cost of reordering
     * components in the respective component manager. This function therefore
     * is not a trivial assignment.
     *
     * Does nothing if the component is already activated/deactivated.
     *
     * @param active New active state.
     */
    set active(active) {
      this.engine.wasm._wl_component_setActive(this._manager, this._id, active);
    }
    /** `true` if the component is marked as active and its scene is active. */
    get active() {
      return this.markedActive && this._scene.isActive;
    }
    /**
     * `true` if the component is marked as active in the scene, `false` otherwise.
     *
     * @note At the opposite of {@link Component.active}, this accessor doesn't
     * take into account whether the scene is active or not.
     */
    get markedActive() {
      return this.engine.wasm._wl_component_isActive(this._manager, this._id) != 0;
    }
    /**
     * Copy all the properties from `src` into this instance.
     *
     * @note Only properties are copied. If a component needs to
     * copy extra data, it needs to override this method.
     *
     * #### Example
     *
     * ```js
     * class MyComponent extends Component {
     *     nonPropertyData = 'Hello World';
     *
     *     copy(src) {
     *         super.copy(src);
     *         this.nonPropertyData = src.nonPropertyData;
     *         return this;
     *     }
     * }
     * ```
     *
     * @note This method is called by {@link Object3D.clone}. Do not attempt to:
     *     - Create new component
     *     - Read references to other objects
     *
     * When cloning via {@link Object3D.clone}, this method will be called before
     * {@link Component.start}.
     *
     * @note JavaScript component properties aren't retargeted. Thus, references
     * inside the source object will not be retargeted to the destination object,
     * at the exception of the skin data on {@link MeshComponent} and {@link AnimationComponent}.
     *
     * @param src The source component to copy from.
     *
     * @returns Reference to self (for method chaining).
     */
    copy(src) {
      const ctor = this.constructor;
      const properties = ctor.Properties;
      if (!properties)
        return this;
      for (const name in properties) {
        const property2 = properties[name];
        const value = src[name];
        if (value === void 0)
          continue;
        const cloner = property2.cloner ?? defaultPropertyCloner;
        this[name] = cloner.clone(property2.type, value);
      }
      return this;
    }
    /**
     * Remove this component from its objects and destroy it.
     *
     * It is best practice to set the component to `null` after,
     * to ensure it does not get used later.
     *
     * ```js
     *    c.destroy();
     *    c = null;
     * ```
     * @since 0.9.0
     */
    destroy() {
      const manager = this._manager;
      if (manager < 0 || this._id < 0)
        return;
      this.engine.wasm._wl_component_remove(manager, this._id);
    }
    /**
     * Checks equality by comparing ids and **not** the JavaScript reference.
     *
     * @deprecate Use JavaScript reference comparison instead:
     *
     * ```js
     * const componentA = obj.addComponent('mesh');
     * const componentB = obj.addComponent('mesh');
     * const componentC = componentB;
     * console.log(componentA === componentB); // false
     * console.log(componentA === componentA); // true
     * console.log(componentB === componentC); // true
     * ```
     */
    equals(otherComponent) {
      if (!otherComponent)
        return false;
      return this._manager === otherComponent._manager && this._id === otherComponent._id;
    }
    /**
     * Reset the component properties to default.
     *
     * @note This is automatically called during the component instantiation.
     *
     * @returns Reference to self (for method chaining).
     */
    resetProperties() {
      const ctor = this.constructor;
      const properties = ctor.Properties;
      if (!properties)
        return this;
      for (const name in properties) {
        const property2 = properties[name];
        const cloner = property2.cloner ?? defaultPropertyCloner;
        this[name] = cloner.clone(property2.type, property2.default);
      }
      return this;
    }
    /** @deprecated Use {@link Component.resetProperties} instead. */
    reset() {
      return this.resetProperties();
    }
    /**
     * Validate the properties on this instance.
     *
     * @throws If any of the required properties isn't initialized
     * on this instance.
     */
    validateProperties() {
      const ctor = this.constructor;
      if (!ctor.Properties)
        return;
      for (const name in ctor.Properties) {
        if (!ctor.Properties[name].required)
          continue;
        if (!this[name]) {
          throw new Error(`Property '${name}' is required but was not initialized`);
        }
      }
    }
    toString() {
      if (this.isDestroyed) {
        return "Component(destroyed)";
      }
      return `Component('${this.type}', ${this._localId})`;
    }
    /**
     * `true` if the component is destroyed, `false` otherwise.
     *
     * If {@link WonderlandEngine.erasePrototypeOnDestroy} is `true`,
     * reading a custom property will not work:
     *
     * ```js
     * engine.erasePrototypeOnDestroy = true;
     *
     * const comp = obj.addComponent('mesh');
     * comp.customParam = 'Hello World!';
     *
     * console.log(comp.isDestroyed); // Prints `false`
     * comp.destroy();
     * console.log(comp.isDestroyed); // Prints `true`
     * console.log(comp.customParam); // Throws an error
     * ```
     *
     * @since 1.1.1
     */
    get isDestroyed() {
      return this._id < 0;
    }
    /** @hidden */
    _copy(src, offsetsPtr) {
      const wasm = this.engine.wasm;
      const offsets = wasm.HEAPU32;
      const offsetsStart = offsetsPtr >>> 2;
      const destScene = this._scene;
      const ctor = this.constructor;
      for (const name in ctor.Properties) {
        const value = src[name];
        if (value === null) {
          this[name] = null;
          continue;
        }
        const prop = ctor.Properties[name];
        const offset2 = offsets[offsetsStart + prop.type];
        let retargeted;
        switch (prop.type) {
          case Type.Object: {
            const index = wasm._wl_object_index(value._id);
            const id = wasm._wl_object_id(destScene._index, index + offset2);
            retargeted = destScene.wrap(id);
            break;
          }
          case Type.Animation:
            retargeted = destScene.animations.wrap(offset2 + value._index);
            break;
          case Type.Skin:
            retargeted = destScene.skins.wrap(offset2 + value._index);
            break;
          default:
            const cloner = prop.cloner ?? defaultPropertyCloner;
            retargeted = cloner.clone(prop.type, value);
            break;
        }
        this[name] = retargeted;
      }
      return this;
    }
    /**
     * Trigger the component {@link Component.init} method.
     *
     * @note Use this method instead of directly calling {@link Component.init},
     * because this method creates an handler for the {@link Component.start}.
     *
     * @note This api is meant to be used internally.
     *
     * @hidden
     */
    _triggerInit() {
      if (this.init) {
        try {
          this.init();
        } catch (e) {
          this.engine.log.error(LogTag.Component, `Exception during ${this.type} init() on object ${this.object.name}`);
          this.engine.log.error(LogTag.Component, e);
        }
      }
      const oldActivate = this.onActivate;
      this.onActivate = function() {
        this.onActivate = oldActivate;
        let failed = false;
        try {
          this.validateProperties();
        } catch (e) {
          this.engine.log.error(LogTag.Component, `Exception during ${this.type} validateProperties() on object ${this.object.name}`);
          this.engine.log.error(LogTag.Component, e);
          failed = true;
        }
        try {
          this.start?.();
        } catch (e) {
          this.engine.log.error(LogTag.Component, `Exception during ${this.type} start() on object ${this.object.name}`);
          this.engine.log.error(LogTag.Component, e);
          failed = true;
        }
        if (failed) {
          this.active = false;
          return;
        }
        if (!this.onActivate)
          return;
        try {
          this.onActivate();
        } catch (e) {
          this.engine.log.error(LogTag.Component, `Exception during ${this.type} onActivate() on object ${this.object.name}`);
          this.engine.log.error(LogTag.Component, e);
        }
      };
    }
    /**
     * Trigger the component {@link Component.update} method.
     *
     * @note This api is meant to be used internally.
     *
     * @hidden
     */
    _triggerUpdate(dt) {
      if (!this.update)
        return;
      try {
        this.update(dt);
      } catch (e) {
        this.engine.log.error(LogTag.Component, `Exception during ${this.type} update() on object ${this.object.name}`);
        this.engine.log.error(LogTag.Component, e);
        if (this.engine.wasm._deactivate_component_on_error) {
          this.active = false;
        }
      }
    }
    /**
     * Trigger the component {@link Component.onActivate} method.
     *
     * @note This api is meant to be used internally.
     *
     * @hidden
     */
    _triggerOnActivate() {
      if (!this.onActivate)
        return;
      try {
        this.onActivate();
      } catch (e) {
        this.engine.log.error(LogTag.Component, `Exception during ${this.type} onActivate() on object ${this.object.name}`);
        this.engine.log.error(LogTag.Component, e);
      }
    }
    /**
     * Trigger the component {@link Component.onDeactivate} method.
     *
     * @note This api is meant to be used internally.
     *
     * @hidden
     */
    _triggerOnDeactivate() {
      if (!this.onDeactivate)
        return;
      try {
        this.onDeactivate();
      } catch (e) {
        this.engine.log.error(LogTag.Component, `Exception during ${this.type} onDeactivate() on object ${this.object.name}`);
        this.engine.log.error(LogTag.Component, e);
      }
    }
    /**
     * Trigger the component {@link Component.onDestroy} method.
     *
     * @note This api is meant to be used internally.
     *
     * @hidden
     */
    _triggerOnDestroy() {
      try {
        if (this.onDestroy)
          this.onDestroy();
      } catch (e) {
        this.engine.log.error(LogTag.Component, `Exception during ${this.type} onDestroy() on object ${this.object.name}`);
        this.engine.log.error(LogTag.Component, e);
      }
      this._scene._components.destroy(this);
    }
  };
  var Component = _Component;
  /**
   * `true` for every class inheriting from this class.
   *
   * @note This is a workaround for `instanceof` to prevent issues
   * that could arise when an application ends up using multiple API versions.
   *
   * @hidden
   */
  __publicField(Component, "_isBaseComponent", true);
  /**
   * Fixed order of attributes in the `Properties` array.
   *
   * @note This is used for parameter deserialization and is filled during
   * component registration.
   *
   * @hidden
   */
  __publicField(Component, "_propertyOrder", []);
  /**
   * Unique identifier for this component class.
   *
   * This is used to register, add, and retrieve components of a given type.
   */
  __publicField(Component, "TypeName");
  /**
   * Properties of this component class.
   *
   * Properties are public attributes that can be configured via the
   * Wonderland Editor.
   *
   * Example:
   *
   * ```js
   * import { Component, Type } from '@wonderlandengine/api';
   * class MyComponent extends Component {
   *     static TypeName = 'my-component';
   *     static Properties = {
   *         myBoolean: { type: Type.Boolean, default: false },
   *         myFloat: { type: Type.Float, default: false },
   *         myTexture: { type: Type.Texture, default: null },
   *     };
   * }
   * ```
   *
   * Properties are automatically added to each component instance, and are
   * accessible like any JS attribute:
   *
   * ```js
   * // Creates a new component and set each properties value:
   * const myComponent = object.addComponent(MyComponent, {
   *     myBoolean: true,
   *     myFloat: 42.0,
   *     myTexture: null
   * });
   *
   * // You can also override the properties on the instance:
   * myComponent.myBoolean = false;
   * myComponent.myFloat = -42.0;
   * ```
   *
   * #### References
   *
   * Reference types (i.e., mesh, object, etc...) can also be listed as **required**:
   *
   * ```js
   * import {Component, Property} from '@wonderlandengine/api';
   *
   * class MyComponent extends Component {
   *     static Properties = {
   *         myObject: Property.object({required: true}),
   *         myAnimation: Property.animation({required: true}),
   *         myTexture: Property.texture({required: true}),
   *         myMesh: Property.mesh({required: true}),
   *     }
   * }
   * ```
   *
   * Please note that references are validated **once** before the call to {@link Component.start} only,
   * via the {@link Component.validateProperties} method.
   */
  __publicField(Component, "Properties");
  /**
   * When set to `true`, the child class inherits from the parent
   * properties, as shown in the following example:
   *
   * ```js
   * import {Component, Property} from '@wonderlandengine/api';
   *
   * class Parent extends Component {
   *     static TypeName = 'parent';
   *     static Properties = {parentName: Property.string('parent')}
   * }
   *
   * class Child extends Parent {
   *     static TypeName = 'child';
   *     static Properties = {name: Property.string('child')}
   *     static InheritProperties = true;
   *
   *     start() {
   *         // Works because `InheritProperties` is `true`.
   *         console.log(`${this.name} inherits from ${this.parentName}`);
   *     }
   * }
   * ```
   *
   * @note Properties defined in descendant classes will override properties
   * with the same name defined in ancestor classes.
   *
   * Defaults to `true`.
   */
  __publicField(Component, "InheritProperties");
  /**
   * Called when this component class is registered.
   *
   * @example
   *
   * This callback can be used to register dependencies of a component,
   * e.g., component classes that need to be registered in order to add
   * them at runtime with {@link Object3D.addComponent}, independent of whether
   * they are used in the editor.
   *
   * ```js
   * class Spawner extends Component {
   *     static TypeName = 'spawner';
   *
   *     static onRegister(engine) {
   *         engine.registerComponent(SpawnedComponent);
   *     }
   *
   *     // You can now use addComponent with SpawnedComponent
   * }
   * ```
   *
   * @example
   *
   * This callback can be used to register different implementations of a
   * component depending on client features or API versions.
   *
   * ```js
   * // Properties need to be the same for all implementations!
   * const SharedProperties = {};
   *
   * class Anchor extends Component {
   *     static TypeName = 'spawner';
   *     static Properties = SharedProperties;
   *
   *     static onRegister(engine) {
   *         if(navigator.xr === undefined) {
   *             /* WebXR unsupported, keep this dummy component *\/
   *             return;
   *         }
   *         /* WebXR supported! Override already registered dummy implementation
   *          * with one depending on hit-test API support *\/
   *         engine.registerComponent(window.HitTestSource === undefined ?
   *             AnchorWithoutHitTest : AnchorWithHitTest);
   *     }
   *
   *     // This one implements no functions
   * }
   * ```
   */
  __publicField(Component, "onRegister");
  var BrokenComponent = class extends Component {
  };
  __publicField(BrokenComponent, "TypeName", "__broken-component__");
  function inheritProperties(target) {
    if (!target.TypeName)
      return;
    const chain = [];
    let curr = target;
    while (curr && !isBaseComponentClass(curr)) {
      const comp = curr;
      const needsMerge = comp.hasOwnProperty("InheritProperties") ? comp.InheritProperties : true;
      if (!needsMerge)
        break;
      if (comp.TypeName && comp.hasOwnProperty("Properties")) {
        chain.push(comp);
      }
      curr = Object.getPrototypeOf(curr);
    }
    if (!chain.length || chain.length === 1 && chain[0] === target) {
      return;
    }
    const merged = {};
    for (let i = chain.length - 1; i >= 0; --i) {
      Object.assign(merged, chain[i].Properties);
    }
    target.Properties = merged;
  }
  var CollisionComponent = class extends Component {
    getExtents(out = new Float32Array(3)) {
      const wasm = this.engine.wasm;
      const ptr = wasm._wl_collision_component_get_extents(this._id) / 4;
      out[0] = wasm.HEAPF32[ptr];
      out[1] = wasm.HEAPF32[ptr + 1];
      out[2] = wasm.HEAPF32[ptr + 2];
      return out;
    }
    /** Collision component collider */
    get collider() {
      return this.engine.wasm._wl_collision_component_get_collider(this._id);
    }
    /**
     * Set collision component collider.
     *
     * @param collider Collider of the collision component.
     */
    set collider(collider) {
      this.engine.wasm._wl_collision_component_set_collider(this._id, collider);
    }
    /**
     * Equivalent to {@link CollisionComponent.getExtents}.
     *
     * @note Prefer to use {@link CollisionComponent.getExtents} for performance.
     */
    get extents() {
      const wasm = this.engine.wasm;
      return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_collision_component_get_extents(this._id), 3);
    }
    /**
     * Set collision component extents.
     *
     * If {@link collider} returns {@link Collider.Sphere}, only the first
     * component of the passed vector is used.
     *
     * Example:
     *
     * ```js
     * // Spans 1 unit on the x-axis, 2 on the y-axis, 3 on the z-axis.
     * collision.extent = [1, 2, 3];
     * ```
     *
     * @param extents Extents of the collision component, expects a
     *      3 component array.
     */
    set extents(extents) {
      const wasm = this.engine.wasm;
      const ptr = wasm._wl_collision_component_get_extents(this._id) / 4;
      wasm.HEAPF32[ptr] = extents[0];
      wasm.HEAPF32[ptr + 1] = extents[1];
      wasm.HEAPF32[ptr + 2] = extents[2];
    }
    /**
     * Get collision component radius.
     *
     * @note If {@link collider} is not {@link Collider.Sphere}, the returned value
     * corresponds to the radius of a sphere enclosing the shape.
     *
     * Example:
     *
     * ```js
     * sphere.radius = 3.0;
     * console.log(sphere.radius); // 3.0
     *
     * box.extents = [2.0, 2.0, 2.0];
     * console.log(box.radius); // 1.732...
     * ```
     *
     */
    get radius() {
      const wasm = this.engine.wasm;
      if (this.collider === Collider.Sphere)
        return wasm.HEAPF32[wasm._wl_collision_component_get_extents(this._id) >> 2];
      const extents = new Float32Array(wasm.HEAPF32.buffer, wasm._wl_collision_component_get_extents(this._id), 3);
      const x2 = extents[0] * extents[0];
      const y2 = extents[1] * extents[1];
      const z2 = extents[2] * extents[2];
      return Math.sqrt(x2 + y2 + z2) / 2;
    }
    /**
     * Set collision component radius.
     *
     * @param radius Radius of the collision component
     *
     * @note If {@link collider} is not {@link Collider.Sphere},
     * the extents are set to form a square that fits a sphere with the provided radius.
     *
     * Example:
     *
     * ```js
     * aabbCollision.radius = 2.0; // AABB fits a sphere of radius 2.0
     * boxCollision.radius = 3.0; // Box now fits a sphere of radius 3.0, keeping orientation
     * ```
     *
     */
    set radius(radius) {
      const length5 = this.collider === Collider.Sphere ? radius : 2 * radius / SQRT_3;
      this.extents.set([length5, length5, length5]);
    }
    /**
     * Collision component group.
     *
     * The groups is a bitmask that is compared to other components in {@link CollisionComponent#queryOverlaps}
     * or the group in {@link Scene#rayCast}.
     *
     * Colliders that have no common groups will not overlap with each other. If a collider
     * has none of the groups set for {@link Scene#rayCast}, the ray will not hit it.
     *
     * Each bit represents belonging to a group, see example.
     *
     * ```js
     *    // c belongs to group 2
     *    c.group = (1 << 2);
     *
     *    // c belongs to group 0
     *    c.group = (1 << 0);
     *
     *    // c belongs to group 0 *and* 2
     *    c.group = (1 << 0) | (1 << 2);
     *
     *    (c.group & (1 << 2)) != 0; // true
     *    (c.group & (1 << 7)) != 0; // false
     * ```
     */
    get group() {
      return this.engine.wasm._wl_collision_component_get_group(this._id);
    }
    /**
     * Set collision component group.
     *
     * @param group Group mask of the collision component.
     */
    set group(group) {
      this.engine.wasm._wl_collision_component_set_group(this._id, group);
    }
    /**
     * Query overlapping objects.
     *
     * Usage:
     *
     * ```js
     * const collision = object.getComponent('collision');
     * const overlaps = collision.queryOverlaps();
     * for(const otherCollision of overlaps) {
     *     const otherObject = otherCollision.object;
     *     console.log(`Collision with object ${otherObject.objectId}`);
     * }
     * ```
     *
     * @returns Collision components overlapping this collider.
     */
    queryOverlaps() {
      const count = this.engine.wasm._wl_collision_component_query_overlaps(this._id, this.engine.wasm._tempMem, this.engine.wasm._tempMemSize >> 1);
      const overlaps = new Array(count);
      for (let i = 0; i < count; ++i) {
        const id = this.engine.wasm._tempMemUint16[i];
        overlaps[i] = this._scene._components.wrapCollision(id);
      }
      return overlaps;
    }
  };
  /** @override */
  __publicField(CollisionComponent, "TypeName", "collision");
  __decorate([
    nativeProperty()
  ], CollisionComponent.prototype, "collider", null);
  __decorate([
    nativeProperty()
  ], CollisionComponent.prototype, "extents", null);
  __decorate([
    nativeProperty()
  ], CollisionComponent.prototype, "group", null);
  var TextComponent = class extends Component {
    /** Text component alignment. */
    get alignment() {
      return this.engine.wasm._wl_text_component_get_horizontal_alignment(this._id);
    }
    /**
     * Set text component alignment.
     *
     * @param alignment Alignment for the text component.
     */
    set alignment(alignment) {
      this.engine.wasm._wl_text_component_set_horizontal_alignment(this._id, alignment);
    }
    /**
     * Text component vertical alignment.
     * @since 1.2.0
     */
    get verticalAlignment() {
      return this.engine.wasm._wl_text_component_get_vertical_alignment(this._id);
    }
    /**
     * Set text component vertical alignment.
     *
     * @param verticalAlignment Vertical for the text component.
     * @since 1.2.0
     */
    set verticalAlignment(verticalAlignment) {
      this.engine.wasm._wl_text_component_set_vertical_alignment(this._id, verticalAlignment);
    }
    /**
     * Text component justification.
     *
     * @deprecated Please use {@link TextComponent.verticalAlignment} instead.
     */
    get justification() {
      return this.verticalAlignment;
    }
    /**
     * Set text component justification.
     *
     * @param justification Justification for the text component.
     *
     * @deprecated Please use {@link TextComponent.verticalAlignment} instead.
     */
    set justification(justification) {
      this.verticalAlignment = justification;
    }
    /** Text component character spacing. */
    get characterSpacing() {
      return this.engine.wasm._wl_text_component_get_character_spacing(this._id);
    }
    /**
     * Set text component character spacing.
     *
     * @param spacing Character spacing for the text component.
     */
    set characterSpacing(spacing) {
      this.engine.wasm._wl_text_component_set_character_spacing(this._id, spacing);
    }
    /** Text component line spacing. */
    get lineSpacing() {
      return this.engine.wasm._wl_text_component_get_line_spacing(this._id);
    }
    /**
     * Set text component line spacing
     *
     * @param spacing Line spacing for the text component
     */
    set lineSpacing(spacing) {
      this.engine.wasm._wl_text_component_set_line_spacing(this._id, spacing);
    }
    /** Text component effect. */
    get effect() {
      return this.engine.wasm._wl_text_component_get_effect(this._id);
    }
    /**
     * Set text component effect
     *
     * @param effect Effect for the text component
     */
    set effect(effect) {
      this.engine.wasm._wl_text_component_set_effect(this._id, effect);
    }
    /**
     * Text component line wrap mode.
     * @since 1.2.1
     */
    get wrapMode() {
      return this.engine.wasm._wl_text_component_get_wrapMode(this._id);
    }
    /**
     * Set text component line wrap mode.
     *
     * @param wrapMode Line wrap mode for the text component.
     * @since 1.2.1
     */
    set wrapMode(wrapMode) {
      this.engine.wasm._wl_text_component_set_wrapMode(this._id, wrapMode);
    }
    /**
     * Text component line wrap width.
     * @since 1.2.1
     */
    get wrapWidth() {
      return this.engine.wasm._wl_text_component_get_wrapWidth(this._id);
    }
    /**
     * Set text component line wrap width.
     *
     * Only takes effect when {@link wrapMode} is something other than
     * {@link TextWrapMode.None}.
     *
     * @param width Line wrap width for the text component.
     * @since 1.2.1
     */
    set wrapWidth(width) {
      this.engine.wasm._wl_text_component_set_wrapWidth(this._id, width);
    }
    /** Text component text. */
    get text() {
      const wasm = this.engine.wasm;
      const ptr = wasm._wl_text_component_get_text(this._id);
      return wasm.UTF8ToString(ptr);
    }
    /**
     * Set text component text.
     *
     * @param text Text of the text component.
     */
    set text(text) {
      const wasm = this.engine.wasm;
      wasm._wl_text_component_set_text(this._id, wasm.tempUTF8(text.toString()));
    }
    /**
     * Set material to render the text with.
     *
     * @param material New material.
     */
    set material(material) {
      const matIndex = material ? material._id : 0;
      this.engine.wasm._wl_text_component_set_material(this._id, matIndex);
    }
    /** Material used to render the text. */
    get material() {
      const index = this.engine.wasm._wl_text_component_get_material(this._id);
      return this.engine.materials.wrap(index);
    }
    /** @overload */
    getBoundingBoxForText(text, out = new Float32Array(4)) {
      const wasm = this.engine.wasm;
      const textPtr = wasm.tempUTF8(text, 4 * 4);
      this.engine.wasm._wl_text_component_get_boundingBox(this._id, textPtr, wasm._tempMem);
      out[0] = wasm._tempMemFloat[0];
      out[1] = wasm._tempMemFloat[1];
      out[2] = wasm._tempMemFloat[2];
      out[3] = wasm._tempMemFloat[3];
      return out;
    }
    /** @overload */
    getBoundingBox(out = new Float32Array(4)) {
      const wasm = this.engine.wasm;
      this.engine.wasm._wl_text_component_get_boundingBox(this._id, 0, wasm._tempMem);
      out[0] = wasm._tempMemFloat[0];
      out[1] = wasm._tempMemFloat[1];
      out[2] = wasm._tempMemFloat[2];
      out[3] = wasm._tempMemFloat[3];
      return out;
    }
  };
  /** @override */
  __publicField(TextComponent, "TypeName", "text");
  __decorate([
    nativeProperty()
  ], TextComponent.prototype, "alignment", null);
  __decorate([
    nativeProperty()
  ], TextComponent.prototype, "verticalAlignment", null);
  __decorate([
    nativeProperty()
  ], TextComponent.prototype, "justification", null);
  __decorate([
    nativeProperty()
  ], TextComponent.prototype, "characterSpacing", null);
  __decorate([
    nativeProperty()
  ], TextComponent.prototype, "lineSpacing", null);
  __decorate([
    nativeProperty()
  ], TextComponent.prototype, "effect", null);
  __decorate([
    nativeProperty()
  ], TextComponent.prototype, "wrapMode", null);
  __decorate([
    nativeProperty()
  ], TextComponent.prototype, "wrapWidth", null);
  __decorate([
    nativeProperty()
  ], TextComponent.prototype, "text", null);
  __decorate([
    nativeProperty()
  ], TextComponent.prototype, "material", null);
  var ViewComponent = class extends Component {
    getProjectionMatrix(out = new Float32Array(16)) {
      const wasm = this.engine.wasm;
      const ptr = wasm._wl_view_component_get_projection_matrix(this._id) / 4;
      for (let i = 0; i < 16; ++i) {
        out[i] = wasm.HEAPF32[ptr + i];
      }
      return out;
    }
    /**
     * Equivalent to {@link ViewComponent.getProjectionMatrix}.
     *
     * @note Prefer to use {@link ViewComponent.getProjectionMatrix} for performance.
     */
    get projectionMatrix() {
      const wasm = this.engine.wasm;
      return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_view_component_get_projection_matrix(this._id), 16);
    }
    /** ViewComponent near clipping plane value. */
    get near() {
      return this.engine.wasm._wl_view_component_get_near(this._id);
    }
    /**
     * Set near clipping plane distance for the view.
     *
     * If an XR session is active, the change will apply in the
     * following frame, otherwise the change is immediate.
     *
     * @param near Near depth value.
     */
    set near(near) {
      this.engine.wasm._wl_view_component_set_near(this._id, near);
    }
    /** Far clipping plane value. */
    get far() {
      return this.engine.wasm._wl_view_component_get_far(this._id);
    }
    /**
     * Set far clipping plane distance for the view.
     *
     * If an XR session is active, the change will apply in the
     * following frame, otherwise the change is immediate.
     *
     * @param far Near depth value.
     */
    set far(far) {
      this.engine.wasm._wl_view_component_set_far(this._id, far);
    }
    /**
     * Get the horizontal field of view for the view, **in degrees**.
     *
     * If an XR session is active, this returns the field of view reported by
     * the device, regardless of the fov that was set.
     */
    get fov() {
      return this.engine.wasm._wl_view_component_get_fov(this._id);
    }
    /**
     * Set the horizontal field of view for the view, **in degrees**.
     *
     * If an XR session is active, the field of view reported by the device is
     * used and this value is ignored. After the XR session ends, the new value
     * is applied.
     *
     * @param fov Horizontal field of view, **in degrees**.
     */
    set fov(fov) {
      this.engine.wasm._wl_view_component_set_fov(this._id, fov);
    }
  };
  /** @override */
  __publicField(ViewComponent, "TypeName", "view");
  __decorate([
    enumerable()
  ], ViewComponent.prototype, "projectionMatrix", null);
  __decorate([
    nativeProperty()
  ], ViewComponent.prototype, "near", null);
  __decorate([
    nativeProperty()
  ], ViewComponent.prototype, "far", null);
  __decorate([
    nativeProperty()
  ], ViewComponent.prototype, "fov", null);
  var InputComponent = class extends Component {
    /** Input component type */
    get inputType() {
      return this.engine.wasm._wl_input_component_get_type(this._id);
    }
    /**
     * Set input component type.
     *
     * @params New input component type.
     */
    set inputType(type) {
      this.engine.wasm._wl_input_component_set_type(this._id, type);
    }
    /**
     * WebXR Device API input source associated with this input component,
     * if type {@link InputType.ControllerLeft} or {@link InputType.ControllerRight}.
     */
    get xrInputSource() {
      const xr = this.engine.xr;
      if (!xr)
        return null;
      for (let inputSource of xr.session.inputSources) {
        if (inputSource.handedness == this.handedness) {
          return inputSource;
        }
      }
      return null;
    }
    /**
     * 'left', 'right' or `null` depending on the {@link InputComponent#inputType}.
     */
    get handedness() {
      const inputType = this.inputType;
      if (inputType == InputType.ControllerRight || inputType == InputType.RayRight || inputType == InputType.EyeRight)
        return "right";
      if (inputType == InputType.ControllerLeft || inputType == InputType.RayLeft || inputType == InputType.EyeLeft)
        return "left";
      return null;
    }
  };
  /** @override */
  __publicField(InputComponent, "TypeName", "input");
  __decorate([
    nativeProperty()
  ], InputComponent.prototype, "inputType", null);
  __decorate([
    enumerable()
  ], InputComponent.prototype, "xrInputSource", null);
  __decorate([
    enumerable()
  ], InputComponent.prototype, "handedness", null);
  var LightComponent = class extends Component {
    getColor(out = new Float32Array(3)) {
      const wasm = this.engine.wasm;
      const ptr = wasm._wl_light_component_get_color(this._id) / 4;
      out[0] = wasm.HEAPF32[ptr];
      out[1] = wasm.HEAPF32[ptr + 1];
      out[2] = wasm.HEAPF32[ptr + 2];
      return out;
    }
    /**
     * Set light color.
     *
     * @param c New color array/vector, expected to have at least 3 elements.
     * @since 1.0.0
     */
    setColor(c) {
      const wasm = this.engine.wasm;
      const ptr = wasm._wl_light_component_get_color(this._id) / 4;
      wasm.HEAPF32[ptr] = c[0];
      wasm.HEAPF32[ptr + 1] = c[1];
      wasm.HEAPF32[ptr + 2] = c[2];
    }
    /**
     * View on the light color.
     *
     * @note Prefer to use {@link getColor} in performance-critical code.
     */
    get color() {
      const wasm = this.engine.wasm;
      return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_light_component_get_color(this._id), 3);
    }
    /**
     * Set light color.
     *
     * @param c Color of the light component.
     *
     * @note Prefer to use {@link setColor} in performance-critical code.
     */
    set color(c) {
      this.color.set(c);
    }
    /** Light type. */
    get lightType() {
      return this.engine.wasm._wl_light_component_get_type(this._id);
    }
    /**
     * Set light type.
     *
     * @param lightType Type of the light component.
     */
    set lightType(t) {
      this.engine.wasm._wl_light_component_set_type(this._id, t);
    }
    /**
     * Light intensity.
     * @since 1.0.0
     */
    get intensity() {
      return this.engine.wasm._wl_light_component_get_intensity(this._id);
    }
    /**
     * Set light intensity.
     *
     * @param intensity Intensity of the light component.
     * @since 1.0.0
     */
    set intensity(intensity) {
      this.engine.wasm._wl_light_component_set_intensity(this._id, intensity);
    }
    /**
     * Outer angle for spot lights, in degrees.
     * @since 1.0.0
     */
    get outerAngle() {
      return this.engine.wasm._wl_light_component_get_outerAngle(this._id);
    }
    /**
     * Set outer angle for spot lights.
     *
     * @param angle Outer angle, in degrees.
     * @since 1.0.0
     */
    set outerAngle(angle2) {
      this.engine.wasm._wl_light_component_set_outerAngle(this._id, angle2);
    }
    /**
     * Inner angle for spot lights, in degrees.
     * @since 1.0.0
     */
    get innerAngle() {
      return this.engine.wasm._wl_light_component_get_innerAngle(this._id);
    }
    /**
     * Set inner angle for spot lights.
     *
     * @param angle Inner angle, in degrees.
     * @since 1.0.0
     */
    set innerAngle(angle2) {
      this.engine.wasm._wl_light_component_set_innerAngle(this._id, angle2);
    }
    /**
     * Whether the light casts shadows.
     * @since 1.0.0
     */
    get shadows() {
      return !!this.engine.wasm._wl_light_component_get_shadows(this._id);
    }
    /**
     * Set whether the light casts shadows.
     *
     * @param b Whether the light casts shadows.
     * @since 1.0.0
     */
    set shadows(b) {
      this.engine.wasm._wl_light_component_set_shadows(this._id, b);
    }
    /**
     * Range for shadows.
     * @since 1.0.0
     */
    get shadowRange() {
      return this.engine.wasm._wl_light_component_get_shadowRange(this._id);
    }
    /**
     * Set range for shadows.
     *
     * @param range Range for shadows.
     * @since 1.0.0
     */
    set shadowRange(range) {
      this.engine.wasm._wl_light_component_set_shadowRange(this._id, range);
    }
    /**
     * Bias value for shadows.
     * @since 1.0.0
     */
    get shadowBias() {
      return this.engine.wasm._wl_light_component_get_shadowBias(this._id);
    }
    /**
     * Set bias value for shadows.
     *
     * @param bias Bias for shadows.
     * @since 1.0.0
     */
    set shadowBias(bias) {
      this.engine.wasm._wl_light_component_set_shadowBias(this._id, bias);
    }
    /**
     * Normal bias value for shadows.
     * @since 1.0.0
     */
    get shadowNormalBias() {
      return this.engine.wasm._wl_light_component_get_shadowNormalBias(this._id);
    }
    /**
     * Set normal bias value for shadows.
     *
     * @param bias Normal bias for shadows.
     * @since 1.0.0
     */
    set shadowNormalBias(bias) {
      this.engine.wasm._wl_light_component_set_shadowNormalBias(this._id, bias);
    }
    /**
     * Texel size for shadows.
     * @since 1.0.0
     */
    get shadowTexelSize() {
      return this.engine.wasm._wl_light_component_get_shadowTexelSize(this._id);
    }
    /**
     * Set texel size for shadows.
     *
     * @param size Texel size for shadows.
     * @since 1.0.0
     */
    set shadowTexelSize(size) {
      this.engine.wasm._wl_light_component_set_shadowTexelSize(this._id, size);
    }
    /**
     * Cascade count for {@link LightType.Sun} shadows.
     * @since 1.0.0
     */
    get cascadeCount() {
      return this.engine.wasm._wl_light_component_get_cascadeCount(this._id);
    }
    /**
     * Set cascade count for {@link LightType.Sun} shadows.
     *
     * @param count Cascade count.
     * @since 1.0.0
     */
    set cascadeCount(count) {
      this.engine.wasm._wl_light_component_set_cascadeCount(this._id, count);
    }
  };
  /** @override */
  __publicField(LightComponent, "TypeName", "light");
  __decorate([
    nativeProperty()
  ], LightComponent.prototype, "color", null);
  __decorate([
    nativeProperty()
  ], LightComponent.prototype, "lightType", null);
  __decorate([
    nativeProperty()
  ], LightComponent.prototype, "intensity", null);
  __decorate([
    nativeProperty()
  ], LightComponent.prototype, "outerAngle", null);
  __decorate([
    nativeProperty()
  ], LightComponent.prototype, "innerAngle", null);
  __decorate([
    nativeProperty()
  ], LightComponent.prototype, "shadows", null);
  __decorate([
    nativeProperty()
  ], LightComponent.prototype, "shadowRange", null);
  __decorate([
    nativeProperty()
  ], LightComponent.prototype, "shadowBias", null);
  __decorate([
    nativeProperty()
  ], LightComponent.prototype, "shadowNormalBias", null);
  __decorate([
    nativeProperty()
  ], LightComponent.prototype, "shadowTexelSize", null);
  __decorate([
    nativeProperty()
  ], LightComponent.prototype, "cascadeCount", null);
  var AnimationComponent = class extends Component {
    /**
     * Emitter for animation events triggered on this component.
     *
     * The first argument is the name of the event.
     */
    onEvent = new Emitter();
    /**
     * Set animation to play.
     *
     * Make sure to {@link Animation#retarget} the animation to affect the
     * right objects.
     *
     * @param anim Animation to play.
     */
    set animation(anim) {
      this.scene.assertOrigin(anim);
      this.engine.wasm._wl_animation_component_set_animation(this._id, anim ? anim._id : 0);
    }
    /** Animation set for this component */
    get animation() {
      const index = this.engine.wasm._wl_animation_component_get_animation(this._id);
      return this._scene.animations.wrap(index);
    }
    /**
     * Set play count. Set to `0` to loop indefinitely.
     *
     * @param playCount Number of times to repeat the animation.
     */
    set playCount(playCount) {
      this.engine.wasm._wl_animation_component_set_playCount(this._id, playCount);
    }
    /** Number of times the animation is played. */
    get playCount() {
      return this.engine.wasm._wl_animation_component_get_playCount(this._id);
    }
    /**
     * Set speed. Set to negative values to run the animation backwards.
     *
     * Setting speed has an immediate effect for the current frame's update
     * and will continue with the speed from the current point in the animation.
     *
     * @param speed New speed at which to play the animation.
     * @since 0.8.10
     */
    set speed(speed) {
      this.engine.wasm._wl_animation_component_set_speed(this._id, speed);
    }
    /**
     * Speed factor at which the animation is played.
     *
     * @since 0.8.10
     */
    get speed() {
      return this.engine.wasm._wl_animation_component_get_speed(this._id);
    }
    /** Current playing state of the animation */
    get state() {
      return this.engine.wasm._wl_animation_component_state(this._id);
    }
    /**
     * Play animation.
     *
     * If the animation is currently paused, resumes from that position. If the
     * animation is already playing, does nothing.
     *
     * To restart the animation, {@link AnimationComponent#stop} it first.
     */
    play() {
      this.engine.wasm._wl_animation_component_play(this._id);
    }
    /** Stop animation. */
    stop() {
      this.engine.wasm._wl_animation_component_stop(this._id);
    }
    /** Pause animation. */
    pause() {
      this.engine.wasm._wl_animation_component_pause(this._id);
    }
    /**
     * Get the value of a float parameter in the attached graph.
     * Throws if the parameter is missing.
     *
     * @param name Name of the parameter.
     * @since 1.2.0
     */
    getFloatParameter(name) {
      const wasm = this.engine.wasm;
      const index = wasm._wl_animation_component_getGraphParamIndex(this._id, wasm.tempUTF8(name));
      if (index === -1) {
        throw Error(`Missing parameter '${name}'`);
      }
      wasm._wl_animation_component_getGraphParamValue(this._id, index, wasm._tempMem);
      return wasm._tempMemFloat[0];
    }
    /**
     * Set the value of a float parameter in the attached graph
     * Throws if the parameter is missing.
     *
     * @param name Name of the parameter.
     * @param value Float value to set.
     * @returns 1 if the parameter was successfully set, 0 on fail.
     * @since 1.2.0
     */
    setFloatParameter(name, value) {
      const wasm = this.engine.wasm;
      const index = wasm._wl_animation_component_getGraphParamIndex(this._id, wasm.tempUTF8(name));
      if (index === -1) {
        throw Error(`Missing parameter '${name}'`);
      }
      wasm._tempMemFloat[0] = value;
      wasm._wl_animation_component_setGraphParamValue(this._id, index, wasm._tempMem);
    }
  };
  /** @override */
  __publicField(AnimationComponent, "TypeName", "animation");
  __decorate([
    nativeProperty()
  ], AnimationComponent.prototype, "animation", null);
  __decorate([
    nativeProperty()
  ], AnimationComponent.prototype, "playCount", null);
  __decorate([
    nativeProperty()
  ], AnimationComponent.prototype, "speed", null);
  __decorate([
    enumerable()
  ], AnimationComponent.prototype, "state", null);
  var MeshComponent = class extends Component {
    /**
     * Set material to render the mesh with.
     *
     * @param material Material to render the mesh with.
     */
    set material(material) {
      this.engine.wasm._wl_mesh_component_set_material(this._id, material ? material._id : 0);
    }
    /** Material used to render the mesh. */
    get material() {
      const index = this.engine.wasm._wl_mesh_component_get_material(this._id);
      return this.engine.materials.wrap(index);
    }
    /** Mesh rendered by this component. */
    get mesh() {
      const index = this.engine.wasm._wl_mesh_component_get_mesh(this._id);
      return this.engine.meshes.wrap(index);
    }
    /**
     * Set mesh to rendered with this component.
     *
     * @param mesh Mesh rendered by this component.
     */
    set mesh(mesh) {
      this.engine.wasm._wl_mesh_component_set_mesh(this._id, mesh?._id ?? 0);
    }
    /** Skin for this mesh component. */
    get skin() {
      const index = this.engine.wasm._wl_mesh_component_get_skin(this._id);
      return this._scene.skins.wrap(index);
    }
    /**
     * Set skin to transform this mesh component.
     *
     * @param skin Skin to use for rendering skinned meshes.
     */
    set skin(skin) {
      this.scene.assertOrigin(skin);
      this.engine.wasm._wl_mesh_component_set_skin(this._id, skin ? skin._id : 0);
    }
    /**
     * Morph targets for this mesh component.
     *
     * @since 1.2.0
     */
    get morphTargets() {
      const index = this.engine.wasm._wl_mesh_component_get_morph_targets(this._id);
      return this.engine.morphTargets.wrap(index);
    }
    /**
     * Set morph targets to transform this mesh component.
     *
     * @param morphTargets Morph targets to use for rendering.
     *
     * @since 1.2.0
     */
    set morphTargets(morphTargets) {
      this.engine.wasm._wl_mesh_component_set_morph_targets(this._id, morphTargets?._id ?? 0);
    }
    /**
     * Equivalent to {@link getMorphTargetWeights}.
     *
     * @note Prefer to use {@link getMorphTargetWeights} for performance.
     *
     * @since 1.2.0
     */
    get morphTargetWeights() {
      return this.getMorphTargetWeights();
    }
    /**
     * Set the morph target weights to transform this mesh component.
     *
     * @param weights New weights.
     *
     * @since 1.2.0
     */
    set morphTargetWeights(weights) {
      this.setMorphTargetWeights(weights);
    }
    getMorphTargetWeights(out) {
      const wasm = this.engine.wasm;
      const count = wasm._wl_mesh_component_get_morph_target_weights(this._id, wasm._tempMem);
      if (!out) {
        out = new Float32Array(count);
      }
      for (let i = 0; i < count; ++i) {
        out[i] = wasm._tempMemFloat[i];
      }
      return out;
    }
    /**
     * Get the weight of a single morph target.
     *
     * @param target Index of the morph target.
     * @returns The weight.
     *
     * @since 1.2.0
     */
    getMorphTargetWeight(target) {
      const count = this.morphTargets?.count ?? 0;
      if (target >= count) {
        throw new Error(`Index ${target} is out of bounds for ${count} targets`);
      }
      return this.engine.wasm._wl_mesh_component_get_morph_target_weight(this._id, target);
    }
    /**
     * Set morph target weights for this mesh component.
     *
     * @param weights Array of new weights, expected to have at least as many
     *     elements as {@link MorphTargets.count}.
     *
     * @since 1.2.0
     */
    setMorphTargetWeights(weights) {
      const count = this.morphTargets?.count ?? 0;
      if (weights.length !== count) {
        throw new Error(`Expected ${count} weights but got ${weights.length}`);
      }
      const wasm = this.engine.wasm;
      wasm._tempMemFloat.set(weights);
      wasm._wl_mesh_component_set_morph_target_weights(this._id, wasm._tempMem, weights.length);
    }
    /**
     * Set the weight of a single morph target.
     *
     * @param target Index of the morph target.
     * @param weight The new weight.
     *
     * ## Usage
     *
     * ```js
     * const mesh = object.getComponent('mesh');
     * const mouthTarget = mesh.morphTargets.getTargetIndex('mouth');
     * mesh.setMorphTargetWeight(mouthTarget, 0.5);
     * ```
     *
     * @since 1.2.0
     */
    setMorphTargetWeight(target, weight) {
      const count = this.morphTargets?.count ?? 0;
      if (target >= count) {
        throw new Error(`Index ${target} is out of bounds for ${count} targets`);
      }
      this.engine.wasm._wl_mesh_component_set_morph_target_weight(this._id, target, weight);
    }
  };
  /** @override */
  __publicField(MeshComponent, "TypeName", "mesh");
  __decorate([
    nativeProperty()
  ], MeshComponent.prototype, "material", null);
  __decorate([
    nativeProperty()
  ], MeshComponent.prototype, "mesh", null);
  __decorate([
    nativeProperty()
  ], MeshComponent.prototype, "skin", null);
  __decorate([
    nativeProperty()
  ], MeshComponent.prototype, "morphTargets", null);
  __decorate([
    nativeProperty()
  ], MeshComponent.prototype, "morphTargetWeights", null);
  var LockAxis;
  (function(LockAxis2) {
    LockAxis2[LockAxis2["None"] = 0] = "None";
    LockAxis2[LockAxis2["X"] = 1] = "X";
    LockAxis2[LockAxis2["Y"] = 2] = "Y";
    LockAxis2[LockAxis2["Z"] = 4] = "Z";
  })(LockAxis || (LockAxis = {}));
  var PhysXComponent = class extends Component {
    getTranslationOffset(out = new Float32Array(3)) {
      const wasm = this.engine.wasm;
      wasm._wl_physx_component_get_offsetTranslation(this._id, wasm._tempMem);
      out[0] = wasm._tempMemFloat[0];
      out[1] = wasm._tempMemFloat[1];
      out[2] = wasm._tempMemFloat[2];
      return out;
    }
    getRotationOffset(out = new Float32Array(4)) {
      const wasm = this.engine.wasm;
      const ptr = wasm._wl_physx_component_get_offsetTransform(this._id) >> 2;
      out[0] = wasm.HEAPF32[ptr];
      out[1] = wasm.HEAPF32[ptr + 1];
      out[2] = wasm.HEAPF32[ptr + 2];
      out[3] = wasm.HEAPF32[ptr + 3];
      return out;
    }
    getExtents(out = new Float32Array(3)) {
      const wasm = this.engine.wasm;
      const ptr = wasm._wl_physx_component_get_extents(this._id) / 4;
      out[0] = wasm.HEAPF32[ptr];
      out[1] = wasm.HEAPF32[ptr + 1];
      out[2] = wasm.HEAPF32[ptr + 2];
      return out;
    }
    getLinearVelocity(out = new Float32Array(3)) {
      const wasm = this.engine.wasm;
      const tempMemFloat = wasm._tempMemFloat;
      wasm._wl_physx_component_get_linearVelocity(this._id, wasm._tempMem);
      out[0] = tempMemFloat[0];
      out[1] = tempMemFloat[1];
      out[2] = tempMemFloat[2];
      return out;
    }
    getAngularVelocity(out = new Float32Array(3)) {
      const wasm = this.engine.wasm;
      const tempMemFloat = wasm._tempMemFloat;
      wasm._wl_physx_component_get_angularVelocity(this._id, wasm._tempMem);
      out[0] = tempMemFloat[0];
      out[1] = tempMemFloat[1];
      out[2] = tempMemFloat[2];
      return out;
    }
    /**
     * Set whether this rigid body is static.
     *
     * Setting this property only takes effect once the component
     * switches from inactive to active.
     *
     * @param b Whether the rigid body should be static.
     */
    set static(b) {
      this.engine.wasm._wl_physx_component_set_static(this._id, b);
    }
    /**
     * Whether this rigid body is static.
     *
     * This property returns whether the rigid body is *effectively*
     * static. If static property was set while the rigid body was
     * active, it will not take effect until the rigid body is set
     * inactive and active again. Until the component is set inactive,
     * this getter will return whether the rigid body is actually
     * static.
     */
    get static() {
      return !!this.engine.wasm._wl_physx_component_get_static(this._id);
    }
    /**
     * Equivalent to {@link PhysXComponent.getTranslationOffset}.
     *
     * Gives a quick view of the offset in a debugger.
     *
     * @note Prefer to use {@link PhysXComponent.getTranslationOffset} for performance.
     *
     * @since 1.1.1
     */
    get translationOffset() {
      return this.getTranslationOffset();
    }
    /**
     * Set the offset translation.
     *
     * The array must be a vector of at least **3** elements.
     *
     * @note The component must be re-activated to apply the change.
     *
     * @since 1.1.1
     */
    set translationOffset(offset2) {
      const wasm = this.engine.wasm;
      wasm._wl_physx_component_set_offsetTranslation(this._id, offset2[0], offset2[1], offset2[2]);
    }
    /**
     * Equivalent to {@link PhysXComponent.getRotationOffset}.
     *
     * Gives a quick view of the offset in a debugger.
     *
     * @note Prefer to use {@link PhysXComponent.getRotationOffset} for performance.
     *
     * @since 1.1.1
     */
    get rotationOffset() {
      return this.getRotationOffset();
    }
    /**
     * Set the offset rotation.
     *
     * The array must be a quaternion of at least **4** elements.
     *
     * @note The component must be re-activated to apply the change.
     *
     * @since 1.1.1
     */
    set rotationOffset(offset2) {
      const wasm = this.engine.wasm;
      wasm._wl_physx_component_set_offsetRotation(this._id, offset2[0], offset2[1], offset2[2], offset2[3]);
    }
    /**
     * Set whether this rigid body is kinematic.
     *
     * @param b Whether the rigid body should be kinematic.
     */
    set kinematic(b) {
      this.engine.wasm._wl_physx_component_set_kinematic(this._id, b);
    }
    /**
     * Whether this rigid body is kinematic.
     */
    get kinematic() {
      return !!this.engine.wasm._wl_physx_component_get_kinematic(this._id);
    }
    /**
     * Set whether this rigid body's gravity is enabled.
     *
     * @param b Whether the rigid body's gravity should be enabled.
     */
    set gravity(b) {
      this.engine.wasm._wl_physx_component_set_gravity(this._id, b);
    }
    /**
     * Whether this rigid body's gravity flag is enabled.
     */
    get gravity() {
      return !!this.engine.wasm._wl_physx_component_get_gravity(this._id);
    }
    /**
     * Set whether this rigid body's simulate flag is enabled.
     *
     * @param b Whether the rigid body's simulate flag should be enabled.
     */
    set simulate(b) {
      this.engine.wasm._wl_physx_component_set_simulate(this._id, b);
    }
    /**
     * Whether this rigid body's simulate flag is enabled.
     */
    get simulate() {
      return !!this.engine.wasm._wl_physx_component_get_simulate(this._id);
    }
    /**
     * Set whether to allow simulation of this rigid body.
     *
     * {@link allowSimulation} and {@link trigger} can not be enabled at the
     * same time. Enabling {@link allowSimulation} while {@link trigger} is enabled
     * will disable {@link trigger}.
     *
     * @param b Whether to allow simulation of this rigid body.
     */
    set allowSimulation(b) {
      this.engine.wasm._wl_physx_component_set_allowSimulation(this._id, b);
    }
    /**
     * Whether to allow simulation of this rigid body.
     */
    get allowSimulation() {
      return !!this.engine.wasm._wl_physx_component_get_allowSimulation(this._id);
    }
    /**
     * Set whether this rigid body may be queried in ray casts.
     *
     * @param b Whether this rigid body may be queried in ray casts.
     */
    set allowQuery(b) {
      this.engine.wasm._wl_physx_component_set_allowQuery(this._id, b);
    }
    /**
     * Whether this rigid body may be queried in ray casts.
     */
    get allowQuery() {
      return !!this.engine.wasm._wl_physx_component_get_allowQuery(this._id);
    }
    /**
     * Set whether this physics body is a trigger.
     *
     * {@link allowSimulation} and {@link trigger} can not be enabled at the
     * same time. Enabling trigger while {@link allowSimulation} is enabled,
     * will disable {@link allowSimulation}.
     *
     * @param b Whether this physics body is a trigger.
     */
    set trigger(b) {
      this.engine.wasm._wl_physx_component_set_trigger(this._id, b);
    }
    /**
     * Whether this physics body is a trigger.
     */
    get trigger() {
      return !!this.engine.wasm._wl_physx_component_get_trigger(this._id);
    }
    /**
     * Set the shape for collision detection.
     *
     * @param s New shape.
     * @since 0.8.5
     */
    set shape(s) {
      this.engine.wasm._wl_physx_component_set_shape(this._id, s);
    }
    /** The shape for collision detection. */
    get shape() {
      return this.engine.wasm._wl_physx_component_get_shape(this._id);
    }
    /**
     * Set additional data for the shape.
     *
     * Retrieved only from {@link PhysXComponent#shapeData}.
     * @since 0.8.10
     */
    set shapeData(d) {
      if (d == null || !isMeshShape(this.shape))
        return;
      this.engine.wasm._wl_physx_component_set_shape_data(this._id, d.index);
    }
    /**
     * Additional data for the shape.
     *
     * `null` for {@link Shape} values: `None`, `Sphere`, `Capsule`, `Box`, `Plane`.
     * `{index: n}` for `TriangleMesh` and `ConvexHull`.
     *
     * This data is currently only for passing onto or creating other {@link PhysXComponent}.
     * @since 0.8.10
     */
    get shapeData() {
      if (!isMeshShape(this.shape))
        return null;
      return {
        index: this.engine.wasm._wl_physx_component_get_shape_data(this._id)
      };
    }
    /**
     * Set the shape extents for collision detection.
     *
     * @param e New extents for the shape.
     * @since 0.8.5
     */
    set extents(e) {
      this.extents.set(e);
    }
    /**
     * Equivalent to {@link PhysXComponent.getExtents}.
     *
     * @note Prefer to use {@link PhysXComponent.getExtents} for performance.
     */
    get extents() {
      const wasm = this.engine.wasm;
      const ptr = wasm._wl_physx_component_get_extents(this._id);
      return new Float32Array(wasm.HEAPF32.buffer, ptr, 3);
    }
    /**
     * Get staticFriction.
     */
    get staticFriction() {
      return this.engine.wasm._wl_physx_component_get_staticFriction(this._id);
    }
    /**
     * Set staticFriction.
     * @param v New staticFriction.
     */
    set staticFriction(v) {
      this.engine.wasm._wl_physx_component_set_staticFriction(this._id, v);
    }
    /**
     * Get dynamicFriction.
     */
    get dynamicFriction() {
      return this.engine.wasm._wl_physx_component_get_dynamicFriction(this._id);
    }
    /**
     * Set dynamicFriction
     * @param v New dynamicDamping.
     */
    set dynamicFriction(v) {
      this.engine.wasm._wl_physx_component_set_dynamicFriction(this._id, v);
    }
    /**
     * Get bounciness.
     * @since 0.9.0
     */
    get bounciness() {
      return this.engine.wasm._wl_physx_component_get_bounciness(this._id);
    }
    /**
     * Set bounciness.
     * @param v New bounciness.
     * @since 0.9.0
     */
    set bounciness(v) {
      this.engine.wasm._wl_physx_component_set_bounciness(this._id, v);
    }
    /**
     * Get linearDamping/
     */
    get linearDamping() {
      return this.engine.wasm._wl_physx_component_get_linearDamping(this._id);
    }
    /**
     * Set linearDamping.
     * @param v New linearDamping.
     */
    set linearDamping(v) {
      this.engine.wasm._wl_physx_component_set_linearDamping(this._id, v);
    }
    /** Get angularDamping. */
    get angularDamping() {
      return this.engine.wasm._wl_physx_component_get_angularDamping(this._id);
    }
    /**
     * Set angularDamping.
     * @param v New angularDamping.
     */
    set angularDamping(v) {
      this.engine.wasm._wl_physx_component_set_angularDamping(this._id, v);
    }
    /**
     * Set linear velocity.
     *
     * [PhysX Manual - "Velocity"](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/RigidBodyDynamics.html#velocity)
     *
     * Has no effect, if the component is not active.
     *
     * @param v New linear velocity.
     */
    set linearVelocity(v) {
      this.engine.wasm._wl_physx_component_set_linearVelocity(this._id, v[0], v[1], v[2]);
    }
    /**
     * Equivalent to {@link PhysXComponent.getLinearVelocity}.
     *
     * @note Prefer to use {@link PhysXComponent.getLinearVelocity} for performance.
     */
    get linearVelocity() {
      const wasm = this.engine.wasm;
      wasm._wl_physx_component_get_linearVelocity(this._id, wasm._tempMem);
      return new Float32Array(wasm.HEAPF32.buffer, wasm._tempMem, 3);
    }
    /**
     * Set angular velocity
     *
     * [PhysX Manual - "Velocity"](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/RigidBodyDynamics.html#velocity)
     *
     * Has no effect, if the component is not active.
     *
     * @param v New angular velocity
     */
    set angularVelocity(v) {
      this.engine.wasm._wl_physx_component_set_angularVelocity(this._id, v[0], v[1], v[2]);
    }
    /**
     * Equivalent to {@link PhysXComponent.getAngularVelocity}.
     *
     * @note Prefer to use {@link PhysXComponent.getAngularVelocity} for performance.
     */
    get angularVelocity() {
      const wasm = this.engine.wasm;
      wasm._wl_physx_component_get_angularVelocity(this._id, wasm._tempMem);
      return new Float32Array(wasm.HEAPF32.buffer, wasm._tempMem, 3);
    }
    /**
     * Set the components groups mask.
     *
     * @param flags New flags that need to be set.
     */
    set groupsMask(flags) {
      this.engine.wasm._wl_physx_component_set_groupsMask(this._id, flags);
    }
    /**
     * Get the components groups mask flags.
     *
     * Each bit represents membership to group, see example.
     *
     * ```js
     * // Assign c to group 2
     * c.groupsMask = (1 << 2);
     *
     * // Assign c to group 0
     * c.groupsMask  = (1 << 0);
     *
     * // Assign c to group 0 and 2
     * c.groupsMask = (1 << 0) | (1 << 2);
     *
     * (c.groupsMask & (1 << 2)) != 0; // true
     * (c.groupsMask & (1 << 7)) != 0; // false
     * ```
     */
    get groupsMask() {
      return this.engine.wasm._wl_physx_component_get_groupsMask(this._id);
    }
    /**
     * Set the components blocks mask.
     *
     * @param flags New flags that need to be set.
     */
    set blocksMask(flags) {
      this.engine.wasm._wl_physx_component_set_blocksMask(this._id, flags);
    }
    /**
     * Get the components blocks mask flags.
     *
     * Each bit represents membership to the block, see example.
     *
     * ```js
     * // Block overlap with any objects in group 2
     * c.blocksMask = (1 << 2);
     *
     * // Block overlap with any objects in group 0
     * c.blocksMask  = (1 << 0)
     *
     * // Block overlap with any objects in group 0 and 2
     * c.blocksMask = (1 << 0) | (1 << 2);
     *
     * (c.blocksMask & (1 << 2)) != 0; // true
     * (c.blocksMask & (1 << 7)) != 0; // false
     * ```
     */
    get blocksMask() {
      return this.engine.wasm._wl_physx_component_get_blocksMask(this._id);
    }
    /**
     * Set axes to lock for linear velocity.
     *
     * @param lock The Axis that needs to be set.
     *
     * Combine flags with Bitwise OR:
     *
     * ```js
     * body.linearLockAxis = LockAxis.X | LockAxis.Y; // x and y set
     * body.linearLockAxis = LockAxis.X; // y unset
     * ```
     *
     * @note This has no effect if the component is static.
     */
    set linearLockAxis(lock) {
      this.engine.wasm._wl_physx_component_set_linearLockAxis(this._id, lock);
    }
    /**
     * Get the linear lock axes flags.
     *
     * To get the state of a specific flag, Bitwise AND with the LockAxis needed.
     *
     * ```js
     * if(body.linearLockAxis & LockAxis.Y) {
     *     console.log("The Y flag was set!");
     * }
     * ```
     *
     * @return axes that are currently locked for linear movement.
     */
    get linearLockAxis() {
      return this.engine.wasm._wl_physx_component_get_linearLockAxis(this._id);
    }
    /**
     * Set axes to lock for angular velocity.
     *
     * @param lock The Axis that needs to be set.
     *
     * ```js
     * body.angularLockAxis = LockAxis.X | LockAxis.Y; // x and y set
     * body.angularLockAxis = LockAxis.X; // y unset
     * ```
     *
     * @note This has no effect if the component is static.
     */
    set angularLockAxis(lock) {
      this.engine.wasm._wl_physx_component_set_angularLockAxis(this._id, lock);
    }
    /**
     * Get the angular lock axes flags.
     *
     * To get the state of a specific flag, Bitwise AND with the LockAxis needed:
     *
     * ```js
     * if(body.angularLockAxis & LockAxis.Y) {
     *     console.log("The Y flag was set!");
     * }
     * ```
     *
     * @return axes that are currently locked for angular movement.
     */
    get angularLockAxis() {
      return this.engine.wasm._wl_physx_component_get_angularLockAxis(this._id);
    }
    /**
     * Set mass.
     *
     * [PhysX Manual - "Mass Properties"](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/RigidBodyDynamics.html#mass-properties)
     *
     * @param m New mass.
     */
    set mass(m) {
      this.engine.wasm._wl_physx_component_set_mass(this._id, m);
    }
    /** Mass */
    get mass() {
      return this.engine.wasm._wl_physx_component_get_mass(this._id);
    }
    /**
     * Set mass space interia tensor.
     *
     * [PhysX Manual - "Mass Properties"](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/RigidBodyDynamics.html#mass-properties)
     *
     * Has no effect, if the component is not active.
     *
     * @param v New mass space interatia tensor.
     */
    set massSpaceInteriaTensor(v) {
      this.engine.wasm._wl_physx_component_set_massSpaceInertiaTensor(this._id, v[0], v[1], v[2]);
    }
    /**
     * Set the rigid body to sleep upon activation.
     *
     * When asleep, the rigid body will not be simulated until the next contact.
     *
     * @param flag `true` to sleep upon activation.
     *
     * @since 1.1.5
     */
    set sleepOnActivate(flag) {
      this.engine.wasm._wl_physx_component_set_sleepOnActivate(this._id, flag);
    }
    /**
     * `true` if the rigid body is set to sleep upon activation, `false` otherwise.
     *
     * @since 1.1.5
     */
    get sleepOnActivate() {
      return !!this.engine.wasm._wl_physx_component_get_sleepOnActivate(this._id);
    }
    /**
     * Apply a force.
     *
     * [PhysX Manual - "Applying Forces and Torques"](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/RigidBodyDynamics.html#applying-forces-and-torques)
     *
     * Has no effect, if the component is not active.
     *
     * @param f Force vector.
     * @param m Force mode, see {@link ForceMode}, default `Force`.
     * @param localForce Whether the force vector is in local space, default `false`.
     * @param p Position to apply force at, default is center of mass.
     * @param local Whether position is in local space, default `false`.
     */
    addForce(f, m = ForceMode.Force, localForce = false, p, local = false) {
      const wasm = this.engine.wasm;
      if (!p) {
        wasm._wl_physx_component_addForce(this._id, f[0], f[1], f[2], m, localForce);
        return;
      }
      wasm._wl_physx_component_addForceAt(this._id, f[0], f[1], f[2], m, localForce, p[0], p[1], p[2], local);
    }
    /**
     * Apply torque.
     *
     * [PhysX Manual - "Applying Forces and Torques"](https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/RigidBodyDynamics.html#applying-forces-and-torques)
     *
     * Has no effect, if the component is not active.
     *
     * @param f Force vector.
     * @param m Force mode, see {@link ForceMode}, default `Force`.
     */
    addTorque(f, m = ForceMode.Force) {
      this.engine.wasm._wl_physx_component_addTorque(this._id, f[0], f[1], f[2], m);
    }
    /**
     * Add on collision callback.
     *
     * @param callback Function to call when this rigid body (un)collides with any other.
     *
     * ```js
     *  let rigidBody = this.object.getComponent('physx');
     *  rigidBody.onCollision(function(type, other) {
     *      // Ignore uncollides
     *      if(type == CollisionEventType.TouchLost) return;
     *
     *      // Take damage on collision with enemies
     *      if(other.object.name.startsWith("enemy-")) {
     *          this.applyDamage(10);
     *      }
     *  }.bind(this));
     * ```
     *
     * @returns Id of the new callback for use with {@link PhysXComponent#removeCollisionCallback}.
     */
    onCollision(callback) {
      return this.onCollisionWith(this, callback);
    }
    /**
     * Add filtered on collision callback.
     *
     * @param otherComp Component for which callbacks will
     *        be triggered. If you pass this component, the method is equivalent to.
     *        {@link PhysXComponent#onCollision}.
     * @param callback Function to call when this rigid body
     *        (un)collides with `otherComp`.
     * @returns Id of the new callback for use with {@link PhysXComponent#removeCollisionCallback}.
     */
    onCollisionWith(otherComp, callback) {
      const physics = this.engine.physics;
      physics._callbacks[this._id] = physics._callbacks[this._id] || [];
      physics._callbacks[this._id].push(callback);
      return this.engine.wasm._wl_physx_component_addCallback(this._id, otherComp._id || this._id);
    }
    /**
     * Remove a collision callback added with {@link PhysXComponent#onCollision} or {@link PhysXComponent#onCollisionWith}.
     *
     * @param callbackId Callback id as returned by {@link PhysXComponent#onCollision} or {@link PhysXComponent#onCollisionWith}.
     * @throws When the callback does not belong to the component.
     * @throws When the callback does not exist.
     */
    removeCollisionCallback(callbackId) {
      const physics = this.engine.physics;
      const r = this.engine.wasm._wl_physx_component_removeCallback(this._id, callbackId);
      if (r)
        physics._callbacks[this._id].splice(-r);
    }
  };
  /** @override */
  __publicField(PhysXComponent, "TypeName", "physx");
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "static", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "translationOffset", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "rotationOffset", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "kinematic", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "gravity", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "simulate", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "allowSimulation", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "allowQuery", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "trigger", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "shape", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "shapeData", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "extents", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "staticFriction", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "dynamicFriction", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "bounciness", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "linearDamping", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "angularDamping", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "linearVelocity", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "angularVelocity", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "groupsMask", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "blocksMask", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "linearLockAxis", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "angularLockAxis", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "mass", null);
  __decorate([
    nativeProperty()
  ], PhysXComponent.prototype, "sleepOnActivate", null);
  var MeshIndexType;
  (function(MeshIndexType2) {
    MeshIndexType2[MeshIndexType2["UnsignedByte"] = 1] = "UnsignedByte";
    MeshIndexType2[MeshIndexType2["UnsignedShort"] = 2] = "UnsignedShort";
    MeshIndexType2[MeshIndexType2["UnsignedInt"] = 4] = "UnsignedInt";
  })(MeshIndexType || (MeshIndexType = {}));
  var MeshSkinningType;
  (function(MeshSkinningType2) {
    MeshSkinningType2[MeshSkinningType2["None"] = 0] = "None";
    MeshSkinningType2[MeshSkinningType2["FourJoints"] = 1] = "FourJoints";
    MeshSkinningType2[MeshSkinningType2["EightJoints"] = 2] = "EightJoints";
  })(MeshSkinningType || (MeshSkinningType = {}));
  var Mesh = class extends Resource {
    /**
     * @deprecated Use {@link MeshManager.create} instead, accessible via {@link WonderlandEngine.meshes}:
     *
     * ```js
     * const mesh = engine.meshes.create({vertexCount: 3, indexData: [0, 1, 2]});
     * ...
     * mesh.update();
     * ```
     */
    constructor(engine, params) {
      if (!isNumber(params)) {
        const mesh = engine.meshes.create(params);
        super(engine, mesh._index);
        return mesh;
      }
      super(engine, params);
    }
    /** Number of vertices in this mesh. */
    get vertexCount() {
      return this.engine.wasm._wl_mesh_get_vertexCount(this._id);
    }
    /** Index data (read-only) or `null` if the mesh is not indexed. */
    get indexData() {
      const wasm = this.engine.wasm;
      const tempMem = wasm._tempMem;
      const ptr = wasm._wl_mesh_get_indexData(this._id, tempMem, tempMem + 4);
      if (ptr === null)
        return null;
      const indexCount = wasm.HEAPU32[tempMem / 4];
      const indexSize = wasm.HEAPU32[tempMem / 4 + 1];
      switch (indexSize) {
        case MeshIndexType.UnsignedByte:
          return new Uint8Array(wasm.HEAPU8.buffer, ptr, indexCount);
        case MeshIndexType.UnsignedShort:
          return new Uint16Array(wasm.HEAPU16.buffer, ptr, indexCount);
        case MeshIndexType.UnsignedInt:
          return new Uint32Array(wasm.HEAPU32.buffer, ptr, indexCount);
      }
      return null;
    }
    /**
     * Apply changes to {@link attribute | vertex attributes}.
     *
     * Uploads the updated vertex attributes to the GPU and updates the bounding
     * sphere to match the new vertex positions.
     *
     * Since this is an expensive operation, call it only once you have performed
     * all modifications on a mesh and avoid calling if you did not perform any
     * modifications at all.
     */
    update() {
      this.engine.wasm._wl_mesh_update(this._id);
    }
    getBoundingSphere(out = new Float32Array(4)) {
      const wasm = this.engine.wasm;
      this.engine.wasm._wl_mesh_get_boundingSphere(this._id, wasm._tempMem);
      out[0] = wasm._tempMemFloat[0];
      out[1] = wasm._tempMemFloat[1];
      out[2] = wasm._tempMemFloat[2];
      out[3] = wasm._tempMemFloat[3];
      return out;
    }
    attribute(attr) {
      if (typeof attr != "number")
        throw new TypeError("Expected number, but got " + typeof attr);
      const wasm = this.engine.wasm;
      const tempMemUint32 = wasm._tempMemUint32;
      wasm._wl_mesh_get_attribute(this._id, attr, wasm._tempMem);
      if (tempMemUint32[0] == 255)
        return null;
      const arraySize = tempMemUint32[5];
      return new MeshAttributeAccessor(this.engine, {
        attribute: tempMemUint32[0],
        offset: tempMemUint32[1],
        stride: tempMemUint32[2],
        formatSize: tempMemUint32[3],
        componentCount: tempMemUint32[4],
        /* The WASM API returns `0` for a scalar value. We clamp it to 1 as we strictly use it as a multiplier for get/set operations */
        arraySize: arraySize ? arraySize : 1,
        length: this.vertexCount,
        bufferType: attr !== MeshAttribute.JointId ? Float32Array : Uint16Array
      });
    }
    /**
     * Destroy and free the meshes memory.
     *
     * It is best practice to set the mesh variable to `null` after calling
     * destroy to prevent accidental use:
     *
     * ```js
     *   mesh.destroy();
     *   mesh = null;
     * ```
     *
     * Accessing the mesh after destruction behaves like accessing an empty
     * mesh.
     *
     * @since 0.9.0
     */
    destroy() {
      this.engine.wasm._wl_mesh_destroy(this._id);
      this.engine.meshes._destroy(this);
    }
    toString() {
      if (this.isDestroyed) {
        return "Mesh(destroyed)";
      }
      return `Mesh(${this._index})`;
    }
  };
  var MeshAttributeAccessor = class {
    /** Max number of elements. */
    length = 0;
    /** Wonderland Engine instance. @hidden */
    _engine;
    /** Attribute index. @hidden */
    _attribute = -1;
    /** Attribute offset. @hidden */
    _offset = 0;
    /** Attribute stride. @hidden */
    _stride = 0;
    /** Format size native enum. @hidden */
    _formatSize = 0;
    /** Number of components per vertex. @hidden */
    _componentCount = 0;
    /** Number of values per vertex. @hidden */
    _arraySize = 1;
    /**
     * Class to instantiate an ArrayBuffer to get/set values.
     */
    _bufferType;
    /**
     * Function to allocate temporary WASM memory. It is cached in the accessor to avoid
     * conditionals during get/set.
     */
    _tempBufferGetter;
    /**
     * Create a new instance.
     *
     * @note Please use {@link Mesh.attribute} to create a new instance.
     *
     * @param options Contains information about how to read the data.
     * @note Do not use this constructor. Instead, please use the {@link Mesh.attribute} method.
     *
     * @hidden
     */
    constructor(engine, options) {
      this._engine = engine;
      const wasm = this._engine.wasm;
      this._attribute = options.attribute;
      this._offset = options.offset;
      this._stride = options.stride;
      this._formatSize = options.formatSize;
      this._componentCount = options.componentCount;
      this._arraySize = options.arraySize;
      this._bufferType = options.bufferType;
      this.length = options.length;
      this._tempBufferGetter = this._bufferType === Float32Array ? wasm.getTempBufferF32.bind(wasm) : wasm.getTempBufferU16.bind(wasm);
    }
    /**
     * Create a new TypedArray to hold this attribute's values.
     *
     * This method is useful to create a view to hold the data to
     * pass to {@link get} and {@link set}
     *
     * Example:
     *
     * ```js
     * const vertexCount = 4;
     * const positionAttribute = mesh.attribute(MeshAttribute.Position);
     *
     * // A position has 3 floats per vertex. Thus, positions has length 3 * 4.
     * const positions = positionAttribute.createArray(vertexCount);
     * ```
     *
     * @param count The number of **vertices** expected.
     * @returns A TypedArray with the appropriate format to access the data
     */
    createArray(count = 1) {
      count = count > this.length ? this.length : count;
      return new this._bufferType(count * this._componentCount * this._arraySize);
    }
    get(index, out = this.createArray()) {
      if (out.length % this._componentCount !== 0) {
        throw new Error(`out.length, ${out.length} is not a multiple of the attribute vector components, ${this._componentCount}`);
      }
      const dest = this._tempBufferGetter(out.length);
      const elementSize = this._bufferType.BYTES_PER_ELEMENT;
      const destSize = elementSize * out.length;
      const srcFormatSize = this._formatSize * this._arraySize;
      const destFormatSize = this._componentCount * elementSize * this._arraySize;
      this._engine.wasm._wl_mesh_get_attribute_values(this._attribute, srcFormatSize, this._offset + index * this._stride, this._stride, destFormatSize, dest.byteOffset, destSize);
      for (let i = 0; i < out.length; ++i)
        out[i] = dest[i];
      return out;
    }
    /**
     * Set attribute element.
     *
     * @param i Index
     * @param v Value to set the element to
     *
     * `v.length` needs to be a multiple of the attributes component count, see
     * {@link MeshAttribute}. If `v.length` is more than one multiple, it will be
     * filled with the next n attribute elements, which can reduce overhead
     * of this call.
     *
     * @returns Reference to self (for method chaining)
     */
    set(i, v) {
      if (v.length % this._componentCount !== 0)
        throw new Error(`out.length, ${v.length} is not a multiple of the attribute vector components, ${this._componentCount}`);
      const elementSize = this._bufferType.BYTES_PER_ELEMENT;
      const srcSize = elementSize * v.length;
      const srcFormatSize = this._componentCount * elementSize * this._arraySize;
      const destFormatSize = this._formatSize * this._arraySize;
      const wasm = this._engine.wasm;
      if (v.buffer != wasm.HEAPU8.buffer) {
        const dest = this._tempBufferGetter(v.length);
        dest.set(v);
        v = dest;
      }
      wasm._wl_mesh_set_attribute_values(this._attribute, srcFormatSize, v.byteOffset, srcSize, destFormatSize, this._offset + i * this._stride, this._stride);
      return this;
    }
    /** Hosting engine instance. */
    get engine() {
      return this._engine;
    }
  };
  var temp2d = null;
  var Texture = class extends Resource {
    /**
     * @deprecated Use {@link TextureManager.create} instead, accessible via
     * {@link WonderlandEngine.textures}:
     *
     * ```js
     * const image = new Image();
     * image.onload = () => {
     *     const texture = engine.textures.create(image);
     * };
     * ```
     */
    constructor(engine, param) {
      if (isImageLike(param)) {
        const texture = engine.textures.create(param);
        super(engine, texture._index);
        return texture;
      }
      super(engine, param);
    }
    /**
     * Whether this texture is valid
     *
     * @deprecated Use {@link SceneResource#isDestroyed} instead.
     */
    get valid() {
      return !this.isDestroyed;
    }
    /**
     * Index in this manager.
     *
     * @deprecated Use {@link Texture.index} instead.
     */
    get id() {
      return this.index;
    }
    /** Update the texture to match the HTML element (e.g. reflect the current frame of a video). */
    update() {
      const image = this._imageIndex;
      if (!this.valid || !image)
        return;
      this.engine.wasm._wl_renderer_updateImage(image);
    }
    /** Width of the texture. */
    get width() {
      const element = this.htmlElement;
      if (element)
        return element.width;
      const wasm = this.engine.wasm;
      wasm._wl_image_size(this._imageIndex, wasm._tempMem);
      return wasm._tempMemUint32[0];
    }
    /** Height of the texture. */
    get height() {
      const element = this.htmlElement;
      if (element)
        return element.height;
      const wasm = this.engine.wasm;
      wasm._wl_image_size(this._imageIndex, wasm._tempMem);
      return wasm._tempMemUint32[1];
    }
    /**
     * Returns the html element associated to this texture.
     *
     * @note This accessor will return `null` if the image is compressed.
     */
    get htmlElement() {
      const image = this._imageIndex;
      if (!image)
        return null;
      const wasm = this.engine.wasm;
      const jsImageIndex = wasm._wl_image_get_jsImage_index(image);
      return wasm._images[jsImageIndex];
    }
    /**
     * Update a subrange on the texture to match the HTML element (e.g. reflect the current frame of a video).
     *
     * Usage:
     *
     * ```js
     * // Copies rectangle of pixel starting from (10, 20)
     * texture.updateSubImage(10, 20, 600, 400);
     * ```
     *
     * @param x x offset
     * @param y y offset
     * @param w width
     * @param h height
     */
    updateSubImage(x, y, w, h) {
      if (this.isDestroyed)
        return;
      const image = this._imageIndex;
      if (!image)
        return;
      const wasm = this.engine.wasm;
      const jsImageIndex = wasm._wl_image_get_jsImage_index(image);
      if (!temp2d) {
        const canvas2 = document.createElement("canvas");
        const ctx = canvas2.getContext("2d");
        if (!ctx) {
          throw new Error("Texture.updateSubImage(): Failed to obtain CanvasRenderingContext2D.");
        }
        temp2d = {
          canvas: canvas2,
          ctx
        };
      }
      const img = wasm._images[jsImageIndex];
      if (!img)
        return;
      temp2d.canvas.width = w;
      temp2d.canvas.height = h;
      temp2d.ctx.drawImage(img, x, y, w, h, 0, 0, w, h);
      const yOffset = (img.videoHeight ?? img.height) - y - h;
      wasm._images[jsImageIndex] = temp2d.canvas;
      wasm._wl_renderer_updateImage(image, x, yOffset);
      wasm._images[jsImageIndex] = img;
    }
    /**
     * Destroy and free the texture's texture altas space and memory.
     *
     * It is best practice to set the texture variable to `null` after calling
     * destroy to prevent accidental use of the invalid texture:
     *
     * ```js
     *   texture.destroy();
     *   texture = null;
     * ```
     *
     * @since 0.9.0
     */
    destroy() {
      const wasm = this.engine.wasm;
      wasm._wl_texture_destroy(this._id);
      this.engine.textures._destroy(this);
    }
    toString() {
      if (this.isDestroyed) {
        return "Texture(destroyed)";
      }
      return `Texture(${this._index})`;
    }
    get _imageIndex() {
      return this.engine.wasm._wl_texture_get_image_index(this._id);
    }
  };
  var XR = class {
    /** Wonderland WASM bridge. @hidden */
    #wasm;
    #mode;
    constructor(wasm, mode) {
      this.#wasm = wasm;
      this.#mode = mode;
    }
    /** Current WebXR session mode */
    get sessionMode() {
      return this.#mode;
    }
    /** Current WebXR session */
    get session() {
      return this.#wasm.webxr_session;
    }
    /** Current WebXR frame */
    get frame() {
      return this.#wasm.webxr_frame;
    }
    referenceSpaceForType(type) {
      return this.#wasm.webxr_refSpaces[type] ?? null;
    }
    /** Set current reference space type used for retrieving eye, head, hand and joint poses */
    set currentReferenceSpace(refSpace) {
      this.#wasm.webxr_refSpace = refSpace;
      this.#wasm.webxr_refSpaceType = null;
      for (const type of Object.keys(this.#wasm.webxr_refSpaces)) {
        if (this.#wasm.webxr_refSpaces[type] === refSpace) {
          this.#wasm.webxr_refSpaceType = type;
        }
      }
    }
    /** Current reference space type used for retrieving eye, head, hand and joint poses */
    get currentReferenceSpace() {
      return this.#wasm.webxr_refSpace;
    }
    /** Current WebXR reference space type or `null` if not a default reference space */
    get currentReferenceSpaceType() {
      return this.#wasm.webxr_refSpaceType;
    }
    /** Current WebXR base layer  */
    get baseLayer() {
      return this.#wasm.webxr_baseLayer;
    }
    /** Current WebXR framebuffer */
    get framebuffers() {
      if (!Array.isArray(this.#wasm.webxr_fbo)) {
        return [this.#wasm.GL.framebuffers[this.#wasm.webxr_fbo]];
      }
      return this.#wasm.webxr_fbo.map((id) => this.#wasm.GL.framebuffers[id]);
    }
  };

  // node_modules/@wonderlandengine/api/dist/resources/material-manager.js
  var MaterialParamType;
  (function(MaterialParamType2) {
    MaterialParamType2[MaterialParamType2["UnsignedInt"] = 0] = "UnsignedInt";
    MaterialParamType2[MaterialParamType2["Int"] = 1] = "Int";
    MaterialParamType2[MaterialParamType2["HalfFloat"] = 2] = "HalfFloat";
    MaterialParamType2[MaterialParamType2["Float"] = 3] = "Float";
    MaterialParamType2[MaterialParamType2["Sampler"] = 4] = "Sampler";
    MaterialParamType2[MaterialParamType2["Font"] = 5] = "Font";
  })(MaterialParamType || (MaterialParamType = {}));
  var Material = class extends Resource {
    /**
     * @deprecated Use {@link MaterialManager#getTemplate} via {@link WonderlandEngine.materials}
     * to create a new material with a given pipeline:
     *
     * ```js
     * const PhongMaterial = engine.materials.getTemplate('Phong Opaque');
     * const material = new PhongMaterial();
     * material.setDiffuseColor([1, 0, 0]);
     * ```
     */
    constructor(engine, params) {
      if (typeof params !== "number") {
        if (!params?.pipeline)
          throw new Error("Missing parameter 'pipeline'");
        const template = engine.materials.getTemplate(params.pipeline);
        const material = new template();
        super(engine, material._index);
        return material;
      }
      super(engine, params);
    }
    /**
     * Check whether a parameter exists on this material.
     *
     * @param name The name to check.
     * @returns `true` if the parameter with name `name` exists on this material,
     *     `false` otherwise.
     */
    hasParameter(name) {
      const parameters = this.constructor.Parameters;
      return parameters && parameters.has(name);
    }
    /** @deprecated Use {@link pipeline} instead. */
    get shader() {
      return this.pipeline;
    }
    /** Name of the pipeline used by this material. */
    get pipeline() {
      const wasm = this.engine.wasm;
      return wasm.UTF8ToString(wasm._wl_material_get_pipeline(this._id));
    }
    /**
     * Create a copy of the underlying native material.
     *
     * @returns Material clone.
     */
    clone() {
      const index = this.engine.wasm._wl_material_clone(this._id);
      return this.engine.materials.wrap(index);
    }
    toString() {
      if (this.isDestroyed) {
        return "Material(destroyed)";
      }
      return `Material('${this.pipeline}', ${this._index})`;
    }
    /**
     * Wrap a native material index.
     *
     * @param engine Engine instance.
     * @param index The index.
     * @returns Material instance or `null` if index <= 0.
     *
     * @deprecated Use the {@link WonderlandEngine.materials} instead.
     */
    static wrap(engine, index) {
      return engine.materials.wrap(index);
    }
  };
  /** Proxy used to override prototypes of destroyed materials. */
  __publicField(Material, "_destroyedPrototype", createDestroyedProxy("material"));

  // node_modules/@wonderlandengine/api/dist/scene.js
  var SceneType;
  (function(SceneType2) {
    SceneType2[SceneType2["Prefab"] = 0] = "Prefab";
    SceneType2[SceneType2["Main"] = 1] = "Main";
    SceneType2[SceneType2["Dependency"] = 2] = "Dependency";
  })(SceneType || (SceneType = {}));

  // node_modules/@wonderlandengine/api/dist/utils/bitset.js
  function assert(bit) {
    if (bit >= 32) {
      throw new Error(`BitSet.enable(): Value ${bit} is over 31`);
    }
  }
  var BitSet = class {
    /** Enabled bits. @hidden */
    _bits = 0;
    /**
     * Enable the bit at the given index.
     *
     * @param bits A spread of all the bits to enable.
     * @returns Reference to self (for method chaining).
     */
    enable(...bits) {
      for (const bit of bits) {
        assert(bit);
        this._bits |= 1 << bit >>> 0;
      }
      return this;
    }
    /**
     * Enable all bits.
     *
     * @returns Reference to self (for method chaining).
     */
    enableAll() {
      this._bits = ~0;
      return this;
    }
    /**
     * Disable the bit at the given index.
     *
     * @param bits A spread of all the bits to disable.
     * @returns Reference to self (for method chaining).
     */
    disable(...bits) {
      for (const bit of bits) {
        assert(bit);
        this._bits &= ~(1 << bit >>> 0);
      }
      return this;
    }
    /**
     * Disable all bits.
     *
     * @returns Reference to self (for method chaining).
     */
    disableAll() {
      this._bits = 0;
      return this;
    }
    /**
     * Checker whether the bit is set or not.
     *
     * @param bit The bit to check.
     * @returns `true` if it's enabled, `false` otherwise.
     */
    enabled(bit) {
      return !!(this._bits & 1 << bit >>> 0);
    }
  };

  // node_modules/@wonderlandengine/api/dist/utils/logger.js
  var LogLevel;
  (function(LogLevel2) {
    LogLevel2[LogLevel2["Info"] = 0] = "Info";
    LogLevel2[LogLevel2["Warn"] = 1] = "Warn";
    LogLevel2[LogLevel2["Error"] = 2] = "Error";
  })(LogLevel || (LogLevel = {}));
  var Logger = class {
    /**
     * Bitset of enabled levels.
     *
     * @hidden
     */
    levels = new BitSet();
    /**
     * Bitset of enabled tags.
     *
     * @hidden
     */
    tags = new BitSet().enableAll();
    /**
     * Create a new logger instance.
     *
     * @param levels Default set of levels to enable.
     */
    constructor(...levels) {
      this.levels.enable(...levels);
    }
    /**
     * Log the message(s) using `console.log`.
     *
     * @param tag Tag represented by a positive integer.
     * @param msg A spread of message to log.
     * @returns Reference to self (for method chaining).
     */
    info(tag, ...msg) {
      if (this.levels.enabled(LogLevel.Info) && this.tags.enabled(tag)) {
        console.log(...msg);
      }
      return this;
    }
    /**
     * Log the message(s) using `console.warn`.
     *
     * @param tag Tag represented by a positive integer.
     * @param msg A spread of message to log.
     * @returns Reference to self (for method chaining).
     */
    warn(tag, ...msg) {
      if (this.levels.enabled(LogLevel.Warn) && this.tags.enabled(tag)) {
        console.warn(...msg);
      }
      return this;
    }
    /**
     * Log the message(s) using `console.error`.
     *
     * @param tag Tag represented by a positive integer.
     * @param msg A spread of message to log.
     * @returns Reference to self (for method chaining).
     */
    error(tag, ...msg) {
      if (this.levels.enabled(LogLevel.Error) && this.tags.enabled(tag)) {
        console.error(...msg);
      }
      return this;
    }
  };

  // node_modules/@wonderlandengine/api/dist/utils/cbor.js
  var kCborTagBignum = 2;
  var kCborTagNegativeBignum = 3;
  var kCborTagUint8 = 64;
  var kCborTagUint16 = 69;
  var kCborTagUint32 = 70;
  var kCborTagUint64 = 71;
  var kCborTagInt8 = 72;
  var kCborTagInt16 = 77;
  var kCborTagInt32 = 78;
  var kCborTagInt64 = 79;
  var kCborTagFloat32 = 85;
  var kCborTagFloat64 = 86;
  function decode(data, tagger = (_, value) => value, options = {}) {
    const { dictionary = "object" } = options;
    const dataView = new DataView(data.buffer, data.byteOffset, data.byteLength);
    let offset2 = 0;
    function commitRead(length5, value) {
      offset2 += length5;
      return value;
    }
    function readArrayBuffer(length5) {
      return commitRead(length5, data.subarray(offset2, offset2 + length5));
    }
    function readFloat16() {
      const POW_2_24 = 5960464477539063e-23;
      const tempArrayBuffer = new ArrayBuffer(4);
      const tempDataView = new DataView(tempArrayBuffer);
      const value = readUint16();
      const sign = value & 32768;
      let exponent = value & 31744;
      const fraction = value & 1023;
      if (exponent === 31744)
        exponent = 255 << 10;
      else if (exponent !== 0)
        exponent += 127 - 15 << 10;
      else if (fraction !== 0)
        return (sign ? -1 : 1) * fraction * POW_2_24;
      tempDataView.setUint32(0, sign << 16 | exponent << 13 | fraction << 13);
      return tempDataView.getFloat32(0);
    }
    function readFloat32() {
      return commitRead(4, dataView.getFloat32(offset2));
    }
    function readFloat64() {
      return commitRead(8, dataView.getFloat64(offset2));
    }
    function readUint8() {
      return commitRead(1, data[offset2]);
    }
    function readUint16() {
      return commitRead(2, dataView.getUint16(offset2));
    }
    function readUint32() {
      return commitRead(4, dataView.getUint32(offset2));
    }
    function readUint64() {
      return commitRead(8, dataView.getBigUint64(offset2));
    }
    function readBreak() {
      if (data[offset2] !== 255)
        return false;
      offset2 += 1;
      return true;
    }
    function readLength(additionalInformation) {
      if (additionalInformation < 24)
        return additionalInformation;
      if (additionalInformation === 24)
        return readUint8();
      if (additionalInformation === 25)
        return readUint16();
      if (additionalInformation === 26)
        return readUint32();
      if (additionalInformation === 27) {
        const integer = readUint64();
        if (integer <= Number.MAX_SAFE_INTEGER)
          return Number(integer);
        return integer;
      }
      if (additionalInformation === 31)
        return -1;
      throw new Error("CBORError: Invalid length encoding");
    }
    function readIndefiniteStringLength(majorType) {
      const initialByte = readUint8();
      if (initialByte === 255)
        return -1;
      const length5 = readLength(initialByte & 31);
      if (length5 < 0 || initialByte >> 5 !== majorType) {
        throw new Error("CBORError: Invalid indefinite length element");
      }
      return Number(length5);
    }
    function appendUtf16Data(utf16data, length5) {
      for (let i = 0; i < length5; ++i) {
        let value = readUint8();
        if (value & 128) {
          if (value < 224) {
            value = (value & 31) << 6 | readUint8() & 63;
            length5 -= 1;
          } else if (value < 240) {
            value = (value & 15) << 12 | (readUint8() & 63) << 6 | readUint8() & 63;
            length5 -= 2;
          } else {
            value = (value & 7) << 18 | (readUint8() & 63) << 12 | (readUint8() & 63) << 6 | readUint8() & 63;
            length5 -= 3;
          }
        }
        if (value < 65536) {
          utf16data.push(value);
        } else {
          value -= 65536;
          utf16data.push(55296 | value >> 10);
          utf16data.push(56320 | value & 1023);
        }
      }
    }
    function decodeItem() {
      const initialByte = readUint8();
      const majorType = initialByte >> 5;
      const additionalInformation = initialByte & 31;
      let i;
      let length5;
      if (majorType === 7) {
        switch (additionalInformation) {
          case 25:
            return readFloat16();
          case 26:
            return readFloat32();
          case 27:
            return readFloat64();
        }
      }
      length5 = readLength(additionalInformation);
      if (length5 < 0 && (majorType < 2 || 6 < majorType)) {
        throw new Error("CBORError: Invalid length");
      }
      switch (majorType) {
        case 0:
          return length5;
        case 1:
          if (typeof length5 === "number") {
            return -1 - length5;
          }
          return -1n - length5;
        case 2: {
          if (length5 < 0) {
            const elements = [];
            let fullArrayLength = 0;
            while ((length5 = readIndefiniteStringLength(majorType)) >= 0) {
              fullArrayLength += length5;
              elements.push(readArrayBuffer(length5));
            }
            const fullArray = new Uint8Array(fullArrayLength);
            let fullArrayOffset = 0;
            for (i = 0; i < elements.length; ++i) {
              fullArray.set(elements[i], fullArrayOffset);
              fullArrayOffset += elements[i].length;
            }
            return fullArray;
          }
          return readArrayBuffer(length5).slice();
        }
        case 3: {
          const utf16data = [];
          if (length5 < 0) {
            while ((length5 = readIndefiniteStringLength(majorType)) >= 0) {
              appendUtf16Data(utf16data, length5);
            }
          } else {
            appendUtf16Data(utf16data, length5);
          }
          let string = "";
          const DECODE_CHUNK_SIZE = 8192;
          for (i = 0; i < utf16data.length; i += DECODE_CHUNK_SIZE) {
            string += String.fromCharCode.apply(null, utf16data.slice(i, i + DECODE_CHUNK_SIZE));
          }
          return string;
        }
        case 4: {
          let retArray;
          if (length5 < 0) {
            retArray = [];
            let index = 0;
            while (!readBreak()) {
              retArray.push(decodeItem());
            }
          } else {
            retArray = new Array(length5);
            for (i = 0; i < length5; ++i) {
              retArray[i] = decodeItem();
            }
          }
          return retArray;
        }
        case 5: {
          if (dictionary === "map") {
            const retMap = /* @__PURE__ */ new Map();
            for (i = 0; i < length5 || length5 < 0 && !readBreak(); ++i) {
              const key = decodeItem();
              if (retMap.has(key)) {
                throw new Error("CBORError: Duplicate key encountered");
              }
              retMap.set(key, decodeItem());
            }
            return retMap;
          }
          const retObject = {};
          for (i = 0; i < length5 || length5 < 0 && !readBreak(); ++i) {
            const key = decodeItem();
            if (Object.prototype.hasOwnProperty.call(retObject, key)) {
              throw new Error("CBORError: Duplicate key encountered");
            }
            retObject[key] = decodeItem();
          }
          return retObject;
        }
        case 6: {
          const value = decodeItem();
          const tag = length5;
          if (value instanceof Uint8Array) {
            switch (tag) {
              case kCborTagBignum:
              case kCborTagNegativeBignum:
                let num = value.reduce((acc, n) => (acc << 8n) + BigInt(n), 0n);
                if (tag == kCborTagNegativeBignum) {
                  num = -1n - num;
                }
                return num;
              case kCborTagUint8:
                return value;
              case kCborTagInt8:
                return new Int8Array(value.buffer);
              case kCborTagUint16:
                return new Uint16Array(value.buffer);
              case kCborTagInt16:
                return new Int16Array(value.buffer);
              case kCborTagUint32:
                return new Uint32Array(value.buffer);
              case kCborTagInt32:
                return new Int32Array(value.buffer);
              case kCborTagUint64:
                return new BigUint64Array(value.buffer);
              case kCborTagInt64:
                return new BigInt64Array(value.buffer);
              case kCborTagFloat32:
                return new Float32Array(value.buffer);
              case kCborTagFloat64:
                return new Float64Array(value.buffer);
            }
          }
          return tagger(tag, value);
        }
        case 7:
          switch (length5) {
            case 20:
              return false;
            case 21:
              return true;
            case 22:
              return null;
            case 23:
              return void 0;
            default:
              return length5;
          }
      }
    }
    const ret = decodeItem();
    if (offset2 !== data.byteLength) {
      throw new Error("CBORError: Remaining bytes");
    }
    return ret;
  }
  var CBOR = {
    decode
  };

  // node_modules/@wonderlandengine/api/dist/wasm.js
  var _componentDefaults = /* @__PURE__ */ new Map([
    [Type.Bool, false],
    [Type.Int, 0],
    [Type.Float, 0],
    [Type.String, ""],
    [Type.Enum, void 0],
    [Type.Object, null],
    [Type.Mesh, null],
    [Type.Texture, null],
    [Type.Material, null],
    [Type.Animation, null],
    [Type.Skin, null],
    [Type.Color, Float32Array.from([0, 0, 0, 1])],
    [Type.Vector2, Float32Array.from([0, 0])],
    [Type.Vector3, Float32Array.from([0, 0, 0])],
    [Type.Vector4, Float32Array.from([0, 0, 0, 0])]
  ]);
  function _setupDefaults(ctor) {
    for (const name in ctor.Properties) {
      const p = ctor.Properties[name];
      if (p.type === Type.Enum) {
        if (p.values?.length) {
          if (typeof p.default !== "number") {
            p.default = p.values.indexOf(p.default);
          }
          if (p.default < 0 || p.default >= p.values.length) {
            p.default = 0;
          }
        } else {
          p.default = void 0;
        }
      } else if ((p.type === Type.Color || p.type === Type.Vector2 || p.type === Type.Vector3 || p.type === Type.Vector4) && Array.isArray(p.default)) {
        p.default = Float32Array.from(p.default);
      } else if (p.default === void 0) {
        const cloner = p.cloner ?? defaultPropertyCloner;
        p.default = cloner.clone(p.type, _componentDefaults.get(p.type));
      }
      ctor.prototype[name] = p.default;
    }
  }
  function _setPropertyOrder(ctor) {
    ctor._propertyOrder = ctor.hasOwnProperty("Properties") ? Object.keys(ctor.Properties).sort() : [];
  }
  var WASM = class {
    /**
     * Emscripten worker field.
     *
     * @note This api is meant to be used internally.
     */
    worker = "";
    /**
     * Emscripten wasm field.
     *
     * @note This api is meant to be used internally.
     */
    wasm = null;
    /**
     * Emscripten canvas.
     *
     * @note This api is meant to be used internally.
     */
    canvas = null;
    /**
     * WebGPU device.
     *
     * @note This api is meant to be used internally.
     */
    preinitializedWebGPUDevice = null;
    /** Current WebXR  */
    /**
     * Emscripten WebXR session.
     *
     * @note This api is meant to be used internally.
     */
    webxr_session = null;
    /**
     * Emscripten WebXR request session callback.
     *
     * @note This api is meant to be used internally.
     */
    webxr_requestSession = null;
    /**
     * Emscripten WebXR offer session callback.
     *
     * @note This api is meant to be used internally.
     */
    webxr_offerSession = null;
    /**
     * Emscripten WebXR frame.
     *
     * @note This api is meant to be used internally.
     */
    webxr_frame = null;
    /**
     * Emscripten current WebXR reference space.
     *
     * @note This api is meant to be used internally.
     */
    webxr_refSpace = null;
    /**
     * Emscripten WebXR reference spaces.
     *
     * @note This api is meant to be used internally.
     */
    webxr_refSpaces = null;
    /**
     * Emscripten WebXR current reference space type.
     *
     * @note This api is meant to be used internally.
     */
    webxr_refSpaceType = null;
    /**
     * Emscripten WebXR GL projection layer.
     *
     * @note This api is meant to be used internally.
     */
    webxr_baseLayer = null;
    /**
     * Emscripten WebXR framebuffer scale factor.
     *
     * @note This api is meant to be used internally.
     */
    webxr_framebufferScaleFactor = 1;
    /**
     * Emscripten WebXR framebuffer(s).
     *
     * @note This api is meant to be used internally.
     */
    /* webxr_fbo will not get overwritten if we are rendering to the
     * default framebuffer, e.g., when using WebXR emulator. */
    webxr_fbo = 0;
    /**
     * Convert a WASM memory view to a JavaScript string.
     *
     * @param ptr Pointer start
     * @param ptrEnd Pointer end
     * @returns JavaScript string
     */
    UTF8ViewToString;
    /** Logger instance. */
    _log = new Logger();
    /** If `true`, logs will not spam the console on error. */
    _deactivate_component_on_error = false;
    /** Temporary memory pointer. */
    _tempMem = null;
    /** Temporary memory size. */
    _tempMemSize = 0;
    /** Temporary float memory view. */
    _tempMemFloat = null;
    /** Temporary int memory view. */
    _tempMemInt = null;
    /** Temporary uint8 memory view. */
    _tempMemUint8 = null;
    /** Temporary uint32 memory view. */
    _tempMemUint32 = null;
    /** Temporary uint16 memory view. */
    _tempMemUint16 = null;
    /** Loading screen .bin file data */
    _loadingScreen = null;
    /** List of callbacks triggered when the scene is loaded. */
    _sceneLoadedCallback = [];
    /** Image cache. */
    _images = [null];
    /** Component instances. */
    _components = null;
    /** Component Type info. */
    _componentTypes = [];
    /** Index per component type name. */
    _componentTypeIndices = {};
    /** Wonderland engine instance. */
    _engine = null;
    /**
     * `true` if this runtime is using physx.
     *
     * @note This api is meant to be used internally.
     */
    _withPhysX = false;
    /** Decoder for UTF8 `ArrayBuffer` to JavaScript string. */
    _utf8Decoder = new TextDecoder("utf8");
    /**
     * Registration index of {@link BrokenComponent}.
     *
     * This is used to return dummy instances when a component
     * isn't registered.
     *
     * @hidden
     */
    _brokenComponentIndex = 0;
    /**
     * Create a new instance of the WebAssembly <> API bridge.
     *
     * @param threads `true` if the runtime used has threads support
     */
    constructor(threads2) {
      if (threads2) {
        this.UTF8ViewToString = (s, e) => {
          if (!s)
            return "";
          return this._utf8Decoder.decode(this.HEAPU8.slice(s, e));
        };
      } else {
        this.UTF8ViewToString = (s, e) => {
          if (!s)
            return "";
          return this._utf8Decoder.decode(this.HEAPU8.subarray(s, e));
        };
      }
      this._brokenComponentIndex = this._registerComponent(BrokenComponent);
    }
    /**
     * Reset the cache of the library.
     *
     * @note Should only be called when tearing down the runtime.
     */
    reset() {
      this._wl_reset();
      this._components = null;
      this._images.length = 1;
      this.allocateTempMemory(1024);
      this._componentTypes = [];
      this._componentTypeIndices = {};
      this._brokenComponentIndex = this._registerComponent(BrokenComponent);
    }
    /**
     * Checks whether the given component is registered or not.
     *
     * @param ctor  A string representing the component typename (e.g., `'cursor-component'`).
     * @returns `true` if the component is registered, `false` otherwise.
     */
    isRegistered(type) {
      return type in this._componentTypeIndices;
    }
    /**
     * Register a legacy component in this Emscripten instance.
     *
     * @note This api is meant to be used internally.
     *
     * @param typeName The name of the component.
     * @param params An object containing the parameters (properties).
     * @param object The object's prototype.
     * @returns The registration index
     */
    _registerComponentLegacy(typeName, params, object) {
      const ctor = class CustomComponent extends Component {
      };
      ctor.TypeName = typeName;
      ctor.Properties = params;
      Object.assign(ctor.prototype, object);
      return this._registerComponent(ctor);
    }
    /**
     * Register a class component in this Emscripten instance.
     *
     * @note This api is meant to be used internally.
     *
     * @param ctor The class to register.
     * @returns The registration index.
     */
    _registerComponent(ctor) {
      if (!ctor.TypeName)
        throw new Error("no name provided for component.");
      if (!ctor.prototype._triggerInit) {
        throw new Error(`registerComponent(): Component ${ctor.TypeName} must extend Component`);
      }
      inheritProperties(ctor);
      _setupDefaults(ctor);
      _setPropertyOrder(ctor);
      const typeIndex = ctor.TypeName in this._componentTypeIndices ? this._componentTypeIndices[ctor.TypeName] : this._componentTypes.length;
      this._componentTypes[typeIndex] = ctor;
      this._componentTypeIndices[ctor.TypeName] = typeIndex;
      if (ctor === BrokenComponent)
        return typeIndex;
      this._log.info(LogTag.Engine, "Registered component", ctor.TypeName, `(class ${ctor.name})`, "with index", typeIndex);
      if (ctor.onRegister)
        ctor.onRegister(this._engine);
      return typeIndex;
    }
    /**
     * Allocate the requested amount of temporary memory
     * in this WASM instance.
     *
     * @param size The number of bytes to allocate
     */
    allocateTempMemory(size) {
      this._log.info(LogTag.Engine, "Allocating temp mem:", size);
      this._tempMemSize = size;
      if (this._tempMem)
        this._free(this._tempMem);
      this._tempMem = this._malloc(this._tempMemSize);
      this.updateTempMemory();
    }
    /**
     * @todo: Delete this and only keep `allocateTempMemory`
     *
     * @param size Number of bytes to allocate
     */
    requireTempMem(size) {
      if (this._tempMemSize >= size)
        return;
      this.allocateTempMemory(Math.ceil(size / 1024) * 1024);
    }
    /**
     * Update the temporary memory views. This must be called whenever the
     * temporary memory address changes.
     *
     * @note This api is meant to be used internally.
     */
    updateTempMemory() {
      this._tempMemFloat = new Float32Array(this.HEAP8.buffer, this._tempMem, this._tempMemSize >> 2);
      this._tempMemInt = new Int32Array(this.HEAP8.buffer, this._tempMem, this._tempMemSize >> 2);
      this._tempMemUint32 = new Uint32Array(this.HEAP8.buffer, this._tempMem, this._tempMemSize >> 2);
      this._tempMemUint16 = new Uint16Array(this.HEAP8.buffer, this._tempMem, this._tempMemSize >> 1);
      this._tempMemUint8 = new Uint8Array(this.HEAP8.buffer, this._tempMem, this._tempMemSize);
    }
    /**
     * Returns a uint8 buffer view on temporary WASM memory.
     *
     * **Note**: this method might allocate if the requested memory is bigger
     * than the current temporary memory allocated.
     *
     * @param count The number of **elements** required
     * @returns A {@link TypedArray} over the WASM memory
     */
    getTempBufferU8(count) {
      this.requireTempMem(count);
      return this._tempMemUint8;
    }
    /**
     * Returns a uint16 buffer view on temporary WASM memory.
     *
     * **Note**: this method might allocate if the requested memory is bigger
     * than the current temporary memory allocated.
     *
     * @param count The number of **elements** required
     * @returns A {@link TypedArray} over the WASM memory
     */
    getTempBufferU16(count) {
      this.requireTempMem(count * 2);
      return this._tempMemUint16;
    }
    /**
     * Returns a uint32 buffer view on temporary WASM memory.
     *
     * **Note**: this method might allocate if the requested memory is bigger
     * than the current temporary memory allocated.
     *
     * @param count The number of **elements** required.
     * @returns A {@link TypedArray} over the WASM memory.
     */
    getTempBufferU32(count) {
      this.requireTempMem(count * 4);
      return this._tempMemUint32;
    }
    /**
     * Returns a int32 buffer view on temporary WASM memory.
     *
     * **Note**: this method might allocate if the requested memory is bigger
     * than the current temporary memory allocated.
     *
     * @param count The number of **elements** required.
     * @returns A {@link TypedArray} over the WASM memory.
     */
    getTempBufferI32(count) {
      this.requireTempMem(count * 4);
      return this._tempMemInt;
    }
    /**
     * Returns a float32 buffer view on temporary WASM memory.
     *
     * **Note**: this method might allocate if the requested memory is bigger
     * than the current temporary memory allocated.
     *
     * @param count The number of **elements** required.
     * @returns A {@link TypedArray} over the WASM memory.
     */
    getTempBufferF32(count) {
      this.requireTempMem(count * 4);
      return this._tempMemFloat;
    }
    /**
     * Copy the string into temporary WASM memory and retrieve the pointer.
     *
     * @note This method will compute the strlen and append a `\0`.
     *
     * @note The result should be used **directly** otherwise it might get
     * overridden by any next call modifying the temporary memory.
     *
     * @param str The string to write to temporary memory
     * @param byteOffset The starting byte offset in the temporary memory at which
     *     the string should be written. This is useful when using multiple temporaries.
     * @return The temporary pointer onto the WASM memory
     */
    tempUTF8(str5, byteOffset = 0) {
      const strLen = this.lengthBytesUTF8(str5) + 1;
      this.requireTempMem(strLen + byteOffset);
      const ptr = this._tempMem + byteOffset;
      this.stringToUTF8(str5, ptr, strLen);
      return ptr;
    }
    /**
     * Copy the buffer into the WASM heap.
     *
     * @note The returned pointer must be freed.
     *
     * @param buffer The buffer to copy into the heap.
     * @returns An allocated pointer, that must be free after use.
     */
    copyBufferToHeap(buffer) {
      const size = buffer.byteLength;
      const ptr = this._malloc(size);
      this.HEAPU8.set(new Uint8Array(buffer), ptr);
      return ptr;
    }
    /**
     * Returns `true` if the runtime supports physx or not.
     */
    get withPhysX() {
      return this._withPhysX;
    }
    /**
     * Set the engine instance holding this bridge.
     *
     * @note This api is meant to be used internally.
     *
     * @param engine The engine instance.
     */
    _setEngine(engine) {
      this._engine = engine;
    }
    /* WebAssembly to JS call bridge. */
    _wljs_xr_session_start(mode) {
      if (this._engine.xr === null) {
        this._engine.xr = new XR(this, mode);
        this._engine.onXRSessionStart.notify(this.webxr_session, mode);
      }
    }
    _wljs_xr_session_end() {
      const startEmitter = this._engine.onXRSessionStart;
      if (startEmitter instanceof RetainEmitter)
        startEmitter.reset();
      this._engine.onXRSessionEnd.notify();
      this._engine.xr = null;
    }
    _wljs_xr_disable() {
      this._engine.arSupported = false;
      this._engine.vrSupported = false;
    }
    _wljs_init(withPhysX) {
      this._withPhysX = withPhysX;
      this.allocateTempMemory(1024);
    }
    _wljs_scene_switch(index) {
      const scene = this._engine._scenes[index];
      this._components = scene?._jsComponents ?? null;
    }
    _wljs_destroy_image(index) {
      const img = this._images[index];
      if (!img)
        return;
      this._images[index] = null;
      if (img.src !== void 0) {
        img.src = "";
      }
      if (img.onload !== void 0) {
        img.onload = null;
      }
      if (img.onerror !== void 0) {
        img.onerror = null;
      }
    }
    _wljs_objects_markDestroyed(sceneIndex, idsPtr, count) {
      const scene = this._engine._scenes[sceneIndex];
      const start = idsPtr >>> 1;
      for (let i = 0; i < count; ++i) {
        const id = this.HEAPU16[start + i];
        scene._destroyObject(id);
      }
    }
    _wljs_scene_initialize(sceneIndex, idsPtr, idsEnd, paramDataPtr, paramDataEndPtr, offsetsPtr, offsetsEndPtr) {
      const cbor = this.HEAPU8.subarray(paramDataPtr, paramDataEndPtr);
      const offsets = this.HEAPU32.subarray(offsetsPtr >>> 2, offsetsEndPtr >>> 2);
      const ids = this.HEAPU16.subarray(idsPtr >>> 1, idsEnd >>> 1);
      const engine = this._engine;
      const scene = engine._scenes[sceneIndex];
      const components = scene._jsComponents;
      let decoded;
      try {
        decoded = CBOR.decode(cbor);
      } catch (e) {
        this._log.error(LogTag.Engine, "Exception during component parameter decoding");
        this._log.error(LogTag.Component, e);
        return;
      }
      if (!Array.isArray(decoded)) {
        this._log.error(LogTag.Engine, "Parameter data must be an array");
        return;
      }
      if (decoded.length !== ids.length) {
        this._log.error(LogTag.Engine, `Parameter data has size ${decoded.length} but expected ${ids.length}`);
        return;
      }
      for (let i = 0; i < decoded.length; ++i) {
        const id = Component._pack(sceneIndex, ids[i]);
        const index = this._wl_get_js_component_index_for_id(id);
        const component = components[index];
        const ctor = component.constructor;
        if (ctor == BrokenComponent)
          continue;
        const paramNames = ctor._propertyOrder;
        const paramValues = decoded[i];
        if (!Array.isArray(paramValues)) {
          this._log.error(LogTag.Engine, "Component parameter data must be an array");
          continue;
        }
        if (paramValues.length !== paramNames.length) {
          this._log.error(LogTag.Engine, `Component parameter data has size ${paramValues.length} but expected ${paramNames.length}`);
          continue;
        }
        for (let j = 0; j < paramValues.length; ++j) {
          const name = paramNames[j];
          const property2 = ctor.Properties[name];
          const type = property2.type;
          let value = paramValues[j];
          if (value === void 0) {
            const cloner = property2.cloner ?? defaultPropertyCloner;
            value = cloner.clone(type, property2.default);
            component[name] = value;
            continue;
          }
          if (typeof value === "number") {
            value += offsets[type];
          }
          switch (type) {
            case Type.Bool:
            case Type.Int:
            case Type.Float:
            case Type.String:
            case Type.Enum:
            case Type.Vector2:
            case Type.Vector3:
            case Type.Vector4:
              break;
            case Type.Object:
              value = value ? scene.wrap(this._wl_object_id(scene._index, value)) : null;
              break;
            case Type.Mesh:
              value = engine.meshes.wrap(value);
              break;
            case Type.Texture:
              value = engine.textures.wrap(value);
              break;
            case Type.Material:
              value = engine.materials.wrap(value);
              break;
            case Type.Animation:
              value = scene.animations.wrap(value);
              break;
            case Type.Skin:
              value = scene.skins.wrap(value);
              break;
            case Type.Color:
              const max2 = (1 << value.BYTES_PER_ELEMENT * 8) - 1;
              value = Float32Array.from(value, (f, _) => f / max2);
              break;
          }
          component[name] = value;
        }
      }
    }
    _wljs_set_component_param_translation(scene, component, param, valuePtr, valueEndPtr) {
      const components = this._engine._scenes[scene]._jsComponents;
      const comp = components[component];
      const value = this.UTF8ViewToString(valuePtr, valueEndPtr);
      const ctor = comp.constructor;
      const paramName = ctor._propertyOrder[param];
      comp[paramName] = value;
    }
    _wljs_get_component_type_index(namePtr, nameEndPtr) {
      const typename = this.UTF8ViewToString(namePtr, nameEndPtr);
      const index = this._componentTypeIndices[typename];
      if (index === void 0) {
        return this._brokenComponentIndex;
      }
      return index;
    }
    _wljs_component_create(sceneIndex, index, id, type, object) {
      const scene = this._engine._scenes[sceneIndex];
      scene._components.createJs(index, id, type, object);
    }
    _wljs_component_init(scene, component) {
      const components = this._engine._scenes[scene]._jsComponents;
      const c = components[component];
      c._triggerInit();
    }
    _wljs_component_update(component, dt) {
      const c = this._components[component];
      c._triggerUpdate(dt);
    }
    _wljs_component_onActivate(component) {
      const c = this._components[component];
      c._triggerOnActivate();
    }
    _wljs_component_onDeactivate(component) {
      const c = this._components[component];
      c._triggerOnDeactivate();
    }
    _wljs_component_markDestroyed(sceneIndex, manager, componentId) {
      const scene = this._engine._scenes[sceneIndex];
      const component = scene._components.get(manager, componentId);
      component?._triggerOnDestroy();
    }
    _wljs_swap(scene, a, b) {
      const components = this._engine._scenes[scene]._jsComponents;
      const componentA = components[a];
      components[a] = components[b];
      components[b] = componentA;
    }
    _wljs_copy(srcSceneIndex, srcIndex, dstSceneIndex, dstIndex, offsetsPtr) {
      const srcScene = this._engine._scenes[srcSceneIndex];
      const dstScene = this._engine._scenes[dstSceneIndex];
      const destComp = dstScene._jsComponents[dstIndex];
      const srcComp = srcScene._jsComponents[srcIndex];
      try {
        destComp._copy(srcComp, offsetsPtr);
      } catch (e) {
        this._log.error(LogTag.Component, `Exception during ${destComp.type} copy() on object ${destComp.object.name}`);
        this._log.error(LogTag.Component, e);
      }
    }
    /**
     * Forward an animation event to a corresponding
     * {@link AnimationComponent}
     *
     * @note This api is meant to be used internally. Please have a look at
     * {@link AnimationComponent.onEvent} instead.
     *
     * @param componentId Component id in the manager
     * @param namePtr Pointer to UTF8 event name
     * @param nameEndPtr Pointer to end of UTF8 event name
     */
    _wljs_trigger_animationEvent(componentId, namePtr, nameEndPtr) {
      const scene = this._engine.scene;
      const comp = scene._components.wrapAnimation(componentId);
      const nameStr = this.UTF8ViewToString(namePtr, nameEndPtr);
      comp.onEvent.notify(nameStr);
    }
  };
  function throwInvalidRuntime(version) {
    return function() {
      throw new Error(`Feature added in version ${version}.
	\u2192 Please use a Wonderland Engine editor version >= ${version}`);
    };
  }
  var requireRuntime1_2_1 = throwInvalidRuntime("1.2.1");
  WASM.prototype._wl_text_component_get_wrapMode = requireRuntime1_2_1;
  WASM.prototype._wl_text_component_set_wrapMode = requireRuntime1_2_1;
  WASM.prototype._wl_text_component_get_wrapWidth = requireRuntime1_2_1;
  WASM.prototype._wl_text_component_set_wrapWidth = requireRuntime1_2_1;
  WASM.prototype._wl_font_get_outlineSize = requireRuntime1_2_1;
  WASM.prototype._wl_scene_create_chunked_start = requireRuntime1_2_1;
  WASM.prototype._wl_scene_create_chunked_buffer_size = requireRuntime1_2_1;
  WASM.prototype._wl_scene_create_chunked_next = requireRuntime1_2_1;
  WASM.prototype._wl_scene_create_chunked_abort = requireRuntime1_2_1;
  WASM.prototype._wl_scene_create_chunked_end_prefab = requireRuntime1_2_1;
  WASM.prototype._wl_scene_create_chunked_end_main = requireRuntime1_2_1;
  WASM.prototype._wl_scene_create_chunked_end_queued = requireRuntime1_2_1;

  // node_modules/@wonderlandengine/components/dist/8thwall-camera.js
  var ARCamera8thwall = class extends Component {
    /* 8thwall camera pipeline module name */
    name = "wonderland-engine-8thwall-camera";
    started = false;
    view = null;
    // cache camera
    position = [0, 0, 0];
    // cache 8thwall cam position
    rotation = [0, 0, 0, -1];
    // cache 8thwall cam rotation
    glTextureRenderer = null;
    // cache XR8.GlTextureRenderer.pipelineModule
    promptForDeviceMotion() {
      return new Promise(async (resolve, reject) => {
        window.dispatchEvent(new Event("8thwall-request-user-interaction"));
        window.addEventListener("8thwall-safe-to-request-permissions", async () => {
          try {
            const motionEvent = await DeviceMotionEvent.requestPermission();
            resolve(motionEvent);
          } catch (exception) {
            reject(exception);
          }
        });
      });
    }
    async getPermissions() {
      if (DeviceMotionEvent && DeviceMotionEvent.requestPermission) {
        try {
          const result = await DeviceMotionEvent.requestPermission();
          if (result !== "granted") {
            throw new Error("MotionEvent");
          }
        } catch (exception) {
          if (exception.name === "NotAllowedError") {
            const motionEvent = await this.promptForDeviceMotion();
            if (motionEvent !== "granted") {
              throw new Error("MotionEvent");
            }
          } else {
            throw new Error("MotionEvent");
          }
        }
      }
      try {
        const stream = await navigator.mediaDevices.getUserMedia({
          video: true,
          audio: true
        });
        stream.getTracks().forEach((track) => {
          track.stop();
        });
      } catch (exception) {
        throw new Error("Camera");
      }
    }
    init() {
      this.view = this.object.getComponent("view");
      this.onUpdate = this.onUpdate.bind(this);
      this.onAttach = this.onAttach.bind(this);
      this.onException = this.onException.bind(this);
      this.onCameraStatusChange = this.onCameraStatusChange.bind(this);
    }
    async start() {
      this.view = this.object.getComponent("view");
      if (!this.useCustomUIOverlays) {
        OverlaysHandler.init();
      }
      try {
        await this.getPermissions();
      } catch (error) {
        window.dispatchEvent(new CustomEvent("8thwall-permission-fail", { detail: error }));
        return;
      }
      await this.waitForXR8();
      XR8.XrController.configure({
        disableWorldTracking: false
      });
      this.glTextureRenderer = XR8.GlTextureRenderer.pipelineModule();
      XR8.addCameraPipelineModules([
        this.glTextureRenderer,
        XR8.XrController.pipelineModule(),
        this
      ]);
      const config = {
        cameraConfig: {
          direction: XR8.XrConfig.camera().BACK
        },
        canvas: Module.canvas,
        allowedDevices: XR8.XrConfig.device().ANY,
        ownRunLoop: false
      };
      XR8.run(config);
    }
    /**
     * @private
     * 8thwall pipeline function
     */
    onAttach(params) {
      this.started = true;
      this.engine.scene.colorClearEnabled = false;
      const gl = Module.ctx;
      const rot = this.object.rotationWorld;
      const pos = this.object.getTranslationWorld([]);
      this.position = Array.from(pos);
      this.rotation = Array.from(rot);
      XR8.XrController.updateCameraProjectionMatrix({
        origin: { x: pos[0], y: pos[1], z: pos[2] },
        facing: { x: rot[0], y: rot[1], z: rot[2], w: rot[3] },
        cam: {
          pixelRectWidth: Module.canvas.width,
          pixelRectHeight: Module.canvas.height,
          nearClipPlane: this.view.near,
          farClipPlane: this.view.far
        }
      });
      this.engine.scene.onPreRender.push(() => {
        gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, null);
        XR8.runPreRender(Date.now());
        XR8.runRender();
      });
      this.engine.scene.onPostRender.push(() => {
        XR8.runPostRender(Date.now());
      });
    }
    /**
     * @private
     * 8thwall pipeline function
     */
    onCameraStatusChange(e) {
      if (e && e.status === "failed") {
        this.onException(new Error(`Camera failed with status: ${e.status}`));
      }
    }
    /**
     * @private
     * 8thwall pipeline function
     */
    onUpdate(e) {
      if (!e.processCpuResult.reality)
        return;
      const { rotation, position, intrinsics } = e.processCpuResult.reality;
      this.rotation[0] = rotation.x;
      this.rotation[1] = rotation.y;
      this.rotation[2] = rotation.z;
      this.rotation[3] = rotation.w;
      this.position[0] = position.x;
      this.position[1] = position.y;
      this.position[2] = position.z;
      if (intrinsics) {
        const projectionMatrix = this.view.projectionMatrix;
        for (let i = 0; i < 16; i++) {
          if (Number.isFinite(intrinsics[i])) {
            projectionMatrix[i] = intrinsics[i];
          }
        }
      }
      if (position && rotation) {
        this.object.rotationWorld = this.rotation;
        this.object.setTranslationWorld(this.position);
      }
    }
    /**
     * @private
     * 8thwall pipeline function
     */
    onException(error) {
      console.error("8thwall exception:", error);
      window.dispatchEvent(new CustomEvent("8thwall-error", { detail: error }));
    }
    waitForXR8() {
      return new Promise((resolve, _rej) => {
        if (window.XR8) {
          resolve();
        } else {
          window.addEventListener("xrloaded", () => resolve());
        }
      });
    }
  };
  __publicField(ARCamera8thwall, "TypeName", "8thwall-camera");
  __publicField(ARCamera8thwall, "Properties", {
    /** Override the WL html overlays for handling camera/motion permissions and error handling */
    useCustomUIOverlays: { type: Type.Bool, default: false }
  });
  var OverlaysHandler = {
    init: function() {
      this.handleRequestUserInteraction = this.handleRequestUserInteraction.bind(this);
      this.handlePermissionFail = this.handlePermissionFail.bind(this);
      this.handleError = this.handleError.bind(this);
      window.addEventListener("8thwall-request-user-interaction", this.handleRequestUserInteraction);
      window.addEventListener("8thwall-permission-fail", this.handlePermissionFail);
      window.addEventListener("8thwall-error", this.handleError);
    },
    handleRequestUserInteraction: function() {
      const overlay = this.showOverlay(requestPermissionOverlay);
      window.addEventListener("8thwall-safe-to-request-permissions", () => {
        overlay.remove();
      });
    },
    handlePermissionFail: function(_reason) {
      this.showOverlay(failedPermissionOverlay);
    },
    handleError: function(_error) {
      this.showOverlay(runtimeErrorOverlay);
    },
    showOverlay: function(htmlContent) {
      const overlay = document.createElement("div");
      overlay.innerHTML = htmlContent;
      document.body.appendChild(overlay);
      return overlay;
    }
  };
  var requestPermissionOverlay = `
<style>
  #request-permission-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 999;
    color: #fff;
    background-color: rgba(0, 0, 0, 0.5);
    text-align: center;
    font-family: sans-serif;
  }

  .request-permission-overlay_title {
    margin: 30px;
    font-size: 32px;
  }

  .request-permission-overlay_button {
    background-color: #e80086;
    font-size: 22px;
    padding: 10px 30px;
    color: #fff;
    border-radius: 15px;
    border: none;
  }
</style>

<div id="request-permission-overlay">
  <div class="request-permission-overlay_title">This app requires to use your camera and motion sensors</div>

  <button class="request-permission-overlay_button" onclick="window.dispatchEvent(new Event('8thwall-safe-to-request-permissions'))">OK</button>
</div>`;
  var failedPermissionOverlay = `
<style>
  #failed-permission-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 999;
    color: #fff;
    background-color: rgba(0, 0, 0, 0.5);
    text-align: center;
    font-family: sans-serif;
  }

  .failed-permission-overlay_title {
    margin: 30px;
    font-size: 32px;
  }

  .failed-permission-overlay_button {
    background-color: #e80086;
    font-size: 22px;
    padding: 10px 30px;
    color: #fff;
    border-radius: 15px;
    border: none;
  }
</style>

<div id="failed-permission-overlay">
  <div class="failed-permission-overlay_title">Failed to grant permissions. Reset the the permissions and refresh the page.</div>

  <button class="failed-permission-overlay_button" onclick="window.location.reload()">Refresh the page</button>
</div>`;
  var runtimeErrorOverlay = `
<style>
  #wall-error-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 999;
    color: #fff;
    background-color: rgba(0, 0, 0, 0.5);
    text-align: center;
    font-family: sans-serif;
  }

  .wall-error-overlay_title {
    margin: 30px;
    font-size: 32px;
  }

  .wall-error-overlay_button {
    background-color: #e80086;
    font-size: 22px;
    padding: 10px 30px;
    color: #fff;
    border-radius: 15px;
    border: none;
  }
</style>

<div id="wall-error-overlay">
  <div class="wall-error-overlay_title">Error has occurred. Please reload the page</div>

  <button class="wall-error-overlay_button" onclick="window.location.reload()">Reload</button>
</div>`;

  // node_modules/@wonderlandengine/components/dist/utils/webxr.js
  var tempVec = new Float32Array(3);
  var tempQuat = new Float32Array(4);
  function setXRRigidTransformLocal(o, transform) {
    const r = transform.orientation;
    tempQuat[0] = r.x;
    tempQuat[1] = r.y;
    tempQuat[2] = r.z;
    tempQuat[3] = r.w;
    const t = transform.position;
    tempVec[0] = t.x;
    tempVec[1] = t.y;
    tempVec[2] = t.z;
    o.resetPositionRotation();
    o.setRotationLocal(tempQuat);
    o.translateLocal(tempVec);
  }

  // node_modules/@wonderlandengine/components/dist/anchor.js
  var __decorate2 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var tempVec3 = new Float32Array(3);
  var tempQuat2 = new Float32Array(4);
  var _anchors, _addAnchor, addAnchor_fn, _removeAnchor, removeAnchor_fn, _getFrame, getFrame_fn, _createAnchor, createAnchor_fn, _onAddAnchor, onAddAnchor_fn, _onRestoreAnchor, onRestoreAnchor_fn, _onCreate, onCreate_fn;
  var _Anchor = class extends Component {
    constructor() {
      super(...arguments);
      __privateAdd(this, _getFrame);
      __privateAdd(this, _createAnchor);
      __privateAdd(this, _onAddAnchor);
      __privateAdd(this, _onRestoreAnchor);
      __privateAdd(this, _onCreate);
      __publicField(this, "persist", false);
      /** Unique identifier to load a persistent anchor from, or empty/null if unknown */
      __publicField(this, "uuid", null);
      /** The xrAnchor, if created */
      __publicField(this, "xrAnchor", null);
      /** Emits events when the anchor is created either by being restored or newly created */
      __publicField(this, "onCreate", new Emitter());
      /** Whether the anchor is currently being tracked */
      __publicField(this, "visible", false);
      /** Emits an event when this anchor starts tracking */
      __publicField(this, "onTrackingFound", new Emitter());
      /** Emits an event when this anchor stops tracking */
      __publicField(this, "onTrackingLost", new Emitter());
      /** XRFrame to use for creating the anchor */
      __publicField(this, "xrFrame", null);
      /** XRHitTestResult to use for creating the anchor */
      __publicField(this, "xrHitResult", null);
    }
    /** Retrieve all anchors of the current scene */
    static getAllAnchors() {
      return __privateGet(_Anchor, _anchors);
    }
    /**
     * Create a new anchor
     *
     * @param o Object to attach the component to
     * @param params Parameters for the anchor component
     * @param frame XRFrame to use for anchor cration, if null, will use the current frame if available
     * @param hitResult Optional hit-test result to create the anchor with
     * @returns Promise for the newly created anchor component
     */
    static create(o, params, frame, hitResult) {
      const a = o.addComponent(_Anchor, { ...params, active: false });
      if (a === null)
        return null;
      a.xrHitResult = hitResult ?? null;
      a.xrFrame = frame ?? null;
      a.onCreate.once(() => (a.xrFrame = null, a.xrHitResult = null));
      a.active = true;
      return a.onCreate.promise();
    }
    start() {
      if (this.uuid && this.engine.xr) {
        this.persist = true;
        if (this.engine.xr.session.restorePersistentAnchor === void 0) {
          console.warn("anchor: Persistent anchors are not supported by your client. Ignoring persist property.");
        }
        this.engine.xr.session.restorePersistentAnchor(this.uuid).then(__privateMethod(this, _onRestoreAnchor, onRestoreAnchor_fn).bind(this));
      } else if (__privateMethod(this, _getFrame, getFrame_fn).call(this)) {
        __privateMethod(this, _createAnchor, createAnchor_fn).call(this).then(__privateMethod(this, _onAddAnchor, onAddAnchor_fn).bind(this));
      } else {
        throw new Error("Anchors can only be created during the XR frame in an active XR session");
      }
    }
    update() {
      if (!this.xrAnchor || !this.engine.xr)
        return;
      const pose = this.engine.xr.frame.getPose(this.xrAnchor.anchorSpace, this.engine.xr.currentReferenceSpace);
      const visible = !!pose;
      if (visible != this.visible) {
        this.visible = visible;
        (visible ? this.onTrackingFound : this.onTrackingLost).notify(this);
      }
      if (pose) {
        setXRRigidTransformLocal(this.object, pose.transform);
      }
    }
    onDestroy() {
      var _a;
      __privateMethod(_a = _Anchor, _removeAnchor, removeAnchor_fn).call(_a, this);
    }
  };
  var Anchor = _Anchor;
  _anchors = new WeakMap();
  _addAnchor = new WeakSet();
  addAnchor_fn = function(anchor) {
    __privateGet(_Anchor, _anchors).push(anchor);
  };
  _removeAnchor = new WeakSet();
  removeAnchor_fn = function(anchor) {
    const index = __privateGet(_Anchor, _anchors).indexOf(anchor);
    if (index < 0)
      return;
    __privateGet(_Anchor, _anchors).splice(index, 1);
  };
  _getFrame = new WeakSet();
  getFrame_fn = function() {
    return this.xrFrame || this.engine.xr.frame;
  };
  _createAnchor = new WeakSet();
  createAnchor_fn = async function() {
    if (!__privateMethod(this, _getFrame, getFrame_fn).call(this).createAnchor) {
      throw new Error("Cannot create anchor - anchors not supported, did you enable the 'anchors' WebXR feature?");
    }
    if (this.xrHitResult) {
      if (this.xrHitResult.createAnchor === void 0) {
        throw new Error("Requested anchor on XRHitTestResult, but WebXR hit-test feature is not available.");
      }
      return this.xrHitResult.createAnchor();
    } else {
      this.object.getTranslationWorld(tempVec3);
      tempQuat2.set(this.object.rotationWorld);
      const rotation = tempQuat2;
      const anchorPose = new XRRigidTransform({ x: tempVec3[0], y: tempVec3[1], z: tempVec3[2] }, { x: rotation[0], y: rotation[1], z: rotation[2], w: rotation[3] });
      return __privateMethod(this, _getFrame, getFrame_fn).call(this)?.createAnchor(anchorPose, this.engine.xr.currentReferenceSpace);
    }
  };
  _onAddAnchor = new WeakSet();
  onAddAnchor_fn = function(anchor) {
    if (!anchor)
      return;
    if (this.persist) {
      if (anchor.requestPersistentHandle !== void 0) {
        anchor.requestPersistentHandle().then((uuid) => {
          var _a;
          this.uuid = uuid;
          __privateMethod(this, _onCreate, onCreate_fn).call(this, anchor);
          __privateMethod(_a = _Anchor, _addAnchor, addAnchor_fn).call(_a, this);
        });
        return;
      } else {
        console.warn("anchor: Persistent anchors are not supported by your client. Ignoring persist property.");
      }
    }
    __privateMethod(this, _onCreate, onCreate_fn).call(this, anchor);
  };
  _onRestoreAnchor = new WeakSet();
  onRestoreAnchor_fn = function(anchor) {
    __privateMethod(this, _onCreate, onCreate_fn).call(this, anchor);
  };
  _onCreate = new WeakSet();
  onCreate_fn = function(anchor) {
    this.xrAnchor = anchor;
    this.onCreate.notify(this);
  };
  __privateAdd(Anchor, _addAnchor);
  __privateAdd(Anchor, _removeAnchor);
  __publicField(Anchor, "TypeName", "anchor");
  /* Static management of all anchors */
  __privateAdd(Anchor, _anchors, []);
  __decorate2([
    property.bool(false)
  ], Anchor.prototype, "persist", void 0);
  __decorate2([
    property.string()
  ], Anchor.prototype, "uuid", void 0);

  // node_modules/@wonderlandengine/components/dist/cursor-target.js
  var CursorTarget = class extends Component {
    /** Emitter for events when the target is hovered */
    onHover = new Emitter();
    /** Emitter for events when the target is unhovered */
    onUnhover = new Emitter();
    /** Emitter for events when the target is clicked */
    onClick = new Emitter();
    /** Emitter for events when the cursor moves on the target */
    onMove = new Emitter();
    /** Emitter for events when the user pressed the select button on the target */
    onDown = new Emitter();
    /** Emitter for events when the user unpressed the select button on the target */
    onUp = new Emitter();
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    this.onHover.add(f);
     */
    addHoverFunction(f) {
      this.onHover.add(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    this.onHover.remove(f);
     */
    removeHoverFunction(f) {
      this.onHover.remove(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    this.onUnhover.add(f);
     */
    addUnHoverFunction(f) {
      this.onUnhover.add(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    this.onUnhover.remove(f);
     */
    removeUnHoverFunction(f) {
      this.onUnhover.remove(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    this.onClick.add(f);
     */
    addClickFunction(f) {
      this.onClick.add(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onClick.remove(f);
     */
    removeClickFunction(f) {
      this.onClick.remove(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onMove.add(f);
     */
    addMoveFunction(f) {
      this.onMove.add(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onMove.remove(f);
     */
    removeMoveFunction(f) {
      this.onMove.remove(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onDown.add(f);
     */
    addDownFunction(f) {
      this.onDown.add(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onDown.remove(f);
     */
    removeDownFunction(f) {
      this.onDown.remove(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onUp.add(f);
     */
    addUpFunction(f) {
      this.onUp.add(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onUp.remove(f);
     */
    removeUpFunction(f) {
      this.onUp.remove(f);
    }
  };
  __publicField(CursorTarget, "TypeName", "cursor-target");
  __publicField(CursorTarget, "Properties", {});

  // node_modules/gl-matrix/esm/common.js
  var EPSILON = 1e-6;
  var ARRAY_TYPE = typeof Float32Array !== "undefined" ? Float32Array : Array;
  var RANDOM = Math.random;
  var degree = Math.PI / 180;
  if (!Math.hypot)
    Math.hypot = function() {
      var y = 0, i = arguments.length;
      while (i--) {
        y += arguments[i] * arguments[i];
      }
      return Math.sqrt(y);
    };

  // node_modules/gl-matrix/esm/mat3.js
  function create() {
    var out = new ARRAY_TYPE(9);
    if (ARRAY_TYPE != Float32Array) {
      out[1] = 0;
      out[2] = 0;
      out[3] = 0;
      out[5] = 0;
      out[6] = 0;
      out[7] = 0;
    }
    out[0] = 1;
    out[4] = 1;
    out[8] = 1;
    return out;
  }

  // node_modules/gl-matrix/esm/mat4.js
  var mat4_exports = {};
  __export(mat4_exports, {
    add: () => add,
    adjoint: () => adjoint,
    clone: () => clone,
    copy: () => copy,
    create: () => create2,
    determinant: () => determinant,
    equals: () => equals,
    exactEquals: () => exactEquals,
    frob: () => frob,
    fromQuat: () => fromQuat,
    fromQuat2: () => fromQuat2,
    fromRotation: () => fromRotation,
    fromRotationTranslation: () => fromRotationTranslation,
    fromRotationTranslationScale: () => fromRotationTranslationScale,
    fromRotationTranslationScaleOrigin: () => fromRotationTranslationScaleOrigin,
    fromScaling: () => fromScaling,
    fromTranslation: () => fromTranslation,
    fromValues: () => fromValues,
    fromXRotation: () => fromXRotation,
    fromYRotation: () => fromYRotation,
    fromZRotation: () => fromZRotation,
    frustum: () => frustum,
    getRotation: () => getRotation,
    getScaling: () => getScaling,
    getTranslation: () => getTranslation,
    identity: () => identity,
    invert: () => invert,
    lookAt: () => lookAt,
    mul: () => mul,
    multiply: () => multiply,
    multiplyScalar: () => multiplyScalar,
    multiplyScalarAndAdd: () => multiplyScalarAndAdd,
    ortho: () => ortho,
    orthoNO: () => orthoNO,
    orthoZO: () => orthoZO,
    perspective: () => perspective,
    perspectiveFromFieldOfView: () => perspectiveFromFieldOfView,
    perspectiveNO: () => perspectiveNO,
    perspectiveZO: () => perspectiveZO,
    rotate: () => rotate,
    rotateX: () => rotateX,
    rotateY: () => rotateY,
    rotateZ: () => rotateZ,
    scale: () => scale,
    set: () => set,
    str: () => str,
    sub: () => sub,
    subtract: () => subtract,
    targetTo: () => targetTo,
    translate: () => translate,
    transpose: () => transpose
  });
  function create2() {
    var out = new ARRAY_TYPE(16);
    if (ARRAY_TYPE != Float32Array) {
      out[1] = 0;
      out[2] = 0;
      out[3] = 0;
      out[4] = 0;
      out[6] = 0;
      out[7] = 0;
      out[8] = 0;
      out[9] = 0;
      out[11] = 0;
      out[12] = 0;
      out[13] = 0;
      out[14] = 0;
    }
    out[0] = 1;
    out[5] = 1;
    out[10] = 1;
    out[15] = 1;
    return out;
  }
  function clone(a) {
    var out = new ARRAY_TYPE(16);
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    out[3] = a[3];
    out[4] = a[4];
    out[5] = a[5];
    out[6] = a[6];
    out[7] = a[7];
    out[8] = a[8];
    out[9] = a[9];
    out[10] = a[10];
    out[11] = a[11];
    out[12] = a[12];
    out[13] = a[13];
    out[14] = a[14];
    out[15] = a[15];
    return out;
  }
  function copy(out, a) {
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    out[3] = a[3];
    out[4] = a[4];
    out[5] = a[5];
    out[6] = a[6];
    out[7] = a[7];
    out[8] = a[8];
    out[9] = a[9];
    out[10] = a[10];
    out[11] = a[11];
    out[12] = a[12];
    out[13] = a[13];
    out[14] = a[14];
    out[15] = a[15];
    return out;
  }
  function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {
    var out = new ARRAY_TYPE(16);
    out[0] = m00;
    out[1] = m01;
    out[2] = m02;
    out[3] = m03;
    out[4] = m10;
    out[5] = m11;
    out[6] = m12;
    out[7] = m13;
    out[8] = m20;
    out[9] = m21;
    out[10] = m22;
    out[11] = m23;
    out[12] = m30;
    out[13] = m31;
    out[14] = m32;
    out[15] = m33;
    return out;
  }
  function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {
    out[0] = m00;
    out[1] = m01;
    out[2] = m02;
    out[3] = m03;
    out[4] = m10;
    out[5] = m11;
    out[6] = m12;
    out[7] = m13;
    out[8] = m20;
    out[9] = m21;
    out[10] = m22;
    out[11] = m23;
    out[12] = m30;
    out[13] = m31;
    out[14] = m32;
    out[15] = m33;
    return out;
  }
  function identity(out) {
    out[0] = 1;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = 1;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = 1;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function transpose(out, a) {
    if (out === a) {
      var a01 = a[1], a02 = a[2], a03 = a[3];
      var a12 = a[6], a13 = a[7];
      var a23 = a[11];
      out[1] = a[4];
      out[2] = a[8];
      out[3] = a[12];
      out[4] = a01;
      out[6] = a[9];
      out[7] = a[13];
      out[8] = a02;
      out[9] = a12;
      out[11] = a[14];
      out[12] = a03;
      out[13] = a13;
      out[14] = a23;
    } else {
      out[0] = a[0];
      out[1] = a[4];
      out[2] = a[8];
      out[3] = a[12];
      out[4] = a[1];
      out[5] = a[5];
      out[6] = a[9];
      out[7] = a[13];
      out[8] = a[2];
      out[9] = a[6];
      out[10] = a[10];
      out[11] = a[14];
      out[12] = a[3];
      out[13] = a[7];
      out[14] = a[11];
      out[15] = a[15];
    }
    return out;
  }
  function invert(out, a) {
    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];
    var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];
    var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];
    var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];
    var b00 = a00 * a11 - a01 * a10;
    var b01 = a00 * a12 - a02 * a10;
    var b02 = a00 * a13 - a03 * a10;
    var b03 = a01 * a12 - a02 * a11;
    var b04 = a01 * a13 - a03 * a11;
    var b05 = a02 * a13 - a03 * a12;
    var b06 = a20 * a31 - a21 * a30;
    var b07 = a20 * a32 - a22 * a30;
    var b08 = a20 * a33 - a23 * a30;
    var b09 = a21 * a32 - a22 * a31;
    var b10 = a21 * a33 - a23 * a31;
    var b11 = a22 * a33 - a23 * a32;
    var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
    if (!det) {
      return null;
    }
    det = 1 / det;
    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;
    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;
    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;
    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;
    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;
    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;
    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;
    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;
    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;
    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;
    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;
    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;
    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;
    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;
    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;
    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;
    return out;
  }
  function adjoint(out, a) {
    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];
    var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];
    var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];
    var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];
    out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);
    out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));
    out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);
    out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));
    out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));
    out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);
    out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));
    out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);
    out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);
    out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));
    out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);
    out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));
    out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));
    out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);
    out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));
    out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);
    return out;
  }
  function determinant(a) {
    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];
    var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];
    var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];
    var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];
    var b00 = a00 * a11 - a01 * a10;
    var b01 = a00 * a12 - a02 * a10;
    var b02 = a00 * a13 - a03 * a10;
    var b03 = a01 * a12 - a02 * a11;
    var b04 = a01 * a13 - a03 * a11;
    var b05 = a02 * a13 - a03 * a12;
    var b06 = a20 * a31 - a21 * a30;
    var b07 = a20 * a32 - a22 * a30;
    var b08 = a20 * a33 - a23 * a30;
    var b09 = a21 * a32 - a22 * a31;
    var b10 = a21 * a33 - a23 * a31;
    var b11 = a22 * a33 - a23 * a32;
    return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
  }
  function multiply(out, a, b) {
    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];
    var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];
    var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];
    var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];
    var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];
    out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;
    out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;
    out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;
    out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;
    b0 = b[4];
    b1 = b[5];
    b2 = b[6];
    b3 = b[7];
    out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;
    out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;
    out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;
    out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;
    b0 = b[8];
    b1 = b[9];
    b2 = b[10];
    b3 = b[11];
    out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;
    out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;
    out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;
    out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;
    b0 = b[12];
    b1 = b[13];
    b2 = b[14];
    b3 = b[15];
    out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;
    out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;
    out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;
    out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;
    return out;
  }
  function translate(out, a, v) {
    var x = v[0], y = v[1], z = v[2];
    var a00, a01, a02, a03;
    var a10, a11, a12, a13;
    var a20, a21, a22, a23;
    if (a === out) {
      out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];
      out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];
      out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];
      out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];
    } else {
      a00 = a[0];
      a01 = a[1];
      a02 = a[2];
      a03 = a[3];
      a10 = a[4];
      a11 = a[5];
      a12 = a[6];
      a13 = a[7];
      a20 = a[8];
      a21 = a[9];
      a22 = a[10];
      a23 = a[11];
      out[0] = a00;
      out[1] = a01;
      out[2] = a02;
      out[3] = a03;
      out[4] = a10;
      out[5] = a11;
      out[6] = a12;
      out[7] = a13;
      out[8] = a20;
      out[9] = a21;
      out[10] = a22;
      out[11] = a23;
      out[12] = a00 * x + a10 * y + a20 * z + a[12];
      out[13] = a01 * x + a11 * y + a21 * z + a[13];
      out[14] = a02 * x + a12 * y + a22 * z + a[14];
      out[15] = a03 * x + a13 * y + a23 * z + a[15];
    }
    return out;
  }
  function scale(out, a, v) {
    var x = v[0], y = v[1], z = v[2];
    out[0] = a[0] * x;
    out[1] = a[1] * x;
    out[2] = a[2] * x;
    out[3] = a[3] * x;
    out[4] = a[4] * y;
    out[5] = a[5] * y;
    out[6] = a[6] * y;
    out[7] = a[7] * y;
    out[8] = a[8] * z;
    out[9] = a[9] * z;
    out[10] = a[10] * z;
    out[11] = a[11] * z;
    out[12] = a[12];
    out[13] = a[13];
    out[14] = a[14];
    out[15] = a[15];
    return out;
  }
  function rotate(out, a, rad, axis) {
    var x = axis[0], y = axis[1], z = axis[2];
    var len4 = Math.hypot(x, y, z);
    var s, c, t;
    var a00, a01, a02, a03;
    var a10, a11, a12, a13;
    var a20, a21, a22, a23;
    var b00, b01, b02;
    var b10, b11, b12;
    var b20, b21, b22;
    if (len4 < EPSILON) {
      return null;
    }
    len4 = 1 / len4;
    x *= len4;
    y *= len4;
    z *= len4;
    s = Math.sin(rad);
    c = Math.cos(rad);
    t = 1 - c;
    a00 = a[0];
    a01 = a[1];
    a02 = a[2];
    a03 = a[3];
    a10 = a[4];
    a11 = a[5];
    a12 = a[6];
    a13 = a[7];
    a20 = a[8];
    a21 = a[9];
    a22 = a[10];
    a23 = a[11];
    b00 = x * x * t + c;
    b01 = y * x * t + z * s;
    b02 = z * x * t - y * s;
    b10 = x * y * t - z * s;
    b11 = y * y * t + c;
    b12 = z * y * t + x * s;
    b20 = x * z * t + y * s;
    b21 = y * z * t - x * s;
    b22 = z * z * t + c;
    out[0] = a00 * b00 + a10 * b01 + a20 * b02;
    out[1] = a01 * b00 + a11 * b01 + a21 * b02;
    out[2] = a02 * b00 + a12 * b01 + a22 * b02;
    out[3] = a03 * b00 + a13 * b01 + a23 * b02;
    out[4] = a00 * b10 + a10 * b11 + a20 * b12;
    out[5] = a01 * b10 + a11 * b11 + a21 * b12;
    out[6] = a02 * b10 + a12 * b11 + a22 * b12;
    out[7] = a03 * b10 + a13 * b11 + a23 * b12;
    out[8] = a00 * b20 + a10 * b21 + a20 * b22;
    out[9] = a01 * b20 + a11 * b21 + a21 * b22;
    out[10] = a02 * b20 + a12 * b21 + a22 * b22;
    out[11] = a03 * b20 + a13 * b21 + a23 * b22;
    if (a !== out) {
      out[12] = a[12];
      out[13] = a[13];
      out[14] = a[14];
      out[15] = a[15];
    }
    return out;
  }
  function rotateX(out, a, rad) {
    var s = Math.sin(rad);
    var c = Math.cos(rad);
    var a10 = a[4];
    var a11 = a[5];
    var a12 = a[6];
    var a13 = a[7];
    var a20 = a[8];
    var a21 = a[9];
    var a22 = a[10];
    var a23 = a[11];
    if (a !== out) {
      out[0] = a[0];
      out[1] = a[1];
      out[2] = a[2];
      out[3] = a[3];
      out[12] = a[12];
      out[13] = a[13];
      out[14] = a[14];
      out[15] = a[15];
    }
    out[4] = a10 * c + a20 * s;
    out[5] = a11 * c + a21 * s;
    out[6] = a12 * c + a22 * s;
    out[7] = a13 * c + a23 * s;
    out[8] = a20 * c - a10 * s;
    out[9] = a21 * c - a11 * s;
    out[10] = a22 * c - a12 * s;
    out[11] = a23 * c - a13 * s;
    return out;
  }
  function rotateY(out, a, rad) {
    var s = Math.sin(rad);
    var c = Math.cos(rad);
    var a00 = a[0];
    var a01 = a[1];
    var a02 = a[2];
    var a03 = a[3];
    var a20 = a[8];
    var a21 = a[9];
    var a22 = a[10];
    var a23 = a[11];
    if (a !== out) {
      out[4] = a[4];
      out[5] = a[5];
      out[6] = a[6];
      out[7] = a[7];
      out[12] = a[12];
      out[13] = a[13];
      out[14] = a[14];
      out[15] = a[15];
    }
    out[0] = a00 * c - a20 * s;
    out[1] = a01 * c - a21 * s;
    out[2] = a02 * c - a22 * s;
    out[3] = a03 * c - a23 * s;
    out[8] = a00 * s + a20 * c;
    out[9] = a01 * s + a21 * c;
    out[10] = a02 * s + a22 * c;
    out[11] = a03 * s + a23 * c;
    return out;
  }
  function rotateZ(out, a, rad) {
    var s = Math.sin(rad);
    var c = Math.cos(rad);
    var a00 = a[0];
    var a01 = a[1];
    var a02 = a[2];
    var a03 = a[3];
    var a10 = a[4];
    var a11 = a[5];
    var a12 = a[6];
    var a13 = a[7];
    if (a !== out) {
      out[8] = a[8];
      out[9] = a[9];
      out[10] = a[10];
      out[11] = a[11];
      out[12] = a[12];
      out[13] = a[13];
      out[14] = a[14];
      out[15] = a[15];
    }
    out[0] = a00 * c + a10 * s;
    out[1] = a01 * c + a11 * s;
    out[2] = a02 * c + a12 * s;
    out[3] = a03 * c + a13 * s;
    out[4] = a10 * c - a00 * s;
    out[5] = a11 * c - a01 * s;
    out[6] = a12 * c - a02 * s;
    out[7] = a13 * c - a03 * s;
    return out;
  }
  function fromTranslation(out, v) {
    out[0] = 1;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = 1;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = 1;
    out[11] = 0;
    out[12] = v[0];
    out[13] = v[1];
    out[14] = v[2];
    out[15] = 1;
    return out;
  }
  function fromScaling(out, v) {
    out[0] = v[0];
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = v[1];
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = v[2];
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function fromRotation(out, rad, axis) {
    var x = axis[0], y = axis[1], z = axis[2];
    var len4 = Math.hypot(x, y, z);
    var s, c, t;
    if (len4 < EPSILON) {
      return null;
    }
    len4 = 1 / len4;
    x *= len4;
    y *= len4;
    z *= len4;
    s = Math.sin(rad);
    c = Math.cos(rad);
    t = 1 - c;
    out[0] = x * x * t + c;
    out[1] = y * x * t + z * s;
    out[2] = z * x * t - y * s;
    out[3] = 0;
    out[4] = x * y * t - z * s;
    out[5] = y * y * t + c;
    out[6] = z * y * t + x * s;
    out[7] = 0;
    out[8] = x * z * t + y * s;
    out[9] = y * z * t - x * s;
    out[10] = z * z * t + c;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function fromXRotation(out, rad) {
    var s = Math.sin(rad);
    var c = Math.cos(rad);
    out[0] = 1;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = c;
    out[6] = s;
    out[7] = 0;
    out[8] = 0;
    out[9] = -s;
    out[10] = c;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function fromYRotation(out, rad) {
    var s = Math.sin(rad);
    var c = Math.cos(rad);
    out[0] = c;
    out[1] = 0;
    out[2] = -s;
    out[3] = 0;
    out[4] = 0;
    out[5] = 1;
    out[6] = 0;
    out[7] = 0;
    out[8] = s;
    out[9] = 0;
    out[10] = c;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function fromZRotation(out, rad) {
    var s = Math.sin(rad);
    var c = Math.cos(rad);
    out[0] = c;
    out[1] = s;
    out[2] = 0;
    out[3] = 0;
    out[4] = -s;
    out[5] = c;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = 1;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function fromRotationTranslation(out, q, v) {
    var x = q[0], y = q[1], z = q[2], w = q[3];
    var x2 = x + x;
    var y2 = y + y;
    var z2 = z + z;
    var xx = x * x2;
    var xy = x * y2;
    var xz = x * z2;
    var yy = y * y2;
    var yz = y * z2;
    var zz = z * z2;
    var wx = w * x2;
    var wy = w * y2;
    var wz = w * z2;
    out[0] = 1 - (yy + zz);
    out[1] = xy + wz;
    out[2] = xz - wy;
    out[3] = 0;
    out[4] = xy - wz;
    out[5] = 1 - (xx + zz);
    out[6] = yz + wx;
    out[7] = 0;
    out[8] = xz + wy;
    out[9] = yz - wx;
    out[10] = 1 - (xx + yy);
    out[11] = 0;
    out[12] = v[0];
    out[13] = v[1];
    out[14] = v[2];
    out[15] = 1;
    return out;
  }
  function fromQuat2(out, a) {
    var translation = new ARRAY_TYPE(3);
    var bx = -a[0], by = -a[1], bz = -a[2], bw = a[3], ax = a[4], ay = a[5], az = a[6], aw = a[7];
    var magnitude = bx * bx + by * by + bz * bz + bw * bw;
    if (magnitude > 0) {
      translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;
      translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;
      translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;
    } else {
      translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;
      translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;
      translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;
    }
    fromRotationTranslation(out, a, translation);
    return out;
  }
  function getTranslation(out, mat) {
    out[0] = mat[12];
    out[1] = mat[13];
    out[2] = mat[14];
    return out;
  }
  function getScaling(out, mat) {
    var m11 = mat[0];
    var m12 = mat[1];
    var m13 = mat[2];
    var m21 = mat[4];
    var m22 = mat[5];
    var m23 = mat[6];
    var m31 = mat[8];
    var m32 = mat[9];
    var m33 = mat[10];
    out[0] = Math.hypot(m11, m12, m13);
    out[1] = Math.hypot(m21, m22, m23);
    out[2] = Math.hypot(m31, m32, m33);
    return out;
  }
  function getRotation(out, mat) {
    var scaling = new ARRAY_TYPE(3);
    getScaling(scaling, mat);
    var is1 = 1 / scaling[0];
    var is2 = 1 / scaling[1];
    var is3 = 1 / scaling[2];
    var sm11 = mat[0] * is1;
    var sm12 = mat[1] * is2;
    var sm13 = mat[2] * is3;
    var sm21 = mat[4] * is1;
    var sm22 = mat[5] * is2;
    var sm23 = mat[6] * is3;
    var sm31 = mat[8] * is1;
    var sm32 = mat[9] * is2;
    var sm33 = mat[10] * is3;
    var trace = sm11 + sm22 + sm33;
    var S = 0;
    if (trace > 0) {
      S = Math.sqrt(trace + 1) * 2;
      out[3] = 0.25 * S;
      out[0] = (sm23 - sm32) / S;
      out[1] = (sm31 - sm13) / S;
      out[2] = (sm12 - sm21) / S;
    } else if (sm11 > sm22 && sm11 > sm33) {
      S = Math.sqrt(1 + sm11 - sm22 - sm33) * 2;
      out[3] = (sm23 - sm32) / S;
      out[0] = 0.25 * S;
      out[1] = (sm12 + sm21) / S;
      out[2] = (sm31 + sm13) / S;
    } else if (sm22 > sm33) {
      S = Math.sqrt(1 + sm22 - sm11 - sm33) * 2;
      out[3] = (sm31 - sm13) / S;
      out[0] = (sm12 + sm21) / S;
      out[1] = 0.25 * S;
      out[2] = (sm23 + sm32) / S;
    } else {
      S = Math.sqrt(1 + sm33 - sm11 - sm22) * 2;
      out[3] = (sm12 - sm21) / S;
      out[0] = (sm31 + sm13) / S;
      out[1] = (sm23 + sm32) / S;
      out[2] = 0.25 * S;
    }
    return out;
  }
  function fromRotationTranslationScale(out, q, v, s) {
    var x = q[0], y = q[1], z = q[2], w = q[3];
    var x2 = x + x;
    var y2 = y + y;
    var z2 = z + z;
    var xx = x * x2;
    var xy = x * y2;
    var xz = x * z2;
    var yy = y * y2;
    var yz = y * z2;
    var zz = z * z2;
    var wx = w * x2;
    var wy = w * y2;
    var wz = w * z2;
    var sx = s[0];
    var sy = s[1];
    var sz = s[2];
    out[0] = (1 - (yy + zz)) * sx;
    out[1] = (xy + wz) * sx;
    out[2] = (xz - wy) * sx;
    out[3] = 0;
    out[4] = (xy - wz) * sy;
    out[5] = (1 - (xx + zz)) * sy;
    out[6] = (yz + wx) * sy;
    out[7] = 0;
    out[8] = (xz + wy) * sz;
    out[9] = (yz - wx) * sz;
    out[10] = (1 - (xx + yy)) * sz;
    out[11] = 0;
    out[12] = v[0];
    out[13] = v[1];
    out[14] = v[2];
    out[15] = 1;
    return out;
  }
  function fromRotationTranslationScaleOrigin(out, q, v, s, o) {
    var x = q[0], y = q[1], z = q[2], w = q[3];
    var x2 = x + x;
    var y2 = y + y;
    var z2 = z + z;
    var xx = x * x2;
    var xy = x * y2;
    var xz = x * z2;
    var yy = y * y2;
    var yz = y * z2;
    var zz = z * z2;
    var wx = w * x2;
    var wy = w * y2;
    var wz = w * z2;
    var sx = s[0];
    var sy = s[1];
    var sz = s[2];
    var ox = o[0];
    var oy = o[1];
    var oz = o[2];
    var out0 = (1 - (yy + zz)) * sx;
    var out1 = (xy + wz) * sx;
    var out2 = (xz - wy) * sx;
    var out4 = (xy - wz) * sy;
    var out5 = (1 - (xx + zz)) * sy;
    var out6 = (yz + wx) * sy;
    var out8 = (xz + wy) * sz;
    var out9 = (yz - wx) * sz;
    var out10 = (1 - (xx + yy)) * sz;
    out[0] = out0;
    out[1] = out1;
    out[2] = out2;
    out[3] = 0;
    out[4] = out4;
    out[5] = out5;
    out[6] = out6;
    out[7] = 0;
    out[8] = out8;
    out[9] = out9;
    out[10] = out10;
    out[11] = 0;
    out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);
    out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);
    out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);
    out[15] = 1;
    return out;
  }
  function fromQuat(out, q) {
    var x = q[0], y = q[1], z = q[2], w = q[3];
    var x2 = x + x;
    var y2 = y + y;
    var z2 = z + z;
    var xx = x * x2;
    var yx = y * x2;
    var yy = y * y2;
    var zx = z * x2;
    var zy = z * y2;
    var zz = z * z2;
    var wx = w * x2;
    var wy = w * y2;
    var wz = w * z2;
    out[0] = 1 - yy - zz;
    out[1] = yx + wz;
    out[2] = zx - wy;
    out[3] = 0;
    out[4] = yx - wz;
    out[5] = 1 - xx - zz;
    out[6] = zy + wx;
    out[7] = 0;
    out[8] = zx + wy;
    out[9] = zy - wx;
    out[10] = 1 - xx - yy;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function frustum(out, left, right, bottom, top, near, far) {
    var rl = 1 / (right - left);
    var tb = 1 / (top - bottom);
    var nf = 1 / (near - far);
    out[0] = near * 2 * rl;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = near * 2 * tb;
    out[6] = 0;
    out[7] = 0;
    out[8] = (right + left) * rl;
    out[9] = (top + bottom) * tb;
    out[10] = (far + near) * nf;
    out[11] = -1;
    out[12] = 0;
    out[13] = 0;
    out[14] = far * near * 2 * nf;
    out[15] = 0;
    return out;
  }
  function perspectiveNO(out, fovy, aspect, near, far) {
    var f = 1 / Math.tan(fovy / 2), nf;
    out[0] = f / aspect;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = f;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[11] = -1;
    out[12] = 0;
    out[13] = 0;
    out[15] = 0;
    if (far != null && far !== Infinity) {
      nf = 1 / (near - far);
      out[10] = (far + near) * nf;
      out[14] = 2 * far * near * nf;
    } else {
      out[10] = -1;
      out[14] = -2 * near;
    }
    return out;
  }
  var perspective = perspectiveNO;
  function perspectiveZO(out, fovy, aspect, near, far) {
    var f = 1 / Math.tan(fovy / 2), nf;
    out[0] = f / aspect;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = f;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[11] = -1;
    out[12] = 0;
    out[13] = 0;
    out[15] = 0;
    if (far != null && far !== Infinity) {
      nf = 1 / (near - far);
      out[10] = far * nf;
      out[14] = far * near * nf;
    } else {
      out[10] = -1;
      out[14] = -near;
    }
    return out;
  }
  function perspectiveFromFieldOfView(out, fov, near, far) {
    var upTan = Math.tan(fov.upDegrees * Math.PI / 180);
    var downTan = Math.tan(fov.downDegrees * Math.PI / 180);
    var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180);
    var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180);
    var xScale = 2 / (leftTan + rightTan);
    var yScale = 2 / (upTan + downTan);
    out[0] = xScale;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = yScale;
    out[6] = 0;
    out[7] = 0;
    out[8] = -((leftTan - rightTan) * xScale * 0.5);
    out[9] = (upTan - downTan) * yScale * 0.5;
    out[10] = far / (near - far);
    out[11] = -1;
    out[12] = 0;
    out[13] = 0;
    out[14] = far * near / (near - far);
    out[15] = 0;
    return out;
  }
  function orthoNO(out, left, right, bottom, top, near, far) {
    var lr = 1 / (left - right);
    var bt = 1 / (bottom - top);
    var nf = 1 / (near - far);
    out[0] = -2 * lr;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = -2 * bt;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = 2 * nf;
    out[11] = 0;
    out[12] = (left + right) * lr;
    out[13] = (top + bottom) * bt;
    out[14] = (far + near) * nf;
    out[15] = 1;
    return out;
  }
  var ortho = orthoNO;
  function orthoZO(out, left, right, bottom, top, near, far) {
    var lr = 1 / (left - right);
    var bt = 1 / (bottom - top);
    var nf = 1 / (near - far);
    out[0] = -2 * lr;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = -2 * bt;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = nf;
    out[11] = 0;
    out[12] = (left + right) * lr;
    out[13] = (top + bottom) * bt;
    out[14] = near * nf;
    out[15] = 1;
    return out;
  }
  function lookAt(out, eye, center, up) {
    var x0, x1, x2, y0, y1, y2, z0, z1, z2, len4;
    var eyex = eye[0];
    var eyey = eye[1];
    var eyez = eye[2];
    var upx = up[0];
    var upy = up[1];
    var upz = up[2];
    var centerx = center[0];
    var centery = center[1];
    var centerz = center[2];
    if (Math.abs(eyex - centerx) < EPSILON && Math.abs(eyey - centery) < EPSILON && Math.abs(eyez - centerz) < EPSILON) {
      return identity(out);
    }
    z0 = eyex - centerx;
    z1 = eyey - centery;
    z2 = eyez - centerz;
    len4 = 1 / Math.hypot(z0, z1, z2);
    z0 *= len4;
    z1 *= len4;
    z2 *= len4;
    x0 = upy * z2 - upz * z1;
    x1 = upz * z0 - upx * z2;
    x2 = upx * z1 - upy * z0;
    len4 = Math.hypot(x0, x1, x2);
    if (!len4) {
      x0 = 0;
      x1 = 0;
      x2 = 0;
    } else {
      len4 = 1 / len4;
      x0 *= len4;
      x1 *= len4;
      x2 *= len4;
    }
    y0 = z1 * x2 - z2 * x1;
    y1 = z2 * x0 - z0 * x2;
    y2 = z0 * x1 - z1 * x0;
    len4 = Math.hypot(y0, y1, y2);
    if (!len4) {
      y0 = 0;
      y1 = 0;
      y2 = 0;
    } else {
      len4 = 1 / len4;
      y0 *= len4;
      y1 *= len4;
      y2 *= len4;
    }
    out[0] = x0;
    out[1] = y0;
    out[2] = z0;
    out[3] = 0;
    out[4] = x1;
    out[5] = y1;
    out[6] = z1;
    out[7] = 0;
    out[8] = x2;
    out[9] = y2;
    out[10] = z2;
    out[11] = 0;
    out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);
    out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);
    out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);
    out[15] = 1;
    return out;
  }
  function targetTo(out, eye, target, up) {
    var eyex = eye[0], eyey = eye[1], eyez = eye[2], upx = up[0], upy = up[1], upz = up[2];
    var z0 = eyex - target[0], z1 = eyey - target[1], z2 = eyez - target[2];
    var len4 = z0 * z0 + z1 * z1 + z2 * z2;
    if (len4 > 0) {
      len4 = 1 / Math.sqrt(len4);
      z0 *= len4;
      z1 *= len4;
      z2 *= len4;
    }
    var x0 = upy * z2 - upz * z1, x1 = upz * z0 - upx * z2, x2 = upx * z1 - upy * z0;
    len4 = x0 * x0 + x1 * x1 + x2 * x2;
    if (len4 > 0) {
      len4 = 1 / Math.sqrt(len4);
      x0 *= len4;
      x1 *= len4;
      x2 *= len4;
    }
    out[0] = x0;
    out[1] = x1;
    out[2] = x2;
    out[3] = 0;
    out[4] = z1 * x2 - z2 * x1;
    out[5] = z2 * x0 - z0 * x2;
    out[6] = z0 * x1 - z1 * x0;
    out[7] = 0;
    out[8] = z0;
    out[9] = z1;
    out[10] = z2;
    out[11] = 0;
    out[12] = eyex;
    out[13] = eyey;
    out[14] = eyez;
    out[15] = 1;
    return out;
  }
  function str(a) {
    return "mat4(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ", " + a[4] + ", " + a[5] + ", " + a[6] + ", " + a[7] + ", " + a[8] + ", " + a[9] + ", " + a[10] + ", " + a[11] + ", " + a[12] + ", " + a[13] + ", " + a[14] + ", " + a[15] + ")";
  }
  function frob(a) {
    return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);
  }
  function add(out, a, b) {
    out[0] = a[0] + b[0];
    out[1] = a[1] + b[1];
    out[2] = a[2] + b[2];
    out[3] = a[3] + b[3];
    out[4] = a[4] + b[4];
    out[5] = a[5] + b[5];
    out[6] = a[6] + b[6];
    out[7] = a[7] + b[7];
    out[8] = a[8] + b[8];
    out[9] = a[9] + b[9];
    out[10] = a[10] + b[10];
    out[11] = a[11] + b[11];
    out[12] = a[12] + b[12];
    out[13] = a[13] + b[13];
    out[14] = a[14] + b[14];
    out[15] = a[15] + b[15];
    return out;
  }
  function subtract(out, a, b) {
    out[0] = a[0] - b[0];
    out[1] = a[1] - b[1];
    out[2] = a[2] - b[2];
    out[3] = a[3] - b[3];
    out[4] = a[4] - b[4];
    out[5] = a[5] - b[5];
    out[6] = a[6] - b[6];
    out[7] = a[7] - b[7];
    out[8] = a[8] - b[8];
    out[9] = a[9] - b[9];
    out[10] = a[10] - b[10];
    out[11] = a[11] - b[11];
    out[12] = a[12] - b[12];
    out[13] = a[13] - b[13];
    out[14] = a[14] - b[14];
    out[15] = a[15] - b[15];
    return out;
  }
  function multiplyScalar(out, a, b) {
    out[0] = a[0] * b;
    out[1] = a[1] * b;
    out[2] = a[2] * b;
    out[3] = a[3] * b;
    out[4] = a[4] * b;
    out[5] = a[5] * b;
    out[6] = a[6] * b;
    out[7] = a[7] * b;
    out[8] = a[8] * b;
    out[9] = a[9] * b;
    out[10] = a[10] * b;
    out[11] = a[11] * b;
    out[12] = a[12] * b;
    out[13] = a[13] * b;
    out[14] = a[14] * b;
    out[15] = a[15] * b;
    return out;
  }
  function multiplyScalarAndAdd(out, a, b, scale6) {
    out[0] = a[0] + b[0] * scale6;
    out[1] = a[1] + b[1] * scale6;
    out[2] = a[2] + b[2] * scale6;
    out[3] = a[3] + b[3] * scale6;
    out[4] = a[4] + b[4] * scale6;
    out[5] = a[5] + b[5] * scale6;
    out[6] = a[6] + b[6] * scale6;
    out[7] = a[7] + b[7] * scale6;
    out[8] = a[8] + b[8] * scale6;
    out[9] = a[9] + b[9] * scale6;
    out[10] = a[10] + b[10] * scale6;
    out[11] = a[11] + b[11] * scale6;
    out[12] = a[12] + b[12] * scale6;
    out[13] = a[13] + b[13] * scale6;
    out[14] = a[14] + b[14] * scale6;
    out[15] = a[15] + b[15] * scale6;
    return out;
  }
  function exactEquals(a, b) {
    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];
  }
  function equals(a, b) {
    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];
    var a4 = a[4], a5 = a[5], a6 = a[6], a7 = a[7];
    var a8 = a[8], a9 = a[9], a10 = a[10], a11 = a[11];
    var a12 = a[12], a13 = a[13], a14 = a[14], a15 = a[15];
    var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];
    var b4 = b[4], b5 = b[5], b6 = b[6], b7 = b[7];
    var b8 = b[8], b9 = b[9], b10 = b[10], b11 = b[11];
    var b12 = b[12], b13 = b[13], b14 = b[14], b15 = b[15];
    return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= EPSILON * Math.max(1, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= EPSILON * Math.max(1, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= EPSILON * Math.max(1, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= EPSILON * Math.max(1, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= EPSILON * Math.max(1, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= EPSILON * Math.max(1, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= EPSILON * Math.max(1, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= EPSILON * Math.max(1, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= EPSILON * Math.max(1, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= EPSILON * Math.max(1, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= EPSILON * Math.max(1, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= EPSILON * Math.max(1, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= EPSILON * Math.max(1, Math.abs(a15), Math.abs(b15));
  }
  var mul = multiply;
  var sub = subtract;

  // node_modules/gl-matrix/esm/quat.js
  var quat_exports = {};
  __export(quat_exports, {
    add: () => add4,
    calculateW: () => calculateW,
    clone: () => clone4,
    conjugate: () => conjugate,
    copy: () => copy4,
    create: () => create5,
    dot: () => dot3,
    equals: () => equals4,
    exactEquals: () => exactEquals4,
    exp: () => exp,
    fromEuler: () => fromEuler,
    fromMat3: () => fromMat3,
    fromValues: () => fromValues4,
    getAngle: () => getAngle,
    getAxisAngle: () => getAxisAngle,
    identity: () => identity2,
    invert: () => invert2,
    len: () => len2,
    length: () => length3,
    lerp: () => lerp3,
    ln: () => ln,
    mul: () => mul3,
    multiply: () => multiply3,
    normalize: () => normalize3,
    pow: () => pow,
    random: () => random2,
    rotateX: () => rotateX3,
    rotateY: () => rotateY3,
    rotateZ: () => rotateZ3,
    rotationTo: () => rotationTo,
    scale: () => scale4,
    set: () => set4,
    setAxes: () => setAxes,
    setAxisAngle: () => setAxisAngle,
    slerp: () => slerp,
    sqlerp: () => sqlerp,
    sqrLen: () => sqrLen2,
    squaredLength: () => squaredLength3,
    str: () => str3
  });

  // node_modules/gl-matrix/esm/vec3.js
  var vec3_exports = {};
  __export(vec3_exports, {
    add: () => add2,
    angle: () => angle,
    bezier: () => bezier,
    ceil: () => ceil,
    clone: () => clone2,
    copy: () => copy2,
    create: () => create3,
    cross: () => cross,
    dist: () => dist,
    distance: () => distance,
    div: () => div,
    divide: () => divide,
    dot: () => dot,
    equals: () => equals2,
    exactEquals: () => exactEquals2,
    floor: () => floor,
    forEach: () => forEach,
    fromValues: () => fromValues2,
    hermite: () => hermite,
    inverse: () => inverse,
    len: () => len,
    length: () => length,
    lerp: () => lerp,
    max: () => max,
    min: () => min,
    mul: () => mul2,
    multiply: () => multiply2,
    negate: () => negate,
    normalize: () => normalize,
    random: () => random,
    rotateX: () => rotateX2,
    rotateY: () => rotateY2,
    rotateZ: () => rotateZ2,
    round: () => round,
    scale: () => scale2,
    scaleAndAdd: () => scaleAndAdd,
    set: () => set2,
    sqrDist: () => sqrDist,
    sqrLen: () => sqrLen,
    squaredDistance: () => squaredDistance,
    squaredLength: () => squaredLength,
    str: () => str2,
    sub: () => sub2,
    subtract: () => subtract2,
    transformMat3: () => transformMat3,
    transformMat4: () => transformMat4,
    transformQuat: () => transformQuat,
    zero: () => zero
  });
  function create3() {
    var out = new ARRAY_TYPE(3);
    if (ARRAY_TYPE != Float32Array) {
      out[0] = 0;
      out[1] = 0;
      out[2] = 0;
    }
    return out;
  }
  function clone2(a) {
    var out = new ARRAY_TYPE(3);
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    return out;
  }
  function length(a) {
    var x = a[0];
    var y = a[1];
    var z = a[2];
    return Math.hypot(x, y, z);
  }
  function fromValues2(x, y, z) {
    var out = new ARRAY_TYPE(3);
    out[0] = x;
    out[1] = y;
    out[2] = z;
    return out;
  }
  function copy2(out, a) {
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    return out;
  }
  function set2(out, x, y, z) {
    out[0] = x;
    out[1] = y;
    out[2] = z;
    return out;
  }
  function add2(out, a, b) {
    out[0] = a[0] + b[0];
    out[1] = a[1] + b[1];
    out[2] = a[2] + b[2];
    return out;
  }
  function subtract2(out, a, b) {
    out[0] = a[0] - b[0];
    out[1] = a[1] - b[1];
    out[2] = a[2] - b[2];
    return out;
  }
  function multiply2(out, a, b) {
    out[0] = a[0] * b[0];
    out[1] = a[1] * b[1];
    out[2] = a[2] * b[2];
    return out;
  }
  function divide(out, a, b) {
    out[0] = a[0] / b[0];
    out[1] = a[1] / b[1];
    out[2] = a[2] / b[2];
    return out;
  }
  function ceil(out, a) {
    out[0] = Math.ceil(a[0]);
    out[1] = Math.ceil(a[1]);
    out[2] = Math.ceil(a[2]);
    return out;
  }
  function floor(out, a) {
    out[0] = Math.floor(a[0]);
    out[1] = Math.floor(a[1]);
    out[2] = Math.floor(a[2]);
    return out;
  }
  function min(out, a, b) {
    out[0] = Math.min(a[0], b[0]);
    out[1] = Math.min(a[1], b[1]);
    out[2] = Math.min(a[2], b[2]);
    return out;
  }
  function max(out, a, b) {
    out[0] = Math.max(a[0], b[0]);
    out[1] = Math.max(a[1], b[1]);
    out[2] = Math.max(a[2], b[2]);
    return out;
  }
  function round(out, a) {
    out[0] = Math.round(a[0]);
    out[1] = Math.round(a[1]);
    out[2] = Math.round(a[2]);
    return out;
  }
  function scale2(out, a, b) {
    out[0] = a[0] * b;
    out[1] = a[1] * b;
    out[2] = a[2] * b;
    return out;
  }
  function scaleAndAdd(out, a, b, scale6) {
    out[0] = a[0] + b[0] * scale6;
    out[1] = a[1] + b[1] * scale6;
    out[2] = a[2] + b[2] * scale6;
    return out;
  }
  function distance(a, b) {
    var x = b[0] - a[0];
    var y = b[1] - a[1];
    var z = b[2] - a[2];
    return Math.hypot(x, y, z);
  }
  function squaredDistance(a, b) {
    var x = b[0] - a[0];
    var y = b[1] - a[1];
    var z = b[2] - a[2];
    return x * x + y * y + z * z;
  }
  function squaredLength(a) {
    var x = a[0];
    var y = a[1];
    var z = a[2];
    return x * x + y * y + z * z;
  }
  function negate(out, a) {
    out[0] = -a[0];
    out[1] = -a[1];
    out[2] = -a[2];
    return out;
  }
  function inverse(out, a) {
    out[0] = 1 / a[0];
    out[1] = 1 / a[1];
    out[2] = 1 / a[2];
    return out;
  }
  function normalize(out, a) {
    var x = a[0];
    var y = a[1];
    var z = a[2];
    var len4 = x * x + y * y + z * z;
    if (len4 > 0) {
      len4 = 1 / Math.sqrt(len4);
    }
    out[0] = a[0] * len4;
    out[1] = a[1] * len4;
    out[2] = a[2] * len4;
    return out;
  }
  function dot(a, b) {
    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];
  }
  function cross(out, a, b) {
    var ax = a[0], ay = a[1], az = a[2];
    var bx = b[0], by = b[1], bz = b[2];
    out[0] = ay * bz - az * by;
    out[1] = az * bx - ax * bz;
    out[2] = ax * by - ay * bx;
    return out;
  }
  function lerp(out, a, b, t) {
    var ax = a[0];
    var ay = a[1];
    var az = a[2];
    out[0] = ax + t * (b[0] - ax);
    out[1] = ay + t * (b[1] - ay);
    out[2] = az + t * (b[2] - az);
    return out;
  }
  function hermite(out, a, b, c, d, t) {
    var factorTimes2 = t * t;
    var factor1 = factorTimes2 * (2 * t - 3) + 1;
    var factor2 = factorTimes2 * (t - 2) + t;
    var factor3 = factorTimes2 * (t - 1);
    var factor4 = factorTimes2 * (3 - 2 * t);
    out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;
    out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;
    out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;
    return out;
  }
  function bezier(out, a, b, c, d, t) {
    var inverseFactor = 1 - t;
    var inverseFactorTimesTwo = inverseFactor * inverseFactor;
    var factorTimes2 = t * t;
    var factor1 = inverseFactorTimesTwo * inverseFactor;
    var factor2 = 3 * t * inverseFactorTimesTwo;
    var factor3 = 3 * factorTimes2 * inverseFactor;
    var factor4 = factorTimes2 * t;
    out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;
    out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;
    out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;
    return out;
  }
  function random(out, scale6) {
    scale6 = scale6 || 1;
    var r = RANDOM() * 2 * Math.PI;
    var z = RANDOM() * 2 - 1;
    var zScale = Math.sqrt(1 - z * z) * scale6;
    out[0] = Math.cos(r) * zScale;
    out[1] = Math.sin(r) * zScale;
    out[2] = z * scale6;
    return out;
  }
  function transformMat4(out, a, m) {
    var x = a[0], y = a[1], z = a[2];
    var w = m[3] * x + m[7] * y + m[11] * z + m[15];
    w = w || 1;
    out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;
    out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;
    out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;
    return out;
  }
  function transformMat3(out, a, m) {
    var x = a[0], y = a[1], z = a[2];
    out[0] = x * m[0] + y * m[3] + z * m[6];
    out[1] = x * m[1] + y * m[4] + z * m[7];
    out[2] = x * m[2] + y * m[5] + z * m[8];
    return out;
  }
  function transformQuat(out, a, q) {
    var qx = q[0], qy = q[1], qz = q[2], qw = q[3];
    var x = a[0], y = a[1], z = a[2];
    var uvx = qy * z - qz * y, uvy = qz * x - qx * z, uvz = qx * y - qy * x;
    var uuvx = qy * uvz - qz * uvy, uuvy = qz * uvx - qx * uvz, uuvz = qx * uvy - qy * uvx;
    var w2 = qw * 2;
    uvx *= w2;
    uvy *= w2;
    uvz *= w2;
    uuvx *= 2;
    uuvy *= 2;
    uuvz *= 2;
    out[0] = x + uvx + uuvx;
    out[1] = y + uvy + uuvy;
    out[2] = z + uvz + uuvz;
    return out;
  }
  function rotateX2(out, a, b, rad) {
    var p = [], r = [];
    p[0] = a[0] - b[0];
    p[1] = a[1] - b[1];
    p[2] = a[2] - b[2];
    r[0] = p[0];
    r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);
    r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad);
    out[0] = r[0] + b[0];
    out[1] = r[1] + b[1];
    out[2] = r[2] + b[2];
    return out;
  }
  function rotateY2(out, a, b, rad) {
    var p = [], r = [];
    p[0] = a[0] - b[0];
    p[1] = a[1] - b[1];
    p[2] = a[2] - b[2];
    r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);
    r[1] = p[1];
    r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad);
    out[0] = r[0] + b[0];
    out[1] = r[1] + b[1];
    out[2] = r[2] + b[2];
    return out;
  }
  function rotateZ2(out, a, b, rad) {
    var p = [], r = [];
    p[0] = a[0] - b[0];
    p[1] = a[1] - b[1];
    p[2] = a[2] - b[2];
    r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);
    r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);
    r[2] = p[2];
    out[0] = r[0] + b[0];
    out[1] = r[1] + b[1];
    out[2] = r[2] + b[2];
    return out;
  }
  function angle(a, b) {
    var ax = a[0], ay = a[1], az = a[2], bx = b[0], by = b[1], bz = b[2], mag1 = Math.sqrt(ax * ax + ay * ay + az * az), mag2 = Math.sqrt(bx * bx + by * by + bz * bz), mag = mag1 * mag2, cosine = mag && dot(a, b) / mag;
    return Math.acos(Math.min(Math.max(cosine, -1), 1));
  }
  function zero(out) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
    return out;
  }
  function str2(a) {
    return "vec3(" + a[0] + ", " + a[1] + ", " + a[2] + ")";
  }
  function exactEquals2(a, b) {
    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];
  }
  function equals2(a, b) {
    var a0 = a[0], a1 = a[1], a2 = a[2];
    var b0 = b[0], b1 = b[1], b2 = b[2];
    return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2));
  }
  var sub2 = subtract2;
  var mul2 = multiply2;
  var div = divide;
  var dist = distance;
  var sqrDist = squaredDistance;
  var len = length;
  var sqrLen = squaredLength;
  var forEach = function() {
    var vec = create3();
    return function(a, stride, offset2, count, fn, arg) {
      var i, l;
      if (!stride) {
        stride = 3;
      }
      if (!offset2) {
        offset2 = 0;
      }
      if (count) {
        l = Math.min(count * stride + offset2, a.length);
      } else {
        l = a.length;
      }
      for (i = offset2; i < l; i += stride) {
        vec[0] = a[i];
        vec[1] = a[i + 1];
        vec[2] = a[i + 2];
        fn(vec, vec, arg);
        a[i] = vec[0];
        a[i + 1] = vec[1];
        a[i + 2] = vec[2];
      }
      return a;
    };
  }();

  // node_modules/gl-matrix/esm/vec4.js
  function create4() {
    var out = new ARRAY_TYPE(4);
    if (ARRAY_TYPE != Float32Array) {
      out[0] = 0;
      out[1] = 0;
      out[2] = 0;
      out[3] = 0;
    }
    return out;
  }
  function clone3(a) {
    var out = new ARRAY_TYPE(4);
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    out[3] = a[3];
    return out;
  }
  function fromValues3(x, y, z, w) {
    var out = new ARRAY_TYPE(4);
    out[0] = x;
    out[1] = y;
    out[2] = z;
    out[3] = w;
    return out;
  }
  function copy3(out, a) {
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    out[3] = a[3];
    return out;
  }
  function set3(out, x, y, z, w) {
    out[0] = x;
    out[1] = y;
    out[2] = z;
    out[3] = w;
    return out;
  }
  function add3(out, a, b) {
    out[0] = a[0] + b[0];
    out[1] = a[1] + b[1];
    out[2] = a[2] + b[2];
    out[3] = a[3] + b[3];
    return out;
  }
  function scale3(out, a, b) {
    out[0] = a[0] * b;
    out[1] = a[1] * b;
    out[2] = a[2] * b;
    out[3] = a[3] * b;
    return out;
  }
  function length2(a) {
    var x = a[0];
    var y = a[1];
    var z = a[2];
    var w = a[3];
    return Math.hypot(x, y, z, w);
  }
  function squaredLength2(a) {
    var x = a[0];
    var y = a[1];
    var z = a[2];
    var w = a[3];
    return x * x + y * y + z * z + w * w;
  }
  function normalize2(out, a) {
    var x = a[0];
    var y = a[1];
    var z = a[2];
    var w = a[3];
    var len4 = x * x + y * y + z * z + w * w;
    if (len4 > 0) {
      len4 = 1 / Math.sqrt(len4);
    }
    out[0] = x * len4;
    out[1] = y * len4;
    out[2] = z * len4;
    out[3] = w * len4;
    return out;
  }
  function dot2(a, b) {
    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];
  }
  function lerp2(out, a, b, t) {
    var ax = a[0];
    var ay = a[1];
    var az = a[2];
    var aw = a[3];
    out[0] = ax + t * (b[0] - ax);
    out[1] = ay + t * (b[1] - ay);
    out[2] = az + t * (b[2] - az);
    out[3] = aw + t * (b[3] - aw);
    return out;
  }
  function exactEquals3(a, b) {
    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];
  }
  function equals3(a, b) {
    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];
    var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];
    return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= EPSILON * Math.max(1, Math.abs(a3), Math.abs(b3));
  }
  var forEach2 = function() {
    var vec = create4();
    return function(a, stride, offset2, count, fn, arg) {
      var i, l;
      if (!stride) {
        stride = 4;
      }
      if (!offset2) {
        offset2 = 0;
      }
      if (count) {
        l = Math.min(count * stride + offset2, a.length);
      } else {
        l = a.length;
      }
      for (i = offset2; i < l; i += stride) {
        vec[0] = a[i];
        vec[1] = a[i + 1];
        vec[2] = a[i + 2];
        vec[3] = a[i + 3];
        fn(vec, vec, arg);
        a[i] = vec[0];
        a[i + 1] = vec[1];
        a[i + 2] = vec[2];
        a[i + 3] = vec[3];
      }
      return a;
    };
  }();

  // node_modules/gl-matrix/esm/quat.js
  function create5() {
    var out = new ARRAY_TYPE(4);
    if (ARRAY_TYPE != Float32Array) {
      out[0] = 0;
      out[1] = 0;
      out[2] = 0;
    }
    out[3] = 1;
    return out;
  }
  function identity2(out) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
    out[3] = 1;
    return out;
  }
  function setAxisAngle(out, axis, rad) {
    rad = rad * 0.5;
    var s = Math.sin(rad);
    out[0] = s * axis[0];
    out[1] = s * axis[1];
    out[2] = s * axis[2];
    out[3] = Math.cos(rad);
    return out;
  }
  function getAxisAngle(out_axis, q) {
    var rad = Math.acos(q[3]) * 2;
    var s = Math.sin(rad / 2);
    if (s > EPSILON) {
      out_axis[0] = q[0] / s;
      out_axis[1] = q[1] / s;
      out_axis[2] = q[2] / s;
    } else {
      out_axis[0] = 1;
      out_axis[1] = 0;
      out_axis[2] = 0;
    }
    return rad;
  }
  function getAngle(a, b) {
    var dotproduct = dot3(a, b);
    return Math.acos(2 * dotproduct * dotproduct - 1);
  }
  function multiply3(out, a, b) {
    var ax = a[0], ay = a[1], az = a[2], aw = a[3];
    var bx = b[0], by = b[1], bz = b[2], bw = b[3];
    out[0] = ax * bw + aw * bx + ay * bz - az * by;
    out[1] = ay * bw + aw * by + az * bx - ax * bz;
    out[2] = az * bw + aw * bz + ax * by - ay * bx;
    out[3] = aw * bw - ax * bx - ay * by - az * bz;
    return out;
  }
  function rotateX3(out, a, rad) {
    rad *= 0.5;
    var ax = a[0], ay = a[1], az = a[2], aw = a[3];
    var bx = Math.sin(rad), bw = Math.cos(rad);
    out[0] = ax * bw + aw * bx;
    out[1] = ay * bw + az * bx;
    out[2] = az * bw - ay * bx;
    out[3] = aw * bw - ax * bx;
    return out;
  }
  function rotateY3(out, a, rad) {
    rad *= 0.5;
    var ax = a[0], ay = a[1], az = a[2], aw = a[3];
    var by = Math.sin(rad), bw = Math.cos(rad);
    out[0] = ax * bw - az * by;
    out[1] = ay * bw + aw * by;
    out[2] = az * bw + ax * by;
    out[3] = aw * bw - ay * by;
    return out;
  }
  function rotateZ3(out, a, rad) {
    rad *= 0.5;
    var ax = a[0], ay = a[1], az = a[2], aw = a[3];
    var bz = Math.sin(rad), bw = Math.cos(rad);
    out[0] = ax * bw + ay * bz;
    out[1] = ay * bw - ax * bz;
    out[2] = az * bw + aw * bz;
    out[3] = aw * bw - az * bz;
    return out;
  }
  function calculateW(out, a) {
    var x = a[0], y = a[1], z = a[2];
    out[0] = x;
    out[1] = y;
    out[2] = z;
    out[3] = Math.sqrt(Math.abs(1 - x * x - y * y - z * z));
    return out;
  }
  function exp(out, a) {
    var x = a[0], y = a[1], z = a[2], w = a[3];
    var r = Math.sqrt(x * x + y * y + z * z);
    var et = Math.exp(w);
    var s = r > 0 ? et * Math.sin(r) / r : 0;
    out[0] = x * s;
    out[1] = y * s;
    out[2] = z * s;
    out[3] = et * Math.cos(r);
    return out;
  }
  function ln(out, a) {
    var x = a[0], y = a[1], z = a[2], w = a[3];
    var r = Math.sqrt(x * x + y * y + z * z);
    var t = r > 0 ? Math.atan2(r, w) / r : 0;
    out[0] = x * t;
    out[1] = y * t;
    out[2] = z * t;
    out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);
    return out;
  }
  function pow(out, a, b) {
    ln(out, a);
    scale4(out, out, b);
    exp(out, out);
    return out;
  }
  function slerp(out, a, b, t) {
    var ax = a[0], ay = a[1], az = a[2], aw = a[3];
    var bx = b[0], by = b[1], bz = b[2], bw = b[3];
    var omega, cosom, sinom, scale0, scale1;
    cosom = ax * bx + ay * by + az * bz + aw * bw;
    if (cosom < 0) {
      cosom = -cosom;
      bx = -bx;
      by = -by;
      bz = -bz;
      bw = -bw;
    }
    if (1 - cosom > EPSILON) {
      omega = Math.acos(cosom);
      sinom = Math.sin(omega);
      scale0 = Math.sin((1 - t) * omega) / sinom;
      scale1 = Math.sin(t * omega) / sinom;
    } else {
      scale0 = 1 - t;
      scale1 = t;
    }
    out[0] = scale0 * ax + scale1 * bx;
    out[1] = scale0 * ay + scale1 * by;
    out[2] = scale0 * az + scale1 * bz;
    out[3] = scale0 * aw + scale1 * bw;
    return out;
  }
  function random2(out) {
    var u1 = RANDOM();
    var u2 = RANDOM();
    var u3 = RANDOM();
    var sqrt1MinusU1 = Math.sqrt(1 - u1);
    var sqrtU1 = Math.sqrt(u1);
    out[0] = sqrt1MinusU1 * Math.sin(2 * Math.PI * u2);
    out[1] = sqrt1MinusU1 * Math.cos(2 * Math.PI * u2);
    out[2] = sqrtU1 * Math.sin(2 * Math.PI * u3);
    out[3] = sqrtU1 * Math.cos(2 * Math.PI * u3);
    return out;
  }
  function invert2(out, a) {
    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];
    var dot5 = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;
    var invDot = dot5 ? 1 / dot5 : 0;
    out[0] = -a0 * invDot;
    out[1] = -a1 * invDot;
    out[2] = -a2 * invDot;
    out[3] = a3 * invDot;
    return out;
  }
  function conjugate(out, a) {
    out[0] = -a[0];
    out[1] = -a[1];
    out[2] = -a[2];
    out[3] = a[3];
    return out;
  }
  function fromMat3(out, m) {
    var fTrace = m[0] + m[4] + m[8];
    var fRoot;
    if (fTrace > 0) {
      fRoot = Math.sqrt(fTrace + 1);
      out[3] = 0.5 * fRoot;
      fRoot = 0.5 / fRoot;
      out[0] = (m[5] - m[7]) * fRoot;
      out[1] = (m[6] - m[2]) * fRoot;
      out[2] = (m[1] - m[3]) * fRoot;
    } else {
      var i = 0;
      if (m[4] > m[0])
        i = 1;
      if (m[8] > m[i * 3 + i])
        i = 2;
      var j = (i + 1) % 3;
      var k = (i + 2) % 3;
      fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1);
      out[i] = 0.5 * fRoot;
      fRoot = 0.5 / fRoot;
      out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;
      out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;
      out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;
    }
    return out;
  }
  function fromEuler(out, x, y, z) {
    var halfToRad = 0.5 * Math.PI / 180;
    x *= halfToRad;
    y *= halfToRad;
    z *= halfToRad;
    var sx = Math.sin(x);
    var cx = Math.cos(x);
    var sy = Math.sin(y);
    var cy = Math.cos(y);
    var sz = Math.sin(z);
    var cz = Math.cos(z);
    out[0] = sx * cy * cz - cx * sy * sz;
    out[1] = cx * sy * cz + sx * cy * sz;
    out[2] = cx * cy * sz - sx * sy * cz;
    out[3] = cx * cy * cz + sx * sy * sz;
    return out;
  }
  function str3(a) {
    return "quat(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ")";
  }
  var clone4 = clone3;
  var fromValues4 = fromValues3;
  var copy4 = copy3;
  var set4 = set3;
  var add4 = add3;
  var mul3 = multiply3;
  var scale4 = scale3;
  var dot3 = dot2;
  var lerp3 = lerp2;
  var length3 = length2;
  var len2 = length3;
  var squaredLength3 = squaredLength2;
  var sqrLen2 = squaredLength3;
  var normalize3 = normalize2;
  var exactEquals4 = exactEquals3;
  var equals4 = equals3;
  var rotationTo = function() {
    var tmpvec3 = create3();
    var xUnitVec3 = fromValues2(1, 0, 0);
    var yUnitVec3 = fromValues2(0, 1, 0);
    return function(out, a, b) {
      var dot5 = dot(a, b);
      if (dot5 < -0.999999) {
        cross(tmpvec3, xUnitVec3, a);
        if (len(tmpvec3) < 1e-6)
          cross(tmpvec3, yUnitVec3, a);
        normalize(tmpvec3, tmpvec3);
        setAxisAngle(out, tmpvec3, Math.PI);
        return out;
      } else if (dot5 > 0.999999) {
        out[0] = 0;
        out[1] = 0;
        out[2] = 0;
        out[3] = 1;
        return out;
      } else {
        cross(tmpvec3, a, b);
        out[0] = tmpvec3[0];
        out[1] = tmpvec3[1];
        out[2] = tmpvec3[2];
        out[3] = 1 + dot5;
        return normalize3(out, out);
      }
    };
  }();
  var sqlerp = function() {
    var temp1 = create5();
    var temp2 = create5();
    return function(out, a, b, c, d, t) {
      slerp(temp1, a, d, t);
      slerp(temp2, b, c, t);
      slerp(out, temp1, temp2, 2 * t * (1 - t));
      return out;
    };
  }();
  var setAxes = function() {
    var matr = create();
    return function(out, view, right, up) {
      matr[0] = right[0];
      matr[3] = right[1];
      matr[6] = right[2];
      matr[1] = up[0];
      matr[4] = up[1];
      matr[7] = up[2];
      matr[2] = -view[0];
      matr[5] = -view[1];
      matr[8] = -view[2];
      return normalize3(out, fromMat3(out, matr));
    };
  }();

  // node_modules/gl-matrix/esm/quat2.js
  var quat2_exports = {};
  __export(quat2_exports, {
    add: () => add5,
    clone: () => clone5,
    conjugate: () => conjugate2,
    copy: () => copy5,
    create: () => create6,
    dot: () => dot4,
    equals: () => equals5,
    exactEquals: () => exactEquals5,
    fromMat4: () => fromMat4,
    fromRotation: () => fromRotation2,
    fromRotationTranslation: () => fromRotationTranslation2,
    fromRotationTranslationValues: () => fromRotationTranslationValues,
    fromTranslation: () => fromTranslation2,
    fromValues: () => fromValues5,
    getDual: () => getDual,
    getReal: () => getReal,
    getTranslation: () => getTranslation2,
    identity: () => identity3,
    invert: () => invert3,
    len: () => len3,
    length: () => length4,
    lerp: () => lerp4,
    mul: () => mul4,
    multiply: () => multiply4,
    normalize: () => normalize4,
    rotateAroundAxis: () => rotateAroundAxis,
    rotateByQuatAppend: () => rotateByQuatAppend,
    rotateByQuatPrepend: () => rotateByQuatPrepend,
    rotateX: () => rotateX4,
    rotateY: () => rotateY4,
    rotateZ: () => rotateZ4,
    scale: () => scale5,
    set: () => set5,
    setDual: () => setDual,
    setReal: () => setReal,
    sqrLen: () => sqrLen3,
    squaredLength: () => squaredLength4,
    str: () => str4,
    translate: () => translate2
  });
  function create6() {
    var dq = new ARRAY_TYPE(8);
    if (ARRAY_TYPE != Float32Array) {
      dq[0] = 0;
      dq[1] = 0;
      dq[2] = 0;
      dq[4] = 0;
      dq[5] = 0;
      dq[6] = 0;
      dq[7] = 0;
    }
    dq[3] = 1;
    return dq;
  }
  function clone5(a) {
    var dq = new ARRAY_TYPE(8);
    dq[0] = a[0];
    dq[1] = a[1];
    dq[2] = a[2];
    dq[3] = a[3];
    dq[4] = a[4];
    dq[5] = a[5];
    dq[6] = a[6];
    dq[7] = a[7];
    return dq;
  }
  function fromValues5(x1, y1, z1, w1, x2, y2, z2, w2) {
    var dq = new ARRAY_TYPE(8);
    dq[0] = x1;
    dq[1] = y1;
    dq[2] = z1;
    dq[3] = w1;
    dq[4] = x2;
    dq[5] = y2;
    dq[6] = z2;
    dq[7] = w2;
    return dq;
  }
  function fromRotationTranslationValues(x1, y1, z1, w1, x2, y2, z2) {
    var dq = new ARRAY_TYPE(8);
    dq[0] = x1;
    dq[1] = y1;
    dq[2] = z1;
    dq[3] = w1;
    var ax = x2 * 0.5, ay = y2 * 0.5, az = z2 * 0.5;
    dq[4] = ax * w1 + ay * z1 - az * y1;
    dq[5] = ay * w1 + az * x1 - ax * z1;
    dq[6] = az * w1 + ax * y1 - ay * x1;
    dq[7] = -ax * x1 - ay * y1 - az * z1;
    return dq;
  }
  function fromRotationTranslation2(out, q, t) {
    var ax = t[0] * 0.5, ay = t[1] * 0.5, az = t[2] * 0.5, bx = q[0], by = q[1], bz = q[2], bw = q[3];
    out[0] = bx;
    out[1] = by;
    out[2] = bz;
    out[3] = bw;
    out[4] = ax * bw + ay * bz - az * by;
    out[5] = ay * bw + az * bx - ax * bz;
    out[6] = az * bw + ax * by - ay * bx;
    out[7] = -ax * bx - ay * by - az * bz;
    return out;
  }
  function fromTranslation2(out, t) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
    out[3] = 1;
    out[4] = t[0] * 0.5;
    out[5] = t[1] * 0.5;
    out[6] = t[2] * 0.5;
    out[7] = 0;
    return out;
  }
  function fromRotation2(out, q) {
    out[0] = q[0];
    out[1] = q[1];
    out[2] = q[2];
    out[3] = q[3];
    out[4] = 0;
    out[5] = 0;
    out[6] = 0;
    out[7] = 0;
    return out;
  }
  function fromMat4(out, a) {
    var outer = create5();
    getRotation(outer, a);
    var t = new ARRAY_TYPE(3);
    getTranslation(t, a);
    fromRotationTranslation2(out, outer, t);
    return out;
  }
  function copy5(out, a) {
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    out[3] = a[3];
    out[4] = a[4];
    out[5] = a[5];
    out[6] = a[6];
    out[7] = a[7];
    return out;
  }
  function identity3(out) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
    out[3] = 1;
    out[4] = 0;
    out[5] = 0;
    out[6] = 0;
    out[7] = 0;
    return out;
  }
  function set5(out, x1, y1, z1, w1, x2, y2, z2, w2) {
    out[0] = x1;
    out[1] = y1;
    out[2] = z1;
    out[3] = w1;
    out[4] = x2;
    out[5] = y2;
    out[6] = z2;
    out[7] = w2;
    return out;
  }
  var getReal = copy4;
  function getDual(out, a) {
    out[0] = a[4];
    out[1] = a[5];
    out[2] = a[6];
    out[3] = a[7];
    return out;
  }
  var setReal = copy4;
  function setDual(out, q) {
    out[4] = q[0];
    out[5] = q[1];
    out[6] = q[2];
    out[7] = q[3];
    return out;
  }
  function getTranslation2(out, a) {
    var ax = a[4], ay = a[5], az = a[6], aw = a[7], bx = -a[0], by = -a[1], bz = -a[2], bw = a[3];
    out[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;
    out[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;
    out[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;
    return out;
  }
  function translate2(out, a, v) {
    var ax1 = a[0], ay1 = a[1], az1 = a[2], aw1 = a[3], bx1 = v[0] * 0.5, by1 = v[1] * 0.5, bz1 = v[2] * 0.5, ax2 = a[4], ay2 = a[5], az2 = a[6], aw2 = a[7];
    out[0] = ax1;
    out[1] = ay1;
    out[2] = az1;
    out[3] = aw1;
    out[4] = aw1 * bx1 + ay1 * bz1 - az1 * by1 + ax2;
    out[5] = aw1 * by1 + az1 * bx1 - ax1 * bz1 + ay2;
    out[6] = aw1 * bz1 + ax1 * by1 - ay1 * bx1 + az2;
    out[7] = -ax1 * bx1 - ay1 * by1 - az1 * bz1 + aw2;
    return out;
  }
  function rotateX4(out, a, rad) {
    var bx = -a[0], by = -a[1], bz = -a[2], bw = a[3], ax = a[4], ay = a[5], az = a[6], aw = a[7], ax1 = ax * bw + aw * bx + ay * bz - az * by, ay1 = ay * bw + aw * by + az * bx - ax * bz, az1 = az * bw + aw * bz + ax * by - ay * bx, aw1 = aw * bw - ax * bx - ay * by - az * bz;
    rotateX3(out, a, rad);
    bx = out[0];
    by = out[1];
    bz = out[2];
    bw = out[3];
    out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;
    out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;
    out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;
    out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;
    return out;
  }
  function rotateY4(out, a, rad) {
    var bx = -a[0], by = -a[1], bz = -a[2], bw = a[3], ax = a[4], ay = a[5], az = a[6], aw = a[7], ax1 = ax * bw + aw * bx + ay * bz - az * by, ay1 = ay * bw + aw * by + az * bx - ax * bz, az1 = az * bw + aw * bz + ax * by - ay * bx, aw1 = aw * bw - ax * bx - ay * by - az * bz;
    rotateY3(out, a, rad);
    bx = out[0];
    by = out[1];
    bz = out[2];
    bw = out[3];
    out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;
    out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;
    out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;
    out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;
    return out;
  }
  function rotateZ4(out, a, rad) {
    var bx = -a[0], by = -a[1], bz = -a[2], bw = a[3], ax = a[4], ay = a[5], az = a[6], aw = a[7], ax1 = ax * bw + aw * bx + ay * bz - az * by, ay1 = ay * bw + aw * by + az * bx - ax * bz, az1 = az * bw + aw * bz + ax * by - ay * bx, aw1 = aw * bw - ax * bx - ay * by - az * bz;
    rotateZ3(out, a, rad);
    bx = out[0];
    by = out[1];
    bz = out[2];
    bw = out[3];
    out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;
    out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;
    out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;
    out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;
    return out;
  }
  function rotateByQuatAppend(out, a, q) {
    var qx = q[0], qy = q[1], qz = q[2], qw = q[3], ax = a[0], ay = a[1], az = a[2], aw = a[3];
    out[0] = ax * qw + aw * qx + ay * qz - az * qy;
    out[1] = ay * qw + aw * qy + az * qx - ax * qz;
    out[2] = az * qw + aw * qz + ax * qy - ay * qx;
    out[3] = aw * qw - ax * qx - ay * qy - az * qz;
    ax = a[4];
    ay = a[5];
    az = a[6];
    aw = a[7];
    out[4] = ax * qw + aw * qx + ay * qz - az * qy;
    out[5] = ay * qw + aw * qy + az * qx - ax * qz;
    out[6] = az * qw + aw * qz + ax * qy - ay * qx;
    out[7] = aw * qw - ax * qx - ay * qy - az * qz;
    return out;
  }
  function rotateByQuatPrepend(out, q, a) {
    var qx = q[0], qy = q[1], qz = q[2], qw = q[3], bx = a[0], by = a[1], bz = a[2], bw = a[3];
    out[0] = qx * bw + qw * bx + qy * bz - qz * by;
    out[1] = qy * bw + qw * by + qz * bx - qx * bz;
    out[2] = qz * bw + qw * bz + qx * by - qy * bx;
    out[3] = qw * bw - qx * bx - qy * by - qz * bz;
    bx = a[4];
    by = a[5];
    bz = a[6];
    bw = a[7];
    out[4] = qx * bw + qw * bx + qy * bz - qz * by;
    out[5] = qy * bw + qw * by + qz * bx - qx * bz;
    out[6] = qz * bw + qw * bz + qx * by - qy * bx;
    out[7] = qw * bw - qx * bx - qy * by - qz * bz;
    return out;
  }
  function rotateAroundAxis(out, a, axis, rad) {
    if (Math.abs(rad) < EPSILON) {
      return copy5(out, a);
    }
    var axisLength = Math.hypot(axis[0], axis[1], axis[2]);
    rad = rad * 0.5;
    var s = Math.sin(rad);
    var bx = s * axis[0] / axisLength;
    var by = s * axis[1] / axisLength;
    var bz = s * axis[2] / axisLength;
    var bw = Math.cos(rad);
    var ax1 = a[0], ay1 = a[1], az1 = a[2], aw1 = a[3];
    out[0] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;
    out[1] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;
    out[2] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;
    out[3] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;
    var ax = a[4], ay = a[5], az = a[6], aw = a[7];
    out[4] = ax * bw + aw * bx + ay * bz - az * by;
    out[5] = ay * bw + aw * by + az * bx - ax * bz;
    out[6] = az * bw + aw * bz + ax * by - ay * bx;
    out[7] = aw * bw - ax * bx - ay * by - az * bz;
    return out;
  }
  function add5(out, a, b) {
    out[0] = a[0] + b[0];
    out[1] = a[1] + b[1];
    out[2] = a[2] + b[2];
    out[3] = a[3] + b[3];
    out[4] = a[4] + b[4];
    out[5] = a[5] + b[5];
    out[6] = a[6] + b[6];
    out[7] = a[7] + b[7];
    return out;
  }
  function multiply4(out, a, b) {
    var ax0 = a[0], ay0 = a[1], az0 = a[2], aw0 = a[3], bx1 = b[4], by1 = b[5], bz1 = b[6], bw1 = b[7], ax1 = a[4], ay1 = a[5], az1 = a[6], aw1 = a[7], bx0 = b[0], by0 = b[1], bz0 = b[2], bw0 = b[3];
    out[0] = ax0 * bw0 + aw0 * bx0 + ay0 * bz0 - az0 * by0;
    out[1] = ay0 * bw0 + aw0 * by0 + az0 * bx0 - ax0 * bz0;
    out[2] = az0 * bw0 + aw0 * bz0 + ax0 * by0 - ay0 * bx0;
    out[3] = aw0 * bw0 - ax0 * bx0 - ay0 * by0 - az0 * bz0;
    out[4] = ax0 * bw1 + aw0 * bx1 + ay0 * bz1 - az0 * by1 + ax1 * bw0 + aw1 * bx0 + ay1 * bz0 - az1 * by0;
    out[5] = ay0 * bw1 + aw0 * by1 + az0 * bx1 - ax0 * bz1 + ay1 * bw0 + aw1 * by0 + az1 * bx0 - ax1 * bz0;
    out[6] = az0 * bw1 + aw0 * bz1 + ax0 * by1 - ay0 * bx1 + az1 * bw0 + aw1 * bz0 + ax1 * by0 - ay1 * bx0;
    out[7] = aw0 * bw1 - ax0 * bx1 - ay0 * by1 - az0 * bz1 + aw1 * bw0 - ax1 * bx0 - ay1 * by0 - az1 * bz0;
    return out;
  }
  var mul4 = multiply4;
  function scale5(out, a, b) {
    out[0] = a[0] * b;
    out[1] = a[1] * b;
    out[2] = a[2] * b;
    out[3] = a[3] * b;
    out[4] = a[4] * b;
    out[5] = a[5] * b;
    out[6] = a[6] * b;
    out[7] = a[7] * b;
    return out;
  }
  var dot4 = dot3;
  function lerp4(out, a, b, t) {
    var mt = 1 - t;
    if (dot4(a, b) < 0)
      t = -t;
    out[0] = a[0] * mt + b[0] * t;
    out[1] = a[1] * mt + b[1] * t;
    out[2] = a[2] * mt + b[2] * t;
    out[3] = a[3] * mt + b[3] * t;
    out[4] = a[4] * mt + b[4] * t;
    out[5] = a[5] * mt + b[5] * t;
    out[6] = a[6] * mt + b[6] * t;
    out[7] = a[7] * mt + b[7] * t;
    return out;
  }
  function invert3(out, a) {
    var sqlen = squaredLength4(a);
    out[0] = -a[0] / sqlen;
    out[1] = -a[1] / sqlen;
    out[2] = -a[2] / sqlen;
    out[3] = a[3] / sqlen;
    out[4] = -a[4] / sqlen;
    out[5] = -a[5] / sqlen;
    out[6] = -a[6] / sqlen;
    out[7] = a[7] / sqlen;
    return out;
  }
  function conjugate2(out, a) {
    out[0] = -a[0];
    out[1] = -a[1];
    out[2] = -a[2];
    out[3] = a[3];
    out[4] = -a[4];
    out[5] = -a[5];
    out[6] = -a[6];
    out[7] = a[7];
    return out;
  }
  var length4 = length3;
  var len3 = length4;
  var squaredLength4 = squaredLength3;
  var sqrLen3 = squaredLength4;
  function normalize4(out, a) {
    var magnitude = squaredLength4(a);
    if (magnitude > 0) {
      magnitude = Math.sqrt(magnitude);
      var a0 = a[0] / magnitude;
      var a1 = a[1] / magnitude;
      var a2 = a[2] / magnitude;
      var a3 = a[3] / magnitude;
      var b0 = a[4];
      var b1 = a[5];
      var b2 = a[6];
      var b3 = a[7];
      var a_dot_b = a0 * b0 + a1 * b1 + a2 * b2 + a3 * b3;
      out[0] = a0;
      out[1] = a1;
      out[2] = a2;
      out[3] = a3;
      out[4] = (b0 - a0 * a_dot_b) / magnitude;
      out[5] = (b1 - a1 * a_dot_b) / magnitude;
      out[6] = (b2 - a2 * a_dot_b) / magnitude;
      out[7] = (b3 - a3 * a_dot_b) / magnitude;
    }
    return out;
  }
  function str4(a) {
    return "quat2(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ", " + a[4] + ", " + a[5] + ", " + a[6] + ", " + a[7] + ")";
  }
  function exactEquals5(a, b) {
    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7];
  }
  function equals5(a, b) {
    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3], a4 = a[4], a5 = a[5], a6 = a[6], a7 = a[7];
    var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3], b4 = b[4], b5 = b[5], b6 = b[6], b7 = b[7];
    return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= EPSILON * Math.max(1, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= EPSILON * Math.max(1, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= EPSILON * Math.max(1, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= EPSILON * Math.max(1, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= EPSILON * Math.max(1, Math.abs(a7), Math.abs(b7));
  }

  // node_modules/@wonderlandengine/components/dist/hit-test-location.js
  var __decorate3 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var HitTestLocation = class extends Component {
    tempScaling = new Float32Array(3);
    visible = false;
    xrHitTestSource = null;
    /** Reference space for creating the hit test when the session starts */
    xrReferenceSpace = null;
    /**
     * For maintaining backwards compatibility: Whether to scale the object to 0 and back.
     * @deprecated Use onHitLost and onHitFound instead.
     */
    scaleObject = true;
    /** Emits an event when the hit test switches from visible to invisible */
    onHitLost = new Emitter();
    /** Emits an event when the hit test switches from invisible to visible */
    onHitFound = new Emitter();
    onSessionStartCallback = null;
    onSessionEndCallback = null;
    start() {
      this.onSessionStartCallback = this.onXRSessionStart.bind(this);
      this.onSessionEndCallback = this.onXRSessionEnd.bind(this);
      if (this.scaleObject) {
        this.tempScaling.set(this.object.scalingLocal);
        this.object.scale([0, 0, 0]);
        this.onHitLost.add(() => {
          this.tempScaling.set(this.object.scalingLocal);
          this.object.scale([0, 0, 0]);
        });
        this.onHitFound.add(() => {
          this.object.scalingLocal.set(this.tempScaling);
          this.object.setDirty();
        });
      }
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this.onSessionStartCallback);
      this.engine.onXRSessionEnd.add(this.onSessionEndCallback);
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this.onSessionStartCallback);
      this.engine.onXRSessionEnd.remove(this.onSessionEndCallback);
    }
    update() {
      const wasVisible = this.visible;
      if (this.xrHitTestSource) {
        const frame = this.engine.xrFrame;
        if (!frame)
          return;
        let hitTestResults = frame.getHitTestResults(this.xrHitTestSource);
        if (hitTestResults.length > 0) {
          let pose = hitTestResults[0].getPose(this.engine.xr.currentReferenceSpace);
          this.visible = !!pose;
          if (pose) {
            setXRRigidTransformLocal(this.object, pose.transform);
          }
        } else {
          this.visible = false;
        }
      }
      if (this.visible != wasVisible) {
        (this.visible ? this.onHitFound : this.onHitLost).notify(this);
      }
    }
    getHitTestResults(frame = this.engine.xr?.frame ?? null) {
      if (!frame)
        return [];
      if (!this.xrHitTestSource)
        return [];
      return frame.getHitTestResults(this.xrHitTestSource);
    }
    onXRSessionStart(session) {
      if (session.requestHitTestSource === void 0) {
        console.error("hit-test-location: hit test feature not available. Deactivating component.");
        this.active = false;
        return;
      }
      session.requestHitTestSource({
        space: this.xrReferenceSpace ?? this.engine.xr.referenceSpaceForType("viewer")
      }).then((hitTestSource) => {
        this.xrHitTestSource = hitTestSource;
      }).catch(console.error);
    }
    onXRSessionEnd() {
      if (!this.xrHitTestSource)
        return;
      this.xrHitTestSource.cancel();
      this.xrHitTestSource = null;
    }
  };
  __publicField(HitTestLocation, "TypeName", "hit-test-location");
  __decorate3([
    property.bool(true)
  ], HitTestLocation.prototype, "scaleObject", void 0);

  // node_modules/@wonderlandengine/components/dist/cursor.js
  var __decorate4 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var tempVec2 = new Float32Array(3);
  var ZERO = [0, 0, 0];
  var CursorTargetEmitters = class {
    /** Emitter for events when the target is hovered */
    onHover = new Emitter();
    /** Emitter for events when the target is unhovered */
    onUnhover = new Emitter();
    /** Emitter for events when the target is clicked */
    onClick = new Emitter();
    /** Emitter for events when the cursor moves on the target */
    onMove = new Emitter();
    /** Emitter for events when the user pressed the select button on the target */
    onDown = new Emitter();
    /** Emitter for events when the user unpressed the select button on the target */
    onUp = new Emitter();
  };
  var Cursor = class extends Component {
    static onRegister(engine) {
      engine.registerComponent(HitTestLocation);
    }
    _collisionMask = 0;
    _onDeactivateCallbacks = [];
    _input = null;
    _origin = new Float32Array(3);
    _cursorObjScale = new Float32Array(3);
    _direction = new Float32Array(3);
    _projectionMatrix = new Float32Array(16);
    _viewComponent = null;
    _isDown = false;
    _lastIsDown = false;
    _arTouchDown = false;
    _lastPointerPos = new Float32Array(2);
    _lastCursorPosOnTarget = new Float32Array(3);
    _hitTestLocation = null;
    _hitTestObject = null;
    _onSessionStartCallback = null;
    /**
     * Whether the cursor (and cursorObject) is visible, i.e. pointing at an object
     * that matches the collision group
     */
    visible = true;
    /** Currently hovered object */
    hoveringObject = null;
    /** CursorTarget component of the currently hovered object */
    hoveringObjectTarget = null;
    /** Whether the cursor is hovering reality via hit-test */
    hoveringReality = false;
    /**
     * Global target lets you receive global cursor events on any object.
     */
    globalTarget = new CursorTargetEmitters();
    /**
     * Hit test target lets you receive cursor events for "reality", if
     * `useWebXRHitTest` is set to `true`.
     *
     * @example
     * ```js
     * cursor.hitTestTarget.onClick.add((hit, cursor) => {
     *     // User clicked on reality
     * });
     * ```
     */
    hitTestTarget = new CursorTargetEmitters();
    /** World position of the cursor */
    cursorPos = new Float32Array(3);
    /** Collision group for the ray cast. Only objects in this group will be affected by this cursor. */
    collisionGroup = 1;
    /** (optional) Object that visualizes the cursor's ray. */
    cursorRayObject = null;
    /** Axis along which to scale the `cursorRayObject`. */
    cursorRayScalingAxis = 2;
    /** (optional) Object that visualizes the cursor's hit location. */
    cursorObject = null;
    /** Handedness for VR cursors to accept trigger events only from respective controller. */
    handedness = 0;
    /** Mode for raycasting, whether to use PhysX or simple collision components */
    rayCastMode = 0;
    /** Maximum distance for the cursor's ray cast. */
    maxDistance = 100;
    /** Whether to set the CSS style of the mouse cursor on desktop */
    styleCursor = true;
    /**
     * Use WebXR hit-test if available.
     *
     * Attaches a hit-test-location component to the cursorObject, which will be used
     * by the cursor to send events to the hitTestTarget with HitTestResult.
     */
    useWebXRHitTest = false;
    _onViewportResize = () => {
      if (!this._viewComponent)
        return;
      mat4_exports.invert(this._projectionMatrix, this._viewComponent.projectionMatrix);
    };
    start() {
      this._collisionMask = 1 << this.collisionGroup;
      if (this.handedness == 0) {
        const inputComp = this.object.getComponent("input");
        if (!inputComp) {
          console.warn("cursor component on object", this.object.name, 'was configured with handedness "input component", but object has no input component.');
        } else {
          this.handedness = inputComp.handedness || "none";
          this._input = inputComp;
        }
      } else {
        this.handedness = ["left", "right", "none"][this.handedness - 1];
      }
      this._viewComponent = this.object.getComponent(ViewComponent);
      if (this.useWebXRHitTest) {
        this._hitTestObject = this.engine.scene.addObject(this.object);
        this._hitTestLocation = this._hitTestObject.addComponent(HitTestLocation, {
          scaleObject: false
        }) ?? null;
      }
      this._onSessionStartCallback = this.setupVREvents.bind(this);
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this._onSessionStartCallback);
      this.engine.onResize.add(this._onViewportResize);
      this._setCursorVisibility(true);
      if (this._viewComponent != null) {
        const canvas2 = this.engine.canvas;
        const onClick = this.onClick.bind(this);
        const onPointerMove = this.onPointerMove.bind(this);
        const onPointerDown = this.onPointerDown.bind(this);
        const onPointerUp = this.onPointerUp.bind(this);
        canvas2.addEventListener("click", onClick);
        canvas2.addEventListener("pointermove", onPointerMove);
        canvas2.addEventListener("pointerdown", onPointerDown);
        canvas2.addEventListener("pointerup", onPointerUp);
        this._onDeactivateCallbacks.push(() => {
          canvas2.removeEventListener("click", onClick);
          canvas2.removeEventListener("pointermove", onPointerMove);
          canvas2.removeEventListener("pointerdown", onPointerDown);
          canvas2.removeEventListener("pointerup", onPointerUp);
        });
      }
      this._onViewportResize();
    }
    _setCursorRayTransform(hitPosition) {
      if (!this.cursorRayObject)
        return;
      const dist2 = vec3_exports.dist(this._origin, hitPosition);
      this.cursorRayObject.setPositionLocal([0, 0, -dist2 / 2]);
      if (this.cursorRayScalingAxis != 4) {
        tempVec2.fill(1);
        tempVec2[this.cursorRayScalingAxis] = dist2 / 2;
        this.cursorRayObject.setScalingLocal(tempVec2);
      }
    }
    _setCursorVisibility(visible) {
      if (this.visible == visible)
        return;
      this.visible = visible;
      if (!this.cursorObject)
        return;
      if (visible) {
        this.cursorObject.setScalingWorld(this._cursorObjScale);
      } else {
        this.cursorObject.getScalingWorld(this._cursorObjScale);
        this.cursorObject.scaleLocal([0, 0, 0]);
      }
    }
    update() {
      if (this.engine.xr && this._arTouchDown && this._input && this.engine.xr.session.inputSources[0].handedness === "none" && this.engine.xr.session.inputSources[0].gamepad) {
        const p = this.engine.xr.session.inputSources[0].gamepad.axes;
        this._direction[0] = p[0];
        this._direction[1] = -p[1];
        this._direction[2] = -1;
        this.applyTransformAndProjectDirection();
      } else if (this.engine.xr && this._input && this._input.xrInputSource) {
        this._direction[0] = 0;
        this._direction[1] = 0;
        this._direction[2] = -1;
        this.applyTransformToDirection();
      } else if (this._viewComponent) {
        this.updateDirection();
      }
      this.rayCast(null, this.engine.xr?.frame);
      if (this.cursorObject) {
        if (this.hoveringObject && (this.cursorPos[0] != 0 || this.cursorPos[1] != 0 || this.cursorPos[2] != 0)) {
          this._setCursorVisibility(true);
          this.cursorObject.setPositionWorld(this.cursorPos);
          this._setCursorRayTransform(this.cursorPos);
        } else {
          this._setCursorVisibility(false);
        }
      }
    }
    /* Returns the hovered cursor target, if available */
    notify(event, originalEvent) {
      const target = this.hoveringObject;
      if (target) {
        const cursorTarget = this.hoveringObjectTarget;
        if (cursorTarget)
          cursorTarget[event].notify(target, this, originalEvent ?? void 0);
        this.globalTarget[event].notify(target, this, originalEvent ?? void 0);
      }
    }
    hoverBehaviour(rayHit, hitTestResult, doClick, originalEvent) {
      const hit = !this.hoveringReality && rayHit.hitCount > 0 ? rayHit.objects[0] : null;
      if (hit) {
        if (!this.hoveringObject || !this.hoveringObject.equals(hit)) {
          if (this.hoveringObject) {
            this.notify("onUnhover", originalEvent);
          }
          this.hoveringObject = hit;
          this.hoveringObjectTarget = this.hoveringObject.getComponent(CursorTarget);
          if (this.styleCursor)
            this.engine.canvas.style.cursor = "pointer";
          this.notify("onHover", originalEvent);
        }
      } else if (this.hoveringObject) {
        this.notify("onUnhover", originalEvent);
        this.hoveringObject = null;
        this.hoveringObjectTarget = null;
        if (this.styleCursor)
          this.engine.canvas.style.cursor = "default";
      }
      if (this.hoveringObject) {
        if (this._isDown !== this._lastIsDown) {
          this.notify(this._isDown ? "onDown" : "onUp", originalEvent);
        }
        if (doClick)
          this.notify("onClick", originalEvent);
      } else if (this.hoveringReality) {
        if (this._isDown !== this._lastIsDown) {
          (this._isDown ? this.hitTestTarget.onDown : this.hitTestTarget.onUp).notify(hitTestResult, this, originalEvent ?? void 0);
        }
        if (doClick)
          this.hitTestTarget.onClick.notify(hitTestResult, this, originalEvent ?? void 0);
      }
      if (hit) {
        if (this.hoveringObject) {
          this.hoveringObject.transformPointInverseWorld(tempVec2, this.cursorPos);
        } else {
          tempVec2.set(this.cursorPos);
        }
        if (!vec3_exports.equals(this._lastCursorPosOnTarget, tempVec2)) {
          this.notify("onMove", originalEvent);
          this._lastCursorPosOnTarget.set(tempVec2);
        }
      } else if (this.hoveringReality) {
        if (!vec3_exports.equals(this._lastCursorPosOnTarget, this.cursorPos)) {
          this.hitTestTarget.onMove.notify(hitTestResult, this, originalEvent ?? void 0);
          this._lastCursorPosOnTarget.set(this.cursorPos);
        }
      } else {
        this._lastCursorPosOnTarget.set(this.cursorPos);
      }
      this._lastIsDown = this._isDown;
    }
    /**
     * Setup event listeners on session object
     * @param s WebXR session
     *
     * Sets up 'select' and 'end' events.
     */
    setupVREvents(s) {
      if (!s)
        console.error("setupVREvents called without a valid session");
      if (!this.active)
        return;
      const onSelect = this.onSelect.bind(this);
      s.addEventListener("select", onSelect);
      const onSelectStart = this.onSelectStart.bind(this);
      s.addEventListener("selectstart", onSelectStart);
      const onSelectEnd = this.onSelectEnd.bind(this);
      s.addEventListener("selectend", onSelectEnd);
      this._onDeactivateCallbacks.push(() => {
        if (!this.engine.xr)
          return;
        s.removeEventListener("select", onSelect);
        s.removeEventListener("selectstart", onSelectStart);
        s.removeEventListener("selectend", onSelectEnd);
      });
      this._onViewportResize();
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this._onSessionStartCallback);
      this.engine.onResize.remove(this._onViewportResize);
      this._setCursorVisibility(false);
      if (this.hoveringObject)
        this.notify("onUnhover", null);
      if (this.cursorRayObject)
        this.cursorRayObject.setScalingLocal(ZERO);
      for (const f of this._onDeactivateCallbacks)
        f();
      this._onDeactivateCallbacks.length = 0;
    }
    onDestroy() {
      this._hitTestObject?.destroy();
    }
    /** 'select' event listener */
    onSelect(e) {
      if (e.inputSource.handedness != this.handedness)
        return;
      this.rayCast(e, e.frame, true);
    }
    /** 'selectstart' event listener */
    onSelectStart(e) {
      this._arTouchDown = true;
      if (e.inputSource.handedness == this.handedness) {
        this._isDown = true;
        this.rayCast(e, e.frame);
      }
    }
    /** 'selectend' event listener */
    onSelectEnd(e) {
      this._arTouchDown = false;
      if (e.inputSource.handedness == this.handedness) {
        this._isDown = false;
        this.rayCast(e, e.frame);
      }
    }
    /** 'pointermove' event listener */
    onPointerMove(e) {
      if (!e.isPrimary)
        return;
      this.updateMousePos(e);
      this.rayCast(e, null);
    }
    /** 'click' event listener */
    onClick(e) {
      this.updateMousePos(e);
      this.rayCast(e, null, true);
    }
    /** 'pointerdown' event listener */
    onPointerDown(e) {
      if (!e.isPrimary || e.button !== 0)
        return;
      this.updateMousePos(e);
      this._isDown = true;
      this.rayCast(e);
    }
    /** 'pointerup' event listener */
    onPointerUp(e) {
      if (!e.isPrimary || e.button !== 0)
        return;
      this.updateMousePos(e);
      this._isDown = false;
      this.rayCast(e);
    }
    /**
     * Update mouse position in non-VR mode and raycast for new position
     * @returns @ref RayHit for new position.
     */
    updateMousePos(e) {
      this._lastPointerPos[0] = e.clientX;
      this._lastPointerPos[1] = e.clientY;
      this.updateDirection();
    }
    updateDirection() {
      const bounds = this.engine.canvas.getBoundingClientRect();
      const left = this._lastPointerPos[0] / bounds.width;
      const top = this._lastPointerPos[1] / bounds.height;
      this._direction[0] = left * 2 - 1;
      this._direction[1] = -top * 2 + 1;
      this._direction[2] = -1;
      this.applyTransformAndProjectDirection();
    }
    applyTransformAndProjectDirection() {
      vec3_exports.transformMat4(this._direction, this._direction, this._projectionMatrix);
      vec3_exports.normalize(this._direction, this._direction);
      this.applyTransformToDirection();
    }
    applyTransformToDirection() {
      this.object.transformVectorWorld(this._direction, this._direction);
      this.object.getPositionWorld(this._origin);
    }
    rayCast(originalEvent, frame = null, doClick = false) {
      const rayHit = this.rayCastMode == 0 ? this.engine.scene.rayCast(this._origin, this._direction, this._collisionMask) : this.engine.physics.rayCast(this._origin, this._direction, this._collisionMask, this.maxDistance);
      let hitResultDistance = Infinity;
      let hitTestResult = null;
      if (this._hitTestLocation?.visible) {
        this._hitTestObject.getPositionWorld(this.cursorPos);
        hitResultDistance = vec3_exports.distance(this.object.getPositionWorld(tempVec2), this.cursorPos);
        hitTestResult = this._hitTestLocation?.getHitTestResults(frame)[0];
      }
      let hoveringReality = false;
      if (rayHit.hitCount > 0) {
        const d = rayHit.distances[0];
        if (hitResultDistance >= d) {
          this.cursorPos.set(rayHit.locations[0]);
        } else {
          hoveringReality = true;
        }
      } else if (hitResultDistance < Infinity) {
      } else {
        this.cursorPos.fill(0);
      }
      if (hoveringReality && !this.hoveringReality) {
        this.hitTestTarget.onHover.notify(hitTestResult, this);
      } else if (!hoveringReality && this.hoveringReality) {
        this.hitTestTarget.onUnhover.notify(hitTestResult, this);
      }
      this.hoveringReality = hoveringReality;
      this.hoverBehaviour(rayHit, hitTestResult, doClick, originalEvent);
      return rayHit;
    }
  };
  __publicField(Cursor, "TypeName", "cursor");
  /* Dependencies is deprecated, but we keep it here for compatibility
   * with 1.0.0-rc2 until 1.0.0 is released */
  __publicField(Cursor, "Dependencies", [HitTestLocation]);
  __decorate4([
    property.int(1)
  ], Cursor.prototype, "collisionGroup", void 0);
  __decorate4([
    property.object()
  ], Cursor.prototype, "cursorRayObject", void 0);
  __decorate4([
    property.enum(["x", "y", "z", "none"], "z")
  ], Cursor.prototype, "cursorRayScalingAxis", void 0);
  __decorate4([
    property.object()
  ], Cursor.prototype, "cursorObject", void 0);
  __decorate4([
    property.enum(["input component", "left", "right", "none"], "input component")
  ], Cursor.prototype, "handedness", void 0);
  __decorate4([
    property.enum(["collision", "physx"], "collision")
  ], Cursor.prototype, "rayCastMode", void 0);
  __decorate4([
    property.float(100)
  ], Cursor.prototype, "maxDistance", void 0);
  __decorate4([
    property.bool(true)
  ], Cursor.prototype, "styleCursor", void 0);
  __decorate4([
    property.bool(false)
  ], Cursor.prototype, "useWebXRHitTest", void 0);

  // node_modules/@wonderlandengine/components/dist/debug-object.js
  var __decorate5 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var DebugObject = class extends Component {
    /** A second object to print the name of */
    obj = null;
    start() {
      let origin = new Float32Array(3);
      quat2_exports.getTranslation(origin, this.object.transformWorld);
      console.log("Debug object:", this.object.name);
      console.log("Other object:", this.obj?.name);
      console.log("	translation", origin);
      console.log("	transformWorld", this.object.transformWorld);
      console.log("	transformLocal", this.object.transformLocal);
    }
  };
  __publicField(DebugObject, "TypeName", "debug-object");
  __decorate5([
    property.object()
  ], DebugObject.prototype, "obj", void 0);

  // node_modules/@wonderlandengine/components/dist/device-orientation-look.js
  function quatFromEulerYXZ(out, x, y, z) {
    const c1 = Math.cos(x / 2);
    const c2 = Math.cos(y / 2);
    const c3 = Math.cos(z / 2);
    const s1 = Math.sin(x / 2);
    const s2 = Math.sin(y / 2);
    const s3 = Math.sin(z / 2);
    out[0] = s1 * c2 * c3 + c1 * s2 * s3;
    out[1] = c1 * s2 * c3 - s1 * c2 * s3;
    out[2] = c1 * c2 * s3 - s1 * s2 * c3;
    out[3] = c1 * c2 * c3 + s1 * s2 * s3;
  }
  var DeviceOrientationLook = class extends Component {
    start() {
      this.rotationX = 0;
      this.rotationY = 0;
      this.lastClientX = -1;
      this.lastClientY = -1;
    }
    init() {
      this.deviceOrientation = [0, 0, 0, 1];
      this.screenOrientation = window.innerHeight > window.innerWidth ? 0 : 90;
      this._origin = [0, 0, 0];
      window.addEventListener("deviceorientation", function(e) {
        let alpha = e.alpha || 0;
        let beta = e.beta || 0;
        let gamma = e.gamma || 0;
        const toRad = Math.PI / 180;
        quatFromEulerYXZ(this.deviceOrientation, beta * toRad, alpha * toRad, -gamma * toRad);
      }.bind(this));
      window.addEventListener("orientationchange", function(e) {
        this.screenOrientation = window.orientation || 0;
      }.bind(this), false);
    }
    update() {
      if (this.engine.xr)
        return;
      this.object.getTranslationLocal(this._origin);
      this.object.resetTransform();
      if (this.screenOrientation != 0) {
        this.object.rotateAxisAngleDeg([0, 0, -1], this.screenOrientation);
      }
      this.object.rotate([-Math.sqrt(0.5), 0, 0, Math.sqrt(0.5)]);
      this.object.rotate(this.deviceOrientation);
      this.object.translate(this._origin);
    }
  };
  __publicField(DeviceOrientationLook, "TypeName", "device-orientation-look");
  __publicField(DeviceOrientationLook, "Properties", {});

  // node_modules/@wonderlandengine/components/dist/finger-cursor.js
  var FingerCursor = class extends Component {
    init() {
      this.lastTarget = null;
    }
    start() {
      this.tip = this.object.getComponent("collision");
    }
    update() {
      const overlaps = this.tip.queryOverlaps();
      let overlapFound = null;
      for (let i = 0; i < overlaps.length; ++i) {
        const o = overlaps[i].object;
        const target = o.getComponent("cursor-target");
        if (target) {
          if (!target.equals(this.lastTarget)) {
            target.onHover(o, this);
            target.onClick(o, this);
          }
          overlapFound = target;
          break;
        }
      }
      if (!overlapFound) {
        if (this.lastTarget)
          this.lastTarget.onUnhover(this.lastTarget.object, this);
        this.lastTarget = null;
        return;
      } else {
        this.lastTarget = overlapFound;
      }
    }
  };
  __publicField(FingerCursor, "TypeName", "finger-cursor");
  __publicField(FingerCursor, "Properties", {});

  // node_modules/@wonderlandengine/components/dist/fixed-foveation.js
  var FixedFoveation = class extends Component {
    start() {
      this.onSessionStartCallback = this.setFixedFoveation.bind(this);
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this.onSessionStartCallback);
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this.onSessionStartCallback);
    }
    setFixedFoveation() {
      this.engine.xr.baseLayer.fixedFoveation = this.fixedFoveation;
    }
  };
  __publicField(FixedFoveation, "TypeName", "fixed-foveation");
  __publicField(FixedFoveation, "Properties", {
    /** Amount to apply from 0 (none) to 1 (full) */
    fixedFoveation: { type: Type.Float, default: 0.5 }
  });

  // node_modules/@wonderlandengine/components/dist/hand-tracking.js
  var __decorate6 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var ORDERED_JOINTS = [
    "wrist",
    "thumb-metacarpal",
    "thumb-phalanx-proximal",
    "thumb-phalanx-distal",
    "thumb-tip",
    "index-finger-metacarpal",
    "index-finger-phalanx-proximal",
    "index-finger-phalanx-intermediate",
    "index-finger-phalanx-distal",
    "index-finger-tip",
    "middle-finger-metacarpal",
    "middle-finger-phalanx-proximal",
    "middle-finger-phalanx-intermediate",
    "middle-finger-phalanx-distal",
    "middle-finger-tip",
    "ring-finger-metacarpal",
    "ring-finger-phalanx-proximal",
    "ring-finger-phalanx-intermediate",
    "ring-finger-phalanx-distal",
    "ring-finger-tip",
    "pinky-finger-metacarpal",
    "pinky-finger-phalanx-proximal",
    "pinky-finger-phalanx-intermediate",
    "pinky-finger-phalanx-distal",
    "pinky-finger-tip"
  ];
  var invTranslation = vec3_exports.create();
  var invRotation = quat_exports.create();
  var tempVec0 = vec3_exports.create();
  var tempVec1 = vec3_exports.create();
  var HandTracking = class extends Component {
    /** Handedness determining whether to receive tracking input from right or left hand */
    handedness = 0;
    /** (optional) Mesh to use to visualize joints */
    jointMesh = null;
    /** Material to use for display. Applied to either the spawned skinned mesh or the joint spheres. */
    jointMaterial = null;
    /** (optional) Skin to apply tracked joint poses to. If not present,
     * joint spheres will be used for display instead. */
    handSkin = null;
    /** Deactivate children if no pose was tracked */
    deactivateChildrenWithoutPose = true;
    /** Controller objects to activate including children if no pose is available */
    controllerToDeactivate = null;
    init() {
      this.handedness = ["left", "right"][this.handedness];
    }
    joints = {};
    session = null;
    /* Whether last update had a hand pose */
    hasPose = false;
    _childrenActive = true;
    start() {
      if (!("XRHand" in window)) {
        console.warn("WebXR Hand Tracking not supported by this browser.");
        this.active = false;
        return;
      }
      if (this.handSkin) {
        const skin = this.handSkin;
        const jointIds = skin.jointIds;
        this.joints[ORDERED_JOINTS[0]] = this.engine.wrapObject(jointIds[0]);
        for (let j = 0; j < jointIds.length; ++j) {
          const joint = this.engine.wrapObject(jointIds[j]);
          this.joints[joint.name] = joint;
        }
        return;
      }
      const jointObjects = this.engine.scene.addObjects(ORDERED_JOINTS.length, this.object, ORDERED_JOINTS.length);
      for (let j = 0; j < ORDERED_JOINTS.length; ++j) {
        const joint = jointObjects[j];
        joint.addComponent(MeshComponent, {
          mesh: this.jointMesh,
          material: this.jointMaterial
        });
        this.joints[ORDERED_JOINTS[j]] = joint;
        joint.name = ORDERED_JOINTS[j];
      }
    }
    update(dt) {
      if (!this.engine.xr)
        return;
      this.hasPose = false;
      if (this.engine.xr.session.inputSources) {
        for (let i = 0; i < this.engine.xr.session.inputSources.length; ++i) {
          const inputSource = this.engine.xr.session.inputSources[i];
          if (!inputSource?.hand || inputSource?.handedness != this.handedness)
            continue;
          const wristSpace = inputSource.hand.get("wrist");
          if (wristSpace) {
            const p = this.engine.xr.frame.getJointPose(wristSpace, this.engine.xr.currentReferenceSpace);
            if (p) {
              setXRRigidTransformLocal(this.object, p.transform);
            }
          }
          this.object.getRotationLocal(invRotation);
          quat_exports.conjugate(invRotation, invRotation);
          this.object.getPositionLocal(invTranslation);
          this.joints["wrist"].resetTransform();
          for (let j = 0; j < ORDERED_JOINTS.length; ++j) {
            const jointName = ORDERED_JOINTS[j];
            const joint = this.joints[jointName];
            if (!joint)
              continue;
            let jointPose = null;
            const jointSpace = inputSource.hand.get(jointName);
            if (jointSpace) {
              jointPose = this.engine.xr.frame.getJointPose(jointSpace, this.engine.xr.currentReferenceSpace);
            }
            if (jointPose) {
              this.hasPose = true;
              joint.resetPositionRotation();
              joint.translateLocal([
                jointPose.transform.position.x - invTranslation[0],
                jointPose.transform.position.y - invTranslation[1],
                jointPose.transform.position.z - invTranslation[2]
              ]);
              joint.rotateLocal(invRotation);
              joint.rotateObject([
                jointPose.transform.orientation.x,
                jointPose.transform.orientation.y,
                jointPose.transform.orientation.z,
                jointPose.transform.orientation.w
              ]);
              if (!this.handSkin) {
                const r = jointPose.radius || 7e-3;
                joint.setScalingLocal([r, r, r]);
              }
            }
          }
        }
      }
      if (!this.hasPose && this._childrenActive) {
        this._childrenActive = false;
        if (this.deactivateChildrenWithoutPose) {
          this.setChildrenActive(false);
        }
        if (this.controllerToDeactivate) {
          this.controllerToDeactivate.active = true;
          this.setChildrenActive(true, this.controllerToDeactivate);
        }
      } else if (this.hasPose && !this._childrenActive) {
        this._childrenActive = true;
        if (this.deactivateChildrenWithoutPose) {
          this.setChildrenActive(true);
        }
        if (this.controllerToDeactivate) {
          this.controllerToDeactivate.active = false;
          this.setChildrenActive(false, this.controllerToDeactivate);
        }
      }
    }
    setChildrenActive(active, object) {
      object = object || this.object;
      const children = object.children;
      for (const o of children) {
        o.active = active;
        this.setChildrenActive(active, o);
      }
    }
    isGrabbing() {
      this.joints["index-finger-tip"].getPositionLocal(tempVec0);
      this.joints["thumb-tip"].getPositionLocal(tempVec1);
      return vec3_exports.sqrDist(tempVec0, tempVec1) < 1e-3;
    }
  };
  __publicField(HandTracking, "TypeName", "hand-tracking");
  __decorate6([
    property.enum(["left", "right"])
  ], HandTracking.prototype, "handedness", void 0);
  __decorate6([
    property.mesh()
  ], HandTracking.prototype, "jointMesh", void 0);
  __decorate6([
    property.material()
  ], HandTracking.prototype, "jointMaterial", void 0);
  __decorate6([
    property.skin()
  ], HandTracking.prototype, "handSkin", void 0);
  __decorate6([
    property.bool(true)
  ], HandTracking.prototype, "deactivateChildrenWithoutPose", void 0);
  __decorate6([
    property.object()
  ], HandTracking.prototype, "controllerToDeactivate", void 0);

  // node_modules/@wonderlandengine/components/dist/howler-audio-listener.js
  var import_howler = __toESM(require_howler(), 1);
  var HowlerAudioListener = class extends Component {
    init() {
      this.origin = new Float32Array(3);
      this.fwd = new Float32Array(3);
      this.up = new Float32Array(3);
    }
    update() {
      if (!this.spatial)
        return;
      this.object.getTranslationWorld(this.origin);
      this.object.getForward(this.fwd);
      this.object.getUp(this.up);
      Howler.pos(this.origin[0], this.origin[1], this.origin[2]);
      Howler.orientation(this.fwd[0], this.fwd[1], this.fwd[2], this.up[0], this.up[1], this.up[2]);
    }
  };
  __publicField(HowlerAudioListener, "TypeName", "howler-audio-listener");
  __publicField(HowlerAudioListener, "Properties", {
    /** Whether audio should be spatialized/positional. */
    spatial: { type: Type.Bool, default: true }
  });

  // node_modules/@wonderlandengine/components/dist/howler-audio-source.js
  var import_howler2 = __toESM(require_howler(), 1);
  var HowlerAudioSource = class extends Component {
    start() {
      this.audio = new Howl({
        src: [this.src],
        loop: this.loop,
        volume: this.volume,
        autoplay: this.autoplay
      });
      this.lastPlayedAudioId = null;
      this.origin = new Float32Array(3);
      this.lastOrigin = new Float32Array(3);
      if (this.spatial && this.autoplay) {
        this.updatePosition();
        this.play();
      }
    }
    update() {
      if (!this.spatial || !this.lastPlayedAudioId)
        return;
      this.object.getTranslationWorld(this.origin);
      if (Math.abs(this.lastOrigin[0] - this.origin[0]) > 5e-3 || Math.abs(this.lastOrigin[1] - this.origin[1]) > 5e-3 || Math.abs(this.lastOrigin[2] - this.origin[2]) > 5e-3) {
        this.updatePosition();
      }
    }
    updatePosition() {
      this.audio.pos(this.origin[0], this.origin[1], this.origin[2], this.lastPlayedAudioId);
      this.lastOrigin.set(this.origin);
    }
    play() {
      if (this.lastPlayedAudioId)
        this.audio.stop(this.lastPlayedAudioId);
      this.lastPlayedAudioId = this.audio.play();
      if (this.spatial)
        this.updatePosition();
    }
    stop() {
      if (!this.lastPlayedAudioId)
        return;
      this.audio.stop(this.lastPlayedAudioId);
      this.lastPlayedAudioId = null;
    }
    onDeactivate() {
      this.stop();
    }
  };
  __publicField(HowlerAudioSource, "TypeName", "howler-audio-source");
  __publicField(HowlerAudioSource, "Properties", {
    /** Volume */
    volume: { type: Type.Float, default: 1 },
    /** Whether audio should be spatialized/positional */
    spatial: { type: Type.Bool, default: true },
    /** Whether to loop the sound */
    loop: { type: Type.Bool, default: false },
    /** Whether to start playing automatically */
    autoplay: { type: Type.Bool, default: false },
    /** URL to a sound file to play */
    src: { type: Type.String, default: "" }
  });

  // node_modules/@wonderlandengine/components/dist/utils/utils.js
  function setFirstMaterialTexture(mat, texture, customTextureProperty) {
    if (customTextureProperty !== "auto") {
      mat[customTextureProperty] = texture;
      return true;
    }
    const shader = mat.shader;
    if (shader === "Flat Opaque Textured") {
      mat.flatTexture = texture;
      return true;
    } else if (shader === "Phong Opaque Textured" || shader === "Foliage" || shader === "Phong Normalmapped" || shader === "Phong Lightmapped") {
      mat.diffuseTexture = texture;
      return true;
    } else if (shader === "Particle") {
      mat.mainTexture = texture;
      return true;
    } else if (shader === "DistanceFieldVector") {
      mat.vectorTexture = texture;
      return true;
    } else if (shader === "Background" || shader === "Sky") {
      mat.texture = texture;
      return true;
    } else if (shader === "Physical Opaque Textured") {
      mat.albedoTexture = texture;
      return true;
    }
    return false;
  }
  function deg2rad(value) {
    return value * Math.PI / 180;
  }
  function rad2deg(value) {
    return value * 180 / Math.PI;
  }

  // node_modules/@wonderlandengine/components/dist/image-texture.js
  var ImageTexture = class extends Component {
    start() {
      if (!this.material) {
        throw Error("image-texture: material property not set");
      }
      this.engine.textures.load(this.url, "anonymous").then((texture) => {
        const mat = this.material;
        if (!setFirstMaterialTexture(mat, texture, this.textureProperty)) {
          console.error("Shader", mat.shader, "not supported by image-texture");
        }
      }).catch(console.err);
    }
  };
  __publicField(ImageTexture, "TypeName", "image-texture");
  __publicField(ImageTexture, "Properties", {
    /** URL to download the image from */
    url: Property.string(),
    /** Material to apply the video texture to */
    material: Property.material(),
    /** Name of the texture property to set */
    textureProperty: Property.string("auto")
  });

  // node_modules/@wonderlandengine/components/dist/mouse-look.js
  var __decorate7 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var preventDefault = (e) => {
    e.preventDefault();
  };
  var MouseLookComponent = class extends Component {
    /** Mouse look sensitivity */
    sensitity = 0.25;
    /** Require a mouse button to be pressed to control view.
     * Otherwise view will allways follow mouse movement */
    requireMouseDown = true;
    /** If "moveOnClick" is enabled, mouse button which should
     * be held down to control view */
    mouseButtonIndex = 0;
    /** Enables pointer lock on "mousedown" event on canvas */
    pointerLockOnClick = false;
    currentRotationY = 0;
    currentRotationX = 0;
    origin = new Float32Array(3);
    parentOrigin = new Float32Array(3);
    rotationX = 0;
    rotationY = 0;
    mouseDown = false;
    onActivate() {
      document.addEventListener("mousemove", this.onMouseMove);
      const canvas2 = this.engine.canvas;
      if (this.pointerLockOnClick) {
        canvas2.addEventListener("mousedown", this.requestPointerLock);
      }
      if (this.requireMouseDown) {
        if (this.mouseButtonIndex === 2) {
          canvas2.addEventListener("contextmenu", preventDefault, false);
        }
        canvas2.addEventListener("mousedown", this.onMouseDown);
        canvas2.addEventListener("mouseup", this.onMouseUp);
      }
    }
    onDeactivate() {
      document.removeEventListener("mousemove", this.onMouseMove);
      const canvas2 = this.engine.canvas;
      if (this.pointerLockOnClick) {
        canvas2.removeEventListener("mousedown", this.requestPointerLock);
      }
      if (this.requireMouseDown) {
        if (this.mouseButtonIndex === 2) {
          canvas2.removeEventListener("contextmenu", preventDefault, false);
        }
        canvas2.removeEventListener("mousedown", this.onMouseDown);
        canvas2.removeEventListener("mouseup", this.onMouseUp);
      }
    }
    requestPointerLock = () => {
      const canvas2 = this.engine.canvas;
      canvas2.requestPointerLock = canvas2.requestPointerLock || canvas2.mozRequestPointerLock || canvas2.webkitRequestPointerLock;
      canvas2.requestPointerLock();
    };
    onMouseDown = (e) => {
      if (e.button === this.mouseButtonIndex) {
        this.mouseDown = true;
        document.body.style.cursor = "grabbing";
        if (e.button === 1) {
          e.preventDefault();
          return false;
        }
      }
    };
    onMouseUp = (e) => {
      if (e.button === this.mouseButtonIndex) {
        this.mouseDown = false;
        document.body.style.cursor = "initial";
      }
    };
    onMouseMove = (e) => {
      if (this.active && (this.mouseDown || !this.requireMouseDown)) {
        this.rotationY = -this.sensitity * e.movementX / 100;
        this.rotationX = -this.sensitity * e.movementY / 100;
        this.currentRotationX += this.rotationX;
        this.currentRotationY += this.rotationY;
        this.currentRotationX = Math.min(1.507, this.currentRotationX);
        this.currentRotationX = Math.max(-1.507, this.currentRotationX);
        this.object.getPositionWorld(this.origin);
        const parent = this.object.parent;
        if (parent) {
          parent.getPositionWorld(this.parentOrigin);
          vec3_exports.sub(this.origin, this.origin, this.parentOrigin);
        }
        this.object.resetPositionRotation();
        this.object.rotateAxisAngleRadLocal([1, 0, 0], this.currentRotationX);
        this.object.rotateAxisAngleRadLocal([0, 1, 0], this.currentRotationY);
        this.object.translateLocal(this.origin);
      }
    };
  };
  __publicField(MouseLookComponent, "TypeName", "mouse-look");
  __decorate7([
    property.float(0.25)
  ], MouseLookComponent.prototype, "sensitity", void 0);
  __decorate7([
    property.bool(true)
  ], MouseLookComponent.prototype, "requireMouseDown", void 0);
  __decorate7([
    property.int()
  ], MouseLookComponent.prototype, "mouseButtonIndex", void 0);
  __decorate7([
    property.bool(false)
  ], MouseLookComponent.prototype, "pointerLockOnClick", void 0);

  // node_modules/@wonderlandengine/components/dist/player-height.js
  var __decorate8 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var PlayerHeight = class extends Component {
    height = 1.75;
    onSessionStartCallback;
    onSessionEndCallback;
    start() {
      this.object.resetPositionRotation();
      this.object.translateLocal([0, this.height, 0]);
      this.onSessionStartCallback = this.onXRSessionStart.bind(this);
      this.onSessionEndCallback = this.onXRSessionEnd.bind(this);
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this.onSessionStartCallback);
      this.engine.onXRSessionEnd.add(this.onSessionEndCallback);
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this.onSessionStartCallback);
      this.engine.onXRSessionEnd.remove(this.onSessionEndCallback);
    }
    onXRSessionStart() {
      const type = this.engine.xr?.currentReferenceSpaceType;
      if (type !== "local" && type !== "viewer") {
        this.object.resetPositionRotation();
      }
    }
    onXRSessionEnd() {
      const type = this.engine.xr?.currentReferenceSpaceType;
      if (type !== "local" && type !== "viewer") {
        this.object.resetPositionRotation();
        this.object.translateLocal([0, this.height, 0]);
      }
    }
  };
  __publicField(PlayerHeight, "TypeName", "player-height");
  __decorate8([
    property.float(1.75)
  ], PlayerHeight.prototype, "height", void 0);

  // node_modules/@wonderlandengine/components/dist/target-framerate.js
  var TargetFramerate = class extends Component {
    start() {
      this.onSessionStartCallback = this.setTargetFramerate.bind(this);
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this.onSessionStartCallback);
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this.onSessionStartCallback);
    }
    setTargetFramerate(s) {
      if (s.supportedFrameRates && s.updateTargetFrameRate) {
        const a = this.engine.xr.session.supportedFrameRates;
        a.sort((a2, b) => Math.abs(a2 - this.framerate) - Math.abs(b - this.framerate));
        this.engine.xr.session.updateTargetFrameRate(a[0]);
      }
    }
  };
  __publicField(TargetFramerate, "TypeName", "target-framerate");
  __publicField(TargetFramerate, "Properties", {
    framerate: { type: Type.Float, default: 90 }
  });

  // node_modules/@wonderlandengine/components/dist/teleport.js
  var TeleportComponent = class extends Component {
    init() {
      this._prevThumbstickAxis = new Float32Array(2);
      this._tempVec = new Float32Array(3);
      this._tempVec0 = new Float32Array(3);
      this._currentIndicatorRotation = 0;
      this.input = this.object.getComponent("input");
      if (!this.input) {
        console.error(this.object.name, "generic-teleport-component.js: input component is required on the object");
        return;
      }
      if (!this.teleportIndicatorMeshObject) {
        console.error(this.object.name, "generic-teleport-component.js: Teleport indicator mesh is missing");
        return;
      }
      if (!this.camRoot) {
        console.error(this.object.name, "generic-teleport-component.js: camRoot not set");
        return;
      }
      this.isIndicating = false;
      this.indicatorHidden = true;
      this.hitSpot = new Float32Array(3);
      this._hasHit = false;
      this._extraRotation = 0;
      this._currentStickAxes = new Float32Array(2);
    }
    start() {
      if (this.cam) {
        this.isMouseIndicating = false;
        canvas.addEventListener("mousedown", this.onMouseDown.bind(this));
        canvas.addEventListener("mouseup", this.onMouseUp.bind(this));
      }
      if (this.handedness == 0) {
        const inputComp = this.object.getComponent("input");
        if (!inputComp) {
          console.warn("teleport component on object", this.object.name, 'was configured with handedness "input component", but object has no input component.');
        } else {
          this.handedness = inputComp.handedness;
          this.input = inputComp;
        }
      } else {
        this.handedness = ["left", "right"][this.handedness - 1];
      }
      this.onSessionStartCallback = this.setupVREvents.bind(this);
      this.teleportIndicatorMeshObject.active = false;
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this.onSessionStartCallback);
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this.onSessionStartCallback);
    }
    /* Get current camera Y rotation */
    _getCamRotation() {
      this.eyeLeft.getForward(this._tempVec);
      this._tempVec[1] = 0;
      vec3_exports.normalize(this._tempVec, this._tempVec);
      return Math.atan2(this._tempVec[0], this._tempVec[2]);
    }
    update() {
      let inputLength = 0;
      if (this.gamepad && this.gamepad.axes) {
        this._currentStickAxes[0] = this.gamepad.axes[2];
        this._currentStickAxes[1] = this.gamepad.axes[3];
        inputLength = Math.abs(this._currentStickAxes[0]) + Math.abs(this._currentStickAxes[1]);
      }
      if (!this.isIndicating && this._prevThumbstickAxis[1] >= this.thumbstickActivationThreshhold && this._currentStickAxes[1] < this.thumbstickActivationThreshhold) {
        this.isIndicating = true;
      } else if (this.isIndicating && inputLength < this.thumbstickDeactivationThreshhold) {
        this.isIndicating = false;
        this.teleportIndicatorMeshObject.active = false;
        if (this._hasHit) {
          this._teleportPlayer(this.hitSpot, this._extraRotation);
        }
      }
      if (this.isIndicating && this.teleportIndicatorMeshObject && this.input) {
        const origin = this._tempVec0;
        this.object.getPositionWorld(origin);
        const direction2 = this.object.getForwardWorld(this._tempVec);
        let rayHit = this.rayHit = this.rayCastMode == 0 ? this.engine.scene.rayCast(origin, direction2, 1 << this.floorGroup) : this.engine.physics.rayCast(origin, direction2, 1 << this.floorGroup, this.maxDistance);
        if (rayHit.hitCount > 0) {
          this.indicatorHidden = false;
          this._extraRotation = Math.PI + Math.atan2(this._currentStickAxes[0], this._currentStickAxes[1]);
          this._currentIndicatorRotation = this._getCamRotation() + (this._extraRotation - Math.PI);
          this.teleportIndicatorMeshObject.resetPositionRotation();
          this.teleportIndicatorMeshObject.rotateAxisAngleRad([0, 1, 0], this._currentIndicatorRotation);
          this.teleportIndicatorMeshObject.translate(rayHit.locations[0]);
          this.teleportIndicatorMeshObject.translate([
            0,
            this.indicatorYOffset,
            0
          ]);
          this.teleportIndicatorMeshObject.active = true;
          this.hitSpot.set(rayHit.locations[0]);
          this._hasHit = true;
        } else {
          if (!this.indicatorHidden) {
            this.teleportIndicatorMeshObject.active = false;
            this.indicatorHidden = true;
          }
          this._hasHit = false;
        }
      } else if (this.teleportIndicatorMeshObject && this.isMouseIndicating) {
        this.onMousePressed();
      }
      this._prevThumbstickAxis.set(this._currentStickAxes);
    }
    setupVREvents(s) {
      this.session = s;
      s.addEventListener("end", function() {
        this.gamepad = null;
        this.session = null;
      }.bind(this));
      if (s.inputSources && s.inputSources.length) {
        for (let i = 0; i < s.inputSources.length; i++) {
          let inputSource = s.inputSources[i];
          if (inputSource.handedness == this.handedness) {
            this.gamepad = inputSource.gamepad;
          }
        }
      }
      s.addEventListener("inputsourceschange", function(e) {
        if (e.added && e.added.length) {
          for (let i = 0; i < e.added.length; i++) {
            let inputSource = e.added[i];
            if (inputSource.handedness == this.handedness) {
              this.gamepad = inputSource.gamepad;
            }
          }
        }
      }.bind(this));
    }
    onMouseDown() {
      this.isMouseIndicating = true;
    }
    onMouseUp() {
      this.isMouseIndicating = false;
      this.teleportIndicatorMeshObject.active = false;
      if (this._hasHit) {
        this._teleportPlayer(this.hitSpot, 0);
      }
    }
    onMousePressed() {
      let origin = [0, 0, 0];
      this.cam.getPositionWorld(origin);
      const direction2 = this.cam.getForward(this._tempVec);
      let rayHit = this.rayHit = this.rayCastMode == 0 ? this.engine.scene.rayCast(origin, direction2, 1 << this.floorGroup) : this.engine.physics.rayCast(origin, direction2, 1 << this.floorGroup, this.maxDistance);
      if (rayHit.hitCount > 0) {
        this.indicatorHidden = false;
        direction2[1] = 0;
        vec3_exports.normalize(direction2, direction2);
        this._currentIndicatorRotation = -Math.sign(direction2[2]) * Math.acos(direction2[0]) - Math.PI * 0.5;
        this.teleportIndicatorMeshObject.resetPositionRotation();
        this.teleportIndicatorMeshObject.rotateAxisAngleRad([0, 1, 0], this._currentIndicatorRotation);
        this.teleportIndicatorMeshObject.translate(rayHit.locations[0]);
        this.teleportIndicatorMeshObject.active = true;
        this.hitSpot = rayHit.locations[0];
        this._hasHit = true;
      } else {
        if (!this.indicatorHidden) {
          this.teleportIndicatorMeshObject.active = false;
          this.indicatorHidden = true;
        }
        this._hasHit = false;
      }
    }
    _teleportPlayer(newPosition, rotationToAdd) {
      this.camRoot.rotateAxisAngleRad([0, 1, 0], rotationToAdd);
      const p = this._tempVec;
      const p1 = this._tempVec0;
      if (this.session) {
        this.eyeLeft.getPositionWorld(p);
        this.eyeRight.getPositionWorld(p1);
        vec3_exports.add(p, p, p1);
        vec3_exports.scale(p, p, 0.5);
      } else {
        this.cam.getPositionWorld(p);
      }
      this.camRoot.getPositionWorld(p1);
      vec3_exports.sub(p, p1, p);
      p[0] += newPosition[0];
      p[1] = newPosition[1];
      p[2] += newPosition[2];
      this.camRoot.setPositionWorld(p);
    }
  };
  __publicField(TeleportComponent, "TypeName", "teleport");
  __publicField(TeleportComponent, "Properties", {
    /** Object that will be placed as indiciation forwhere the player will teleport to. */
    teleportIndicatorMeshObject: { type: Type.Object },
    /** Root of the player, the object that will be positioned on teleportation. */
    camRoot: { type: Type.Object },
    /** Non-vr camera for use outside of VR */
    cam: { type: Type.Object },
    /** Left eye for use in VR*/
    eyeLeft: { type: Type.Object },
    /** Right eye for use in VR*/
    eyeRight: { type: Type.Object },
    /** Handedness for VR cursors to accept trigger events only from respective controller. */
    handedness: {
      type: Type.Enum,
      values: ["input component", "left", "right", "none"],
      default: "input component"
    },
    /** Collision group of valid "floor" objects that can be teleported on */
    floorGroup: { type: Type.Int, default: 1 },
    /** How far the thumbstick needs to be pushed to have the teleport target indicator show up */
    thumbstickActivationThreshhold: { type: Type.Float, default: -0.7 },
    /** How far the thumbstick needs to be released to execute the teleport */
    thumbstickDeactivationThreshhold: { type: Type.Float, default: 0.3 },
    /** Offset to apply to the indicator object, e.g. to avoid it from Z-fighting with the floor */
    indicatorYOffset: { type: Type.Float, default: 0.01 },
    /** Mode for raycasting, whether to use PhysX or simple collision components */
    rayCastMode: {
      type: Type.Enum,
      values: ["collision", "physx"],
      default: "collision"
    },
    /** Max distance for PhysX raycast */
    maxDistance: { type: Type.Float, default: 100 }
  });

  // node_modules/@wonderlandengine/components/dist/trail.js
  var __decorate9 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var direction = vec3_exports.create();
  var offset = vec3_exports.create();
  var normal = vec3_exports.create();
  var UP = vec3_exports.fromValues(0, 1, 0);
  var Trail = class extends Component {
    /** The material to apply to the trail mesh */
    material = null;
    /** The number of segments in the trail mesh */
    segments = 50;
    /** The time interval before recording a new point */
    interval = 0.1;
    /** The width of the trail (in world space) */
    width = 1;
    /** Whether or not the trail should taper off */
    taper = true;
    /**
     * The maximum delta time in seconds, above which the trail resets.
     * This prevents the trail from jumping around when updates happen
     * infrequently (e.g. when the tab doesn't have focus).
     */
    resetThreshold = 0.5;
    _currentPointIndex = 0;
    _timeTillNext = 0;
    _points = [];
    _trailContainer = null;
    _meshComp = null;
    _mesh = null;
    _indexData = null;
    start() {
      this._points = new Array(this.segments + 1);
      for (let i = 0; i < this._points.length; ++i) {
        this._points[i] = vec3_exports.create();
      }
      this._timeTillNext = this.interval;
      this._trailContainer = this.engine.scene.addObject();
      this._meshComp = this._trailContainer.addComponent("mesh");
      this._meshComp.material = this.material;
      const vertexCount = 2 * this._points.length;
      this._indexData = new Uint32Array(6 * this.segments);
      for (let i = 0, v = 0; i < vertexCount - 2; i += 2, v += 6) {
        this._indexData.subarray(v, v + 6).set([i + 1, i + 0, i + 2, i + 2, i + 3, i + 1]);
      }
      this._mesh = new Mesh(this.engine, {
        vertexCount,
        indexData: this._indexData,
        indexType: MeshIndexType.UnsignedInt
      });
      this._meshComp.mesh = this._mesh;
    }
    updateVertices() {
      if (!this._mesh)
        return;
      const positions = this._mesh.attribute(MeshAttribute.Position);
      const texCoords = this._mesh.attribute(MeshAttribute.TextureCoordinate);
      const normals = this._mesh.attribute(MeshAttribute.Normal);
      vec3_exports.set(direction, 0, 0, 0);
      for (let i = 0; i < this._points.length; ++i) {
        const curr = this._points[(this._currentPointIndex + i + 1) % this._points.length];
        const next = this._points[(this._currentPointIndex + i + 2) % this._points.length];
        if (i !== this._points.length - 1) {
          vec3_exports.sub(direction, next, curr);
        }
        vec3_exports.cross(offset, UP, direction);
        vec3_exports.normalize(offset, offset);
        const timeFraction = 1 - this._timeTillNext / this.interval;
        const fraction = (i - timeFraction) / this.segments;
        vec3_exports.scale(offset, offset, (this.taper ? fraction : 1) * this.width / 2);
        positions.set(i * 2, [
          curr[0] - offset[0],
          curr[1] - offset[1],
          curr[2] - offset[2]
        ]);
        positions.set(i * 2 + 1, [
          curr[0] + offset[0],
          curr[1] + offset[1],
          curr[2] + offset[2]
        ]);
        if (normals) {
          vec3_exports.cross(normal, direction, offset);
          vec3_exports.normalize(normal, normal);
          normals.set(i * 2, normal);
          normals.set(i * 2 + 1, normal);
        }
        if (texCoords) {
          texCoords.set(i * 2, [0, fraction]);
          texCoords.set(i * 2 + 1, [1, fraction]);
        }
      }
      this._mesh.update();
    }
    resetTrail() {
      this.object.getPositionWorld(this._points[0]);
      for (let i = 1; i < this._points.length; ++i) {
        vec3_exports.copy(this._points[i], this._points[0]);
      }
      this._currentPointIndex = 0;
      this._timeTillNext = this.interval;
    }
    update(dt) {
      this._timeTillNext -= dt;
      if (dt > this.resetThreshold) {
        this.resetTrail();
      }
      if (this._timeTillNext < 0) {
        this._currentPointIndex = (this._currentPointIndex + 1) % this._points.length;
        this._timeTillNext = this._timeTillNext % this.interval + this.interval;
      }
      this.object.getPositionWorld(this._points[this._currentPointIndex]);
      this.updateVertices();
    }
    onActivate() {
      this.resetTrail();
      if (this._meshComp)
        this._meshComp.active = true;
    }
    onDeactivate() {
      if (this._meshComp)
        this._meshComp.active = false;
    }
    onDestroy() {
      if (this._trailContainer)
        this._trailContainer.destroy();
      if (this._meshComp)
        this._meshComp.destroy();
      if (this._mesh)
        this._mesh.destroy();
    }
  };
  __publicField(Trail, "TypeName", "trail");
  __decorate9([
    property.material()
  ], Trail.prototype, "material", void 0);
  __decorate9([
    property.int(50)
  ], Trail.prototype, "segments", void 0);
  __decorate9([
    property.float(50)
  ], Trail.prototype, "interval", void 0);
  __decorate9([
    property.float(1)
  ], Trail.prototype, "width", void 0);
  __decorate9([
    property.bool(true)
  ], Trail.prototype, "taper", void 0);
  __decorate9([
    property.float(1)
  ], Trail.prototype, "resetThreshold", void 0);

  // node_modules/@wonderlandengine/components/dist/two-joint-ik-solver.js
  function clamp2(v, a, b) {
    return Math.max(a, Math.min(v, b));
  }
  var rootScaling = new Float32Array(3);
  var tempQuat3 = new Float32Array(4);
  var middlePos = new Float32Array(3);
  var endPos = new Float32Array(3);
  var targetPos = new Float32Array(3);
  var helperPos = new Float32Array(3);
  var rootTransform = new Float32Array(8);
  var middleTransform = new Float32Array(8);
  var endTransform = new Float32Array(8);
  var twoJointIK = function() {
    const ta = new Float32Array(3);
    const ca = new Float32Array(3);
    const ba = new Float32Array(3);
    const ab = new Float32Array(3);
    const cb = new Float32Array(3);
    const axis0 = new Float32Array(3);
    const axis1 = new Float32Array(3);
    const temp = new Float32Array(3);
    return function(root, middle, b, c, targetPos2, eps, helper) {
      ba.set(b);
      const lab = vec3_exports.length(ba);
      vec3_exports.sub(ta, b, c);
      const lcb = vec3_exports.length(ta);
      ta.set(targetPos2);
      const lat = clamp2(vec3_exports.length(ta), eps, lab + lcb - eps);
      ca.set(c);
      vec3_exports.scale(ab, b, -1);
      vec3_exports.sub(cb, c, b);
      vec3_exports.normalize(ca, ca);
      vec3_exports.normalize(ba, ba);
      vec3_exports.normalize(ab, ab);
      vec3_exports.normalize(cb, cb);
      vec3_exports.normalize(ta, ta);
      const ac_ab_0 = Math.acos(clamp2(vec3_exports.dot(ca, ba), -1, 1));
      const ba_bc_0 = Math.acos(clamp2(vec3_exports.dot(ab, cb), -1, 1));
      const ac_at_0 = Math.acos(clamp2(vec3_exports.dot(ca, ta), -1, 1));
      const ac_ab_1 = Math.acos(clamp2((lcb * lcb - lab * lab - lat * lat) / (-2 * lab * lat), -1, 1));
      const ba_bc_1 = Math.acos(clamp2((lat * lat - lab * lab - lcb * lcb) / (-2 * lab * lcb), -1, 1));
      if (helper) {
        vec3_exports.sub(ba, helper, b);
        vec3_exports.normalize(ba, ba);
      }
      vec3_exports.cross(axis0, ca, ba);
      vec3_exports.normalize(axis0, axis0);
      vec3_exports.cross(axis1, c, targetPos2);
      vec3_exports.normalize(axis1, axis1);
      middle.transformVectorInverseLocal(temp, axis0);
      root.rotateAxisAngleRadObject(axis1, ac_at_0);
      root.rotateAxisAngleRadObject(axis0, ac_ab_1 - ac_ab_0);
      middle.rotateAxisAngleRadObject(axis0, ba_bc_1 - ba_bc_0);
    };
  }();
  var TwoJointIkSolver = class extends Component {
    time = 0;
    start() {
      this.root.getTransformLocal(rootTransform);
      this.middle.getTransformLocal(middleTransform);
      this.end.getTransformLocal(endTransform);
    }
    update(dt) {
      this.time += dt;
      this.root.setTransformLocal(rootTransform);
      this.middle.setTransformLocal(middleTransform);
      this.end.setTransformLocal(endTransform);
      this.root.getScalingWorld(rootScaling);
      this.middle.getPositionLocal(middlePos);
      this.end.getPositionLocal(endPos);
      this.middle.transformPointLocal(endPos, endPos);
      if (this.helper) {
        this.helper.getPositionWorld(helperPos);
        this.root.transformPointInverseWorld(helperPos, helperPos);
        vec3_exports.div(helperPos, helperPos, rootScaling);
      }
      this.target.getPositionWorld(targetPos);
      this.root.transformPointInverseWorld(targetPos, targetPos);
      vec3_exports.div(targetPos, targetPos, rootScaling);
      twoJointIK(this.root, this.middle, middlePos, endPos, targetPos, 0.01, this.helper ? helperPos : null, this.time);
      if (this.copyTargetRotation) {
        this.end.setRotationWorld(this.target.getRotationWorld(tempQuat3));
      }
    }
  };
  __publicField(TwoJointIkSolver, "TypeName", "two-joint-ik-solver");
  __publicField(TwoJointIkSolver, "Properties", {
    /** Root bone, never moves */
    root: Property.object(),
    /** Bone attached to the root */
    middle: Property.object(),
    /** Bone attached to the middle */
    end: Property.object(),
    /** Target the joins should reach for */
    target: Property.object(),
    /** Flag for copying rotation from target to end */
    copyTargetRotation: Property.bool(true),
    /** Helper object to use to determine joint rotation axis */
    helper: Property.object()
  });

  // node_modules/@wonderlandengine/components/dist/video-texture.js
  var VideoTexture = class extends Component {
    init() {
      if (!this.material) {
        throw Error("video-texture: material property not set");
      }
      this.loaded = false;
      this.frameUpdateRequested = true;
    }
    start() {
      this.video = document.createElement("video");
      this.video.src = this.url;
      this.video.crossOrigin = "anonymous";
      this.video.playsInline = true;
      this.video.loop = this.loop;
      this.video.muted = this.muted;
      this.video.addEventListener("playing", () => {
        this.loaded = true;
      });
      if (this.autoplay) {
        const playAfterUserGesture = () => {
          this.video.play();
          window.removeEventListener("click", playAfterUserGesture);
          window.removeEventListener("touchstart", playAfterUserGesture);
        };
        window.addEventListener("click", playAfterUserGesture);
        window.addEventListener("touchstart", playAfterUserGesture);
      }
    }
    applyTexture() {
      const mat = this.material;
      const shader = mat.shader;
      const texture = this.texture = new Texture(this.engine, this.video);
      if (!setFirstMaterialTexture(mat, texture, this.textureProperty)) {
        console.error("Shader", shader, "not supported by video-texture");
      }
      if ("requestVideoFrameCallback" in this.video) {
        this.video.requestVideoFrameCallback(this.updateVideo.bind(this));
      } else {
        this.video.addEventListener("timeupdate", () => {
          this.frameUpdateRequested = true;
        });
      }
    }
    update(dt) {
      if (this.loaded && this.frameUpdateRequested) {
        if (this.texture) {
          this.texture.update();
        } else {
          this.applyTexture();
        }
        this.frameUpdateRequested = false;
      }
    }
    updateVideo() {
      this.frameUpdateRequested = true;
      this.video.requestVideoFrameCallback(this.updateVideo.bind(this));
    }
  };
  __publicField(VideoTexture, "TypeName", "video-texture");
  __publicField(VideoTexture, "Properties", {
    /** URL to download video from */
    url: Property.string(),
    /** Material to apply the video texture to */
    material: Property.material(),
    /** Whether to loop the video */
    loop: Property.bool(true),
    /** Whether to automatically start playing the video */
    autoplay: Property.bool(true),
    /** Whether to mute sound */
    muted: Property.bool(true),
    /** Name of the texture property to set */
    textureProperty: Property.string("auto")
  });

  // node_modules/@wonderlandengine/components/dist/vr-mode-active-switch.js
  var VrModeActiveSwitch = class extends Component {
    start() {
      this.components = [];
      this.getComponents(this.object);
      this.onXRSessionEnd();
      this.onSessionStartCallback = this.onXRSessionStart.bind(this);
      this.onSessionEndCallback = this.onXRSessionEnd.bind(this);
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this.onSessionStartCallback);
      this.engine.onXRSessionEnd.add(this.onSessionEndCallback);
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this.onSessionStartCallback);
      this.engine.onXRSessionEnd.remove(this.onSessionEndCallback);
    }
    getComponents(obj) {
      const comps = obj.getComponents().filter((c) => c.type !== "vr-mode-active-switch");
      this.components = this.components.concat(comps);
      if (this.affectChildren) {
        let children = obj.children;
        for (let i = 0; i < children.length; ++i) {
          this.getComponents(children[i]);
        }
      }
    }
    setComponentsActive(active) {
      const comps = this.components;
      for (let i = 0; i < comps.length; ++i) {
        comps[i].active = active;
      }
    }
    onXRSessionStart() {
      this.setComponentsActive(this.activateComponents == 0);
    }
    onXRSessionEnd() {
      this.setComponentsActive(this.activateComponents != 0);
    }
  };
  __publicField(VrModeActiveSwitch, "TypeName", "vr-mode-active-switch");
  __publicField(VrModeActiveSwitch, "Properties", {
    /** When components should be active: In VR or when not in VR */
    activateComponents: {
      type: Type.Enum,
      values: ["in VR", "in non-VR"],
      default: "in VR"
    },
    /** Whether child object's components should be affected */
    affectChildren: { type: Type.Bool, default: true }
  });

  // node_modules/@wonderlandengine/components/dist/plane-detection.js
  var import_earcut = __toESM(require_earcut(), 1);
  var __decorate10 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var tempVec32 = new Float32Array(3);
  function extentsFromContour(out, points) {
    if (points.length == 0)
      return out;
    let absMaxX = Math.abs(points[0].x);
    let absMaxZ = Math.abs(points[0].z);
    for (let i = 1; i < points.length; ++i) {
      absMaxX = Math.max(absMaxX, Math.abs(points[i].x));
      absMaxZ = Math.max(absMaxZ, Math.abs(points[i].z));
    }
    out[0] = absMaxX;
    out[1] = 0;
    out[2] = absMaxZ;
  }
  function within(x, a, b) {
    if (a > b)
      return x < a && x > b;
    return x > a && x < b;
  }
  function isPointLocalOnXRPlanePolygon(p, plane) {
    const points = plane.polygon;
    if (points.length < 3)
      return false;
    const pX = p[0];
    const pZ = p[2];
    let intersections = 0;
    for (let n = 0, l = points.length - 1; n < points.length; ++n) {
      const aX = points[l].x;
      const aZ = points[l].z;
      const s = (points[n].z - aZ) / (points[n].x - aX);
      const x = Math.abs((pZ - aZ) / s);
      if (x >= 0 && x <= 1 && within(x + pX, aX, points[n].x))
        ++intersections;
      l = n;
    }
    return (intersections & 1) == 0;
  }
  function isPointWorldOnXRPlanePolygon(object, p, plane) {
    if (plane.polygon.length < 3)
      return false;
    isPointLocalOnXRPlanePolygon(object.transformPointInverseWorld(tempVec32, p), plane);
  }
  function planeMeshFromContour(engine, points, meshToUpdate = null) {
    const vertexCount = points.length;
    const vertices = new Float32Array(vertexCount * 2);
    for (let i = 0, d = 0; i < vertexCount; ++i, d += 2) {
      vertices[d] = points[i].x;
      vertices[d + 1] = points[i].z;
    }
    const triangles = (0, import_earcut.default)(vertices);
    const mesh = meshToUpdate || new Mesh(engine, {
      vertexCount,
      /* Assumption here that we will never have more than 256 points
       * in the detected plane meshes! */
      indexType: MeshIndexType.UnsignedByte,
      indexData: triangles
    });
    if (mesh.vertexCount !== vertexCount) {
      console.warn("vertexCount of meshToUpdate did not match required vertexCount");
      return mesh;
    }
    const positions = mesh.attribute(MeshAttribute.Position);
    const textureCoords = mesh.attribute(MeshAttribute.TextureCoordinate);
    const normals = mesh.attribute(MeshAttribute.Normal);
    tempVec32[1] = 0;
    for (let i = 0, s = 0; i < vertexCount; ++i, s += 2) {
      tempVec32[0] = vertices[s];
      tempVec32[2] = vertices[s + 1];
      positions.set(i, tempVec32);
    }
    textureCoords?.set(0, vertices);
    if (normals) {
      tempVec32[0] = 0;
      tempVec32[1] = 1;
      tempVec32[2] = 0;
      for (let i = 0; i < vertexCount; ++i) {
        normals.set(i, tempVec32);
      }
    }
    if (meshToUpdate)
      mesh.update();
    return mesh;
  }
  var _planeLost, planeLost_fn, _planeFound, planeFound_fn, _planeUpdate, planeUpdate_fn, _planeUpdatePose, planeUpdatePose_fn;
  var PlaneDetection = class extends Component {
    constructor() {
      super(...arguments);
      __privateAdd(this, _planeLost);
      __privateAdd(this, _planeFound);
      __privateAdd(this, _planeUpdate);
      __privateAdd(this, _planeUpdatePose);
      /**
       * Material to assign to created plane meshes or `null` if meshes should not be created.
       */
      __publicField(this, "planeMaterial", null);
      /**
       * Collision mask to assign to newly created collision components or a negative value if
       * collision components should not be created.
       */
      __publicField(this, "collisionMask", -1);
      /** Map of all planes and their last updated timestamps */
      __publicField(this, "planes", /* @__PURE__ */ new Map());
      /** Objects generated for each XRPlane */
      __publicField(this, "planeObjects", /* @__PURE__ */ new Map());
      /** Called when a plane starts tracking */
      __publicField(this, "onPlaneFound", new Emitter());
      /** Called when a plane stops tracking */
      __publicField(this, "onPlaneLost", new Emitter());
    }
    update() {
      if (!this.engine.xr?.frame)
        return;
      if (this.engine.xr.frame.detectedPlanes === void 0) {
        console.error("plane-detection: WebXR feature not available.");
        this.active = false;
        return;
      }
      const detectedPlanes = this.engine.xr.frame.detectedPlanes;
      for (const [plane, _] of this.planes) {
        if (!detectedPlanes.has(plane)) {
          __privateMethod(this, _planeLost, planeLost_fn).call(this, plane);
        }
      }
      detectedPlanes.forEach((plane) => {
        if (this.planes.has(plane)) {
          if (plane.lastChangedTime > this.planes.get(plane)) {
            __privateMethod(this, _planeUpdate, planeUpdate_fn).call(this, plane);
          }
        } else {
          __privateMethod(this, _planeFound, planeFound_fn).call(this, plane);
        }
        __privateMethod(this, _planeUpdatePose, planeUpdatePose_fn).call(this, plane);
      });
    }
  };
  _planeLost = new WeakSet();
  planeLost_fn = function(plane) {
    this.planes.delete(plane);
    const o = this.planeObjects.get(plane);
    this.onPlaneLost.notify(plane, o);
    if (o.objectId > 0)
      o.destroy();
  };
  _planeFound = new WeakSet();
  planeFound_fn = function(plane) {
    this.planes.set(plane, plane.lastChangedTime);
    const o = this.engine.scene.addObject(this.object);
    this.planeObjects.set(plane, o);
    if (this.planeMaterial) {
      o.addComponent(MeshComponent, {
        mesh: planeMeshFromContour(this.engine, plane.polygon),
        material: this.planeMaterial
      });
    }
    if (this.collisionMask >= 0) {
      extentsFromContour(tempVec32, plane.polygon);
      tempVec32[1] = 0.025;
      o.addComponent(CollisionComponent, {
        group: this.collisionMask,
        collider: Collider.Box,
        extents: tempVec32
      });
    }
    this.onPlaneFound.notify(plane, o);
  };
  _planeUpdate = new WeakSet();
  planeUpdate_fn = function(plane) {
    this.planes.set(plane, plane.lastChangedTime);
    const planeMesh = this.planeObjects.get(plane).getComponent(MeshComponent);
    if (!planeMesh)
      return;
    planeMeshFromContour(this.engine, plane.polygon, planeMesh.mesh);
  };
  _planeUpdatePose = new WeakSet();
  planeUpdatePose_fn = function(plane) {
    const o = this.planeObjects.get(plane);
    const pose = this.engine.xr.frame.getPose(plane.planeSpace, this.engine.xr.currentReferenceSpace);
    if (!pose) {
      o.active = false;
      return;
    }
    setXRRigidTransformLocal(o, pose.transform);
  };
  __publicField(PlaneDetection, "TypeName", "plane-detection");
  __decorate10([
    property.material()
  ], PlaneDetection.prototype, "planeMaterial", void 0);
  __decorate10([
    property.int()
  ], PlaneDetection.prototype, "collisionMask", void 0);

  // node_modules/@wonderlandengine/components/dist/vrm.js
  var VRM_ROLL_AXES = {
    X: [1, 0, 0],
    Y: [0, 1, 0],
    Z: [0, 0, 1]
  };
  var VRM_AIM_AXES = {
    PositiveX: [1, 0, 0],
    NegativeX: [-1, 0, 0],
    PositiveY: [0, 1, 0],
    NegativeY: [0, -1, 0],
    PositiveZ: [0, 0, 1],
    NegativeZ: [0, 0, -1]
  };
  var Vrm = class extends Component {
    /** Meta information about the VRM model */
    meta = null;
    /** The humanoid bones of the VRM model */
    bones = {
      /* Torso */
      hips: null,
      spine: null,
      chest: null,
      upperChest: null,
      neck: null,
      /* Head */
      head: null,
      leftEye: null,
      rightEye: null,
      jaw: null,
      /* Legs */
      leftUpperLeg: null,
      leftLowerLeg: null,
      leftFoot: null,
      leftToes: null,
      rightUpperLeg: null,
      rightLowerLeg: null,
      rightFoot: null,
      rightToes: null,
      /* Arms */
      leftShoulder: null,
      leftUpperArm: null,
      leftLowerArm: null,
      leftHand: null,
      rightShoulder: null,
      rightUpperArm: null,
      rightLowerArm: null,
      rightHand: null,
      /* Fingers */
      leftThumbMetacarpal: null,
      leftThumbProximal: null,
      leftThumbDistal: null,
      leftIndexProximal: null,
      leftIndexIntermediate: null,
      leftIndexDistal: null,
      leftMiddleProximal: null,
      leftMiddleIntermediate: null,
      leftMiddleDistal: null,
      leftRingProximal: null,
      leftRingIntermediate: null,
      leftRingDistal: null,
      leftLittleProximal: null,
      leftLittleIntermediate: null,
      leftLittleDistal: null,
      rightThumbMetacarpal: null,
      rightThumbProximal: null,
      rightThumbDistal: null,
      rightIndexProximal: null,
      rightIndexIntermediate: null,
      rightIndexDistal: null,
      rightMiddleProximal: null,
      rightMiddleIntermediate: null,
      rightMiddleDistal: null,
      rightRingProximal: null,
      rightRingIntermediate: null,
      rightRingDistal: null,
      rightLittleProximal: null,
      rightLittleIntermediate: null,
      rightLittleDistal: null
    };
    /** Rotations of the bones in the rest pose (T-pose) */
    restPose = {};
    /* All node constraints, ordered to deal with dependencies */
    _nodeConstraints = [];
    /* VRMC_springBone chains */
    _springChains = [];
    /* Spherical colliders for spring bones */
    _sphereColliders = [];
    /* Capsule shaped colliders for spring bones */
    _capsuleColliders = [];
    /* Indicates which meshes are rendered in first/third person views */
    _firstPersonAnnotations = [];
    /* Contains details for (bone type) lookAt behaviour */
    _lookAt = null;
    /* Whether or not the VRM component has been initialized with `initializeVrm` */
    _initialized = false;
    init() {
      this._tempV3 = vec3_exports.create();
      this._tempV3A = vec3_exports.create();
      this._tempV3B = vec3_exports.create();
      this._tempQuat = quat_exports.create();
      this._tempQuatA = quat_exports.create();
      this._tempQuatB = quat_exports.create();
      this._tempMat4A = mat4_exports.create();
      this._tempQuat2 = quat2_exports.create();
      this._tailToShape = vec3_exports.create();
      this._headToTail = vec3_exports.create();
      this._inertia = vec3_exports.create();
      this._stiffness = vec3_exports.create();
      this._external = vec3_exports.create();
      this._rightVector = vec3_exports.set(vec3_exports.create(), 1, 0, 0);
      this._upVector = vec3_exports.set(vec3_exports.create(), 0, 1, 0);
      this._forwardVector = vec3_exports.set(vec3_exports.create(), 0, 0, 1);
      this._identityQuat = quat_exports.identity(quat_exports.create());
      this._rad2deg = 180 / Math.PI;
    }
    start() {
      if (!this.src) {
        console.error("vrm: src property not set");
        return;
      }
      this.engine.scene.append(this.src, { loadGltfExtensions: true }).then(({ root, extensions }) => {
        root.children.forEach((child) => child.parent = this.object);
        this._initializeVrm(extensions);
        root.destroy();
      });
    }
    /**
     * Parses the VRM glTF extensions and initializes the vrm component.
     * @param {GLTFExtensions} extensions The glTF extensions for the VRM model
     */
    _initializeVrm(extensions) {
      if (this._initialized) {
        throw Error("VRM component has already been initialized");
      }
      const VRMC_vrm = extensions.root["VRMC_vrm"];
      if (!VRMC_vrm) {
        throw Error("Missing VRM extensions");
      }
      if (VRMC_vrm.specVersion !== "1.0") {
        throw Error(`Unsupported VRM version, only 1.0 is supported, but encountered '${VRMC_vrm.specVersion}'`);
      }
      this.meta = VRMC_vrm.meta;
      this._parseHumanoid(VRMC_vrm.humanoid, extensions);
      if (VRMC_vrm.firstPerson) {
        this._parseFirstPerson(VRMC_vrm.firstPerson, extensions);
      }
      if (VRMC_vrm.lookAt) {
        this._parseLookAt(VRMC_vrm.lookAt);
      }
      this._findAndParseNodeConstraints(extensions);
      const springBone = extensions.root["VRMC_springBone"];
      if (springBone) {
        this._parseAndInitializeSpringBones(springBone, extensions);
      }
      this._initialized = true;
    }
    _parseHumanoid(humanoid, extensions) {
      for (const boneName in humanoid.humanBones) {
        if (!(boneName in this.bones)) {
          console.warn(`Unrecognized bone '${boneName}'`);
          continue;
        }
        const node = humanoid.humanBones[boneName].node;
        const objectId = extensions.idMapping[node];
        this.bones[boneName] = this.engine.wrapObject(objectId);
        this.restPose[boneName] = quat_exports.copy(quat_exports.create(), this.bones[boneName].rotationLocal);
      }
    }
    _parseFirstPerson(firstPerson, extensions) {
      for (const meshAnnotation of firstPerson.meshAnnotations) {
        const annotation = {
          node: this.engine.wrapObject(extensions.idMapping[meshAnnotation.node]),
          firstPerson: true,
          thirdPerson: true
        };
        switch (meshAnnotation.type) {
          case "firstPersonOnly":
            annotation.thirdPerson = false;
            break;
          case "thirdPersonOnly":
            annotation.firstPerson = false;
            break;
          case "both":
            break;
          case "auto":
            console.warn("First person mesh annotation type 'auto' is not supported, treating as 'both'!");
            break;
          default:
            console.error(`Invalid mesh annotation type '${meshAnnotation.type}'`);
            break;
        }
        this._firstPersonAnnotations.push(annotation);
      }
    }
    _parseLookAt(lookAt2) {
      if (lookAt2.type !== "bone") {
        console.warn(`Unsupported lookAt type '${lookAt2.type}', only 'bone' is supported`);
        return;
      }
      const parseRangeMap = (rangeMap) => {
        return {
          inputMaxValue: rangeMap.inputMaxValue,
          outputScale: rangeMap.outputScale
        };
      };
      this._lookAt = {
        offsetFromHeadBone: lookAt2.offsetFromHeadBone || [0, 0, 0],
        horizontalInner: parseRangeMap(lookAt2.rangeMapHorizontalInner),
        horizontalOuter: parseRangeMap(lookAt2.rangeMapHorizontalOuter),
        verticalDown: parseRangeMap(lookAt2.rangeMapVerticalDown),
        verticalUp: parseRangeMap(lookAt2.rangeMapVerticalUp)
      };
    }
    _findAndParseNodeConstraints(extensions) {
      const traverse = (object) => {
        const nodeExtensions = extensions.node[object.objectId];
        if (nodeExtensions && "VRMC_node_constraint" in nodeExtensions) {
          const nodeConstraintExtension = nodeExtensions["VRMC_node_constraint"];
          const constraint = nodeConstraintExtension.constraint;
          let type, axis;
          if ("roll" in constraint) {
            type = "roll";
            axis = VRM_ROLL_AXES[constraint.roll.rollAxis];
          } else if ("aim" in constraint) {
            type = "aim";
            axis = VRM_AIM_AXES[constraint.aim.aimAxis];
          } else if ("rotation" in constraint) {
            type = "rotation";
          }
          if (type) {
            const source = this.engine.wrapObject(extensions.idMapping[constraint[type].source]);
            this._nodeConstraints.push({
              type,
              source,
              destination: object,
              axis,
              weight: constraint[type].weight,
              /* Rest pose */
              destinationRestLocalRotation: quat_exports.copy(quat_exports.create(), object.rotationLocal),
              sourceRestLocalRotation: quat_exports.copy(quat_exports.create(), source.rotationLocal),
              sourceRestLocalRotationInv: quat_exports.invert(quat_exports.create(), source.rotationLocal)
            });
          } else {
            console.warn("Unrecognized or invalid VRMC_node_constraint, ignoring it");
          }
        }
        for (const child of object.children) {
          traverse(child);
        }
      };
      traverse(this.object);
    }
    _parseAndInitializeSpringBones(springBone, extensions) {
      const colliders = (springBone.colliders || []).map((collider, i) => {
        const shapeType = "capsule" in collider.shape ? "capsule" : "sphere";
        return {
          id: i,
          object: this.engine.wrapObject(extensions.idMapping[collider.node]),
          shape: {
            isCapsule: shapeType === "capsule",
            radius: collider.shape[shapeType].radius,
            offset: collider.shape[shapeType].offset,
            tail: collider.shape[shapeType].tail
          },
          cache: {
            head: vec3_exports.create(),
            tail: vec3_exports.create()
          }
        };
      });
      this._sphereColliders = colliders.filter((c) => !c.shape.isCapsule);
      this._capsuleColliders = colliders.filter((c) => c.shape.isCapsule);
      const colliderGroups = (springBone.colliderGroups || []).map((group) => ({
        name: group.name,
        colliders: group.colliders.map((c) => colliders[c])
      }));
      for (const spring of springBone.springs) {
        const joints = [];
        for (const joint of spring.joints) {
          const springJoint = {
            hitRadius: 0,
            stiffness: 1,
            gravityPower: 0,
            gravityDir: [0, -1, 0],
            dragForce: 0.5,
            node: null,
            state: null
          };
          Object.assign(springJoint, joint);
          springJoint.node = this.engine.wrapObject(extensions.idMapping[springJoint.node]);
          joints.push(springJoint);
        }
        const springChainColliders = (spring.colliderGroups || []).flatMap((cg) => colliderGroups[cg].colliders);
        this._springChains.push({
          name: spring.name,
          center: spring.center ? this.engine.wrapObject(extensions.idMapping[spring.center]) : null,
          joints,
          sphereColliders: springChainColliders.filter((c) => !c.shape.isCapsule),
          capsuleColliders: springChainColliders.filter((c) => c.shape.isCapsule)
        });
      }
      for (const springChain of this._springChains) {
        for (let i = 0; i < springChain.joints.length - 1; ++i) {
          const springBoneJoint = springChain.joints[i];
          const childSpringBoneJoint = springChain.joints[i + 1];
          const springBonePosition = springBoneJoint.node.getTranslationWorld(vec3_exports.create());
          const childSpringBonePosition = childSpringBoneJoint.node.getTranslationWorld(vec3_exports.create());
          const boneDirection = vec3_exports.subtract(this._tempV3A, springBonePosition, childSpringBonePosition);
          const state = {
            prevTail: childSpringBonePosition,
            currentTail: vec3_exports.copy(vec3_exports.create(), childSpringBonePosition),
            initialLocalRotation: quat_exports.copy(quat_exports.create(), springBoneJoint.node.rotationLocal),
            initialLocalTransformInvert: quat2_exports.invert(quat2_exports.create(), springBoneJoint.node.transformLocal),
            boneAxis: vec3_exports.normalize(vec3_exports.create(), childSpringBoneJoint.node.getTranslationLocal(this._tempV3)),
            /* Ensure bone length is at least 1cm to avoid jittery behaviour from zero-length bones */
            boneLength: Math.max(0.01, vec3_exports.length(boneDirection)),
            /* Tail positions in center space, if needed */
            prevTailCenter: null,
            currentTailCenter: null
          };
          if (springChain.center) {
            state.prevTailCenter = springChain.center.transformPointInverseWorld(vec3_exports.create(), childSpringBonePosition);
            state.currentTailCenter = vec3_exports.copy(vec3_exports.create(), childSpringBonePosition);
          }
          springBoneJoint.state = state;
        }
      }
    }
    update(dt) {
      if (!this._initialized) {
        return;
      }
      this._resolveLookAt();
      this._resolveConstraints();
      this._updateSpringBones(dt);
    }
    _rangeMap(rangeMap, input) {
      const maxValue = rangeMap.inputMaxValue;
      const outputScale = rangeMap.outputScale;
      return Math.min(input, maxValue) / maxValue * outputScale;
    }
    _resolveLookAt() {
      if (!this._lookAt || !this.lookAtTarget) {
        return;
      }
      const lookAtSource = this.bones.head.transformPointWorld(this._tempV3A, this._lookAt.offsetFromHeadBone);
      const lookAtTarget = this.lookAtTarget.getTranslationWorld(this._tempV3B);
      const lookAtDirection = vec3_exports.sub(this._tempV3A, lookAtTarget, lookAtSource);
      vec3_exports.normalize(lookAtDirection, lookAtDirection);
      this.bones.head.parent.transformVectorInverseWorld(lookAtDirection);
      const z = vec3_exports.dot(lookAtDirection, this._forwardVector);
      const x = vec3_exports.dot(lookAtDirection, this._rightVector);
      const yaw = Math.atan2(x, z) * this._rad2deg;
      const xz = Math.sqrt(x * x + z * z);
      const y = vec3_exports.dot(lookAtDirection, this._upVector);
      let pitch = Math.atan2(-y, xz) * this._rad2deg;
      if (pitch > 0) {
        pitch = this._rangeMap(this._lookAt.verticalDown, pitch);
      } else {
        pitch = -this._rangeMap(this._lookAt.verticalUp, -pitch);
      }
      if (this.bones.leftEye) {
        let yawLeft = yaw;
        if (yawLeft > 0) {
          yawLeft = this._rangeMap(this._lookAt.horizontalInner, yawLeft);
        } else {
          yawLeft = -this._rangeMap(this._lookAt.horizontalOuter, -yawLeft);
        }
        const eyeRotation = quat_exports.fromEuler(this._tempQuatA, pitch, yawLeft, 0);
        this.bones.leftEye.rotationLocal = quat_exports.multiply(eyeRotation, this.restPose.leftEye, eyeRotation);
      }
      if (this.bones.rightEye) {
        let yawRight = yaw;
        if (yawRight > 0) {
          yawRight = this._rangeMap(this._lookAt.horizontalOuter, yawRight);
        } else {
          yawRight = -this._rangeMap(this._lookAt.horizontalInner, -yawRight);
        }
        const eyeRotation = quat_exports.fromEuler(this._tempQuatA, pitch, yawRight, 0);
        this.bones.rightEye.rotationLocal = quat_exports.multiply(eyeRotation, this.restPose.rightEye, eyeRotation);
      }
    }
    _resolveConstraints() {
      for (const nodeConstraint of this._nodeConstraints) {
        this._resolveConstraint(nodeConstraint);
      }
    }
    _resolveConstraint(nodeConstraint) {
      const dstRestQuat = nodeConstraint.destinationRestLocalRotation;
      const srcRestQuatInv = nodeConstraint.sourceRestLocalRotationInv;
      const targetQuat = quat_exports.identity(this._tempQuatA);
      switch (nodeConstraint.type) {
        case "roll":
          {
            const deltaSrcQuat = quat_exports.multiply(this._tempQuatA, srcRestQuatInv, nodeConstraint.source.rotationLocal);
            const deltaSrcQuatInParent = quat_exports.multiply(this._tempQuatA, nodeConstraint.sourceRestLocalRotation, deltaSrcQuat);
            quat_exports.mul(deltaSrcQuatInParent, deltaSrcQuatInParent, srcRestQuatInv);
            const dstRestQuatInv = quat_exports.invert(this._tempQuatB, dstRestQuat);
            const deltaSrcQuatInDst = quat_exports.multiply(this._tempQuatB, dstRestQuatInv, deltaSrcQuatInParent);
            quat_exports.multiply(deltaSrcQuatInDst, deltaSrcQuatInDst, dstRestQuat);
            const toVec = vec3_exports.transformQuat(this._tempV3A, nodeConstraint.axis, deltaSrcQuatInDst);
            const fromToQuat = quat_exports.rotationTo(this._tempQuatA, nodeConstraint.axis, toVec);
            quat_exports.mul(targetQuat, dstRestQuat, quat_exports.invert(this._tempQuat, fromToQuat));
            quat_exports.mul(targetQuat, targetQuat, deltaSrcQuatInDst);
          }
          break;
        case "aim":
          {
            const dstParentWorldQuat = nodeConstraint.destination.parent.rotationWorld;
            const fromVec = vec3_exports.transformQuat(this._tempV3A, nodeConstraint.axis, dstRestQuat);
            vec3_exports.transformQuat(fromVec, fromVec, dstParentWorldQuat);
            const toVec = nodeConstraint.source.getTranslationWorld(this._tempV3B);
            vec3_exports.sub(toVec, toVec, nodeConstraint.destination.getTranslationWorld(this._tempV3));
            vec3_exports.normalize(toVec, toVec);
            const fromToQuat = quat_exports.rotationTo(this._tempQuatA, fromVec, toVec);
            quat_exports.mul(targetQuat, quat_exports.invert(this._tempQuat, dstParentWorldQuat), fromToQuat);
            quat_exports.mul(targetQuat, targetQuat, dstParentWorldQuat);
            quat_exports.mul(targetQuat, targetQuat, dstRestQuat);
          }
          break;
        case "rotation":
          {
            const srcDeltaQuat = quat_exports.mul(targetQuat, srcRestQuatInv, nodeConstraint.source.rotationLocal);
            quat_exports.mul(targetQuat, dstRestQuat, srcDeltaQuat);
          }
          break;
      }
      quat_exports.slerp(targetQuat, dstRestQuat, targetQuat, nodeConstraint.weight);
      nodeConstraint.destination.rotationLocal = targetQuat;
    }
    _updateSpringBones(dt) {
      this._sphereColliders.forEach(({ object, shape, cache }) => {
        const offset2 = vec3_exports.copy(cache.head, shape.offset);
        object.transformVectorWorld(offset2);
        vec3_exports.add(cache.head, object.getTranslationWorld(this._tempV3), offset2);
      });
      this._capsuleColliders.forEach(({ object, shape, cache }) => {
        const shapeCenter = object.getTranslationWorld(this._tempV3A);
        const headOffset = vec3_exports.copy(cache.head, shape.offset);
        object.transformVectorWorld(headOffset);
        vec3_exports.add(cache.head, shapeCenter, headOffset);
        const tailOffset = vec3_exports.copy(cache.tail, shape.tail);
        object.transformVectorWorld(tailOffset);
        vec3_exports.add(cache.tail, shapeCenter, tailOffset);
      });
      this._springChains.forEach((springChain) => {
        for (let i = 0; i < springChain.joints.length - 1; ++i) {
          const joint = springChain.joints[i];
          const parentWorldRotation = joint.node.parent ? joint.node.parent.rotationWorld : this._identityQuat;
          const inertia = this._inertia;
          if (springChain.center) {
            vec3_exports.sub(inertia, joint.state.currentTailCenter, joint.state.prevTailCenter);
            springChain.center.transformVectorWorld(inertia);
          } else {
            vec3_exports.sub(inertia, joint.state.currentTail, joint.state.prevTail);
          }
          vec3_exports.scale(inertia, inertia, 1 - joint.dragForce);
          const stiffness = vec3_exports.copy(this._stiffness, joint.state.boneAxis);
          vec3_exports.transformQuat(stiffness, stiffness, joint.state.initialLocalRotation);
          vec3_exports.transformQuat(stiffness, stiffness, parentWorldRotation);
          vec3_exports.scale(stiffness, stiffness, dt * joint.stiffness);
          const external = vec3_exports.scale(this._external, joint.gravityDir, dt * joint.gravityPower);
          const nextTail = vec3_exports.copy(this._tempV3A, joint.state.currentTail);
          vec3_exports.add(nextTail, nextTail, inertia);
          vec3_exports.add(nextTail, nextTail, stiffness);
          vec3_exports.add(nextTail, nextTail, external);
          const worldPosition = joint.node.getTranslationWorld(this._tempV3B);
          vec3_exports.sub(nextTail, nextTail, worldPosition);
          vec3_exports.normalize(nextTail, nextTail);
          vec3_exports.scaleAndAdd(nextTail, worldPosition, nextTail, joint.state.boneLength);
          for (const { shape, cache } of springChain.sphereColliders) {
            let tailToShape = this._tailToShape;
            const sphereCenter = cache.head;
            tailToShape = vec3_exports.sub(tailToShape, nextTail, sphereCenter);
            const radius = shape.radius + joint.hitRadius;
            const dist2 = vec3_exports.length(tailToShape) - radius;
            if (dist2 < 0) {
              vec3_exports.normalize(tailToShape, tailToShape);
              vec3_exports.scaleAndAdd(nextTail, nextTail, tailToShape, -dist2);
              vec3_exports.sub(nextTail, nextTail, worldPosition);
              vec3_exports.normalize(nextTail, nextTail);
              vec3_exports.scaleAndAdd(nextTail, worldPosition, nextTail, joint.state.boneLength);
            }
          }
          for (const { shape, cache } of springChain.capsuleColliders) {
            let tailToShape = this._tailToShape;
            const head = cache.head;
            const tail = cache.tail;
            tailToShape = vec3_exports.sub(tailToShape, nextTail, head);
            const headToTail = vec3_exports.sub(this._headToTail, tail, head);
            const dot5 = vec3_exports.dot(headToTail, tailToShape);
            if (vec3_exports.squaredLength(headToTail) <= dot5) {
              vec3_exports.sub(tailToShape, nextTail, tail);
            } else if (dot5 > 0) {
              vec3_exports.scale(headToTail, headToTail, dot5 / vec3_exports.squaredLength(headToTail));
              vec3_exports.sub(tailToShape, tailToShape, headToTail);
            }
            const radius = shape.radius + joint.hitRadius;
            const dist2 = vec3_exports.length(tailToShape) - radius;
            if (dist2 < 0) {
              vec3_exports.normalize(tailToShape, tailToShape);
              vec3_exports.scaleAndAdd(nextTail, nextTail, tailToShape, -dist2);
              vec3_exports.sub(nextTail, nextTail, worldPosition);
              vec3_exports.normalize(nextTail, nextTail);
              vec3_exports.scaleAndAdd(nextTail, worldPosition, nextTail, joint.state.boneLength);
            }
          }
          vec3_exports.copy(joint.state.prevTail, joint.state.currentTail);
          vec3_exports.copy(joint.state.currentTail, nextTail);
          if (springChain.center) {
            vec3_exports.copy(joint.state.prevTailCenter, joint.state.currentTailCenter);
            vec3_exports.copy(joint.state.currentTailCenter, nextTail);
            springChain.center.transformPointInverseWorld(joint.state.currentTailCenter);
          }
          joint.node.parent.transformPointInverseWorld(nextTail);
          const nextTailDualQuat = quat2_exports.fromTranslation(this._tempQuat2, nextTail);
          quat2_exports.multiply(nextTailDualQuat, joint.state.initialLocalTransformInvert, nextTailDualQuat);
          quat2_exports.getTranslation(nextTail, nextTailDualQuat);
          vec3_exports.normalize(nextTail, nextTail);
          const jointRotation = quat_exports.rotationTo(this._tempQuatA, joint.state.boneAxis, nextTail);
          joint.node.rotationLocal = quat_exports.mul(this._tempQuatA, joint.state.initialLocalRotation, jointRotation);
        }
      });
    }
    /**
     * @param {boolean} firstPerson Whether the model should render for first person or third person views
     */
    set firstPerson(firstPerson) {
      this._firstPersonAnnotations.forEach((annotation) => {
        const visible = firstPerson == annotation.firstPerson || firstPerson != annotation.thirdPerson;
        annotation.node.getComponents("mesh").forEach((mesh) => {
          mesh.active = visible;
        });
      });
    }
  };
  __publicField(Vrm, "TypeName", "vrm");
  __publicField(Vrm, "Properties", {
    /** URL to a VRM file to load */
    src: { type: Type.String },
    /** Object the VRM is looking at */
    lookAtTarget: { type: Type.Object }
  });

  // node_modules/@wonderlandengine/components/dist/wasd-controls.js
  var _direction = new Float32Array(3);
  var WasdControlsComponent = class extends Component {
    init() {
      this.up = false;
      this.right = false;
      this.down = false;
      this.left = false;
      window.addEventListener("keydown", this.press.bind(this));
      window.addEventListener("keyup", this.release.bind(this));
    }
    start() {
      this.headObject = this.headObject || this.object;
    }
    update() {
      vec3_exports.zero(_direction);
      if (this.up)
        _direction[2] -= 1;
      if (this.down)
        _direction[2] += 1;
      if (this.left)
        _direction[0] -= 1;
      if (this.right)
        _direction[0] += 1;
      vec3_exports.normalize(_direction, _direction);
      _direction[0] *= this.speed;
      _direction[2] *= this.speed;
      vec3_exports.transformQuat(_direction, _direction, this.headObject.transformWorld);
      if (this.lockY) {
        _direction[1] = 0;
        vec3_exports.normalize(_direction, _direction);
        vec3_exports.scale(_direction, _direction, this.speed);
      }
      this.object.translateLocal(_direction);
    }
    press(e) {
      if (e.keyCode === 38 || e.keyCode === 87 || e.keyCode === 90) {
        this.up = true;
      } else if (e.keyCode === 39 || e.keyCode === 68) {
        this.right = true;
      } else if (e.keyCode === 40 || e.keyCode === 83) {
        this.down = true;
      } else if (e.keyCode === 37 || e.keyCode === 65 || e.keyCode === 81) {
        this.left = true;
      }
    }
    release(e) {
      if (e.keyCode === 38 || e.keyCode === 87 || e.keyCode === 90) {
        this.up = false;
      } else if (e.keyCode === 39 || e.keyCode === 68) {
        this.right = false;
      } else if (e.keyCode === 40 || e.keyCode === 83) {
        this.down = false;
      } else if (e.keyCode === 37 || e.keyCode === 65 || e.keyCode === 81) {
        this.left = false;
      }
    }
  };
  __publicField(WasdControlsComponent, "TypeName", "wasd-controls");
  __publicField(WasdControlsComponent, "Properties", {
    /** Movement speed in m/s. */
    speed: { type: Type.Float, default: 0.1 },
    /** Flag for only moving the object on the global x & z planes */
    lockY: { type: Type.Bool, default: false },
    /** Object of which the orientation is used to determine forward direction */
    headObject: { type: Type.Object }
  });

  // node_modules/@wonderlandengine/components/dist/input-profile.js
  var __decorate11 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var _tempVec = vec3_exports.create();
  var _tempQuat = quat_exports.create();
  var _tempRotation1 = new Float32Array(4);
  var _tempRotation2 = new Float32Array(4);
  var minTemp = new Float32Array(3);
  var maxTemp = new Float32Array(3);
  var hands = ["left", "right"];
  var _InputProfile = class extends Component {
    _gamepadObjects = {};
    _controllerModel = null;
    _defaultControllerComponents;
    _handedness;
    _profileJSON = null;
    _buttons = [];
    _axes = [];
    /**
     * The XR gamepad associated with the current input source.
     */
    gamepad;
    /**
     * A reference to the emitter which triggered on model lodaed event.
     */
    onModelLoaded = new Emitter();
    /**
     * Returns url of input profile json file
     */
    url;
    /**
     * A set of components to filter during component retrieval.
     */
    toFilter = /* @__PURE__ */ new Set(["vr-mode-active-mode-switch"]);
    /**
     * The index representing the handedness of the controller (0 for left, 1 for right).
     */
    handedness = 0;
    /**
     * The base path where XR input profiles are stored.
     */
    defaultBasePath;
    /**
     * An optional folder path for loading custom XR input profiles.
     */
    customBasePath;
    /**
     * The default 3D controller model used when a custom model fails to load.
     */
    defaultController;
    /**
     * The object which has HandTracking component added to it.
     */
    trackedHand;
    /**
     * If true, the input profile will be mapped to the default controller, and no dynamic 3D model of controller will be loaded.
     */
    mapToDefaultController;
    /**
     * If true, adds a VR mode switch component to the loaded controller model.
     */
    addVrModeSwitch;
    onActivate() {
      this._handedness = hands[this.handedness];
      const defaultHandName = "Hand" + this._handedness.charAt(0).toUpperCase() + this._handedness.slice(1);
      this.trackedHand = this.trackedHand ?? this.object.parent?.findByNameRecursive(defaultHandName)[0];
      this.defaultController = this.defaultController || this.object.children[0];
      this._defaultControllerComponents = this._getComponents(this.defaultController);
      this.engine.onXRSessionStart.add(() => {
        this.engine.xr?.session.addEventListener("inputsourceschange", this._onInputSourcesChange.bind(this));
      });
    }
    onDeactivate() {
      this.engine.xr?.session?.removeEventListener("inputsourceschange", this._onInputSourcesChange.bind(this));
    }
    /**
     * Sets newly loaded controllers for the HandTracking component to proper switching.
     * @param controllerObject The controller object.
     * @hidden
     */
    _setHandTrackingControllers(controllerObject) {
      const handtrackingComponent = this.trackedHand.getComponent(HandTracking);
      if (!handtrackingComponent)
        return;
      handtrackingComponent.controllerToDeactivate = controllerObject;
    }
    /**
     * Retrieves all components from the specified object and its children.
     * @param obj The object to retrieve components from.
     * @return An array of components.
     * @hidden
     */
    _getComponents(obj) {
      const components = [];
      if (obj == null)
        return components;
      const stack = [obj];
      while (stack.length > 0) {
        const currentObj = stack.pop();
        const comps = currentObj.getComponents().filter((c) => !this.toFilter.has(c.type));
        components.push(...comps);
        const children = currentObj.children;
        for (let i = children.length - 1; i >= 0; --i) {
          stack.push(children[i]);
        }
      }
      return components;
    }
    /**
     * Activates or deactivates components based on the specified boolean value.
     * @param active If true, components are set to active; otherwise, they are set to inactive.
     * @hidden
     */
    _setComponentsActive(active) {
      const comps = this._defaultControllerComponents;
      if (comps == void 0)
        return;
      for (let i = 0; i < comps.length; ++i) {
        comps[i].active = active;
      }
    }
    /**
     * Event handler triggered when XR input sources change.
     * Detects new XR input sources and initiates the loading of input profiles.
     * @param event The XR input source change event.
     * @hidden
     */
    _onInputSourcesChange(event) {
      if (this._isModelLoaded() && !this.mapToDefaultController) {
        this._setComponentsActive(false);
      }
      event.added.forEach((xrInputSource) => {
        if (xrInputSource.hand != null)
          return;
        if (this._handedness != xrInputSource.handedness)
          return;
        this.gamepad = xrInputSource.gamepad;
        const profile = this.customBasePath !== "" ? this.customBasePath : this.defaultBasePath + xrInputSource.profiles[0];
        this.url = profile + "/profile.json";
        this._profileJSON = _InputProfile.Cache.get(this.url) ?? null;
        if (this._profileJSON != null)
          return;
        fetch(this.url).then((res) => res.json()).then((out) => {
          this._profileJSON = out;
          _InputProfile.Cache.set(this.url, this._profileJSON);
          if (!this._isModelLoaded())
            this._loadAndMapGamepad(profile);
        }).catch((e) => {
          console.error(`Failed to load profile from ${this.url}. Reason:`, e);
        });
      });
    }
    /**
     * Checks if the 3D controller model is loaded.
     * @return True if the model is loaded; otherwise, false.
     * @hidden
     */
    _isModelLoaded() {
      return this._controllerModel !== null;
    }
    /**
     * Loads the 3D controller model and caches the mapping to the gamepad.
     * @param profile The path to the input profile.
     * @hidden
     */
    async _loadAndMapGamepad(profile) {
      const assetPath = profile + "/" + this._handedness + ".glb";
      this._controllerModel = this.defaultController;
      if (!this.mapToDefaultController) {
        try {
          this._controllerModel = await this.engine.scene.append(assetPath);
        } catch (e) {
          console.error(`Failed to load i-p controller model. Reason:`, e, `Continuing with ${this._handedness} default controller.`);
          this._setComponentsActive(true);
        }
        this._controllerModel.parent = this.object;
        this._controllerModel.setPositionLocal([0, 0, 0]);
        this._setComponentsActive(false);
        if (this.addVrModeSwitch)
          this._controllerModel.addComponent(VrModeActiveSwitch);
        this.onModelLoaded.notify();
      }
      this._cacheGamepadObjectsFromProfile(this._profileJSON, this._controllerModel);
      this._setHandTrackingControllers(this._controllerModel);
      this.update = () => this._mapGamepadInput();
    }
    /**
     * Caches gamepad objects (buttons, axes) from the loaded input profile.
     * @hidden
     */
    _cacheGamepadObjectsFromProfile(profile, obj) {
      const components = profile.layouts[this._handedness].components;
      if (!components)
        return;
      this._buttons = [];
      this._axes = [];
      for (const i in components) {
        const visualResponses = components[i].visualResponses;
        for (const j in visualResponses) {
          const visualResponse = visualResponses[j];
          const valueNode = visualResponse.valueNodeName;
          const minNode = visualResponse.minNodeName;
          const maxNode = visualResponse.maxNodeName;
          this._gamepadObjects[valueNode] = obj.findByNameRecursive(valueNode)[0];
          this._gamepadObjects[minNode] = obj.findByNameRecursive(minNode)[0];
          this._gamepadObjects[maxNode] = obj.findByNameRecursive(maxNode)[0];
          const indice = visualResponses[j].componentProperty;
          const response = {
            target: this._gamepadObjects[valueNode],
            min: this._gamepadObjects[minNode],
            max: this._gamepadObjects[maxNode],
            id: components[i].gamepadIndices[indice]
            // Assign a unique ID
          };
          switch (indice) {
            case "button":
              this._buttons.push(response);
              break;
            case "xAxis":
            case "yAxis":
              this._axes.push(response);
              break;
          }
        }
      }
    }
    /**
     * Assigns a transformed position and rotation to the target based on minimum and maximum values and a normalized input value.
     * @param target The target object to be transformed.
     * @param min The minimum object providing transformation limits.
     * @param max The maximum object providing transformation limits.
     * @param value The normalized input value.
     * @hidden
     */
    _assignTransform(target, min2, max2, value) {
      vec3_exports.lerp(_tempVec, min2.getPositionWorld(minTemp), max2.getPositionWorld(maxTemp), value);
      target.setPositionWorld(_tempVec);
      quat_exports.lerp(_tempQuat, min2.getRotationWorld(_tempRotation1), max2.getRotationWorld(_tempRotation2), value);
      quat_exports.normalize(_tempQuat, _tempQuat);
      target.setRotationWorld(_tempQuat);
    }
    /**
     * Maps input values (buttons, axes) to the 3D controller model.
     * @hidden
     */
    _mapGamepadInput() {
      for (const button of this._buttons) {
        const buttonValue = this.gamepad.buttons[button.id].value;
        this._assignTransform(button.target, button.min, button.max, buttonValue);
      }
      for (const axis of this._axes) {
        const axisValue = this.gamepad.axes[axis.id];
        const normalizedAxisValue = (axisValue + 1) / 2;
        this._assignTransform(axis.target, axis.min, axis.max, normalizedAxisValue);
      }
    }
  };
  var InputProfile = _InputProfile;
  __publicField(InputProfile, "TypeName", "input-profile");
  /**
   * A cache to store loaded profiles for reuse.
   */
  __publicField(InputProfile, "Cache", /* @__PURE__ */ new Map());
  __decorate11([
    property.enum(hands, 0)
  ], InputProfile.prototype, "handedness", void 0);
  __decorate11([
    property.string("https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@latest/dist/profiles/")
  ], InputProfile.prototype, "defaultBasePath", void 0);
  __decorate11([
    property.string()
  ], InputProfile.prototype, "customBasePath", void 0);
  __decorate11([
    property.object()
  ], InputProfile.prototype, "defaultController", void 0);
  __decorate11([
    property.object()
  ], InputProfile.prototype, "trackedHand", void 0);
  __decorate11([
    property.bool(false)
  ], InputProfile.prototype, "mapToDefaultController", void 0);
  __decorate11([
    property.bool(true)
  ], InputProfile.prototype, "addVrModeSwitch", void 0);

  // node_modules/@wonderlandengine/components/dist/orbital-camera.js
  var __decorate12 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var preventDefault2 = (e) => {
    e.preventDefault();
  };
  var tempVec4 = [0, 0, 0];
  var tempquat = quat_exports.create();
  var tempquat2 = quat_exports.create();
  var tempVec33 = vec3_exports.create();
  var OrbitalCamera = class extends Component {
    mouseButtonIndex = 0;
    radial = 5;
    minElevation = 0;
    maxElevation = 89.99;
    minZoom = 0.01;
    maxZoom = 10;
    xSensitivity = 0.5;
    ySensitivity = 0.5;
    zoomSensitivity = 0.02;
    damping = 0.9;
    _mouseDown = false;
    _origin = [0, 0, 0];
    _azimuth = 0;
    _polar = 45;
    _initialPinchDistance = 0;
    _touchStartX = 0;
    _touchStartY = 0;
    _azimuthSpeed = 0;
    _polarSpeed = 0;
    init() {
      this.object.getPositionWorld(this._origin);
    }
    start() {
      this._updateCamera();
    }
    onActivate() {
      const canvas2 = this.engine.canvas;
      if (this.mouseButtonIndex === 2) {
        canvas2.addEventListener("contextmenu", preventDefault2, { passive: false });
      }
      canvas2.addEventListener("mousedown", this._onMouseDown);
      canvas2.addEventListener("wheel", this._onMouseScroll, { passive: false });
      canvas2.addEventListener("touchstart", this._onTouchStart, { passive: false });
      canvas2.addEventListener("touchmove", this._onTouchMove, { passive: false });
      canvas2.addEventListener("touchend", this._onTouchEnd);
    }
    onDeactivate() {
      const canvas2 = this.engine.canvas;
      if (this.mouseButtonIndex === 2) {
        canvas2.removeEventListener("contextmenu", preventDefault2);
      }
      canvas2.removeEventListener("mousemove", this._onMouseMove);
      canvas2.removeEventListener("mousedown", this._onMouseDown);
      canvas2.removeEventListener("wheel", this._onMouseScroll);
      canvas2.removeEventListener("touchstart", this._onTouchStart);
      canvas2.removeEventListener("touchmove", this._onTouchMove);
      canvas2.removeEventListener("touchend", this._onTouchEnd);
      this._mouseDown = false;
      this._initialPinchDistance = 0;
      this._touchStartX = 0;
      this._touchStartY = 0;
      this._azimuthSpeed = 0;
      this._polarSpeed = 0;
    }
    update() {
      this._azimuthSpeed *= this.damping;
      this._polarSpeed *= this.damping;
      if (Math.abs(this._azimuthSpeed) < 0.01)
        this._azimuthSpeed = 0;
      if (Math.abs(this._polarSpeed) < 0.01)
        this._polarSpeed = 0;
      this._azimuth += this._azimuthSpeed;
      this._polar += this._polarSpeed;
      this._polar = Math.min(this.maxElevation, Math.max(this.minElevation, this._polar));
      if (this._azimuthSpeed !== 0 || this._polarSpeed !== 0) {
        this._updateCamera();
      }
    }
    /**
     * Get the closest position to the given position on the orbit sphere of the camera.
     * This can be used to get a position and rotation to transition to.
     *
     * You pass this a position object. The method calculates the closest positition and updates the position parameter.
     * It also sets the rotation parameter to reflect the rotate the camera will have when it is on the orbit sphere,
     * pointing towards the center.
     * @param position the position to get the closest position to
     * @param rotation the rotation to get the closest position to
     */
    getClosestPosition(position, rotation) {
      this.object.getRotationWorld(tempquat);
      this.object.lookAt(this._origin);
      this.object.getRotationWorld(tempquat2);
      if (quat_exports.dot(tempquat, tempquat2) < 0) {
        quat_exports.scale(tempquat2, tempquat2, -1);
      }
      this.object.setRotationWorld(tempquat);
      const directionToCamera = vec3_exports.create();
      vec3_exports.subtract(directionToCamera, position, this._origin);
      vec3_exports.normalize(directionToCamera, directionToCamera);
      const nearestPointOnSphere = vec3_exports.create();
      vec3_exports.scale(nearestPointOnSphere, directionToCamera, this.radial);
      vec3_exports.add(nearestPointOnSphere, nearestPointOnSphere, this._origin);
      vec3_exports.copy(position, nearestPointOnSphere);
      quat_exports.copy(rotation, tempquat2);
    }
    /**
     * Set the camera position based on the given position and calculate the rotation.
     * @param cameraPosition the position to set the camera to
     */
    setPosition(cameraPosition) {
      const centerOfOrbit = this._origin;
      vec3_exports.subtract(tempVec33, cameraPosition, centerOfOrbit);
      vec3_exports.normalize(tempVec33, tempVec33);
      const azimuth = Math.atan2(tempVec33[0], tempVec33[2]);
      const polar = Math.acos(tempVec33[1]);
      const azimuthDeg = rad2deg(azimuth);
      const polarDeg = 90 - rad2deg(polar);
      this._azimuth = azimuthDeg;
      this._polar = polarDeg;
    }
    /**
     * Update the camera position based on the current azimuth,
     * polar and radial values
     */
    _updateCamera() {
      const azimuthInRadians = deg2rad(this._azimuth);
      const polarInRadians = deg2rad(this._polar);
      tempVec4[0] = this.radial * Math.sin(azimuthInRadians) * Math.cos(polarInRadians);
      tempVec4[1] = this.radial * Math.sin(polarInRadians);
      tempVec4[2] = this.radial * Math.cos(azimuthInRadians) * Math.cos(polarInRadians);
      this.object.setPositionWorld(tempVec4);
      this.object.translateWorld(this._origin);
      this.object.lookAt(this._origin);
    }
    /* Mouse Event Handlers */
    _onMouseDown = (e) => {
      window.addEventListener("mouseup", this._onMouseUp);
      window.addEventListener("mousemove", this._onMouseMove);
      if (e.button === this.mouseButtonIndex) {
        this._mouseDown = true;
        document.body.style.cursor = "grabbing";
        if (e.button === 1) {
          e.preventDefault();
          return false;
        }
      }
    };
    _onMouseUp = (e) => {
      window.removeEventListener("mouseup", this._onMouseUp);
      window.removeEventListener("mousemove", this._onMouseMove);
      if (e.button === this.mouseButtonIndex) {
        this._mouseDown = false;
        document.body.style.cursor = "initial";
      }
    };
    _onMouseMove = (e) => {
      if (this.active && this._mouseDown) {
        if (this.active && this._mouseDown) {
          this._azimuthSpeed = -(e.movementX * this.xSensitivity);
          this._polarSpeed = e.movementY * this.ySensitivity;
        }
      }
    };
    _onMouseScroll = (e) => {
      e.preventDefault();
      this.radial *= 1 - e.deltaY * this.zoomSensitivity * -1e-3;
      this.radial = Math.min(this.maxZoom, Math.max(this.minZoom, this.radial));
      this._updateCamera();
    };
    /* Touch event handlers */
    _onTouchStart = (e) => {
      if (e.touches.length === 1) {
        e.preventDefault();
        this._touchStartX = e.touches[0].clientX;
        this._touchStartY = e.touches[0].clientY;
        this._mouseDown = true;
      } else if (e.touches.length === 2) {
        this._initialPinchDistance = this._getDistanceBetweenTouches(e.touches);
        e.preventDefault();
      }
    };
    _onTouchMove = (e) => {
      if (!this.active || !this._mouseDown) {
        return;
      }
      e.preventDefault();
      if (e.touches.length === 1) {
        const deltaX = e.touches[0].clientX - this._touchStartX;
        const deltaY = e.touches[0].clientY - this._touchStartY;
        this._azimuthSpeed = -(deltaX * this.xSensitivity);
        this._polarSpeed = deltaY * this.ySensitivity;
        this._touchStartX = e.touches[0].clientX;
        this._touchStartY = e.touches[0].clientY;
      } else if (e.touches.length === 2) {
        const currentPinchDistance = this._getDistanceBetweenTouches(e.touches);
        const pinchScale = this._initialPinchDistance / currentPinchDistance;
        this.radial *= pinchScale;
        this.radial = Math.min(this.maxZoom, Math.max(this.minZoom, this.radial));
        this._updateCamera();
        this._initialPinchDistance = currentPinchDistance;
      }
    };
    _onTouchEnd = (e) => {
      if (e.touches.length < 2) {
        this._mouseDown = false;
      }
      if (e.touches.length === 1) {
        this._touchStartX = e.touches[0].clientX;
        this._touchStartY = e.touches[0].clientY;
      }
    };
    /**
     * Helper function to calculate the distance between two touch points
     * @param touches list of touch points
     * @returns distance between the two touch points
     */
    _getDistanceBetweenTouches(touches) {
      const dx = touches[0].clientX - touches[1].clientX;
      const dy = touches[0].clientY - touches[1].clientY;
      return Math.sqrt(dx * dx + dy * dy);
    }
  };
  __publicField(OrbitalCamera, "TypeName", "orbital-camera");
  __decorate12([
    property.int()
  ], OrbitalCamera.prototype, "mouseButtonIndex", void 0);
  __decorate12([
    property.float(5)
  ], OrbitalCamera.prototype, "radial", void 0);
  __decorate12([
    property.float()
  ], OrbitalCamera.prototype, "minElevation", void 0);
  __decorate12([
    property.float(89.99)
  ], OrbitalCamera.prototype, "maxElevation", void 0);
  __decorate12([
    property.float()
  ], OrbitalCamera.prototype, "minZoom", void 0);
  __decorate12([
    property.float(10)
  ], OrbitalCamera.prototype, "maxZoom", void 0);
  __decorate12([
    property.float(0.5)
  ], OrbitalCamera.prototype, "xSensitivity", void 0);
  __decorate12([
    property.float(0.5)
  ], OrbitalCamera.prototype, "ySensitivity", void 0);
  __decorate12([
    property.float(0.02)
  ], OrbitalCamera.prototype, "zoomSensitivity", void 0);
  __decorate12([
    property.float(0.9)
  ], OrbitalCamera.prototype, "damping", void 0);

  // js/buttonCreate.js
  var buttonCreate_exports = {};
  __export(buttonCreate_exports, {
    ButtonComponent: () => ButtonComponent,
    hapticFeedback: () => hapticFeedback
  });

  // js/colyseus-client.js
  var colyseus_client_exports = {};
  __export(colyseus_client_exports, {
    ColyseusClient: () => ColyseusClient
  });
  var import_colyseus = __toESM(require_lib(), 1);
  var ColyseusClient = class extends Component {
    init() {
      this.client = new import_colyseus.Client("ws://localhost:2567");
      document.client = this.client;
      this.hostButton.addEventListener("click", this.onHostClick.bind(this));
      this.joinButton.addEventListener("click", this.onJoinClick.bind(this));
      this.leaveButton.addEventListener("click", this.onLeaveClick.bind(this));
    }
    onHostClick() {
      this.client.create("my_room").then(
        function(room) {
          this.setupRoom(room);
          console.log(room.sessionId, "created", room.name);
        }.bind(this)
      ).catch(function(e) {
        console.log("CREATE ERROR", e);
      });
    }
    onJoinClick() {
      this.client.join("my_room").then(
        function(room) {
          this.setupRoom(room);
          console.log(room.sessionId, "joined", room.name);
        }.bind(this)
      ).catch(function(e) {
        console.log("JOIN ERROR", e);
      });
    }
    onLeaveClick() {
      if (this.room) {
        this.room.leave().then(
          function() {
            console.log("Left the room", this.room.name);
            this.room = null;
          }.bind(this)
        ).catch(function(e) {
          console.log("LEAVE ERROR", e);
        });
      } else {
        console.log("No room to leave");
      }
    }
    setupRoom(room) {
      this.room = room;
      this.newPosBox = {};
      this.newPosCone = {};
      this.newPosSphere = {};
      room.state.box.onChange(() => {
        this.box.setTranslationWorld([this.room.state.box.x, this.room.state.box.y, this.room.state.box.z]);
      });
      room.state.cone.onChange(() => {
        this.cone.setTranslationWorld([this.room.state.cone.x, this.room.state.cone.y, this.room.state.cone.z]);
      });
      room.state.sphere.onChange(() => {
        this.sphere.setTranslationWorld([this.room.state.sphere.x, this.room.state.sphere.y, this.room.state.sphere.z]);
      });
    }
  };
  __publicField(ColyseusClient, "TypeName", "colyseus-client");
  __publicField(ColyseusClient, "Properties", {
    sphere: { type: Type.Object },
    box: { type: Type.Object },
    cone: { type: Type.Object },
    hostButton: { type: Type.Object },
    joinButton: { type: Type.Object },
    leaveButton: { type: Type.Object }
  });

  // js/buttonCreate.js
  function hapticFeedback(object, strength, duration) {
    const input = object.getComponent(InputComponent);
    if (input && input.xrInputSource) {
      const gamepad = input.xrInputSource.gamepad;
      if (gamepad && gamepad.hapticActuators)
        gamepad.hapticActuators[0].pulse(strength, duration);
    }
  }
  var ButtonComponent = class extends Component {
    static onRegister(engine) {
      engine.registerComponent(HowlerAudioSource);
      engine.registerComponent(CursorTarget);
    }
    returnPos = new Float32Array(3);
    start() {
      this.mesh = this.buttonMeshObject.getComponent(MeshComponent);
      this.defaultMaterial = this.mesh.material;
      this.buttonMeshObject.getTranslationLocal(this.returnPos);
      this.target = this.object.getComponent(CursorTarget) || this.object.addComponent(CursorTarget);
      this.soundClick = this.object.addComponent(HowlerAudioSource, {
        src: "sfx/click.wav",
        spatial: true
      });
      this.soundUnClick = this.object.addComponent(HowlerAudioSource, {
        src: "sfx/unclick.wav",
        spatial: true
      });
    }
    onActivate() {
      this.target.onHover.add(this.onHover);
      this.target.onUnhover.add(this.onUnhover);
      this.target.onDown.add(this.onDown);
      this.target.onUp.add(this.onUp);
    }
    onDeactivate() {
      this.target.onHover.remove(this.onHover);
      this.target.onUnhover.remove(this.onUnhover);
      this.target.onDown.remove(this.onDown);
      this.target.onUp.remove(this.onUp);
    }
    onHover = (_, cursor) => {
      this.mesh.material = this.hoverMaterial;
      if (cursor.type === "finger-cursor") {
        this.onDown(_, cursor);
      }
      hapticFeedback(cursor.object, 0.5, 50);
    };
    onDown = (_, cursor) => {
      console.log("Button pressed");
      this.soundClick.play();
      this.buttonMeshObject.translate([0, -0.1, 0]);
      hapticFeedback(cursor.object, 1, 20);
      let colyseusClient = this.object.getComponent(ColyseusClient);
      if (!colyseusClient) {
        colyseusClient = this.object.parent.getComponent(ColyseusClient);
      }
      if (colyseusClient) {
        colyseusClient.onHostClick();
      } else {
        console.error("ColyseusClient component not found!");
      }
    };
    onUp = (_, cursor) => {
      this.soundUnClick.play();
      this.buttonMeshObject.setTranslationLocal(this.returnPos);
      hapticFeedback(cursor.object, 0.7, 20);
    };
    onUnhover = (_, cursor) => {
      this.mesh.material = this.defaultMaterial;
      if (cursor.type === "finger-cursor") {
        this.onUp(_, cursor);
      }
      hapticFeedback(cursor.object, 0.3, 50);
    };
  };
  __publicField(ButtonComponent, "TypeName", "buttonCreate");
  __publicField(ButtonComponent, "Properties", {
    buttonMeshObject: Property.object(),
    hoverMaterial: Property.material()
  });

  // js/buttonJoin.js
  var buttonJoin_exports = {};
  __export(buttonJoin_exports, {
    ButtonComponent: () => ButtonComponent2,
    hapticFeedback: () => hapticFeedback2
  });
  function hapticFeedback2(object, strength, duration) {
    const input = object.getComponent(InputComponent);
    if (input && input.xrInputSource) {
      const gamepad = input.xrInputSource.gamepad;
      if (gamepad && gamepad.hapticActuators)
        gamepad.hapticActuators[0].pulse(strength, duration);
    }
  }
  var ButtonComponent2 = class extends Component {
    static onRegister(engine) {
      engine.registerComponent(HowlerAudioSource);
      engine.registerComponent(CursorTarget);
    }
    returnPos = new Float32Array(3);
    start() {
      this.mesh = this.buttonMeshObject.getComponent(MeshComponent);
      this.defaultMaterial = this.mesh.material;
      this.buttonMeshObject.getTranslationLocal(this.returnPos);
      this.target = this.object.getComponent(CursorTarget) || this.object.addComponent(CursorTarget);
      this.soundClick = this.object.addComponent(HowlerAudioSource, {
        src: "sfx/click.wav",
        spatial: true
      });
      this.soundUnClick = this.object.addComponent(HowlerAudioSource, {
        src: "sfx/unclick.wav",
        spatial: true
      });
    }
    onActivate() {
      this.target.onHover.add(this.onHover);
      this.target.onUnhover.add(this.onUnhover);
      this.target.onDown.add(this.onDown);
      this.target.onUp.add(this.onUp);
    }
    onDeactivate() {
      this.target.onHover.remove(this.onHover);
      this.target.onUnhover.remove(this.onUnhover);
      this.target.onDown.remove(this.onDown);
      this.target.onUp.remove(this.onUp);
    }
    onHover = (_, cursor) => {
      this.mesh.material = this.hoverMaterial;
      if (cursor.type === "finger-cursor") {
        this.onDown(_, cursor);
      }
      hapticFeedback2(cursor.object, 0.5, 50);
    };
    onDown = (_, cursor) => {
      console.log("Button pressed");
      this.soundClick.play();
      this.buttonMeshObject.translate([0, -0.1, 0]);
      hapticFeedback2(cursor.object, 1, 20);
      let colyseusClient = this.object.getComponent(ColyseusClient);
      if (!colyseusClient) {
        colyseusClient = this.object.parent.getComponent(ColyseusClient);
      }
      if (colyseusClient) {
        colyseusClient.onJoinClick();
      } else {
        console.error("ColyseusClient component not found!");
      }
    };
    onUp = (_, cursor) => {
      this.soundUnClick.play();
      this.buttonMeshObject.setTranslationLocal(this.returnPos);
      hapticFeedback2(cursor.object, 0.7, 20);
    };
    onUnhover = (_, cursor) => {
      this.mesh.material = this.defaultMaterial;
      if (cursor.type === "finger-cursor") {
        this.onUp(_, cursor);
      }
      hapticFeedback2(cursor.object, 0.3, 50);
    };
  };
  __publicField(ButtonComponent2, "TypeName", "buttonJoin");
  __publicField(ButtonComponent2, "Properties", {
    buttonMeshObject: Property.object(),
    hoverMaterial: Property.material()
  });

  // js/buttonLeave.js
  var buttonLeave_exports = {};
  __export(buttonLeave_exports, {
    ButtonComponent: () => ButtonComponent3,
    hapticFeedback: () => hapticFeedback3
  });
  function hapticFeedback3(object, strength, duration) {
    const input = object.getComponent(InputComponent);
    if (input && input.xrInputSource) {
      const gamepad = input.xrInputSource.gamepad;
      if (gamepad && gamepad.hapticActuators)
        gamepad.hapticActuators[0].pulse(strength, duration);
    }
  }
  var ButtonComponent3 = class extends Component {
    static onRegister(engine) {
      engine.registerComponent(HowlerAudioSource);
      engine.registerComponent(CursorTarget);
    }
    returnPos = new Float32Array(3);
    start() {
      this.mesh = this.buttonMeshObject.getComponent(MeshComponent);
      this.defaultMaterial = this.mesh.material;
      this.buttonMeshObject.getTranslationLocal(this.returnPos);
      this.target = this.object.getComponent(CursorTarget) || this.object.addComponent(CursorTarget);
      this.soundClick = this.object.addComponent(HowlerAudioSource, {
        src: "sfx/click.wav",
        spatial: true
      });
      this.soundUnClick = this.object.addComponent(HowlerAudioSource, {
        src: "sfx/unclick.wav",
        spatial: true
      });
    }
    onActivate() {
      this.target.onHover.add(this.onHover);
      this.target.onUnhover.add(this.onUnhover);
      this.target.onDown.add(this.onDown);
      this.target.onUp.add(this.onUp);
    }
    onDeactivate() {
      this.target.onHover.remove(this.onHover);
      this.target.onUnhover.remove(this.onUnhover);
      this.target.onDown.remove(this.onDown);
      this.target.onUp.remove(this.onUp);
    }
    onHover = (_, cursor) => {
      this.mesh.material = this.hoverMaterial;
      if (cursor.type === "finger-cursor") {
        this.onDown(_, cursor);
      }
      hapticFeedback3(cursor.object, 0.5, 50);
    };
    onDown = (_, cursor) => {
      console.log("Button pressed");
      this.soundClick.play();
      this.buttonMeshObject.translate([0, -0.1, 0]);
      hapticFeedback3(cursor.object, 1, 20);
      let colyseusClient = this.object.getComponent(ColyseusClient);
      if (!colyseusClient) {
        colyseusClient = this.object.parent.getComponent(ColyseusClient);
      }
      if (colyseusClient) {
        colyseusClient.onLeaveClick();
      } else {
        console.error("ColyseusClient component not found!");
      }
    };
    onUp = (_, cursor) => {
      this.soundUnClick.play();
      this.buttonMeshObject.setTranslationLocal(this.returnPos);
      hapticFeedback3(cursor.object, 0.7, 20);
    };
    onUnhover = (_, cursor) => {
      this.mesh.material = this.defaultMaterial;
      if (cursor.type === "finger-cursor") {
        this.onUp(_, cursor);
      }
      hapticFeedback3(cursor.object, 0.3, 50);
    };
  };
  __publicField(ButtonComponent3, "TypeName", "buttonLeave");
  __publicField(ButtonComponent3, "Properties", {
    buttonMeshObject: Property.object(),
    hoverMaterial: Property.material()
  });

  // js/network-controller.js
  var network_controller_exports = {};
  __export(network_controller_exports, {
    NetworkController: () => NetworkController
  });
  var NetworkController = class extends Component {
    start() {
      document.addEventListener("keypress", this.onKeyPress.bind(this));
      this.currentObject = "box";
      this.colyseusComponent = this.colyseusObject.getComponent("colyseus-client", 0);
      this.networkArray = [0, 0, 0];
      this.up = false;
      this.right = false;
      this.down = false;
      this.left = false;
      window.addEventListener("keydown", this.press.bind(this));
      window.addEventListener("keyup", this.release.bind(this));
    }
    onKeyPress(e) {
      const boxControls = this.box ? this.box.getComponent("wasd-controls", 0) : null;
      const coneControls = this.cone ? this.cone.getComponent("wasd-controls", 0) : null;
      const sphereControls = this.sphere ? this.sphere.getComponent("wasd-controls", 0) : null;
      switch (e.code) {
        case "KeyB":
          if (boxControls)
            boxControls.active = true;
          if (coneControls)
            coneControls.active = false;
          if (sphereControls)
            sphereControls.active = false;
          this.currentObject = "box";
          break;
        case "KeyN":
          if (boxControls)
            boxControls.active = false;
          if (coneControls)
            coneControls.active = false;
          if (sphereControls)
            sphereControls.active = true;
          this.currentObject = "sphere";
          break;
        case "KeyM":
          if (boxControls)
            boxControls.active = false;
          if (coneControls)
            coneControls.active = true;
          if (sphereControls)
            sphereControls.active = false;
          this.currentObject = "cone";
          break;
        case "KeyA":
        case "KeyS":
        case "KeyW":
        case "KeyD":
          this.moved = true;
          break;
      }
    }
    update(dt) {
      if (this.colyseusComponent && this.colyseusComponent.room) {
        this.networkArray = [0, 0, 0];
        if (this.up)
          this.networkArray[2] -= 1;
        if (this.down)
          this.networkArray[2] += 1;
        if (this.left)
          this.networkArray[0] -= 1;
        if (this.right)
          this.networkArray[0] += 1;
        this.networkArray[0] *= this.speed;
        this.networkArray[2] *= this.speed;
        if (this.networkArray.x != 0 && this.networkArray.z != 0)
          this.colyseusComponent.room.send("move", {
            object: this.currentObject,
            x: this.networkArray[0],
            z: this.networkArray[2]
          });
      }
    }
    press(e) {
      if (e.keyCode === 38 || e.keyCode === 87 || e.keyCode === 90) {
        this.up = true;
      } else if (e.keyCode === 39 || e.keyCode === 68) {
        this.right = true;
      } else if (e.keyCode === 40 || e.keyCode === 83) {
        this.down = true;
      } else if (e.keyCode === 37 || e.keyCode === 65 || e.keyCode === 81) {
        this.left = true;
      }
    }
    release(e) {
      if (e.keyCode === 38 || e.keyCode === 87 || e.keyCode === 90) {
        this.up = false;
      } else if (e.keyCode === 39 || e.keyCode === 68) {
        this.right = false;
      } else if (e.keyCode === 40 || e.keyCode === 83) {
        this.down = false;
      } else if (e.keyCode === 37 || e.keyCode === 65 || e.keyCode === 81) {
        this.left = false;
      }
    }
  };
  __publicField(NetworkController, "TypeName", "network-controller");
  __publicField(NetworkController, "Properties", {
    sphere: { type: Type.Object },
    box: { type: Type.Object },
    cone: { type: Type.Object },
    colyseusObject: { type: Type.Object },
    speed: { type: Type.Float, default: 0.1 }
  });

  // cache/js/_editor_index.js
  _registerEditor(dist_exports);
  _registerEditor(buttonCreate_exports);
  _registerEditor(buttonJoin_exports);
  _registerEditor(buttonLeave_exports);
  _registerEditor(colyseus_client_exports);
  _registerEditor(network_controller_exports);
})();
/*! Bundled license information:

howler/dist/howler.js:
  (*!
   *  howler.js v2.2.4
   *  howlerjs.com
   *
   *  (c) 2013-2020, James Simpson of GoldFire Studios
   *  goldfirestudios.com
   *
   *  MIT License
   *)
  (*!
   *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
   *  
   *  howler.js v2.2.4
   *  howlerjs.com
   *
   *  (c) 2013-2020, James Simpson of GoldFire Studios
   *  goldfirestudios.com
   *
   *  MIT License
   *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vbm9kZV9tb2R1bGVzL2hvd2xlci9kaXN0L2hvd2xlci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZWFyY3V0L3NyYy9lYXJjdXQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2NvbHlzZXVzLmpzL3NyYy9sZWdhY3kudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2NvbHlzZXVzLmpzL3NyYy9lcnJvcnMvU2VydmVyRXJyb3IudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2NvbHlzZXVzLmpzL3NyYy9tc2dwYWNrL2luZGV4LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy93cy9icm93c2VyLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9jb2x5c2V1cy5qcy9zcmMvdHJhbnNwb3J0L1dlYlNvY2tldFRyYW5zcG9ydC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvY29seXNldXMuanMvc3JjL0Nvbm5lY3Rpb24udHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2NvbHlzZXVzLmpzL3NyYy9Qcm90b2NvbC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvY29seXNldXMuanMvc3JjL3NlcmlhbGl6ZXIvU2VyaWFsaXplci50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvY29seXNldXMuanMvc3JjL2NvcmUvbmFub2V2ZW50cy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvY29seXNldXMuanMvc3JjL2NvcmUvc2lnbmFsLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AY29seXNldXMvc2NoZW1hL2J1aWxkL3VtZC9pbmRleC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvY29seXNldXMuanMvc3JjL1Jvb20udHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2h0dHBpZS94aHIvaW5kZXgubWpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9jb2x5c2V1cy5qcy9zcmMvSFRUUC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvY29seXNldXMuanMvc3JjL1N0b3JhZ2UudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2NvbHlzZXVzLmpzL3NyYy9BdXRoLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9jb2x5c2V1cy5qcy9zcmMvQ2xpZW50LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9jb2x5c2V1cy5qcy9zcmMvc2VyaWFsaXplci9TY2hlbWFTZXJpYWxpemVyLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9jb2x5c2V1cy5qcy9zcmMvc2VyaWFsaXplci9Ob25lU2VyaWFsaXplci50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvY29seXNldXMuanMvc3JjL2luZGV4LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvaW5kZXguanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9kaXN0L3Byb3BlcnR5LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9hcGkvZGlzdC9kZWNvcmF0b3JzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9hcGkvZGlzdC91dGlscy9vYmplY3QuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9kaXN0L3V0aWxzL2V2ZW50LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9hcGkvZGlzdC9yZXNvdXJjZXMvcmVzb3VyY2UuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9kaXN0L3V0aWxzL21pc2MuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9kaXN0L3dvbmRlcmxhbmQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9kaXN0L3Jlc291cmNlcy9tYXRlcmlhbC1tYW5hZ2VyLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9hcGkvZGlzdC9zY2VuZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvYXBpL2Rpc3QvdXRpbHMvYml0c2V0LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9hcGkvZGlzdC91dGlscy9sb2dnZXIuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9kaXN0L3V0aWxzL2Nib3IuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9kaXN0L3dhc20uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC84dGh3YWxsLWNhbWVyYS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L3V0aWxzL3dlYnhyLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvYW5jaG9yLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvY3Vyc29yLXRhcmdldC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZ2wtbWF0cml4L2VzbS9jb21tb24uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dsLW1hdHJpeC9lc20vbWF0My5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZ2wtbWF0cml4L2VzbS9tYXQ0LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9nbC1tYXRyaXgvZXNtL3F1YXQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dsLW1hdHJpeC9lc20vdmVjMy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZ2wtbWF0cml4L2VzbS92ZWM0LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9nbC1tYXRyaXgvZXNtL3F1YXQyLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvaGl0LXRlc3QtbG9jYXRpb24uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC9jdXJzb3IuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC9kZWJ1Zy1vYmplY3QuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC9kZXZpY2Utb3JpZW50YXRpb24tbG9vay5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L2Zpbmdlci1jdXJzb3IuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC9maXhlZC1mb3ZlYXRpb24uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC9oYW5kLXRyYWNraW5nLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvaG93bGVyLWF1ZGlvLWxpc3RlbmVyLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvaG93bGVyLWF1ZGlvLXNvdXJjZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L3V0aWxzL3V0aWxzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvaW1hZ2UtdGV4dHVyZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L21vdXNlLWxvb2suanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC9wbGF5ZXItaGVpZ2h0LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvdGFyZ2V0LWZyYW1lcmF0ZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L3RlbGVwb3J0LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvdHJhaWwuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC90d28tam9pbnQtaWstc29sdmVyLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvdmlkZW8tdGV4dHVyZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L3ZyLW1vZGUtYWN0aXZlLXN3aXRjaC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L3BsYW5lLWRldGVjdGlvbi5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L3ZybS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L3dhc2QtY29udHJvbHMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC9pbnB1dC1wcm9maWxlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3Qvb3JiaXRhbC1jYW1lcmEuanMiLCAiLi4vLi4vanMvYnV0dG9uQ3JlYXRlLmpzIiwgIi4uLy4uL2pzL2NvbHlzZXVzLWNsaWVudC5qcyIsICIuLi8uLi9qcy9idXR0b25Kb2luLmpzIiwgIi4uLy4uL2pzL2J1dHRvbkxlYXZlLmpzIiwgIi4uLy4uL2pzL25ldHdvcmstY29udHJvbGxlci5qcyIsICJfZWRpdG9yX2luZGV4LmpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvKiFcbiAqICBob3dsZXIuanMgdjIuMi40XG4gKiAgaG93bGVyanMuY29tXG4gKlxuICogIChjKSAyMDEzLTIwMjAsIEphbWVzIFNpbXBzb24gb2YgR29sZEZpcmUgU3R1ZGlvc1xuICogIGdvbGRmaXJlc3R1ZGlvcy5jb21cbiAqXG4gKiAgTUlUIExpY2Vuc2VcbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qKiBHbG9iYWwgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogQ3JlYXRlIHRoZSBnbG9iYWwgY29udHJvbGxlci4gQWxsIGNvbnRhaW5lZCBtZXRob2RzIGFuZCBwcm9wZXJ0aWVzIGFwcGx5XG4gICAqIHRvIGFsbCBzb3VuZHMgdGhhdCBhcmUgY3VycmVudGx5IHBsYXlpbmcgb3Igd2lsbCBiZSBpbiB0aGUgZnV0dXJlLlxuICAgKi9cbiAgdmFyIEhvd2xlckdsb2JhbCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaW5pdCgpO1xuICB9O1xuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgdGhlIGdsb2JhbCBIb3dsZXIgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIENyZWF0ZSBhIGdsb2JhbCBJRCBjb3VudGVyLlxuICAgICAgc2VsZi5fY291bnRlciA9IDEwMDA7XG5cbiAgICAgIC8vIFBvb2wgb2YgdW5sb2NrZWQgSFRNTDUgQXVkaW8gb2JqZWN0cy5cbiAgICAgIHNlbGYuX2h0bWw1QXVkaW9Qb29sID0gW107XG4gICAgICBzZWxmLmh0bWw1UG9vbFNpemUgPSAxMDtcblxuICAgICAgLy8gSW50ZXJuYWwgcHJvcGVydGllcy5cbiAgICAgIHNlbGYuX2NvZGVjcyA9IHt9O1xuICAgICAgc2VsZi5faG93bHMgPSBbXTtcbiAgICAgIHNlbGYuX211dGVkID0gZmFsc2U7XG4gICAgICBzZWxmLl92b2x1bWUgPSAxO1xuICAgICAgc2VsZi5fY2FuUGxheUV2ZW50ID0gJ2NhbnBsYXl0aHJvdWdoJztcbiAgICAgIHNlbGYuX25hdmlnYXRvciA9ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cubmF2aWdhdG9yKSA/IHdpbmRvdy5uYXZpZ2F0b3IgOiBudWxsO1xuXG4gICAgICAvLyBQdWJsaWMgcHJvcGVydGllcy5cbiAgICAgIHNlbGYubWFzdGVyR2FpbiA9IG51bGw7XG4gICAgICBzZWxmLm5vQXVkaW8gPSBmYWxzZTtcbiAgICAgIHNlbGYudXNpbmdXZWJBdWRpbyA9IHRydWU7XG4gICAgICBzZWxmLmF1dG9TdXNwZW5kID0gdHJ1ZTtcbiAgICAgIHNlbGYuY3R4ID0gbnVsbDtcblxuICAgICAgLy8gU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgdGhlIGF1dG8gYXVkaW8gdW5sb2NrZXIuXG4gICAgICBzZWxmLmF1dG9VbmxvY2sgPSB0cnVlO1xuXG4gICAgICAvLyBTZXR1cCB0aGUgdmFyaW91cyBzdGF0ZSB2YWx1ZXMgZm9yIGdsb2JhbCB0cmFja2luZy5cbiAgICAgIHNlbGYuX3NldHVwKCk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQvc2V0IHRoZSBnbG9iYWwgdm9sdW1lIGZvciBhbGwgc291bmRzLlxuICAgICAqIEBwYXJhbSAge0Zsb2F0fSB2b2wgVm9sdW1lIGZyb20gMC4wIHRvIDEuMC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXIvRmxvYXR9ICAgICBSZXR1cm5zIHNlbGYgb3IgY3VycmVudCB2b2x1bWUuXG4gICAgICovXG4gICAgdm9sdW1lOiBmdW5jdGlvbih2b2wpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG4gICAgICB2b2wgPSBwYXJzZUZsb2F0KHZvbCk7XG5cbiAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYW4gQXVkaW9Db250ZXh0IGNyZWF0ZWQgeWV0LCBydW4gdGhlIHNldHVwLlxuICAgICAgaWYgKCFzZWxmLmN0eCkge1xuICAgICAgICBzZXR1cEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHZvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgdm9sID49IDAgJiYgdm9sIDw9IDEpIHtcbiAgICAgICAgc2VsZi5fdm9sdW1lID0gdm9sO1xuXG4gICAgICAgIC8vIERvbid0IHVwZGF0ZSBhbnkgb2YgdGhlIG5vZGVzIGlmIHdlIGFyZSBtdXRlZC5cbiAgICAgICAgaWYgKHNlbGYuX211dGVkKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXaGVuIHVzaW5nIFdlYiBBdWRpbywgd2UganVzdCBuZWVkIHRvIGFkanVzdCB0aGUgbWFzdGVyIGdhaW4uXG4gICAgICAgIGlmIChzZWxmLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgICAgICBzZWxmLm1hc3RlckdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZSh2b2wsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFuZCBjaGFuZ2Ugdm9sdW1lIGZvciBhbGwgSFRNTDUgYXVkaW8gbm9kZXMuXG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICghc2VsZi5faG93bHNbaV0uX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgICAvLyBHZXQgYWxsIG9mIHRoZSBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2hvd2xzW2ldLl9nZXRTb3VuZElkcygpO1xuXG4gICAgICAgICAgICAvLyBMb29wIHRocm91Z2ggYWxsIHNvdW5kcyBhbmQgY2hhbmdlIHRoZSB2b2x1bWVzLlxuICAgICAgICAgICAgZm9yICh2YXIgaj0wOyBqPGlkcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9ob3dsc1tpXS5fc291bmRCeUlkKGlkc1tqXSk7XG5cbiAgICAgICAgICAgICAgaWYgKHNvdW5kICYmIHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAgICAgc291bmQuX25vZGUudm9sdW1lID0gc291bmQuX3ZvbHVtZSAqIHZvbDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZi5fdm9sdW1lO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgbXV0aW5nIGFuZCB1bm11dGluZyBnbG9iYWxseS5cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBtdXRlZCBJcyBtdXRlZCBvciBub3QuXG4gICAgICovXG4gICAgbXV0ZTogZnVuY3Rpb24obXV0ZWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYW4gQXVkaW9Db250ZXh0IGNyZWF0ZWQgeWV0LCBydW4gdGhlIHNldHVwLlxuICAgICAgaWYgKCFzZWxmLmN0eCkge1xuICAgICAgICBzZXR1cEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfVxuXG4gICAgICBzZWxmLl9tdXRlZCA9IG11dGVkO1xuXG4gICAgICAvLyBXaXRoIFdlYiBBdWRpbywgd2UganVzdCBuZWVkIHRvIG11dGUgdGhlIG1hc3RlciBnYWluLlxuICAgICAgaWYgKHNlbGYudXNpbmdXZWJBdWRpbykge1xuICAgICAgICBzZWxmLm1hc3RlckdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZShtdXRlZCA/IDAgOiBzZWxmLl92b2x1bWUsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgfVxuXG4gICAgICAvLyBMb29wIHRocm91Z2ggYW5kIG11dGUgYWxsIEhUTUw1IEF1ZGlvIG5vZGVzLlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICghc2VsZi5faG93bHNbaV0uX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgLy8gR2V0IGFsbCBvZiB0aGUgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICAgICAgICB2YXIgaWRzID0gc2VsZi5faG93bHNbaV0uX2dldFNvdW5kSWRzKCk7XG5cbiAgICAgICAgICAvLyBMb29wIHRocm91Z2ggYWxsIHNvdW5kcyBhbmQgbWFyayB0aGUgYXVkaW8gbm9kZSBhcyBtdXRlZC5cbiAgICAgICAgICBmb3IgKHZhciBqPTA7IGo8aWRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9ob3dsc1tpXS5fc291bmRCeUlkKGlkc1tqXSk7XG5cbiAgICAgICAgICAgIGlmIChzb3VuZCAmJiBzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5tdXRlZCA9IChtdXRlZCkgPyB0cnVlIDogc291bmQuX211dGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIHN0b3BwaW5nIGFsbCBzb3VuZHMgZ2xvYmFsbHkuXG4gICAgICovXG4gICAgc3RvcDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICAvLyBMb29wIHRocm91Z2ggYWxsIEhvd2xzIGFuZCBzdG9wIHRoZW0uXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc2VsZi5faG93bHNbaV0uc3RvcCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVW5sb2FkIGFuZCBkZXN0cm95IGFsbCBjdXJyZW50bHkgbG9hZGVkIEhvd2wgb2JqZWN0cy5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgdW5sb2FkOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIGZvciAodmFyIGk9c2VsZi5faG93bHMubGVuZ3RoLTE7IGk+PTA7IGktLSkge1xuICAgICAgICBzZWxmLl9ob3dsc1tpXS51bmxvYWQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIGEgbmV3IEF1ZGlvQ29udGV4dCB0byBtYWtlIHN1cmUgaXQgaXMgZnVsbHkgcmVzZXQuXG4gICAgICBpZiAoc2VsZi51c2luZ1dlYkF1ZGlvICYmIHNlbGYuY3R4ICYmIHR5cGVvZiBzZWxmLmN0eC5jbG9zZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgc2VsZi5jdHguY2xvc2UoKTtcbiAgICAgICAgc2VsZi5jdHggPSBudWxsO1xuICAgICAgICBzZXR1cEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgZm9yIGNvZGVjIHN1cHBvcnQgb2Ygc3BlY2lmaWMgZXh0ZW5zaW9uLlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gZXh0IEF1ZGlvIGZpbGUgZXh0ZW50aW9uLlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICovXG4gICAgY29kZWNzOiBmdW5jdGlvbihleHQpIHtcbiAgICAgIHJldHVybiAodGhpcyB8fCBIb3dsZXIpLl9jb2RlY3NbZXh0LnJlcGxhY2UoL154LS8sICcnKV07XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldHVwIHZhcmlvdXMgc3RhdGUgdmFsdWVzIGZvciBnbG9iYWwgdHJhY2tpbmcuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIF9zZXR1cDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICAvLyBLZWVwcyB0cmFjayBvZiB0aGUgc3VzcGVuZC9yZXN1bWUgc3RhdGUgb2YgdGhlIEF1ZGlvQ29udGV4dC5cbiAgICAgIHNlbGYuc3RhdGUgPSBzZWxmLmN0eCA/IHNlbGYuY3R4LnN0YXRlIHx8ICdzdXNwZW5kZWQnIDogJ3N1c3BlbmRlZCc7XG5cbiAgICAgIC8vIEF1dG9tYXRpY2FsbHkgYmVnaW4gdGhlIDMwLXNlY29uZCBzdXNwZW5kIHByb2Nlc3NcbiAgICAgIHNlbGYuX2F1dG9TdXNwZW5kKCk7XG5cbiAgICAgIC8vIENoZWNrIGlmIGF1ZGlvIGlzIGF2YWlsYWJsZS5cbiAgICAgIGlmICghc2VsZi51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICAgIC8vIE5vIGF1ZGlvIGlzIGF2YWlsYWJsZSBvbiB0aGlzIHN5c3RlbSBpZiBub0F1ZGlvIGlzIHNldCB0byB0cnVlLlxuICAgICAgICBpZiAodHlwZW9mIEF1ZGlvICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgdGVzdCA9IG5ldyBBdWRpbygpO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgY2FucGxheXRocm91Z2ggZXZlbnQgaXMgYXZhaWxhYmxlLlxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXN0Lm9uY2FucGxheXRocm91Z2ggPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHNlbGYuX2NhblBsYXlFdmVudCA9ICdjYW5wbGF5JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgIHNlbGYubm9BdWRpbyA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYubm9BdWRpbyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVGVzdCB0byBtYWtlIHN1cmUgYXVkaW8gaXNuJ3QgZGlzYWJsZWQgaW4gSW50ZXJuZXQgRXhwbG9yZXIuXG4gICAgICB0cnkge1xuICAgICAgICB2YXIgdGVzdCA9IG5ldyBBdWRpbygpO1xuICAgICAgICBpZiAodGVzdC5tdXRlZCkge1xuICAgICAgICAgIHNlbGYubm9BdWRpbyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cbiAgICAgIC8vIENoZWNrIGZvciBzdXBwb3J0ZWQgY29kZWNzLlxuICAgICAgaWYgKCFzZWxmLm5vQXVkaW8pIHtcbiAgICAgICAgc2VsZi5fc2V0dXBDb2RlY3MoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENoZWNrIGZvciBicm93c2VyIHN1cHBvcnQgZm9yIHZhcmlvdXMgY29kZWNzIGFuZCBjYWNoZSB0aGUgcmVzdWx0cy5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgX3NldHVwQ29kZWNzOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG4gICAgICB2YXIgYXVkaW9UZXN0ID0gbnVsbDtcblxuICAgICAgLy8gTXVzdCB3cmFwIGluIGEgdHJ5L2NhdGNoIGJlY2F1c2UgSUUxMSBpbiBzZXJ2ZXIgbW9kZSB0aHJvd3MgYW4gZXJyb3IuXG4gICAgICB0cnkge1xuICAgICAgICBhdWRpb1Rlc3QgPSAodHlwZW9mIEF1ZGlvICE9PSAndW5kZWZpbmVkJykgPyBuZXcgQXVkaW8oKSA6IG51bGw7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIGlmICghYXVkaW9UZXN0IHx8IHR5cGVvZiBhdWRpb1Rlc3QuY2FuUGxheVR5cGUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIHZhciBtcGVnVGVzdCA9IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbXBlZzsnKS5yZXBsYWNlKC9ebm8kLywgJycpO1xuXG4gICAgICAvLyBPcGVyYSB2ZXJzaW9uIDwzMyBoYXMgbWl4ZWQgTVAzIHN1cHBvcnQsIHNvIHdlIG5lZWQgdG8gY2hlY2sgZm9yIGFuZCBibG9jayBpdC5cbiAgICAgIHZhciB1YSA9IHNlbGYuX25hdmlnYXRvciA/IHNlbGYuX25hdmlnYXRvci51c2VyQWdlbnQgOiAnJztcbiAgICAgIHZhciBjaGVja09wZXJhID0gdWEubWF0Y2goL09QUlxcLyhcXGQrKS9nKTtcbiAgICAgIHZhciBpc09sZE9wZXJhID0gKGNoZWNrT3BlcmEgJiYgcGFyc2VJbnQoY2hlY2tPcGVyYVswXS5zcGxpdCgnLycpWzFdLCAxMCkgPCAzMyk7XG4gICAgICB2YXIgY2hlY2tTYWZhcmkgPSB1YS5pbmRleE9mKCdTYWZhcmknKSAhPT0gLTEgJiYgdWEuaW5kZXhPZignQ2hyb21lJykgPT09IC0xO1xuICAgICAgdmFyIHNhZmFyaVZlcnNpb24gPSB1YS5tYXRjaCgvVmVyc2lvblxcLyguKj8pIC8pO1xuICAgICAgdmFyIGlzT2xkU2FmYXJpID0gKGNoZWNrU2FmYXJpICYmIHNhZmFyaVZlcnNpb24gJiYgcGFyc2VJbnQoc2FmYXJpVmVyc2lvblsxXSwgMTApIDwgMTUpO1xuXG4gICAgICBzZWxmLl9jb2RlY3MgPSB7XG4gICAgICAgIG1wMzogISEoIWlzT2xkT3BlcmEgJiYgKG1wZWdUZXN0IHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbXAzOycpLnJlcGxhY2UoL15ubyQvLCAnJykpKSxcbiAgICAgICAgbXBlZzogISFtcGVnVGVzdCxcbiAgICAgICAgb3B1czogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL29nZzsgY29kZWNzPVwib3B1c1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgb2dnOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vb2dnOyBjb2RlY3M9XCJ2b3JiaXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIG9nYTogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL29nZzsgY29kZWNzPVwidm9yYmlzXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICB3YXY6ICEhKGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vd2F2OyBjb2RlY3M9XCIxXCInKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3dhdicpKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBhYWM6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9hYWM7JykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgY2FmOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8veC1jYWY7JykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgbTRhOiAhIShhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3gtbTRhOycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbTRhOycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vYWFjOycpKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBtNGI6ICEhKGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8veC1tNGI7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9tNGI7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9hYWM7JykpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIG1wNDogISEoYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby94LW1wNDsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL21wNDsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL2FhYzsnKSkucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgd2ViYTogISEoIWlzT2xkU2FmYXJpICYmIGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vd2VibTsgY29kZWNzPVwidm9yYmlzXCInKS5yZXBsYWNlKC9ebm8kLywgJycpKSxcbiAgICAgICAgd2VibTogISEoIWlzT2xkU2FmYXJpICYmIGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vd2VibTsgY29kZWNzPVwidm9yYmlzXCInKS5yZXBsYWNlKC9ebm8kLywgJycpKSxcbiAgICAgICAgZG9sYnk6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9tcDQ7IGNvZGVjcz1cImVjLTNcIicpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIGZsYWM6ICEhKGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8veC1mbGFjOycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vZmxhYzsnKSkucmVwbGFjZSgvXm5vJC8sICcnKVxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNvbWUgYnJvd3NlcnMvZGV2aWNlcyB3aWxsIG9ubHkgYWxsb3cgYXVkaW8gdG8gYmUgcGxheWVkIGFmdGVyIGEgdXNlciBpbnRlcmFjdGlvbi5cbiAgICAgKiBBdHRlbXB0IHRvIGF1dG9tYXRpY2FsbHkgdW5sb2NrIGF1ZGlvIG9uIHRoZSBmaXJzdCB1c2VyIGludGVyYWN0aW9uLlxuICAgICAqIENvbmNlcHQgZnJvbTogaHR0cDovL3BhdWxiYWthdXMuY29tL3R1dG9yaWFscy9odG1sNS93ZWItYXVkaW8tb24taW9zL1xuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBfdW5sb2NrQXVkaW86IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgLy8gT25seSBydW4gdGhpcyBpZiBXZWIgQXVkaW8gaXMgc3VwcG9ydGVkIGFuZCBpdCBoYXNuJ3QgYWxyZWFkeSBiZWVuIHVubG9ja2VkLlxuICAgICAgaWYgKHNlbGYuX2F1ZGlvVW5sb2NrZWQgfHwgIXNlbGYuY3R4KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc2VsZi5fYXVkaW9VbmxvY2tlZCA9IGZhbHNlO1xuICAgICAgc2VsZi5hdXRvVW5sb2NrID0gZmFsc2U7XG5cbiAgICAgIC8vIFNvbWUgbW9iaWxlIGRldmljZXMvcGxhdGZvcm1zIGhhdmUgZGlzdG9ydGlvbiBpc3N1ZXMgd2hlbiBvcGVuaW5nL2Nsb3NpbmcgdGFicyBhbmQvb3Igd2ViIHZpZXdzLlxuICAgICAgLy8gQnVncyBpbiB0aGUgYnJvd3NlciAoZXNwZWNpYWxseSBNb2JpbGUgU2FmYXJpKSBjYW4gY2F1c2UgdGhlIHNhbXBsZVJhdGUgdG8gY2hhbmdlIGZyb20gNDQxMDAgdG8gNDgwMDAuXG4gICAgICAvLyBCeSBjYWxsaW5nIEhvd2xlci51bmxvYWQoKSwgd2UgY3JlYXRlIGEgbmV3IEF1ZGlvQ29udGV4dCB3aXRoIHRoZSBjb3JyZWN0IHNhbXBsZVJhdGUuXG4gICAgICBpZiAoIXNlbGYuX21vYmlsZVVubG9hZGVkICYmIHNlbGYuY3R4LnNhbXBsZVJhdGUgIT09IDQ0MTAwKSB7XG4gICAgICAgIHNlbGYuX21vYmlsZVVubG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgc2VsZi51bmxvYWQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2NyYXRjaCBidWZmZXIgZm9yIGVuYWJsaW5nIGlPUyB0byBkaXNwb3NlIG9mIHdlYiBhdWRpbyBidWZmZXJzIGNvcnJlY3RseSwgYXMgcGVyOlxuICAgICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yNDExOTY4NFxuICAgICAgc2VsZi5fc2NyYXRjaEJ1ZmZlciA9IHNlbGYuY3R4LmNyZWF0ZUJ1ZmZlcigxLCAxLCAyMjA1MCk7XG5cbiAgICAgIC8vIENhbGwgdGhpcyBtZXRob2Qgb24gdG91Y2ggc3RhcnQgdG8gY3JlYXRlIGFuZCBwbGF5IGEgYnVmZmVyLFxuICAgICAgLy8gdGhlbiBjaGVjayBpZiB0aGUgYXVkaW8gYWN0dWFsbHkgcGxheWVkIHRvIGRldGVybWluZSBpZlxuICAgICAgLy8gYXVkaW8gaGFzIG5vdyBiZWVuIHVubG9ja2VkIG9uIGlPUywgQW5kcm9pZCwgZXRjLlxuICAgICAgdmFyIHVubG9jayA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgLy8gQ3JlYXRlIGEgcG9vbCBvZiB1bmxvY2tlZCBIVE1MNSBBdWRpbyBvYmplY3RzIHRoYXQgY2FuXG4gICAgICAgIC8vIGJlIHVzZWQgZm9yIHBsYXlpbmcgc291bmRzIHdpdGhvdXQgdXNlciBpbnRlcmFjdGlvbi4gSFRNTDVcbiAgICAgICAgLy8gQXVkaW8gb2JqZWN0cyBtdXN0IGJlIGluZGl2aWR1YWxseSB1bmxvY2tlZCwgYXMgb3Bwb3NlZFxuICAgICAgICAvLyB0byB0aGUgV2ViQXVkaW8gQVBJIHdoaWNoIG9ubHkgbmVlZHMgYSBzaW5nbGUgYWN0aXZhdGlvbi5cbiAgICAgICAgLy8gVGhpcyBtdXN0IG9jY3VyIGJlZm9yZSBXZWJBdWRpbyBzZXR1cCBvciB0aGUgc291cmNlLm9uZW5kZWRcbiAgICAgICAgLy8gZXZlbnQgd2lsbCBub3QgZmlyZS5cbiAgICAgICAgd2hpbGUgKHNlbGYuX2h0bWw1QXVkaW9Qb29sLmxlbmd0aCA8IHNlbGYuaHRtbDVQb29sU2l6ZSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgYXVkaW9Ob2RlID0gbmV3IEF1ZGlvKCk7XG5cbiAgICAgICAgICAgIC8vIE1hcmsgdGhpcyBBdWRpbyBvYmplY3QgYXMgdW5sb2NrZWQgdG8gZW5zdXJlIGl0IGNhbiBnZXQgcmV0dXJuZWRcbiAgICAgICAgICAgIC8vIHRvIHRoZSB1bmxvY2tlZCBwb29sIHdoZW4gcmVsZWFzZWQuXG4gICAgICAgICAgICBhdWRpb05vZGUuX3VubG9ja2VkID0gdHJ1ZTtcblxuICAgICAgICAgICAgLy8gQWRkIHRoZSBhdWRpbyBub2RlIHRvIHRoZSBwb29sLlxuICAgICAgICAgICAgc2VsZi5fcmVsZWFzZUh0bWw1QXVkaW8oYXVkaW9Ob2RlKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBzZWxmLm5vQXVkaW8gPSB0cnVlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFueSBhc3NpZ25lZCBhdWRpbyBub2RlcyBhbmQgdW5sb2NrIHRoZW0uXG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICghc2VsZi5faG93bHNbaV0uX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgICAvLyBHZXQgYWxsIG9mIHRoZSBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2hvd2xzW2ldLl9nZXRTb3VuZElkcygpO1xuXG4gICAgICAgICAgICAvLyBMb29wIHRocm91Z2ggYWxsIHNvdW5kcyBhbmQgdW5sb2NrIHRoZSBhdWRpbyBub2Rlcy5cbiAgICAgICAgICAgIGZvciAodmFyIGo9MDsgajxpZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5faG93bHNbaV0uX3NvdW5kQnlJZChpZHNbal0pO1xuXG4gICAgICAgICAgICAgIGlmIChzb3VuZCAmJiBzb3VuZC5fbm9kZSAmJiAhc291bmQuX25vZGUuX3VubG9ja2VkKSB7XG4gICAgICAgICAgICAgICAgc291bmQuX25vZGUuX3VubG9ja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5sb2FkKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGaXggQW5kcm9pZCBjYW4gbm90IHBsYXkgaW4gc3VzcGVuZCBzdGF0ZS5cbiAgICAgICAgc2VsZi5fYXV0b1Jlc3VtZSgpO1xuXG4gICAgICAgIC8vIENyZWF0ZSBhbiBlbXB0eSBidWZmZXIuXG4gICAgICAgIHZhciBzb3VyY2UgPSBzZWxmLmN0eC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcbiAgICAgICAgc291cmNlLmJ1ZmZlciA9IHNlbGYuX3NjcmF0Y2hCdWZmZXI7XG4gICAgICAgIHNvdXJjZS5jb25uZWN0KHNlbGYuY3R4LmRlc3RpbmF0aW9uKTtcblxuICAgICAgICAvLyBQbGF5IHRoZSBlbXB0eSBidWZmZXIuXG4gICAgICAgIGlmICh0eXBlb2Ygc291cmNlLnN0YXJ0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNvdXJjZS5ub3RlT24oMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc291cmNlLnN0YXJ0KDApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2FsbGluZyByZXN1bWUoKSBvbiBhIHN0YWNrIGluaXRpYXRlZCBieSB1c2VyIGdlc3R1cmUgaXMgd2hhdCBhY3R1YWxseSB1bmxvY2tzIHRoZSBhdWRpbyBvbiBBbmRyb2lkIENocm9tZSA+PSA1NS5cbiAgICAgICAgaWYgKHR5cGVvZiBzZWxmLmN0eC5yZXN1bWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBzZWxmLmN0eC5yZXN1bWUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldHVwIGEgdGltZW91dCB0byBjaGVjayB0aGF0IHdlIGFyZSB1bmxvY2tlZCBvbiB0aGUgbmV4dCBldmVudCBsb29wLlxuICAgICAgICBzb3VyY2Uub25lbmRlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNvdXJjZS5kaXNjb25uZWN0KDApO1xuXG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSB1bmxvY2tlZCBzdGF0ZSBhbmQgcHJldmVudCB0aGlzIGNoZWNrIGZyb20gaGFwcGVuaW5nIGFnYWluLlxuICAgICAgICAgIHNlbGYuX2F1ZGlvVW5sb2NrZWQgPSB0cnVlO1xuXG4gICAgICAgICAgLy8gUmVtb3ZlIHRoZSB0b3VjaCBzdGFydCBsaXN0ZW5lci5cbiAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdW5sb2NrLCB0cnVlKTtcbiAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHVubG9jaywgdHJ1ZSk7XG4gICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB1bmxvY2ssIHRydWUpO1xuICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB1bmxvY2ssIHRydWUpO1xuXG4gICAgICAgICAgLy8gTGV0IGFsbCBzb3VuZHMga25vdyB0aGF0IGF1ZGlvIGhhcyBiZWVuIHVubG9ja2VkLlxuICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgc2VsZi5faG93bHNbaV0uX2VtaXQoJ3VubG9jaycpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH07XG5cbiAgICAgIC8vIFNldHVwIGEgdG91Y2ggc3RhcnQgbGlzdGVuZXIgdG8gYXR0ZW1wdCBhbiB1bmxvY2sgaW4uXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdW5sb2NrLCB0cnVlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdW5sb2NrLCB0cnVlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdW5sb2NrLCB0cnVlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB1bmxvY2ssIHRydWUpO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IGFuIHVubG9ja2VkIEhUTUw1IEF1ZGlvIG9iamVjdCBmcm9tIHRoZSBwb29sLiBJZiBub25lIGFyZSBsZWZ0LFxuICAgICAqIHJldHVybiBhIG5ldyBBdWRpbyBvYmplY3QgYW5kIHRocm93IGEgd2FybmluZy5cbiAgICAgKiBAcmV0dXJuIHtBdWRpb30gSFRNTDUgQXVkaW8gb2JqZWN0LlxuICAgICAqL1xuICAgIF9vYnRhaW5IdG1sNUF1ZGlvOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIFJldHVybiB0aGUgbmV4dCBvYmplY3QgZnJvbSB0aGUgcG9vbCBpZiBvbmUgZXhpc3RzLlxuICAgICAgaWYgKHNlbGYuX2h0bWw1QXVkaW9Qb29sLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gc2VsZi5faHRtbDVBdWRpb1Bvb2wucG9wKCk7XG4gICAgICB9XG5cbiAgICAgIC8vLkNoZWNrIGlmIHRoZSBhdWRpbyBpcyBsb2NrZWQgYW5kIHRocm93IGEgd2FybmluZy5cbiAgICAgIHZhciB0ZXN0UGxheSA9IG5ldyBBdWRpbygpLnBsYXkoKTtcbiAgICAgIGlmICh0ZXN0UGxheSAmJiB0eXBlb2YgUHJvbWlzZSAhPT0gJ3VuZGVmaW5lZCcgJiYgKHRlc3RQbGF5IGluc3RhbmNlb2YgUHJvbWlzZSB8fCB0eXBlb2YgdGVzdFBsYXkudGhlbiA9PT0gJ2Z1bmN0aW9uJykpIHtcbiAgICAgICAgdGVzdFBsYXkuY2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdIVE1MNSBBdWRpbyBwb29sIGV4aGF1c3RlZCwgcmV0dXJuaW5nIHBvdGVudGlhbGx5IGxvY2tlZCBhdWRpbyBvYmplY3QuJyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IEF1ZGlvKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJldHVybiBhbiBhY3RpdmF0ZWQgSFRNTDUgQXVkaW8gb2JqZWN0IHRvIHRoZSBwb29sLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBfcmVsZWFzZUh0bWw1QXVkaW86IGZ1bmN0aW9uKGF1ZGlvKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICAvLyBEb24ndCBhZGQgYXVkaW8gdG8gdGhlIHBvb2wgaWYgd2UgZG9uJ3Qga25vdyBpZiBpdCBoYXMgYmVlbiB1bmxvY2tlZC5cbiAgICAgIGlmIChhdWRpby5fdW5sb2NrZWQpIHtcbiAgICAgICAgc2VsZi5faHRtbDVBdWRpb1Bvb2wucHVzaChhdWRpbyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBdXRvbWF0aWNhbGx5IHN1c3BlbmQgdGhlIFdlYiBBdWRpbyBBdWRpb0NvbnRleHQgYWZ0ZXIgbm8gc291bmQgaGFzIHBsYXllZCBmb3IgMzAgc2Vjb25kcy5cbiAgICAgKiBUaGlzIHNhdmVzIHByb2Nlc3NpbmcvZW5lcmd5IGFuZCBmaXhlcyB2YXJpb3VzIGJyb3dzZXItc3BlY2lmaWMgYnVncyB3aXRoIGF1ZGlvIGdldHRpbmcgc3R1Y2suXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIF9hdXRvU3VzcGVuZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmICghc2VsZi5hdXRvU3VzcGVuZCB8fCAhc2VsZi5jdHggfHwgdHlwZW9mIHNlbGYuY3R4LnN1c3BlbmQgPT09ICd1bmRlZmluZWQnIHx8ICFIb3dsZXIudXNpbmdXZWJBdWRpbykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGlmIGFueSBzb3VuZHMgYXJlIHBsYXlpbmcuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHNlbGYuX2hvd2xzW2ldLl93ZWJBdWRpbykge1xuICAgICAgICAgIGZvciAodmFyIGo9MDsgajxzZWxmLl9ob3dsc1tpXS5fc291bmRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBpZiAoIXNlbGYuX2hvd2xzW2ldLl9zb3VuZHNbal0uX3BhdXNlZCkge1xuICAgICAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHNlbGYuX3N1c3BlbmRUaW1lcikge1xuICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5fc3VzcGVuZFRpbWVyKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gc291bmQgaGFzIHBsYXllZCBhZnRlciAzMCBzZWNvbmRzLCBzdXNwZW5kIHRoZSBjb250ZXh0LlxuICAgICAgc2VsZi5fc3VzcGVuZFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFzZWxmLmF1dG9TdXNwZW5kKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5fc3VzcGVuZFRpbWVyID0gbnVsbDtcbiAgICAgICAgc2VsZi5zdGF0ZSA9ICdzdXNwZW5kaW5nJztcblxuICAgICAgICAvLyBIYW5kbGUgdXBkYXRpbmcgdGhlIHN0YXRlIG9mIHRoZSBhdWRpbyBjb250ZXh0IGFmdGVyIHN1c3BlbmRpbmcuXG4gICAgICAgIHZhciBoYW5kbGVTdXNwZW5zaW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5zdGF0ZSA9ICdzdXNwZW5kZWQnO1xuXG4gICAgICAgICAgaWYgKHNlbGYuX3Jlc3VtZUFmdGVyU3VzcGVuZCkge1xuICAgICAgICAgICAgZGVsZXRlIHNlbGYuX3Jlc3VtZUFmdGVyU3VzcGVuZDtcbiAgICAgICAgICAgIHNlbGYuX2F1dG9SZXN1bWUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gRWl0aGVyIHRoZSBzdGF0ZSBnZXRzIHN1c3BlbmRlZCBvciBpdCBpcyBpbnRlcnJ1cHRlZC5cbiAgICAgICAgLy8gRWl0aGVyIHdheSwgd2UgbmVlZCB0byB1cGRhdGUgdGhlIHN0YXRlIHRvIHN1c3BlbmRlZC5cbiAgICAgICAgc2VsZi5jdHguc3VzcGVuZCgpLnRoZW4oaGFuZGxlU3VzcGVuc2lvbiwgaGFuZGxlU3VzcGVuc2lvbik7XG4gICAgICB9LCAzMDAwMCk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBdXRvbWF0aWNhbGx5IHJlc3VtZSB0aGUgV2ViIEF1ZGlvIEF1ZGlvQ29udGV4dCB3aGVuIGEgbmV3IHNvdW5kIGlzIHBsYXllZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgX2F1dG9SZXN1bWU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBpZiAoIXNlbGYuY3R4IHx8IHR5cGVvZiBzZWxmLmN0eC5yZXN1bWUgPT09ICd1bmRlZmluZWQnIHx8ICFIb3dsZXIudXNpbmdXZWJBdWRpbykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChzZWxmLnN0YXRlID09PSAncnVubmluZycgJiYgc2VsZi5jdHguc3RhdGUgIT09ICdpbnRlcnJ1cHRlZCcgJiYgc2VsZi5fc3VzcGVuZFRpbWVyKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChzZWxmLl9zdXNwZW5kVGltZXIpO1xuICAgICAgICBzZWxmLl9zdXNwZW5kVGltZXIgPSBudWxsO1xuICAgICAgfSBlbHNlIGlmIChzZWxmLnN0YXRlID09PSAnc3VzcGVuZGVkJyB8fCBzZWxmLnN0YXRlID09PSAncnVubmluZycgJiYgc2VsZi5jdHguc3RhdGUgPT09ICdpbnRlcnJ1cHRlZCcpIHtcbiAgICAgICAgc2VsZi5jdHgucmVzdW1lKCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLnN0YXRlID0gJ3J1bm5pbmcnO1xuXG4gICAgICAgICAgLy8gRW1pdCB0byBhbGwgSG93bHMgdGhhdCB0aGUgYXVkaW8gaGFzIHJlc3VtZWQuXG4gICAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBzZWxmLl9ob3dsc1tpXS5fZW1pdCgncmVzdW1lJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoc2VsZi5fc3VzcGVuZFRpbWVyKSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYuX3N1c3BlbmRUaW1lcik7XG4gICAgICAgICAgc2VsZi5fc3VzcGVuZFRpbWVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzZWxmLnN0YXRlID09PSAnc3VzcGVuZGluZycpIHtcbiAgICAgICAgc2VsZi5fcmVzdW1lQWZ0ZXJTdXNwZW5kID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuICB9O1xuXG4gIC8vIFNldHVwIHRoZSBnbG9iYWwgYXVkaW8gY29udHJvbGxlci5cbiAgdmFyIEhvd2xlciA9IG5ldyBIb3dsZXJHbG9iYWwoKTtcblxuICAvKiogR3JvdXAgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGF1ZGlvIGdyb3VwIGNvbnRyb2xsZXIuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvIFBhc3NlZCBpbiBwcm9wZXJ0aWVzIGZvciB0aGlzIGdyb3VwLlxuICAgKi9cbiAgdmFyIEhvd2wgPSBmdW5jdGlvbihvKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gVGhyb3cgYW4gZXJyb3IgaWYgbm8gc291cmNlIGlzIHByb3ZpZGVkLlxuICAgIGlmICghby5zcmMgfHwgby5zcmMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdBbiBhcnJheSBvZiBzb3VyY2UgZmlsZXMgbXVzdCBiZSBwYXNzZWQgd2l0aCBhbnkgbmV3IEhvd2wuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc2VsZi5pbml0KG8pO1xuICB9O1xuICBIb3dsLnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIGEgbmV3IEhvd2wgZ3JvdXAgb2JqZWN0LlxuICAgICAqIEBwYXJhbSAge09iamVjdH0gbyBQYXNzZWQgaW4gcHJvcGVydGllcyBmb3IgdGhpcyBncm91cC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIGluaXQ6IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhbiBBdWRpb0NvbnRleHQgY3JlYXRlZCB5ZXQsIHJ1biB0aGUgc2V0dXAuXG4gICAgICBpZiAoIUhvd2xlci5jdHgpIHtcbiAgICAgICAgc2V0dXBBdWRpb0NvbnRleHQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2V0dXAgdXNlci1kZWZpbmVkIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgICAgIHNlbGYuX2F1dG9wbGF5ID0gby5hdXRvcGxheSB8fCBmYWxzZTtcbiAgICAgIHNlbGYuX2Zvcm1hdCA9ICh0eXBlb2Ygby5mb3JtYXQgIT09ICdzdHJpbmcnKSA/IG8uZm9ybWF0IDogW28uZm9ybWF0XTtcbiAgICAgIHNlbGYuX2h0bWw1ID0gby5odG1sNSB8fCBmYWxzZTtcbiAgICAgIHNlbGYuX211dGVkID0gby5tdXRlIHx8IGZhbHNlO1xuICAgICAgc2VsZi5fbG9vcCA9IG8ubG9vcCB8fCBmYWxzZTtcbiAgICAgIHNlbGYuX3Bvb2wgPSBvLnBvb2wgfHwgNTtcbiAgICAgIHNlbGYuX3ByZWxvYWQgPSAodHlwZW9mIG8ucHJlbG9hZCA9PT0gJ2Jvb2xlYW4nIHx8IG8ucHJlbG9hZCA9PT0gJ21ldGFkYXRhJykgPyBvLnByZWxvYWQgOiB0cnVlO1xuICAgICAgc2VsZi5fcmF0ZSA9IG8ucmF0ZSB8fCAxO1xuICAgICAgc2VsZi5fc3ByaXRlID0gby5zcHJpdGUgfHwge307XG4gICAgICBzZWxmLl9zcmMgPSAodHlwZW9mIG8uc3JjICE9PSAnc3RyaW5nJykgPyBvLnNyYyA6IFtvLnNyY107XG4gICAgICBzZWxmLl92b2x1bWUgPSBvLnZvbHVtZSAhPT0gdW5kZWZpbmVkID8gby52b2x1bWUgOiAxO1xuICAgICAgc2VsZi5feGhyID0ge1xuICAgICAgICBtZXRob2Q6IG8ueGhyICYmIG8ueGhyLm1ldGhvZCA/IG8ueGhyLm1ldGhvZCA6ICdHRVQnLFxuICAgICAgICBoZWFkZXJzOiBvLnhociAmJiBvLnhoci5oZWFkZXJzID8gby54aHIuaGVhZGVycyA6IG51bGwsXG4gICAgICAgIHdpdGhDcmVkZW50aWFsczogby54aHIgJiYgby54aHIud2l0aENyZWRlbnRpYWxzID8gby54aHIud2l0aENyZWRlbnRpYWxzIDogZmFsc2UsXG4gICAgICB9O1xuXG4gICAgICAvLyBTZXR1cCBhbGwgb3RoZXIgZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5fZHVyYXRpb24gPSAwO1xuICAgICAgc2VsZi5fc3RhdGUgPSAndW5sb2FkZWQnO1xuICAgICAgc2VsZi5fc291bmRzID0gW107XG4gICAgICBzZWxmLl9lbmRUaW1lcnMgPSB7fTtcbiAgICAgIHNlbGYuX3F1ZXVlID0gW107XG4gICAgICBzZWxmLl9wbGF5TG9jayA9IGZhbHNlO1xuXG4gICAgICAvLyBTZXR1cCBldmVudCBsaXN0ZW5lcnMuXG4gICAgICBzZWxmLl9vbmVuZCA9IG8ub25lbmQgPyBbe2ZuOiBvLm9uZW5kfV0gOiBbXTtcbiAgICAgIHNlbGYuX29uZmFkZSA9IG8ub25mYWRlID8gW3tmbjogby5vbmZhZGV9XSA6IFtdO1xuICAgICAgc2VsZi5fb25sb2FkID0gby5vbmxvYWQgPyBbe2ZuOiBvLm9ubG9hZH1dIDogW107XG4gICAgICBzZWxmLl9vbmxvYWRlcnJvciA9IG8ub25sb2FkZXJyb3IgPyBbe2ZuOiBvLm9ubG9hZGVycm9yfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ucGxheWVycm9yID0gby5vbnBsYXllcnJvciA/IFt7Zm46IG8ub25wbGF5ZXJyb3J9XSA6IFtdO1xuICAgICAgc2VsZi5fb25wYXVzZSA9IG8ub25wYXVzZSA/IFt7Zm46IG8ub25wYXVzZX1dIDogW107XG4gICAgICBzZWxmLl9vbnBsYXkgPSBvLm9ucGxheSA/IFt7Zm46IG8ub25wbGF5fV0gOiBbXTtcbiAgICAgIHNlbGYuX29uc3RvcCA9IG8ub25zdG9wID8gW3tmbjogby5vbnN0b3B9XSA6IFtdO1xuICAgICAgc2VsZi5fb25tdXRlID0gby5vbm11dGUgPyBbe2ZuOiBvLm9ubXV0ZX1dIDogW107XG4gICAgICBzZWxmLl9vbnZvbHVtZSA9IG8ub252b2x1bWUgPyBbe2ZuOiBvLm9udm9sdW1lfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ucmF0ZSA9IG8ub25yYXRlID8gW3tmbjogby5vbnJhdGV9XSA6IFtdO1xuICAgICAgc2VsZi5fb25zZWVrID0gby5vbnNlZWsgPyBbe2ZuOiBvLm9uc2Vla31dIDogW107XG4gICAgICBzZWxmLl9vbnVubG9jayA9IG8ub251bmxvY2sgPyBbe2ZuOiBvLm9udW5sb2NrfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ucmVzdW1lID0gW107XG5cbiAgICAgIC8vIFdlYiBBdWRpbyBvciBIVE1MNSBBdWRpbz9cbiAgICAgIHNlbGYuX3dlYkF1ZGlvID0gSG93bGVyLnVzaW5nV2ViQXVkaW8gJiYgIXNlbGYuX2h0bWw1O1xuXG4gICAgICAvLyBBdXRvbWF0aWNhbGx5IHRyeSB0byBlbmFibGUgYXVkaW8uXG4gICAgICBpZiAodHlwZW9mIEhvd2xlci5jdHggIT09ICd1bmRlZmluZWQnICYmIEhvd2xlci5jdHggJiYgSG93bGVyLmF1dG9VbmxvY2spIHtcbiAgICAgICAgSG93bGVyLl91bmxvY2tBdWRpbygpO1xuICAgICAgfVxuXG4gICAgICAvLyBLZWVwIHRyYWNrIG9mIHRoaXMgSG93bCBncm91cCBpbiB0aGUgZ2xvYmFsIGNvbnRyb2xsZXIuXG4gICAgICBIb3dsZXIuX2hvd2xzLnB1c2goc2VsZik7XG5cbiAgICAgIC8vIElmIHRoZXkgc2VsZWN0ZWQgYXV0b3BsYXksIGFkZCBhIHBsYXkgZXZlbnQgdG8gdGhlIGxvYWQgcXVldWUuXG4gICAgICBpZiAoc2VsZi5fYXV0b3BsYXkpIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdwbGF5JyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5wbGF5KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gTG9hZCB0aGUgc291cmNlIGZpbGUgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gICAgICBpZiAoc2VsZi5fcHJlbG9hZCAmJiBzZWxmLl9wcmVsb2FkICE9PSAnbm9uZScpIHtcbiAgICAgICAgc2VsZi5sb2FkKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBMb2FkIHRoZSBhdWRpbyBmaWxlLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBsb2FkOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciB1cmwgPSBudWxsO1xuXG4gICAgICAvLyBJZiBubyBhdWRpbyBpcyBhdmFpbGFibGUsIHF1aXQgaW1tZWRpYXRlbHkuXG4gICAgICBpZiAoSG93bGVyLm5vQXVkaW8pIHtcbiAgICAgICAgc2VsZi5fZW1pdCgnbG9hZGVycm9yJywgbnVsbCwgJ05vIGF1ZGlvIHN1cHBvcnQuJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gTWFrZSBzdXJlIG91ciBzb3VyY2UgaXMgaW4gYW4gYXJyYXkuXG4gICAgICBpZiAodHlwZW9mIHNlbGYuX3NyYyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgc2VsZi5fc3JjID0gW3NlbGYuX3NyY107XG4gICAgICB9XG5cbiAgICAgIC8vIExvb3AgdGhyb3VnaCB0aGUgc291cmNlcyBhbmQgcGljayB0aGUgZmlyc3Qgb25lIHRoYXQgaXMgY29tcGF0aWJsZS5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9zcmMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGV4dCwgc3RyO1xuXG4gICAgICAgIGlmIChzZWxmLl9mb3JtYXQgJiYgc2VsZi5fZm9ybWF0W2ldKSB7XG4gICAgICAgICAgLy8gSWYgYW4gZXh0ZW5zaW9uIHdhcyBzcGVjaWZpZWQsIHVzZSB0aGF0IGluc3RlYWQuXG4gICAgICAgICAgZXh0ID0gc2VsZi5fZm9ybWF0W2ldO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgc291cmNlIGlzIGEgc3RyaW5nLlxuICAgICAgICAgIHN0ciA9IHNlbGYuX3NyY1tpXTtcbiAgICAgICAgICBpZiAodHlwZW9mIHN0ciAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHNlbGYuX2VtaXQoJ2xvYWRlcnJvcicsIG51bGwsICdOb24tc3RyaW5nIGZvdW5kIGluIHNlbGVjdGVkIGF1ZGlvIHNvdXJjZXMgLSBpZ25vcmluZy4nKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEV4dHJhY3QgdGhlIGZpbGUgZXh0ZW5zaW9uIGZyb20gdGhlIFVSTCBvciBiYXNlNjQgZGF0YSBVUkkuXG4gICAgICAgICAgZXh0ID0gL15kYXRhOmF1ZGlvXFwvKFteOyxdKyk7L2kuZXhlYyhzdHIpO1xuICAgICAgICAgIGlmICghZXh0KSB7XG4gICAgICAgICAgICBleHQgPSAvXFwuKFteLl0rKSQvLmV4ZWMoc3RyLnNwbGl0KCc/JywgMSlbMF0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChleHQpIHtcbiAgICAgICAgICAgIGV4dCA9IGV4dFsxXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIExvZyBhIHdhcm5pbmcgaWYgbm8gZXh0ZW5zaW9uIHdhcyBmb3VuZC5cbiAgICAgICAgaWYgKCFleHQpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ05vIGZpbGUgZXh0ZW5zaW9uIHdhcyBmb3VuZC4gQ29uc2lkZXIgdXNpbmcgdGhlIFwiZm9ybWF0XCIgcHJvcGVydHkgb3Igc3BlY2lmeSBhbiBleHRlbnNpb24uJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBpZiB0aGlzIGV4dGVuc2lvbiBpcyBhdmFpbGFibGUuXG4gICAgICAgIGlmIChleHQgJiYgSG93bGVyLmNvZGVjcyhleHQpKSB7XG4gICAgICAgICAgdXJsID0gc2VsZi5fc3JjW2ldO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghdXJsKSB7XG4gICAgICAgIHNlbGYuX2VtaXQoJ2xvYWRlcnJvcicsIG51bGwsICdObyBjb2RlYyBzdXBwb3J0IGZvciBzZWxlY3RlZCBhdWRpbyBzb3VyY2VzLicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNlbGYuX3NyYyA9IHVybDtcbiAgICAgIHNlbGYuX3N0YXRlID0gJ2xvYWRpbmcnO1xuXG4gICAgICAvLyBJZiB0aGUgaG9zdGluZyBwYWdlIGlzIEhUVFBTIGFuZCB0aGUgc291cmNlIGlzbid0LFxuICAgICAgLy8gZHJvcCBkb3duIHRvIEhUTUw1IEF1ZGlvIHRvIGF2b2lkIE1peGVkIENvbnRlbnQgZXJyb3JzLlxuICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOicgJiYgdXJsLnNsaWNlKDAsIDUpID09PSAnaHR0cDonKSB7XG4gICAgICAgIHNlbGYuX2h0bWw1ID0gdHJ1ZTtcbiAgICAgICAgc2VsZi5fd2ViQXVkaW8gPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIGEgbmV3IHNvdW5kIG9iamVjdCBhbmQgYWRkIGl0IHRvIHRoZSBwb29sLlxuICAgICAgbmV3IFNvdW5kKHNlbGYpO1xuXG4gICAgICAvLyBMb2FkIGFuZCBkZWNvZGUgdGhlIGF1ZGlvIGRhdGEgZm9yIHBsYXliYWNrLlxuICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgIGxvYWRCdWZmZXIoc2VsZik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQbGF5IGEgc291bmQgb3IgcmVzdW1lIHByZXZpb3VzIHBsYXliYWNrLlxuICAgICAqIEBwYXJhbSAge1N0cmluZy9OdW1iZXJ9IHNwcml0ZSAgIFNwcml0ZSBuYW1lIGZvciBzcHJpdGUgcGxheWJhY2sgb3Igc291bmQgaWQgdG8gY29udGludWUgcHJldmlvdXMuXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gaW50ZXJuYWwgSW50ZXJuYWwgVXNlOiB0cnVlIHByZXZlbnRzIGV2ZW50IGZpcmluZy5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICAgICAgIFNvdW5kIElELlxuICAgICAqL1xuICAgIHBsYXk6IGZ1bmN0aW9uKHNwcml0ZSwgaW50ZXJuYWwpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBpZCA9IG51bGw7XG5cbiAgICAgIC8vIERldGVybWluZSBpZiBhIHNwcml0ZSwgc291bmQgaWQgb3Igbm90aGluZyB3YXMgcGFzc2VkXG4gICAgICBpZiAodHlwZW9mIHNwcml0ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgaWQgPSBzcHJpdGU7XG4gICAgICAgIHNwcml0ZSA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzcHJpdGUgPT09ICdzdHJpbmcnICYmIHNlbGYuX3N0YXRlID09PSAnbG9hZGVkJyAmJiAhc2VsZi5fc3ByaXRlW3Nwcml0ZV0pIHtcbiAgICAgICAgLy8gSWYgdGhlIHBhc3NlZCBzcHJpdGUgZG9lc24ndCBleGlzdCwgZG8gbm90aGluZy5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzcHJpdGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8vIFVzZSB0aGUgZGVmYXVsdCBzb3VuZCBzcHJpdGUgKHBsYXlzIHRoZSBmdWxsIGF1ZGlvIGxlbmd0aCkuXG4gICAgICAgIHNwcml0ZSA9ICdfX2RlZmF1bHQnO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGEgc2luZ2xlIHBhdXNlZCBzb3VuZCB0aGF0IGlzbid0IGVuZGVkLlxuICAgICAgICAvLyBJZiB0aGVyZSBpcywgcGxheSB0aGF0IHNvdW5kLiBJZiBub3QsIGNvbnRpbnVlIGFzIHVzdWFsLlxuICAgICAgICBpZiAoIXNlbGYuX3BsYXlMb2NrKSB7XG4gICAgICAgICAgdmFyIG51bSA9IDA7XG4gICAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHNlbGYuX3NvdW5kc1tpXS5fcGF1c2VkICYmICFzZWxmLl9zb3VuZHNbaV0uX2VuZGVkKSB7XG4gICAgICAgICAgICAgIG51bSsrO1xuICAgICAgICAgICAgICBpZCA9IHNlbGYuX3NvdW5kc1tpXS5faWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKG51bSA9PT0gMSkge1xuICAgICAgICAgICAgc3ByaXRlID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWQgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBHZXQgdGhlIHNlbGVjdGVkIG5vZGUsIG9yIGdldCBvbmUgZnJvbSB0aGUgcG9vbC5cbiAgICAgIHZhciBzb3VuZCA9IGlkID8gc2VsZi5fc291bmRCeUlkKGlkKSA6IHNlbGYuX2luYWN0aXZlU291bmQoKTtcblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGRvZXNuJ3QgZXhpc3QsIGRvIG5vdGhpbmcuXG4gICAgICBpZiAoIXNvdW5kKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyBTZWxlY3QgdGhlIHNwcml0ZSBkZWZpbml0aW9uLlxuICAgICAgaWYgKGlkICYmICFzcHJpdGUpIHtcbiAgICAgICAgc3ByaXRlID0gc291bmQuX3Nwcml0ZSB8fCAnX19kZWZhdWx0JztcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIHdlIG11c3Qgd2FpdCB0byBnZXQgdGhlIGF1ZGlvJ3MgZHVyYXRpb24uXG4gICAgICAvLyBXZSBhbHNvIG5lZWQgdG8gd2FpdCB0byBtYWtlIHN1cmUgd2UgZG9uJ3QgcnVuIGludG8gcmFjZSBjb25kaXRpb25zIHdpdGhcbiAgICAgIC8vIHRoZSBvcmRlciBvZiBmdW5jdGlvbiBjYWxscy5cbiAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgICAgLy8gU2V0IHRoZSBzcHJpdGUgdmFsdWUgb24gdGhpcyBzb3VuZC5cbiAgICAgICAgc291bmQuX3Nwcml0ZSA9IHNwcml0ZTtcblxuICAgICAgICAvLyBNYXJrIHRoaXMgc291bmQgYXMgbm90IGVuZGVkIGluIGNhc2UgYW5vdGhlciBzb3VuZCBpcyBwbGF5ZWQgYmVmb3JlIHRoaXMgb25lIGxvYWRzLlxuICAgICAgICBzb3VuZC5fZW5kZWQgPSBmYWxzZTtcblxuICAgICAgICAvLyBBZGQgdGhlIHNvdW5kIHRvIHRoZSBxdWV1ZSB0byBiZSBwbGF5ZWQgb24gbG9hZC5cbiAgICAgICAgdmFyIHNvdW5kSWQgPSBzb3VuZC5faWQ7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAncGxheScsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYucGxheShzb3VuZElkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzb3VuZElkO1xuICAgICAgfVxuXG4gICAgICAvLyBEb24ndCBwbGF5IHRoZSBzb3VuZCBpZiBhbiBpZCB3YXMgcGFzc2VkIGFuZCBpdCBpcyBhbHJlYWR5IHBsYXlpbmcuXG4gICAgICBpZiAoaWQgJiYgIXNvdW5kLl9wYXVzZWQpIHtcbiAgICAgICAgLy8gVHJpZ2dlciB0aGUgcGxheSBldmVudCwgaW4gb3JkZXIgdG8ga2VlcCBpdGVyYXRpbmcgdGhyb3VnaCBxdWV1ZS5cbiAgICAgICAgaWYgKCFpbnRlcm5hbCkge1xuICAgICAgICAgIHNlbGYuX2xvYWRRdWV1ZSgncGxheScpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNvdW5kLl9pZDtcbiAgICAgIH1cblxuICAgICAgLy8gTWFrZSBzdXJlIHRoZSBBdWRpb0NvbnRleHQgaXNuJ3Qgc3VzcGVuZGVkLCBhbmQgcmVzdW1lIGl0IGlmIGl0IGlzLlxuICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgIEhvd2xlci5fYXV0b1Jlc3VtZSgpO1xuICAgICAgfVxuXG4gICAgICAvLyBEZXRlcm1pbmUgaG93IGxvbmcgdG8gcGxheSBmb3IgYW5kIHdoZXJlIHRvIHN0YXJ0IHBsYXlpbmcuXG4gICAgICB2YXIgc2VlayA9IE1hdGgubWF4KDAsIHNvdW5kLl9zZWVrID4gMCA/IHNvdW5kLl9zZWVrIDogc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMF0gLyAxMDAwKTtcbiAgICAgIHZhciBkdXJhdGlvbiA9IE1hdGgubWF4KDAsICgoc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMF0gKyBzZWxmLl9zcHJpdGVbc3ByaXRlXVsxXSkgLyAxMDAwKSAtIHNlZWspO1xuICAgICAgdmFyIHRpbWVvdXQgPSAoZHVyYXRpb24gKiAxMDAwKSAvIE1hdGguYWJzKHNvdW5kLl9yYXRlKTtcbiAgICAgIHZhciBzdGFydCA9IHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzBdIC8gMTAwMDtcbiAgICAgIHZhciBzdG9wID0gKHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzBdICsgc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMV0pIC8gMTAwMDtcbiAgICAgIHNvdW5kLl9zcHJpdGUgPSBzcHJpdGU7XG5cbiAgICAgIC8vIE1hcmsgdGhlIHNvdW5kIGFzIGVuZGVkIGluc3RhbnRseSBzbyB0aGF0IHRoaXMgYXN5bmMgcGxheWJhY2tcbiAgICAgIC8vIGRvZXNuJ3QgZ2V0IGdyYWJiZWQgYnkgYW5vdGhlciBjYWxsIHRvIHBsYXkgd2hpbGUgdGhpcyBvbmUgd2FpdHMgdG8gc3RhcnQuXG4gICAgICBzb3VuZC5fZW5kZWQgPSBmYWxzZTtcblxuICAgICAgLy8gVXBkYXRlIHRoZSBwYXJhbWV0ZXJzIG9mIHRoZSBzb3VuZC5cbiAgICAgIHZhciBzZXRQYXJhbXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgc291bmQuX3BhdXNlZCA9IGZhbHNlO1xuICAgICAgICBzb3VuZC5fc2VlayA9IHNlZWs7XG4gICAgICAgIHNvdW5kLl9zdGFydCA9IHN0YXJ0O1xuICAgICAgICBzb3VuZC5fc3RvcCA9IHN0b3A7XG4gICAgICAgIHNvdW5kLl9sb29wID0gISEoc291bmQuX2xvb3AgfHwgc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMl0pO1xuICAgICAgfTtcblxuICAgICAgLy8gRW5kIHRoZSBzb3VuZCBpbnN0YW50bHkgaWYgc2VlayBpcyBhdCB0aGUgZW5kLlxuICAgICAgaWYgKHNlZWsgPj0gc3RvcCkge1xuICAgICAgICBzZWxmLl9lbmRlZChzb3VuZCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gQmVnaW4gdGhlIGFjdHVhbCBwbGF5YmFjay5cbiAgICAgIHZhciBub2RlID0gc291bmQuX25vZGU7XG4gICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgLy8gRmlyZSB0aGlzIHdoZW4gdGhlIHNvdW5kIGlzIHJlYWR5IHRvIHBsYXkgdG8gYmVnaW4gV2ViIEF1ZGlvIHBsYXliYWNrLlxuICAgICAgICB2YXIgcGxheVdlYkF1ZGlvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5fcGxheUxvY2sgPSBmYWxzZTtcbiAgICAgICAgICBzZXRQYXJhbXMoKTtcbiAgICAgICAgICBzZWxmLl9yZWZyZXNoQnVmZmVyKHNvdW5kKTtcblxuICAgICAgICAgIC8vIFNldHVwIHRoZSBwbGF5YmFjayBwYXJhbXMuXG4gICAgICAgICAgdmFyIHZvbCA9IChzb3VuZC5fbXV0ZWQgfHwgc2VsZi5fbXV0ZWQpID8gMCA6IHNvdW5kLl92b2x1bWU7XG4gICAgICAgICAgbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKHZvbCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgc291bmQuX3BsYXlTdGFydCA9IEhvd2xlci5jdHguY3VycmVudFRpbWU7XG5cbiAgICAgICAgICAvLyBQbGF5IHRoZSBzb3VuZCB1c2luZyB0aGUgc3VwcG9ydGVkIG1ldGhvZC5cbiAgICAgICAgICBpZiAodHlwZW9mIG5vZGUuYnVmZmVyU291cmNlLnN0YXJ0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgc291bmQuX2xvb3AgPyBub2RlLmJ1ZmZlclNvdXJjZS5ub3RlR3JhaW5PbigwLCBzZWVrLCA4NjQwMCkgOiBub2RlLmJ1ZmZlclNvdXJjZS5ub3RlR3JhaW5PbigwLCBzZWVrLCBkdXJhdGlvbik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNvdW5kLl9sb29wID8gbm9kZS5idWZmZXJTb3VyY2Uuc3RhcnQoMCwgc2VlaywgODY0MDApIDogbm9kZS5idWZmZXJTb3VyY2Uuc3RhcnQoMCwgc2VlaywgZHVyYXRpb24pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFN0YXJ0IGEgbmV3IHRpbWVyIGlmIG5vbmUgaXMgcHJlc2VudC5cbiAgICAgICAgICBpZiAodGltZW91dCAhPT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgIHNlbGYuX2VuZFRpbWVyc1tzb3VuZC5faWRdID0gc2V0VGltZW91dChzZWxmLl9lbmRlZC5iaW5kKHNlbGYsIHNvdW5kKSwgdGltZW91dCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFpbnRlcm5hbCkge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheScsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgICAgIHNlbGYuX2xvYWRRdWV1ZSgpO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChIb3dsZXIuc3RhdGUgPT09ICdydW5uaW5nJyAmJiBIb3dsZXIuY3R4LnN0YXRlICE9PSAnaW50ZXJydXB0ZWQnKSB7XG4gICAgICAgICAgcGxheVdlYkF1ZGlvKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZi5fcGxheUxvY2sgPSB0cnVlO1xuXG4gICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIGF1ZGlvIGNvbnRleHQgdG8gcmVzdW1lIGJlZm9yZSBwbGF5aW5nLlxuICAgICAgICAgIHNlbGYub25jZSgncmVzdW1lJywgcGxheVdlYkF1ZGlvKTtcblxuICAgICAgICAgIC8vIENhbmNlbCB0aGUgZW5kIHRpbWVyLlxuICAgICAgICAgIHNlbGYuX2NsZWFyVGltZXIoc291bmQuX2lkKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRmlyZSB0aGlzIHdoZW4gdGhlIHNvdW5kIGlzIHJlYWR5IHRvIHBsYXkgdG8gYmVnaW4gSFRNTDUgQXVkaW8gcGxheWJhY2suXG4gICAgICAgIHZhciBwbGF5SHRtbDUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBub2RlLmN1cnJlbnRUaW1lID0gc2VlaztcbiAgICAgICAgICBub2RlLm11dGVkID0gc291bmQuX211dGVkIHx8IHNlbGYuX211dGVkIHx8IEhvd2xlci5fbXV0ZWQgfHwgbm9kZS5tdXRlZDtcbiAgICAgICAgICBub2RlLnZvbHVtZSA9IHNvdW5kLl92b2x1bWUgKiBIb3dsZXIudm9sdW1lKCk7XG4gICAgICAgICAgbm9kZS5wbGF5YmFja1JhdGUgPSBzb3VuZC5fcmF0ZTtcblxuICAgICAgICAgIC8vIFNvbWUgYnJvd3NlcnMgd2lsbCB0aHJvdyBhbiBlcnJvciBpZiB0aGlzIGlzIGNhbGxlZCB3aXRob3V0IHVzZXIgaW50ZXJhY3Rpb24uXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBwbGF5ID0gbm9kZS5wbGF5KCk7XG5cbiAgICAgICAgICAgIC8vIFN1cHBvcnQgb2xkZXIgYnJvd3NlcnMgdGhhdCBkb24ndCBzdXBwb3J0IHByb21pc2VzLCBhbmQgdGh1cyBkb24ndCBoYXZlIHRoaXMgaXNzdWUuXG4gICAgICAgICAgICBpZiAocGxheSAmJiB0eXBlb2YgUHJvbWlzZSAhPT0gJ3VuZGVmaW5lZCcgJiYgKHBsYXkgaW5zdGFuY2VvZiBQcm9taXNlIHx8IHR5cGVvZiBwbGF5LnRoZW4gPT09ICdmdW5jdGlvbicpKSB7XG4gICAgICAgICAgICAgIC8vIEltcGxlbWVudHMgYSBsb2NrIHRvIHByZXZlbnQgRE9NRXhjZXB0aW9uOiBUaGUgcGxheSgpIHJlcXVlc3Qgd2FzIGludGVycnVwdGVkIGJ5IGEgY2FsbCB0byBwYXVzZSgpLlxuICAgICAgICAgICAgICBzZWxmLl9wbGF5TG9jayA9IHRydWU7XG5cbiAgICAgICAgICAgICAgLy8gU2V0IHBhcmFtIHZhbHVlcyBpbW1lZGlhdGVseS5cbiAgICAgICAgICAgICAgc2V0UGFyYW1zKCk7XG5cbiAgICAgICAgICAgICAgLy8gUmVsZWFzZXMgdGhlIGxvY2sgYW5kIGV4ZWN1dGVzIHF1ZXVlZCBhY3Rpb25zLlxuICAgICAgICAgICAgICBwbGF5XG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICBzZWxmLl9wbGF5TG9jayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgbm9kZS5fdW5sb2NrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgaWYgKCFpbnRlcm5hbCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLl9lbWl0KCdwbGF5Jywgc291bmQuX2lkKTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2xvYWRRdWV1ZSgpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgc2VsZi5fcGxheUxvY2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3BsYXllcnJvcicsIHNvdW5kLl9pZCwgJ1BsYXliYWNrIHdhcyB1bmFibGUgdG8gc3RhcnQuIFRoaXMgaXMgbW9zdCBjb21tb25seSBhbiBpc3N1ZSAnICtcbiAgICAgICAgICAgICAgICAgICAgJ29uIG1vYmlsZSBkZXZpY2VzIGFuZCBDaHJvbWUgd2hlcmUgcGxheWJhY2sgd2FzIG5vdCB3aXRoaW4gYSB1c2VyIGludGVyYWN0aW9uLicpO1xuXG4gICAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgZW5kZWQgYW5kIHBhdXNlZCB2YWx1ZXMuXG4gICAgICAgICAgICAgICAgICBzb3VuZC5fZW5kZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgc291bmQuX3BhdXNlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFpbnRlcm5hbCkge1xuICAgICAgICAgICAgICBzZWxmLl9wbGF5TG9jayA9IGZhbHNlO1xuICAgICAgICAgICAgICBzZXRQYXJhbXMoKTtcbiAgICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheScsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNldHRpbmcgcmF0ZSBiZWZvcmUgcGxheWluZyB3b24ndCB3b3JrIGluIElFLCBzbyB3ZSBzZXQgaXQgYWdhaW4gaGVyZS5cbiAgICAgICAgICAgIG5vZGUucGxheWJhY2tSYXRlID0gc291bmQuX3JhdGU7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZSBub2RlIGlzIHN0aWxsIHBhdXNlZCwgdGhlbiB3ZSBjYW4gYXNzdW1lIHRoZXJlIHdhcyBhIHBsYXliYWNrIGlzc3VlLlxuICAgICAgICAgICAgaWYgKG5vZGUucGF1c2VkKSB7XG4gICAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3BsYXllcnJvcicsIHNvdW5kLl9pZCwgJ1BsYXliYWNrIHdhcyB1bmFibGUgdG8gc3RhcnQuIFRoaXMgaXMgbW9zdCBjb21tb25seSBhbiBpc3N1ZSAnICtcbiAgICAgICAgICAgICAgICAnb24gbW9iaWxlIGRldmljZXMgYW5kIENocm9tZSB3aGVyZSBwbGF5YmFjayB3YXMgbm90IHdpdGhpbiBhIHVzZXIgaW50ZXJhY3Rpb24uJyk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2V0dXAgdGhlIGVuZCB0aW1lciBvbiBzcHJpdGVzIG9yIGxpc3RlbiBmb3IgdGhlIGVuZGVkIGV2ZW50LlxuICAgICAgICAgICAgaWYgKHNwcml0ZSAhPT0gJ19fZGVmYXVsdCcgfHwgc291bmQuX2xvb3ApIHtcbiAgICAgICAgICAgICAgc2VsZi5fZW5kVGltZXJzW3NvdW5kLl9pZF0gPSBzZXRUaW1lb3V0KHNlbGYuX2VuZGVkLmJpbmQoc2VsZiwgc291bmQpLCB0aW1lb3V0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNlbGYuX2VuZFRpbWVyc1tzb3VuZC5faWRdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy8gRmlyZSBlbmRlZCBvbiB0aGlzIGF1ZGlvIG5vZGUuXG4gICAgICAgICAgICAgICAgc2VsZi5fZW5kZWQoc291bmQpO1xuXG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgdGhpcyBsaXN0ZW5lci5cbiAgICAgICAgICAgICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgc2VsZi5fZW5kVGltZXJzW3NvdW5kLl9pZF0sIGZhbHNlKTtcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKCdlbmRlZCcsIHNlbGYuX2VuZFRpbWVyc1tzb3VuZC5faWRdLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBzZWxmLl9lbWl0KCdwbGF5ZXJyb3InLCBzb3VuZC5faWQsIGVycik7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIElmIHRoaXMgaXMgc3RyZWFtaW5nIGF1ZGlvLCBtYWtlIHN1cmUgdGhlIHNyYyBpcyBzZXQgYW5kIGxvYWQgYWdhaW4uXG4gICAgICAgIGlmIChub2RlLnNyYyA9PT0gJ2RhdGE6YXVkaW8vd2F2O2Jhc2U2NCxVa2xHUmlnQUFBQlhRVlpGWm0xMElCSUFBQUFCQUFFQVJLd0FBSWhZQVFBQ0FCQUFBQUJrWVhSaEFnQUFBQUVBJykge1xuICAgICAgICAgIG5vZGUuc3JjID0gc2VsZi5fc3JjO1xuICAgICAgICAgIG5vZGUubG9hZCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUGxheSBpbW1lZGlhdGVseSBpZiByZWFkeSwgb3Igd2FpdCBmb3IgdGhlICdjYW5wbGF5dGhyb3VnaCdlIHZlbnQuXG4gICAgICAgIHZhciBsb2FkZWROb1JlYWR5U3RhdGUgPSAod2luZG93ICYmIHdpbmRvdy5lamVjdGEpIHx8ICghbm9kZS5yZWFkeVN0YXRlICYmIEhvd2xlci5fbmF2aWdhdG9yLmlzQ29jb29uSlMpO1xuICAgICAgICBpZiAobm9kZS5yZWFkeVN0YXRlID49IDMgfHwgbG9hZGVkTm9SZWFkeVN0YXRlKSB7XG4gICAgICAgICAgcGxheUh0bWw1KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZi5fcGxheUxvY2sgPSB0cnVlO1xuICAgICAgICAgIHNlbGYuX3N0YXRlID0gJ2xvYWRpbmcnO1xuXG4gICAgICAgICAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLl9zdGF0ZSA9ICdsb2FkZWQnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBCZWdpbiBwbGF5YmFjay5cbiAgICAgICAgICAgIHBsYXlIdG1sNSgpO1xuXG4gICAgICAgICAgICAvLyBDbGVhciB0aGlzIGxpc3RlbmVyLlxuICAgICAgICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKEhvd2xlci5fY2FuUGxheUV2ZW50LCBsaXN0ZW5lciwgZmFsc2UpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKEhvd2xlci5fY2FuUGxheUV2ZW50LCBsaXN0ZW5lciwgZmFsc2UpO1xuXG4gICAgICAgICAgLy8gQ2FuY2VsIHRoZSBlbmQgdGltZXIuXG4gICAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihzb3VuZC5faWQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzb3VuZC5faWQ7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFBhdXNlIHBsYXliYWNrIGFuZCBzYXZlIGN1cnJlbnQgcG9zaXRpb24uXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBUaGUgc291bmQgSUQgKGVtcHR5IHRvIHBhdXNlIGFsbCBpbiBncm91cCkuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBwYXVzZTogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQgb3IgYSBwbGF5KCkgcHJvbWlzZSBpcyBwZW5kaW5nLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gcGF1c2Ugd2hlbiBjYXBhYmxlLlxuICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJyB8fCBzZWxmLl9wbGF5TG9jaykge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ3BhdXNlJyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5wYXVzZShpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gaWQgaXMgcGFzc2VkLCBnZXQgYWxsIElEJ3MgdG8gYmUgcGF1c2VkLlxuICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcblxuICAgICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBDbGVhciB0aGUgZW5kIHRpbWVyLlxuICAgICAgICBzZWxmLl9jbGVhclRpbWVyKGlkc1tpXSk7XG5cbiAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgICAgaWYgKHNvdW5kICYmICFzb3VuZC5fcGF1c2VkKSB7XG4gICAgICAgICAgLy8gUmVzZXQgdGhlIHNlZWsgcG9zaXRpb24uXG4gICAgICAgICAgc291bmQuX3NlZWsgPSBzZWxmLnNlZWsoaWRzW2ldKTtcbiAgICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSAwO1xuICAgICAgICAgIHNvdW5kLl9wYXVzZWQgPSB0cnVlO1xuXG4gICAgICAgICAgLy8gU3RvcCBjdXJyZW50bHkgcnVubmluZyBmYWRlcy5cbiAgICAgICAgICBzZWxmLl9zdG9wRmFkZShpZHNbaV0pO1xuXG4gICAgICAgICAgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBzb3VuZCBoYXMgYmVlbiBjcmVhdGVkLlxuICAgICAgICAgICAgICBpZiAoIXNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uuc3RvcCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uubm90ZU9mZigwKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uuc3RvcCgwKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIENsZWFuIHVwIHRoZSBidWZmZXIgc291cmNlLlxuICAgICAgICAgICAgICBzZWxmLl9jbGVhbkJ1ZmZlcihzb3VuZC5fbm9kZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFpc05hTihzb3VuZC5fbm9kZS5kdXJhdGlvbikgfHwgc291bmQuX25vZGUuZHVyYXRpb24gPT09IEluZmluaXR5KSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLnBhdXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRmlyZSB0aGUgcGF1c2UgZXZlbnQsIHVubGVzcyBgdHJ1ZWAgaXMgcGFzc2VkIGFzIHRoZSAybmQgYXJndW1lbnQuXG4gICAgICAgIGlmICghYXJndW1lbnRzWzFdKSB7XG4gICAgICAgICAgc2VsZi5fZW1pdCgncGF1c2UnLCBzb3VuZCA/IHNvdW5kLl9pZCA6IG51bGwpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTdG9wIHBsYXliYWNrIGFuZCByZXNldCB0byBzdGFydC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFRoZSBzb3VuZCBJRCAoZW1wdHkgdG8gc3RvcCBhbGwgaW4gZ3JvdXApLlxuICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IGludGVybmFsIEludGVybmFsIFVzZTogdHJ1ZSBwcmV2ZW50cyBldmVudCBmaXJpbmcuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBzdG9wOiBmdW5jdGlvbihpZCwgaW50ZXJuYWwpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBzdG9wIHdoZW4gY2FwYWJsZS5cbiAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcgfHwgc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdzdG9wJyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5zdG9wKGlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBpZCBpcyBwYXNzZWQsIGdldCBhbGwgSUQncyB0byBiZSBzdG9wcGVkLlxuICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcblxuICAgICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBDbGVhciB0aGUgZW5kIHRpbWVyLlxuICAgICAgICBzZWxmLl9jbGVhclRpbWVyKGlkc1tpXSk7XG5cbiAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgICAgLy8gUmVzZXQgdGhlIHNlZWsgcG9zaXRpb24uXG4gICAgICAgICAgc291bmQuX3NlZWsgPSBzb3VuZC5fc3RhcnQgfHwgMDtcbiAgICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSAwO1xuICAgICAgICAgIHNvdW5kLl9wYXVzZWQgPSB0cnVlO1xuICAgICAgICAgIHNvdW5kLl9lbmRlZCA9IHRydWU7XG5cbiAgICAgICAgICAvLyBTdG9wIGN1cnJlbnRseSBydW5uaW5nIGZhZGVzLlxuICAgICAgICAgIHNlbGYuX3N0b3BGYWRlKGlkc1tpXSk7XG5cbiAgICAgICAgICBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIHNvdW5kJ3MgQXVkaW9CdWZmZXJTb3VyY2VOb2RlIGhhcyBiZWVuIGNyZWF0ZWQuXG4gICAgICAgICAgICAgIGlmIChzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5zdG9wID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLm5vdGVPZmYoMCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5zdG9wKDApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIENsZWFuIHVwIHRoZSBidWZmZXIgc291cmNlLlxuICAgICAgICAgICAgICAgIHNlbGYuX2NsZWFuQnVmZmVyKHNvdW5kLl9ub2RlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICghaXNOYU4oc291bmQuX25vZGUuZHVyYXRpb24pIHx8IHNvdW5kLl9ub2RlLmR1cmF0aW9uID09PSBJbmZpbml0eSkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5jdXJyZW50VGltZSA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5wYXVzZSgpO1xuXG4gICAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgYSBsaXZlIHN0cmVhbSwgc3RvcCBkb3dubG9hZCBvbmNlIHRoZSBhdWRpbyBpcyBzdG9wcGVkLlxuICAgICAgICAgICAgICBpZiAoc291bmQuX25vZGUuZHVyYXRpb24gPT09IEluZmluaXR5KSB7XG4gICAgICAgICAgICAgICAgc2VsZi5fY2xlYXJTb3VuZChzb3VuZC5fbm9kZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWludGVybmFsKSB7XG4gICAgICAgICAgICBzZWxmLl9lbWl0KCdzdG9wJywgc291bmQuX2lkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE11dGUvdW5tdXRlIGEgc2luZ2xlIHNvdW5kIG9yIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IG11dGVkIFNldCB0byB0cnVlIHRvIG11dGUgYW5kIGZhbHNlIHRvIHVubXV0ZS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkICAgIFRoZSBzb3VuZCBJRCB0byB1cGRhdGUgKG9taXQgdG8gbXV0ZS91bm11dGUgYWxsKS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIG11dGU6IGZ1bmN0aW9uKG11dGVkLCBpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIG11dGUgd2hlbiBjYXBhYmxlLlxuICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJ3x8IHNlbGYuX3BsYXlMb2NrKSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAnbXV0ZScsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYubXV0ZShtdXRlZCwgaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIGFwcGx5aW5nIG11dGUvdW5tdXRlIHRvIGFsbCBzb3VuZHMsIHVwZGF0ZSB0aGUgZ3JvdXAncyB2YWx1ZS5cbiAgICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbXV0ZWQgPT09ICdib29sZWFuJykge1xuICAgICAgICAgIHNlbGYuX211dGVkID0gbXV0ZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuX211dGVkO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIGlkIGlzIHBhc3NlZCwgZ2V0IGFsbCBJRCdzIHRvIGJlIG11dGVkLlxuICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcblxuICAgICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICBzb3VuZC5fbXV0ZWQgPSBtdXRlZDtcblxuICAgICAgICAgIC8vIENhbmNlbCBhY3RpdmUgZmFkZSBhbmQgc2V0IHRoZSB2b2x1bWUgdG8gdGhlIGVuZCB2YWx1ZS5cbiAgICAgICAgICBpZiAoc291bmQuX2ludGVydmFsKSB7XG4gICAgICAgICAgICBzZWxmLl9zdG9wRmFkZShzb3VuZC5faWQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgc291bmQuX25vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZShtdXRlZCA/IDAgOiBzb3VuZC5fdm9sdW1lLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5tdXRlZCA9IEhvd2xlci5fbXV0ZWQgPyB0cnVlIDogbXV0ZWQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5fZW1pdCgnbXV0ZScsIHNvdW5kLl9pZCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldC9zZXQgdGhlIHZvbHVtZSBvZiB0aGlzIHNvdW5kIG9yIG9mIHRoZSBIb3dsIGdyb3VwLiBUaGlzIG1ldGhvZCBjYW4gb3B0aW9uYWxseSB0YWtlIDAsIDEgb3IgMiBhcmd1bWVudHMuXG4gICAgICogICB2b2x1bWUoKSAtPiBSZXR1cm5zIHRoZSBncm91cCdzIHZvbHVtZSB2YWx1ZS5cbiAgICAgKiAgIHZvbHVtZShpZCkgLT4gUmV0dXJucyB0aGUgc291bmQgaWQncyBjdXJyZW50IHZvbHVtZS5cbiAgICAgKiAgIHZvbHVtZSh2b2wpIC0+IFNldHMgdGhlIHZvbHVtZSBvZiBhbGwgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICAgKiAgIHZvbHVtZSh2b2wsIGlkKSAtPiBTZXRzIHRoZSB2b2x1bWUgb2YgcGFzc2VkIHNvdW5kIGlkLlxuICAgICAqIEByZXR1cm4ge0hvd2wvTnVtYmVyfSBSZXR1cm5zIHNlbGYgb3IgY3VycmVudCB2b2x1bWUuXG4gICAgICovXG4gICAgdm9sdW1lOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgdmFyIHZvbCwgaWQ7XG5cbiAgICAgIC8vIERldGVybWluZSB0aGUgdmFsdWVzIGJhc2VkIG9uIGFyZ3VtZW50cy5cbiAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBSZXR1cm4gdGhlIHZhbHVlIG9mIHRoZSBncm91cHMnIHZvbHVtZS5cbiAgICAgICAgcmV0dXJuIHNlbGYuX3ZvbHVtZTtcbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDEgfHwgYXJncy5sZW5ndGggPT09IDIgJiYgdHlwZW9mIGFyZ3NbMV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8vIEZpcnN0IGNoZWNrIGlmIHRoaXMgaXMgYW4gSUQsIGFuZCBpZiBub3QsIGFzc3VtZSBpdCBpcyBhIG5ldyB2b2x1bWUuXG4gICAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcygpO1xuICAgICAgICB2YXIgaW5kZXggPSBpZHMuaW5kZXhPZihhcmdzWzBdKTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMF0sIDEwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2b2wgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID49IDIpIHtcbiAgICAgICAgdm9sID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcbiAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzFdLCAxMCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgdm9sdW1lIG9yIHJldHVybiB0aGUgY3VycmVudCB2b2x1bWUuXG4gICAgICB2YXIgc291bmQ7XG4gICAgICBpZiAodHlwZW9mIHZvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgdm9sID49IDAgJiYgdm9sIDw9IDEpIHtcbiAgICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBjaGFuZ2Ugdm9sdW1lIHdoZW4gY2FwYWJsZS5cbiAgICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJ3x8IHNlbGYuX3BsYXlMb2NrKSB7XG4gICAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgICBldmVudDogJ3ZvbHVtZScsXG4gICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBzZWxmLnZvbHVtZS5hcHBseShzZWxmLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0IHRoZSBncm91cCB2b2x1bWUuXG4gICAgICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc2VsZi5fdm9sdW1lID0gdm9sO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXBkYXRlIG9uZSBvciBhbGwgdm9sdW1lcy5cbiAgICAgICAgaWQgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxpZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRbaV0pO1xuXG4gICAgICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgICAgICBzb3VuZC5fdm9sdW1lID0gdm9sO1xuXG4gICAgICAgICAgICAvLyBTdG9wIGN1cnJlbnRseSBydW5uaW5nIGZhZGVzLlxuICAgICAgICAgICAgaWYgKCFhcmdzWzJdKSB7XG4gICAgICAgICAgICAgIHNlbGYuX3N0b3BGYWRlKGlkW2ldKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlICYmICFzb3VuZC5fbXV0ZWQpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSh2b2wsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzb3VuZC5fbm9kZSAmJiAhc291bmQuX211dGVkKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLnZvbHVtZSA9IHZvbCAqIEhvd2xlci52b2x1bWUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi5fZW1pdCgndm9sdW1lJywgc291bmQuX2lkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNvdW5kID0gaWQgPyBzZWxmLl9zb3VuZEJ5SWQoaWQpIDogc2VsZi5fc291bmRzWzBdO1xuICAgICAgICByZXR1cm4gc291bmQgPyBzb3VuZC5fdm9sdW1lIDogMDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEZhZGUgYSBjdXJyZW50bHkgcGxheWluZyBzb3VuZCBiZXR3ZWVuIHR3byB2b2x1bWVzIChpZiBubyBpZCBpcyBwYXNzZWQsIGFsbCBzb3VuZHMgd2lsbCBmYWRlKS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGZyb20gVGhlIHZhbHVlIHRvIGZhZGUgZnJvbSAoMC4wIHRvIDEuMCkuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSB0byAgIFRoZSB2b2x1bWUgdG8gZmFkZSB0byAoMC4wIHRvIDEuMCkuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBsZW4gIFRpbWUgaW4gbWlsbGlzZWNvbmRzIHRvIGZhZGUuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAgIFRoZSBzb3VuZCBpZCAob21pdCB0byBmYWRlIGFsbCBzb3VuZHMpLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgZmFkZTogZnVuY3Rpb24oZnJvbSwgdG8sIGxlbiwgaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBmYWRlIHdoZW4gY2FwYWJsZS5cbiAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcgfHwgc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdmYWRlJyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5mYWRlKGZyb20sIHRvLCBsZW4sIGlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWtlIHN1cmUgdGhlIHRvL2Zyb20vbGVuIHZhbHVlcyBhcmUgbnVtYmVycy5cbiAgICAgIGZyb20gPSBNYXRoLm1pbihNYXRoLm1heCgwLCBwYXJzZUZsb2F0KGZyb20pKSwgMSk7XG4gICAgICB0byA9IE1hdGgubWluKE1hdGgubWF4KDAsIHBhcnNlRmxvYXQodG8pKSwgMSk7XG4gICAgICBsZW4gPSBwYXJzZUZsb2F0KGxlbik7XG5cbiAgICAgIC8vIFNldCB0aGUgdm9sdW1lIHRvIHRoZSBzdGFydCBwb3NpdGlvbi5cbiAgICAgIHNlbGYudm9sdW1lKGZyb20sIGlkKTtcblxuICAgICAgLy8gRmFkZSB0aGUgdm9sdW1lIG9mIG9uZSBvciBhbGwgc291bmRzLlxuICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgbGluZWFyIGZhZGUgb3IgZmFsbCBiYWNrIHRvIHRpbWVvdXRzIHdpdGggSFRNTDUgQXVkaW8uXG4gICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgIC8vIFN0b3AgdGhlIHByZXZpb3VzIGZhZGUgaWYgbm8gc3ByaXRlIGlzIGJlaW5nIHVzZWQgKG90aGVyd2lzZSwgdm9sdW1lIGhhbmRsZXMgdGhpcykuXG4gICAgICAgICAgaWYgKCFpZCkge1xuICAgICAgICAgICAgc2VsZi5fc3RvcEZhZGUoaWRzW2ldKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBJZiB3ZSBhcmUgdXNpbmcgV2ViIEF1ZGlvLCBsZXQgdGhlIG5hdGl2ZSBtZXRob2RzIGRvIHRoZSBhY3R1YWwgZmFkZS5cbiAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgIXNvdW5kLl9tdXRlZCkge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRUaW1lID0gSG93bGVyLmN0eC5jdXJyZW50VGltZTtcbiAgICAgICAgICAgIHZhciBlbmQgPSBjdXJyZW50VGltZSArIChsZW4gLyAxMDAwKTtcbiAgICAgICAgICAgIHNvdW5kLl92b2x1bWUgPSBmcm9tO1xuICAgICAgICAgICAgc291bmQuX25vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZShmcm9tLCBjdXJyZW50VGltZSk7XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKHRvLCBlbmQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuX3N0YXJ0RmFkZUludGVydmFsKHNvdW5kLCBmcm9tLCB0bywgbGVuLCBpZHNbaV0sIHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTdGFydHMgdGhlIGludGVybmFsIGludGVydmFsIHRvIGZhZGUgYSBzb3VuZC5cbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IHNvdW5kIFJlZmVyZW5jZSB0byBzb3VuZCB0byBmYWRlLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gZnJvbSBUaGUgdmFsdWUgdG8gZmFkZSBmcm9tICgwLjAgdG8gMS4wKS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHRvICAgVGhlIHZvbHVtZSB0byBmYWRlIHRvICgwLjAgdG8gMS4wKS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGxlbiAgVGltZSBpbiBtaWxsaXNlY29uZHMgdG8gZmFkZS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkICAgVGhlIHNvdW5kIGlkIHRvIGZhZGUuXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gaXNHcm91cCAgIElmIHRydWUsIHNldCB0aGUgdm9sdW1lIG9uIHRoZSBncm91cC5cbiAgICAgKi9cbiAgICBfc3RhcnRGYWRlSW50ZXJ2YWw6IGZ1bmN0aW9uKHNvdW5kLCBmcm9tLCB0bywgbGVuLCBpZCwgaXNHcm91cCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHZvbCA9IGZyb207XG4gICAgICB2YXIgZGlmZiA9IHRvIC0gZnJvbTtcbiAgICAgIHZhciBzdGVwcyA9IE1hdGguYWJzKGRpZmYgLyAwLjAxKTtcbiAgICAgIHZhciBzdGVwTGVuID0gTWF0aC5tYXgoNCwgKHN0ZXBzID4gMCkgPyBsZW4gLyBzdGVwcyA6IGxlbik7XG4gICAgICB2YXIgbGFzdFRpY2sgPSBEYXRlLm5vdygpO1xuXG4gICAgICAvLyBTdG9yZSB0aGUgdmFsdWUgYmVpbmcgZmFkZWQgdG8uXG4gICAgICBzb3VuZC5fZmFkZVRvID0gdG87XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgdm9sdW1lIHZhbHVlIG9uIGVhY2ggaW50ZXJ2YWwgdGljay5cbiAgICAgIHNvdW5kLl9pbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBVcGRhdGUgdGhlIHZvbHVtZSBiYXNlZCBvbiB0aGUgdGltZSBzaW5jZSB0aGUgbGFzdCB0aWNrLlxuICAgICAgICB2YXIgdGljayA9IChEYXRlLm5vdygpIC0gbGFzdFRpY2spIC8gbGVuO1xuICAgICAgICBsYXN0VGljayA9IERhdGUubm93KCk7XG4gICAgICAgIHZvbCArPSBkaWZmICogdGljaztcblxuICAgICAgICAvLyBSb3VuZCB0byB3aXRoaW4gMiBkZWNpbWFsIHBvaW50cy5cbiAgICAgICAgdm9sID0gTWF0aC5yb3VuZCh2b2wgKiAxMDApIC8gMTAwO1xuXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgdm9sdW1lIGlzIGluIHRoZSByaWdodCBib3VuZHMuXG4gICAgICAgIGlmIChkaWZmIDwgMCkge1xuICAgICAgICAgIHZvbCA9IE1hdGgubWF4KHRvLCB2b2wpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZvbCA9IE1hdGgubWluKHRvLCB2b2wpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hhbmdlIHRoZSB2b2x1bWUuXG4gICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgIHNvdW5kLl92b2x1bWUgPSB2b2w7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZi52b2x1bWUodm9sLCBzb3VuZC5faWQsIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0IHRoZSBncm91cCdzIHZvbHVtZS5cbiAgICAgICAgaWYgKGlzR3JvdXApIHtcbiAgICAgICAgICBzZWxmLl92b2x1bWUgPSB2b2w7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXaGVuIHRoZSBmYWRlIGlzIGNvbXBsZXRlLCBzdG9wIGl0IGFuZCBmaXJlIGV2ZW50LlxuICAgICAgICBpZiAoKHRvIDwgZnJvbSAmJiB2b2wgPD0gdG8pIHx8ICh0byA+IGZyb20gJiYgdm9sID49IHRvKSkge1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoc291bmQuX2ludGVydmFsKTtcbiAgICAgICAgICBzb3VuZC5faW50ZXJ2YWwgPSBudWxsO1xuICAgICAgICAgIHNvdW5kLl9mYWRlVG8gPSBudWxsO1xuICAgICAgICAgIHNlbGYudm9sdW1lKHRvLCBzb3VuZC5faWQpO1xuICAgICAgICAgIHNlbGYuX2VtaXQoJ2ZhZGUnLCBzb3VuZC5faWQpO1xuICAgICAgICB9XG4gICAgICB9LCBzdGVwTGVuKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgbWV0aG9kIHRoYXQgc3RvcHMgdGhlIGN1cnJlbnRseSBwbGF5aW5nIGZhZGUgd2hlblxuICAgICAqIGEgbmV3IGZhZGUgc3RhcnRzLCB2b2x1bWUgaXMgY2hhbmdlZCBvciB0aGUgc291bmQgaXMgc3RvcHBlZC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFRoZSBzb3VuZCBpZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9zdG9wRmFkZTogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZCk7XG5cbiAgICAgIGlmIChzb3VuZCAmJiBzb3VuZC5faW50ZXJ2YWwpIHtcbiAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgc291bmQuX25vZGUuZ2Fpbi5jYW5jZWxTY2hlZHVsZWRWYWx1ZXMoSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgIH1cblxuICAgICAgICBjbGVhckludGVydmFsKHNvdW5kLl9pbnRlcnZhbCk7XG4gICAgICAgIHNvdW5kLl9pbnRlcnZhbCA9IG51bGw7XG4gICAgICAgIHNlbGYudm9sdW1lKHNvdW5kLl9mYWRlVG8sIGlkKTtcbiAgICAgICAgc291bmQuX2ZhZGVUbyA9IG51bGw7XG4gICAgICAgIHNlbGYuX2VtaXQoJ2ZhZGUnLCBpZCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQvc2V0IHRoZSBsb29wIHBhcmFtZXRlciBvbiBhIHNvdW5kLiBUaGlzIG1ldGhvZCBjYW4gb3B0aW9uYWxseSB0YWtlIDAsIDEgb3IgMiBhcmd1bWVudHMuXG4gICAgICogICBsb29wKCkgLT4gUmV0dXJucyB0aGUgZ3JvdXAncyBsb29wIHZhbHVlLlxuICAgICAqICAgbG9vcChpZCkgLT4gUmV0dXJucyB0aGUgc291bmQgaWQncyBsb29wIHZhbHVlLlxuICAgICAqICAgbG9vcChsb29wKSAtPiBTZXRzIHRoZSBsb29wIHZhbHVlIGZvciBhbGwgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICAgKiAgIGxvb3AobG9vcCwgaWQpIC0+IFNldHMgdGhlIGxvb3AgdmFsdWUgb2YgcGFzc2VkIHNvdW5kIGlkLlxuICAgICAqIEByZXR1cm4ge0hvd2wvQm9vbGVhbn0gUmV0dXJucyBzZWxmIG9yIGN1cnJlbnQgbG9vcCB2YWx1ZS5cbiAgICAgKi9cbiAgICBsb29wOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgdmFyIGxvb3AsIGlkLCBzb3VuZDtcblxuICAgICAgLy8gRGV0ZXJtaW5lIHRoZSB2YWx1ZXMgZm9yIGxvb3AgYW5kIGlkLlxuICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIFJldHVybiB0aGUgZ3JvdSdzIGxvb3AgdmFsdWUuXG4gICAgICAgIHJldHVybiBzZWxmLl9sb29wO1xuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09ICdib29sZWFuJykge1xuICAgICAgICAgIGxvb3AgPSBhcmdzWzBdO1xuICAgICAgICAgIHNlbGYuX2xvb3AgPSBsb29wO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFJldHVybiB0aGlzIHNvdW5kJ3MgbG9vcCB2YWx1ZS5cbiAgICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChwYXJzZUludChhcmdzWzBdLCAxMCkpO1xuICAgICAgICAgIHJldHVybiBzb3VuZCA/IHNvdW5kLl9sb29wIDogZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgbG9vcCA9IGFyZ3NbMF07XG4gICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1sxXSwgMTApO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBpZCBpcyBwYXNzZWQsIGdldCBhbGwgSUQncyB0byBiZSBsb29wZWQuXG4gICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgIHNvdW5kLl9sb29wID0gbG9vcDtcbiAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUgJiYgc291bmQuX25vZGUuYnVmZmVyU291cmNlKSB7XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcCA9IGxvb3A7XG4gICAgICAgICAgICBpZiAobG9vcCkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcFN0YXJ0ID0gc291bmQuX3N0YXJ0IHx8IDA7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wRW5kID0gc291bmQuX3N0b3A7XG5cbiAgICAgICAgICAgICAgLy8gSWYgcGxheWluZywgcmVzdGFydCBwbGF5YmFjayB0byBlbnN1cmUgbG9vcGluZyB1cGRhdGVzLlxuICAgICAgICAgICAgICBpZiAoc2VsZi5wbGF5aW5nKGlkc1tpXSkpIHtcbiAgICAgICAgICAgICAgICBzZWxmLnBhdXNlKGlkc1tpXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgc2VsZi5wbGF5KGlkc1tpXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldC9zZXQgdGhlIHBsYXliYWNrIHJhdGUgb2YgYSBzb3VuZC4gVGhpcyBtZXRob2QgY2FuIG9wdGlvbmFsbHkgdGFrZSAwLCAxIG9yIDIgYXJndW1lbnRzLlxuICAgICAqICAgcmF0ZSgpIC0+IFJldHVybnMgdGhlIGZpcnN0IHNvdW5kIG5vZGUncyBjdXJyZW50IHBsYXliYWNrIHJhdGUuXG4gICAgICogICByYXRlKGlkKSAtPiBSZXR1cm5zIHRoZSBzb3VuZCBpZCdzIGN1cnJlbnQgcGxheWJhY2sgcmF0ZS5cbiAgICAgKiAgIHJhdGUocmF0ZSkgLT4gU2V0cyB0aGUgcGxheWJhY2sgcmF0ZSBvZiBhbGwgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICAgKiAgIHJhdGUocmF0ZSwgaWQpIC0+IFNldHMgdGhlIHBsYXliYWNrIHJhdGUgb2YgcGFzc2VkIHNvdW5kIGlkLlxuICAgICAqIEByZXR1cm4ge0hvd2wvTnVtYmVyfSBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgcGxheWJhY2sgcmF0ZS5cbiAgICAgKi9cbiAgICByYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgdmFyIHJhdGUsIGlkO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIHZhbHVlcyBiYXNlZCBvbiBhcmd1bWVudHMuXG4gICAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gV2Ugd2lsbCBzaW1wbHkgcmV0dXJuIHRoZSBjdXJyZW50IHJhdGUgb2YgdGhlIGZpcnN0IG5vZGUuXG4gICAgICAgIGlkID0gc2VsZi5fc291bmRzWzBdLl9pZDtcbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgLy8gRmlyc3QgY2hlY2sgaWYgdGhpcyBpcyBhbiBJRCwgYW5kIGlmIG5vdCwgYXNzdW1lIGl0IGlzIGEgbmV3IHJhdGUgdmFsdWUuXG4gICAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcygpO1xuICAgICAgICB2YXIgaW5kZXggPSBpZHMuaW5kZXhPZihhcmdzWzBdKTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMF0sIDEwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByYXRlID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICByYXRlID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcbiAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzFdLCAxMCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgcGxheWJhY2sgcmF0ZSBvciByZXR1cm4gdGhlIGN1cnJlbnQgdmFsdWUuXG4gICAgICB2YXIgc291bmQ7XG4gICAgICBpZiAodHlwZW9mIHJhdGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gY2hhbmdlIHBsYXliYWNrIHJhdGUgd2hlbiBjYXBhYmxlLlxuICAgICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnIHx8IHNlbGYuX3BsYXlMb2NrKSB7XG4gICAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgICBldmVudDogJ3JhdGUnLFxuICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgc2VsZi5yYXRlLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgdGhlIGdyb3VwIHJhdGUuXG4gICAgICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc2VsZi5fcmF0ZSA9IHJhdGU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGRhdGUgb25lIG9yIGFsbCB2b2x1bWVzLlxuICAgICAgICBpZCA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPGlkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZFtpXSk7XG5cbiAgICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICAgIC8vIEtlZXAgdHJhY2sgb2Ygb3VyIHBvc2l0aW9uIHdoZW4gdGhlIHJhdGUgY2hhbmdlZCBhbmQgdXBkYXRlIHRoZSBwbGF5YmFja1xuICAgICAgICAgICAgLy8gc3RhcnQgcG9zaXRpb24gc28gd2UgY2FuIHByb3Blcmx5IGFkanVzdCB0aGUgc2VlayBwb3NpdGlvbiBmb3IgdGltZSBlbGFwc2VkLlxuICAgICAgICAgICAgaWYgKHNlbGYucGxheWluZyhpZFtpXSkpIHtcbiAgICAgICAgICAgICAgc291bmQuX3JhdGVTZWVrID0gc2VsZi5zZWVrKGlkW2ldKTtcbiAgICAgICAgICAgICAgc291bmQuX3BsYXlTdGFydCA9IHNlbGYuX3dlYkF1ZGlvID8gSG93bGVyLmN0eC5jdXJyZW50VGltZSA6IHNvdW5kLl9wbGF5U3RhcnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzb3VuZC5fcmF0ZSA9IHJhdGU7XG5cbiAgICAgICAgICAgIC8vIENoYW5nZSB0aGUgcGxheWJhY2sgcmF0ZS5cbiAgICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBzb3VuZC5fbm9kZSAmJiBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLnBsYXliYWNrUmF0ZS5zZXRWYWx1ZUF0VGltZShyYXRlLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUucGxheWJhY2tSYXRlID0gcmF0ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUmVzZXQgdGhlIHRpbWVycy5cbiAgICAgICAgICAgIHZhciBzZWVrID0gc2VsZi5zZWVrKGlkW2ldKTtcbiAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9ICgoc2VsZi5fc3ByaXRlW3NvdW5kLl9zcHJpdGVdWzBdICsgc2VsZi5fc3ByaXRlW3NvdW5kLl9zcHJpdGVdWzFdKSAvIDEwMDApIC0gc2VlaztcbiAgICAgICAgICAgIHZhciB0aW1lb3V0ID0gKGR1cmF0aW9uICogMTAwMCkgLyBNYXRoLmFicyhzb3VuZC5fcmF0ZSk7XG5cbiAgICAgICAgICAgIC8vIFN0YXJ0IGEgbmV3IGVuZCB0aW1lciBpZiBzb3VuZCBpcyBhbHJlYWR5IHBsYXlpbmcuXG4gICAgICAgICAgICBpZiAoc2VsZi5fZW5kVGltZXJzW2lkW2ldXSB8fCAhc291bmQuX3BhdXNlZCkge1xuICAgICAgICAgICAgICBzZWxmLl9jbGVhclRpbWVyKGlkW2ldKTtcbiAgICAgICAgICAgICAgc2VsZi5fZW5kVGltZXJzW2lkW2ldXSA9IHNldFRpbWVvdXQoc2VsZi5fZW5kZWQuYmluZChzZWxmLCBzb3VuZCksIHRpbWVvdXQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxmLl9lbWl0KCdyYXRlJywgc291bmQuX2lkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcbiAgICAgICAgcmV0dXJuIHNvdW5kID8gc291bmQuX3JhdGUgOiBzZWxmLl9yYXRlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgc2VlayBwb3NpdGlvbiBvZiBhIHNvdW5kLiBUaGlzIG1ldGhvZCBjYW4gb3B0aW9uYWxseSB0YWtlIDAsIDEgb3IgMiBhcmd1bWVudHMuXG4gICAgICogICBzZWVrKCkgLT4gUmV0dXJucyB0aGUgZmlyc3Qgc291bmQgbm9kZSdzIGN1cnJlbnQgc2VlayBwb3NpdGlvbi5cbiAgICAgKiAgIHNlZWsoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgY3VycmVudCBzZWVrIHBvc2l0aW9uLlxuICAgICAqICAgc2VlayhzZWVrKSAtPiBTZXRzIHRoZSBzZWVrIHBvc2l0aW9uIG9mIHRoZSBmaXJzdCBzb3VuZCBub2RlLlxuICAgICAqICAgc2VlayhzZWVrLCBpZCkgLT4gU2V0cyB0aGUgc2VlayBwb3NpdGlvbiBvZiBwYXNzZWQgc291bmQgaWQuXG4gICAgICogQHJldHVybiB7SG93bC9OdW1iZXJ9IFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCBzZWVrIHBvc2l0aW9uLlxuICAgICAqL1xuICAgIHNlZWs6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB2YXIgc2VlaywgaWQ7XG5cbiAgICAgIC8vIERldGVybWluZSB0aGUgdmFsdWVzIGJhc2VkIG9uIGFyZ3VtZW50cy5cbiAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBXZSB3aWxsIHNpbXBseSByZXR1cm4gdGhlIGN1cnJlbnQgcG9zaXRpb24gb2YgdGhlIGZpcnN0IG5vZGUuXG4gICAgICAgIGlmIChzZWxmLl9zb3VuZHMubGVuZ3RoKSB7XG4gICAgICAgICAgaWQgPSBzZWxmLl9zb3VuZHNbMF0uX2lkO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIC8vIEZpcnN0IGNoZWNrIGlmIHRoaXMgaXMgYW4gSUQsIGFuZCBpZiBub3QsIGFzc3VtZSBpdCBpcyBhIG5ldyBzZWVrIHBvc2l0aW9uLlxuICAgICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoKTtcbiAgICAgICAgdmFyIGluZGV4ID0gaWRzLmluZGV4T2YoYXJnc1swXSk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzBdLCAxMCk7XG4gICAgICAgIH0gZWxzZSBpZiAoc2VsZi5fc291bmRzLmxlbmd0aCkge1xuICAgICAgICAgIGlkID0gc2VsZi5fc291bmRzWzBdLl9pZDtcbiAgICAgICAgICBzZWVrID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICBzZWVrID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcbiAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzFdLCAxMCk7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZXJlIGlzIG5vIElELCBiYWlsIG91dC5cbiAgICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIHNlZWsgd2hlbiBjYXBhYmxlLlxuICAgICAgaWYgKHR5cGVvZiBzZWVrID09PSAnbnVtYmVyJyAmJiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnIHx8IHNlbGYuX3BsYXlMb2NrKSkge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ3NlZWsnLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnNlZWsuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZCk7XG5cbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICBpZiAodHlwZW9mIHNlZWsgPT09ICdudW1iZXInICYmIHNlZWsgPj0gMCkge1xuICAgICAgICAgIC8vIFBhdXNlIHRoZSBzb3VuZCBhbmQgdXBkYXRlIHBvc2l0aW9uIGZvciByZXN0YXJ0aW5nIHBsYXliYWNrLlxuICAgICAgICAgIHZhciBwbGF5aW5nID0gc2VsZi5wbGF5aW5nKGlkKTtcbiAgICAgICAgICBpZiAocGxheWluZykge1xuICAgICAgICAgICAgc2VsZi5wYXVzZShpZCwgdHJ1ZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gTW92ZSB0aGUgcG9zaXRpb24gb2YgdGhlIHRyYWNrIGFuZCBjYW5jZWwgdGltZXIuXG4gICAgICAgICAgc291bmQuX3NlZWsgPSBzZWVrO1xuICAgICAgICAgIHNvdW5kLl9lbmRlZCA9IGZhbHNlO1xuICAgICAgICAgIHNlbGYuX2NsZWFyVGltZXIoaWQpO1xuXG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSBzZWVrIHBvc2l0aW9uIGZvciBIVE1MNSBBdWRpby5cbiAgICAgICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlICYmICFpc05hTihzb3VuZC5fbm9kZS5kdXJhdGlvbikpIHtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLmN1cnJlbnRUaW1lID0gc2VlaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBTZWVrIGFuZCBlbWl0IHdoZW4gcmVhZHkuXG4gICAgICAgICAgdmFyIHNlZWtBbmRFbWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBSZXN0YXJ0IHRoZSBwbGF5YmFjayBpZiB0aGUgc291bmQgd2FzIHBsYXlpbmcuXG4gICAgICAgICAgICBpZiAocGxheWluZykge1xuICAgICAgICAgICAgICBzZWxmLnBsYXkoaWQsIHRydWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxmLl9lbWl0KCdzZWVrJywgaWQpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgcGxheSBsb2NrIHRvIGJlIHVuc2V0IGJlZm9yZSBlbWl0dGluZyAoSFRNTDUgQXVkaW8pLlxuICAgICAgICAgIGlmIChwbGF5aW5nICYmICFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgdmFyIGVtaXRTZWVrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGlmICghc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgICAgICAgICBzZWVrQW5kRW1pdCgpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZW1pdFNlZWssIDApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgc2V0VGltZW91dChlbWl0U2VlaywgMCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlZWtBbmRFbWl0KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgdmFyIHJlYWxUaW1lID0gc2VsZi5wbGF5aW5nKGlkKSA/IEhvd2xlci5jdHguY3VycmVudFRpbWUgLSBzb3VuZC5fcGxheVN0YXJ0IDogMDtcbiAgICAgICAgICAgIHZhciByYXRlU2VlayA9IHNvdW5kLl9yYXRlU2VlayA/IHNvdW5kLl9yYXRlU2VlayAtIHNvdW5kLl9zZWVrIDogMDtcbiAgICAgICAgICAgIHJldHVybiBzb3VuZC5fc2VlayArIChyYXRlU2VlayArIHJlYWxUaW1lICogTWF0aC5hYnMoc291bmQuX3JhdGUpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHNvdW5kLl9ub2RlLmN1cnJlbnRUaW1lO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYSBzcGVjaWZpYyBzb3VuZCBpcyBjdXJyZW50bHkgcGxheWluZyBvciBub3QgKGlmIGlkIGlzIHByb3ZpZGVkKSwgb3IgY2hlY2sgaWYgYXQgbGVhc3Qgb25lIG9mIHRoZSBzb3VuZHMgaW4gdGhlIGdyb3VwIGlzIHBsYXlpbmcgb3Igbm90LlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gIGlkIFRoZSBzb3VuZCBpZCB0byBjaGVjay4gSWYgbm9uZSBpcyBwYXNzZWQsIHRoZSB3aG9sZSBzb3VuZCBncm91cCBpcyBjaGVja2VkLlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IFRydWUgaWYgcGxheWluZyBhbmQgZmFsc2UgaWYgbm90LlxuICAgICAqL1xuICAgIHBsYXlpbmc6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIENoZWNrIHRoZSBwYXNzZWQgc291bmQgSUQgKGlmIGFueSkuXG4gICAgICBpZiAodHlwZW9mIGlkID09PSAnbnVtYmVyJykge1xuICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWQpO1xuICAgICAgICByZXR1cm4gc291bmQgPyAhc291bmQuX3BhdXNlZCA6IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBPdGhlcndpc2UsIGxvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCBjaGVjayBpZiBhbnkgYXJlIHBsYXlpbmcuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICghc2VsZi5fc291bmRzW2ldLl9wYXVzZWQpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZHVyYXRpb24gb2YgdGhpcyBzb3VuZC4gUGFzc2luZyBhIHNvdW5kIGlkIHdpbGwgcmV0dXJuIHRoZSBzcHJpdGUgZHVyYXRpb24uXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBUaGUgc291bmQgaWQgdG8gY2hlY2suIElmIG5vbmUgaXMgcGFzc2VkLCByZXR1cm4gZnVsbCBzb3VyY2UgZHVyYXRpb24uXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBBdWRpbyBkdXJhdGlvbiBpbiBzZWNvbmRzLlxuICAgICAqL1xuICAgIGR1cmF0aW9uOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGR1cmF0aW9uID0gc2VsZi5fZHVyYXRpb247XG5cbiAgICAgIC8vIElmIHdlIHBhc3MgYW4gSUQsIGdldCB0aGUgc291bmQgYW5kIHJldHVybiB0aGUgc3ByaXRlIGxlbmd0aC5cbiAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZCk7XG4gICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgZHVyYXRpb24gPSBzZWxmLl9zcHJpdGVbc291bmQuX3Nwcml0ZV1bMV0gLyAxMDAwO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZHVyYXRpb247XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgbG9hZGVkIHN0YXRlIG9mIHRoaXMgSG93bC5cbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9ICd1bmxvYWRlZCcsICdsb2FkaW5nJywgJ2xvYWRlZCdcbiAgICAgKi9cbiAgICBzdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3RhdGU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVubG9hZCBhbmQgZGVzdHJveSB0aGUgY3VycmVudCBIb3dsIG9iamVjdC5cbiAgICAgKiBUaGlzIHdpbGwgaW1tZWRpYXRlbHkgc3RvcCBhbGwgc291bmQgaW5zdGFuY2VzIGF0dGFjaGVkIHRvIHRoaXMgZ3JvdXAuXG4gICAgICovXG4gICAgdW5sb2FkOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gU3RvcCBwbGF5aW5nIGFueSBhY3RpdmUgc291bmRzLlxuICAgICAgdmFyIHNvdW5kcyA9IHNlbGYuX3NvdW5kcztcbiAgICAgIGZvciAodmFyIGk9MDsgaTxzb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gU3RvcCB0aGUgc291bmQgaWYgaXQgaXMgY3VycmVudGx5IHBsYXlpbmcuXG4gICAgICAgIGlmICghc291bmRzW2ldLl9wYXVzZWQpIHtcbiAgICAgICAgICBzZWxmLnN0b3Aoc291bmRzW2ldLl9pZCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW1vdmUgdGhlIHNvdXJjZSBvciBkaXNjb25uZWN0LlxuICAgICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgLy8gU2V0IHRoZSBzb3VyY2UgdG8gMC1zZWNvbmQgc2lsZW5jZSB0byBzdG9wIGFueSBkb3dubG9hZGluZyAoZXhjZXB0IGluIElFKS5cbiAgICAgICAgICBzZWxmLl9jbGVhclNvdW5kKHNvdW5kc1tpXS5fbm9kZSk7XG5cbiAgICAgICAgICAvLyBSZW1vdmUgYW55IGV2ZW50IGxpc3RlbmVycy5cbiAgICAgICAgICBzb3VuZHNbaV0uX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBzb3VuZHNbaV0uX2Vycm9yRm4sIGZhbHNlKTtcbiAgICAgICAgICBzb3VuZHNbaV0uX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihIb3dsZXIuX2NhblBsYXlFdmVudCwgc291bmRzW2ldLl9sb2FkRm4sIGZhbHNlKTtcbiAgICAgICAgICBzb3VuZHNbaV0uX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBzb3VuZHNbaV0uX2VuZEZuLCBmYWxzZSk7XG5cbiAgICAgICAgICAvLyBSZWxlYXNlIHRoZSBBdWRpbyBvYmplY3QgYmFjayB0byB0aGUgcG9vbC5cbiAgICAgICAgICBIb3dsZXIuX3JlbGVhc2VIdG1sNUF1ZGlvKHNvdW5kc1tpXS5fbm9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFbXB0eSBvdXQgYWxsIG9mIHRoZSBub2Rlcy5cbiAgICAgICAgZGVsZXRlIHNvdW5kc1tpXS5fbm9kZTtcblxuICAgICAgICAvLyBNYWtlIHN1cmUgYWxsIHRpbWVycyBhcmUgY2xlYXJlZCBvdXQuXG4gICAgICAgIHNlbGYuX2NsZWFyVGltZXIoc291bmRzW2ldLl9pZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFJlbW92ZSB0aGUgcmVmZXJlbmNlcyBpbiB0aGUgZ2xvYmFsIEhvd2xlciBvYmplY3QuXG4gICAgICB2YXIgaW5kZXggPSBIb3dsZXIuX2hvd2xzLmluZGV4T2Yoc2VsZik7XG4gICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICBIb3dsZXIuX2hvd2xzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9XG5cbiAgICAgIC8vIERlbGV0ZSB0aGlzIHNvdW5kIGZyb20gdGhlIGNhY2hlIChpZiBubyBvdGhlciBIb3dsIGlzIHVzaW5nIGl0KS5cbiAgICAgIHZhciByZW1DYWNoZSA9IHRydWU7XG4gICAgICBmb3IgKGk9MDsgaTxIb3dsZXIuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChIb3dsZXIuX2hvd2xzW2ldLl9zcmMgPT09IHNlbGYuX3NyYyB8fCBzZWxmLl9zcmMuaW5kZXhPZihIb3dsZXIuX2hvd2xzW2ldLl9zcmMpID49IDApIHtcbiAgICAgICAgICByZW1DYWNoZSA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjYWNoZSAmJiByZW1DYWNoZSkge1xuICAgICAgICBkZWxldGUgY2FjaGVbc2VsZi5fc3JjXTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYXIgZ2xvYmFsIGVycm9ycy5cbiAgICAgIEhvd2xlci5ub0F1ZGlvID0gZmFsc2U7XG5cbiAgICAgIC8vIENsZWFyIG91dCBgc2VsZmAuXG4gICAgICBzZWxmLl9zdGF0ZSA9ICd1bmxvYWRlZCc7XG4gICAgICBzZWxmLl9zb3VuZHMgPSBbXTtcbiAgICAgIHNlbGYgPSBudWxsO1xuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTGlzdGVuIHRvIGEgY3VzdG9tIGV2ZW50LlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gICBldmVudCBFdmVudCBuYW1lLlxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmbiAgICBMaXN0ZW5lciB0byBjYWxsLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gICBpZCAgICAob3B0aW9uYWwpIE9ubHkgbGlzdGVuIHRvIGV2ZW50cyBmb3IgdGhpcyBzb3VuZC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9ICAgb25jZSAgKElOVEVSTkFMKSBNYXJrcyBldmVudCB0byBmaXJlIG9ubHkgb25jZS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIG9uOiBmdW5jdGlvbihldmVudCwgZm4sIGlkLCBvbmNlKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgZXZlbnRzID0gc2VsZlsnX29uJyArIGV2ZW50XTtcblxuICAgICAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBldmVudHMucHVzaChvbmNlID8ge2lkOiBpZCwgZm46IGZuLCBvbmNlOiBvbmNlfSA6IHtpZDogaWQsIGZuOiBmbn0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgY3VzdG9tIGV2ZW50LiBDYWxsIHdpdGhvdXQgcGFyYW1ldGVycyB0byByZW1vdmUgYWxsIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgZXZlbnQgRXZlbnQgbmFtZS5cbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gZm4gICAgTGlzdGVuZXIgdG8gcmVtb3ZlLiBMZWF2ZSBlbXB0eSB0byByZW1vdmUgYWxsLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gICBpZCAgICAob3B0aW9uYWwpIE9ubHkgcmVtb3ZlIGV2ZW50cyBmb3IgdGhpcyBzb3VuZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIG9mZjogZnVuY3Rpb24oZXZlbnQsIGZuLCBpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGV2ZW50cyA9IHNlbGZbJ19vbicgKyBldmVudF07XG4gICAgICB2YXIgaSA9IDA7XG5cbiAgICAgIC8vIEFsbG93IHBhc3NpbmcganVzdCBhbiBldmVudCBhbmQgSUQuXG4gICAgICBpZiAodHlwZW9mIGZuID09PSAnbnVtYmVyJykge1xuICAgICAgICBpZCA9IGZuO1xuICAgICAgICBmbiA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmIChmbiB8fCBpZCkge1xuICAgICAgICAvLyBMb29wIHRocm91Z2ggZXZlbnQgc3RvcmUgYW5kIHJlbW92ZSB0aGUgcGFzc2VkIGZ1bmN0aW9uLlxuICAgICAgICBmb3IgKGk9MDsgaTxldmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgaXNJZCA9IChpZCA9PT0gZXZlbnRzW2ldLmlkKTtcbiAgICAgICAgICBpZiAoZm4gPT09IGV2ZW50c1tpXS5mbiAmJiBpc0lkIHx8ICFmbiAmJiBpc0lkKSB7XG4gICAgICAgICAgICBldmVudHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGV2ZW50KSB7XG4gICAgICAgIC8vIENsZWFyIG91dCBhbGwgZXZlbnRzIG9mIHRoaXMgdHlwZS5cbiAgICAgICAgc2VsZlsnX29uJyArIGV2ZW50XSA9IFtdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQ2xlYXIgb3V0IGFsbCBldmVudHMgb2YgZXZlcnkgdHlwZS5cbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhzZWxmKTtcbiAgICAgICAgZm9yIChpPTA7IGk8a2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICgoa2V5c1tpXS5pbmRleE9mKCdfb24nKSA9PT0gMCkgJiYgQXJyYXkuaXNBcnJheShzZWxmW2tleXNbaV1dKSkge1xuICAgICAgICAgICAgc2VsZltrZXlzW2ldXSA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTGlzdGVuIHRvIGEgY3VzdG9tIGV2ZW50IGFuZCByZW1vdmUgaXQgb25jZSBmaXJlZC5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgZXZlbnQgRXZlbnQgbmFtZS5cbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gZm4gICAgTGlzdGVuZXIgdG8gY2FsbC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9ICAgaWQgICAgKG9wdGlvbmFsKSBPbmx5IGxpc3RlbiB0byBldmVudHMgZm9yIHRoaXMgc291bmQuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBvbmNlOiBmdW5jdGlvbihldmVudCwgZm4sIGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIFNldHVwIHRoZSBldmVudCBsaXN0ZW5lci5cbiAgICAgIHNlbGYub24oZXZlbnQsIGZuLCBpZCwgMSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBFbWl0IGFsbCBldmVudHMgb2YgYSBzcGVjaWZpYyB0eXBlIGFuZCBwYXNzIHRoZSBzb3VuZCBpZC5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IGV2ZW50IEV2ZW50IG5hbWUuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAgICBTb3VuZCBJRC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IG1zZyAgIE1lc3NhZ2UgdG8gZ28gd2l0aCBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9lbWl0OiBmdW5jdGlvbihldmVudCwgaWQsIG1zZykge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGV2ZW50cyA9IHNlbGZbJ19vbicgKyBldmVudF07XG5cbiAgICAgIC8vIExvb3AgdGhyb3VnaCBldmVudCBzdG9yZSBhbmQgZmlyZSBhbGwgZnVuY3Rpb25zLlxuICAgICAgZm9yICh2YXIgaT1ldmVudHMubGVuZ3RoLTE7IGk+PTA7IGktLSkge1xuICAgICAgICAvLyBPbmx5IGZpcmUgdGhlIGxpc3RlbmVyIGlmIHRoZSBjb3JyZWN0IElEIGlzIHVzZWQuXG4gICAgICAgIGlmICghZXZlbnRzW2ldLmlkIHx8IGV2ZW50c1tpXS5pZCA9PT0gaWQgfHwgZXZlbnQgPT09ICdsb2FkJykge1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgICAgIGZuLmNhbGwodGhpcywgaWQsIG1zZyk7XG4gICAgICAgICAgfS5iaW5kKHNlbGYsIGV2ZW50c1tpXS5mbiksIDApO1xuXG4gICAgICAgICAgLy8gSWYgdGhpcyBldmVudCB3YXMgc2V0dXAgd2l0aCBgb25jZWAsIHJlbW92ZSBpdC5cbiAgICAgICAgICBpZiAoZXZlbnRzW2ldLm9uY2UpIHtcbiAgICAgICAgICAgIHNlbGYub2ZmKGV2ZW50LCBldmVudHNbaV0uZm4sIGV2ZW50c1tpXS5pZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFBhc3MgdGhlIGV2ZW50IHR5cGUgaW50byBsb2FkIHF1ZXVlIHNvIHRoYXQgaXQgY2FuIGNvbnRpbnVlIHN0ZXBwaW5nLlxuICAgICAgc2VsZi5fbG9hZFF1ZXVlKGV2ZW50KTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFF1ZXVlIG9mIGFjdGlvbnMgaW5pdGlhdGVkIGJlZm9yZSB0aGUgc291bmQgaGFzIGxvYWRlZC5cbiAgICAgKiBUaGVzZSB3aWxsIGJlIGNhbGxlZCBpbiBzZXF1ZW5jZSwgd2l0aCB0aGUgbmV4dCBvbmx5IGZpcmluZ1xuICAgICAqIGFmdGVyIHRoZSBwcmV2aW91cyBoYXMgZmluaXNoZWQgZXhlY3V0aW5nIChldmVuIGlmIGFzeW5jIGxpa2UgcGxheSkuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfbG9hZFF1ZXVlOiBmdW5jdGlvbihldmVudCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBpZiAoc2VsZi5fcXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgdGFzayA9IHNlbGYuX3F1ZXVlWzBdO1xuXG4gICAgICAgIC8vIFJlbW92ZSB0aGlzIHRhc2sgaWYgYSBtYXRjaGluZyBldmVudCB3YXMgcGFzc2VkLlxuICAgICAgICBpZiAodGFzay5ldmVudCA9PT0gZXZlbnQpIHtcbiAgICAgICAgICBzZWxmLl9xdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgIHNlbGYuX2xvYWRRdWV1ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUnVuIHRoZSB0YXNrIGlmIG5vIGV2ZW50IHR5cGUgaXMgcGFzc2VkLlxuICAgICAgICBpZiAoIWV2ZW50KSB7XG4gICAgICAgICAgdGFzay5hY3Rpb24oKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRmlyZWQgd2hlbiBwbGF5YmFjayBlbmRzIGF0IHRoZSBlbmQgb2YgdGhlIGR1cmF0aW9uLlxuICAgICAqIEBwYXJhbSAge1NvdW5kfSBzb3VuZCBUaGUgc291bmQgb2JqZWN0IHRvIHdvcmsgd2l0aC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9lbmRlZDogZnVuY3Rpb24oc291bmQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBzcHJpdGUgPSBzb3VuZC5fc3ByaXRlO1xuXG4gICAgICAvLyBJZiB3ZSBhcmUgdXNpbmcgSUUgYW5kIHRoZXJlIHdhcyBuZXR3b3JrIGxhdGVuY3kgd2UgbWF5IGJlIGNsaXBwaW5nXG4gICAgICAvLyBhdWRpbyBiZWZvcmUgaXQgY29tcGxldGVzIHBsYXlpbmcuIExldHMgY2hlY2sgdGhlIG5vZGUgdG8gbWFrZSBzdXJlIGl0XG4gICAgICAvLyBiZWxpZXZlcyBpdCBoYXMgY29tcGxldGVkLCBiZWZvcmUgZW5kaW5nIHRoZSBwbGF5YmFjay5cbiAgICAgIGlmICghc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUgJiYgIXNvdW5kLl9ub2RlLnBhdXNlZCAmJiAhc291bmQuX25vZGUuZW5kZWQgJiYgc291bmQuX25vZGUuY3VycmVudFRpbWUgPCBzb3VuZC5fc3RvcCkge1xuICAgICAgICBzZXRUaW1lb3V0KHNlbGYuX2VuZGVkLmJpbmQoc2VsZiwgc291bmQpLCAxMDApO1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gU2hvdWxkIHRoaXMgc291bmQgbG9vcD9cbiAgICAgIHZhciBsb29wID0gISEoc291bmQuX2xvb3AgfHwgc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMl0pO1xuXG4gICAgICAvLyBGaXJlIHRoZSBlbmRlZCBldmVudC5cbiAgICAgIHNlbGYuX2VtaXQoJ2VuZCcsIHNvdW5kLl9pZCk7XG5cbiAgICAgIC8vIFJlc3RhcnQgdGhlIHBsYXliYWNrIGZvciBIVE1MNSBBdWRpbyBsb29wLlxuICAgICAgaWYgKCFzZWxmLl93ZWJBdWRpbyAmJiBsb29wKSB7XG4gICAgICAgIHNlbGYuc3RvcChzb3VuZC5faWQsIHRydWUpLnBsYXkoc291bmQuX2lkKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmVzdGFydCB0aGlzIHRpbWVyIGlmIG9uIGEgV2ViIEF1ZGlvIGxvb3AuXG4gICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgbG9vcCkge1xuICAgICAgICBzZWxmLl9lbWl0KCdwbGF5Jywgc291bmQuX2lkKTtcbiAgICAgICAgc291bmQuX3NlZWsgPSBzb3VuZC5fc3RhcnQgfHwgMDtcbiAgICAgICAgc291bmQuX3JhdGVTZWVrID0gMDtcbiAgICAgICAgc291bmQuX3BsYXlTdGFydCA9IEhvd2xlci5jdHguY3VycmVudFRpbWU7XG5cbiAgICAgICAgdmFyIHRpbWVvdXQgPSAoKHNvdW5kLl9zdG9wIC0gc291bmQuX3N0YXJ0KSAqIDEwMDApIC8gTWF0aC5hYnMoc291bmQuX3JhdGUpO1xuICAgICAgICBzZWxmLl9lbmRUaW1lcnNbc291bmQuX2lkXSA9IHNldFRpbWVvdXQoc2VsZi5fZW5kZWQuYmluZChzZWxmLCBzb3VuZCksIHRpbWVvdXQpO1xuICAgICAgfVxuXG4gICAgICAvLyBNYXJrIHRoZSBub2RlIGFzIHBhdXNlZC5cbiAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiAhbG9vcCkge1xuICAgICAgICBzb3VuZC5fcGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgc291bmQuX2VuZGVkID0gdHJ1ZTtcbiAgICAgICAgc291bmQuX3NlZWsgPSBzb3VuZC5fc3RhcnQgfHwgMDtcbiAgICAgICAgc291bmQuX3JhdGVTZWVrID0gMDtcbiAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihzb3VuZC5faWQpO1xuXG4gICAgICAgIC8vIENsZWFuIHVwIHRoZSBidWZmZXIgc291cmNlLlxuICAgICAgICBzZWxmLl9jbGVhbkJ1ZmZlcihzb3VuZC5fbm9kZSk7XG5cbiAgICAgICAgLy8gQXR0ZW1wdCB0byBhdXRvLXN1c3BlbmQgQXVkaW9Db250ZXh0IGlmIG5vIHNvdW5kcyBhcmUgc3RpbGwgcGxheWluZy5cbiAgICAgICAgSG93bGVyLl9hdXRvU3VzcGVuZCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBXaGVuIHVzaW5nIGEgc3ByaXRlLCBlbmQgdGhlIHRyYWNrLlxuICAgICAgaWYgKCFzZWxmLl93ZWJBdWRpbyAmJiAhbG9vcCkge1xuICAgICAgICBzZWxmLnN0b3Aoc291bmQuX2lkLCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENsZWFyIHRoZSBlbmQgdGltZXIgZm9yIGEgc291bmQgcGxheWJhY2suXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBUaGUgc291bmQgSUQuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfY2xlYXJUaW1lcjogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgaWYgKHNlbGYuX2VuZFRpbWVyc1tpZF0pIHtcbiAgICAgICAgLy8gQ2xlYXIgdGhlIHRpbWVvdXQgb3IgcmVtb3ZlIHRoZSBlbmRlZCBsaXN0ZW5lci5cbiAgICAgICAgaWYgKHR5cGVvZiBzZWxmLl9lbmRUaW1lcnNbaWRdICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYuX2VuZFRpbWVyc1tpZF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZCk7XG4gICAgICAgICAgaWYgKHNvdW5kICYmIHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdlbmRlZCcsIHNlbGYuX2VuZFRpbWVyc1tpZF0sIGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBkZWxldGUgc2VsZi5fZW5kVGltZXJzW2lkXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgc291bmQgaWRlbnRpZmllZCBieSB0aGlzIElELCBvciByZXR1cm4gbnVsbC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFNvdW5kIElEXG4gICAgICogQHJldHVybiB7T2JqZWN0fSAgICBTb3VuZCBvYmplY3Qgb3IgbnVsbC5cbiAgICAgKi9cbiAgICBfc291bmRCeUlkOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBMb29wIHRocm91Z2ggYWxsIHNvdW5kcyBhbmQgZmluZCB0aGUgb25lIHdpdGggdGhpcyBJRC5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9zb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGlkID09PSBzZWxmLl9zb3VuZHNbaV0uX2lkKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuX3NvdW5kc1tpXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIGFuIGluYWN0aXZlIHNvdW5kIGZyb20gdGhlIHBvb2wgb3IgY3JlYXRlIGEgbmV3IG9uZS5cbiAgICAgKiBAcmV0dXJuIHtTb3VuZH0gU291bmQgcGxheWJhY2sgb2JqZWN0LlxuICAgICAqL1xuICAgIF9pbmFjdGl2ZVNvdW5kOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgc2VsZi5fZHJhaW4oKTtcblxuICAgICAgLy8gRmluZCB0aGUgZmlyc3QgaW5hY3RpdmUgbm9kZSB0byByZWN5Y2xlLlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoc2VsZi5fc291bmRzW2ldLl9lbmRlZCkge1xuICAgICAgICAgIHJldHVybiBzZWxmLl9zb3VuZHNbaV0ucmVzZXQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBpbmFjdGl2ZSBub2RlIHdhcyBmb3VuZCwgY3JlYXRlIGEgbmV3IG9uZS5cbiAgICAgIHJldHVybiBuZXcgU291bmQoc2VsZik7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERyYWluIGV4Y2VzcyBpbmFjdGl2ZSBzb3VuZHMgZnJvbSB0aGUgcG9vbC5cbiAgICAgKi9cbiAgICBfZHJhaW46IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGxpbWl0ID0gc2VsZi5fcG9vbDtcbiAgICAgIHZhciBjbnQgPSAwO1xuICAgICAgdmFyIGkgPSAwO1xuXG4gICAgICAvLyBJZiB0aGVyZSBhcmUgbGVzcyBzb3VuZHMgdGhhbiB0aGUgbWF4IHBvb2wgc2l6ZSwgd2UgYXJlIGRvbmUuXG4gICAgICBpZiAoc2VsZi5fc291bmRzLmxlbmd0aCA8IGxpbWl0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gQ291bnQgdGhlIG51bWJlciBvZiBpbmFjdGl2ZSBzb3VuZHMuXG4gICAgICBmb3IgKGk9MDsgaTxzZWxmLl9zb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHNlbGYuX3NvdW5kc1tpXS5fZW5kZWQpIHtcbiAgICAgICAgICBjbnQrKztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBSZW1vdmUgZXhjZXNzIGluYWN0aXZlIHNvdW5kcywgZ29pbmcgaW4gcmV2ZXJzZSBvcmRlci5cbiAgICAgIGZvciAoaT1zZWxmLl9zb3VuZHMubGVuZ3RoIC0gMTsgaT49MDsgaS0tKSB7XG4gICAgICAgIGlmIChjbnQgPD0gbGltaXQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5fc291bmRzW2ldLl9lbmRlZCkge1xuICAgICAgICAgIC8vIERpc2Nvbm5lY3QgdGhlIGF1ZGlvIHNvdXJjZSB3aGVuIHVzaW5nIFdlYiBBdWRpby5cbiAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgc2VsZi5fc291bmRzW2ldLl9ub2RlKSB7XG4gICAgICAgICAgICBzZWxmLl9zb3VuZHNbaV0uX25vZGUuZGlzY29ubmVjdCgwKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBSZW1vdmUgc291bmRzIHVudGlsIHdlIGhhdmUgdGhlIHBvb2wgc2l6ZS5cbiAgICAgICAgICBzZWxmLl9zb3VuZHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgIGNudC0tO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgSUQncyBmcm9tIHRoZSBzb3VuZHMgcG9vbC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIE9ubHkgcmV0dXJuIG9uZSBJRCBpZiBvbmUgaXMgcGFzc2VkLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSAgICBBcnJheSBvZiBJRHMuXG4gICAgICovXG4gICAgX2dldFNvdW5kSWRzOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB2YXIgaWRzID0gW107XG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9zb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZHMucHVzaChzZWxmLl9zb3VuZHNbaV0uX2lkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpZHM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gW2lkXTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTG9hZCB0aGUgc291bmQgYmFjayBpbnRvIHRoZSBidWZmZXIgc291cmNlLlxuICAgICAqIEBwYXJhbSAge1NvdW5kfSBzb3VuZCBUaGUgc291bmQgb2JqZWN0IHRvIHdvcmsgd2l0aC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9yZWZyZXNoQnVmZmVyOiBmdW5jdGlvbihzb3VuZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBTZXR1cCB0aGUgYnVmZmVyIHNvdXJjZSBmb3IgcGxheWJhY2suXG4gICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UgPSBIb3dsZXIuY3R4LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmJ1ZmZlciA9IGNhY2hlW3NlbGYuX3NyY107XG5cbiAgICAgIC8vIENvbm5lY3QgdG8gdGhlIGNvcnJlY3Qgbm9kZS5cbiAgICAgIGlmIChzb3VuZC5fcGFubmVyKSB7XG4gICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5jb25uZWN0KHNvdW5kLl9wYW5uZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmNvbm5lY3Qoc291bmQuX25vZGUpO1xuICAgICAgfVxuXG4gICAgICAvLyBTZXR1cCBsb29waW5nIGFuZCBwbGF5YmFjayByYXRlLlxuICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3AgPSBzb3VuZC5fbG9vcDtcbiAgICAgIGlmIChzb3VuZC5fbG9vcCkge1xuICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcFN0YXJ0ID0gc291bmQuX3N0YXJ0IHx8IDA7XG4gICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wRW5kID0gc291bmQuX3N0b3AgfHwgMDtcbiAgICAgIH1cbiAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5wbGF5YmFja1JhdGUuc2V0VmFsdWVBdFRpbWUoc291bmQuX3JhdGUsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUHJldmVudCBtZW1vcnkgbGVha3MgYnkgY2xlYW5pbmcgdXAgdGhlIGJ1ZmZlciBzb3VyY2UgYWZ0ZXIgcGxheWJhY2suXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBub2RlIFNvdW5kJ3MgYXVkaW8gbm9kZSBjb250YWluaW5nIHRoZSBidWZmZXIgc291cmNlLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX2NsZWFuQnVmZmVyOiBmdW5jdGlvbihub2RlKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgaXNJT1MgPSBIb3dsZXIuX25hdmlnYXRvciAmJiBIb3dsZXIuX25hdmlnYXRvci52ZW5kb3IuaW5kZXhPZignQXBwbGUnKSA+PSAwO1xuXG4gICAgICBpZiAoIW5vZGUuYnVmZmVyU291cmNlKSB7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICBpZiAoSG93bGVyLl9zY3JhdGNoQnVmZmVyICYmIG5vZGUuYnVmZmVyU291cmNlKSB7XG4gICAgICAgIG5vZGUuYnVmZmVyU291cmNlLm9uZW5kZWQgPSBudWxsO1xuICAgICAgICBub2RlLmJ1ZmZlclNvdXJjZS5kaXNjb25uZWN0KDApO1xuICAgICAgICBpZiAoaXNJT1MpIHtcbiAgICAgICAgICB0cnkgeyBub2RlLmJ1ZmZlclNvdXJjZS5idWZmZXIgPSBIb3dsZXIuX3NjcmF0Y2hCdWZmZXI7IH0gY2F0Y2goZSkge31cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbm9kZS5idWZmZXJTb3VyY2UgPSBudWxsO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBzb3VyY2UgdG8gYSAwLXNlY29uZCBzaWxlbmNlIHRvIHN0b3AgYW55IGRvd25sb2FkaW5nIChleGNlcHQgaW4gSUUpLlxuICAgICAqIEBwYXJhbSAge09iamVjdH0gbm9kZSBBdWRpbyBub2RlIHRvIGNsZWFyLlxuICAgICAqL1xuICAgIF9jbGVhclNvdW5kOiBmdW5jdGlvbihub2RlKSB7XG4gICAgICB2YXIgY2hlY2tJRSA9IC9NU0lFIHxUcmlkZW50XFwvLy50ZXN0KEhvd2xlci5fbmF2aWdhdG9yICYmIEhvd2xlci5fbmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICBpZiAoIWNoZWNrSUUpIHtcbiAgICAgICAgbm9kZS5zcmMgPSAnZGF0YTphdWRpby93YXY7YmFzZTY0LFVrbEdSaWdBQUFCWFFWWkZabTEwSUJJQUFBQUJBQUVBUkt3QUFJaFlBUUFDQUJBQUFBQmtZWFJoQWdBQUFBRUEnO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKiogU2luZ2xlIFNvdW5kIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIFNldHVwIHRoZSBzb3VuZCBvYmplY3QsIHdoaWNoIGVhY2ggbm9kZSBhdHRhY2hlZCB0byBhIEhvd2wgZ3JvdXAgaXMgY29udGFpbmVkIGluLlxuICAgKiBAcGFyYW0ge09iamVjdH0gaG93bCBUaGUgSG93bCBwYXJlbnQgZ3JvdXAuXG4gICAqL1xuICB2YXIgU291bmQgPSBmdW5jdGlvbihob3dsKSB7XG4gICAgdGhpcy5fcGFyZW50ID0gaG93bDtcbiAgICB0aGlzLmluaXQoKTtcbiAgfTtcbiAgU291bmQucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgYSBuZXcgU291bmQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge1NvdW5kfVxuICAgICAqL1xuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcblxuICAgICAgLy8gU2V0dXAgdGhlIGRlZmF1bHQgcGFyYW1ldGVycy5cbiAgICAgIHNlbGYuX211dGVkID0gcGFyZW50Ll9tdXRlZDtcbiAgICAgIHNlbGYuX2xvb3AgPSBwYXJlbnQuX2xvb3A7XG4gICAgICBzZWxmLl92b2x1bWUgPSBwYXJlbnQuX3ZvbHVtZTtcbiAgICAgIHNlbGYuX3JhdGUgPSBwYXJlbnQuX3JhdGU7XG4gICAgICBzZWxmLl9zZWVrID0gMDtcbiAgICAgIHNlbGYuX3BhdXNlZCA9IHRydWU7XG4gICAgICBzZWxmLl9lbmRlZCA9IHRydWU7XG4gICAgICBzZWxmLl9zcHJpdGUgPSAnX19kZWZhdWx0JztcblxuICAgICAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgSUQgZm9yIHRoaXMgc291bmQuXG4gICAgICBzZWxmLl9pZCA9ICsrSG93bGVyLl9jb3VudGVyO1xuXG4gICAgICAvLyBBZGQgaXRzZWxmIHRvIHRoZSBwYXJlbnQncyBwb29sLlxuICAgICAgcGFyZW50Ll9zb3VuZHMucHVzaChzZWxmKTtcblxuICAgICAgLy8gQ3JlYXRlIHRoZSBuZXcgbm9kZS5cbiAgICAgIHNlbGYuY3JlYXRlKCk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW5kIHNldHVwIGEgbmV3IHNvdW5kIG9iamVjdCwgd2hldGhlciBIVE1MNSBBdWRpbyBvciBXZWIgQXVkaW8uXG4gICAgICogQHJldHVybiB7U291bmR9XG4gICAgICovXG4gICAgY3JlYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBwYXJlbnQgPSBzZWxmLl9wYXJlbnQ7XG4gICAgICB2YXIgdm9sdW1lID0gKEhvd2xlci5fbXV0ZWQgfHwgc2VsZi5fbXV0ZWQgfHwgc2VsZi5fcGFyZW50Ll9tdXRlZCkgPyAwIDogc2VsZi5fdm9sdW1lO1xuXG4gICAgICBpZiAocGFyZW50Ll93ZWJBdWRpbykge1xuICAgICAgICAvLyBDcmVhdGUgdGhlIGdhaW4gbm9kZSBmb3IgY29udHJvbGxpbmcgdm9sdW1lICh0aGUgc291cmNlIHdpbGwgY29ubmVjdCB0byB0aGlzKS5cbiAgICAgICAgc2VsZi5fbm9kZSA9ICh0eXBlb2YgSG93bGVyLmN0eC5jcmVhdGVHYWluID09PSAndW5kZWZpbmVkJykgPyBIb3dsZXIuY3R4LmNyZWF0ZUdhaW5Ob2RlKCkgOiBIb3dsZXIuY3R4LmNyZWF0ZUdhaW4oKTtcbiAgICAgICAgc2VsZi5fbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKHZvbHVtZSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgIHNlbGYuX25vZGUucGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgc2VsZi5fbm9kZS5jb25uZWN0KEhvd2xlci5tYXN0ZXJHYWluKTtcbiAgICAgIH0gZWxzZSBpZiAoIUhvd2xlci5ub0F1ZGlvKSB7XG4gICAgICAgIC8vIEdldCBhbiB1bmxvY2tlZCBBdWRpbyBvYmplY3QgZnJvbSB0aGUgcG9vbC5cbiAgICAgICAgc2VsZi5fbm9kZSA9IEhvd2xlci5fb2J0YWluSHRtbDVBdWRpbygpO1xuXG4gICAgICAgIC8vIExpc3RlbiBmb3IgZXJyb3JzIChodHRwOi8vZGV2LnczLm9yZy9odG1sNS9zcGVjLWF1dGhvci12aWV3L3NwZWMuaHRtbCNtZWRpYWVycm9yKS5cbiAgICAgICAgc2VsZi5fZXJyb3JGbiA9IHNlbGYuX2Vycm9yTGlzdGVuZXIuYmluZChzZWxmKTtcbiAgICAgICAgc2VsZi5fbm9kZS5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIHNlbGYuX2Vycm9yRm4sIGZhbHNlKTtcblxuICAgICAgICAvLyBMaXN0ZW4gZm9yICdjYW5wbGF5dGhyb3VnaCcgZXZlbnQgdG8gbGV0IHVzIGtub3cgdGhlIHNvdW5kIGlzIHJlYWR5LlxuICAgICAgICBzZWxmLl9sb2FkRm4gPSBzZWxmLl9sb2FkTGlzdGVuZXIuYmluZChzZWxmKTtcbiAgICAgICAgc2VsZi5fbm9kZS5hZGRFdmVudExpc3RlbmVyKEhvd2xlci5fY2FuUGxheUV2ZW50LCBzZWxmLl9sb2FkRm4sIGZhbHNlKTtcblxuICAgICAgICAvLyBMaXN0ZW4gZm9yIHRoZSAnZW5kZWQnIGV2ZW50IG9uIHRoZSBzb3VuZCB0byBhY2NvdW50IGZvciBlZGdlLWNhc2Ugd2hlcmVcbiAgICAgICAgLy8gYSBmaW5pdGUgc291bmQgaGFzIGEgZHVyYXRpb24gb2YgSW5maW5pdHkuXG4gICAgICAgIHNlbGYuX2VuZEZuID0gc2VsZi5fZW5kTGlzdGVuZXIuYmluZChzZWxmKTtcbiAgICAgICAgc2VsZi5fbm9kZS5hZGRFdmVudExpc3RlbmVyKCdlbmRlZCcsIHNlbGYuX2VuZEZuLCBmYWxzZSk7XG5cbiAgICAgICAgLy8gU2V0dXAgdGhlIG5ldyBhdWRpbyBub2RlLlxuICAgICAgICBzZWxmLl9ub2RlLnNyYyA9IHBhcmVudC5fc3JjO1xuICAgICAgICBzZWxmLl9ub2RlLnByZWxvYWQgPSBwYXJlbnQuX3ByZWxvYWQgPT09IHRydWUgPyAnYXV0bycgOiBwYXJlbnQuX3ByZWxvYWQ7XG4gICAgICAgIHNlbGYuX25vZGUudm9sdW1lID0gdm9sdW1lICogSG93bGVyLnZvbHVtZSgpO1xuXG4gICAgICAgIC8vIEJlZ2luIGxvYWRpbmcgdGhlIHNvdXJjZS5cbiAgICAgICAgc2VsZi5fbm9kZS5sb2FkKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXNldCB0aGUgcGFyYW1ldGVycyBvZiB0aGlzIHNvdW5kIHRvIHRoZSBvcmlnaW5hbCBzdGF0ZSAoZm9yIHJlY3ljbGUpLlxuICAgICAqIEByZXR1cm4ge1NvdW5kfVxuICAgICAqL1xuICAgIHJlc2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBwYXJlbnQgPSBzZWxmLl9wYXJlbnQ7XG5cbiAgICAgIC8vIFJlc2V0IGFsbCBvZiB0aGUgcGFyYW1ldGVycyBvZiB0aGlzIHNvdW5kLlxuICAgICAgc2VsZi5fbXV0ZWQgPSBwYXJlbnQuX211dGVkO1xuICAgICAgc2VsZi5fbG9vcCA9IHBhcmVudC5fbG9vcDtcbiAgICAgIHNlbGYuX3ZvbHVtZSA9IHBhcmVudC5fdm9sdW1lO1xuICAgICAgc2VsZi5fcmF0ZSA9IHBhcmVudC5fcmF0ZTtcbiAgICAgIHNlbGYuX3NlZWsgPSAwO1xuICAgICAgc2VsZi5fcmF0ZVNlZWsgPSAwO1xuICAgICAgc2VsZi5fcGF1c2VkID0gdHJ1ZTtcbiAgICAgIHNlbGYuX2VuZGVkID0gdHJ1ZTtcbiAgICAgIHNlbGYuX3Nwcml0ZSA9ICdfX2RlZmF1bHQnO1xuXG4gICAgICAvLyBHZW5lcmF0ZSBhIG5ldyBJRCBzbyB0aGF0IGl0IGlzbid0IGNvbmZ1c2VkIHdpdGggdGhlIHByZXZpb3VzIHNvdW5kLlxuICAgICAgc2VsZi5faWQgPSArK0hvd2xlci5fY291bnRlcjtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEhUTUw1IEF1ZGlvIGVycm9yIGxpc3RlbmVyIGNhbGxiYWNrLlxuICAgICAqL1xuICAgIF9lcnJvckxpc3RlbmVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gRmlyZSBhbiBlcnJvciBldmVudCBhbmQgcGFzcyBiYWNrIHRoZSBjb2RlLlxuICAgICAgc2VsZi5fcGFyZW50Ll9lbWl0KCdsb2FkZXJyb3InLCBzZWxmLl9pZCwgc2VsZi5fbm9kZS5lcnJvciA/IHNlbGYuX25vZGUuZXJyb3IuY29kZSA6IDApO1xuXG4gICAgICAvLyBDbGVhciB0aGUgZXZlbnQgbGlzdGVuZXIuXG4gICAgICBzZWxmLl9ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgc2VsZi5fZXJyb3JGbiwgZmFsc2UpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBIVE1MNSBBdWRpbyBjYW5wbGF5dGhyb3VnaCBsaXN0ZW5lciBjYWxsYmFjay5cbiAgICAgKi9cbiAgICBfbG9hZExpc3RlbmVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBwYXJlbnQgPSBzZWxmLl9wYXJlbnQ7XG5cbiAgICAgIC8vIFJvdW5kIHVwIHRoZSBkdXJhdGlvbiB0byBhY2NvdW50IGZvciB0aGUgbG93ZXIgcHJlY2lzaW9uIGluIEhUTUw1IEF1ZGlvLlxuICAgICAgcGFyZW50Ll9kdXJhdGlvbiA9IE1hdGguY2VpbChzZWxmLl9ub2RlLmR1cmF0aW9uICogMTApIC8gMTA7XG5cbiAgICAgIC8vIFNldHVwIGEgc3ByaXRlIGlmIG5vbmUgaXMgZGVmaW5lZC5cbiAgICAgIGlmIChPYmplY3Qua2V5cyhwYXJlbnQuX3Nwcml0ZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHBhcmVudC5fc3ByaXRlID0ge19fZGVmYXVsdDogWzAsIHBhcmVudC5fZHVyYXRpb24gKiAxMDAwXX07XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJlbnQuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgICBwYXJlbnQuX3N0YXRlID0gJ2xvYWRlZCc7XG4gICAgICAgIHBhcmVudC5fZW1pdCgnbG9hZCcpO1xuICAgICAgICBwYXJlbnQuX2xvYWRRdWV1ZSgpO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhciB0aGUgZXZlbnQgbGlzdGVuZXIuXG4gICAgICBzZWxmLl9ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoSG93bGVyLl9jYW5QbGF5RXZlbnQsIHNlbGYuX2xvYWRGbiwgZmFsc2UpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBIVE1MNSBBdWRpbyBlbmRlZCBsaXN0ZW5lciBjYWxsYmFjay5cbiAgICAgKi9cbiAgICBfZW5kTGlzdGVuZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcblxuICAgICAgLy8gT25seSBoYW5kbGUgdGhlIGBlbmRlZGBgIGV2ZW50IGlmIHRoZSBkdXJhdGlvbiBpcyBJbmZpbml0eS5cbiAgICAgIGlmIChwYXJlbnQuX2R1cmF0aW9uID09PSBJbmZpbml0eSkge1xuICAgICAgICAvLyBVcGRhdGUgdGhlIHBhcmVudCBkdXJhdGlvbiB0byBtYXRjaCB0aGUgcmVhbCBhdWRpbyBkdXJhdGlvbi5cbiAgICAgICAgLy8gUm91bmQgdXAgdGhlIGR1cmF0aW9uIHRvIGFjY291bnQgZm9yIHRoZSBsb3dlciBwcmVjaXNpb24gaW4gSFRNTDUgQXVkaW8uXG4gICAgICAgIHBhcmVudC5fZHVyYXRpb24gPSBNYXRoLmNlaWwoc2VsZi5fbm9kZS5kdXJhdGlvbiAqIDEwKSAvIDEwO1xuXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgc3ByaXRlIHRoYXQgY29ycmVzcG9uZHMgdG8gdGhlIHJlYWwgZHVyYXRpb24uXG4gICAgICAgIGlmIChwYXJlbnQuX3Nwcml0ZS5fX2RlZmF1bHRbMV0gPT09IEluZmluaXR5KSB7XG4gICAgICAgICAgcGFyZW50Ll9zcHJpdGUuX19kZWZhdWx0WzFdID0gcGFyZW50Ll9kdXJhdGlvbiAqIDEwMDA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSdW4gdGhlIHJlZ3VsYXIgZW5kZWQgbWV0aG9kLlxuICAgICAgICBwYXJlbnQuX2VuZGVkKHNlbGYpO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhciB0aGUgZXZlbnQgbGlzdGVuZXIgc2luY2UgdGhlIGR1cmF0aW9uIGlzIG5vdyBjb3JyZWN0LlxuICAgICAgc2VsZi5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdlbmRlZCcsIHNlbGYuX2VuZEZuLCBmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKiBIZWxwZXIgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICB2YXIgY2FjaGUgPSB7fTtcblxuICAvKipcbiAgICogQnVmZmVyIGEgc291bmQgZnJvbSBVUkwsIERhdGEgVVJJIG9yIGNhY2hlIGFuZCBkZWNvZGUgdG8gYXVkaW8gc291cmNlIChXZWIgQXVkaW8gQVBJKS5cbiAgICogQHBhcmFtICB7SG93bH0gc2VsZlxuICAgKi9cbiAgdmFyIGxvYWRCdWZmZXIgPSBmdW5jdGlvbihzZWxmKSB7XG4gICAgdmFyIHVybCA9IHNlbGYuX3NyYztcblxuICAgIC8vIENoZWNrIGlmIHRoZSBidWZmZXIgaGFzIGFscmVhZHkgYmVlbiBjYWNoZWQgYW5kIHVzZSBpdCBpbnN0ZWFkLlxuICAgIGlmIChjYWNoZVt1cmxdKSB7XG4gICAgICAvLyBTZXQgdGhlIGR1cmF0aW9uIGZyb20gdGhlIGNhY2hlLlxuICAgICAgc2VsZi5fZHVyYXRpb24gPSBjYWNoZVt1cmxdLmR1cmF0aW9uO1xuXG4gICAgICAvLyBMb2FkIHRoZSBzb3VuZCBpbnRvIHRoaXMgSG93bC5cbiAgICAgIGxvYWRTb3VuZChzZWxmKTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICgvXmRhdGE6W147XSs7YmFzZTY0LC8udGVzdCh1cmwpKSB7XG4gICAgICAvLyBEZWNvZGUgdGhlIGJhc2U2NCBkYXRhIFVSSSB3aXRob3V0IFhIUiwgc2luY2Ugc29tZSBicm93c2VycyBkb24ndCBzdXBwb3J0IGl0LlxuICAgICAgdmFyIGRhdGEgPSBhdG9iKHVybC5zcGxpdCgnLCcpWzFdKTtcbiAgICAgIHZhciBkYXRhVmlldyA9IG5ldyBVaW50OEFycmF5KGRhdGEubGVuZ3RoKTtcbiAgICAgIGZvciAodmFyIGk9MDsgaTxkYXRhLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGRhdGFWaWV3W2ldID0gZGF0YS5jaGFyQ29kZUF0KGkpO1xuICAgICAgfVxuXG4gICAgICBkZWNvZGVBdWRpb0RhdGEoZGF0YVZpZXcuYnVmZmVyLCBzZWxmKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTG9hZCB0aGUgYnVmZmVyIGZyb20gdGhlIFVSTC5cbiAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgIHhoci5vcGVuKHNlbGYuX3hoci5tZXRob2QsIHVybCwgdHJ1ZSk7XG4gICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gc2VsZi5feGhyLndpdGhDcmVkZW50aWFscztcbiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInO1xuXG4gICAgICAvLyBBcHBseSBhbnkgY3VzdG9tIGhlYWRlcnMgdG8gdGhlIHJlcXVlc3QuXG4gICAgICBpZiAoc2VsZi5feGhyLmhlYWRlcnMpIHtcbiAgICAgICAgT2JqZWN0LmtleXMoc2VsZi5feGhyLmhlYWRlcnMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoa2V5LCBzZWxmLl94aHIuaGVhZGVyc1trZXldKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGdldCBhIHN1Y2Nlc3NmdWwgcmVzcG9uc2UgYmFjay5cbiAgICAgICAgdmFyIGNvZGUgPSAoeGhyLnN0YXR1cyArICcnKVswXTtcbiAgICAgICAgaWYgKGNvZGUgIT09ICcwJyAmJiBjb2RlICE9PSAnMicgJiYgY29kZSAhPT0gJzMnKSB7XG4gICAgICAgICAgc2VsZi5fZW1pdCgnbG9hZGVycm9yJywgbnVsbCwgJ0ZhaWxlZCBsb2FkaW5nIGF1ZGlvIGZpbGUgd2l0aCBzdGF0dXM6ICcgKyB4aHIuc3RhdHVzICsgJy4nKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBkZWNvZGVBdWRpb0RhdGEoeGhyLnJlc3BvbnNlLCBzZWxmKTtcbiAgICAgIH07XG4gICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBJZiB0aGVyZSBpcyBhbiBlcnJvciwgc3dpdGNoIHRvIEhUTUw1IEF1ZGlvLlxuICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICBzZWxmLl9odG1sNSA9IHRydWU7XG4gICAgICAgICAgc2VsZi5fd2ViQXVkaW8gPSBmYWxzZTtcbiAgICAgICAgICBzZWxmLl9zb3VuZHMgPSBbXTtcbiAgICAgICAgICBkZWxldGUgY2FjaGVbdXJsXTtcbiAgICAgICAgICBzZWxmLmxvYWQoKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHNhZmVYaHJTZW5kKHhocik7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZW5kIHRoZSBYSFIgcmVxdWVzdCB3cmFwcGVkIGluIGEgdHJ5L2NhdGNoLlxuICAgKiBAcGFyYW0gIHtPYmplY3R9IHhociBYSFIgdG8gc2VuZC5cbiAgICovXG4gIHZhciBzYWZlWGhyU2VuZCA9IGZ1bmN0aW9uKHhocikge1xuICAgIHRyeSB7XG4gICAgICB4aHIuc2VuZCgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHhoci5vbmVycm9yKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBEZWNvZGUgYXVkaW8gZGF0YSBmcm9tIGFuIGFycmF5IGJ1ZmZlci5cbiAgICogQHBhcmFtICB7QXJyYXlCdWZmZXJ9IGFycmF5YnVmZmVyIFRoZSBhdWRpbyBkYXRhLlxuICAgKiBAcGFyYW0gIHtIb3dsfSAgICAgICAgc2VsZlxuICAgKi9cbiAgdmFyIGRlY29kZUF1ZGlvRGF0YSA9IGZ1bmN0aW9uKGFycmF5YnVmZmVyLCBzZWxmKSB7XG4gICAgLy8gRmlyZSBhIGxvYWQgZXJyb3IgaWYgc29tZXRoaW5nIGJyb2tlLlxuICAgIHZhciBlcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgc2VsZi5fZW1pdCgnbG9hZGVycm9yJywgbnVsbCwgJ0RlY29kaW5nIGF1ZGlvIGRhdGEgZmFpbGVkLicpO1xuICAgIH07XG5cbiAgICAvLyBMb2FkIHRoZSBzb3VuZCBvbiBzdWNjZXNzLlxuICAgIHZhciBzdWNjZXNzID0gZnVuY3Rpb24oYnVmZmVyKSB7XG4gICAgICBpZiAoYnVmZmVyICYmIHNlbGYuX3NvdW5kcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNhY2hlW3NlbGYuX3NyY10gPSBidWZmZXI7XG4gICAgICAgIGxvYWRTb3VuZChzZWxmLCBidWZmZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXJyb3IoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gRGVjb2RlIHRoZSBidWZmZXIgaW50byBhbiBhdWRpbyBzb3VyY2UuXG4gICAgaWYgKHR5cGVvZiBQcm9taXNlICE9PSAndW5kZWZpbmVkJyAmJiBIb3dsZXIuY3R4LmRlY29kZUF1ZGlvRGF0YS5sZW5ndGggPT09IDEpIHtcbiAgICAgIEhvd2xlci5jdHguZGVjb2RlQXVkaW9EYXRhKGFycmF5YnVmZmVyKS50aGVuKHN1Y2Nlc3MpLmNhdGNoKGVycm9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgSG93bGVyLmN0eC5kZWNvZGVBdWRpb0RhdGEoYXJyYXlidWZmZXIsIHN1Y2Nlc3MsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU291bmQgaXMgbm93IGxvYWRlZCwgc28gZmluaXNoIHNldHRpbmcgZXZlcnl0aGluZyB1cCBhbmQgZmlyZSB0aGUgbG9hZGVkIGV2ZW50LlxuICAgKiBAcGFyYW0gIHtIb3dsfSBzZWxmXG4gICAqIEBwYXJhbSAge09iamVjdH0gYnVmZmVyIFRoZSBkZWNvZGVkIGJ1ZmZlciBzb3VuZCBzb3VyY2UuXG4gICAqL1xuICB2YXIgbG9hZFNvdW5kID0gZnVuY3Rpb24oc2VsZiwgYnVmZmVyKSB7XG4gICAgLy8gU2V0IHRoZSBkdXJhdGlvbi5cbiAgICBpZiAoYnVmZmVyICYmICFzZWxmLl9kdXJhdGlvbikge1xuICAgICAgc2VsZi5fZHVyYXRpb24gPSBidWZmZXIuZHVyYXRpb247XG4gICAgfVxuXG4gICAgLy8gU2V0dXAgYSBzcHJpdGUgaWYgbm9uZSBpcyBkZWZpbmVkLlxuICAgIGlmIChPYmplY3Qua2V5cyhzZWxmLl9zcHJpdGUpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgc2VsZi5fc3ByaXRlID0ge19fZGVmYXVsdDogWzAsIHNlbGYuX2R1cmF0aW9uICogMTAwMF19O1xuICAgIH1cblxuICAgIC8vIEZpcmUgdGhlIGxvYWRlZCBldmVudC5cbiAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICBzZWxmLl9zdGF0ZSA9ICdsb2FkZWQnO1xuICAgICAgc2VsZi5fZW1pdCgnbG9hZCcpO1xuICAgICAgc2VsZi5fbG9hZFF1ZXVlKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXR1cCB0aGUgYXVkaW8gY29udGV4dCB3aGVuIGF2YWlsYWJsZSwgb3Igc3dpdGNoIHRvIEhUTUw1IEF1ZGlvIG1vZGUuXG4gICAqL1xuICB2YXIgc2V0dXBBdWRpb0NvbnRleHQgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBJZiB3ZSBoYXZlIGFscmVhZHkgZGV0ZWN0ZWQgdGhhdCBXZWIgQXVkaW8gaXNuJ3Qgc3VwcG9ydGVkLCBkb24ndCBydW4gdGhpcyBzdGVwIGFnYWluLlxuICAgIGlmICghSG93bGVyLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiB3ZSBhcmUgdXNpbmcgV2ViIEF1ZGlvIGFuZCBzZXR1cCB0aGUgQXVkaW9Db250ZXh0IGlmIHdlIGFyZS5cbiAgICB0cnkge1xuICAgICAgaWYgKHR5cGVvZiBBdWRpb0NvbnRleHQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIEhvd2xlci5jdHggPSBuZXcgQXVkaW9Db250ZXh0KCk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB3ZWJraXRBdWRpb0NvbnRleHQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIEhvd2xlci5jdHggPSBuZXcgd2Via2l0QXVkaW9Db250ZXh0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBIb3dsZXIudXNpbmdXZWJBdWRpbyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0gY2F0Y2goZSkge1xuICAgICAgSG93bGVyLnVzaW5nV2ViQXVkaW8gPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgYXVkaW8gY29udGV4dCBjcmVhdGlvbiBzdGlsbCBmYWlsZWQsIHNldCB1c2luZyB3ZWIgYXVkaW8gdG8gZmFsc2UuXG4gICAgaWYgKCFIb3dsZXIuY3R4KSB7XG4gICAgICBIb3dsZXIudXNpbmdXZWJBdWRpbyA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIGEgd2VidmlldyBpcyBiZWluZyB1c2VkIG9uIGlPUzggb3IgZWFybGllciAocmF0aGVyIHRoYW4gdGhlIGJyb3dzZXIpLlxuICAgIC8vIElmIGl0IGlzLCBkaXNhYmxlIFdlYiBBdWRpbyBhcyBpdCBjYXVzZXMgY3Jhc2hpbmcuXG4gICAgdmFyIGlPUyA9ICgvaVAoaG9uZXxvZHxhZCkvLnRlc3QoSG93bGVyLl9uYXZpZ2F0b3IgJiYgSG93bGVyLl9uYXZpZ2F0b3IucGxhdGZvcm0pKTtcbiAgICB2YXIgYXBwVmVyc2lvbiA9IEhvd2xlci5fbmF2aWdhdG9yICYmIEhvd2xlci5fbmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goL09TIChcXGQrKV8oXFxkKylfPyhcXGQrKT8vKTtcbiAgICB2YXIgdmVyc2lvbiA9IGFwcFZlcnNpb24gPyBwYXJzZUludChhcHBWZXJzaW9uWzFdLCAxMCkgOiBudWxsO1xuICAgIGlmIChpT1MgJiYgdmVyc2lvbiAmJiB2ZXJzaW9uIDwgOSkge1xuICAgICAgdmFyIHNhZmFyaSA9IC9zYWZhcmkvLnRlc3QoSG93bGVyLl9uYXZpZ2F0b3IgJiYgSG93bGVyLl9uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpO1xuICAgICAgaWYgKEhvd2xlci5fbmF2aWdhdG9yICYmICFzYWZhcmkpIHtcbiAgICAgICAgSG93bGVyLnVzaW5nV2ViQXVkaW8gPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgYW5kIGV4cG9zZSB0aGUgbWFzdGVyIEdhaW5Ob2RlIHdoZW4gdXNpbmcgV2ViIEF1ZGlvICh1c2VmdWwgZm9yIHBsdWdpbnMgb3IgYWR2YW5jZWQgdXNhZ2UpLlxuICAgIGlmIChIb3dsZXIudXNpbmdXZWJBdWRpbykge1xuICAgICAgSG93bGVyLm1hc3RlckdhaW4gPSAodHlwZW9mIEhvd2xlci5jdHguY3JlYXRlR2FpbiA9PT0gJ3VuZGVmaW5lZCcpID8gSG93bGVyLmN0eC5jcmVhdGVHYWluTm9kZSgpIDogSG93bGVyLmN0eC5jcmVhdGVHYWluKCk7XG4gICAgICBIb3dsZXIubWFzdGVyR2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKEhvd2xlci5fbXV0ZWQgPyAwIDogSG93bGVyLl92b2x1bWUsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgSG93bGVyLm1hc3RlckdhaW4uY29ubmVjdChIb3dsZXIuY3R4LmRlc3RpbmF0aW9uKTtcbiAgICB9XG5cbiAgICAvLyBSZS1ydW4gdGhlIHNldHVwIG9uIEhvd2xlci5cbiAgICBIb3dsZXIuX3NldHVwKCk7XG4gIH07XG5cbiAgLy8gQWRkIHN1cHBvcnQgZm9yIEFNRCAoQXN5bmNocm9ub3VzIE1vZHVsZSBEZWZpbml0aW9uKSBsaWJyYXJpZXMgc3VjaCBhcyByZXF1aXJlLmpzLlxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKFtdLCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIEhvd2xlcjogSG93bGVyLFxuICAgICAgICBIb3dsOiBIb3dsXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgLy8gQWRkIHN1cHBvcnQgZm9yIENvbW1vbkpTIGxpYnJhcmllcyBzdWNoIGFzIGJyb3dzZXJpZnkuXG4gIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBleHBvcnRzLkhvd2xlciA9IEhvd2xlcjtcbiAgICBleHBvcnRzLkhvd2wgPSBIb3dsO1xuICB9XG5cbiAgLy8gQWRkIHRvIGdsb2JhbCBpbiBOb2RlLmpzIChmb3IgdGVzdGluZywgZXRjKS5cbiAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgZ2xvYmFsLkhvd2xlckdsb2JhbCA9IEhvd2xlckdsb2JhbDtcbiAgICBnbG9iYWwuSG93bGVyID0gSG93bGVyO1xuICAgIGdsb2JhbC5Ib3dsID0gSG93bDtcbiAgICBnbG9iYWwuU291bmQgPSBTb3VuZDtcbiAgfSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgeyAgLy8gRGVmaW5lIGdsb2JhbGx5IGluIGNhc2UgQU1EIGlzIG5vdCBhdmFpbGFibGUgb3IgdW51c2VkLlxuICAgIHdpbmRvdy5Ib3dsZXJHbG9iYWwgPSBIb3dsZXJHbG9iYWw7XG4gICAgd2luZG93Lkhvd2xlciA9IEhvd2xlcjtcbiAgICB3aW5kb3cuSG93bCA9IEhvd2w7XG4gICAgd2luZG93LlNvdW5kID0gU291bmQ7XG4gIH1cbn0pKCk7XG5cblxuLyohXG4gKiAgU3BhdGlhbCBQbHVnaW4gLSBBZGRzIHN1cHBvcnQgZm9yIHN0ZXJlbyBhbmQgM0QgYXVkaW8gd2hlcmUgV2ViIEF1ZGlvIGlzIHN1cHBvcnRlZC5cbiAqICBcbiAqICBob3dsZXIuanMgdjIuMi40XG4gKiAgaG93bGVyanMuY29tXG4gKlxuICogIChjKSAyMDEzLTIwMjAsIEphbWVzIFNpbXBzb24gb2YgR29sZEZpcmUgU3R1ZGlvc1xuICogIGdvbGRmaXJlc3R1ZGlvcy5jb21cbiAqXG4gKiAgTUlUIExpY2Vuc2VcbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8vIFNldHVwIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZS5fcG9zID0gWzAsIDAsIDBdO1xuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlLl9vcmllbnRhdGlvbiA9IFswLCAwLCAtMSwgMCwgMSwgMF07XG5cbiAgLyoqIEdsb2JhbCBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBIZWxwZXIgbWV0aG9kIHRvIHVwZGF0ZSB0aGUgc3RlcmVvIHBhbm5pbmcgcG9zaXRpb24gb2YgYWxsIGN1cnJlbnQgSG93bHMuXG4gICAqIEZ1dHVyZSBIb3dscyB3aWxsIG5vdCB1c2UgdGhpcyB2YWx1ZSB1bmxlc3MgZXhwbGljaXRseSBzZXQuXG4gICAqIEBwYXJhbSAge051bWJlcn0gcGFuIEEgdmFsdWUgb2YgLTEuMCBpcyBhbGwgdGhlIHdheSBsZWZ0IGFuZCAxLjAgaXMgYWxsIHRoZSB3YXkgcmlnaHQuXG4gICAqIEByZXR1cm4ge0hvd2xlci9OdW1iZXJ9ICAgICBTZWxmIG9yIGN1cnJlbnQgc3RlcmVvIHBhbm5pbmcgdmFsdWUuXG4gICAqL1xuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlLnN0ZXJlbyA9IGZ1bmN0aW9uKHBhbikge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5jdHggfHwgIXNlbGYuY3R4Lmxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBMb29wIHRocm91Z2ggYWxsIEhvd2xzIGFuZCB1cGRhdGUgdGhlaXIgc3RlcmVvIHBhbm5pbmcuXG4gICAgZm9yICh2YXIgaT1zZWxmLl9ob3dscy5sZW5ndGgtMTsgaT49MDsgaS0tKSB7XG4gICAgICBzZWxmLl9ob3dsc1tpXS5zdGVyZW8ocGFuKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgcG9zaXRpb24gb2YgdGhlIGxpc3RlbmVyIGluIDNEIGNhcnRlc2lhbiBzcGFjZS4gU291bmRzIHVzaW5nXG4gICAqIDNEIHBvc2l0aW9uIHdpbGwgYmUgcmVsYXRpdmUgdG8gdGhlIGxpc3RlbmVyJ3MgcG9zaXRpb24uXG4gICAqIEBwYXJhbSAge051bWJlcn0geCBUaGUgeC1wb3NpdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geSBUaGUgeS1wb3NpdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geiBUaGUgei1wb3NpdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEByZXR1cm4ge0hvd2xlci9BcnJheX0gICBTZWxmIG9yIGN1cnJlbnQgbGlzdGVuZXIgcG9zaXRpb24uXG4gICAqL1xuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlLnBvcyA9IGZ1bmN0aW9uKHgsIHksIHopIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuY3R4IHx8ICFzZWxmLmN0eC5saXN0ZW5lcikge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBkZWZhdWx0cyBmb3Igb3B0aW9uYWwgJ3knICYgJ3onLlxuICAgIHkgPSAodHlwZW9mIHkgIT09ICdudW1iZXInKSA/IHNlbGYuX3Bvc1sxXSA6IHk7XG4gICAgeiA9ICh0eXBlb2YgeiAhPT0gJ251bWJlcicpID8gc2VsZi5fcG9zWzJdIDogejtcblxuICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgIHNlbGYuX3BvcyA9IFt4LCB5LCB6XTtcblxuICAgICAgaWYgKHR5cGVvZiBzZWxmLmN0eC5saXN0ZW5lci5wb3NpdGlvblggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnBvc2l0aW9uWC5zZXRUYXJnZXRBdFRpbWUoc2VsZi5fcG9zWzBdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci5wb3NpdGlvblkuc2V0VGFyZ2V0QXRUaW1lKHNlbGYuX3Bvc1sxXSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIucG9zaXRpb25aLnNldFRhcmdldEF0VGltZShzZWxmLl9wb3NbMl0sIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci5zZXRQb3NpdGlvbihzZWxmLl9wb3NbMF0sIHNlbGYuX3Bvc1sxXSwgc2VsZi5fcG9zWzJdKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHNlbGYuX3BvcztcbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgZGlyZWN0aW9uIHRoZSBsaXN0ZW5lciBpcyBwb2ludGluZyBpbiB0aGUgM0QgY2FydGVzaWFuIHNwYWNlLlxuICAgKiBBIGZyb250IGFuZCB1cCB2ZWN0b3IgbXVzdCBiZSBwcm92aWRlZC4gVGhlIGZyb250IGlzIHRoZSBkaXJlY3Rpb24gdGhlXG4gICAqIGZhY2Ugb2YgdGhlIGxpc3RlbmVyIGlzIHBvaW50aW5nLCBhbmQgdXAgaXMgdGhlIGRpcmVjdGlvbiB0aGUgdG9wIG9mIHRoZVxuICAgKiBsaXN0ZW5lciBpcyBwb2ludGluZy4gVGh1cywgdGhlc2UgdmFsdWVzIGFyZSBleHBlY3RlZCB0byBiZSBhdCByaWdodCBhbmdsZXNcbiAgICogZnJvbSBlYWNoIG90aGVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHggICBUaGUgeC1vcmllbnRhdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geSAgIFRoZSB5LW9yaWVudGF0aW9uIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB6ICAgVGhlIHotb3JpZW50YXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHhVcCBUaGUgeC1vcmllbnRhdGlvbiBvZiB0aGUgdG9wIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB5VXAgVGhlIHktb3JpZW50YXRpb24gb2YgdGhlIHRvcCBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0gelVwIFRoZSB6LW9yaWVudGF0aW9uIG9mIHRoZSB0b3Agb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcmV0dXJuIHtIb3dsZXIvQXJyYXl9ICAgICBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgb3JpZW50YXRpb24gdmVjdG9ycy5cbiAgICovXG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUub3JpZW50YXRpb24gPSBmdW5jdGlvbih4LCB5LCB6LCB4VXAsIHlVcCwgelVwKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLmN0eCB8fCAhc2VsZi5jdHgubGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIFNldCB0aGUgZGVmYXVsdHMgZm9yIG9wdGlvbmFsICd5JyAmICd6Jy5cbiAgICB2YXIgb3IgPSBzZWxmLl9vcmllbnRhdGlvbjtcbiAgICB5ID0gKHR5cGVvZiB5ICE9PSAnbnVtYmVyJykgPyBvclsxXSA6IHk7XG4gICAgeiA9ICh0eXBlb2YgeiAhPT0gJ251bWJlcicpID8gb3JbMl0gOiB6O1xuICAgIHhVcCA9ICh0eXBlb2YgeFVwICE9PSAnbnVtYmVyJykgPyBvclszXSA6IHhVcDtcbiAgICB5VXAgPSAodHlwZW9mIHlVcCAhPT0gJ251bWJlcicpID8gb3JbNF0gOiB5VXA7XG4gICAgelVwID0gKHR5cGVvZiB6VXAgIT09ICdudW1iZXInKSA/IG9yWzVdIDogelVwO1xuXG4gICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgc2VsZi5fb3JpZW50YXRpb24gPSBbeCwgeSwgeiwgeFVwLCB5VXAsIHpVcF07XG5cbiAgICAgIGlmICh0eXBlb2Ygc2VsZi5jdHgubGlzdGVuZXIuZm9yd2FyZFggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLmZvcndhcmRYLnNldFRhcmdldEF0VGltZSh4LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci5mb3J3YXJkWS5zZXRUYXJnZXRBdFRpbWUoeSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIuZm9yd2FyZFouc2V0VGFyZ2V0QXRUaW1lKHosIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnVwWC5zZXRUYXJnZXRBdFRpbWUoeFVwLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci51cFkuc2V0VGFyZ2V0QXRUaW1lKHlVcCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIudXBaLnNldFRhcmdldEF0VGltZSh6VXAsIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci5zZXRPcmllbnRhdGlvbih4LCB5LCB6LCB4VXAsIHlVcCwgelVwKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG9yO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKiBHcm91cCBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBBZGQgbmV3IHByb3BlcnRpZXMgdG8gdGhlIGNvcmUgaW5pdC5cbiAgICogQHBhcmFtICB7RnVuY3Rpb259IF9zdXBlciBDb3JlIGluaXQgbWV0aG9kLlxuICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgKi9cbiAgSG93bC5wcm90b3R5cGUuaW5pdCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obykge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBTZXR1cCB1c2VyLWRlZmluZWQgZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5fb3JpZW50YXRpb24gPSBvLm9yaWVudGF0aW9uIHx8IFsxLCAwLCAwXTtcbiAgICAgIHNlbGYuX3N0ZXJlbyA9IG8uc3RlcmVvIHx8IG51bGw7XG4gICAgICBzZWxmLl9wb3MgPSBvLnBvcyB8fCBudWxsO1xuICAgICAgc2VsZi5fcGFubmVyQXR0ciA9IHtcbiAgICAgICAgY29uZUlubmVyQW5nbGU6IHR5cGVvZiBvLmNvbmVJbm5lckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZUlubmVyQW5nbGUgOiAzNjAsXG4gICAgICAgIGNvbmVPdXRlckFuZ2xlOiB0eXBlb2Ygby5jb25lT3V0ZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVPdXRlckFuZ2xlIDogMzYwLFxuICAgICAgICBjb25lT3V0ZXJHYWluOiB0eXBlb2Ygby5jb25lT3V0ZXJHYWluICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZU91dGVyR2FpbiA6IDAsXG4gICAgICAgIGRpc3RhbmNlTW9kZWw6IHR5cGVvZiBvLmRpc3RhbmNlTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5kaXN0YW5jZU1vZGVsIDogJ2ludmVyc2UnLFxuICAgICAgICBtYXhEaXN0YW5jZTogdHlwZW9mIG8ubWF4RGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5tYXhEaXN0YW5jZSA6IDEwMDAwLFxuICAgICAgICBwYW5uaW5nTW9kZWw6IHR5cGVvZiBvLnBhbm5pbmdNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5pbmdNb2RlbCA6ICdIUlRGJyxcbiAgICAgICAgcmVmRGlzdGFuY2U6IHR5cGVvZiBvLnJlZkRpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ucmVmRGlzdGFuY2UgOiAxLFxuICAgICAgICByb2xsb2ZmRmFjdG9yOiB0eXBlb2Ygby5yb2xsb2ZmRmFjdG9yICE9PSAndW5kZWZpbmVkJyA/IG8ucm9sbG9mZkZhY3RvciA6IDFcbiAgICAgIH07XG5cbiAgICAgIC8vIFNldHVwIGV2ZW50IGxpc3RlbmVycy5cbiAgICAgIHNlbGYuX29uc3RlcmVvID0gby5vbnN0ZXJlbyA/IFt7Zm46IG8ub25zdGVyZW99XSA6IFtdO1xuICAgICAgc2VsZi5fb25wb3MgPSBvLm9ucG9zID8gW3tmbjogby5vbnBvc31dIDogW107XG4gICAgICBzZWxmLl9vbm9yaWVudGF0aW9uID0gby5vbm9yaWVudGF0aW9uID8gW3tmbjogby5vbm9yaWVudGF0aW9ufV0gOiBbXTtcblxuICAgICAgLy8gQ29tcGxldGUgaW5pdGlsaXphdGlvbiB3aXRoIGhvd2xlci5qcyBjb3JlJ3MgaW5pdCBmdW5jdGlvbi5cbiAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBvKTtcbiAgICB9O1xuICB9KShIb3dsLnByb3RvdHlwZS5pbml0KTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgc3RlcmVvIHBhbm5pbmcgb2YgdGhlIGF1ZGlvIHNvdXJjZSBmb3IgdGhpcyBzb3VuZCBvciBhbGwgaW4gdGhlIGdyb3VwLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHBhbiAgQSB2YWx1ZSBvZiAtMS4wIGlzIGFsbCB0aGUgd2F5IGxlZnQgYW5kIDEuMCBpcyBhbGwgdGhlIHdheSByaWdodC5cbiAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAob3B0aW9uYWwpIFRoZSBzb3VuZCBJRC4gSWYgbm9uZSBpcyBwYXNzZWQsIGFsbCBpbiBncm91cCB3aWxsIGJlIHVwZGF0ZWQuXG4gICAqIEByZXR1cm4ge0hvd2wvTnVtYmVyfSAgICBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgc3RlcmVvIHBhbm5pbmcgdmFsdWUuXG4gICAqL1xuICBIb3dsLnByb3RvdHlwZS5zdGVyZW8gPSBmdW5jdGlvbihwYW4sIGlkKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBjaGFuZ2Ugc3RlcmVvIHBhbiB3aGVuIGNhcGFibGUuXG4gICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgIGV2ZW50OiAnc3RlcmVvJyxcbiAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLnN0ZXJlbyhwYW4sIGlkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBQYW5uZXJTdGVyZW9Ob2RlIHN1cHBvcnQgYW5kIGZhbGxiYWNrIHRvIFBhbm5lck5vZGUgaWYgaXQgZG9lc24ndCBleGlzdC5cbiAgICB2YXIgcGFubmVyVHlwZSA9ICh0eXBlb2YgSG93bGVyLmN0eC5jcmVhdGVTdGVyZW9QYW5uZXIgPT09ICd1bmRlZmluZWQnKSA/ICdzcGF0aWFsJyA6ICdzdGVyZW8nO1xuXG4gICAgLy8gU2V0dXAgdGhlIGdyb3VwJ3Mgc3RlcmVvIHBhbm5pbmcgaWYgbm8gSUQgaXMgcGFzc2VkLlxuICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBSZXR1cm4gdGhlIGdyb3VwJ3Mgc3RlcmVvIHBhbm5pbmcgaWYgbm8gcGFyYW1ldGVycyBhcmUgcGFzc2VkLlxuICAgICAgaWYgKHR5cGVvZiBwYW4gPT09ICdudW1iZXInKSB7XG4gICAgICAgIHNlbGYuX3N0ZXJlbyA9IHBhbjtcbiAgICAgICAgc2VsZi5fcG9zID0gW3BhbiwgMCwgMF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc2VsZi5fc3RlcmVvO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoYW5nZSB0aGUgc3RyZW8gcGFubmluZyBvZiBvbmUgb3IgYWxsIHNvdW5kcyBpbiBncm91cC5cbiAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcGFuID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIHNvdW5kLl9zdGVyZW8gPSBwYW47XG4gICAgICAgICAgc291bmQuX3BvcyA9IFtwYW4sIDAsIDBdO1xuXG4gICAgICAgICAgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBhcmUgZmFsbGluZyBiYWNrLCBtYWtlIHN1cmUgdGhlIHBhbm5pbmdNb2RlbCBpcyBlcXVhbHBvd2VyLlxuICAgICAgICAgICAgc291bmQuX3Bhbm5lckF0dHIucGFubmluZ01vZGVsID0gJ2VxdWFscG93ZXInO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhIHBhbm5lciBzZXR1cCBhbmQgY3JlYXRlIGEgbmV3IG9uZSBpZiBub3QuXG4gICAgICAgICAgICBpZiAoIXNvdW5kLl9wYW5uZXIgfHwgIXNvdW5kLl9wYW5uZXIucGFuKSB7XG4gICAgICAgICAgICAgIHNldHVwUGFubmVyKHNvdW5kLCBwYW5uZXJUeXBlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHBhbm5lclR5cGUgPT09ICdzcGF0aWFsJykge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIHNvdW5kLl9wYW5uZXIucG9zaXRpb25YICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25YLnNldFZhbHVlQXRUaW1lKHBhbiwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblkuc2V0VmFsdWVBdFRpbWUoMCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblouc2V0VmFsdWVBdFRpbWUoMCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5zZXRQb3NpdGlvbihwYW4sIDAsIDApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnBhbi5zZXRWYWx1ZUF0VGltZShwYW4sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuX2VtaXQoJ3N0ZXJlbycsIHNvdW5kLl9pZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHNvdW5kLl9zdGVyZW87XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgM0Qgc3BhdGlhbCBwb3NpdGlvbiBvZiB0aGUgYXVkaW8gc291cmNlIGZvciB0aGlzIHNvdW5kIG9yIGdyb3VwIHJlbGF0aXZlIHRvIHRoZSBnbG9iYWwgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geCAgVGhlIHgtcG9zaXRpb24gb2YgdGhlIGF1ZGlvIHNvdXJjZS5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB5ICBUaGUgeS1wb3NpdGlvbiBvZiB0aGUgYXVkaW8gc291cmNlLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHogIFRoZSB6LXBvc2l0aW9uIG9mIHRoZSBhdWRpbyBzb3VyY2UuXG4gICAqIEBwYXJhbSAge051bWJlcn0gaWQgKG9wdGlvbmFsKSBUaGUgc291bmQgSUQuIElmIG5vbmUgaXMgcGFzc2VkLCBhbGwgaW4gZ3JvdXAgd2lsbCBiZSB1cGRhdGVkLlxuICAgKiBAcmV0dXJuIHtIb3dsL0FycmF5fSAgICBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgM0Qgc3BhdGlhbCBwb3NpdGlvbjogW3gsIHksIHpdLlxuICAgKi9cbiAgSG93bC5wcm90b3R5cGUucG9zID0gZnVuY3Rpb24oeCwgeSwgeiwgaWQpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGNoYW5nZSBwb3NpdGlvbiB3aGVuIGNhcGFibGUuXG4gICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgIGV2ZW50OiAncG9zJyxcbiAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLnBvcyh4LCB5LCB6LCBpZCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIGRlZmF1bHRzIGZvciBvcHRpb25hbCAneScgJiAneicuXG4gICAgeSA9ICh0eXBlb2YgeSAhPT0gJ251bWJlcicpID8gMCA6IHk7XG4gICAgeiA9ICh0eXBlb2YgeiAhPT0gJ251bWJlcicpID8gLTAuNSA6IHo7XG5cbiAgICAvLyBTZXR1cCB0aGUgZ3JvdXAncyBzcGF0aWFsIHBvc2l0aW9uIGlmIG5vIElEIGlzIHBhc3NlZC5cbiAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gUmV0dXJuIHRoZSBncm91cCdzIHNwYXRpYWwgcG9zaXRpb24gaWYgbm8gcGFyYW1ldGVycyBhcmUgcGFzc2VkLlxuICAgICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgICBzZWxmLl9wb3MgPSBbeCwgeSwgel07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc2VsZi5fcG9zO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoYW5nZSB0aGUgc3BhdGlhbCBwb3NpdGlvbiBvZiBvbmUgb3IgYWxsIHNvdW5kcyBpbiBncm91cC5cbiAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICBzb3VuZC5fcG9zID0gW3gsIHksIHpdO1xuXG4gICAgICAgICAgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhIHBhbm5lciBzZXR1cCBhbmQgY3JlYXRlIGEgbmV3IG9uZSBpZiBub3QuXG4gICAgICAgICAgICBpZiAoIXNvdW5kLl9wYW5uZXIgfHwgc291bmQuX3Bhbm5lci5wYW4pIHtcbiAgICAgICAgICAgICAgc2V0dXBQYW5uZXIoc291bmQsICdzcGF0aWFsJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc291bmQuX3Bhbm5lci5wb3NpdGlvblggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25YLnNldFZhbHVlQXRUaW1lKHgsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWS5zZXRWYWx1ZUF0VGltZSh5LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblouc2V0VmFsdWVBdFRpbWUoeiwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnNldFBvc2l0aW9uKHgsIHksIHopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuX2VtaXQoJ3BvcycsIHNvdW5kLl9pZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHNvdW5kLl9wb3M7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgZGlyZWN0aW9uIHRoZSBhdWRpbyBzb3VyY2UgaXMgcG9pbnRpbmcgaW4gdGhlIDNEIGNhcnRlc2lhbiBjb29yZGluYXRlXG4gICAqIHNwYWNlLiBEZXBlbmRpbmcgb24gaG93IGRpcmVjdGlvbiB0aGUgc291bmQgaXMsIGJhc2VkIG9uIHRoZSBgY29uZWAgYXR0cmlidXRlcyxcbiAgICogYSBzb3VuZCBwb2ludGluZyBhd2F5IGZyb20gdGhlIGxpc3RlbmVyIGNhbiBiZSBxdWlldCBvciBzaWxlbnQuXG4gICAqIEBwYXJhbSAge051bWJlcn0geCAgVGhlIHgtb3JpZW50YXRpb24gb2YgdGhlIHNvdXJjZS5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB5ICBUaGUgeS1vcmllbnRhdGlvbiBvZiB0aGUgc291cmNlLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHogIFRoZSB6LW9yaWVudGF0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAqIEBwYXJhbSAge051bWJlcn0gaWQgKG9wdGlvbmFsKSBUaGUgc291bmQgSUQuIElmIG5vbmUgaXMgcGFzc2VkLCBhbGwgaW4gZ3JvdXAgd2lsbCBiZSB1cGRhdGVkLlxuICAgKiBAcmV0dXJuIHtIb3dsL0FycmF5fSAgICBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgM0Qgc3BhdGlhbCBvcmllbnRhdGlvbjogW3gsIHksIHpdLlxuICAgKi9cbiAgSG93bC5wcm90b3R5cGUub3JpZW50YXRpb24gPSBmdW5jdGlvbih4LCB5LCB6LCBpZCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gY2hhbmdlIG9yaWVudGF0aW9uIHdoZW4gY2FwYWJsZS5cbiAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgZXZlbnQ6ICdvcmllbnRhdGlvbicsXG4gICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5vcmllbnRhdGlvbih4LCB5LCB6LCBpZCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIGRlZmF1bHRzIGZvciBvcHRpb25hbCAneScgJiAneicuXG4gICAgeSA9ICh0eXBlb2YgeSAhPT0gJ251bWJlcicpID8gc2VsZi5fb3JpZW50YXRpb25bMV0gOiB5O1xuICAgIHogPSAodHlwZW9mIHogIT09ICdudW1iZXInKSA/IHNlbGYuX29yaWVudGF0aW9uWzJdIDogejtcblxuICAgIC8vIFNldHVwIHRoZSBncm91cCdzIHNwYXRpYWwgb3JpZW50YXRpb24gaWYgbm8gSUQgaXMgcGFzc2VkLlxuICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBSZXR1cm4gdGhlIGdyb3VwJ3Mgc3BhdGlhbCBvcmllbnRhdGlvbiBpZiBubyBwYXJhbWV0ZXJzIGFyZSBwYXNzZWQuXG4gICAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICAgIHNlbGYuX29yaWVudGF0aW9uID0gW3gsIHksIHpdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuX29yaWVudGF0aW9uO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoYW5nZSB0aGUgc3BhdGlhbCBvcmllbnRhdGlvbiBvZiBvbmUgb3IgYWxsIHNvdW5kcyBpbiBncm91cC5cbiAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICBzb3VuZC5fb3JpZW50YXRpb24gPSBbeCwgeSwgel07XG5cbiAgICAgICAgICBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGEgcGFubmVyIHNldHVwIGFuZCBjcmVhdGUgYSBuZXcgb25lIGlmIG5vdC5cbiAgICAgICAgICAgIGlmICghc291bmQuX3Bhbm5lcikge1xuICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgd2UgaGF2ZSBhIHBvc2l0aW9uIHRvIHNldHVwIHRoZSBub2RlIHdpdGguXG4gICAgICAgICAgICAgIGlmICghc291bmQuX3Bvcykge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9wb3MgPSBzZWxmLl9wb3MgfHwgWzAsIDAsIC0wLjVdO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgc2V0dXBQYW5uZXIoc291bmQsICdzcGF0aWFsJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25YLnNldFZhbHVlQXRUaW1lKHgsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWS5zZXRWYWx1ZUF0VGltZSh5LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblouc2V0VmFsdWVBdFRpbWUoeiwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnNldE9yaWVudGF0aW9uKHgsIHksIHopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuX2VtaXQoJ29yaWVudGF0aW9uJywgc291bmQuX2lkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gc291bmQuX29yaWVudGF0aW9uO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIHBhbm5lciBub2RlJ3MgYXR0cmlidXRlcyBmb3IgYSBzb3VuZCBvciBncm91cCBvZiBzb3VuZHMuXG4gICAqIFRoaXMgbWV0aG9kIGNhbiBvcHRpb25hbGwgdGFrZSAwLCAxIG9yIDIgYXJndW1lbnRzLlxuICAgKiAgIHBhbm5lckF0dHIoKSAtPiBSZXR1cm5zIHRoZSBncm91cCdzIHZhbHVlcy5cbiAgICogICBwYW5uZXJBdHRyKGlkKSAtPiBSZXR1cm5zIHRoZSBzb3VuZCBpZCdzIHZhbHVlcy5cbiAgICogICBwYW5uZXJBdHRyKG8pIC0+IFNldCdzIHRoZSB2YWx1ZXMgb2YgYWxsIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAqICAgcGFubmVyQXR0cihvLCBpZCkgLT4gU2V0J3MgdGhlIHZhbHVlcyBvZiBwYXNzZWQgc291bmQgaWQuXG4gICAqXG4gICAqICAgQXR0cmlidXRlczpcbiAgICogICAgIGNvbmVJbm5lckFuZ2xlIC0gKDM2MCBieSBkZWZhdWx0KSBBIHBhcmFtZXRlciBmb3IgZGlyZWN0aW9uYWwgYXVkaW8gc291cmNlcywgdGhpcyBpcyBhbiBhbmdsZSwgaW4gZGVncmVlcyxcbiAgICogICAgICAgICAgICAgICAgICAgICAgaW5zaWRlIG9mIHdoaWNoIHRoZXJlIHdpbGwgYmUgbm8gdm9sdW1lIHJlZHVjdGlvbi5cbiAgICogICAgIGNvbmVPdXRlckFuZ2xlIC0gKDM2MCBieSBkZWZhdWx0KSBBIHBhcmFtZXRlciBmb3IgZGlyZWN0aW9uYWwgYXVkaW8gc291cmNlcywgdGhpcyBpcyBhbiBhbmdsZSwgaW4gZGVncmVlcyxcbiAgICogICAgICAgICAgICAgICAgICAgICAgb3V0c2lkZSBvZiB3aGljaCB0aGUgdm9sdW1lIHdpbGwgYmUgcmVkdWNlZCB0byBhIGNvbnN0YW50IHZhbHVlIG9mIGBjb25lT3V0ZXJHYWluYC5cbiAgICogICAgIGNvbmVPdXRlckdhaW4gLSAoMCBieSBkZWZhdWx0KSBBIHBhcmFtZXRlciBmb3IgZGlyZWN0aW9uYWwgYXVkaW8gc291cmNlcywgdGhpcyBpcyB0aGUgZ2FpbiBvdXRzaWRlIG9mIHRoZVxuICAgKiAgICAgICAgICAgICAgICAgICAgIGBjb25lT3V0ZXJBbmdsZWAuIEl0IGlzIGEgbGluZWFyIHZhbHVlIGluIHRoZSByYW5nZSBgWzAsIDFdYC5cbiAgICogICAgIGRpc3RhbmNlTW9kZWwgLSAoJ2ludmVyc2UnIGJ5IGRlZmF1bHQpIERldGVybWluZXMgYWxnb3JpdGhtIHVzZWQgdG8gcmVkdWNlIHZvbHVtZSBhcyBhdWRpbyBtb3ZlcyBhd2F5IGZyb21cbiAgICogICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lci4gQ2FuIGJlIGBsaW5lYXJgLCBgaW52ZXJzZWAgb3IgYGV4cG9uZW50aWFsLlxuICAgKiAgICAgbWF4RGlzdGFuY2UgLSAoMTAwMDAgYnkgZGVmYXVsdCkgVGhlIG1heGltdW0gZGlzdGFuY2UgYmV0d2VlbiBzb3VyY2UgYW5kIGxpc3RlbmVyLCBhZnRlciB3aGljaCB0aGUgdm9sdW1lXG4gICAqICAgICAgICAgICAgICAgICAgIHdpbGwgbm90IGJlIHJlZHVjZWQgYW55IGZ1cnRoZXIuXG4gICAqICAgICByZWZEaXN0YW5jZSAtICgxIGJ5IGRlZmF1bHQpIEEgcmVmZXJlbmNlIGRpc3RhbmNlIGZvciByZWR1Y2luZyB2b2x1bWUgYXMgc291cmNlIG1vdmVzIGZ1cnRoZXIgZnJvbSB0aGUgbGlzdGVuZXIuXG4gICAqICAgICAgICAgICAgICAgICAgIFRoaXMgaXMgc2ltcGx5IGEgdmFyaWFibGUgb2YgdGhlIGRpc3RhbmNlIG1vZGVsIGFuZCBoYXMgYSBkaWZmZXJlbnQgZWZmZWN0IGRlcGVuZGluZyBvbiB3aGljaCBtb2RlbFxuICAgKiAgICAgICAgICAgICAgICAgICBpcyB1c2VkIGFuZCB0aGUgc2NhbGUgb2YgeW91ciBjb29yZGluYXRlcy4gR2VuZXJhbGx5LCB2b2x1bWUgd2lsbCBiZSBlcXVhbCB0byAxIGF0IHRoaXMgZGlzdGFuY2UuXG4gICAqICAgICByb2xsb2ZmRmFjdG9yIC0gKDEgYnkgZGVmYXVsdCkgSG93IHF1aWNrbHkgdGhlIHZvbHVtZSByZWR1Y2VzIGFzIHNvdXJjZSBtb3ZlcyBmcm9tIGxpc3RlbmVyLiBUaGlzIGlzIHNpbXBseSBhXG4gICAqICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGUgb2YgdGhlIGRpc3RhbmNlIG1vZGVsIGFuZCBjYW4gYmUgaW4gdGhlIHJhbmdlIG9mIGBbMCwgMV1gIHdpdGggYGxpbmVhcmAgYW5kIGBbMCwgXHUyMjFFXWBcbiAgICogICAgICAgICAgICAgICAgICAgICB3aXRoIGBpbnZlcnNlYCBhbmQgYGV4cG9uZW50aWFsYC5cbiAgICogICAgIHBhbm5pbmdNb2RlbCAtICgnSFJURicgYnkgZGVmYXVsdCkgRGV0ZXJtaW5lcyB3aGljaCBzcGF0aWFsaXphdGlvbiBhbGdvcml0aG0gaXMgdXNlZCB0byBwb3NpdGlvbiBhdWRpby5cbiAgICogICAgICAgICAgICAgICAgICAgICBDYW4gYmUgYEhSVEZgIG9yIGBlcXVhbHBvd2VyYC5cbiAgICpcbiAgICogQHJldHVybiB7SG93bC9PYmplY3R9IFJldHVybnMgc2VsZiBvciBjdXJyZW50IHBhbm5lciBhdHRyaWJ1dGVzLlxuICAgKi9cbiAgSG93bC5wcm90b3R5cGUucGFubmVyQXR0ciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICB2YXIgbywgaWQsIHNvdW5kO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gRGV0ZXJtaW5lIHRoZSB2YWx1ZXMgYmFzZWQgb24gYXJndW1lbnRzLlxuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gUmV0dXJuIHRoZSBncm91cCdzIHBhbm5lciBhdHRyaWJ1dGUgdmFsdWVzLlxuICAgICAgcmV0dXJuIHNlbGYuX3Bhbm5lckF0dHI7XG4gICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgaWYgKHR5cGVvZiBhcmdzWzBdID09PSAnb2JqZWN0Jykge1xuICAgICAgICBvID0gYXJnc1swXTtcblxuICAgICAgICAvLyBTZXQgdGhlIGdyb3UncyBwYW5uZXIgYXR0cmlidXRlIHZhbHVlcy5cbiAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBpZiAoIW8ucGFubmVyQXR0cikge1xuICAgICAgICAgICAgby5wYW5uZXJBdHRyID0ge1xuICAgICAgICAgICAgICBjb25lSW5uZXJBbmdsZTogby5jb25lSW5uZXJBbmdsZSxcbiAgICAgICAgICAgICAgY29uZU91dGVyQW5nbGU6IG8uY29uZU91dGVyQW5nbGUsXG4gICAgICAgICAgICAgIGNvbmVPdXRlckdhaW46IG8uY29uZU91dGVyR2FpbixcbiAgICAgICAgICAgICAgZGlzdGFuY2VNb2RlbDogby5kaXN0YW5jZU1vZGVsLFxuICAgICAgICAgICAgICBtYXhEaXN0YW5jZTogby5tYXhEaXN0YW5jZSxcbiAgICAgICAgICAgICAgcmVmRGlzdGFuY2U6IG8ucmVmRGlzdGFuY2UsXG4gICAgICAgICAgICAgIHJvbGxvZmZGYWN0b3I6IG8ucm9sbG9mZkZhY3RvcixcbiAgICAgICAgICAgICAgcGFubmluZ01vZGVsOiBvLnBhbm5pbmdNb2RlbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLl9wYW5uZXJBdHRyID0ge1xuICAgICAgICAgICAgY29uZUlubmVyQW5nbGU6IHR5cGVvZiBvLnBhbm5lckF0dHIuY29uZUlubmVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5wYW5uZXJBdHRyLmNvbmVJbm5lckFuZ2xlIDogc2VsZi5fY29uZUlubmVyQW5nbGUsXG4gICAgICAgICAgICBjb25lT3V0ZXJBbmdsZTogdHlwZW9mIG8ucGFubmVyQXR0ci5jb25lT3V0ZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIuY29uZU91dGVyQW5nbGUgOiBzZWxmLl9jb25lT3V0ZXJBbmdsZSxcbiAgICAgICAgICAgIGNvbmVPdXRlckdhaW46IHR5cGVvZiBvLnBhbm5lckF0dHIuY29uZU91dGVyR2FpbiAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIuY29uZU91dGVyR2FpbiA6IHNlbGYuX2NvbmVPdXRlckdhaW4sXG4gICAgICAgICAgICBkaXN0YW5jZU1vZGVsOiB0eXBlb2Ygby5wYW5uZXJBdHRyLmRpc3RhbmNlTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5wYW5uZXJBdHRyLmRpc3RhbmNlTW9kZWwgOiBzZWxmLl9kaXN0YW5jZU1vZGVsLFxuICAgICAgICAgICAgbWF4RGlzdGFuY2U6IHR5cGVvZiBvLnBhbm5lckF0dHIubWF4RGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5wYW5uZXJBdHRyLm1heERpc3RhbmNlIDogc2VsZi5fbWF4RGlzdGFuY2UsXG4gICAgICAgICAgICByZWZEaXN0YW5jZTogdHlwZW9mIG8ucGFubmVyQXR0ci5yZWZEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIucmVmRGlzdGFuY2UgOiBzZWxmLl9yZWZEaXN0YW5jZSxcbiAgICAgICAgICAgIHJvbGxvZmZGYWN0b3I6IHR5cGVvZiBvLnBhbm5lckF0dHIucm9sbG9mZkZhY3RvciAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIucm9sbG9mZkZhY3RvciA6IHNlbGYuX3JvbGxvZmZGYWN0b3IsXG4gICAgICAgICAgICBwYW5uaW5nTW9kZWw6IHR5cGVvZiBvLnBhbm5lckF0dHIucGFubmluZ01vZGVsICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5wYW5uaW5nTW9kZWwgOiBzZWxmLl9wYW5uaW5nTW9kZWxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBSZXR1cm4gdGhpcyBzb3VuZCdzIHBhbm5lciBhdHRyaWJ1dGUgdmFsdWVzLlxuICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChwYXJzZUludChhcmdzWzBdLCAxMCkpO1xuICAgICAgICByZXR1cm4gc291bmQgPyBzb3VuZC5fcGFubmVyQXR0ciA6IHNlbGYuX3Bhbm5lckF0dHI7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuICAgICAgbyA9IGFyZ3NbMF07XG4gICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgdGhlIHZhbHVlcyBvZiB0aGUgc3BlY2lmaWVkIHNvdW5kcy5cbiAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAvLyBNZXJnZSB0aGUgbmV3IHZhbHVlcyBpbnRvIHRoZSBzb3VuZC5cbiAgICAgICAgdmFyIHBhID0gc291bmQuX3Bhbm5lckF0dHI7XG4gICAgICAgIHBhID0ge1xuICAgICAgICAgIGNvbmVJbm5lckFuZ2xlOiB0eXBlb2Ygby5jb25lSW5uZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVJbm5lckFuZ2xlIDogcGEuY29uZUlubmVyQW5nbGUsXG4gICAgICAgICAgY29uZU91dGVyQW5nbGU6IHR5cGVvZiBvLmNvbmVPdXRlckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZU91dGVyQW5nbGUgOiBwYS5jb25lT3V0ZXJBbmdsZSxcbiAgICAgICAgICBjb25lT3V0ZXJHYWluOiB0eXBlb2Ygby5jb25lT3V0ZXJHYWluICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZU91dGVyR2FpbiA6IHBhLmNvbmVPdXRlckdhaW4sXG4gICAgICAgICAgZGlzdGFuY2VNb2RlbDogdHlwZW9mIG8uZGlzdGFuY2VNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLmRpc3RhbmNlTW9kZWwgOiBwYS5kaXN0YW5jZU1vZGVsLFxuICAgICAgICAgIG1heERpc3RhbmNlOiB0eXBlb2Ygby5tYXhEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLm1heERpc3RhbmNlIDogcGEubWF4RGlzdGFuY2UsXG4gICAgICAgICAgcmVmRGlzdGFuY2U6IHR5cGVvZiBvLnJlZkRpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ucmVmRGlzdGFuY2UgOiBwYS5yZWZEaXN0YW5jZSxcbiAgICAgICAgICByb2xsb2ZmRmFjdG9yOiB0eXBlb2Ygby5yb2xsb2ZmRmFjdG9yICE9PSAndW5kZWZpbmVkJyA/IG8ucm9sbG9mZkZhY3RvciA6IHBhLnJvbGxvZmZGYWN0b3IsXG4gICAgICAgICAgcGFubmluZ01vZGVsOiB0eXBlb2Ygby5wYW5uaW5nTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5wYW5uaW5nTW9kZWwgOiBwYS5wYW5uaW5nTW9kZWxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBDcmVhdGUgYSBuZXcgcGFubmVyIG5vZGUgaWYgb25lIGRvZXNuJ3QgYWxyZWFkeSBleGlzdC5cbiAgICAgICAgdmFyIHBhbm5lciA9IHNvdW5kLl9wYW5uZXI7XG4gICAgICAgIGlmICghcGFubmVyKSB7XG4gICAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYSBwb3NpdGlvbiB0byBzZXR1cCB0aGUgbm9kZSB3aXRoLlxuICAgICAgICAgIGlmICghc291bmQuX3Bvcykge1xuICAgICAgICAgICAgc291bmQuX3BvcyA9IHNlbGYuX3BvcyB8fCBbMCwgMCwgLTAuNV07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IHBhbm5lciBub2RlLlxuICAgICAgICAgIHNldHVwUGFubmVyKHNvdW5kLCAnc3BhdGlhbCcpO1xuICAgICAgICAgIHBhbm5lciA9IHNvdW5kLl9wYW5uZXJcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgcGFubmVyIHZhbHVlcyBvciBjcmVhdGUgYSBuZXcgcGFubmVyIGlmIG5vbmUgZXhpc3RzLlxuICAgICAgICBwYW5uZXIuY29uZUlubmVyQW5nbGUgPSBwYS5jb25lSW5uZXJBbmdsZTtcbiAgICAgICAgcGFubmVyLmNvbmVPdXRlckFuZ2xlID0gcGEuY29uZU91dGVyQW5nbGU7XG4gICAgICAgIHBhbm5lci5jb25lT3V0ZXJHYWluID0gcGEuY29uZU91dGVyR2FpbjtcbiAgICAgICAgcGFubmVyLmRpc3RhbmNlTW9kZWwgPSBwYS5kaXN0YW5jZU1vZGVsO1xuICAgICAgICBwYW5uZXIubWF4RGlzdGFuY2UgPSBwYS5tYXhEaXN0YW5jZTtcbiAgICAgICAgcGFubmVyLnJlZkRpc3RhbmNlID0gcGEucmVmRGlzdGFuY2U7XG4gICAgICAgIHBhbm5lci5yb2xsb2ZmRmFjdG9yID0gcGEucm9sbG9mZkZhY3RvcjtcbiAgICAgICAgcGFubmVyLnBhbm5pbmdNb2RlbCA9IHBhLnBhbm5pbmdNb2RlbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKiogU2luZ2xlIFNvdW5kIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIEFkZCBuZXcgcHJvcGVydGllcyB0byB0aGUgY29yZSBTb3VuZCBpbml0LlxuICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gX3N1cGVyIENvcmUgU291bmQgaW5pdCBtZXRob2QuXG4gICAqIEByZXR1cm4ge1NvdW5kfVxuICAgKi9cbiAgU291bmQucHJvdG90eXBlLmluaXQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcblxuICAgICAgLy8gU2V0dXAgdXNlci1kZWZpbmVkIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgICAgIHNlbGYuX29yaWVudGF0aW9uID0gcGFyZW50Ll9vcmllbnRhdGlvbjtcbiAgICAgIHNlbGYuX3N0ZXJlbyA9IHBhcmVudC5fc3RlcmVvO1xuICAgICAgc2VsZi5fcG9zID0gcGFyZW50Ll9wb3M7XG4gICAgICBzZWxmLl9wYW5uZXJBdHRyID0gcGFyZW50Ll9wYW5uZXJBdHRyO1xuXG4gICAgICAvLyBDb21wbGV0ZSBpbml0aWxpemF0aW9uIHdpdGggaG93bGVyLmpzIGNvcmUgU291bmQncyBpbml0IGZ1bmN0aW9uLlxuICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cbiAgICAgIC8vIElmIGEgc3RlcmVvIG9yIHBvc2l0aW9uIHdhcyBzcGVjaWZpZWQsIHNldCBpdCB1cC5cbiAgICAgIGlmIChzZWxmLl9zdGVyZW8pIHtcbiAgICAgICAgcGFyZW50LnN0ZXJlbyhzZWxmLl9zdGVyZW8pO1xuICAgICAgfSBlbHNlIGlmIChzZWxmLl9wb3MpIHtcbiAgICAgICAgcGFyZW50LnBvcyhzZWxmLl9wb3NbMF0sIHNlbGYuX3Bvc1sxXSwgc2VsZi5fcG9zWzJdLCBzZWxmLl9pZCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSkoU291bmQucHJvdG90eXBlLmluaXQpO1xuXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgU291bmQucmVzZXQgbWV0aG9kIHRvIGNsZWFuIHVwIHByb3BlcnRpZXMgZnJvbSB0aGUgc3BhdGlhbCBwbHVnaW4uXG4gICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBfc3VwZXIgU291bmQgcmVzZXQgbWV0aG9kLlxuICAgKiBAcmV0dXJuIHtTb3VuZH1cbiAgICovXG4gIFNvdW5kLnByb3RvdHlwZS5yZXNldCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBSZXNldCBhbGwgc3BhdGlhbCBwbHVnaW4gcHJvcGVydGllcyBvbiB0aGlzIHNvdW5kLlxuICAgICAgc2VsZi5fb3JpZW50YXRpb24gPSBwYXJlbnQuX29yaWVudGF0aW9uO1xuICAgICAgc2VsZi5fc3RlcmVvID0gcGFyZW50Ll9zdGVyZW87XG4gICAgICBzZWxmLl9wb3MgPSBwYXJlbnQuX3BvcztcbiAgICAgIHNlbGYuX3Bhbm5lckF0dHIgPSBwYXJlbnQuX3Bhbm5lckF0dHI7XG5cbiAgICAgIC8vIElmIGEgc3RlcmVvIG9yIHBvc2l0aW9uIHdhcyBzcGVjaWZpZWQsIHNldCBpdCB1cC5cbiAgICAgIGlmIChzZWxmLl9zdGVyZW8pIHtcbiAgICAgICAgcGFyZW50LnN0ZXJlbyhzZWxmLl9zdGVyZW8pO1xuICAgICAgfSBlbHNlIGlmIChzZWxmLl9wb3MpIHtcbiAgICAgICAgcGFyZW50LnBvcyhzZWxmLl9wb3NbMF0sIHNlbGYuX3Bvc1sxXSwgc2VsZi5fcG9zWzJdLCBzZWxmLl9pZCk7XG4gICAgICB9IGVsc2UgaWYgKHNlbGYuX3Bhbm5lcikge1xuICAgICAgICAvLyBEaXNjb25uZWN0IHRoZSBwYW5uZXIuXG4gICAgICAgIHNlbGYuX3Bhbm5lci5kaXNjb25uZWN0KDApO1xuICAgICAgICBzZWxmLl9wYW5uZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHBhcmVudC5fcmVmcmVzaEJ1ZmZlcihzZWxmKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ29tcGxldGUgcmVzZXR0aW5nIG9mIHRoZSBzb3VuZC5cbiAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICB9O1xuICB9KShTb3VuZC5wcm90b3R5cGUucmVzZXQpO1xuXG4gIC8qKiBIZWxwZXIgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IHBhbm5lciBub2RlIGFuZCBzYXZlIGl0IG9uIHRoZSBzb3VuZC5cbiAgICogQHBhcmFtICB7U291bmR9IHNvdW5kIFNwZWNpZmljIHNvdW5kIHRvIHNldHVwIHBhbm5pbmcgb24uXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFR5cGUgb2YgcGFubmVyIHRvIGNyZWF0ZTogJ3N0ZXJlbycgb3IgJ3NwYXRpYWwnLlxuICAgKi9cbiAgdmFyIHNldHVwUGFubmVyID0gZnVuY3Rpb24oc291bmQsIHR5cGUpIHtcbiAgICB0eXBlID0gdHlwZSB8fCAnc3BhdGlhbCc7XG5cbiAgICAvLyBDcmVhdGUgdGhlIG5ldyBwYW5uZXIgbm9kZS5cbiAgICBpZiAodHlwZSA9PT0gJ3NwYXRpYWwnKSB7XG4gICAgICBzb3VuZC5fcGFubmVyID0gSG93bGVyLmN0eC5jcmVhdGVQYW5uZXIoKTtcbiAgICAgIHNvdW5kLl9wYW5uZXIuY29uZUlubmVyQW5nbGUgPSBzb3VuZC5fcGFubmVyQXR0ci5jb25lSW5uZXJBbmdsZTtcbiAgICAgIHNvdW5kLl9wYW5uZXIuY29uZU91dGVyQW5nbGUgPSBzb3VuZC5fcGFubmVyQXR0ci5jb25lT3V0ZXJBbmdsZTtcbiAgICAgIHNvdW5kLl9wYW5uZXIuY29uZU91dGVyR2FpbiA9IHNvdW5kLl9wYW5uZXJBdHRyLmNvbmVPdXRlckdhaW47XG4gICAgICBzb3VuZC5fcGFubmVyLmRpc3RhbmNlTW9kZWwgPSBzb3VuZC5fcGFubmVyQXR0ci5kaXN0YW5jZU1vZGVsO1xuICAgICAgc291bmQuX3Bhbm5lci5tYXhEaXN0YW5jZSA9IHNvdW5kLl9wYW5uZXJBdHRyLm1heERpc3RhbmNlO1xuICAgICAgc291bmQuX3Bhbm5lci5yZWZEaXN0YW5jZSA9IHNvdW5kLl9wYW5uZXJBdHRyLnJlZkRpc3RhbmNlO1xuICAgICAgc291bmQuX3Bhbm5lci5yb2xsb2ZmRmFjdG9yID0gc291bmQuX3Bhbm5lckF0dHIucm9sbG9mZkZhY3RvcjtcbiAgICAgIHNvdW5kLl9wYW5uZXIucGFubmluZ01vZGVsID0gc291bmQuX3Bhbm5lckF0dHIucGFubmluZ01vZGVsO1xuXG4gICAgICBpZiAodHlwZW9mIHNvdW5kLl9wYW5uZXIucG9zaXRpb25YICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWC5zZXRWYWx1ZUF0VGltZShzb3VuZC5fcG9zWzBdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblkuc2V0VmFsdWVBdFRpbWUoc291bmQuX3Bvc1sxXSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25aLnNldFZhbHVlQXRUaW1lKHNvdW5kLl9wb3NbMl0sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc291bmQuX3Bhbm5lci5zZXRQb3NpdGlvbihzb3VuZC5fcG9zWzBdLCBzb3VuZC5fcG9zWzFdLCBzb3VuZC5fcG9zWzJdKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblguc2V0VmFsdWVBdFRpbWUoc291bmQuX29yaWVudGF0aW9uWzBdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblkuc2V0VmFsdWVBdFRpbWUoc291bmQuX29yaWVudGF0aW9uWzFdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblouc2V0VmFsdWVBdFRpbWUoc291bmQuX29yaWVudGF0aW9uWzJdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNvdW5kLl9wYW5uZXIuc2V0T3JpZW50YXRpb24oc291bmQuX29yaWVudGF0aW9uWzBdLCBzb3VuZC5fb3JpZW50YXRpb25bMV0sIHNvdW5kLl9vcmllbnRhdGlvblsyXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHNvdW5kLl9wYW5uZXIgPSBIb3dsZXIuY3R4LmNyZWF0ZVN0ZXJlb1Bhbm5lcigpO1xuICAgICAgc291bmQuX3Bhbm5lci5wYW4uc2V0VmFsdWVBdFRpbWUoc291bmQuX3N0ZXJlbywgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgfVxuXG4gICAgc291bmQuX3Bhbm5lci5jb25uZWN0KHNvdW5kLl9ub2RlKTtcblxuICAgIC8vIFVwZGF0ZSB0aGUgY29ubmVjdGlvbnMuXG4gICAgaWYgKCFzb3VuZC5fcGF1c2VkKSB7XG4gICAgICBzb3VuZC5fcGFyZW50LnBhdXNlKHNvdW5kLl9pZCwgdHJ1ZSkucGxheShzb3VuZC5faWQsIHRydWUpO1xuICAgIH1cbiAgfTtcbn0pKCk7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGVhcmN1dDtcbm1vZHVsZS5leHBvcnRzLmRlZmF1bHQgPSBlYXJjdXQ7XG5cbmZ1bmN0aW9uIGVhcmN1dChkYXRhLCBob2xlSW5kaWNlcywgZGltKSB7XG5cbiAgICBkaW0gPSBkaW0gfHwgMjtcblxuICAgIHZhciBoYXNIb2xlcyA9IGhvbGVJbmRpY2VzICYmIGhvbGVJbmRpY2VzLmxlbmd0aCxcbiAgICAgICAgb3V0ZXJMZW4gPSBoYXNIb2xlcyA/IGhvbGVJbmRpY2VzWzBdICogZGltIDogZGF0YS5sZW5ndGgsXG4gICAgICAgIG91dGVyTm9kZSA9IGxpbmtlZExpc3QoZGF0YSwgMCwgb3V0ZXJMZW4sIGRpbSwgdHJ1ZSksXG4gICAgICAgIHRyaWFuZ2xlcyA9IFtdO1xuXG4gICAgaWYgKCFvdXRlck5vZGUgfHwgb3V0ZXJOb2RlLm5leHQgPT09IG91dGVyTm9kZS5wcmV2KSByZXR1cm4gdHJpYW5nbGVzO1xuXG4gICAgdmFyIG1pblgsIG1pblksIG1heFgsIG1heFksIHgsIHksIGludlNpemU7XG5cbiAgICBpZiAoaGFzSG9sZXMpIG91dGVyTm9kZSA9IGVsaW1pbmF0ZUhvbGVzKGRhdGEsIGhvbGVJbmRpY2VzLCBvdXRlck5vZGUsIGRpbSk7XG5cbiAgICAvLyBpZiB0aGUgc2hhcGUgaXMgbm90IHRvbyBzaW1wbGUsIHdlJ2xsIHVzZSB6LW9yZGVyIGN1cnZlIGhhc2ggbGF0ZXI7IGNhbGN1bGF0ZSBwb2x5Z29uIGJib3hcbiAgICBpZiAoZGF0YS5sZW5ndGggPiA4MCAqIGRpbSkge1xuICAgICAgICBtaW5YID0gbWF4WCA9IGRhdGFbMF07XG4gICAgICAgIG1pblkgPSBtYXhZID0gZGF0YVsxXTtcblxuICAgICAgICBmb3IgKHZhciBpID0gZGltOyBpIDwgb3V0ZXJMZW47IGkgKz0gZGltKSB7XG4gICAgICAgICAgICB4ID0gZGF0YVtpXTtcbiAgICAgICAgICAgIHkgPSBkYXRhW2kgKyAxXTtcbiAgICAgICAgICAgIGlmICh4IDwgbWluWCkgbWluWCA9IHg7XG4gICAgICAgICAgICBpZiAoeSA8IG1pblkpIG1pblkgPSB5O1xuICAgICAgICAgICAgaWYgKHggPiBtYXhYKSBtYXhYID0geDtcbiAgICAgICAgICAgIGlmICh5ID4gbWF4WSkgbWF4WSA9IHk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtaW5YLCBtaW5ZIGFuZCBpbnZTaXplIGFyZSBsYXRlciB1c2VkIHRvIHRyYW5zZm9ybSBjb29yZHMgaW50byBpbnRlZ2VycyBmb3Igei1vcmRlciBjYWxjdWxhdGlvblxuICAgICAgICBpbnZTaXplID0gTWF0aC5tYXgobWF4WCAtIG1pblgsIG1heFkgLSBtaW5ZKTtcbiAgICAgICAgaW52U2l6ZSA9IGludlNpemUgIT09IDAgPyAzMjc2NyAvIGludlNpemUgOiAwO1xuICAgIH1cblxuICAgIGVhcmN1dExpbmtlZChvdXRlck5vZGUsIHRyaWFuZ2xlcywgZGltLCBtaW5YLCBtaW5ZLCBpbnZTaXplLCAwKTtcblxuICAgIHJldHVybiB0cmlhbmdsZXM7XG59XG5cbi8vIGNyZWF0ZSBhIGNpcmN1bGFyIGRvdWJseSBsaW5rZWQgbGlzdCBmcm9tIHBvbHlnb24gcG9pbnRzIGluIHRoZSBzcGVjaWZpZWQgd2luZGluZyBvcmRlclxuZnVuY3Rpb24gbGlua2VkTGlzdChkYXRhLCBzdGFydCwgZW5kLCBkaW0sIGNsb2Nrd2lzZSkge1xuICAgIHZhciBpLCBsYXN0O1xuXG4gICAgaWYgKGNsb2Nrd2lzZSA9PT0gKHNpZ25lZEFyZWEoZGF0YSwgc3RhcnQsIGVuZCwgZGltKSA+IDApKSB7XG4gICAgICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IGRpbSkgbGFzdCA9IGluc2VydE5vZGUoaSwgZGF0YVtpXSwgZGF0YVtpICsgMV0sIGxhc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAoaSA9IGVuZCAtIGRpbTsgaSA+PSBzdGFydDsgaSAtPSBkaW0pIGxhc3QgPSBpbnNlcnROb2RlKGksIGRhdGFbaV0sIGRhdGFbaSArIDFdLCBsYXN0KTtcbiAgICB9XG5cbiAgICBpZiAobGFzdCAmJiBlcXVhbHMobGFzdCwgbGFzdC5uZXh0KSkge1xuICAgICAgICByZW1vdmVOb2RlKGxhc3QpO1xuICAgICAgICBsYXN0ID0gbGFzdC5uZXh0O1xuICAgIH1cblxuICAgIHJldHVybiBsYXN0O1xufVxuXG4vLyBlbGltaW5hdGUgY29saW5lYXIgb3IgZHVwbGljYXRlIHBvaW50c1xuZnVuY3Rpb24gZmlsdGVyUG9pbnRzKHN0YXJ0LCBlbmQpIHtcbiAgICBpZiAoIXN0YXJ0KSByZXR1cm4gc3RhcnQ7XG4gICAgaWYgKCFlbmQpIGVuZCA9IHN0YXJ0O1xuXG4gICAgdmFyIHAgPSBzdGFydCxcbiAgICAgICAgYWdhaW47XG4gICAgZG8ge1xuICAgICAgICBhZ2FpbiA9IGZhbHNlO1xuXG4gICAgICAgIGlmICghcC5zdGVpbmVyICYmIChlcXVhbHMocCwgcC5uZXh0KSB8fCBhcmVhKHAucHJldiwgcCwgcC5uZXh0KSA9PT0gMCkpIHtcbiAgICAgICAgICAgIHJlbW92ZU5vZGUocCk7XG4gICAgICAgICAgICBwID0gZW5kID0gcC5wcmV2O1xuICAgICAgICAgICAgaWYgKHAgPT09IHAubmV4dCkgYnJlYWs7XG4gICAgICAgICAgICBhZ2FpbiA9IHRydWU7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHAgPSBwLm5leHQ7XG4gICAgICAgIH1cbiAgICB9IHdoaWxlIChhZ2FpbiB8fCBwICE9PSBlbmQpO1xuXG4gICAgcmV0dXJuIGVuZDtcbn1cblxuLy8gbWFpbiBlYXIgc2xpY2luZyBsb29wIHdoaWNoIHRyaWFuZ3VsYXRlcyBhIHBvbHlnb24gKGdpdmVuIGFzIGEgbGlua2VkIGxpc3QpXG5mdW5jdGlvbiBlYXJjdXRMaW5rZWQoZWFyLCB0cmlhbmdsZXMsIGRpbSwgbWluWCwgbWluWSwgaW52U2l6ZSwgcGFzcykge1xuICAgIGlmICghZWFyKSByZXR1cm47XG5cbiAgICAvLyBpbnRlcmxpbmsgcG9seWdvbiBub2RlcyBpbiB6LW9yZGVyXG4gICAgaWYgKCFwYXNzICYmIGludlNpemUpIGluZGV4Q3VydmUoZWFyLCBtaW5YLCBtaW5ZLCBpbnZTaXplKTtcblxuICAgIHZhciBzdG9wID0gZWFyLFxuICAgICAgICBwcmV2LCBuZXh0O1xuXG4gICAgLy8gaXRlcmF0ZSB0aHJvdWdoIGVhcnMsIHNsaWNpbmcgdGhlbSBvbmUgYnkgb25lXG4gICAgd2hpbGUgKGVhci5wcmV2ICE9PSBlYXIubmV4dCkge1xuICAgICAgICBwcmV2ID0gZWFyLnByZXY7XG4gICAgICAgIG5leHQgPSBlYXIubmV4dDtcblxuICAgICAgICBpZiAoaW52U2l6ZSA/IGlzRWFySGFzaGVkKGVhciwgbWluWCwgbWluWSwgaW52U2l6ZSkgOiBpc0VhcihlYXIpKSB7XG4gICAgICAgICAgICAvLyBjdXQgb2ZmIHRoZSB0cmlhbmdsZVxuICAgICAgICAgICAgdHJpYW5nbGVzLnB1c2gocHJldi5pIC8gZGltIHwgMCk7XG4gICAgICAgICAgICB0cmlhbmdsZXMucHVzaChlYXIuaSAvIGRpbSB8IDApO1xuICAgICAgICAgICAgdHJpYW5nbGVzLnB1c2gobmV4dC5pIC8gZGltIHwgMCk7XG5cbiAgICAgICAgICAgIHJlbW92ZU5vZGUoZWFyKTtcblxuICAgICAgICAgICAgLy8gc2tpcHBpbmcgdGhlIG5leHQgdmVydGV4IGxlYWRzIHRvIGxlc3Mgc2xpdmVyIHRyaWFuZ2xlc1xuICAgICAgICAgICAgZWFyID0gbmV4dC5uZXh0O1xuICAgICAgICAgICAgc3RvcCA9IG5leHQubmV4dDtcblxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBlYXIgPSBuZXh0O1xuXG4gICAgICAgIC8vIGlmIHdlIGxvb3BlZCB0aHJvdWdoIHRoZSB3aG9sZSByZW1haW5pbmcgcG9seWdvbiBhbmQgY2FuJ3QgZmluZCBhbnkgbW9yZSBlYXJzXG4gICAgICAgIGlmIChlYXIgPT09IHN0b3ApIHtcbiAgICAgICAgICAgIC8vIHRyeSBmaWx0ZXJpbmcgcG9pbnRzIGFuZCBzbGljaW5nIGFnYWluXG4gICAgICAgICAgICBpZiAoIXBhc3MpIHtcbiAgICAgICAgICAgICAgICBlYXJjdXRMaW5rZWQoZmlsdGVyUG9pbnRzKGVhciksIHRyaWFuZ2xlcywgZGltLCBtaW5YLCBtaW5ZLCBpbnZTaXplLCAxKTtcblxuICAgICAgICAgICAgLy8gaWYgdGhpcyBkaWRuJ3Qgd29yaywgdHJ5IGN1cmluZyBhbGwgc21hbGwgc2VsZi1pbnRlcnNlY3Rpb25zIGxvY2FsbHlcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFzcyA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGVhciA9IGN1cmVMb2NhbEludGVyc2VjdGlvbnMoZmlsdGVyUG9pbnRzKGVhciksIHRyaWFuZ2xlcywgZGltKTtcbiAgICAgICAgICAgICAgICBlYXJjdXRMaW5rZWQoZWFyLCB0cmlhbmdsZXMsIGRpbSwgbWluWCwgbWluWSwgaW52U2l6ZSwgMik7XG5cbiAgICAgICAgICAgIC8vIGFzIGEgbGFzdCByZXNvcnQsIHRyeSBzcGxpdHRpbmcgdGhlIHJlbWFpbmluZyBwb2x5Z29uIGludG8gdHdvXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBhc3MgPT09IDIpIHtcbiAgICAgICAgICAgICAgICBzcGxpdEVhcmN1dChlYXIsIHRyaWFuZ2xlcywgZGltLCBtaW5YLCBtaW5ZLCBpbnZTaXplKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIGNoZWNrIHdoZXRoZXIgYSBwb2x5Z29uIG5vZGUgZm9ybXMgYSB2YWxpZCBlYXIgd2l0aCBhZGphY2VudCBub2Rlc1xuZnVuY3Rpb24gaXNFYXIoZWFyKSB7XG4gICAgdmFyIGEgPSBlYXIucHJldixcbiAgICAgICAgYiA9IGVhcixcbiAgICAgICAgYyA9IGVhci5uZXh0O1xuXG4gICAgaWYgKGFyZWEoYSwgYiwgYykgPj0gMCkgcmV0dXJuIGZhbHNlOyAvLyByZWZsZXgsIGNhbid0IGJlIGFuIGVhclxuXG4gICAgLy8gbm93IG1ha2Ugc3VyZSB3ZSBkb24ndCBoYXZlIG90aGVyIHBvaW50cyBpbnNpZGUgdGhlIHBvdGVudGlhbCBlYXJcbiAgICB2YXIgYXggPSBhLngsIGJ4ID0gYi54LCBjeCA9IGMueCwgYXkgPSBhLnksIGJ5ID0gYi55LCBjeSA9IGMueTtcblxuICAgIC8vIHRyaWFuZ2xlIGJib3g7IG1pbiAmIG1heCBhcmUgY2FsY3VsYXRlZCBsaWtlIHRoaXMgZm9yIHNwZWVkXG4gICAgdmFyIHgwID0gYXggPCBieCA/IChheCA8IGN4ID8gYXggOiBjeCkgOiAoYnggPCBjeCA/IGJ4IDogY3gpLFxuICAgICAgICB5MCA9IGF5IDwgYnkgPyAoYXkgPCBjeSA/IGF5IDogY3kpIDogKGJ5IDwgY3kgPyBieSA6IGN5KSxcbiAgICAgICAgeDEgPSBheCA+IGJ4ID8gKGF4ID4gY3ggPyBheCA6IGN4KSA6IChieCA+IGN4ID8gYnggOiBjeCksXG4gICAgICAgIHkxID0gYXkgPiBieSA/IChheSA+IGN5ID8gYXkgOiBjeSkgOiAoYnkgPiBjeSA/IGJ5IDogY3kpO1xuXG4gICAgdmFyIHAgPSBjLm5leHQ7XG4gICAgd2hpbGUgKHAgIT09IGEpIHtcbiAgICAgICAgaWYgKHAueCA+PSB4MCAmJiBwLnggPD0geDEgJiYgcC55ID49IHkwICYmIHAueSA8PSB5MSAmJlxuICAgICAgICAgICAgcG9pbnRJblRyaWFuZ2xlKGF4LCBheSwgYngsIGJ5LCBjeCwgY3ksIHAueCwgcC55KSAmJlxuICAgICAgICAgICAgYXJlYShwLnByZXYsIHAsIHAubmV4dCkgPj0gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBwID0gcC5uZXh0O1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBpc0Vhckhhc2hlZChlYXIsIG1pblgsIG1pblksIGludlNpemUpIHtcbiAgICB2YXIgYSA9IGVhci5wcmV2LFxuICAgICAgICBiID0gZWFyLFxuICAgICAgICBjID0gZWFyLm5leHQ7XG5cbiAgICBpZiAoYXJlYShhLCBiLCBjKSA+PSAwKSByZXR1cm4gZmFsc2U7IC8vIHJlZmxleCwgY2FuJ3QgYmUgYW4gZWFyXG5cbiAgICB2YXIgYXggPSBhLngsIGJ4ID0gYi54LCBjeCA9IGMueCwgYXkgPSBhLnksIGJ5ID0gYi55LCBjeSA9IGMueTtcblxuICAgIC8vIHRyaWFuZ2xlIGJib3g7IG1pbiAmIG1heCBhcmUgY2FsY3VsYXRlZCBsaWtlIHRoaXMgZm9yIHNwZWVkXG4gICAgdmFyIHgwID0gYXggPCBieCA/IChheCA8IGN4ID8gYXggOiBjeCkgOiAoYnggPCBjeCA/IGJ4IDogY3gpLFxuICAgICAgICB5MCA9IGF5IDwgYnkgPyAoYXkgPCBjeSA/IGF5IDogY3kpIDogKGJ5IDwgY3kgPyBieSA6IGN5KSxcbiAgICAgICAgeDEgPSBheCA+IGJ4ID8gKGF4ID4gY3ggPyBheCA6IGN4KSA6IChieCA+IGN4ID8gYnggOiBjeCksXG4gICAgICAgIHkxID0gYXkgPiBieSA/IChheSA+IGN5ID8gYXkgOiBjeSkgOiAoYnkgPiBjeSA/IGJ5IDogY3kpO1xuXG4gICAgLy8gei1vcmRlciByYW5nZSBmb3IgdGhlIGN1cnJlbnQgdHJpYW5nbGUgYmJveDtcbiAgICB2YXIgbWluWiA9IHpPcmRlcih4MCwgeTAsIG1pblgsIG1pblksIGludlNpemUpLFxuICAgICAgICBtYXhaID0gek9yZGVyKHgxLCB5MSwgbWluWCwgbWluWSwgaW52U2l6ZSk7XG5cbiAgICB2YXIgcCA9IGVhci5wcmV2WixcbiAgICAgICAgbiA9IGVhci5uZXh0WjtcblxuICAgIC8vIGxvb2sgZm9yIHBvaW50cyBpbnNpZGUgdGhlIHRyaWFuZ2xlIGluIGJvdGggZGlyZWN0aW9uc1xuICAgIHdoaWxlIChwICYmIHAueiA+PSBtaW5aICYmIG4gJiYgbi56IDw9IG1heFopIHtcbiAgICAgICAgaWYgKHAueCA+PSB4MCAmJiBwLnggPD0geDEgJiYgcC55ID49IHkwICYmIHAueSA8PSB5MSAmJiBwICE9PSBhICYmIHAgIT09IGMgJiZcbiAgICAgICAgICAgIHBvaW50SW5UcmlhbmdsZShheCwgYXksIGJ4LCBieSwgY3gsIGN5LCBwLngsIHAueSkgJiYgYXJlYShwLnByZXYsIHAsIHAubmV4dCkgPj0gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBwID0gcC5wcmV2WjtcblxuICAgICAgICBpZiAobi54ID49IHgwICYmIG4ueCA8PSB4MSAmJiBuLnkgPj0geTAgJiYgbi55IDw9IHkxICYmIG4gIT09IGEgJiYgbiAhPT0gYyAmJlxuICAgICAgICAgICAgcG9pbnRJblRyaWFuZ2xlKGF4LCBheSwgYngsIGJ5LCBjeCwgY3ksIG4ueCwgbi55KSAmJiBhcmVhKG4ucHJldiwgbiwgbi5uZXh0KSA+PSAwKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIG4gPSBuLm5leHRaO1xuICAgIH1cblxuICAgIC8vIGxvb2sgZm9yIHJlbWFpbmluZyBwb2ludHMgaW4gZGVjcmVhc2luZyB6LW9yZGVyXG4gICAgd2hpbGUgKHAgJiYgcC56ID49IG1pblopIHtcbiAgICAgICAgaWYgKHAueCA+PSB4MCAmJiBwLnggPD0geDEgJiYgcC55ID49IHkwICYmIHAueSA8PSB5MSAmJiBwICE9PSBhICYmIHAgIT09IGMgJiZcbiAgICAgICAgICAgIHBvaW50SW5UcmlhbmdsZShheCwgYXksIGJ4LCBieSwgY3gsIGN5LCBwLngsIHAueSkgJiYgYXJlYShwLnByZXYsIHAsIHAubmV4dCkgPj0gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBwID0gcC5wcmV2WjtcbiAgICB9XG5cbiAgICAvLyBsb29rIGZvciByZW1haW5pbmcgcG9pbnRzIGluIGluY3JlYXNpbmcgei1vcmRlclxuICAgIHdoaWxlIChuICYmIG4ueiA8PSBtYXhaKSB7XG4gICAgICAgIGlmIChuLnggPj0geDAgJiYgbi54IDw9IHgxICYmIG4ueSA+PSB5MCAmJiBuLnkgPD0geTEgJiYgbiAhPT0gYSAmJiBuICE9PSBjICYmXG4gICAgICAgICAgICBwb2ludEluVHJpYW5nbGUoYXgsIGF5LCBieCwgYnksIGN4LCBjeSwgbi54LCBuLnkpICYmIGFyZWEobi5wcmV2LCBuLCBuLm5leHQpID49IDApIHJldHVybiBmYWxzZTtcbiAgICAgICAgbiA9IG4ubmV4dFo7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG59XG5cbi8vIGdvIHRocm91Z2ggYWxsIHBvbHlnb24gbm9kZXMgYW5kIGN1cmUgc21hbGwgbG9jYWwgc2VsZi1pbnRlcnNlY3Rpb25zXG5mdW5jdGlvbiBjdXJlTG9jYWxJbnRlcnNlY3Rpb25zKHN0YXJ0LCB0cmlhbmdsZXMsIGRpbSkge1xuICAgIHZhciBwID0gc3RhcnQ7XG4gICAgZG8ge1xuICAgICAgICB2YXIgYSA9IHAucHJldixcbiAgICAgICAgICAgIGIgPSBwLm5leHQubmV4dDtcblxuICAgICAgICBpZiAoIWVxdWFscyhhLCBiKSAmJiBpbnRlcnNlY3RzKGEsIHAsIHAubmV4dCwgYikgJiYgbG9jYWxseUluc2lkZShhLCBiKSAmJiBsb2NhbGx5SW5zaWRlKGIsIGEpKSB7XG5cbiAgICAgICAgICAgIHRyaWFuZ2xlcy5wdXNoKGEuaSAvIGRpbSB8IDApO1xuICAgICAgICAgICAgdHJpYW5nbGVzLnB1c2gocC5pIC8gZGltIHwgMCk7XG4gICAgICAgICAgICB0cmlhbmdsZXMucHVzaChiLmkgLyBkaW0gfCAwKTtcblxuICAgICAgICAgICAgLy8gcmVtb3ZlIHR3byBub2RlcyBpbnZvbHZlZFxuICAgICAgICAgICAgcmVtb3ZlTm9kZShwKTtcbiAgICAgICAgICAgIHJlbW92ZU5vZGUocC5uZXh0KTtcblxuICAgICAgICAgICAgcCA9IHN0YXJ0ID0gYjtcbiAgICAgICAgfVxuICAgICAgICBwID0gcC5uZXh0O1xuICAgIH0gd2hpbGUgKHAgIT09IHN0YXJ0KTtcblxuICAgIHJldHVybiBmaWx0ZXJQb2ludHMocCk7XG59XG5cbi8vIHRyeSBzcGxpdHRpbmcgcG9seWdvbiBpbnRvIHR3byBhbmQgdHJpYW5ndWxhdGUgdGhlbSBpbmRlcGVuZGVudGx5XG5mdW5jdGlvbiBzcGxpdEVhcmN1dChzdGFydCwgdHJpYW5nbGVzLCBkaW0sIG1pblgsIG1pblksIGludlNpemUpIHtcbiAgICAvLyBsb29rIGZvciBhIHZhbGlkIGRpYWdvbmFsIHRoYXQgZGl2aWRlcyB0aGUgcG9seWdvbiBpbnRvIHR3b1xuICAgIHZhciBhID0gc3RhcnQ7XG4gICAgZG8ge1xuICAgICAgICB2YXIgYiA9IGEubmV4dC5uZXh0O1xuICAgICAgICB3aGlsZSAoYiAhPT0gYS5wcmV2KSB7XG4gICAgICAgICAgICBpZiAoYS5pICE9PSBiLmkgJiYgaXNWYWxpZERpYWdvbmFsKGEsIGIpKSB7XG4gICAgICAgICAgICAgICAgLy8gc3BsaXQgdGhlIHBvbHlnb24gaW4gdHdvIGJ5IHRoZSBkaWFnb25hbFxuICAgICAgICAgICAgICAgIHZhciBjID0gc3BsaXRQb2x5Z29uKGEsIGIpO1xuXG4gICAgICAgICAgICAgICAgLy8gZmlsdGVyIGNvbGluZWFyIHBvaW50cyBhcm91bmQgdGhlIGN1dHNcbiAgICAgICAgICAgICAgICBhID0gZmlsdGVyUG9pbnRzKGEsIGEubmV4dCk7XG4gICAgICAgICAgICAgICAgYyA9IGZpbHRlclBvaW50cyhjLCBjLm5leHQpO1xuXG4gICAgICAgICAgICAgICAgLy8gcnVuIGVhcmN1dCBvbiBlYWNoIGhhbGZcbiAgICAgICAgICAgICAgICBlYXJjdXRMaW5rZWQoYSwgdHJpYW5nbGVzLCBkaW0sIG1pblgsIG1pblksIGludlNpemUsIDApO1xuICAgICAgICAgICAgICAgIGVhcmN1dExpbmtlZChjLCB0cmlhbmdsZXMsIGRpbSwgbWluWCwgbWluWSwgaW52U2l6ZSwgMCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYiA9IGIubmV4dDtcbiAgICAgICAgfVxuICAgICAgICBhID0gYS5uZXh0O1xuICAgIH0gd2hpbGUgKGEgIT09IHN0YXJ0KTtcbn1cblxuLy8gbGluayBldmVyeSBob2xlIGludG8gdGhlIG91dGVyIGxvb3AsIHByb2R1Y2luZyBhIHNpbmdsZS1yaW5nIHBvbHlnb24gd2l0aG91dCBob2xlc1xuZnVuY3Rpb24gZWxpbWluYXRlSG9sZXMoZGF0YSwgaG9sZUluZGljZXMsIG91dGVyTm9kZSwgZGltKSB7XG4gICAgdmFyIHF1ZXVlID0gW10sXG4gICAgICAgIGksIGxlbiwgc3RhcnQsIGVuZCwgbGlzdDtcblxuICAgIGZvciAoaSA9IDAsIGxlbiA9IGhvbGVJbmRpY2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHN0YXJ0ID0gaG9sZUluZGljZXNbaV0gKiBkaW07XG4gICAgICAgIGVuZCA9IGkgPCBsZW4gLSAxID8gaG9sZUluZGljZXNbaSArIDFdICogZGltIDogZGF0YS5sZW5ndGg7XG4gICAgICAgIGxpc3QgPSBsaW5rZWRMaXN0KGRhdGEsIHN0YXJ0LCBlbmQsIGRpbSwgZmFsc2UpO1xuICAgICAgICBpZiAobGlzdCA9PT0gbGlzdC5uZXh0KSBsaXN0LnN0ZWluZXIgPSB0cnVlO1xuICAgICAgICBxdWV1ZS5wdXNoKGdldExlZnRtb3N0KGxpc3QpKTtcbiAgICB9XG5cbiAgICBxdWV1ZS5zb3J0KGNvbXBhcmVYKTtcblxuICAgIC8vIHByb2Nlc3MgaG9sZXMgZnJvbSBsZWZ0IHRvIHJpZ2h0XG4gICAgZm9yIChpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG91dGVyTm9kZSA9IGVsaW1pbmF0ZUhvbGUocXVldWVbaV0sIG91dGVyTm9kZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dGVyTm9kZTtcbn1cblxuZnVuY3Rpb24gY29tcGFyZVgoYSwgYikge1xuICAgIHJldHVybiBhLnggLSBiLng7XG59XG5cbi8vIGZpbmQgYSBicmlkZ2UgYmV0d2VlbiB2ZXJ0aWNlcyB0aGF0IGNvbm5lY3RzIGhvbGUgd2l0aCBhbiBvdXRlciByaW5nIGFuZCBhbmQgbGluayBpdFxuZnVuY3Rpb24gZWxpbWluYXRlSG9sZShob2xlLCBvdXRlck5vZGUpIHtcbiAgICB2YXIgYnJpZGdlID0gZmluZEhvbGVCcmlkZ2UoaG9sZSwgb3V0ZXJOb2RlKTtcbiAgICBpZiAoIWJyaWRnZSkge1xuICAgICAgICByZXR1cm4gb3V0ZXJOb2RlO1xuICAgIH1cblxuICAgIHZhciBicmlkZ2VSZXZlcnNlID0gc3BsaXRQb2x5Z29uKGJyaWRnZSwgaG9sZSk7XG5cbiAgICAvLyBmaWx0ZXIgY29sbGluZWFyIHBvaW50cyBhcm91bmQgdGhlIGN1dHNcbiAgICBmaWx0ZXJQb2ludHMoYnJpZGdlUmV2ZXJzZSwgYnJpZGdlUmV2ZXJzZS5uZXh0KTtcbiAgICByZXR1cm4gZmlsdGVyUG9pbnRzKGJyaWRnZSwgYnJpZGdlLm5leHQpO1xufVxuXG4vLyBEYXZpZCBFYmVybHkncyBhbGdvcml0aG0gZm9yIGZpbmRpbmcgYSBicmlkZ2UgYmV0d2VlbiBob2xlIGFuZCBvdXRlciBwb2x5Z29uXG5mdW5jdGlvbiBmaW5kSG9sZUJyaWRnZShob2xlLCBvdXRlck5vZGUpIHtcbiAgICB2YXIgcCA9IG91dGVyTm9kZSxcbiAgICAgICAgaHggPSBob2xlLngsXG4gICAgICAgIGh5ID0gaG9sZS55LFxuICAgICAgICBxeCA9IC1JbmZpbml0eSxcbiAgICAgICAgbTtcblxuICAgIC8vIGZpbmQgYSBzZWdtZW50IGludGVyc2VjdGVkIGJ5IGEgcmF5IGZyb20gdGhlIGhvbGUncyBsZWZ0bW9zdCBwb2ludCB0byB0aGUgbGVmdDtcbiAgICAvLyBzZWdtZW50J3MgZW5kcG9pbnQgd2l0aCBsZXNzZXIgeCB3aWxsIGJlIHBvdGVudGlhbCBjb25uZWN0aW9uIHBvaW50XG4gICAgZG8ge1xuICAgICAgICBpZiAoaHkgPD0gcC55ICYmIGh5ID49IHAubmV4dC55ICYmIHAubmV4dC55ICE9PSBwLnkpIHtcbiAgICAgICAgICAgIHZhciB4ID0gcC54ICsgKGh5IC0gcC55KSAqIChwLm5leHQueCAtIHAueCkgLyAocC5uZXh0LnkgLSBwLnkpO1xuICAgICAgICAgICAgaWYgKHggPD0gaHggJiYgeCA+IHF4KSB7XG4gICAgICAgICAgICAgICAgcXggPSB4O1xuICAgICAgICAgICAgICAgIG0gPSBwLnggPCBwLm5leHQueCA/IHAgOiBwLm5leHQ7XG4gICAgICAgICAgICAgICAgaWYgKHggPT09IGh4KSByZXR1cm4gbTsgLy8gaG9sZSB0b3VjaGVzIG91dGVyIHNlZ21lbnQ7IHBpY2sgbGVmdG1vc3QgZW5kcG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwID0gcC5uZXh0O1xuICAgIH0gd2hpbGUgKHAgIT09IG91dGVyTm9kZSk7XG5cbiAgICBpZiAoIW0pIHJldHVybiBudWxsO1xuXG4gICAgLy8gbG9vayBmb3IgcG9pbnRzIGluc2lkZSB0aGUgdHJpYW5nbGUgb2YgaG9sZSBwb2ludCwgc2VnbWVudCBpbnRlcnNlY3Rpb24gYW5kIGVuZHBvaW50O1xuICAgIC8vIGlmIHRoZXJlIGFyZSBubyBwb2ludHMgZm91bmQsIHdlIGhhdmUgYSB2YWxpZCBjb25uZWN0aW9uO1xuICAgIC8vIG90aGVyd2lzZSBjaG9vc2UgdGhlIHBvaW50IG9mIHRoZSBtaW5pbXVtIGFuZ2xlIHdpdGggdGhlIHJheSBhcyBjb25uZWN0aW9uIHBvaW50XG5cbiAgICB2YXIgc3RvcCA9IG0sXG4gICAgICAgIG14ID0gbS54LFxuICAgICAgICBteSA9IG0ueSxcbiAgICAgICAgdGFuTWluID0gSW5maW5pdHksXG4gICAgICAgIHRhbjtcblxuICAgIHAgPSBtO1xuXG4gICAgZG8ge1xuICAgICAgICBpZiAoaHggPj0gcC54ICYmIHAueCA+PSBteCAmJiBoeCAhPT0gcC54ICYmXG4gICAgICAgICAgICAgICAgcG9pbnRJblRyaWFuZ2xlKGh5IDwgbXkgPyBoeCA6IHF4LCBoeSwgbXgsIG15LCBoeSA8IG15ID8gcXggOiBoeCwgaHksIHAueCwgcC55KSkge1xuXG4gICAgICAgICAgICB0YW4gPSBNYXRoLmFicyhoeSAtIHAueSkgLyAoaHggLSBwLngpOyAvLyB0YW5nZW50aWFsXG5cbiAgICAgICAgICAgIGlmIChsb2NhbGx5SW5zaWRlKHAsIGhvbGUpICYmXG4gICAgICAgICAgICAgICAgKHRhbiA8IHRhbk1pbiB8fCAodGFuID09PSB0YW5NaW4gJiYgKHAueCA+IG0ueCB8fCAocC54ID09PSBtLnggJiYgc2VjdG9yQ29udGFpbnNTZWN0b3IobSwgcCkpKSkpKSB7XG4gICAgICAgICAgICAgICAgbSA9IHA7XG4gICAgICAgICAgICAgICAgdGFuTWluID0gdGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcCA9IHAubmV4dDtcbiAgICB9IHdoaWxlIChwICE9PSBzdG9wKTtcblxuICAgIHJldHVybiBtO1xufVxuXG4vLyB3aGV0aGVyIHNlY3RvciBpbiB2ZXJ0ZXggbSBjb250YWlucyBzZWN0b3IgaW4gdmVydGV4IHAgaW4gdGhlIHNhbWUgY29vcmRpbmF0ZXNcbmZ1bmN0aW9uIHNlY3RvckNvbnRhaW5zU2VjdG9yKG0sIHApIHtcbiAgICByZXR1cm4gYXJlYShtLnByZXYsIG0sIHAucHJldikgPCAwICYmIGFyZWEocC5uZXh0LCBtLCBtLm5leHQpIDwgMDtcbn1cblxuLy8gaW50ZXJsaW5rIHBvbHlnb24gbm9kZXMgaW4gei1vcmRlclxuZnVuY3Rpb24gaW5kZXhDdXJ2ZShzdGFydCwgbWluWCwgbWluWSwgaW52U2l6ZSkge1xuICAgIHZhciBwID0gc3RhcnQ7XG4gICAgZG8ge1xuICAgICAgICBpZiAocC56ID09PSAwKSBwLnogPSB6T3JkZXIocC54LCBwLnksIG1pblgsIG1pblksIGludlNpemUpO1xuICAgICAgICBwLnByZXZaID0gcC5wcmV2O1xuICAgICAgICBwLm5leHRaID0gcC5uZXh0O1xuICAgICAgICBwID0gcC5uZXh0O1xuICAgIH0gd2hpbGUgKHAgIT09IHN0YXJ0KTtcblxuICAgIHAucHJldloubmV4dFogPSBudWxsO1xuICAgIHAucHJldlogPSBudWxsO1xuXG4gICAgc29ydExpbmtlZChwKTtcbn1cblxuLy8gU2ltb24gVGF0aGFtJ3MgbGlua2VkIGxpc3QgbWVyZ2Ugc29ydCBhbGdvcml0aG1cbi8vIGh0dHA6Ly93d3cuY2hpYXJrLmdyZWVuZW5kLm9yZy51ay9+c2d0YXRoYW0vYWxnb3JpdGhtcy9saXN0c29ydC5odG1sXG5mdW5jdGlvbiBzb3J0TGlua2VkKGxpc3QpIHtcbiAgICB2YXIgaSwgcCwgcSwgZSwgdGFpbCwgbnVtTWVyZ2VzLCBwU2l6ZSwgcVNpemUsXG4gICAgICAgIGluU2l6ZSA9IDE7XG5cbiAgICBkbyB7XG4gICAgICAgIHAgPSBsaXN0O1xuICAgICAgICBsaXN0ID0gbnVsbDtcbiAgICAgICAgdGFpbCA9IG51bGw7XG4gICAgICAgIG51bU1lcmdlcyA9IDA7XG5cbiAgICAgICAgd2hpbGUgKHApIHtcbiAgICAgICAgICAgIG51bU1lcmdlcysrO1xuICAgICAgICAgICAgcSA9IHA7XG4gICAgICAgICAgICBwU2l6ZSA9IDA7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgaW5TaXplOyBpKyspIHtcbiAgICAgICAgICAgICAgICBwU2l6ZSsrO1xuICAgICAgICAgICAgICAgIHEgPSBxLm5leHRaO1xuICAgICAgICAgICAgICAgIGlmICghcSkgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBxU2l6ZSA9IGluU2l6ZTtcblxuICAgICAgICAgICAgd2hpbGUgKHBTaXplID4gMCB8fCAocVNpemUgPiAwICYmIHEpKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAocFNpemUgIT09IDAgJiYgKHFTaXplID09PSAwIHx8ICFxIHx8IHAueiA8PSBxLnopKSB7XG4gICAgICAgICAgICAgICAgICAgIGUgPSBwO1xuICAgICAgICAgICAgICAgICAgICBwID0gcC5uZXh0WjtcbiAgICAgICAgICAgICAgICAgICAgcFNpemUtLTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlID0gcTtcbiAgICAgICAgICAgICAgICAgICAgcSA9IHEubmV4dFo7XG4gICAgICAgICAgICAgICAgICAgIHFTaXplLS07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHRhaWwpIHRhaWwubmV4dFogPSBlO1xuICAgICAgICAgICAgICAgIGVsc2UgbGlzdCA9IGU7XG5cbiAgICAgICAgICAgICAgICBlLnByZXZaID0gdGFpbDtcbiAgICAgICAgICAgICAgICB0YWlsID0gZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcCA9IHE7XG4gICAgICAgIH1cblxuICAgICAgICB0YWlsLm5leHRaID0gbnVsbDtcbiAgICAgICAgaW5TaXplICo9IDI7XG5cbiAgICB9IHdoaWxlIChudW1NZXJnZXMgPiAxKTtcblxuICAgIHJldHVybiBsaXN0O1xufVxuXG4vLyB6LW9yZGVyIG9mIGEgcG9pbnQgZ2l2ZW4gY29vcmRzIGFuZCBpbnZlcnNlIG9mIHRoZSBsb25nZXIgc2lkZSBvZiBkYXRhIGJib3hcbmZ1bmN0aW9uIHpPcmRlcih4LCB5LCBtaW5YLCBtaW5ZLCBpbnZTaXplKSB7XG4gICAgLy8gY29vcmRzIGFyZSB0cmFuc2Zvcm1lZCBpbnRvIG5vbi1uZWdhdGl2ZSAxNS1iaXQgaW50ZWdlciByYW5nZVxuICAgIHggPSAoeCAtIG1pblgpICogaW52U2l6ZSB8IDA7XG4gICAgeSA9ICh5IC0gbWluWSkgKiBpbnZTaXplIHwgMDtcblxuICAgIHggPSAoeCB8ICh4IDw8IDgpKSAmIDB4MDBGRjAwRkY7XG4gICAgeCA9ICh4IHwgKHggPDwgNCkpICYgMHgwRjBGMEYwRjtcbiAgICB4ID0gKHggfCAoeCA8PCAyKSkgJiAweDMzMzMzMzMzO1xuICAgIHggPSAoeCB8ICh4IDw8IDEpKSAmIDB4NTU1NTU1NTU7XG5cbiAgICB5ID0gKHkgfCAoeSA8PCA4KSkgJiAweDAwRkYwMEZGO1xuICAgIHkgPSAoeSB8ICh5IDw8IDQpKSAmIDB4MEYwRjBGMEY7XG4gICAgeSA9ICh5IHwgKHkgPDwgMikpICYgMHgzMzMzMzMzMztcbiAgICB5ID0gKHkgfCAoeSA8PCAxKSkgJiAweDU1NTU1NTU1O1xuXG4gICAgcmV0dXJuIHggfCAoeSA8PCAxKTtcbn1cblxuLy8gZmluZCB0aGUgbGVmdG1vc3Qgbm9kZSBvZiBhIHBvbHlnb24gcmluZ1xuZnVuY3Rpb24gZ2V0TGVmdG1vc3Qoc3RhcnQpIHtcbiAgICB2YXIgcCA9IHN0YXJ0LFxuICAgICAgICBsZWZ0bW9zdCA9IHN0YXJ0O1xuICAgIGRvIHtcbiAgICAgICAgaWYgKHAueCA8IGxlZnRtb3N0LnggfHwgKHAueCA9PT0gbGVmdG1vc3QueCAmJiBwLnkgPCBsZWZ0bW9zdC55KSkgbGVmdG1vc3QgPSBwO1xuICAgICAgICBwID0gcC5uZXh0O1xuICAgIH0gd2hpbGUgKHAgIT09IHN0YXJ0KTtcblxuICAgIHJldHVybiBsZWZ0bW9zdDtcbn1cblxuLy8gY2hlY2sgaWYgYSBwb2ludCBsaWVzIHdpdGhpbiBhIGNvbnZleCB0cmlhbmdsZVxuZnVuY3Rpb24gcG9pbnRJblRyaWFuZ2xlKGF4LCBheSwgYngsIGJ5LCBjeCwgY3ksIHB4LCBweSkge1xuICAgIHJldHVybiAoY3ggLSBweCkgKiAoYXkgLSBweSkgPj0gKGF4IC0gcHgpICogKGN5IC0gcHkpICYmXG4gICAgICAgICAgIChheCAtIHB4KSAqIChieSAtIHB5KSA+PSAoYnggLSBweCkgKiAoYXkgLSBweSkgJiZcbiAgICAgICAgICAgKGJ4IC0gcHgpICogKGN5IC0gcHkpID49IChjeCAtIHB4KSAqIChieSAtIHB5KTtcbn1cblxuLy8gY2hlY2sgaWYgYSBkaWFnb25hbCBiZXR3ZWVuIHR3byBwb2x5Z29uIG5vZGVzIGlzIHZhbGlkIChsaWVzIGluIHBvbHlnb24gaW50ZXJpb3IpXG5mdW5jdGlvbiBpc1ZhbGlkRGlhZ29uYWwoYSwgYikge1xuICAgIHJldHVybiBhLm5leHQuaSAhPT0gYi5pICYmIGEucHJldi5pICE9PSBiLmkgJiYgIWludGVyc2VjdHNQb2x5Z29uKGEsIGIpICYmIC8vIGRvbmVzJ3QgaW50ZXJzZWN0IG90aGVyIGVkZ2VzXG4gICAgICAgICAgIChsb2NhbGx5SW5zaWRlKGEsIGIpICYmIGxvY2FsbHlJbnNpZGUoYiwgYSkgJiYgbWlkZGxlSW5zaWRlKGEsIGIpICYmIC8vIGxvY2FsbHkgdmlzaWJsZVxuICAgICAgICAgICAgKGFyZWEoYS5wcmV2LCBhLCBiLnByZXYpIHx8IGFyZWEoYSwgYi5wcmV2LCBiKSkgfHwgLy8gZG9lcyBub3QgY3JlYXRlIG9wcG9zaXRlLWZhY2luZyBzZWN0b3JzXG4gICAgICAgICAgICBlcXVhbHMoYSwgYikgJiYgYXJlYShhLnByZXYsIGEsIGEubmV4dCkgPiAwICYmIGFyZWEoYi5wcmV2LCBiLCBiLm5leHQpID4gMCk7IC8vIHNwZWNpYWwgemVyby1sZW5ndGggY2FzZVxufVxuXG4vLyBzaWduZWQgYXJlYSBvZiBhIHRyaWFuZ2xlXG5mdW5jdGlvbiBhcmVhKHAsIHEsIHIpIHtcbiAgICByZXR1cm4gKHEueSAtIHAueSkgKiAoci54IC0gcS54KSAtIChxLnggLSBwLngpICogKHIueSAtIHEueSk7XG59XG5cbi8vIGNoZWNrIGlmIHR3byBwb2ludHMgYXJlIGVxdWFsXG5mdW5jdGlvbiBlcXVhbHMocDEsIHAyKSB7XG4gICAgcmV0dXJuIHAxLnggPT09IHAyLnggJiYgcDEueSA9PT0gcDIueTtcbn1cblxuLy8gY2hlY2sgaWYgdHdvIHNlZ21lbnRzIGludGVyc2VjdFxuZnVuY3Rpb24gaW50ZXJzZWN0cyhwMSwgcTEsIHAyLCBxMikge1xuICAgIHZhciBvMSA9IHNpZ24oYXJlYShwMSwgcTEsIHAyKSk7XG4gICAgdmFyIG8yID0gc2lnbihhcmVhKHAxLCBxMSwgcTIpKTtcbiAgICB2YXIgbzMgPSBzaWduKGFyZWEocDIsIHEyLCBwMSkpO1xuICAgIHZhciBvNCA9IHNpZ24oYXJlYShwMiwgcTIsIHExKSk7XG5cbiAgICBpZiAobzEgIT09IG8yICYmIG8zICE9PSBvNCkgcmV0dXJuIHRydWU7IC8vIGdlbmVyYWwgY2FzZVxuXG4gICAgaWYgKG8xID09PSAwICYmIG9uU2VnbWVudChwMSwgcDIsIHExKSkgcmV0dXJuIHRydWU7IC8vIHAxLCBxMSBhbmQgcDIgYXJlIGNvbGxpbmVhciBhbmQgcDIgbGllcyBvbiBwMXExXG4gICAgaWYgKG8yID09PSAwICYmIG9uU2VnbWVudChwMSwgcTIsIHExKSkgcmV0dXJuIHRydWU7IC8vIHAxLCBxMSBhbmQgcTIgYXJlIGNvbGxpbmVhciBhbmQgcTIgbGllcyBvbiBwMXExXG4gICAgaWYgKG8zID09PSAwICYmIG9uU2VnbWVudChwMiwgcDEsIHEyKSkgcmV0dXJuIHRydWU7IC8vIHAyLCBxMiBhbmQgcDEgYXJlIGNvbGxpbmVhciBhbmQgcDEgbGllcyBvbiBwMnEyXG4gICAgaWYgKG80ID09PSAwICYmIG9uU2VnbWVudChwMiwgcTEsIHEyKSkgcmV0dXJuIHRydWU7IC8vIHAyLCBxMiBhbmQgcTEgYXJlIGNvbGxpbmVhciBhbmQgcTEgbGllcyBvbiBwMnEyXG5cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbi8vIGZvciBjb2xsaW5lYXIgcG9pbnRzIHAsIHEsIHIsIGNoZWNrIGlmIHBvaW50IHEgbGllcyBvbiBzZWdtZW50IHByXG5mdW5jdGlvbiBvblNlZ21lbnQocCwgcSwgcikge1xuICAgIHJldHVybiBxLnggPD0gTWF0aC5tYXgocC54LCByLngpICYmIHEueCA+PSBNYXRoLm1pbihwLngsIHIueCkgJiYgcS55IDw9IE1hdGgubWF4KHAueSwgci55KSAmJiBxLnkgPj0gTWF0aC5taW4ocC55LCByLnkpO1xufVxuXG5mdW5jdGlvbiBzaWduKG51bSkge1xuICAgIHJldHVybiBudW0gPiAwID8gMSA6IG51bSA8IDAgPyAtMSA6IDA7XG59XG5cbi8vIGNoZWNrIGlmIGEgcG9seWdvbiBkaWFnb25hbCBpbnRlcnNlY3RzIGFueSBwb2x5Z29uIHNlZ21lbnRzXG5mdW5jdGlvbiBpbnRlcnNlY3RzUG9seWdvbihhLCBiKSB7XG4gICAgdmFyIHAgPSBhO1xuICAgIGRvIHtcbiAgICAgICAgaWYgKHAuaSAhPT0gYS5pICYmIHAubmV4dC5pICE9PSBhLmkgJiYgcC5pICE9PSBiLmkgJiYgcC5uZXh0LmkgIT09IGIuaSAmJlxuICAgICAgICAgICAgICAgIGludGVyc2VjdHMocCwgcC5uZXh0LCBhLCBiKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIHAgPSBwLm5leHQ7XG4gICAgfSB3aGlsZSAocCAhPT0gYSk7XG5cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbi8vIGNoZWNrIGlmIGEgcG9seWdvbiBkaWFnb25hbCBpcyBsb2NhbGx5IGluc2lkZSB0aGUgcG9seWdvblxuZnVuY3Rpb24gbG9jYWxseUluc2lkZShhLCBiKSB7XG4gICAgcmV0dXJuIGFyZWEoYS5wcmV2LCBhLCBhLm5leHQpIDwgMCA/XG4gICAgICAgIGFyZWEoYSwgYiwgYS5uZXh0KSA+PSAwICYmIGFyZWEoYSwgYS5wcmV2LCBiKSA+PSAwIDpcbiAgICAgICAgYXJlYShhLCBiLCBhLnByZXYpIDwgMCB8fCBhcmVhKGEsIGEubmV4dCwgYikgPCAwO1xufVxuXG4vLyBjaGVjayBpZiB0aGUgbWlkZGxlIHBvaW50IG9mIGEgcG9seWdvbiBkaWFnb25hbCBpcyBpbnNpZGUgdGhlIHBvbHlnb25cbmZ1bmN0aW9uIG1pZGRsZUluc2lkZShhLCBiKSB7XG4gICAgdmFyIHAgPSBhLFxuICAgICAgICBpbnNpZGUgPSBmYWxzZSxcbiAgICAgICAgcHggPSAoYS54ICsgYi54KSAvIDIsXG4gICAgICAgIHB5ID0gKGEueSArIGIueSkgLyAyO1xuICAgIGRvIHtcbiAgICAgICAgaWYgKCgocC55ID4gcHkpICE9PSAocC5uZXh0LnkgPiBweSkpICYmIHAubmV4dC55ICE9PSBwLnkgJiZcbiAgICAgICAgICAgICAgICAocHggPCAocC5uZXh0LnggLSBwLngpICogKHB5IC0gcC55KSAvIChwLm5leHQueSAtIHAueSkgKyBwLngpKVxuICAgICAgICAgICAgaW5zaWRlID0gIWluc2lkZTtcbiAgICAgICAgcCA9IHAubmV4dDtcbiAgICB9IHdoaWxlIChwICE9PSBhKTtcblxuICAgIHJldHVybiBpbnNpZGU7XG59XG5cbi8vIGxpbmsgdHdvIHBvbHlnb24gdmVydGljZXMgd2l0aCBhIGJyaWRnZTsgaWYgdGhlIHZlcnRpY2VzIGJlbG9uZyB0byB0aGUgc2FtZSByaW5nLCBpdCBzcGxpdHMgcG9seWdvbiBpbnRvIHR3bztcbi8vIGlmIG9uZSBiZWxvbmdzIHRvIHRoZSBvdXRlciByaW5nIGFuZCBhbm90aGVyIHRvIGEgaG9sZSwgaXQgbWVyZ2VzIGl0IGludG8gYSBzaW5nbGUgcmluZ1xuZnVuY3Rpb24gc3BsaXRQb2x5Z29uKGEsIGIpIHtcbiAgICB2YXIgYTIgPSBuZXcgTm9kZShhLmksIGEueCwgYS55KSxcbiAgICAgICAgYjIgPSBuZXcgTm9kZShiLmksIGIueCwgYi55KSxcbiAgICAgICAgYW4gPSBhLm5leHQsXG4gICAgICAgIGJwID0gYi5wcmV2O1xuXG4gICAgYS5uZXh0ID0gYjtcbiAgICBiLnByZXYgPSBhO1xuXG4gICAgYTIubmV4dCA9IGFuO1xuICAgIGFuLnByZXYgPSBhMjtcblxuICAgIGIyLm5leHQgPSBhMjtcbiAgICBhMi5wcmV2ID0gYjI7XG5cbiAgICBicC5uZXh0ID0gYjI7XG4gICAgYjIucHJldiA9IGJwO1xuXG4gICAgcmV0dXJuIGIyO1xufVxuXG4vLyBjcmVhdGUgYSBub2RlIGFuZCBvcHRpb25hbGx5IGxpbmsgaXQgd2l0aCBwcmV2aW91cyBvbmUgKGluIGEgY2lyY3VsYXIgZG91Ymx5IGxpbmtlZCBsaXN0KVxuZnVuY3Rpb24gaW5zZXJ0Tm9kZShpLCB4LCB5LCBsYXN0KSB7XG4gICAgdmFyIHAgPSBuZXcgTm9kZShpLCB4LCB5KTtcblxuICAgIGlmICghbGFzdCkge1xuICAgICAgICBwLnByZXYgPSBwO1xuICAgICAgICBwLm5leHQgPSBwO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgcC5uZXh0ID0gbGFzdC5uZXh0O1xuICAgICAgICBwLnByZXYgPSBsYXN0O1xuICAgICAgICBsYXN0Lm5leHQucHJldiA9IHA7XG4gICAgICAgIGxhc3QubmV4dCA9IHA7XG4gICAgfVxuICAgIHJldHVybiBwO1xufVxuXG5mdW5jdGlvbiByZW1vdmVOb2RlKHApIHtcbiAgICBwLm5leHQucHJldiA9IHAucHJldjtcbiAgICBwLnByZXYubmV4dCA9IHAubmV4dDtcblxuICAgIGlmIChwLnByZXZaKSBwLnByZXZaLm5leHRaID0gcC5uZXh0WjtcbiAgICBpZiAocC5uZXh0WikgcC5uZXh0Wi5wcmV2WiA9IHAucHJldlo7XG59XG5cbmZ1bmN0aW9uIE5vZGUoaSwgeCwgeSkge1xuICAgIC8vIHZlcnRleCBpbmRleCBpbiBjb29yZGluYXRlcyBhcnJheVxuICAgIHRoaXMuaSA9IGk7XG5cbiAgICAvLyB2ZXJ0ZXggY29vcmRpbmF0ZXNcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG5cbiAgICAvLyBwcmV2aW91cyBhbmQgbmV4dCB2ZXJ0ZXggbm9kZXMgaW4gYSBwb2x5Z29uIHJpbmdcbiAgICB0aGlzLnByZXYgPSBudWxsO1xuICAgIHRoaXMubmV4dCA9IG51bGw7XG5cbiAgICAvLyB6LW9yZGVyIGN1cnZlIHZhbHVlXG4gICAgdGhpcy56ID0gMDtcblxuICAgIC8vIHByZXZpb3VzIGFuZCBuZXh0IG5vZGVzIGluIHotb3JkZXJcbiAgICB0aGlzLnByZXZaID0gbnVsbDtcbiAgICB0aGlzLm5leHRaID0gbnVsbDtcblxuICAgIC8vIGluZGljYXRlcyB3aGV0aGVyIHRoaXMgaXMgYSBzdGVpbmVyIHBvaW50XG4gICAgdGhpcy5zdGVpbmVyID0gZmFsc2U7XG59XG5cbi8vIHJldHVybiBhIHBlcmNlbnRhZ2UgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSBwb2x5Z29uIGFyZWEgYW5kIGl0cyB0cmlhbmd1bGF0aW9uIGFyZWE7XG4vLyB1c2VkIHRvIHZlcmlmeSBjb3JyZWN0bmVzcyBvZiB0cmlhbmd1bGF0aW9uXG5lYXJjdXQuZGV2aWF0aW9uID0gZnVuY3Rpb24gKGRhdGEsIGhvbGVJbmRpY2VzLCBkaW0sIHRyaWFuZ2xlcykge1xuICAgIHZhciBoYXNIb2xlcyA9IGhvbGVJbmRpY2VzICYmIGhvbGVJbmRpY2VzLmxlbmd0aDtcbiAgICB2YXIgb3V0ZXJMZW4gPSBoYXNIb2xlcyA/IGhvbGVJbmRpY2VzWzBdICogZGltIDogZGF0YS5sZW5ndGg7XG5cbiAgICB2YXIgcG9seWdvbkFyZWEgPSBNYXRoLmFicyhzaWduZWRBcmVhKGRhdGEsIDAsIG91dGVyTGVuLCBkaW0pKTtcbiAgICBpZiAoaGFzSG9sZXMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGhvbGVJbmRpY2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgc3RhcnQgPSBob2xlSW5kaWNlc1tpXSAqIGRpbTtcbiAgICAgICAgICAgIHZhciBlbmQgPSBpIDwgbGVuIC0gMSA/IGhvbGVJbmRpY2VzW2kgKyAxXSAqIGRpbSA6IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgcG9seWdvbkFyZWEgLT0gTWF0aC5hYnMoc2lnbmVkQXJlYShkYXRhLCBzdGFydCwgZW5kLCBkaW0pKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciB0cmlhbmdsZXNBcmVhID0gMDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgdHJpYW5nbGVzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgICAgIHZhciBhID0gdHJpYW5nbGVzW2ldICogZGltO1xuICAgICAgICB2YXIgYiA9IHRyaWFuZ2xlc1tpICsgMV0gKiBkaW07XG4gICAgICAgIHZhciBjID0gdHJpYW5nbGVzW2kgKyAyXSAqIGRpbTtcbiAgICAgICAgdHJpYW5nbGVzQXJlYSArPSBNYXRoLmFicyhcbiAgICAgICAgICAgIChkYXRhW2FdIC0gZGF0YVtjXSkgKiAoZGF0YVtiICsgMV0gLSBkYXRhW2EgKyAxXSkgLVxuICAgICAgICAgICAgKGRhdGFbYV0gLSBkYXRhW2JdKSAqIChkYXRhW2MgKyAxXSAtIGRhdGFbYSArIDFdKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBvbHlnb25BcmVhID09PSAwICYmIHRyaWFuZ2xlc0FyZWEgPT09IDAgPyAwIDpcbiAgICAgICAgTWF0aC5hYnMoKHRyaWFuZ2xlc0FyZWEgLSBwb2x5Z29uQXJlYSkgLyBwb2x5Z29uQXJlYSk7XG59O1xuXG5mdW5jdGlvbiBzaWduZWRBcmVhKGRhdGEsIHN0YXJ0LCBlbmQsIGRpbSkge1xuICAgIHZhciBzdW0gPSAwO1xuICAgIGZvciAodmFyIGkgPSBzdGFydCwgaiA9IGVuZCAtIGRpbTsgaSA8IGVuZDsgaSArPSBkaW0pIHtcbiAgICAgICAgc3VtICs9IChkYXRhW2pdIC0gZGF0YVtpXSkgKiAoZGF0YVtpICsgMV0gKyBkYXRhW2ogKyAxXSk7XG4gICAgICAgIGogPSBpO1xuICAgIH1cbiAgICByZXR1cm4gc3VtO1xufVxuXG4vLyB0dXJuIGEgcG9seWdvbiBpbiBhIG11bHRpLWRpbWVuc2lvbmFsIGFycmF5IGZvcm0gKGUuZy4gYXMgaW4gR2VvSlNPTikgaW50byBhIGZvcm0gRWFyY3V0IGFjY2VwdHNcbmVhcmN1dC5mbGF0dGVuID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICB2YXIgZGltID0gZGF0YVswXVswXS5sZW5ndGgsXG4gICAgICAgIHJlc3VsdCA9IHt2ZXJ0aWNlczogW10sIGhvbGVzOiBbXSwgZGltZW5zaW9uczogZGltfSxcbiAgICAgICAgaG9sZUluZGV4ID0gMDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGRhdGFbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgZGltOyBkKyspIHJlc3VsdC52ZXJ0aWNlcy5wdXNoKGRhdGFbaV1bal1bZF0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgICAgaG9sZUluZGV4ICs9IGRhdGFbaSAtIDFdLmxlbmd0aDtcbiAgICAgICAgICAgIHJlc3VsdC5ob2xlcy5wdXNoKGhvbGVJbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG4iLCAiLy9cbi8vIFBvbHlmaWxscyBmb3IgbGVnYWN5IGVudmlyb25tZW50c1xuLy9cblxuLypcbiAqIFN1cHBvcnQgQW5kcm9pZCA0LjQueFxuICovXG5pZiAoIUFycmF5QnVmZmVyLmlzVmlldykge1xuICAgIEFycmF5QnVmZmVyLmlzVmlldyA9IChhOiBhbnkpOiBhIGlzIEFycmF5QnVmZmVyVmlldyA9PiB7XG4gICAgICAgIHJldHVybiBhICE9PSBudWxsICYmIHR5cGVvZiAoYSkgPT09ICdvYmplY3QnICYmIGEuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXI7XG4gICAgfTtcbn1cblxuLy8gRGVmaW5lIGdsb2JhbFRoaXMgaWYgbm90IGF2YWlsYWJsZS5cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9jb2x5c2V1cy9jb2x5c2V1cy5qcy9pc3N1ZXMvODZcbmlmIChcbiAgICB0eXBlb2YgKGdsb2JhbFRoaXMpID09PSBcInVuZGVmaW5lZFwiICYmXG4gICAgdHlwZW9mICh3aW5kb3cpICE9PSBcInVuZGVmaW5lZFwiXG4pIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgd2luZG93WydnbG9iYWxUaGlzJ10gPSB3aW5kb3c7XG59IiwgImV4cG9ydCBlbnVtIENsb3NlQ29kZSB7XG4gICAgQ09OU0VOVEVEID0gNDAwMCxcbiAgICBERVZNT0RFX1JFU1RBUlQgPSA0MDEwXG59XG5cbmV4cG9ydCBjbGFzcyBTZXJ2ZXJFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgcHVibGljIGNvZGU6IG51bWJlcjtcblxuICBjb25zdHJ1Y3Rvcihjb2RlOiBudW1iZXIsIG1lc3NhZ2U6IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuXG4gICAgdGhpcy5uYW1lID0gXCJTZXJ2ZXJFcnJvclwiO1xuICAgIHRoaXMuY29kZSA9IGNvZGU7XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNCBJb24gRHJpdmUgU29mdHdhcmUgTHRkLlxuICogaHR0cHM6Ly9naXRodWIuY29tL2RhcnJhY2hlcXVlc25lL25vdGVwYWNrL1xuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbiAqIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbiAqIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbiAqIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbiAqIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuICogZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcbiAqIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbiAqIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4gKiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRVxuICogU09GVFdBUkUuXG4gKi9cblxuLyoqXG4gKiBQYXRjaCBmb3IgQ29seXNldXM6XG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBub3RlcGFjay5pb0AzLjAuMVxuICpcbiAqIGFkZGVkIGBvZmZzZXRgIG9uIERlY29kZXIgY29uc3RydWN0b3IsIGZvciBtZXNzYWdlcyBhcnJpdmluZyB3aXRoIGEgY29kZVxuICogYmVmb3JlIGFjdHVhbCBtc2dwYWNrIGRhdGFcbiAqL1xuXG4vL1xuLy8gREVDT0RFUlxuLy9cblxuZnVuY3Rpb24gRGVjb2RlcihidWZmZXIsIG9mZnNldCkge1xuICAgIHRoaXMuX29mZnNldCA9IG9mZnNldDtcbiAgICBpZiAoYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgdGhpcy5fYnVmZmVyID0gYnVmZmVyO1xuICAgICAgICB0aGlzLl92aWV3ID0gbmV3IERhdGFWaWV3KHRoaXMuX2J1ZmZlcik7XG4gICAgfSBlbHNlIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcoYnVmZmVyKSkge1xuICAgICAgICB0aGlzLl9idWZmZXIgPSBidWZmZXIuYnVmZmVyO1xuICAgICAgICB0aGlzLl92aWV3ID0gbmV3IERhdGFWaWV3KHRoaXMuX2J1ZmZlciwgYnVmZmVyLmJ5dGVPZmZzZXQsIGJ1ZmZlci5ieXRlTGVuZ3RoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXJndW1lbnQnKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHV0ZjhSZWFkKHZpZXcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gICAgdmFyIHN0cmluZyA9ICcnLCBjaHIgPSAwO1xuICAgIGZvciAodmFyIGkgPSBvZmZzZXQsIGVuZCA9IG9mZnNldCArIGxlbmd0aDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICAgIHZhciBieXRlID0gdmlldy5nZXRVaW50OChpKTtcbiAgICAgICAgaWYgKChieXRlICYgMHg4MCkgPT09IDB4MDApIHtcbiAgICAgICAgICAgIHN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGUpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChieXRlICYgMHhlMCkgPT09IDB4YzApIHtcbiAgICAgICAgICAgIHN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKFxuICAgICAgICAgICAgICAgICgoYnl0ZSAmIDB4MWYpIDw8IDYpIHxcbiAgICAgICAgICAgICAgICAodmlldy5nZXRVaW50OCgrK2kpICYgMHgzZilcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKGJ5dGUgJiAweGYwKSA9PT0gMHhlMCkge1xuICAgICAgICAgICAgc3RyaW5nICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoXG4gICAgICAgICAgICAgICAgKChieXRlICYgMHgwZikgPDwgMTIpIHxcbiAgICAgICAgICAgICAgICAoKHZpZXcuZ2V0VWludDgoKytpKSAmIDB4M2YpIDw8IDYpIHxcbiAgICAgICAgICAgICAgICAoKHZpZXcuZ2V0VWludDgoKytpKSAmIDB4M2YpIDw8IDApXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChieXRlICYgMHhmOCkgPT09IDB4ZjApIHtcbiAgICAgICAgICAgIGNociA9ICgoYnl0ZSAmIDB4MDcpIDw8IDE4KSB8XG4gICAgICAgICAgICAgICAgKCh2aWV3LmdldFVpbnQ4KCsraSkgJiAweDNmKSA8PCAxMikgfFxuICAgICAgICAgICAgICAgICgodmlldy5nZXRVaW50OCgrK2kpICYgMHgzZikgPDwgNikgfFxuICAgICAgICAgICAgICAgICgodmlldy5nZXRVaW50OCgrK2kpICYgMHgzZikgPDwgMCk7XG4gICAgICAgICAgICBpZiAoY2hyID49IDB4MDEwMDAwKSB7IC8vIHN1cnJvZ2F0ZSBwYWlyXG4gICAgICAgICAgICAgICAgY2hyIC09IDB4MDEwMDAwO1xuICAgICAgICAgICAgICAgIHN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjaHIgPj4+IDEwKSArIDB4RDgwMCwgKGNociAmIDB4M0ZGKSArIDB4REMwMCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNocik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYnl0ZSAnICsgYnl0ZS50b1N0cmluZygxNikpO1xuICAgIH1cbiAgICByZXR1cm4gc3RyaW5nO1xufVxuXG5EZWNvZGVyLnByb3RvdHlwZS5fYXJyYXkgPSBmdW5jdGlvbiAobGVuZ3RoKSB7XG4gICAgdmFyIHZhbHVlID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB2YWx1ZVtpXSA9IHRoaXMuX3BhcnNlKCk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn07XG5cbkRlY29kZXIucHJvdG90eXBlLl9tYXAgPSBmdW5jdGlvbiAobGVuZ3RoKSB7XG4gICAgdmFyIGtleSA9ICcnLCB2YWx1ZSA9IHt9O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAga2V5ID0gdGhpcy5fcGFyc2UoKTtcbiAgICAgICAgdmFsdWVba2V5XSA9IHRoaXMuX3BhcnNlKCk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn07XG5cbkRlY29kZXIucHJvdG90eXBlLl9zdHIgPSBmdW5jdGlvbiAobGVuZ3RoKSB7XG4gICAgdmFyIHZhbHVlID0gdXRmOFJlYWQodGhpcy5fdmlldywgdGhpcy5fb2Zmc2V0LCBsZW5ndGgpO1xuICAgIHRoaXMuX29mZnNldCArPSBsZW5ndGg7XG4gICAgcmV0dXJuIHZhbHVlO1xufTtcblxuRGVjb2Rlci5wcm90b3R5cGUuX2JpbiA9IGZ1bmN0aW9uIChsZW5ndGgpIHtcbiAgICB2YXIgdmFsdWUgPSB0aGlzLl9idWZmZXIuc2xpY2UodGhpcy5fb2Zmc2V0LCB0aGlzLl9vZmZzZXQgKyBsZW5ndGgpO1xuICAgIHRoaXMuX29mZnNldCArPSBsZW5ndGg7XG4gICAgcmV0dXJuIHZhbHVlO1xufTtcblxuRGVjb2Rlci5wcm90b3R5cGUuX3BhcnNlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBwcmVmaXggPSB0aGlzLl92aWV3LmdldFVpbnQ4KHRoaXMuX29mZnNldCsrKTtcbiAgICB2YXIgdmFsdWUsIGxlbmd0aCA9IDAsIHR5cGUgPSAwLCBoaSA9IDAsIGxvID0gMDtcblxuICAgIGlmIChwcmVmaXggPCAweGMwKSB7XG4gICAgICAgIC8vIHBvc2l0aXZlIGZpeGludFxuICAgICAgICBpZiAocHJlZml4IDwgMHg4MCkge1xuICAgICAgICAgICAgcmV0dXJuIHByZWZpeDtcbiAgICAgICAgfVxuICAgICAgICAvLyBmaXhtYXBcbiAgICAgICAgaWYgKHByZWZpeCA8IDB4OTApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tYXAocHJlZml4ICYgMHgwZik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZml4YXJyYXlcbiAgICAgICAgaWYgKHByZWZpeCA8IDB4YTApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hcnJheShwcmVmaXggJiAweDBmKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBmaXhzdHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0cihwcmVmaXggJiAweDFmKTtcbiAgICB9XG5cbiAgICAvLyBuZWdhdGl2ZSBmaXhpbnRcbiAgICBpZiAocHJlZml4ID4gMHhkZikge1xuICAgICAgICByZXR1cm4gKDB4ZmYgLSBwcmVmaXggKyAxKSAqIC0xO1xuICAgIH1cblxuICAgIHN3aXRjaCAocHJlZml4KSB7XG4gICAgICAgICAgICAvLyBuaWxcbiAgICAgICAgY2FzZSAweGMwOlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAvLyBmYWxzZVxuICAgICAgICBjYXNlIDB4YzI6XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAvLyB0cnVlXG4gICAgICAgIGNhc2UgMHhjMzpcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICAgICAgICAvLyBiaW5cbiAgICAgICAgY2FzZSAweGM0OlxuICAgICAgICAgICAgbGVuZ3RoID0gdGhpcy5fdmlldy5nZXRVaW50OCh0aGlzLl9vZmZzZXQpO1xuICAgICAgICAgICAgdGhpcy5fb2Zmc2V0ICs9IDE7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYmluKGxlbmd0aCk7XG4gICAgICAgIGNhc2UgMHhjNTpcbiAgICAgICAgICAgIGxlbmd0aCA9IHRoaXMuX3ZpZXcuZ2V0VWludDE2KHRoaXMuX29mZnNldCk7XG4gICAgICAgICAgICB0aGlzLl9vZmZzZXQgKz0gMjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9iaW4obGVuZ3RoKTtcbiAgICAgICAgY2FzZSAweGM2OlxuICAgICAgICAgICAgbGVuZ3RoID0gdGhpcy5fdmlldy5nZXRVaW50MzIodGhpcy5fb2Zmc2V0KTtcbiAgICAgICAgICAgIHRoaXMuX29mZnNldCArPSA0O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2JpbihsZW5ndGgpO1xuXG4gICAgICAgICAgICAvLyBleHRcbiAgICAgICAgY2FzZSAweGM3OlxuICAgICAgICAgICAgbGVuZ3RoID0gdGhpcy5fdmlldy5nZXRVaW50OCh0aGlzLl9vZmZzZXQpO1xuICAgICAgICAgICAgdHlwZSA9IHRoaXMuX3ZpZXcuZ2V0SW50OCh0aGlzLl9vZmZzZXQgKyAxKTtcbiAgICAgICAgICAgIHRoaXMuX29mZnNldCArPSAyO1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgLy8gdGltZXN0YW1wIDk2XG4gICAgICAgICAgICAgICAgdmFyIG5zID0gdGhpcy5fdmlldy5nZXRVaW50MzIodGhpcy5fb2Zmc2V0KTtcbiAgICAgICAgICAgICAgICBoaSA9IHRoaXMuX3ZpZXcuZ2V0SW50MzIodGhpcy5fb2Zmc2V0ICsgNCk7XG4gICAgICAgICAgICAgICAgbG8gPSB0aGlzLl92aWV3LmdldFVpbnQzMih0aGlzLl9vZmZzZXQgKyA4KTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vZmZzZXQgKz0gMTI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKChoaSAqIDB4MTAwMDAwMDAwICsgbG8pICogMWUzICsgbnMgLyAxZTYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFt0eXBlLCB0aGlzLl9iaW4obGVuZ3RoKV07XG4gICAgICAgIGNhc2UgMHhjODpcbiAgICAgICAgICAgIGxlbmd0aCA9IHRoaXMuX3ZpZXcuZ2V0VWludDE2KHRoaXMuX29mZnNldCk7XG4gICAgICAgICAgICB0eXBlID0gdGhpcy5fdmlldy5nZXRJbnQ4KHRoaXMuX29mZnNldCArIDIpO1xuICAgICAgICAgICAgdGhpcy5fb2Zmc2V0ICs9IDM7XG4gICAgICAgICAgICByZXR1cm4gW3R5cGUsIHRoaXMuX2JpbihsZW5ndGgpXTtcbiAgICAgICAgY2FzZSAweGM5OlxuICAgICAgICAgICAgbGVuZ3RoID0gdGhpcy5fdmlldy5nZXRVaW50MzIodGhpcy5fb2Zmc2V0KTtcbiAgICAgICAgICAgIHR5cGUgPSB0aGlzLl92aWV3LmdldEludDgodGhpcy5fb2Zmc2V0ICsgNCk7XG4gICAgICAgICAgICB0aGlzLl9vZmZzZXQgKz0gNTtcbiAgICAgICAgICAgIHJldHVybiBbdHlwZSwgdGhpcy5fYmluKGxlbmd0aCldO1xuXG4gICAgICAgICAgICAvLyBmbG9hdFxuICAgICAgICBjYXNlIDB4Y2E6XG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMuX3ZpZXcuZ2V0RmxvYXQzMih0aGlzLl9vZmZzZXQpO1xuICAgICAgICAgICAgdGhpcy5fb2Zmc2V0ICs9IDQ7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIGNhc2UgMHhjYjpcbiAgICAgICAgICAgIHZhbHVlID0gdGhpcy5fdmlldy5nZXRGbG9hdDY0KHRoaXMuX29mZnNldCk7XG4gICAgICAgICAgICB0aGlzLl9vZmZzZXQgKz0gODtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcblxuICAgICAgICAgICAgLy8gdWludFxuICAgICAgICBjYXNlIDB4Y2M6XG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMuX3ZpZXcuZ2V0VWludDgodGhpcy5fb2Zmc2V0KTtcbiAgICAgICAgICAgIHRoaXMuX29mZnNldCArPSAxO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICBjYXNlIDB4Y2Q6XG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMuX3ZpZXcuZ2V0VWludDE2KHRoaXMuX29mZnNldCk7XG4gICAgICAgICAgICB0aGlzLl9vZmZzZXQgKz0gMjtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgY2FzZSAweGNlOlxuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLl92aWV3LmdldFVpbnQzMih0aGlzLl9vZmZzZXQpO1xuICAgICAgICAgICAgdGhpcy5fb2Zmc2V0ICs9IDQ7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIGNhc2UgMHhjZjpcbiAgICAgICAgICAgIGhpID0gdGhpcy5fdmlldy5nZXRVaW50MzIodGhpcy5fb2Zmc2V0KSAqIE1hdGgucG93KDIsIDMyKTtcbiAgICAgICAgICAgIGxvID0gdGhpcy5fdmlldy5nZXRVaW50MzIodGhpcy5fb2Zmc2V0ICsgNCk7XG4gICAgICAgICAgICB0aGlzLl9vZmZzZXQgKz0gODtcbiAgICAgICAgICAgIHJldHVybiBoaSArIGxvO1xuXG4gICAgICAgICAgICAvLyBpbnRcbiAgICAgICAgY2FzZSAweGQwOlxuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLl92aWV3LmdldEludDgodGhpcy5fb2Zmc2V0KTtcbiAgICAgICAgICAgIHRoaXMuX29mZnNldCArPSAxO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICBjYXNlIDB4ZDE6XG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMuX3ZpZXcuZ2V0SW50MTYodGhpcy5fb2Zmc2V0KTtcbiAgICAgICAgICAgIHRoaXMuX29mZnNldCArPSAyO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICBjYXNlIDB4ZDI6XG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMuX3ZpZXcuZ2V0SW50MzIodGhpcy5fb2Zmc2V0KTtcbiAgICAgICAgICAgIHRoaXMuX29mZnNldCArPSA0O1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICBjYXNlIDB4ZDM6XG4gICAgICAgICAgICBoaSA9IHRoaXMuX3ZpZXcuZ2V0SW50MzIodGhpcy5fb2Zmc2V0KSAqIE1hdGgucG93KDIsIDMyKTtcbiAgICAgICAgICAgIGxvID0gdGhpcy5fdmlldy5nZXRVaW50MzIodGhpcy5fb2Zmc2V0ICsgNCk7XG4gICAgICAgICAgICB0aGlzLl9vZmZzZXQgKz0gODtcbiAgICAgICAgICAgIHJldHVybiBoaSArIGxvO1xuXG4gICAgICAgICAgICAvLyBmaXhleHRcbiAgICAgICAgY2FzZSAweGQ0OlxuICAgICAgICAgICAgdHlwZSA9IHRoaXMuX3ZpZXcuZ2V0SW50OCh0aGlzLl9vZmZzZXQpO1xuICAgICAgICAgICAgdGhpcy5fb2Zmc2V0ICs9IDE7XG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gMHgwMCkge1xuICAgICAgICAgICAgICAgIC8vIGN1c3RvbSBlbmNvZGluZyBmb3IgJ3VuZGVmaW5lZCcgKGtlcHQgZm9yIGJhY2t3YXJkLWNvbXBhdGliaWxpdHkpXG4gICAgICAgICAgICAgICAgdGhpcy5fb2Zmc2V0ICs9IDE7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBbdHlwZSwgdGhpcy5fYmluKDEpXTtcbiAgICAgICAgY2FzZSAweGQ1OlxuICAgICAgICAgICAgdHlwZSA9IHRoaXMuX3ZpZXcuZ2V0SW50OCh0aGlzLl9vZmZzZXQpO1xuICAgICAgICAgICAgdGhpcy5fb2Zmc2V0ICs9IDE7XG4gICAgICAgICAgICByZXR1cm4gW3R5cGUsIHRoaXMuX2JpbigyKV07XG4gICAgICAgIGNhc2UgMHhkNjpcbiAgICAgICAgICAgIHR5cGUgPSB0aGlzLl92aWV3LmdldEludDgodGhpcy5fb2Zmc2V0KTtcbiAgICAgICAgICAgIHRoaXMuX29mZnNldCArPSAxO1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgLy8gdGltZXN0YW1wIDMyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB0aGlzLl92aWV3LmdldFVpbnQzMih0aGlzLl9vZmZzZXQpO1xuICAgICAgICAgICAgICAgIHRoaXMuX29mZnNldCArPSA0O1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSh2YWx1ZSAqIDFlMyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gW3R5cGUsIHRoaXMuX2Jpbig0KV07XG4gICAgICAgIGNhc2UgMHhkNzpcbiAgICAgICAgICAgIHR5cGUgPSB0aGlzLl92aWV3LmdldEludDgodGhpcy5fb2Zmc2V0KTtcbiAgICAgICAgICAgIHRoaXMuX29mZnNldCArPSAxO1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09IDB4MDApIHtcbiAgICAgICAgICAgICAgICAvLyBjdXN0b20gZGF0ZSBlbmNvZGluZyAoa2VwdCBmb3IgYmFja3dhcmQtY29tcGF0aWJpbGl0eSlcbiAgICAgICAgICAgICAgICBoaSA9IHRoaXMuX3ZpZXcuZ2V0SW50MzIodGhpcy5fb2Zmc2V0KSAqIE1hdGgucG93KDIsIDMyKTtcbiAgICAgICAgICAgICAgICBsbyA9IHRoaXMuX3ZpZXcuZ2V0VWludDMyKHRoaXMuX29mZnNldCArIDQpO1xuICAgICAgICAgICAgICAgIHRoaXMuX29mZnNldCArPSA4O1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShoaSArIGxvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlID09PSAtMSkge1xuICAgICAgICAgICAgICAgIC8vIHRpbWVzdGFtcCA2NFxuICAgICAgICAgICAgICAgIGhpID0gdGhpcy5fdmlldy5nZXRVaW50MzIodGhpcy5fb2Zmc2V0KTtcbiAgICAgICAgICAgICAgICBsbyA9IHRoaXMuX3ZpZXcuZ2V0VWludDMyKHRoaXMuX29mZnNldCArIDQpO1xuICAgICAgICAgICAgICAgIHRoaXMuX29mZnNldCArPSA4O1xuICAgICAgICAgICAgICAgIHZhciBzID0gKGhpICYgMHgzKSAqIDB4MTAwMDAwMDAwICsgbG87XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHMgKiAxZTMgKyAoaGkgPj4+IDIpIC8gMWU2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBbdHlwZSwgdGhpcy5fYmluKDgpXTtcbiAgICAgICAgY2FzZSAweGQ4OlxuICAgICAgICAgICAgdHlwZSA9IHRoaXMuX3ZpZXcuZ2V0SW50OCh0aGlzLl9vZmZzZXQpO1xuICAgICAgICAgICAgdGhpcy5fb2Zmc2V0ICs9IDE7XG4gICAgICAgICAgICByZXR1cm4gW3R5cGUsIHRoaXMuX2JpbigxNildO1xuXG4gICAgICAgICAgICAvLyBzdHJcbiAgICAgICAgY2FzZSAweGQ5OlxuICAgICAgICAgICAgbGVuZ3RoID0gdGhpcy5fdmlldy5nZXRVaW50OCh0aGlzLl9vZmZzZXQpO1xuICAgICAgICAgICAgdGhpcy5fb2Zmc2V0ICs9IDE7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RyKGxlbmd0aCk7XG4gICAgICAgIGNhc2UgMHhkYTpcbiAgICAgICAgICAgIGxlbmd0aCA9IHRoaXMuX3ZpZXcuZ2V0VWludDE2KHRoaXMuX29mZnNldCk7XG4gICAgICAgICAgICB0aGlzLl9vZmZzZXQgKz0gMjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdHIobGVuZ3RoKTtcbiAgICAgICAgY2FzZSAweGRiOlxuICAgICAgICAgICAgbGVuZ3RoID0gdGhpcy5fdmlldy5nZXRVaW50MzIodGhpcy5fb2Zmc2V0KTtcbiAgICAgICAgICAgIHRoaXMuX29mZnNldCArPSA0O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0cihsZW5ndGgpO1xuXG4gICAgICAgICAgICAvLyBhcnJheVxuICAgICAgICBjYXNlIDB4ZGM6XG4gICAgICAgICAgICBsZW5ndGggPSB0aGlzLl92aWV3LmdldFVpbnQxNih0aGlzLl9vZmZzZXQpO1xuICAgICAgICAgICAgdGhpcy5fb2Zmc2V0ICs9IDI7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYXJyYXkobGVuZ3RoKTtcbiAgICAgICAgY2FzZSAweGRkOlxuICAgICAgICAgICAgbGVuZ3RoID0gdGhpcy5fdmlldy5nZXRVaW50MzIodGhpcy5fb2Zmc2V0KTtcbiAgICAgICAgICAgIHRoaXMuX29mZnNldCArPSA0O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FycmF5KGxlbmd0aCk7XG5cbiAgICAgICAgICAgIC8vIG1hcFxuICAgICAgICBjYXNlIDB4ZGU6XG4gICAgICAgICAgICBsZW5ndGggPSB0aGlzLl92aWV3LmdldFVpbnQxNih0aGlzLl9vZmZzZXQpO1xuICAgICAgICAgICAgdGhpcy5fb2Zmc2V0ICs9IDI7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbWFwKGxlbmd0aCk7XG4gICAgICAgIGNhc2UgMHhkZjpcbiAgICAgICAgICAgIGxlbmd0aCA9IHRoaXMuX3ZpZXcuZ2V0VWludDMyKHRoaXMuX29mZnNldCk7XG4gICAgICAgICAgICB0aGlzLl9vZmZzZXQgKz0gNDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tYXAobGVuZ3RoKTtcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBwYXJzZScpO1xufTtcblxuZnVuY3Rpb24gZGVjb2RlKGJ1ZmZlciwgb2Zmc2V0ID0gMCkge1xuICAgIHZhciBkZWNvZGVyID0gbmV3IERlY29kZXIoYnVmZmVyLCBvZmZzZXQpO1xuICAgIHZhciB2YWx1ZSA9IGRlY29kZXIuX3BhcnNlKCk7XG4gICAgaWYgKGRlY29kZXIuX29mZnNldCAhPT0gYnVmZmVyLmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKChidWZmZXIuYnl0ZUxlbmd0aCAtIGRlY29kZXIuX29mZnNldCkgKyAnIHRyYWlsaW5nIGJ5dGVzJyk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cblxuLy9cbi8vIEVOQ09ERVJcbi8vXG5cbnZhciBUSU1FU1RBTVAzMl9NQVhfU0VDID0gMHgxMDAwMDAwMDAgLSAxOyAvLyAzMi1iaXQgdW5zaWduZWQgaW50XG52YXIgVElNRVNUQU1QNjRfTUFYX1NFQyA9IDB4NDAwMDAwMDAwIC0gMTsgLy8gMzQtYml0IHVuc2lnbmVkIGludFxuXG5mdW5jdGlvbiB1dGY4V3JpdGUodmlldywgb2Zmc2V0LCBzdHIpIHtcbiAgICB2YXIgYyA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdHIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICAgICAgaWYgKGMgPCAweDgwKSB7XG4gICAgICAgICAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCBjKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjIDwgMHg4MDApIHtcbiAgICAgICAgICAgIHZpZXcuc2V0VWludDgob2Zmc2V0KyssIDB4YzAgfCAoYyA+PiA2KSk7XG4gICAgICAgICAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCAweDgwIHwgKGMgJiAweDNmKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYyA8IDB4ZDgwMCB8fCBjID49IDB4ZTAwMCkge1xuICAgICAgICAgICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgMHhlMCB8IChjID4+IDEyKSk7XG4gICAgICAgICAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCAweDgwIHwgKGMgPj4gNikgJiAweDNmKTtcbiAgICAgICAgICAgIHZpZXcuc2V0VWludDgob2Zmc2V0KyssIDB4ODAgfCAoYyAmIDB4M2YpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKCgoYyAmIDB4M2ZmKSA8PCAxMCkgfCAoc3RyLmNoYXJDb2RlQXQoaSkgJiAweDNmZikpO1xuICAgICAgICAgICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgMHhmMCB8IChjID4+IDE4KSk7XG4gICAgICAgICAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCAweDgwIHwgKGMgPj4gMTIpICYgMHgzZik7XG4gICAgICAgICAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCAweDgwIHwgKGMgPj4gNikgJiAweDNmKTtcbiAgICAgICAgICAgIHZpZXcuc2V0VWludDgob2Zmc2V0KyssIDB4ODAgfCAoYyAmIDB4M2YpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gdXRmOExlbmd0aChzdHIpIHtcbiAgICB2YXIgYyA9IDAsIGxlbmd0aCA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdHIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICAgICAgaWYgKGMgPCAweDgwKSB7XG4gICAgICAgICAgICBsZW5ndGggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjIDwgMHg4MDApIHtcbiAgICAgICAgICAgIGxlbmd0aCArPSAyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGMgPCAweGQ4MDAgfHwgYyA+PSAweGUwMDApIHtcbiAgICAgICAgICAgIGxlbmd0aCArPSAzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgbGVuZ3RoICs9IDQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxlbmd0aDtcbn1cblxuZnVuY3Rpb24gX2VuY29kZShieXRlcywgZGVmZXJzLCB2YWx1ZSkge1xuICAgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlLCBpID0gMCwgbCA9IDAsIGhpID0gMCwgbG8gPSAwLCBsZW5ndGggPSAwLCBzaXplID0gMDtcblxuICAgIGlmICh0eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgICBsZW5ndGggPSB1dGY4TGVuZ3RoKHZhbHVlKTtcblxuICAgICAgICAvLyBmaXhzdHJcbiAgICAgICAgaWYgKGxlbmd0aCA8IDB4MjApIHtcbiAgICAgICAgICAgIGJ5dGVzLnB1c2gobGVuZ3RoIHwgMHhhMCk7XG4gICAgICAgICAgICBzaXplID0gMTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzdHIgOFxuICAgICAgICBlbHNlIGlmIChsZW5ndGggPCAweDEwMCkge1xuICAgICAgICAgICAgYnl0ZXMucHVzaCgweGQ5LCBsZW5ndGgpO1xuICAgICAgICAgICAgc2l6ZSA9IDI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc3RyIDE2XG4gICAgICAgIGVsc2UgaWYgKGxlbmd0aCA8IDB4MTAwMDApIHtcbiAgICAgICAgICAgIGJ5dGVzLnB1c2goMHhkYSwgbGVuZ3RoID4+IDgsIGxlbmd0aCk7XG4gICAgICAgICAgICBzaXplID0gMztcbiAgICAgICAgfVxuICAgICAgICAvLyBzdHIgMzJcbiAgICAgICAgZWxzZSBpZiAobGVuZ3RoIDwgMHgxMDAwMDAwMDApIHtcbiAgICAgICAgICAgIGJ5dGVzLnB1c2goMHhkYiwgbGVuZ3RoID4+IDI0LCBsZW5ndGggPj4gMTYsIGxlbmd0aCA+PiA4LCBsZW5ndGgpO1xuICAgICAgICAgICAgc2l6ZSA9IDU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N0cmluZyB0b28gbG9uZycpO1xuICAgICAgICB9XG4gICAgICAgIGRlZmVycy5wdXNoKHsgX3N0cjogdmFsdWUsIF9sZW5ndGg6IGxlbmd0aCwgX29mZnNldDogYnl0ZXMubGVuZ3RoIH0pO1xuICAgICAgICByZXR1cm4gc2l6ZSArIGxlbmd0aDtcbiAgICB9XG4gICAgaWYgKHR5cGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgIC8vIFRPRE86IGVuY29kZSB0byBmbG9hdCAzMj9cblxuICAgICAgICAvLyBmbG9hdCA2NFxuICAgICAgICBpZiAoTWF0aC5mbG9vcih2YWx1ZSkgIT09IHZhbHVlIHx8ICFpc0Zpbml0ZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGJ5dGVzLnB1c2goMHhjYik7XG4gICAgICAgICAgICBkZWZlcnMucHVzaCh7IF9mbG9hdDogdmFsdWUsIF9sZW5ndGg6IDgsIF9vZmZzZXQ6IGJ5dGVzLmxlbmd0aCB9KTtcbiAgICAgICAgICAgIHJldHVybiA5O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhbHVlID49IDApIHtcbiAgICAgICAgICAgIC8vIHBvc2l0aXZlIGZpeG51bVxuICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHg4MCkge1xuICAgICAgICAgICAgICAgIGJ5dGVzLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdWludCA4XG4gICAgICAgICAgICBpZiAodmFsdWUgPCAweDEwMCkge1xuICAgICAgICAgICAgICAgIGJ5dGVzLnB1c2goMHhjYywgdmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdWludCAxNlxuICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHgxMDAwMCkge1xuICAgICAgICAgICAgICAgIGJ5dGVzLnB1c2goMHhjZCwgdmFsdWUgPj4gOCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiAzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdWludCAzMlxuICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHgxMDAwMDAwMDApIHtcbiAgICAgICAgICAgICAgICBieXRlcy5wdXNoKDB4Y2UsIHZhbHVlID4+IDI0LCB2YWx1ZSA+PiAxNiwgdmFsdWUgPj4gOCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiA1O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdWludCA2NFxuICAgICAgICAgICAgaGkgPSAodmFsdWUgLyBNYXRoLnBvdygyLCAzMikpID4+IDA7XG4gICAgICAgICAgICBsbyA9IHZhbHVlID4+PiAwO1xuICAgICAgICAgICAgYnl0ZXMucHVzaCgweGNmLCBoaSA+PiAyNCwgaGkgPj4gMTYsIGhpID4+IDgsIGhpLCBsbyA+PiAyNCwgbG8gPj4gMTYsIGxvID4+IDgsIGxvKTtcbiAgICAgICAgICAgIHJldHVybiA5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gbmVnYXRpdmUgZml4bnVtXG4gICAgICAgICAgICBpZiAodmFsdWUgPj0gLTB4MjApIHtcbiAgICAgICAgICAgICAgICBieXRlcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGludCA4XG4gICAgICAgICAgICBpZiAodmFsdWUgPj0gLTB4ODApIHtcbiAgICAgICAgICAgICAgICBieXRlcy5wdXNoKDB4ZDAsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGludCAxNlxuICAgICAgICAgICAgaWYgKHZhbHVlID49IC0weDgwMDApIHtcbiAgICAgICAgICAgICAgICBieXRlcy5wdXNoKDB4ZDEsIHZhbHVlID4+IDgsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gMztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGludCAzMlxuICAgICAgICAgICAgaWYgKHZhbHVlID49IC0weDgwMDAwMDAwKSB7XG4gICAgICAgICAgICAgICAgYnl0ZXMucHVzaCgweGQyLCB2YWx1ZSA+PiAyNCwgdmFsdWUgPj4gMTYsIHZhbHVlID4+IDgsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gNTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGludCA2NFxuICAgICAgICAgICAgaGkgPSBNYXRoLmZsb29yKHZhbHVlIC8gTWF0aC5wb3coMiwgMzIpKTtcbiAgICAgICAgICAgIGxvID0gdmFsdWUgPj4+IDA7XG4gICAgICAgICAgICBieXRlcy5wdXNoKDB4ZDMsIGhpID4+IDI0LCBoaSA+PiAxNiwgaGkgPj4gOCwgaGksIGxvID4+IDI0LCBsbyA+PiAxNiwgbG8gPj4gOCwgbG8pO1xuICAgICAgICAgICAgcmV0dXJuIDk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIC8vIG5pbFxuICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGJ5dGVzLnB1c2goMHhjMCk7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgbGVuZ3RoID0gdmFsdWUubGVuZ3RoO1xuXG4gICAgICAgICAgICAvLyBmaXhhcnJheVxuICAgICAgICAgICAgaWYgKGxlbmd0aCA8IDB4MTApIHtcbiAgICAgICAgICAgICAgICBieXRlcy5wdXNoKGxlbmd0aCB8IDB4OTApO1xuICAgICAgICAgICAgICAgIHNpemUgPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gYXJyYXkgMTZcbiAgICAgICAgICAgIGVsc2UgaWYgKGxlbmd0aCA8IDB4MTAwMDApIHtcbiAgICAgICAgICAgICAgICBieXRlcy5wdXNoKDB4ZGMsIGxlbmd0aCA+PiA4LCBsZW5ndGgpO1xuICAgICAgICAgICAgICAgIHNpemUgPSAzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gYXJyYXkgMzJcbiAgICAgICAgICAgIGVsc2UgaWYgKGxlbmd0aCA8IDB4MTAwMDAwMDAwKSB7XG4gICAgICAgICAgICAgICAgYnl0ZXMucHVzaCgweGRkLCBsZW5ndGggPj4gMjQsIGxlbmd0aCA+PiAxNiwgbGVuZ3RoID4+IDgsIGxlbmd0aCk7XG4gICAgICAgICAgICAgICAgc2l6ZSA9IDU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQXJyYXkgdG9vIGxhcmdlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBzaXplICs9IF9lbmNvZGUoYnl0ZXMsIGRlZmVycywgdmFsdWVbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICB2YXIgbXMgPSB2YWx1ZS5nZXRUaW1lKCk7XG4gICAgICAgICAgICB2YXIgcyA9IE1hdGguZmxvb3IobXMgLyAxZTMpO1xuICAgICAgICAgICAgdmFyIG5zID0gKG1zIC0gcyAqIDFlMykgKiAxZTY7XG5cbiAgICAgICAgICAgIGlmIChzID49IDAgJiYgbnMgPj0gMCAmJiBzIDw9IFRJTUVTVEFNUDY0X01BWF9TRUMpIHtcbiAgICAgICAgICAgICAgICBpZiAobnMgPT09IDAgJiYgcyA8PSBUSU1FU1RBTVAzMl9NQVhfU0VDKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRpbWVzdGFtcCAzMlxuICAgICAgICAgICAgICAgICAgICBieXRlcy5wdXNoKDB4ZDYsIDB4ZmYsIHMgPj4gMjQsIHMgPj4gMTYsIHMgPj4gOCwgcyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA2O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRpbWVzdGFtcCA2NFxuICAgICAgICAgICAgICAgICAgICBoaSA9IHMgLyAweDEwMDAwMDAwMDtcbiAgICAgICAgICAgICAgICAgICAgbG8gPSBzICYgMHhmZmZmZmZmZjtcbiAgICAgICAgICAgICAgICAgICAgYnl0ZXMucHVzaCgweGQ3LCAweGZmLCBucyA+PiAyMiwgbnMgPj4gMTQsIG5zID4+IDYsIGhpLCBsbyA+PiAyNCwgbG8gPj4gMTYsIGxvID4+IDgsIGxvKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDEwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gdGltZXN0YW1wIDk2XG4gICAgICAgICAgICAgICAgaGkgPSBNYXRoLmZsb29yKHMgLyAweDEwMDAwMDAwMCk7XG4gICAgICAgICAgICAgICAgbG8gPSBzID4+PiAwO1xuICAgICAgICAgICAgICAgIGJ5dGVzLnB1c2goMHhjNywgMHgwYywgMHhmZiwgbnMgPj4gMjQsIG5zID4+IDE2LCBucyA+PiA4LCBucywgaGkgPj4gMjQsIGhpID4+IDE2LCBoaSA+PiA4LCBoaSwgbG8gPj4gMjQsIGxvID4+IDE2LCBsbyA+PiA4LCBsbyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDE1O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICAgIGxlbmd0aCA9IHZhbHVlLmJ5dGVMZW5ndGg7XG5cbiAgICAgICAgICAgIC8vIGJpbiA4XG4gICAgICAgICAgICBpZiAobGVuZ3RoIDwgMHgxMDApIHtcbiAgICAgICAgICAgICAgICBieXRlcy5wdXNoKDB4YzQsIGxlbmd0aCk7XG4gICAgICAgICAgICAgICAgc2l6ZSA9IDI7XG4gICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAvLyBiaW4gMTZcbiAgICAgICAgICAgICAgICBpZiAobGVuZ3RoIDwgMHgxMDAwMCkge1xuICAgICAgICAgICAgICAgICAgICBieXRlcy5wdXNoKDB4YzUsIGxlbmd0aCA+PiA4LCBsZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICBzaXplID0gMztcbiAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAvLyBiaW4gMzJcbiAgICAgICAgICAgICAgICBpZiAobGVuZ3RoIDwgMHgxMDAwMDAwMDApIHtcbiAgICAgICAgICAgICAgICAgICAgYnl0ZXMucHVzaCgweGM2LCBsZW5ndGggPj4gMjQsIGxlbmd0aCA+PiAxNiwgbGVuZ3RoID4+IDgsIGxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIHNpemUgPSA1O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQnVmZmVyIHRvbyBsYXJnZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmVycy5wdXNoKHsgX2JpbjogdmFsdWUsIF9sZW5ndGg6IGxlbmd0aCwgX29mZnNldDogYnl0ZXMubGVuZ3RoIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHNpemUgKyBsZW5ndGg7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlLnRvSlNPTiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIF9lbmNvZGUoYnl0ZXMsIGRlZmVycywgdmFsdWUudG9KU09OKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGtleXMgPSBbXSwga2V5ID0gJyc7XG5cbiAgICAgICAgdmFyIGFsbEtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSk7XG4gICAgICAgIGZvciAoaSA9IDAsIGwgPSBhbGxLZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAga2V5ID0gYWxsS2V5c1tpXTtcbiAgICAgICAgICAgIGlmICh2YWx1ZVtrZXldICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHZhbHVlW2tleV0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZW5ndGggPSBrZXlzLmxlbmd0aDtcblxuICAgICAgICAvLyBmaXhtYXBcbiAgICAgICAgaWYgKGxlbmd0aCA8IDB4MTApIHtcbiAgICAgICAgICAgIGJ5dGVzLnB1c2gobGVuZ3RoIHwgMHg4MCk7XG4gICAgICAgICAgICBzaXplID0gMTtcbiAgICAgICAgfVxuICAgICAgICAvLyBtYXAgMTZcbiAgICAgICAgZWxzZSBpZiAobGVuZ3RoIDwgMHgxMDAwMCkge1xuICAgICAgICAgICAgYnl0ZXMucHVzaCgweGRlLCBsZW5ndGggPj4gOCwgbGVuZ3RoKTtcbiAgICAgICAgICAgIHNpemUgPSAzO1xuICAgICAgICB9XG4gICAgICAgIC8vIG1hcCAzMlxuICAgICAgICBlbHNlIGlmIChsZW5ndGggPCAweDEwMDAwMDAwMCkge1xuICAgICAgICAgICAgYnl0ZXMucHVzaCgweGRmLCBsZW5ndGggPj4gMjQsIGxlbmd0aCA+PiAxNiwgbGVuZ3RoID4+IDgsIGxlbmd0aCk7XG4gICAgICAgICAgICBzaXplID0gNTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignT2JqZWN0IHRvbyBsYXJnZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgc2l6ZSArPSBfZW5jb2RlKGJ5dGVzLCBkZWZlcnMsIGtleSk7XG4gICAgICAgICAgICBzaXplICs9IF9lbmNvZGUoYnl0ZXMsIGRlZmVycywgdmFsdWVba2V5XSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgfVxuICAgIC8vIGZhbHNlL3RydWVcbiAgICBpZiAodHlwZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIGJ5dGVzLnB1c2godmFsdWUgPyAweGMzIDogMHhjMik7XG4gICAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICBpZiAodHlwZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgYnl0ZXMucHVzaCgweGMwKTtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICAgIC8vIGN1c3RvbSB0eXBlcyBsaWtlIEJpZ0ludCAodHlwZW9mIHZhbHVlID09PSAnYmlnaW50JylcbiAgICBpZiAodHlwZW9mIHZhbHVlLnRvSlNPTiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gX2VuY29kZShieXRlcywgZGVmZXJzLCB2YWx1ZS50b0pTT04oKSk7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGVuY29kZScpO1xufVxuXG5mdW5jdGlvbiBlbmNvZGUodmFsdWUpIHtcbiAgICB2YXIgYnl0ZXMgPSBbXTtcbiAgICB2YXIgZGVmZXJzID0gW107XG4gICAgdmFyIHNpemUgPSBfZW5jb2RlKGJ5dGVzLCBkZWZlcnMsIHZhbHVlKTtcbiAgICB2YXIgYnVmID0gbmV3IEFycmF5QnVmZmVyKHNpemUpO1xuICAgIHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KGJ1Zik7XG5cbiAgICB2YXIgZGVmZXJJbmRleCA9IDA7XG4gICAgdmFyIGRlZmVyV3JpdHRlbiA9IDA7XG4gICAgdmFyIG5leHRPZmZzZXQgPSAtMTtcbiAgICBpZiAoZGVmZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgbmV4dE9mZnNldCA9IGRlZmVyc1swXS5fb2Zmc2V0O1xuICAgIH1cblxuICAgIHZhciBkZWZlciwgZGVmZXJMZW5ndGggPSAwLCBvZmZzZXQgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gYnl0ZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZpZXcuc2V0VWludDgoZGVmZXJXcml0dGVuICsgaSwgYnl0ZXNbaV0pO1xuICAgICAgICBpZiAoaSArIDEgIT09IG5leHRPZmZzZXQpIHsgY29udGludWU7IH1cbiAgICAgICAgZGVmZXIgPSBkZWZlcnNbZGVmZXJJbmRleF07XG4gICAgICAgIGRlZmVyTGVuZ3RoID0gZGVmZXIuX2xlbmd0aDtcbiAgICAgICAgb2Zmc2V0ID0gZGVmZXJXcml0dGVuICsgbmV4dE9mZnNldDtcbiAgICAgICAgaWYgKGRlZmVyLl9iaW4pIHtcbiAgICAgICAgICAgIHZhciBiaW4gPSBuZXcgVWludDhBcnJheShkZWZlci5fYmluKTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGVmZXJMZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIHZpZXcuc2V0VWludDgob2Zmc2V0ICsgaiwgYmluW2pdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChkZWZlci5fc3RyKSB7XG4gICAgICAgICAgICB1dGY4V3JpdGUodmlldywgb2Zmc2V0LCBkZWZlci5fc3RyKTtcbiAgICAgICAgfSBlbHNlIGlmIChkZWZlci5fZmxvYXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmlldy5zZXRGbG9hdDY0KG9mZnNldCwgZGVmZXIuX2Zsb2F0KTtcbiAgICAgICAgfVxuICAgICAgICBkZWZlckluZGV4Kys7XG4gICAgICAgIGRlZmVyV3JpdHRlbiArPSBkZWZlckxlbmd0aDtcbiAgICAgICAgaWYgKGRlZmVyc1tkZWZlckluZGV4XSkge1xuICAgICAgICAgICAgbmV4dE9mZnNldCA9IGRlZmVyc1tkZWZlckluZGV4XS5fb2Zmc2V0O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBidWY7XG59XG5cbmV4cG9ydCB7IGVuY29kZSwgZGVjb2RlIH07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgICd3cyBkb2VzIG5vdCB3b3JrIGluIHRoZSBicm93c2VyLiBCcm93c2VyIGNsaWVudHMgbXVzdCB1c2UgdGhlIG5hdGl2ZSAnICtcbiAgICAgICdXZWJTb2NrZXQgb2JqZWN0J1xuICApO1xufTtcbiIsICJpbXBvcnQgTm9kZVdlYlNvY2tldCBmcm9tIFwid3NcIjtcbmltcG9ydCB7IElUcmFuc3BvcnQsIElUcmFuc3BvcnRFdmVudE1hcCB9IGZyb20gXCIuL0lUcmFuc3BvcnRcIjtcblxuY29uc3QgV2ViU29ja2V0ID0gZ2xvYmFsVGhpcy5XZWJTb2NrZXQgfHwgTm9kZVdlYlNvY2tldDtcblxuZXhwb3J0IGNsYXNzIFdlYlNvY2tldFRyYW5zcG9ydCBpbXBsZW1lbnRzIElUcmFuc3BvcnQge1xuICAgIHdzOiBXZWJTb2NrZXQgfCBOb2RlV2ViU29ja2V0O1xuICAgIHByb3RvY29scz86IHN0cmluZyB8IHN0cmluZ1tdO1xuXG4gICAgY29uc3RydWN0b3IocHVibGljIGV2ZW50czogSVRyYW5zcG9ydEV2ZW50TWFwKSB7fVxuXG4gICAgcHVibGljIHNlbmQoZGF0YTogQXJyYXlCdWZmZXIgfCBBcnJheTxudW1iZXI+KTogdm9pZCB7XG4gICAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICAgIHRoaXMud3Muc2VuZChkYXRhKTtcblxuICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgICAgIHRoaXMud3Muc2VuZCgobmV3IFVpbnQ4QXJyYXkoZGF0YSkpLmJ1ZmZlcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgY29ubmVjdCh1cmw6IHN0cmluZykge1xuICAgICAgICB0aGlzLndzID0gbmV3IFdlYlNvY2tldCh1cmwsIHRoaXMucHJvdG9jb2xzKTtcbiAgICAgICAgdGhpcy53cy5iaW5hcnlUeXBlID0gJ2FycmF5YnVmZmVyJztcbiAgICAgICAgdGhpcy53cy5vbm9wZW4gPSB0aGlzLmV2ZW50cy5vbm9wZW47XG4gICAgICAgIHRoaXMud3Mub25tZXNzYWdlID0gdGhpcy5ldmVudHMub25tZXNzYWdlO1xuICAgICAgICB0aGlzLndzLm9uY2xvc2UgPSB0aGlzLmV2ZW50cy5vbmNsb3NlO1xuICAgICAgICB0aGlzLndzLm9uZXJyb3IgPSB0aGlzLmV2ZW50cy5vbmVycm9yO1xuICAgIH1cblxuICAgIHB1YmxpYyBjbG9zZShjb2RlPzogbnVtYmVyLCByZWFzb24/OiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy53cy5jbG9zZShjb2RlLCByZWFzb24pO1xuICAgIH1cblxuICAgIGdldCBpc09wZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOO1xuICAgIH1cblxufVxuIiwgImltcG9ydCB7IElUcmFuc3BvcnQsIElUcmFuc3BvcnRFdmVudE1hcCB9IGZyb20gXCIuL3RyYW5zcG9ydC9JVHJhbnNwb3J0XCI7XG5pbXBvcnQgeyBXZWJTb2NrZXRUcmFuc3BvcnQgfSBmcm9tIFwiLi90cmFuc3BvcnQvV2ViU29ja2V0VHJhbnNwb3J0XCI7XG5cbmV4cG9ydCBjbGFzcyBDb25uZWN0aW9uIGltcGxlbWVudHMgSVRyYW5zcG9ydCB7XG4gICAgdHJhbnNwb3J0OiBJVHJhbnNwb3J0O1xuICAgIGV2ZW50czogSVRyYW5zcG9ydEV2ZW50TWFwID0ge307XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy50cmFuc3BvcnQgPSBuZXcgV2ViU29ja2V0VHJhbnNwb3J0KHRoaXMuZXZlbnRzKTtcbiAgICB9XG5cbiAgICBzZW5kKGRhdGE6IEFycmF5QnVmZmVyIHwgQXJyYXk8bnVtYmVyPik6IHZvaWQge1xuICAgICAgICB0aGlzLnRyYW5zcG9ydC5zZW5kKGRhdGEpO1xuICAgIH1cblxuXG4gICAgY29ubmVjdCh1cmw6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLnRyYW5zcG9ydC5jb25uZWN0KHVybCk7XG4gICAgfVxuXG4gICAgY2xvc2UoY29kZT86IG51bWJlciwgcmVhc29uPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMudHJhbnNwb3J0LmNsb3NlKGNvZGUsIHJlYXNvbik7XG4gICAgfVxuXG4gICAgZ2V0IGlzT3BlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNwb3J0LmlzT3BlbjtcbiAgICB9XG5cbn1cbiIsICIvLyBVc2UgY29kZXMgYmV0d2VlbiAwfjEyNyBmb3IgbGVzc2VyIHRocm91Z2hwdXQgKDEgYnl0ZSlcblxuZXhwb3J0IGVudW0gUHJvdG9jb2wge1xuICAgIC8vIFJvb20tcmVsYXRlZCAoMTB+MTkpXG4gICAgSEFORFNIQUtFID0gOSxcbiAgICBKT0lOX1JPT00gPSAxMCxcbiAgICBFUlJPUiA9IDExLFxuICAgIExFQVZFX1JPT00gPSAxMixcbiAgICBST09NX0RBVEEgPSAxMyxcbiAgICBST09NX1NUQVRFID0gMTQsXG4gICAgUk9PTV9TVEFURV9QQVRDSCA9IDE1LFxuICAgIFJPT01fREFUQV9TQ0hFTUEgPSAxNixcbiAgICBST09NX0RBVEFfQllURVMgPSAxNyxcbn1cblxuZXhwb3J0IGVudW0gRXJyb3JDb2RlIHtcbiAgICBNQVRDSE1BS0VfTk9fSEFORExFUiA9IDQyMTAsXG4gICAgTUFUQ0hNQUtFX0lOVkFMSURfQ1JJVEVSSUEgPSA0MjExLFxuICAgIE1BVENITUFLRV9JTlZBTElEX1JPT01fSUQgPSA0MjEyLFxuICAgIE1BVENITUFLRV9VTkhBTkRMRUQgPSA0MjEzLFxuICAgIE1BVENITUFLRV9FWFBJUkVEID0gNDIxNCxcblxuICAgIEFVVEhfRkFJTEVEID0gNDIxNSxcbiAgICBBUFBMSUNBVElPTl9FUlJPUiA9IDQyMTYsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1dGY4UmVhZCh2aWV3OiBudW1iZXJbXSwgb2Zmc2V0OiBudW1iZXIpIHtcbiAgY29uc3QgbGVuZ3RoID0gdmlld1tvZmZzZXQrK107XG5cbiAgdmFyIHN0cmluZyA9ICcnLCBjaHIgPSAwO1xuICBmb3IgKHZhciBpID0gb2Zmc2V0LCBlbmQgPSBvZmZzZXQgKyBsZW5ndGg7IGkgPCBlbmQ7IGkrKykge1xuICAgIHZhciBieXRlID0gdmlld1tpXTtcbiAgICBpZiAoKGJ5dGUgJiAweDgwKSA9PT0gMHgwMCkge1xuICAgICAgc3RyaW5nICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKChieXRlICYgMHhlMCkgPT09IDB4YzApIHtcbiAgICAgIHN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKFxuICAgICAgICAoKGJ5dGUgJiAweDFmKSA8PCA2KSB8XG4gICAgICAgICh2aWV3WysraV0gJiAweDNmKVxuICAgICAgKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoKGJ5dGUgJiAweGYwKSA9PT0gMHhlMCkge1xuICAgICAgc3RyaW5nICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoXG4gICAgICAgICgoYnl0ZSAmIDB4MGYpIDw8IDEyKSB8XG4gICAgICAgICgodmlld1srK2ldICYgMHgzZikgPDwgNikgfFxuICAgICAgICAoKHZpZXdbKytpXSAmIDB4M2YpIDw8IDApXG4gICAgICApO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmICgoYnl0ZSAmIDB4ZjgpID09PSAweGYwKSB7XG4gICAgICBjaHIgPSAoKGJ5dGUgJiAweDA3KSA8PCAxOCkgfFxuICAgICAgICAoKHZpZXdbKytpXSAmIDB4M2YpIDw8IDEyKSB8XG4gICAgICAgICgodmlld1srK2ldICYgMHgzZikgPDwgNikgfFxuICAgICAgICAoKHZpZXdbKytpXSAmIDB4M2YpIDw8IDApO1xuICAgICAgaWYgKGNociA+PSAweDAxMDAwMCkgeyAvLyBzdXJyb2dhdGUgcGFpclxuICAgICAgICBjaHIgLT0gMHgwMTAwMDA7XG4gICAgICAgIHN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjaHIgPj4+IDEwKSArIDB4RDgwMCwgKGNociAmIDB4M0ZGKSArIDB4REMwMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdHJpbmcgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjaHIpO1xuICAgICAgfVxuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBieXRlICcgKyBieXRlLnRvU3RyaW5nKDE2KSk7XG4gIH1cbiAgcmV0dXJuIHN0cmluZztcbn1cblxuLy8gRmFzdGVyIGZvciBzaG9ydCBzdHJpbmdzIHRoYW4gQnVmZmVyLmJ5dGVMZW5ndGhcbmV4cG9ydCBmdW5jdGlvbiB1dGY4TGVuZ3RoKHN0cjogc3RyaW5nID0gJycpIHtcbiAgbGV0IGMgPSAwO1xuICBsZXQgbGVuZ3RoID0gMDtcbiAgZm9yIChsZXQgaSA9IDAsIGwgPSBzdHIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgIGlmIChjIDwgMHg4MCkge1xuICAgICAgbGVuZ3RoICs9IDE7XG4gICAgfSBlbHNlIGlmIChjIDwgMHg4MDApIHtcbiAgICAgIGxlbmd0aCArPSAyO1xuICAgIH0gZWxzZSBpZiAoYyA8IDB4ZDgwMCB8fCBjID49IDB4ZTAwMCkge1xuICAgICAgbGVuZ3RoICs9IDM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGkrKztcbiAgICAgIGxlbmd0aCArPSA0O1xuICAgIH1cbiAgfVxuICByZXR1cm4gbGVuZ3RoICsgMTtcbn1cbiIsICJleHBvcnQgaW50ZXJmYWNlIFNlcmlhbGl6ZXI8U3RhdGU+IHtcbiAgICBzZXRTdGF0ZShkYXRhOiBhbnkpOiB2b2lkO1xuICAgIGdldFN0YXRlKCk6IFN0YXRlO1xuXG4gICAgcGF0Y2goZGF0YTogYW55KTogdm9pZDtcbiAgICB0ZWFyZG93bigpOiB2b2lkO1xuXG4gICAgaGFuZHNoYWtlPyhieXRlczogbnVtYmVyW10sIGl0PzogYW55KTogdm9pZDtcbn1cblxuY29uc3Qgc2VyaWFsaXplcnM6IHsgW2lkOiBzdHJpbmddOiBhbnkgfSA9IHt9O1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJTZXJpYWxpemVyIChpZDogc3RyaW5nLCBzZXJpYWxpemVyOiBhbnkpIHtcbiAgICBzZXJpYWxpemVyc1tpZF0gPSBzZXJpYWxpemVyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VyaWFsaXplciAoaWQ6IHN0cmluZykge1xuICAgIGNvbnN0IHNlcmlhbGl6ZXIgPSBzZXJpYWxpemVyc1tpZF07XG4gICAgaWYgKCFzZXJpYWxpemVyKSB7IHRocm93IG5ldyBFcnJvcihcIm1pc3Npbmcgc2VyaWFsaXplcjogXCIgKyBpZCk7IH1cbiAgICByZXR1cm4gc2VyaWFsaXplcjtcbn0iLCAiLyoqXG4gKiBUaGUgTUlUIExpY2Vuc2UgKE1JVClcbiAqXG4gKiBDb3B5cmlnaHQgMjAxNiBBbmRyZXkgU2l0bmlrIDxhbmRyZXlAc2l0bmlrLnJ1PlxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2ZcbiAqIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW5cbiAqIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG9cbiAqIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mXG4gKiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sXG4gKiBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcbiAqIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1NcbiAqIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUlxuICogQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSXG4gKiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTlxuICogQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG5leHBvcnQgY29uc3QgY3JlYXRlTmFub0V2ZW50cyA9ICgpID0+ICh7XG4gICAgZW1pdChldmVudDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkge1xuICAgICAgICBsZXQgY2FsbGJhY2tzID0gdGhpcy5ldmVudHNbZXZlbnRdIHx8IFtdXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSBjYWxsYmFja3MubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNhbGxiYWNrc1tpXSguLi5hcmdzKVxuICAgICAgICB9XG4gICAgfSxcbiAgICBldmVudHM6IHt9LFxuICAgIG9uKGV2ZW50OiBzdHJpbmcsIGNiOiAoLi4uYXJnczogYW55W10pID0+IHZvaWQpIHtcbiAgICAgICAgdGhpcy5ldmVudHNbZXZlbnRdPy5wdXNoKGNiKSB8fCAodGhpcy5ldmVudHNbZXZlbnRdID0gW2NiXSlcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XSA9IHRoaXMuZXZlbnRzW2V2ZW50XT8uZmlsdGVyKGkgPT4gY2IgIT09IGkpXG4gICAgICAgIH1cbiAgICB9XG59KTsiLCAidHlwZSBGdW5jdGlvblBhcmFtZXRlcnM8VCBleHRlbmRzICguLi5hcmdzOiBhbnlbXSkgPT4gYW55PiA9XG4gIFQgZXh0ZW5kcyAoLi4uYXJnczogaW5mZXIgUCkgPT4gYW55XG4gICAgPyBQXG4gICAgOiBuZXZlcjtcblxuZXhwb3J0IGNsYXNzIEV2ZW50RW1pdHRlcjxDYWxsYmFja1NpZ25hdHVyZSBleHRlbmRzICguLi5hcmdzOiBhbnlbXSkgPT4gYW55PiB7XG4gIGhhbmRsZXJzOiBBcnJheTxDYWxsYmFja1NpZ25hdHVyZT4gPSBbXTtcblxuICByZWdpc3RlcihjYjogQ2FsbGJhY2tTaWduYXR1cmUsIG9uY2U6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIHRoaXMuaGFuZGxlcnMucHVzaChjYik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBpbnZva2UoLi4uYXJnczogRnVuY3Rpb25QYXJhbWV0ZXJzPENhbGxiYWNrU2lnbmF0dXJlPikge1xuICAgIHRoaXMuaGFuZGxlcnMuZm9yRWFjaCgoaGFuZGxlcikgPT4gaGFuZGxlci5hcHBseSh0aGlzLCBhcmdzKSk7XG4gIH1cblxuICBpbnZva2VBc3luYyguLi5hcmdzOiBGdW5jdGlvblBhcmFtZXRlcnM8Q2FsbGJhY2tTaWduYXR1cmU+KSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBoYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3MpKSk7XG4gIH1cblxuICByZW1vdmUgKGNiOiBDYWxsYmFja1NpZ25hdHVyZSkge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5oYW5kbGVycy5pbmRleE9mKGNiKTtcbiAgICB0aGlzLmhhbmRsZXJzW2luZGV4XSA9IHRoaXMuaGFuZGxlcnNbdGhpcy5oYW5kbGVycy5sZW5ndGggLSAxXTtcbiAgICB0aGlzLmhhbmRsZXJzLnBvcCgpO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgdGhpcy5oYW5kbGVycyA9IFtdO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTaWduYWw8Q2FsbGJhY2tTaWduYXR1cmUgZXh0ZW5kcyAoLi4uYXJnczogYW55W10pID0+IHZvaWQgfCBQcm9taXNlPGFueT4+KClcbiAgOiBcbiAgIHtcbiAgICBvbmNlOiAoY2I6IENhbGxiYWNrU2lnbmF0dXJlKSA9PiB2b2lkO1xuICAgIHJlbW92ZTogKGNiOiBDYWxsYmFja1NpZ25hdHVyZSkgPT4gdm9pZCxcbiAgICBpbnZva2U6ICguLi5hcmdzOiBGdW5jdGlvblBhcmFtZXRlcnM8Q2FsbGJhY2tTaWduYXR1cmU+KSA9PiB2b2lkLFxuICAgIGludm9rZUFzeW5jOiAoLi4uYXJnczogRnVuY3Rpb25QYXJhbWV0ZXJzPENhbGxiYWNrU2lnbmF0dXJlPikgPT4gUHJvbWlzZTxhbnlbXT4sXG4gICAgY2xlYXI6ICgpID0+IHZvaWQsXG4gIH0gJiAoKHRoaXM6IGFueSwgY2I6IENhbGxiYWNrU2lnbmF0dXJlKSA9PiBFdmVudEVtaXR0ZXI8Q2FsbGJhY2tTaWduYXR1cmU+IClcbiAge1xuICBjb25zdCBlbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcjxDYWxsYmFja1NpZ25hdHVyZT4oKTtcblxuICBmdW5jdGlvbiByZWdpc3Rlcih0aGlzOiBhbnksIGNiOiBDYWxsYmFja1NpZ25hdHVyZSk6IEV2ZW50RW1pdHRlcjxDYWxsYmFja1NpZ25hdHVyZT4ge1xuICAgIHJldHVybiBlbWl0dGVyLnJlZ2lzdGVyKGNiLCB0aGlzID09PSBudWxsKTtcbiAgfTtcblxuICByZWdpc3Rlci5vbmNlID0gKGNiOiBDYWxsYmFja1NpZ25hdHVyZSkgPT4ge1xuICAgIGNvbnN0IGNhbGxiYWNrOiBhbnkgPSBmdW5jdGlvbiAoLi4uYXJnczogYW55W10pIHtcbiAgICAgIGNiLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgZW1pdHRlci5yZW1vdmUoY2FsbGJhY2spO1xuICAgIH1cbiAgICBlbWl0dGVyLnJlZ2lzdGVyKGNhbGxiYWNrKTtcbiAgfVxuICByZWdpc3Rlci5yZW1vdmUgPSAoY2I6IENhbGxiYWNrU2lnbmF0dXJlKSA9PiBlbWl0dGVyLnJlbW92ZShjYilcbiAgcmVnaXN0ZXIuaW52b2tlID0gKC4uLmFyZ3M6IEZ1bmN0aW9uUGFyYW1ldGVyczxDYWxsYmFja1NpZ25hdHVyZT4pID0+IGVtaXR0ZXIuaW52b2tlKC4uLmFyZ3MpO1xuICByZWdpc3Rlci5pbnZva2VBc3luYyA9ICguLi5hcmdzOiBGdW5jdGlvblBhcmFtZXRlcnM8Q2FsbGJhY2tTaWduYXR1cmU+KSA9PiBlbWl0dGVyLmludm9rZUFzeW5jKC4uLmFyZ3MpO1xuICByZWdpc3Rlci5jbGVhciA9ICgpID0+IGVtaXR0ZXIuY2xlYXIoKTtcblxuICByZXR1cm4gcmVnaXN0ZXI7XG59IiwgIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gICAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gZmFjdG9yeShleHBvcnRzKSA6XG4gICAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKFsnZXhwb3J0cyddLCBmYWN0b3J5KSA6XG4gICAgKGdsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiBnbG9iYWwgfHwgc2VsZiwgZmFjdG9yeShnbG9iYWwuc2NoZW1hID0ge30pKTtcbn0pKHRoaXMsIChmdW5jdGlvbiAoZXhwb3J0cykgeyAndXNlIHN0cmljdCc7XG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcbiAgICBQZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxuICAgIHB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcbiAgICBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcbiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuICAgIEFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuICAgIElORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG4gICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuICAgIE9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuICAgIFBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4gICAgLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UsIFN1cHByZXNzZWRFcnJvciwgU3ltYm9sICovXHJcblxyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgICAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICAgICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgICAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20sIHBhY2spIHtcclxuICAgICAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xyXG4gICAgICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHR5cGVvZiBTdXBwcmVzc2VkRXJyb3IgPT09IFwiZnVuY3Rpb25cIiA/IFN1cHByZXNzZWRFcnJvciA6IGZ1bmN0aW9uIChlcnJvciwgc3VwcHJlc3NlZCwgbWVzc2FnZSkge1xyXG4gICAgICAgIHZhciBlID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xyXG4gICAgICAgIHJldHVybiBlLm5hbWUgPSBcIlN1cHByZXNzZWRFcnJvclwiLCBlLmVycm9yID0gZXJyb3IsIGUuc3VwcHJlc3NlZCA9IHN1cHByZXNzZWQsIGU7XHJcbiAgICB9O1xuXG4gICAgLy8gZXhwb3J0IGNvbnN0IFNXSVRDSF9UT19TVFJVQ1RVUkUgPSAxOTM7IChlYXNpbHkgY29sbGlkZXMgd2l0aCBERUxFVEVfQU5EX0FERCArIGZpZWxkSW5kZXggPSAyKVxuICAgIHZhciBTV0lUQ0hfVE9fU1RSVUNUVVJFID0gMjU1OyAvLyAoZGVjb2RpbmcgY29sbGlkZXMgd2l0aCBERUxFVEVfQU5EX0FERCArIGZpZWxkSW5kZXggPSA2MylcbiAgICB2YXIgVFlQRV9JRCA9IDIxMztcbiAgICAvKipcbiAgICAgKiBFbmNvZGluZyBTY2hlbWEgZmllbGQgb3BlcmF0aW9ucy5cbiAgICAgKi9cbiAgICBleHBvcnRzLk9QRVJBVElPTiA9IHZvaWQgMDtcbiAgICAoZnVuY3Rpb24gKE9QRVJBVElPTikge1xuICAgICAgICAvLyBhZGQgbmV3IHN0cnVjdHVyZS9wcmltaXRpdmVcbiAgICAgICAgT1BFUkFUSU9OW09QRVJBVElPTltcIkFERFwiXSA9IDEyOF0gPSBcIkFERFwiO1xuICAgICAgICAvLyByZXBsYWNlIHN0cnVjdHVyZS9wcmltaXRpdmVcbiAgICAgICAgT1BFUkFUSU9OW09QRVJBVElPTltcIlJFUExBQ0VcIl0gPSAwXSA9IFwiUkVQTEFDRVwiO1xuICAgICAgICAvLyBkZWxldGUgZmllbGRcbiAgICAgICAgT1BFUkFUSU9OW09QRVJBVElPTltcIkRFTEVURVwiXSA9IDY0XSA9IFwiREVMRVRFXCI7XG4gICAgICAgIC8vIERFTEVURSBmaWVsZCwgZm9sbG93ZWQgYnkgYW4gQUREXG4gICAgICAgIE9QRVJBVElPTltPUEVSQVRJT05bXCJERUxFVEVfQU5EX0FERFwiXSA9IDE5Ml0gPSBcIkRFTEVURV9BTkRfQUREXCI7XG4gICAgICAgIC8vIFRPVUNIIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIGhpZXJhcmNoeSBvZiBuZXN0ZWQgU2NoZW1hIHN0cnVjdHVyZXMgZHVyaW5nIHNlcmlhbGl6YXRpb24uXG4gICAgICAgIC8vIHRvdWNoZXMgYXJlIE5PVCBlbmNvZGVkLlxuICAgICAgICBPUEVSQVRJT05bT1BFUkFUSU9OW1wiVE9VQ0hcIl0gPSAxXSA9IFwiVE9VQ0hcIjtcbiAgICAgICAgLy8gTWFwU2NoZW1hIE9wZXJhdGlvbnNcbiAgICAgICAgT1BFUkFUSU9OW09QRVJBVElPTltcIkNMRUFSXCJdID0gMTBdID0gXCJDTEVBUlwiO1xuICAgIH0pKGV4cG9ydHMuT1BFUkFUSU9OIHx8IChleHBvcnRzLk9QRVJBVElPTiA9IHt9KSk7XG4gICAgLy8gZXhwb3J0IGVudW0gT1BFUkFUSU9OIHtcbiAgICAvLyAgICAgLy8gYWRkIG5ldyBzdHJ1Y3R1cmUvcHJpbWl0aXZlXG4gICAgLy8gICAgIC8vICgxMjgpXG4gICAgLy8gICAgIEFERCA9IDEyOCwgLy8gMTAwMDAwMDAsXG4gICAgLy8gICAgIC8vIHJlcGxhY2Ugc3RydWN0dXJlL3ByaW1pdGl2ZVxuICAgIC8vICAgICBSRVBMQUNFID0gMSwvLyAwMDAwMDAwMVxuICAgIC8vICAgICAvLyBkZWxldGUgZmllbGRcbiAgICAvLyAgICAgREVMRVRFID0gMTkyLCAvLyAxMTAwMDAwMFxuICAgIC8vICAgICAvLyBERUxFVEUgZmllbGQsIGZvbGxvd2VkIGJ5IGFuIEFERFxuICAgIC8vICAgICBERUxFVEVfQU5EX0FERCA9IDIyNCwgLy8gMTExMDAwMDBcbiAgICAvLyAgICAgLy8gVE9VQ0ggaXMgdXNlZCB0byBkZXRlcm1pbmUgaGllcmFyY2h5IG9mIG5lc3RlZCBTY2hlbWEgc3RydWN0dXJlcyBkdXJpbmcgc2VyaWFsaXphdGlvbi5cbiAgICAvLyAgICAgLy8gdG91Y2hlcyBhcmUgTk9UIGVuY29kZWQuXG4gICAgLy8gICAgIFRPVUNIID0gMCwgLy8gMDAwMDAwMDBcbiAgICAvLyAgICAgLy8gTWFwU2NoZW1hIE9wZXJhdGlvbnNcbiAgICAvLyAgICAgQ0xFQVIgPSAxMCxcbiAgICAvLyB9XG5cbiAgICB2YXIgQ2hhbmdlVHJlZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ2hhbmdlVHJlZShyZWYsIHBhcmVudCwgcm9vdCkge1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICB0aGlzLmFsbENoYW5nZXMgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICAvLyBjYWNoZWQgaW5kZXhlcyBmb3IgZmlsdGVyaW5nXG4gICAgICAgICAgICB0aGlzLmNhY2hlcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50Q3VzdG9tT3BlcmF0aW9uID0gMDtcbiAgICAgICAgICAgIHRoaXMucmVmID0gcmVmO1xuICAgICAgICAgICAgdGhpcy5zZXRQYXJlbnQocGFyZW50LCByb290KTtcbiAgICAgICAgfVxuICAgICAgICBDaGFuZ2VUcmVlLnByb3RvdHlwZS5zZXRQYXJlbnQgPSBmdW5jdGlvbiAocGFyZW50LCByb290LCBwYXJlbnRJbmRleCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmICghdGhpcy5pbmRleGVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbmRleGVzID0gKHRoaXMucmVmIGluc3RhbmNlb2YgU2NoZW1hKVxuICAgICAgICAgICAgICAgICAgICA/IHRoaXMucmVmWydfZGVmaW5pdGlvbiddLmluZGV4ZXNcbiAgICAgICAgICAgICAgICAgICAgOiB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnRJbmRleCA9IHBhcmVudEluZGV4O1xuICAgICAgICAgICAgLy8gYXZvaWQgc2V0dGluZyBwYXJlbnRzIHdpdGggZW1wdHkgYHJvb3RgXG4gICAgICAgICAgICBpZiAoIXJvb3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJvb3QgPSByb290O1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIGFzc2lnbiBzYW1lIHBhcmVudCBvbiBjaGlsZCBzdHJ1Y3R1cmVzXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgaWYgKHRoaXMucmVmIGluc3RhbmNlb2YgU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlZmluaXRpb24gPSB0aGlzLnJlZlsnX2RlZmluaXRpb24nXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBmaWVsZCBpbiBkZWZpbml0aW9uLnNjaGVtYSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnJlZltmaWVsZF07XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAmJiB2YWx1ZVsnJGNoYW5nZXMnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudEluZGV4XzEgPSBkZWZpbml0aW9uLmluZGV4ZXNbZmllbGRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVbJyRjaGFuZ2VzJ10uc2V0UGFyZW50KHRoaXMucmVmLCByb290LCBwYXJlbnRJbmRleF8xKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiAodGhpcy5yZWYpID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWYuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBTY2hlbWEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGFuZ2VUcmVlZSA9IHZhbHVlWyckY2hhbmdlcyddO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudEluZGV4XzIgPSBfdGhpcy5yZWZbJyRjaGFuZ2VzJ10uaW5kZXhlc1trZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlVHJlZWUuc2V0UGFyZW50KF90aGlzLnJlZiwgX3RoaXMucm9vdCwgcGFyZW50SW5kZXhfMik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2hhbmdlVHJlZS5wcm90b3R5cGUub3BlcmF0aW9uID0gZnVuY3Rpb24gKG9wKSB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZXMuc2V0KC0tdGhpcy5jdXJyZW50Q3VzdG9tT3BlcmF0aW9uLCBvcCk7XG4gICAgICAgIH07XG4gICAgICAgIENoYW5nZVRyZWUucHJvdG90eXBlLmNoYW5nZSA9IGZ1bmN0aW9uIChmaWVsZE5hbWUsIG9wZXJhdGlvbikge1xuICAgICAgICAgICAgaWYgKG9wZXJhdGlvbiA9PT0gdm9pZCAwKSB7IG9wZXJhdGlvbiA9IGV4cG9ydHMuT1BFUkFUSU9OLkFERDsgfVxuICAgICAgICAgICAgdmFyIGluZGV4ID0gKHR5cGVvZiAoZmllbGROYW1lKSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICA/IGZpZWxkTmFtZVxuICAgICAgICAgICAgICAgIDogdGhpcy5pbmRleGVzW2ZpZWxkTmFtZV07XG4gICAgICAgICAgICB0aGlzLmFzc2VydFZhbGlkSW5kZXgoaW5kZXgsIGZpZWxkTmFtZSk7XG4gICAgICAgICAgICB2YXIgcHJldmlvdXNDaGFuZ2UgPSB0aGlzLmNoYW5nZXMuZ2V0KGluZGV4KTtcbiAgICAgICAgICAgIGlmICghcHJldmlvdXNDaGFuZ2UgfHxcbiAgICAgICAgICAgICAgICBwcmV2aW91c0NoYW5nZS5vcCA9PT0gZXhwb3J0cy5PUEVSQVRJT04uREVMRVRFIHx8XG4gICAgICAgICAgICAgICAgcHJldmlvdXNDaGFuZ2Uub3AgPT09IGV4cG9ydHMuT1BFUkFUSU9OLlRPVUNIIC8vIChtYXptb3JyYS5pbydzIEJhdHRsZUFjdGlvbiBpc3N1ZSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlcy5zZXQoaW5kZXgsIHtcbiAgICAgICAgICAgICAgICAgICAgb3A6ICghcHJldmlvdXNDaGFuZ2UpXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG9wZXJhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgOiAocHJldmlvdXNDaGFuZ2Uub3AgPT09IGV4cG9ydHMuT1BFUkFUSU9OLkRFTEVURSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGV4cG9ydHMuT1BFUkFUSU9OLkRFTEVURV9BTkRfQUREXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBvcGVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIC8vIDogT1BFUkFUSU9OLlJFUExBQ0UsXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hbGxDaGFuZ2VzLmFkZChpbmRleCk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy50b3VjaFBhcmVudHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hhbmdlVHJlZS5wcm90b3R5cGUudG91Y2ggPSBmdW5jdGlvbiAoZmllbGROYW1lKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAodHlwZW9mIChmaWVsZE5hbWUpID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgID8gZmllbGROYW1lXG4gICAgICAgICAgICAgICAgOiB0aGlzLmluZGV4ZXNbZmllbGROYW1lXTtcbiAgICAgICAgICAgIHRoaXMuYXNzZXJ0VmFsaWRJbmRleChpbmRleCwgZmllbGROYW1lKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5jaGFuZ2VzLmhhcyhpbmRleCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZXMuc2V0KGluZGV4LCB7IG9wOiBleHBvcnRzLk9QRVJBVElPTi5UT1VDSCwgaW5kZXg6IGluZGV4IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hbGxDaGFuZ2VzLmFkZChpbmRleCk7XG4gICAgICAgICAgICAvLyBlbnN1cmUgdG91Y2ggaXMgcGxhY2VkIHVudGlsIHRoZSAkcm9vdCBpcyBmb3VuZC5cbiAgICAgICAgICAgIHRoaXMudG91Y2hQYXJlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIENoYW5nZVRyZWUucHJvdG90eXBlLnRvdWNoUGFyZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50WyckY2hhbmdlcyddLnRvdWNoKHRoaXMucGFyZW50SW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDaGFuZ2VUcmVlLnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWZbJ19kZWZpbml0aW9uJ10pIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVmaW5pdGlvbiA9IHRoaXMucmVmWydfZGVmaW5pdGlvbiddO1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWZpbml0aW9uLnNjaGVtYVtkZWZpbml0aW9uLmZpZWxkc0J5SW5kZXhbaW5kZXhdXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBkZWZpbml0aW9uID0gdGhpcy5wYXJlbnRbJ19kZWZpbml0aW9uJ107XG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudFR5cGUgPSBkZWZpbml0aW9uLnNjaGVtYVtkZWZpbml0aW9uLmZpZWxkc0J5SW5kZXhbdGhpcy5wYXJlbnRJbmRleF1dO1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBjaGlsZCB0eXBlIGZyb20gcGFyZW50IHN0cnVjdHVyZS5cbiAgICAgICAgICAgICAgICAvLyAtIFtcInN0cmluZ1wiXSA9PiBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgLy8gLSB7IG1hcDogXCJzdHJpbmdcIiB9ID0+IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAvLyAtIHsgc2V0OiBcInN0cmluZ1wiIH0gPT4gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXMocGFyZW50VHlwZSlbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENoYW5nZVRyZWUucHJvdG90eXBlLmdldENoaWxkcmVuRmlsdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNoaWxkRmlsdGVycyA9IHRoaXMucGFyZW50WydfZGVmaW5pdGlvbiddLmNoaWxkRmlsdGVycztcbiAgICAgICAgICAgIHJldHVybiBjaGlsZEZpbHRlcnMgJiYgY2hpbGRGaWx0ZXJzW3RoaXMucGFyZW50SW5kZXhdO1xuICAgICAgICB9O1xuICAgICAgICAvL1xuICAgICAgICAvLyB1c2VkIGR1cmluZyBgLmVuY29kZSgpYFxuICAgICAgICAvL1xuICAgICAgICBDaGFuZ2VUcmVlLnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVmWydnZXRCeUluZGV4J10oaW5kZXgpO1xuICAgICAgICB9O1xuICAgICAgICBDaGFuZ2VUcmVlLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoZmllbGROYW1lKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAodHlwZW9mIChmaWVsZE5hbWUpID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgID8gZmllbGROYW1lXG4gICAgICAgICAgICAgICAgOiB0aGlzLmluZGV4ZXNbZmllbGROYW1lXTtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiQGNvbHlzZXVzL3NjaGVtYSBcIi5jb25jYXQodGhpcy5yZWYuY29uc3RydWN0b3IubmFtZSwgXCI6IHRyeWluZyB0byBkZWxldGUgbm9uLWV4aXN0aW5nIGluZGV4OiBcIikuY29uY2F0KGZpZWxkTmFtZSwgXCIgKFwiKS5jb25jYXQoaW5kZXgsIFwiKVwiKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHByZXZpb3VzVmFsdWUgPSB0aGlzLmdldFZhbHVlKGluZGV4KTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiJGNoYW5nZXMuZGVsZXRlID0+XCIsIHsgZmllbGROYW1lLCBpbmRleCwgcHJldmlvdXNWYWx1ZSB9KTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlcy5zZXQoaW5kZXgsIHsgb3A6IGV4cG9ydHMuT1BFUkFUSU9OLkRFTEVURSwgaW5kZXg6IGluZGV4IH0pO1xuICAgICAgICAgICAgdGhpcy5hbGxDaGFuZ2VzLmRlbGV0ZShpbmRleCk7XG4gICAgICAgICAgICAvLyBkZWxldGUgY2FjaGVcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNhY2hlc1tpbmRleF07XG4gICAgICAgICAgICAvLyByZW1vdmUgYHJvb3RgIHJlZmVyZW5jZVxuICAgICAgICAgICAgaWYgKHByZXZpb3VzVmFsdWUgJiYgcHJldmlvdXNWYWx1ZVsnJGNoYW5nZXMnXSkge1xuICAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWVbJyRjaGFuZ2VzJ10ucGFyZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMudG91Y2hQYXJlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIENoYW5nZVRyZWUucHJvdG90eXBlLmRpc2NhcmQgPSBmdW5jdGlvbiAoY2hhbmdlZCwgZGlzY2FyZEFsbCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmIChjaGFuZ2VkID09PSB2b2lkIDApIHsgY2hhbmdlZCA9IGZhbHNlOyB9XG4gICAgICAgICAgICBpZiAoZGlzY2FyZEFsbCA9PT0gdm9pZCAwKSB7IGRpc2NhcmRBbGwgPSBmYWxzZTsgfVxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIE1hcCwgQXJyYXksIGV0YzpcbiAgICAgICAgICAgIC8vIFJlbW92ZSBjYWNoZWQga2V5IHRvIGVuc3VyZSBBREQgb3BlcmF0aW9ucyBpcyB1bnNlZCBpbnN0ZWFkIG9mXG4gICAgICAgICAgICAvLyBSRVBMQUNFIGluIGNhc2Ugc2FtZSBrZXkgaXMgdXNlZCBvbiBuZXh0IHBhdGNoZXMuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gVE9ETzogcmVmYWN0b3IgdGhpcy4gdGhpcyBpcyBub3QgcmVsZXZhbnQgZm9yIENvbGxlY3Rpb24gYW5kIFNldC5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICBpZiAoISh0aGlzLnJlZiBpbnN0YW5jZW9mIFNjaGVtYSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZXMuZm9yRWFjaChmdW5jdGlvbiAoY2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGFuZ2Uub3AgPT09IGV4cG9ydHMuT1BFUkFUSU9OLkRFTEVURSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gX3RoaXMucmVmWydnZXRJbmRleCddKGNoYW5nZS5pbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgX3RoaXMuaW5kZXhlc1tpbmRleF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2hhbmdlcy5jbGVhcigpO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkID0gY2hhbmdlZDtcbiAgICAgICAgICAgIGlmIChkaXNjYXJkQWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hbGxDaGFuZ2VzLmNsZWFyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyByZS1zZXQgYGN1cnJlbnRDdXN0b21PcGVyYXRpb25gXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRDdXN0b21PcGVyYXRpb24gPSAwO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogUmVjdXJzaXZlbHkgZGlzY2FyZCBhbGwgY2hhbmdlcyBmcm9tIHRoaXMsIGFuZCBjaGlsZCBzdHJ1Y3R1cmVzLlxuICAgICAgICAgKi9cbiAgICAgICAgQ2hhbmdlVHJlZS5wcm90b3R5cGUuZGlzY2FyZEFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZXMuZm9yRWFjaChmdW5jdGlvbiAoY2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gX3RoaXMuZ2V0VmFsdWUoY2hhbmdlLmluZGV4KTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgJiYgdmFsdWVbJyRjaGFuZ2VzJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVbJyRjaGFuZ2VzJ10uZGlzY2FyZEFsbCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5kaXNjYXJkKCk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIGNhY2hlKGZpZWxkOiBudW1iZXIsIGJlZ2luSW5kZXg6IG51bWJlciwgZW5kSW5kZXg6IG51bWJlcikge1xuICAgICAgICBDaGFuZ2VUcmVlLnByb3RvdHlwZS5jYWNoZSA9IGZ1bmN0aW9uIChmaWVsZCwgY2FjaGVkQnl0ZXMpIHtcbiAgICAgICAgICAgIHRoaXMuY2FjaGVzW2ZpZWxkXSA9IGNhY2hlZEJ5dGVzO1xuICAgICAgICB9O1xuICAgICAgICBDaGFuZ2VUcmVlLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2hhbmdlVHJlZSh0aGlzLnJlZiwgdGhpcy5wYXJlbnQsIHRoaXMucm9vdCk7XG4gICAgICAgIH07XG4gICAgICAgIENoYW5nZVRyZWUucHJvdG90eXBlLmVuc3VyZVJlZklkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gc2tpcCBpZiByZWZJZCBpcyBhbHJlYWR5IHNldC5cbiAgICAgICAgICAgIGlmICh0aGlzLnJlZklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZklkID0gdGhpcy5yb290LmdldE5leHRVbmlxdWVJZCgpO1xuICAgICAgICB9O1xuICAgICAgICBDaGFuZ2VUcmVlLnByb3RvdHlwZS5hc3NlcnRWYWxpZEluZGV4ID0gZnVuY3Rpb24gKGluZGV4LCBmaWVsZE5hbWUpIHtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2hhbmdlVHJlZTogbWlzc2luZyBpbmRleCBmb3IgZmllbGQgXFxcIlwiLmNvbmNhdChmaWVsZE5hbWUsIFwiXFxcIlwiKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDaGFuZ2VUcmVlO1xuICAgIH0oKSk7XG5cbiAgICBmdW5jdGlvbiBhZGRDYWxsYmFjaygkY2FsbGJhY2tzLCBvcCwgY2FsbGJhY2ssIGV4aXN0aW5nKSB7XG4gICAgICAgIC8vIGluaXRpYWxpemUgbGlzdCBvZiBjYWxsYmFja3NcbiAgICAgICAgaWYgKCEkY2FsbGJhY2tzW29wXSkge1xuICAgICAgICAgICAgJGNhbGxiYWNrc1tvcF0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICAkY2FsbGJhY2tzW29wXS5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gVHJpZ2dlciBjYWxsYmFjayBmb3IgZXhpc3RpbmcgZWxlbWVudHNcbiAgICAgICAgLy8gLSBPUEVSQVRJT04uQUREXG4gICAgICAgIC8vIC0gT1BFUkFUSU9OLlJFUExBQ0VcbiAgICAgICAgLy9cbiAgICAgICAgZXhpc3RpbmcgPT09IG51bGwgfHwgZXhpc3RpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGV4aXN0aW5nLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGtleSkgeyByZXR1cm4gY2FsbGJhY2soaXRlbSwga2V5KTsgfSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBzcGxpY2VPbmUoJGNhbGxiYWNrc1tvcF0sICRjYWxsYmFja3Nbb3BdLmluZGV4T2YoY2FsbGJhY2spKTsgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVtb3ZlQ2hpbGRSZWZzKGNoYW5nZXMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG5lZWRSZW1vdmVSZWYgPSAodHlwZW9mICh0aGlzLiRjaGFuZ2VzLmdldFR5cGUoKSkgIT09IFwic3RyaW5nXCIpO1xuICAgICAgICB0aGlzLiRpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBrZXkpIHtcbiAgICAgICAgICAgIGNoYW5nZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgcmVmSWQ6IF90aGlzLiRjaGFuZ2VzLnJlZklkLFxuICAgICAgICAgICAgICAgIG9wOiBleHBvcnRzLk9QRVJBVElPTi5ERUxFVEUsXG4gICAgICAgICAgICAgICAgZmllbGQ6IGtleSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWU6IGl0ZW1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKG5lZWRSZW1vdmVSZWYpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy4kY2hhbmdlcy5yb290LnJlbW92ZVJlZihpdGVtWyckY2hhbmdlcyddLnJlZklkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNwbGljZU9uZShhcnIsIGluZGV4KSB7XG4gICAgICAgIC8vIG1hbnVhbGx5IHNwbGljZSBhbiBhcnJheVxuICAgICAgICBpZiAoaW5kZXggPT09IC0xIHx8IGluZGV4ID49IGFyci5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGVuID0gYXJyLmxlbmd0aCAtIDE7XG4gICAgICAgIGZvciAodmFyIGkgPSBpbmRleDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBhcnJbaV0gPSBhcnJbaSArIDFdO1xuICAgICAgICB9XG4gICAgICAgIGFyci5sZW5ndGggPSBsZW47XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHZhciBERUZBVUxUX1NPUlQgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICB2YXIgQSA9IGEudG9TdHJpbmcoKTtcbiAgICAgICAgdmFyIEIgPSBiLnRvU3RyaW5nKCk7XG4gICAgICAgIGlmIChBIDwgQilcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgZWxzZSBpZiAoQSA+IEIpXG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBnZXRBcnJheVByb3h5KHZhbHVlKSB7XG4gICAgICAgIHZhbHVlWyckcHJveHknXSA9IHRydWU7XG4gICAgICAgIC8vXG4gICAgICAgIC8vIGNvbXBhdGliaWxpdHkgd2l0aCBAY29seXNldXMvc2NoZW1hIDAuNS54XG4gICAgICAgIC8vIC0gYWxsb3cgYG1hcFtcImtleVwiXWBcbiAgICAgICAgLy8gLSBhbGxvdyBgbWFwW1wia2V5XCJdID0gXCJ4eHhcImBcbiAgICAgICAgLy8gLSBhbGxvdyBgZGVsZXRlIG1hcFtcImtleVwiXWBcbiAgICAgICAgLy9cbiAgICAgICAgdmFsdWUgPSBuZXcgUHJveHkodmFsdWUsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKG9iaiwgcHJvcCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKHByb3ApICE9PSBcInN5bWJvbFwiICYmXG4gICAgICAgICAgICAgICAgICAgICFpc05hTihwcm9wKSAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTc1Nzg3Lzg5MjY5OFxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqLmF0KHByb3ApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9ialtwcm9wXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAob2JqLCBwcm9wLCBzZXRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKHByb3ApICE9PSBcInN5bWJvbFwiICYmXG4gICAgICAgICAgICAgICAgICAgICFpc05hTihwcm9wKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXhlcyA9IEFycmF5LmZyb20ob2JqWyckaXRlbXMnXS5rZXlzKCkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gcGFyc2VJbnQoaW5kZXhlc1twcm9wXSB8fCBwcm9wKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNldFZhbHVlID09PSB1bmRlZmluZWQgfHwgc2V0VmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5kZWxldGVBdChrZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNldEF0KGtleSwgc2V0VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvYmpbcHJvcF0gPSBzZXRWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVsZXRlUHJvcGVydHk6IGZ1bmN0aW9uIChvYmosIHByb3ApIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChwcm9wKSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICBvYmouZGVsZXRlQXQocHJvcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgb2JqW3Byb3BdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoYXM6IGZ1bmN0aW9uIChvYmosIGtleSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKGtleSkgIT09IFwic3ltYm9sXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgIWlzTmFOKE51bWJlcihrZXkpKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqWyckaXRlbXMnXS5oYXMoTnVtYmVyKGtleSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5oYXMob2JqLCBrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICB2YXIgQXJyYXlTY2hlbWEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEFycmF5U2NoZW1hKCkge1xuICAgICAgICAgICAgdmFyIGl0ZW1zID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGl0ZW1zW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiRjaGFuZ2VzID0gbmV3IENoYW5nZVRyZWUodGhpcyk7XG4gICAgICAgICAgICB0aGlzLiRpdGVtcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIHRoaXMuJGluZGV4ZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICB0aGlzLiRyZWZJZCA9IDA7XG4gICAgICAgICAgICB0aGlzLnB1c2guYXBwbHkodGhpcywgaXRlbXMpO1xuICAgICAgICB9XG4gICAgICAgIEFycmF5U2NoZW1hLnByb3RvdHlwZS5vbkFkZCA9IGZ1bmN0aW9uIChjYWxsYmFjaywgdHJpZ2dlckFsbCkge1xuICAgICAgICAgICAgaWYgKHRyaWdnZXJBbGwgPT09IHZvaWQgMCkgeyB0cmlnZ2VyQWxsID0gdHJ1ZTsgfVxuICAgICAgICAgICAgcmV0dXJuIGFkZENhbGxiYWNrKCh0aGlzLiRjYWxsYmFja3MgfHwgKHRoaXMuJGNhbGxiYWNrcyA9IHt9KSksIGV4cG9ydHMuT1BFUkFUSU9OLkFERCwgY2FsbGJhY2ssICh0cmlnZ2VyQWxsKVxuICAgICAgICAgICAgICAgID8gdGhpcy4kaXRlbXNcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH07XG4gICAgICAgIEFycmF5U2NoZW1hLnByb3RvdHlwZS5vblJlbW92ZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykgeyByZXR1cm4gYWRkQ2FsbGJhY2sodGhpcy4kY2FsbGJhY2tzIHx8ICh0aGlzLiRjYWxsYmFja3MgPSB7fSksIGV4cG9ydHMuT1BFUkFUSU9OLkRFTEVURSwgY2FsbGJhY2spOyB9O1xuICAgICAgICBBcnJheVNjaGVtYS5wcm90b3R5cGUub25DaGFuZ2UgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsgcmV0dXJuIGFkZENhbGxiYWNrKHRoaXMuJGNhbGxiYWNrcyB8fCAodGhpcy4kY2FsbGJhY2tzID0ge30pLCBleHBvcnRzLk9QRVJBVElPTi5SRVBMQUNFLCBjYWxsYmFjayk7IH07XG4gICAgICAgIEFycmF5U2NoZW1hLmlzID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAvLyB0eXBlIGZvcm1hdDogW1wic3RyaW5nXCJdXG4gICAgICAgICAgICBBcnJheS5pc0FycmF5KHR5cGUpIHx8XG4gICAgICAgICAgICAgICAgLy8gdHlwZSBmb3JtYXQ6IHsgYXJyYXk6IFwic3RyaW5nXCIgfVxuICAgICAgICAgICAgICAgICh0eXBlWydhcnJheSddICE9PSB1bmRlZmluZWQpKTtcbiAgICAgICAgfTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5U2NoZW1hLnByb3RvdHlwZSwgXCJsZW5ndGhcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGl0ZW1zLnNpemU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGxpY2UodmFsdWUsIHRoaXMubGVuZ3RoIC0gdmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgQXJyYXlTY2hlbWEucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBsYXN0SW5kZXg7XG4gICAgICAgICAgICB2YWx1ZXMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAvLyBzZXQgXCJpbmRleFwiIGZvciByZWZlcmVuY2UuXG4gICAgICAgICAgICAgICAgbGFzdEluZGV4ID0gX3RoaXMuJHJlZklkKys7XG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0QXQobGFzdEluZGV4LCB2YWx1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBsYXN0SW5kZXg7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZW1vdmVzIHRoZSBsYXN0IGVsZW1lbnQgZnJvbSBhbiBhcnJheSBhbmQgcmV0dXJucyBpdC5cbiAgICAgICAgICovXG4gICAgICAgIEFycmF5U2NoZW1hLnByb3RvdHlwZS5wb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gQXJyYXkuZnJvbSh0aGlzLiRpbmRleGVzLnZhbHVlcygpKS5wb3AoKTtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiRjaGFuZ2VzLmRlbGV0ZShrZXkpO1xuICAgICAgICAgICAgdGhpcy4kaW5kZXhlcy5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuJGl0ZW1zLmdldChrZXkpO1xuICAgICAgICAgICAgdGhpcy4kaXRlbXMuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIEFycmF5U2NoZW1hLnByb3RvdHlwZS5hdCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIEZJWE1FOiB0aGlzIHNob3VsZCBiZSBPKDEpXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgaW5kZXggPSBNYXRoLnRydW5jKGluZGV4KSB8fCAwO1xuICAgICAgICAgICAgLy8gQWxsb3cgbmVnYXRpdmUgaW5kZXhpbmcgZnJvbSB0aGUgZW5kXG4gICAgICAgICAgICBpZiAoaW5kZXggPCAwKVxuICAgICAgICAgICAgICAgIGluZGV4ICs9IHRoaXMubGVuZ3RoO1xuICAgICAgICAgICAgLy8gT09CIGFjY2VzcyBpcyBndWFyYW50ZWVkIHRvIHJldHVybiB1bmRlZmluZWRcbiAgICAgICAgICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gdGhpcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHZhciBrZXkgPSBBcnJheS5mcm9tKHRoaXMuJGl0ZW1zLmtleXMoKSlbaW5kZXhdO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGl0ZW1zLmdldChrZXkpO1xuICAgICAgICB9O1xuICAgICAgICBBcnJheVNjaGVtYS5wcm90b3R5cGUuc2V0QXQgPSBmdW5jdGlvbiAoaW5kZXgsIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQXJyYXlTY2hlbWEgaXRlbXMgY2Fubm90IGJlIG51bGwgbm9yIHVuZGVmaW5lZDsgVXNlIGBkZWxldGVBdChpbmRleClgIGluc3RlYWQuXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHNraXAgaWYgdGhlIHZhbHVlIGlzIHRoZSBzYW1lIGFzIGNhY2hlZC5cbiAgICAgICAgICAgIGlmICh0aGlzLiRpdGVtcy5nZXQoaW5kZXgpID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWx1ZVsnJGNoYW5nZXMnXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFsdWVbJyRjaGFuZ2VzJ10uc2V0UGFyZW50KHRoaXMsIHRoaXMuJGNoYW5nZXMucm9vdCwgaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG9wZXJhdGlvbiA9IChfYiA9IChfYSA9IHRoaXMuJGNoYW5nZXMuaW5kZXhlc1tpbmRleF0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5vcCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogZXhwb3J0cy5PUEVSQVRJT04uQUREO1xuICAgICAgICAgICAgdGhpcy4kY2hhbmdlcy5pbmRleGVzW2luZGV4XSA9IGluZGV4O1xuICAgICAgICAgICAgdGhpcy4kaW5kZXhlcy5zZXQoaW5kZXgsIGluZGV4KTtcbiAgICAgICAgICAgIHRoaXMuJGl0ZW1zLnNldChpbmRleCwgdmFsdWUpO1xuICAgICAgICAgICAgdGhpcy4kY2hhbmdlcy5jaGFuZ2UoaW5kZXgsIG9wZXJhdGlvbik7XG4gICAgICAgIH07XG4gICAgICAgIEFycmF5U2NoZW1hLnByb3RvdHlwZS5kZWxldGVBdCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgdmFyIGtleSA9IEFycmF5LmZyb20odGhpcy4kaXRlbXMua2V5cygpKVtpbmRleF07XG4gICAgICAgICAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kZGVsZXRlQXQoa2V5KTtcbiAgICAgICAgfTtcbiAgICAgICAgQXJyYXlTY2hlbWEucHJvdG90eXBlLiRkZWxldGVBdCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgLy8gZGVsZXRlIGF0IGludGVybmFsIGluZGV4XG4gICAgICAgICAgICB0aGlzLiRjaGFuZ2VzLmRlbGV0ZShpbmRleCk7XG4gICAgICAgICAgICB0aGlzLiRpbmRleGVzLmRlbGV0ZShpbmRleCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kaXRlbXMuZGVsZXRlKGluZGV4KTtcbiAgICAgICAgfTtcbiAgICAgICAgQXJyYXlTY2hlbWEucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKGNoYW5nZXMpIHtcbiAgICAgICAgICAgIC8vIGRpc2NhcmQgcHJldmlvdXMgb3BlcmF0aW9ucy5cbiAgICAgICAgICAgIHRoaXMuJGNoYW5nZXMuZGlzY2FyZCh0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuJGNoYW5nZXMuaW5kZXhlcyA9IHt9O1xuICAgICAgICAgICAgLy8gY2xlYXIgcHJldmlvdXMgaW5kZXhlc1xuICAgICAgICAgICAgdGhpcy4kaW5kZXhlcy5jbGVhcigpO1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIFdoZW4gZGVjb2Rpbmc6XG4gICAgICAgICAgICAvLyAtIGVucXVldWUgaXRlbXMgZm9yIERFTEVURSBjYWxsYmFjay5cbiAgICAgICAgICAgIC8vIC0gZmxhZyBjaGlsZCBpdGVtcyBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uLlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIGlmIChjaGFuZ2VzKSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlQ2hpbGRSZWZzLmNhbGwodGhpcywgY2hhbmdlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjbGVhciBpdGVtc1xuICAgICAgICAgICAgdGhpcy4kaXRlbXMuY2xlYXIoKTtcbiAgICAgICAgICAgIHRoaXMuJGNoYW5nZXMub3BlcmF0aW9uKHsgaW5kZXg6IDAsIG9wOiBleHBvcnRzLk9QRVJBVElPTi5DTEVBUiB9KTtcbiAgICAgICAgICAgIC8vIHRvdWNoIGFsbCBzdHJ1Y3R1cmVzIHVudGlsIHJlYWNoIHJvb3RcbiAgICAgICAgICAgIHRoaXMuJGNoYW5nZXMudG91Y2hQYXJlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb21iaW5lcyB0d28gb3IgbW9yZSBhcnJheXMuXG4gICAgICAgICAqIEBwYXJhbSBpdGVtcyBBZGRpdGlvbmFsIGl0ZW1zIHRvIGFkZCB0byB0aGUgZW5kIG9mIGFycmF5MS5cbiAgICAgICAgICovXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgQXJyYXlTY2hlbWEucHJvdG90eXBlLmNvbmNhdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBpdGVtc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyAoQXJyYXlTY2hlbWEuYmluZC5hcHBseShBcnJheVNjaGVtYSwgX19zcHJlYWRBcnJheShbdm9pZCAwXSwgKF9hID0gQXJyYXkuZnJvbSh0aGlzLiRpdGVtcy52YWx1ZXMoKSkpLmNvbmNhdC5hcHBseShfYSwgaXRlbXMpLCBmYWxzZSkpKSgpO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQWRkcyBhbGwgdGhlIGVsZW1lbnRzIG9mIGFuIGFycmF5IHNlcGFyYXRlZCBieSB0aGUgc3BlY2lmaWVkIHNlcGFyYXRvciBzdHJpbmcuXG4gICAgICAgICAqIEBwYXJhbSBzZXBhcmF0b3IgQSBzdHJpbmcgdXNlZCB0byBzZXBhcmF0ZSBvbmUgZWxlbWVudCBvZiBhbiBhcnJheSBmcm9tIHRoZSBuZXh0IGluIHRoZSByZXN1bHRpbmcgU3RyaW5nLiBJZiBvbWl0dGVkLCB0aGUgYXJyYXkgZWxlbWVudHMgYXJlIHNlcGFyYXRlZCB3aXRoIGEgY29tbWEuXG4gICAgICAgICAqL1xuICAgICAgICBBcnJheVNjaGVtYS5wcm90b3R5cGUuam9pbiA9IGZ1bmN0aW9uIChzZXBhcmF0b3IpIHtcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuJGl0ZW1zLnZhbHVlcygpKS5qb2luKHNlcGFyYXRvcik7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXZlcnNlcyB0aGUgZWxlbWVudHMgaW4gYW4gQXJyYXkuXG4gICAgICAgICAqL1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIEFycmF5U2NoZW1hLnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gQXJyYXkuZnJvbSh0aGlzLiRpdGVtcy5rZXlzKCkpO1xuICAgICAgICAgICAgdmFyIHJldmVyc2VkSXRlbXMgPSBBcnJheS5mcm9tKHRoaXMuJGl0ZW1zLnZhbHVlcygpKS5yZXZlcnNlKCk7XG4gICAgICAgICAgICByZXZlcnNlZEl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGkpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRBdChpbmRleGVzW2ldLCBpdGVtKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZW1vdmVzIHRoZSBmaXJzdCBlbGVtZW50IGZyb20gYW4gYXJyYXkgYW5kIHJldHVybnMgaXQuXG4gICAgICAgICAqL1xuICAgICAgICBBcnJheVNjaGVtYS5wcm90b3R5cGUuc2hpZnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IEFycmF5LmZyb20odGhpcy4kaXRlbXMua2V5cygpKTtcbiAgICAgICAgICAgIHZhciBzaGlmdEF0ID0gaW5kZXhlcy5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKHNoaWZ0QXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLiRpdGVtcy5nZXQoc2hpZnRBdCk7XG4gICAgICAgICAgICB0aGlzLiRkZWxldGVBdChzaGlmdEF0KTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgYSBzZWN0aW9uIG9mIGFuIGFycmF5LlxuICAgICAgICAgKiBAcGFyYW0gc3RhcnQgVGhlIGJlZ2lubmluZyBvZiB0aGUgc3BlY2lmaWVkIHBvcnRpb24gb2YgdGhlIGFycmF5LlxuICAgICAgICAgKiBAcGFyYW0gZW5kIFRoZSBlbmQgb2YgdGhlIHNwZWNpZmllZCBwb3J0aW9uIG9mIHRoZSBhcnJheS4gVGhpcyBpcyBleGNsdXNpdmUgb2YgdGhlIGVsZW1lbnQgYXQgdGhlIGluZGV4ICdlbmQnLlxuICAgICAgICAgKi9cbiAgICAgICAgQXJyYXlTY2hlbWEucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24gKHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgICAgIHZhciBzbGljZWQgPSBuZXcgQXJyYXlTY2hlbWEoKTtcbiAgICAgICAgICAgIHNsaWNlZC5wdXNoLmFwcGx5KHNsaWNlZCwgQXJyYXkuZnJvbSh0aGlzLiRpdGVtcy52YWx1ZXMoKSkuc2xpY2Uoc3RhcnQsIGVuZCkpO1xuICAgICAgICAgICAgcmV0dXJuIHNsaWNlZDtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNvcnRzIGFuIGFycmF5LlxuICAgICAgICAgKiBAcGFyYW0gY29tcGFyZUZuIEZ1bmN0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSBvcmRlciBvZiB0aGUgZWxlbWVudHMuIEl0IGlzIGV4cGVjdGVkIHRvIHJldHVyblxuICAgICAgICAgKiBhIG5lZ2F0aXZlIHZhbHVlIGlmIGZpcnN0IGFyZ3VtZW50IGlzIGxlc3MgdGhhbiBzZWNvbmQgYXJndW1lbnQsIHplcm8gaWYgdGhleSdyZSBlcXVhbCBhbmQgYSBwb3NpdGl2ZVxuICAgICAgICAgKiB2YWx1ZSBvdGhlcndpc2UuIElmIG9taXR0ZWQsIHRoZSBlbGVtZW50cyBhcmUgc29ydGVkIGluIGFzY2VuZGluZywgQVNDSUkgY2hhcmFjdGVyIG9yZGVyLlxuICAgICAgICAgKiBgYGB0c1xuICAgICAgICAgKiBbMTEsMiwyMiwxXS5zb3J0KChhLCBiKSA9PiBhIC0gYilcbiAgICAgICAgICogYGBgXG4gICAgICAgICAqL1xuICAgICAgICBBcnJheVNjaGVtYS5wcm90b3R5cGUuc29ydCA9IGZ1bmN0aW9uIChjb21wYXJlRm4pIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoY29tcGFyZUZuID09PSB2b2lkIDApIHsgY29tcGFyZUZuID0gREVGQVVMVF9TT1JUOyB9XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IEFycmF5LmZyb20odGhpcy4kaXRlbXMua2V5cygpKTtcbiAgICAgICAgICAgIHZhciBzb3J0ZWRJdGVtcyA9IEFycmF5LmZyb20odGhpcy4kaXRlbXMudmFsdWVzKCkpLnNvcnQoY29tcGFyZUZuKTtcbiAgICAgICAgICAgIHNvcnRlZEl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGkpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRBdChpbmRleGVzW2ldLCBpdGVtKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZW1vdmVzIGVsZW1lbnRzIGZyb20gYW4gYXJyYXkgYW5kLCBpZiBuZWNlc3NhcnksIGluc2VydHMgbmV3IGVsZW1lbnRzIGluIHRoZWlyIHBsYWNlLCByZXR1cm5pbmcgdGhlIGRlbGV0ZWQgZWxlbWVudHMuXG4gICAgICAgICAqIEBwYXJhbSBzdGFydCBUaGUgemVyby1iYXNlZCBsb2NhdGlvbiBpbiB0aGUgYXJyYXkgZnJvbSB3aGljaCB0byBzdGFydCByZW1vdmluZyBlbGVtZW50cy5cbiAgICAgICAgICogQHBhcmFtIGRlbGV0ZUNvdW50IFRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gcmVtb3ZlLlxuICAgICAgICAgKiBAcGFyYW0gaXRlbXMgRWxlbWVudHMgdG8gaW5zZXJ0IGludG8gdGhlIGFycmF5IGluIHBsYWNlIG9mIHRoZSBkZWxldGVkIGVsZW1lbnRzLlxuICAgICAgICAgKi9cbiAgICAgICAgQXJyYXlTY2hlbWEucHJvdG90eXBlLnNwbGljZSA9IGZ1bmN0aW9uIChzdGFydCwgZGVsZXRlQ291bnQpIHtcbiAgICAgICAgICAgIGlmIChkZWxldGVDb3VudCA9PT0gdm9pZCAwKSB7IGRlbGV0ZUNvdW50ID0gdGhpcy5sZW5ndGggLSBzdGFydDsgfVxuICAgICAgICAgICAgdmFyIGl0ZW1zID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGl0ZW1zW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSBBcnJheS5mcm9tKHRoaXMuJGl0ZW1zLmtleXMoKSk7XG4gICAgICAgICAgICB2YXIgcmVtb3ZlZEl0ZW1zID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBzdGFydCArIGRlbGV0ZUNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICByZW1vdmVkSXRlbXMucHVzaCh0aGlzLiRpdGVtcy5nZXQoaW5kZXhlc1tpXSkpO1xuICAgICAgICAgICAgICAgIHRoaXMuJGRlbGV0ZUF0KGluZGV4ZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0QXQoc3RhcnQgKyBpLCBpdGVtc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVtb3ZlZEl0ZW1zO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogSW5zZXJ0cyBuZXcgZWxlbWVudHMgYXQgdGhlIHN0YXJ0IG9mIGFuIGFycmF5LlxuICAgICAgICAgKiBAcGFyYW0gaXRlbXMgIEVsZW1lbnRzIHRvIGluc2VydCBhdCB0aGUgc3RhcnQgb2YgdGhlIEFycmF5LlxuICAgICAgICAgKi9cbiAgICAgICAgQXJyYXlTY2hlbWEucHJvdG90eXBlLnVuc2hpZnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGl0ZW1zID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGl0ZW1zW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgYWRkZWRMZW5ndGggPSBpdGVtcy5sZW5ndGg7XG4gICAgICAgICAgICAvLyBjb25zdCBpbmRleGVzID0gQXJyYXkuZnJvbSh0aGlzLiRpdGVtcy5rZXlzKCkpO1xuICAgICAgICAgICAgdmFyIHByZXZpb3VzVmFsdWVzID0gQXJyYXkuZnJvbSh0aGlzLiRpdGVtcy52YWx1ZXMoKSk7XG4gICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0QXQoaSwgaXRlbSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHByZXZpb3VzVmFsdWVzLmZvckVhY2goZnVuY3Rpb24gKHByZXZpb3VzVmFsdWUsIGkpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRBdChhZGRlZExlbmd0aCArIGksIHByZXZpb3VzVmFsdWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gbGVuZ3RoICsgYWRkZWRMZW5ndGg7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhIHZhbHVlIGluIGFuIGFycmF5LlxuICAgICAgICAgKiBAcGFyYW0gc2VhcmNoRWxlbWVudCBUaGUgdmFsdWUgdG8gbG9jYXRlIGluIHRoZSBhcnJheS5cbiAgICAgICAgICogQHBhcmFtIGZyb21JbmRleCBUaGUgYXJyYXkgaW5kZXggYXQgd2hpY2ggdG8gYmVnaW4gdGhlIHNlYXJjaC4gSWYgZnJvbUluZGV4IGlzIG9taXR0ZWQsIHRoZSBzZWFyY2ggc3RhcnRzIGF0IGluZGV4IDAuXG4gICAgICAgICAqL1xuICAgICAgICBBcnJheVNjaGVtYS5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIChzZWFyY2hFbGVtZW50LCBmcm9tSW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuJGl0ZW1zLnZhbHVlcygpKS5pbmRleE9mKHNlYXJjaEVsZW1lbnQsIGZyb21JbmRleCk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbGFzdCBvY2N1cnJlbmNlIG9mIGEgc3BlY2lmaWVkIHZhbHVlIGluIGFuIGFycmF5LlxuICAgICAgICAgKiBAcGFyYW0gc2VhcmNoRWxlbWVudCBUaGUgdmFsdWUgdG8gbG9jYXRlIGluIHRoZSBhcnJheS5cbiAgICAgICAgICogQHBhcmFtIGZyb21JbmRleCBUaGUgYXJyYXkgaW5kZXggYXQgd2hpY2ggdG8gYmVnaW4gdGhlIHNlYXJjaC4gSWYgZnJvbUluZGV4IGlzIG9taXR0ZWQsIHRoZSBzZWFyY2ggc3RhcnRzIGF0IHRoZSBsYXN0IGluZGV4IGluIHRoZSBhcnJheS5cbiAgICAgICAgICovXG4gICAgICAgIEFycmF5U2NoZW1hLnByb3RvdHlwZS5sYXN0SW5kZXhPZiA9IGZ1bmN0aW9uIChzZWFyY2hFbGVtZW50LCBmcm9tSW5kZXgpIHtcbiAgICAgICAgICAgIGlmIChmcm9tSW5kZXggPT09IHZvaWQgMCkgeyBmcm9tSW5kZXggPSB0aGlzLmxlbmd0aCAtIDE7IH1cbiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuJGl0ZW1zLnZhbHVlcygpKS5sYXN0SW5kZXhPZihzZWFyY2hFbGVtZW50LCBmcm9tSW5kZXgpO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFsbCB0aGUgbWVtYmVycyBvZiBhbiBhcnJheSBzYXRpc2Z5IHRoZSBzcGVjaWZpZWQgdGVzdC5cbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrZm4gQSBmdW5jdGlvbiB0aGF0IGFjY2VwdHMgdXAgdG8gdGhyZWUgYXJndW1lbnRzLiBUaGUgZXZlcnkgbWV0aG9kIGNhbGxzXG4gICAgICAgICAqIHRoZSBjYWxsYmFja2ZuIGZ1bmN0aW9uIGZvciBlYWNoIGVsZW1lbnQgaW4gdGhlIGFycmF5IHVudGlsIHRoZSBjYWxsYmFja2ZuIHJldHVybnMgYSB2YWx1ZVxuICAgICAgICAgKiB3aGljaCBpcyBjb2VyY2libGUgdG8gdGhlIEJvb2xlYW4gdmFsdWUgZmFsc2UsIG9yIHVudGlsIHRoZSBlbmQgb2YgdGhlIGFycmF5LlxuICAgICAgICAgKiBAcGFyYW0gdGhpc0FyZyBBbiBvYmplY3QgdG8gd2hpY2ggdGhlIHRoaXMga2V5d29yZCBjYW4gcmVmZXIgaW4gdGhlIGNhbGxiYWNrZm4gZnVuY3Rpb24uXG4gICAgICAgICAqIElmIHRoaXNBcmcgaXMgb21pdHRlZCwgdW5kZWZpbmVkIGlzIHVzZWQgYXMgdGhlIHRoaXMgdmFsdWUuXG4gICAgICAgICAqL1xuICAgICAgICBBcnJheVNjaGVtYS5wcm90b3R5cGUuZXZlcnkgPSBmdW5jdGlvbiAoY2FsbGJhY2tmbiwgdGhpc0FyZykge1xuICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy4kaXRlbXMudmFsdWVzKCkpLmV2ZXJ5KGNhbGxiYWNrZm4sIHRoaXNBcmcpO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBzcGVjaWZpZWQgY2FsbGJhY2sgZnVuY3Rpb24gcmV0dXJucyB0cnVlIGZvciBhbnkgZWxlbWVudCBvZiBhbiBhcnJheS5cbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrZm4gQSBmdW5jdGlvbiB0aGF0IGFjY2VwdHMgdXAgdG8gdGhyZWUgYXJndW1lbnRzLiBUaGUgc29tZSBtZXRob2QgY2FsbHNcbiAgICAgICAgICogdGhlIGNhbGxiYWNrZm4gZnVuY3Rpb24gZm9yIGVhY2ggZWxlbWVudCBpbiB0aGUgYXJyYXkgdW50aWwgdGhlIGNhbGxiYWNrZm4gcmV0dXJucyBhIHZhbHVlXG4gICAgICAgICAqIHdoaWNoIGlzIGNvZXJjaWJsZSB0byB0aGUgQm9vbGVhbiB2YWx1ZSB0cnVlLCBvciB1bnRpbCB0aGUgZW5kIG9mIHRoZSBhcnJheS5cbiAgICAgICAgICogQHBhcmFtIHRoaXNBcmcgQW4gb2JqZWN0IHRvIHdoaWNoIHRoZSB0aGlzIGtleXdvcmQgY2FuIHJlZmVyIGluIHRoZSBjYWxsYmFja2ZuIGZ1bmN0aW9uLlxuICAgICAgICAgKiBJZiB0aGlzQXJnIGlzIG9taXR0ZWQsIHVuZGVmaW5lZCBpcyB1c2VkIGFzIHRoZSB0aGlzIHZhbHVlLlxuICAgICAgICAgKi9cbiAgICAgICAgQXJyYXlTY2hlbWEucHJvdG90eXBlLnNvbWUgPSBmdW5jdGlvbiAoY2FsbGJhY2tmbiwgdGhpc0FyZykge1xuICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy4kaXRlbXMudmFsdWVzKCkpLnNvbWUoY2FsbGJhY2tmbiwgdGhpc0FyZyk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQZXJmb3JtcyB0aGUgc3BlY2lmaWVkIGFjdGlvbiBmb3IgZWFjaCBlbGVtZW50IGluIGFuIGFycmF5LlxuICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2tmbiAgQSBmdW5jdGlvbiB0aGF0IGFjY2VwdHMgdXAgdG8gdGhyZWUgYXJndW1lbnRzLiBmb3JFYWNoIGNhbGxzIHRoZSBjYWxsYmFja2ZuIGZ1bmN0aW9uIG9uZSB0aW1lIGZvciBlYWNoIGVsZW1lbnQgaW4gdGhlIGFycmF5LlxuICAgICAgICAgKiBAcGFyYW0gdGhpc0FyZyAgQW4gb2JqZWN0IHRvIHdoaWNoIHRoZSB0aGlzIGtleXdvcmQgY2FuIHJlZmVyIGluIHRoZSBjYWxsYmFja2ZuIGZ1bmN0aW9uLiBJZiB0aGlzQXJnIGlzIG9taXR0ZWQsIHVuZGVmaW5lZCBpcyB1c2VkIGFzIHRoZSB0aGlzIHZhbHVlLlxuICAgICAgICAgKi9cbiAgICAgICAgQXJyYXlTY2hlbWEucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoY2FsbGJhY2tmbiwgdGhpc0FyZykge1xuICAgICAgICAgICAgQXJyYXkuZnJvbSh0aGlzLiRpdGVtcy52YWx1ZXMoKSkuZm9yRWFjaChjYWxsYmFja2ZuLCB0aGlzQXJnKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGxzIGEgZGVmaW5lZCBjYWxsYmFjayBmdW5jdGlvbiBvbiBlYWNoIGVsZW1lbnQgb2YgYW4gYXJyYXksIGFuZCByZXR1cm5zIGFuIGFycmF5IHRoYXQgY29udGFpbnMgdGhlIHJlc3VsdHMuXG4gICAgICAgICAqIEBwYXJhbSBjYWxsYmFja2ZuIEEgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIHVwIHRvIHRocmVlIGFyZ3VtZW50cy4gVGhlIG1hcCBtZXRob2QgY2FsbHMgdGhlIGNhbGxiYWNrZm4gZnVuY3Rpb24gb25lIHRpbWUgZm9yIGVhY2ggZWxlbWVudCBpbiB0aGUgYXJyYXkuXG4gICAgICAgICAqIEBwYXJhbSB0aGlzQXJnIEFuIG9iamVjdCB0byB3aGljaCB0aGUgdGhpcyBrZXl3b3JkIGNhbiByZWZlciBpbiB0aGUgY2FsbGJhY2tmbiBmdW5jdGlvbi4gSWYgdGhpc0FyZyBpcyBvbWl0dGVkLCB1bmRlZmluZWQgaXMgdXNlZCBhcyB0aGUgdGhpcyB2YWx1ZS5cbiAgICAgICAgICovXG4gICAgICAgIEFycmF5U2NoZW1hLnByb3RvdHlwZS5tYXAgPSBmdW5jdGlvbiAoY2FsbGJhY2tmbiwgdGhpc0FyZykge1xuICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy4kaXRlbXMudmFsdWVzKCkpLm1hcChjYWxsYmFja2ZuLCB0aGlzQXJnKTtcbiAgICAgICAgfTtcbiAgICAgICAgQXJyYXlTY2hlbWEucHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uIChjYWxsYmFja2ZuLCB0aGlzQXJnKSB7XG4gICAgICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLiRpdGVtcy52YWx1ZXMoKSkuZmlsdGVyKGNhbGxiYWNrZm4sIHRoaXNBcmcpO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsbHMgdGhlIHNwZWNpZmllZCBjYWxsYmFjayBmdW5jdGlvbiBmb3IgYWxsIHRoZSBlbGVtZW50cyBpbiBhbiBhcnJheS4gVGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gaXMgdGhlIGFjY3VtdWxhdGVkIHJlc3VsdCwgYW5kIGlzIHByb3ZpZGVkIGFzIGFuIGFyZ3VtZW50IGluIHRoZSBuZXh0IGNhbGwgdG8gdGhlIGNhbGxiYWNrIGZ1bmN0aW9uLlxuICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2tmbiBBIGZ1bmN0aW9uIHRoYXQgYWNjZXB0cyB1cCB0byBmb3VyIGFyZ3VtZW50cy4gVGhlIHJlZHVjZSBtZXRob2QgY2FsbHMgdGhlIGNhbGxiYWNrZm4gZnVuY3Rpb24gb25lIHRpbWUgZm9yIGVhY2ggZWxlbWVudCBpbiB0aGUgYXJyYXkuXG4gICAgICAgICAqIEBwYXJhbSBpbml0aWFsVmFsdWUgSWYgaW5pdGlhbFZhbHVlIGlzIHNwZWNpZmllZCwgaXQgaXMgdXNlZCBhcyB0aGUgaW5pdGlhbCB2YWx1ZSB0byBzdGFydCB0aGUgYWNjdW11bGF0aW9uLiBUaGUgZmlyc3QgY2FsbCB0byB0aGUgY2FsbGJhY2tmbiBmdW5jdGlvbiBwcm92aWRlcyB0aGlzIHZhbHVlIGFzIGFuIGFyZ3VtZW50IGluc3RlYWQgb2YgYW4gYXJyYXkgdmFsdWUuXG4gICAgICAgICAqL1xuICAgICAgICBBcnJheVNjaGVtYS5wcm90b3R5cGUucmVkdWNlID0gZnVuY3Rpb24gKGNhbGxiYWNrZm4sIGluaXRpYWxWYWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5yZWR1Y2UuYXBwbHkoQXJyYXkuZnJvbSh0aGlzLiRpdGVtcy52YWx1ZXMoKSksIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxscyB0aGUgc3BlY2lmaWVkIGNhbGxiYWNrIGZ1bmN0aW9uIGZvciBhbGwgdGhlIGVsZW1lbnRzIGluIGFuIGFycmF5LCBpbiBkZXNjZW5kaW5nIG9yZGVyLiBUaGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBjYWxsYmFjayBmdW5jdGlvbiBpcyB0aGUgYWNjdW11bGF0ZWQgcmVzdWx0LCBhbmQgaXMgcHJvdmlkZWQgYXMgYW4gYXJndW1lbnQgaW4gdGhlIG5leHQgY2FsbCB0byB0aGUgY2FsbGJhY2sgZnVuY3Rpb24uXG4gICAgICAgICAqIEBwYXJhbSBjYWxsYmFja2ZuIEEgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIHVwIHRvIGZvdXIgYXJndW1lbnRzLiBUaGUgcmVkdWNlUmlnaHQgbWV0aG9kIGNhbGxzIHRoZSBjYWxsYmFja2ZuIGZ1bmN0aW9uIG9uZSB0aW1lIGZvciBlYWNoIGVsZW1lbnQgaW4gdGhlIGFycmF5LlxuICAgICAgICAgKiBAcGFyYW0gaW5pdGlhbFZhbHVlIElmIGluaXRpYWxWYWx1ZSBpcyBzcGVjaWZpZWQsIGl0IGlzIHVzZWQgYXMgdGhlIGluaXRpYWwgdmFsdWUgdG8gc3RhcnQgdGhlIGFjY3VtdWxhdGlvbi4gVGhlIGZpcnN0IGNhbGwgdG8gdGhlIGNhbGxiYWNrZm4gZnVuY3Rpb24gcHJvdmlkZXMgdGhpcyB2YWx1ZSBhcyBhbiBhcmd1bWVudCBpbnN0ZWFkIG9mIGFuIGFycmF5IHZhbHVlLlxuICAgICAgICAgKi9cbiAgICAgICAgQXJyYXlTY2hlbWEucHJvdG90eXBlLnJlZHVjZVJpZ2h0ID0gZnVuY3Rpb24gKGNhbGxiYWNrZm4sIGluaXRpYWxWYWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5yZWR1Y2VSaWdodC5hcHBseShBcnJheS5mcm9tKHRoaXMuJGl0ZW1zLnZhbHVlcygpKSwgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBmaXJzdCBlbGVtZW50IGluIHRoZSBhcnJheSB3aGVyZSBwcmVkaWNhdGUgaXMgdHJ1ZSwgYW5kIHVuZGVmaW5lZFxuICAgICAgICAgKiBvdGhlcndpc2UuXG4gICAgICAgICAqIEBwYXJhbSBwcmVkaWNhdGUgZmluZCBjYWxscyBwcmVkaWNhdGUgb25jZSBmb3IgZWFjaCBlbGVtZW50IG9mIHRoZSBhcnJheSwgaW4gYXNjZW5kaW5nXG4gICAgICAgICAqIG9yZGVyLCB1bnRpbCBpdCBmaW5kcyBvbmUgd2hlcmUgcHJlZGljYXRlIHJldHVybnMgdHJ1ZS4gSWYgc3VjaCBhbiBlbGVtZW50IGlzIGZvdW5kLCBmaW5kXG4gICAgICAgICAqIGltbWVkaWF0ZWx5IHJldHVybnMgdGhhdCBlbGVtZW50IHZhbHVlLiBPdGhlcndpc2UsIGZpbmQgcmV0dXJucyB1bmRlZmluZWQuXG4gICAgICAgICAqIEBwYXJhbSB0aGlzQXJnIElmIHByb3ZpZGVkLCBpdCB3aWxsIGJlIHVzZWQgYXMgdGhlIHRoaXMgdmFsdWUgZm9yIGVhY2ggaW52b2NhdGlvbiBvZlxuICAgICAgICAgKiBwcmVkaWNhdGUuIElmIGl0IGlzIG5vdCBwcm92aWRlZCwgdW5kZWZpbmVkIGlzIHVzZWQgaW5zdGVhZC5cbiAgICAgICAgICovXG4gICAgICAgIEFycmF5U2NoZW1hLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy4kaXRlbXMudmFsdWVzKCkpLmZpbmQocHJlZGljYXRlLCB0aGlzQXJnKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBlbGVtZW50IGluIHRoZSBhcnJheSB3aGVyZSBwcmVkaWNhdGUgaXMgdHJ1ZSwgYW5kIC0xXG4gICAgICAgICAqIG90aGVyd2lzZS5cbiAgICAgICAgICogQHBhcmFtIHByZWRpY2F0ZSBmaW5kIGNhbGxzIHByZWRpY2F0ZSBvbmNlIGZvciBlYWNoIGVsZW1lbnQgb2YgdGhlIGFycmF5LCBpbiBhc2NlbmRpbmdcbiAgICAgICAgICogb3JkZXIsIHVudGlsIGl0IGZpbmRzIG9uZSB3aGVyZSBwcmVkaWNhdGUgcmV0dXJucyB0cnVlLiBJZiBzdWNoIGFuIGVsZW1lbnQgaXMgZm91bmQsXG4gICAgICAgICAqIGZpbmRJbmRleCBpbW1lZGlhdGVseSByZXR1cm5zIHRoYXQgZWxlbWVudCBpbmRleC4gT3RoZXJ3aXNlLCBmaW5kSW5kZXggcmV0dXJucyAtMS5cbiAgICAgICAgICogQHBhcmFtIHRoaXNBcmcgSWYgcHJvdmlkZWQsIGl0IHdpbGwgYmUgdXNlZCBhcyB0aGUgdGhpcyB2YWx1ZSBmb3IgZWFjaCBpbnZvY2F0aW9uIG9mXG4gICAgICAgICAqIHByZWRpY2F0ZS4gSWYgaXQgaXMgbm90IHByb3ZpZGVkLCB1bmRlZmluZWQgaXMgdXNlZCBpbnN0ZWFkLlxuICAgICAgICAgKi9cbiAgICAgICAgQXJyYXlTY2hlbWEucHJvdG90eXBlLmZpbmRJbmRleCA9IGZ1bmN0aW9uIChwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuJGl0ZW1zLnZhbHVlcygpKS5maW5kSW5kZXgocHJlZGljYXRlLCB0aGlzQXJnKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdGhlIHRoaXMgb2JqZWN0IGFmdGVyIGZpbGxpbmcgdGhlIHNlY3Rpb24gaWRlbnRpZmllZCBieSBzdGFydCBhbmQgZW5kIHdpdGggdmFsdWVcbiAgICAgICAgICogQHBhcmFtIHZhbHVlIHZhbHVlIHRvIGZpbGwgYXJyYXkgc2VjdGlvbiB3aXRoXG4gICAgICAgICAqIEBwYXJhbSBzdGFydCBpbmRleCB0byBzdGFydCBmaWxsaW5nIHRoZSBhcnJheSBhdC4gSWYgc3RhcnQgaXMgbmVnYXRpdmUsIGl0IGlzIHRyZWF0ZWQgYXNcbiAgICAgICAgICogbGVuZ3RoK3N0YXJ0IHdoZXJlIGxlbmd0aCBpcyB0aGUgbGVuZ3RoIG9mIHRoZSBhcnJheS5cbiAgICAgICAgICogQHBhcmFtIGVuZCBpbmRleCB0byBzdG9wIGZpbGxpbmcgdGhlIGFycmF5IGF0LiBJZiBlbmQgaXMgbmVnYXRpdmUsIGl0IGlzIHRyZWF0ZWQgYXNcbiAgICAgICAgICogbGVuZ3RoK2VuZC5cbiAgICAgICAgICovXG4gICAgICAgIEFycmF5U2NoZW1hLnByb3RvdHlwZS5maWxsID0gZnVuY3Rpb24gKHZhbHVlLCBzdGFydCwgZW5kKSB7XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gVE9ET1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFycmF5U2NoZW1hI2ZpbGwoKSBub3QgaW1wbGVtZW50ZWRcIik7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRoZSB0aGlzIG9iamVjdCBhZnRlciBjb3B5aW5nIGEgc2VjdGlvbiBvZiB0aGUgYXJyYXkgaWRlbnRpZmllZCBieSBzdGFydCBhbmQgZW5kXG4gICAgICAgICAqIHRvIHRoZSBzYW1lIGFycmF5IHN0YXJ0aW5nIGF0IHBvc2l0aW9uIHRhcmdldFxuICAgICAgICAgKiBAcGFyYW0gdGFyZ2V0IElmIHRhcmdldCBpcyBuZWdhdGl2ZSwgaXQgaXMgdHJlYXRlZCBhcyBsZW5ndGgrdGFyZ2V0IHdoZXJlIGxlbmd0aCBpcyB0aGVcbiAgICAgICAgICogbGVuZ3RoIG9mIHRoZSBhcnJheS5cbiAgICAgICAgICogQHBhcmFtIHN0YXJ0IElmIHN0YXJ0IGlzIG5lZ2F0aXZlLCBpdCBpcyB0cmVhdGVkIGFzIGxlbmd0aCtzdGFydC4gSWYgZW5kIGlzIG5lZ2F0aXZlLCBpdFxuICAgICAgICAgKiBpcyB0cmVhdGVkIGFzIGxlbmd0aCtlbmQuXG4gICAgICAgICAqIEBwYXJhbSBlbmQgSWYgbm90IHNwZWNpZmllZCwgbGVuZ3RoIG9mIHRoZSB0aGlzIG9iamVjdCBpcyB1c2VkIGFzIGl0cyBkZWZhdWx0IHZhbHVlLlxuICAgICAgICAgKi9cbiAgICAgICAgQXJyYXlTY2hlbWEucHJvdG90eXBlLmNvcHlXaXRoaW4gPSBmdW5jdGlvbiAodGFyZ2V0LCBzdGFydCwgZW5kKSB7XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gVE9ET1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFycmF5U2NoZW1hI2NvcHlXaXRoaW4oKSBub3QgaW1wbGVtZW50ZWRcIik7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIGFycmF5LlxuICAgICAgICAgKi9cbiAgICAgICAgQXJyYXlTY2hlbWEucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy4kaXRlbXMudG9TdHJpbmcoKTsgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYW4gYXJyYXkuIFRoZSBlbGVtZW50cyBhcmUgY29udmVydGVkIHRvIHN0cmluZyB1c2luZyB0aGVpciB0b0xvY2FsU3RyaW5nIG1ldGhvZHMuXG4gICAgICAgICAqL1xuICAgICAgICBBcnJheVNjaGVtYS5wcm90b3R5cGUudG9Mb2NhbGVTdHJpbmcgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLiRpdGVtcy50b0xvY2FsZVN0cmluZygpOyB9O1xuICAgICAgICAvKiogSXRlcmF0b3IgKi9cbiAgICAgICAgQXJyYXlTY2hlbWEucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLiRpdGVtcy52YWx1ZXMoKSlbU3ltYm9sLml0ZXJhdG9yXSgpO1xuICAgICAgICB9O1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlTY2hlbWEsIFN5bWJvbC5zcGVjaWVzLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXlTY2hlbWE7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIGFuIGl0ZXJhYmxlIG9mIGtleSwgdmFsdWUgcGFpcnMgZm9yIGV2ZXJ5IGVudHJ5IGluIHRoZSBhcnJheVxuICAgICAgICAgKi9cbiAgICAgICAgQXJyYXlTY2hlbWEucHJvdG90eXBlLmVudHJpZXMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLiRpdGVtcy5lbnRyaWVzKCk7IH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIGFuIGl0ZXJhYmxlIG9mIGtleXMgaW4gdGhlIGFycmF5XG4gICAgICAgICAqL1xuICAgICAgICBBcnJheVNjaGVtYS5wcm90b3R5cGUua2V5cyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuJGl0ZW1zLmtleXMoKTsgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgYW4gaXRlcmFibGUgb2YgdmFsdWVzIGluIHRoZSBhcnJheVxuICAgICAgICAgKi9cbiAgICAgICAgQXJyYXlTY2hlbWEucHJvdG90eXBlLnZhbHVlcyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuJGl0ZW1zLnZhbHVlcygpOyB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIGFycmF5IGluY2x1ZGVzIGEgY2VydGFpbiBlbGVtZW50LCByZXR1cm5pbmcgdHJ1ZSBvciBmYWxzZSBhcyBhcHByb3ByaWF0ZS5cbiAgICAgICAgICogQHBhcmFtIHNlYXJjaEVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gc2VhcmNoIGZvci5cbiAgICAgICAgICogQHBhcmFtIGZyb21JbmRleCBUaGUgcG9zaXRpb24gaW4gdGhpcyBhcnJheSBhdCB3aGljaCB0byBiZWdpbiBzZWFyY2hpbmcgZm9yIHNlYXJjaEVsZW1lbnQuXG4gICAgICAgICAqL1xuICAgICAgICBBcnJheVNjaGVtYS5wcm90b3R5cGUuaW5jbHVkZXMgPSBmdW5jdGlvbiAoc2VhcmNoRWxlbWVudCwgZnJvbUluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLiRpdGVtcy52YWx1ZXMoKSkuaW5jbHVkZXMoc2VhcmNoRWxlbWVudCwgZnJvbUluZGV4KTtcbiAgICAgICAgfTtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gRVMyMDIyXG4gICAgICAgIC8vXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxscyBhIGRlZmluZWQgY2FsbGJhY2sgZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50IG9mIGFuIGFycmF5LiBUaGVuLCBmbGF0dGVucyB0aGUgcmVzdWx0IGludG9cbiAgICAgICAgICogYSBuZXcgYXJyYXkuXG4gICAgICAgICAqIFRoaXMgaXMgaWRlbnRpY2FsIHRvIGEgbWFwIGZvbGxvd2VkIGJ5IGZsYXQgd2l0aCBkZXB0aCAxLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sgQSBmdW5jdGlvbiB0aGF0IGFjY2VwdHMgdXAgdG8gdGhyZWUgYXJndW1lbnRzLiBUaGUgZmxhdE1hcCBtZXRob2QgY2FsbHMgdGhlXG4gICAgICAgICAqIGNhbGxiYWNrIGZ1bmN0aW9uIG9uZSB0aW1lIGZvciBlYWNoIGVsZW1lbnQgaW4gdGhlIGFycmF5LlxuICAgICAgICAgKiBAcGFyYW0gdGhpc0FyZyBBbiBvYmplY3QgdG8gd2hpY2ggdGhlIHRoaXMga2V5d29yZCBjYW4gcmVmZXIgaW4gdGhlIGNhbGxiYWNrIGZ1bmN0aW9uLiBJZlxuICAgICAgICAgKiB0aGlzQXJnIGlzIG9taXR0ZWQsIHVuZGVmaW5lZCBpcyB1c2VkIGFzIHRoZSB0aGlzIHZhbHVlLlxuICAgICAgICAgKi9cbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBBcnJheVNjaGVtYS5wcm90b3R5cGUuZmxhdE1hcCA9IGZ1bmN0aW9uIChjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXJyYXlTY2hlbWEjZmxhdE1hcCgpIGlzIG5vdCBzdXBwb3J0ZWQuXCIpO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyBhIG5ldyBhcnJheSB3aXRoIGFsbCBzdWItYXJyYXkgZWxlbWVudHMgY29uY2F0ZW5hdGVkIGludG8gaXQgcmVjdXJzaXZlbHkgdXAgdG8gdGhlXG4gICAgICAgICAqIHNwZWNpZmllZCBkZXB0aC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGRlcHRoIFRoZSBtYXhpbXVtIHJlY3Vyc2lvbiBkZXB0aFxuICAgICAgICAgKi9cbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBBcnJheVNjaGVtYS5wcm90b3R5cGUuZmxhdCA9IGZ1bmN0aW9uIChkZXB0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXJyYXlTY2hlbWEjZmxhdCgpIGlzIG5vdCBzdXBwb3J0ZWQuXCIpO1xuICAgICAgICB9O1xuICAgICAgICBBcnJheVNjaGVtYS5wcm90b3R5cGUuZmluZExhc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh0aGlzLiRpdGVtcy52YWx1ZXMoKSk7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICByZXR1cm4gYXJyLmZpbmRMYXN0LmFwcGx5KGFyciwgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQXJyYXlTY2hlbWEucHJvdG90eXBlLmZpbmRMYXN0SW5kZXggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh0aGlzLiRpdGVtcy52YWx1ZXMoKSk7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICByZXR1cm4gYXJyLmZpbmRMYXN0SW5kZXguYXBwbHkoYXJyLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgICAgICAvL1xuICAgICAgICAvLyBFUzIwMjNcbiAgICAgICAgLy9cbiAgICAgICAgQXJyYXlTY2hlbWEucHJvdG90eXBlLndpdGggPSBmdW5jdGlvbiAoaW5kZXgsIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgY29weSA9IEFycmF5LmZyb20odGhpcy4kaXRlbXMudmFsdWVzKCkpO1xuICAgICAgICAgICAgY29weVtpbmRleF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgKEFycmF5U2NoZW1hLmJpbmQuYXBwbHkoQXJyYXlTY2hlbWEsIF9fc3ByZWFkQXJyYXkoW3ZvaWQgMF0sIGNvcHksIGZhbHNlKSkpKCk7XG4gICAgICAgIH07XG4gICAgICAgIEFycmF5U2NoZW1hLnByb3RvdHlwZS50b1JldmVyc2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy4kaXRlbXMudmFsdWVzKCkpLnJldmVyc2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQXJyYXlTY2hlbWEucHJvdG90eXBlLnRvU29ydGVkID0gZnVuY3Rpb24gKGNvbXBhcmVGbikge1xuICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy4kaXRlbXMudmFsdWVzKCkpLnNvcnQoY29tcGFyZUZuKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBBcnJheVNjaGVtYS5wcm90b3R5cGUudG9TcGxpY2VkID0gZnVuY3Rpb24gKHN0YXJ0LCBkZWxldGVDb3VudCkge1xuICAgICAgICAgICAgdmFyIGNvcHkgPSBBcnJheS5mcm9tKHRoaXMuJGl0ZW1zLnZhbHVlcygpKTtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIHJldHVybiBjb3B5LnRvU3BsaWNlZC5hcHBseShjb3B5LCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgICAgICBBcnJheVNjaGVtYS5wcm90b3R5cGUuc2V0SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgsIGtleSkge1xuICAgICAgICAgICAgdGhpcy4kaW5kZXhlcy5zZXQoaW5kZXgsIGtleSk7XG4gICAgICAgIH07XG4gICAgICAgIEFycmF5U2NoZW1hLnByb3RvdHlwZS5nZXRJbmRleCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGluZGV4ZXMuZ2V0KGluZGV4KTtcbiAgICAgICAgfTtcbiAgICAgICAgQXJyYXlTY2hlbWEucHJvdG90eXBlLmdldEJ5SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRpdGVtcy5nZXQodGhpcy4kaW5kZXhlcy5nZXQoaW5kZXgpKTtcbiAgICAgICAgfTtcbiAgICAgICAgQXJyYXlTY2hlbWEucHJvdG90eXBlLmRlbGV0ZUJ5SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSB0aGlzLiRpbmRleGVzLmdldChpbmRleCk7XG4gICAgICAgICAgICB0aGlzLiRpdGVtcy5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgIHRoaXMuJGluZGV4ZXMuZGVsZXRlKGluZGV4KTtcbiAgICAgICAgfTtcbiAgICAgICAgQXJyYXlTY2hlbWEucHJvdG90eXBlLnRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLiRpdGVtcy52YWx1ZXMoKSk7XG4gICAgICAgIH07XG4gICAgICAgIEFycmF5U2NoZW1hLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0FycmF5KCkubWFwKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAodHlwZW9mICh2YWx1ZVsndG9KU09OJ10pID09PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgICAgICAgICAgICAgID8gdmFsdWVbJ3RvSlNPTiddKClcbiAgICAgICAgICAgICAgICAgICAgOiB2YWx1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICAvL1xuICAgICAgICAvLyBEZWNvZGluZyB1dGlsaXRpZXNcbiAgICAgICAgLy9cbiAgICAgICAgQXJyYXlTY2hlbWEucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKGlzRGVjb2RpbmcpIHtcbiAgICAgICAgICAgIHZhciBjbG9uZWQ7XG4gICAgICAgICAgICBpZiAoaXNEZWNvZGluZykge1xuICAgICAgICAgICAgICAgIGNsb25lZCA9IG5ldyAoQXJyYXlTY2hlbWEuYmluZC5hcHBseShBcnJheVNjaGVtYSwgX19zcHJlYWRBcnJheShbdm9pZCAwXSwgQXJyYXkuZnJvbSh0aGlzLiRpdGVtcy52YWx1ZXMoKSksIGZhbHNlKSkpKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjbG9uZWQgPSBuZXcgKEFycmF5U2NoZW1hLmJpbmQuYXBwbHkoQXJyYXlTY2hlbWEsIF9fc3ByZWFkQXJyYXkoW3ZvaWQgMF0sIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiAoKGl0ZW1bJyRjaGFuZ2VzJ10pXG4gICAgICAgICAgICAgICAgICAgID8gaXRlbS5jbG9uZSgpXG4gICAgICAgICAgICAgICAgICAgIDogaXRlbSk7IH0pLCBmYWxzZSkpKSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNsb25lZDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEFycmF5U2NoZW1hO1xuICAgIH0oKSk7XG5cbiAgICBmdW5jdGlvbiBnZXRNYXBQcm94eSh2YWx1ZSkge1xuICAgICAgICB2YWx1ZVsnJHByb3h5J10gPSB0cnVlO1xuICAgICAgICB2YWx1ZSA9IG5ldyBQcm94eSh2YWx1ZSwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAob2JqLCBwcm9wKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAocHJvcCkgIT09IFwic3ltYm9sXCIgJiYgLy8gYWNjZXNzaW5nIHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIChvYmpbcHJvcF0pID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmouZ2V0KHByb3ApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9ialtwcm9wXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAob2JqLCBwcm9wLCBzZXRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKHByb3ApICE9PSBcInN5bWJvbFwiICYmXG4gICAgICAgICAgICAgICAgICAgIChwcm9wLmluZGV4T2YoXCIkXCIpID09PSAtMSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcCAhPT0gXCJvbkFkZFwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wICE9PSBcIm9uUmVtb3ZlXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3AgIT09IFwib25DaGFuZ2VcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqLnNldChwcm9wLCBzZXRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvYmpbcHJvcF0gPSBzZXRWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVsZXRlUHJvcGVydHk6IGZ1bmN0aW9uIChvYmosIHByb3ApIHtcbiAgICAgICAgICAgICAgICBvYmouZGVsZXRlKHByb3ApO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgdmFyIE1hcFNjaGVtYSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gTWFwU2NoZW1hKGluaXRpYWxWYWx1ZXMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLiRjaGFuZ2VzID0gbmV3IENoYW5nZVRyZWUodGhpcyk7XG4gICAgICAgICAgICB0aGlzLiRpdGVtcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIHRoaXMuJGluZGV4ZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICB0aGlzLiRyZWZJZCA9IDA7XG4gICAgICAgICAgICBpZiAoaW5pdGlhbFZhbHVlcykge1xuICAgICAgICAgICAgICAgIGlmIChpbml0aWFsVmFsdWVzIGluc3RhbmNlb2YgTWFwIHx8XG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxWYWx1ZXMgaW5zdGFuY2VvZiBNYXBTY2hlbWEpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uICh2LCBrKSB7IHJldHVybiBfdGhpcy5zZXQoaywgdik7IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayBpbiBpbml0aWFsVmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldChrLCBpbml0aWFsVmFsdWVzW2tdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBNYXBTY2hlbWEucHJvdG90eXBlLm9uQWRkID0gZnVuY3Rpb24gKGNhbGxiYWNrLCB0cmlnZ2VyQWxsKSB7XG4gICAgICAgICAgICBpZiAodHJpZ2dlckFsbCA9PT0gdm9pZCAwKSB7IHRyaWdnZXJBbGwgPSB0cnVlOyB9XG4gICAgICAgICAgICByZXR1cm4gYWRkQ2FsbGJhY2soKHRoaXMuJGNhbGxiYWNrcyB8fCAodGhpcy4kY2FsbGJhY2tzID0ge30pKSwgZXhwb3J0cy5PUEVSQVRJT04uQURELCBjYWxsYmFjaywgKHRyaWdnZXJBbGwpXG4gICAgICAgICAgICAgICAgPyB0aGlzLiRpdGVtc1xuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfTtcbiAgICAgICAgTWFwU2NoZW1hLnByb3RvdHlwZS5vblJlbW92ZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykgeyByZXR1cm4gYWRkQ2FsbGJhY2sodGhpcy4kY2FsbGJhY2tzIHx8ICh0aGlzLiRjYWxsYmFja3MgPSB7fSksIGV4cG9ydHMuT1BFUkFUSU9OLkRFTEVURSwgY2FsbGJhY2spOyB9O1xuICAgICAgICBNYXBTY2hlbWEucHJvdG90eXBlLm9uQ2hhbmdlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7IHJldHVybiBhZGRDYWxsYmFjayh0aGlzLiRjYWxsYmFja3MgfHwgKHRoaXMuJGNhbGxiYWNrcyA9IHt9KSwgZXhwb3J0cy5PUEVSQVRJT04uUkVQTEFDRSwgY2FsbGJhY2spOyB9O1xuICAgICAgICBNYXBTY2hlbWEuaXMgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVbJ21hcCddICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIC8qKiBJdGVyYXRvciAqL1xuICAgICAgICBNYXBTY2hlbWEucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLiRpdGVtc1tTeW1ib2wuaXRlcmF0b3JdKCk7IH07XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYXBTY2hlbWEucHJvdG90eXBlLCBTeW1ib2wudG9TdHJpbmdUYWcsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy4kaXRlbXNbU3ltYm9sLnRvU3RyaW5nVGFnXTsgfSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWFwU2NoZW1hLCBTeW1ib2wuc3BlY2llcywge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hcFNjaGVtYTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgTWFwU2NoZW1hLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYXBTY2hlbWEjc2V0KCdcIi5jb25jYXQoa2V5LCBcIicsIFwiKS5jb25jYXQodmFsdWUsIFwiKTogdHJ5aW5nIHRvIHNldCBcIikuY29uY2F0KHZhbHVlLCBcIiB2YWx1ZSBvbiAnXCIpLmNvbmNhdChrZXksIFwiJy5cIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRm9yY2UgXCJrZXlcIiBhcyBzdHJpbmdcbiAgICAgICAgICAgIC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2NvbHlzZXVzL2NvbHlzZXVzL2lzc3Vlcy81NjEjaXNzdWVjb21tZW50LTE2NDY3MzM0NjhcbiAgICAgICAgICAgIGtleSA9IGtleS50b1N0cmluZygpO1xuICAgICAgICAgICAgLy8gZ2V0IFwiaW5kZXhcIiBmb3IgdGhpcyB2YWx1ZS5cbiAgICAgICAgICAgIHZhciBoYXNJbmRleCA9IHR5cGVvZiAodGhpcy4kY2hhbmdlcy5pbmRleGVzW2tleV0pICE9PSBcInVuZGVmaW5lZFwiO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gKGhhc0luZGV4KVxuICAgICAgICAgICAgICAgID8gdGhpcy4kY2hhbmdlcy5pbmRleGVzW2tleV1cbiAgICAgICAgICAgICAgICA6IHRoaXMuJHJlZklkKys7XG4gICAgICAgICAgICB2YXIgb3BlcmF0aW9uID0gKGhhc0luZGV4KVxuICAgICAgICAgICAgICAgID8gZXhwb3J0cy5PUEVSQVRJT04uUkVQTEFDRVxuICAgICAgICAgICAgICAgIDogZXhwb3J0cy5PUEVSQVRJT04uQUREO1xuICAgICAgICAgICAgdmFyIGlzUmVmID0gKHZhbHVlWyckY2hhbmdlcyddKSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKGlzUmVmKSB7XG4gICAgICAgICAgICAgICAgdmFsdWVbJyRjaGFuZ2VzJ10uc2V0UGFyZW50KHRoaXMsIHRoaXMuJGNoYW5nZXMucm9vdCwgaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIChlbmNvZGluZylcbiAgICAgICAgICAgIC8vIHNldCBhIHVuaXF1ZSBpZCB0byByZWxhdGUgZGlyZWN0bHkgd2l0aCB0aGlzIGtleS92YWx1ZS5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICBpZiAoIWhhc0luZGV4KSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kY2hhbmdlcy5pbmRleGVzW2tleV0gPSBpbmRleDtcbiAgICAgICAgICAgICAgICB0aGlzLiRpbmRleGVzLnNldChpbmRleCwga2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFpc1JlZiAmJlxuICAgICAgICAgICAgICAgIHRoaXMuJGl0ZW1zLmdldChrZXkpID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIC8vIGlmIHZhbHVlIGlzIHRoZSBzYW1lLCBhdm9pZCByZS1lbmNvZGluZyBpdC5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc1JlZiAmJiAvLyBpZiBpcyBzY2hlbWEsIGZvcmNlIEFERCBvcGVyYXRpb24gaWYgdmFsdWUgZGlmZmVyIGZyb20gcHJldmlvdXMgb25lLlxuICAgICAgICAgICAgICAgIHRoaXMuJGl0ZW1zLmdldChrZXkpICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIG9wZXJhdGlvbiA9IGV4cG9ydHMuT1BFUkFUSU9OLkFERDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuJGl0ZW1zLnNldChrZXksIHZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuJGNoYW5nZXMuY2hhbmdlKGtleSwgb3BlcmF0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBNYXBTY2hlbWEucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRpdGVtcy5nZXQoa2V5KTtcbiAgICAgICAgfTtcbiAgICAgICAgTWFwU2NoZW1hLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gVE9ETzogYWRkIGEgXCJwdXJnZVwiIG1ldGhvZCBhZnRlciAuZW5jb2RlKCkgcnVucywgdG8gY2xlYW51cCByZW1vdmVkIGAkaW5kZXhlc2BcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBXZSBkb24ndCByZW1vdmUgJGluZGV4ZXMgdG8gYWxsb3cgc2V0dGluZyB0aGUgc2FtZSBrZXkgaW4gdGhlIHNhbWUgcGF0Y2hcbiAgICAgICAgICAgIC8vIChTZWUgXCJzaG91bGQgYWxsb3cgdG8gcmVtb3ZlIGFuZCBzZXQgYW4gaXRlbSBpbiB0aGUgc2FtZSBwbGFjZVwiIHRlc3QpXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gLy8gY29uc3QgaW5kZXggPSB0aGlzLiRjaGFuZ2VzLmluZGV4ZXNba2V5XTtcbiAgICAgICAgICAgIC8vIC8vIHRoaXMuJGluZGV4ZXMuZGVsZXRlKGluZGV4KTtcbiAgICAgICAgICAgIHRoaXMuJGNoYW5nZXMuZGVsZXRlKGtleS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRpdGVtcy5kZWxldGUoa2V5KTtcbiAgICAgICAgfTtcbiAgICAgICAgTWFwU2NoZW1hLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uIChjaGFuZ2VzKSB7XG4gICAgICAgICAgICAvLyBkaXNjYXJkIHByZXZpb3VzIG9wZXJhdGlvbnMuXG4gICAgICAgICAgICB0aGlzLiRjaGFuZ2VzLmRpc2NhcmQodHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLiRjaGFuZ2VzLmluZGV4ZXMgPSB7fTtcbiAgICAgICAgICAgIC8vIGNsZWFyIHByZXZpb3VzIGluZGV4ZXNcbiAgICAgICAgICAgIHRoaXMuJGluZGV4ZXMuY2xlYXIoKTtcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBXaGVuIGRlY29kaW5nOlxuICAgICAgICAgICAgLy8gLSBlbnF1ZXVlIGl0ZW1zIGZvciBERUxFVEUgY2FsbGJhY2suXG4gICAgICAgICAgICAvLyAtIGZsYWcgY2hpbGQgaXRlbXMgZm9yIGdhcmJhZ2UgY29sbGVjdGlvbi5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICBpZiAoY2hhbmdlcykge1xuICAgICAgICAgICAgICAgIHJlbW92ZUNoaWxkUmVmcy5jYWxsKHRoaXMsIGNoYW5nZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY2xlYXIgaXRlbXNcbiAgICAgICAgICAgIHRoaXMuJGl0ZW1zLmNsZWFyKCk7XG4gICAgICAgICAgICB0aGlzLiRjaGFuZ2VzLm9wZXJhdGlvbih7IGluZGV4OiAwLCBvcDogZXhwb3J0cy5PUEVSQVRJT04uQ0xFQVIgfSk7XG4gICAgICAgICAgICAvLyB0b3VjaCBhbGwgc3RydWN0dXJlcyB1bnRpbCByZWFjaCByb290XG4gICAgICAgICAgICB0aGlzLiRjaGFuZ2VzLnRvdWNoUGFyZW50cygpO1xuICAgICAgICB9O1xuICAgICAgICBNYXBTY2hlbWEucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRpdGVtcy5oYXMoa2V5KTtcbiAgICAgICAgfTtcbiAgICAgICAgTWFwU2NoZW1hLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNhbGxiYWNrZm4pIHtcbiAgICAgICAgICAgIHRoaXMuJGl0ZW1zLmZvckVhY2goY2FsbGJhY2tmbik7XG4gICAgICAgIH07XG4gICAgICAgIE1hcFNjaGVtYS5wcm90b3R5cGUuZW50cmllcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRpdGVtcy5lbnRyaWVzKCk7XG4gICAgICAgIH07XG4gICAgICAgIE1hcFNjaGVtYS5wcm90b3R5cGUua2V5cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRpdGVtcy5rZXlzKCk7XG4gICAgICAgIH07XG4gICAgICAgIE1hcFNjaGVtYS5wcm90b3R5cGUudmFsdWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGl0ZW1zLnZhbHVlcygpO1xuICAgICAgICB9O1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWFwU2NoZW1hLnByb3RvdHlwZSwgXCJzaXplXCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRpdGVtcy5zaXplO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBNYXBTY2hlbWEucHJvdG90eXBlLnNldEluZGV4ID0gZnVuY3Rpb24gKGluZGV4LCBrZXkpIHtcbiAgICAgICAgICAgIHRoaXMuJGluZGV4ZXMuc2V0KGluZGV4LCBrZXkpO1xuICAgICAgICB9O1xuICAgICAgICBNYXBTY2hlbWEucHJvdG90eXBlLmdldEluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kaW5kZXhlcy5nZXQoaW5kZXgpO1xuICAgICAgICB9O1xuICAgICAgICBNYXBTY2hlbWEucHJvdG90eXBlLmdldEJ5SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRpdGVtcy5nZXQodGhpcy4kaW5kZXhlcy5nZXQoaW5kZXgpKTtcbiAgICAgICAgfTtcbiAgICAgICAgTWFwU2NoZW1hLnByb3RvdHlwZS5kZWxldGVCeUluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gdGhpcy4kaW5kZXhlcy5nZXQoaW5kZXgpO1xuICAgICAgICAgICAgdGhpcy4kaXRlbXMuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICB0aGlzLiRpbmRleGVzLmRlbGV0ZShpbmRleCk7XG4gICAgICAgIH07XG4gICAgICAgIE1hcFNjaGVtYS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1hcCA9IHt9O1xuICAgICAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICAgICAgbWFwW2tleV0gPSAodHlwZW9mICh2YWx1ZVsndG9KU09OJ10pID09PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgICAgICAgICAgICAgID8gdmFsdWVbJ3RvSlNPTiddKClcbiAgICAgICAgICAgICAgICAgICAgOiB2YWx1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIG1hcDtcbiAgICAgICAgfTtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gRGVjb2RpbmcgdXRpbGl0aWVzXG4gICAgICAgIC8vXG4gICAgICAgIE1hcFNjaGVtYS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoaXNEZWNvZGluZykge1xuICAgICAgICAgICAgdmFyIGNsb25lZDtcbiAgICAgICAgICAgIGlmIChpc0RlY29kaW5nKSB7XG4gICAgICAgICAgICAgICAgLy8gY2xpZW50LXNpZGVcbiAgICAgICAgICAgICAgICBjbG9uZWQgPSBPYmplY3QuYXNzaWduKG5ldyBNYXBTY2hlbWEoKSwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBzZXJ2ZXItc2lkZVxuICAgICAgICAgICAgICAgIGNsb25lZCA9IG5ldyBNYXBTY2hlbWEoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlWyckY2hhbmdlcyddKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9uZWQuc2V0KGtleSwgdmFsdWVbJ2Nsb25lJ10oKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9uZWQuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2xvbmVkO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gTWFwU2NoZW1hO1xuICAgIH0oKSk7XG5cbiAgICB2YXIgcmVnaXN0ZXJlZFR5cGVzID0ge307XG4gICAgZnVuY3Rpb24gcmVnaXN0ZXJUeXBlKGlkZW50aWZpZXIsIGRlZmluaXRpb24pIHtcbiAgICAgICAgcmVnaXN0ZXJlZFR5cGVzW2lkZW50aWZpZXJdID0gZGVmaW5pdGlvbjtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0VHlwZShpZGVudGlmaWVyKSB7XG4gICAgICAgIHJldHVybiByZWdpc3RlcmVkVHlwZXNbaWRlbnRpZmllcl07XG4gICAgfVxuXG4gICAgdmFyIFNjaGVtYURlZmluaXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFNjaGVtYURlZmluaXRpb24oKSB7XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gVE9ETzogdXNlIGEgXCJmaWVsZFwiIHN0cnVjdHVyZSBjb21iaW5pbmcgYWxsIHRoZXNlIHByb3BlcnRpZXMgcGVyLWZpZWxkLlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIHRoaXMuaW5kZXhlcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5maWVsZHNCeUluZGV4ID0ge307XG4gICAgICAgICAgICB0aGlzLmRlcHJlY2F0ZWQgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRvcnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBTY2hlbWFEZWZpbml0aW9uLmNyZWF0ZSA9IGZ1bmN0aW9uIChwYXJlbnQpIHtcbiAgICAgICAgICAgIHZhciBkZWZpbml0aW9uID0gbmV3IFNjaGVtYURlZmluaXRpb24oKTtcbiAgICAgICAgICAgIC8vIHN1cHBvcnQgaW5oZXJpdGFuY2VcbiAgICAgICAgICAgIGRlZmluaXRpb24uc2NoZW1hID0gT2JqZWN0LmFzc2lnbih7fSwgcGFyZW50ICYmIHBhcmVudC5zY2hlbWEgfHwge30pO1xuICAgICAgICAgICAgZGVmaW5pdGlvbi5pbmRleGVzID0gT2JqZWN0LmFzc2lnbih7fSwgcGFyZW50ICYmIHBhcmVudC5pbmRleGVzIHx8IHt9KTtcbiAgICAgICAgICAgIGRlZmluaXRpb24uZmllbGRzQnlJbmRleCA9IE9iamVjdC5hc3NpZ24oe30sIHBhcmVudCAmJiBwYXJlbnQuZmllbGRzQnlJbmRleCB8fCB7fSk7XG4gICAgICAgICAgICBkZWZpbml0aW9uLmRlc2NyaXB0b3JzID0gT2JqZWN0LmFzc2lnbih7fSwgcGFyZW50ICYmIHBhcmVudC5kZXNjcmlwdG9ycyB8fCB7fSk7XG4gICAgICAgICAgICBkZWZpbml0aW9uLmRlcHJlY2F0ZWQgPSBPYmplY3QuYXNzaWduKHt9LCBwYXJlbnQgJiYgcGFyZW50LmRlcHJlY2F0ZWQgfHwge30pO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmluaXRpb247XG4gICAgICAgIH07XG4gICAgICAgIFNjaGVtYURlZmluaXRpb24ucHJvdG90eXBlLmFkZEZpZWxkID0gZnVuY3Rpb24gKGZpZWxkLCB0eXBlKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmdldE5leHRGaWVsZEluZGV4KCk7XG4gICAgICAgICAgICB0aGlzLmZpZWxkc0J5SW5kZXhbaW5kZXhdID0gZmllbGQ7XG4gICAgICAgICAgICB0aGlzLmluZGV4ZXNbZmllbGRdID0gaW5kZXg7XG4gICAgICAgICAgICB0aGlzLnNjaGVtYVtmaWVsZF0gPSAoQXJyYXkuaXNBcnJheSh0eXBlKSlcbiAgICAgICAgICAgICAgICA/IHsgYXJyYXk6IHR5cGVbMF0gfVxuICAgICAgICAgICAgICAgIDogdHlwZTtcbiAgICAgICAgfTtcbiAgICAgICAgU2NoZW1hRGVmaW5pdGlvbi5wcm90b3R5cGUuaGFzRmllbGQgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluZGV4ZXNbZmllbGRdICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIFNjaGVtYURlZmluaXRpb24ucHJvdG90eXBlLmFkZEZpbHRlciA9IGZ1bmN0aW9uIChmaWVsZCwgY2IpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5maWx0ZXJzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJzID0ge307XG4gICAgICAgICAgICAgICAgdGhpcy5pbmRleGVzV2l0aEZpbHRlcnMgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZmlsdGVyc1t0aGlzLmluZGV4ZXNbZmllbGRdXSA9IGNiO1xuICAgICAgICAgICAgdGhpcy5pbmRleGVzV2l0aEZpbHRlcnMucHVzaCh0aGlzLmluZGV4ZXNbZmllbGRdKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBTY2hlbWFEZWZpbml0aW9uLnByb3RvdHlwZS5hZGRDaGlsZHJlbkZpbHRlciA9IGZ1bmN0aW9uIChmaWVsZCwgY2IpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXhlc1tmaWVsZF07XG4gICAgICAgICAgICB2YXIgdHlwZSA9IHRoaXMuc2NoZW1hW2ZpZWxkXTtcbiAgICAgICAgICAgIGlmIChnZXRUeXBlKE9iamVjdC5rZXlzKHR5cGUpWzBdKSkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jaGlsZEZpbHRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGlsZEZpbHRlcnMgPSB7fTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jaGlsZEZpbHRlcnNbaW5kZXhdID0gY2I7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJAZmlsdGVyQ2hpbGRyZW46IGZpZWxkICdcIi5jb25jYXQoZmllbGQsIFwiJyBjYW4ndCBoYXZlIGNoaWxkcmVuLiBJZ25vcmluZyBmaWx0ZXIuXCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2NoZW1hRGVmaW5pdGlvbi5wcm90b3R5cGUuZ2V0Q2hpbGRyZW5GaWx0ZXIgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoaWxkRmlsdGVycyAmJiB0aGlzLmNoaWxkRmlsdGVyc1t0aGlzLmluZGV4ZXNbZmllbGRdXTtcbiAgICAgICAgfTtcbiAgICAgICAgU2NoZW1hRGVmaW5pdGlvbi5wcm90b3R5cGUuZ2V0TmV4dEZpZWxkSW5kZXggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5zY2hlbWEgfHwge30pLmxlbmd0aDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFNjaGVtYURlZmluaXRpb247XG4gICAgfSgpKTtcbiAgICBmdW5jdGlvbiBoYXNGaWx0ZXIoa2xhc3MpIHtcbiAgICAgICAgcmV0dXJuIGtsYXNzLl9jb250ZXh0ICYmIGtsYXNzLl9jb250ZXh0LnVzZUZpbHRlcnM7XG4gICAgfVxuICAgIHZhciBDb250ZXh0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDb250ZXh0KCkge1xuICAgICAgICAgICAgdGhpcy50eXBlcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5zY2hlbWFzID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgdGhpcy51c2VGaWx0ZXJzID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgQ29udGV4dC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKHNjaGVtYSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2NoZW1hcy5oYXMoc2NoZW1hKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHR5cGVpZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHlwZXNbdHlwZWlkXTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHNjaGVtYSwgdHlwZWlkKSB7XG4gICAgICAgICAgICBpZiAodHlwZWlkID09PSB2b2lkIDApIHsgdHlwZWlkID0gdGhpcy5zY2hlbWFzLnNpemU7IH1cbiAgICAgICAgICAgIC8vIEZJWE1FOiBtb3ZlIHRoaXMgdG8gc29tZXdoZXJlIGVsc2U/XG4gICAgICAgICAgICAvLyBzdXBwb3J0IGluaGVyaXRhbmNlXG4gICAgICAgICAgICBzY2hlbWEuX2RlZmluaXRpb24gPSBTY2hlbWFEZWZpbml0aW9uLmNyZWF0ZShzY2hlbWEuX2RlZmluaXRpb24pO1xuICAgICAgICAgICAgc2NoZW1hLl90eXBlaWQgPSB0eXBlaWQ7XG4gICAgICAgICAgICB0aGlzLnR5cGVzW3R5cGVpZF0gPSBzY2hlbWE7XG4gICAgICAgICAgICB0aGlzLnNjaGVtYXMuc2V0KHNjaGVtYSwgdHlwZWlkKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dC5jcmVhdGUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZGVmaW5pdGlvbikge1xuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucy5jb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY29udGV4dCA9IG5ldyBDb250ZXh0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlKGRlZmluaXRpb24sIG9wdGlvbnMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENvbnRleHQ7XG4gICAgfSgpKTtcbiAgICB2YXIgZ2xvYmFsQ29udGV4dCA9IG5ldyBDb250ZXh0KCk7XG4gICAgLyoqXG4gICAgICogW1NlZSBkb2N1bWVudGF0aW9uXShodHRwczovL2RvY3MuY29seXNldXMuaW8vc3RhdGUvc2NoZW1hLylcbiAgICAgKlxuICAgICAqIEFubm90YXRlIGEgU2NoZW1hIHByb3BlcnR5IHRvIGJlIHNlcmlhbGl6ZWFibGUuXG4gICAgICogXFxAdHlwZSgpJ2QgZmllbGRzIGFyZSBhdXRvbWF0aWNhbGx5IGZsYWdnZWQgYXMgXCJkaXJ0eVwiIGZvciB0aGUgbmV4dCBwYXRjaC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlIFN0YW5kYXJkIHVzYWdlLCB3aXRoIGF1dG9tYXRpYyBjaGFuZ2UgdHJhY2tpbmcuXG4gICAgICogYGBgXG4gICAgICogXFxAdHlwZShcInN0cmluZ1wiKSBwcm9wZXJ0eU5hbWU6IHN0cmluZztcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBleGFtcGxlIFlvdSBjYW4gcHJvdmlkZSB0aGUgXCJtYW51YWxcIiBvcHRpb24gaWYgeW91J2QgbGlrZSB0byBtYW51YWxseSBjb250cm9sIHlvdXIgcGF0Y2hlcyB2aWEgLnNldERpcnR5KCkuXG4gICAgICogYGBgXG4gICAgICogXFxAdHlwZShcInN0cmluZ1wiLCB7IG1hbnVhbDogdHJ1ZSB9KVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHR5cGUodHlwZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gb3B0aW9ucy5jb250ZXh0IHx8IGdsb2JhbENvbnRleHQ7XG4gICAgICAgICAgICB2YXIgY29uc3RydWN0b3IgPSB0YXJnZXQuY29uc3RydWN0b3I7XG4gICAgICAgICAgICBjb25zdHJ1Y3Rvci5fY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgICAgICBpZiAoIXR5cGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcIi5jb25jYXQoY29uc3RydWN0b3IubmFtZSwgXCI6IEB0eXBlKCkgcmVmZXJlbmNlIHByb3ZpZGVkIGZvciBcXFwiXCIpLmNvbmNhdChmaWVsZCwgXCJcXFwiIGlzIHVuZGVmaW5lZC4gTWFrZSBzdXJlIHlvdSBkb24ndCBoYXZlIGFueSBjaXJjdWxhciBkZXBlbmRlbmNpZXMuXCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgKiBzdGF0aWMgc2NoZW1hXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGlmICghY29udGV4dC5oYXMoY29uc3RydWN0b3IpKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5hZGQoY29uc3RydWN0b3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGRlZmluaXRpb24gPSBjb25zdHJ1Y3Rvci5fZGVmaW5pdGlvbjtcbiAgICAgICAgICAgIGRlZmluaXRpb24uYWRkRmllbGQoZmllbGQsIHR5cGUpO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBza2lwIGlmIGRlc2NyaXB0b3IgYWxyZWFkeSBleGlzdHMgZm9yIHRoaXMgZmllbGQgKGBAZGVwcmVjYXRlZCgpYClcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKGRlZmluaXRpb24uZGVzY3JpcHRvcnNbZmllbGRdKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRlZmluaXRpb24uZGVwcmVjYXRlZFtmaWVsZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZG8gbm90IGNyZWF0ZSBhY2Nlc3NvcnMgZm9yIGRlcHJlY2F0ZWQgcHJvcGVydGllcy5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdHJ5aW5nIHRvIGRlZmluZSBzYW1lIHByb3BlcnR5IG11bHRpcGxlIHRpbWVzIGFjcm9zcyBpbmhlcml0YW5jZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2NvbHlzZXVzL2NvbHlzZXVzLXVuaXR5M2QvaXNzdWVzLzEzMSNpc3N1ZWNvbW1lbnQtODE0MzA4NTcyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJAY29seXNldXMvc2NoZW1hOiBEdXBsaWNhdGUgJ1wiLmNvbmNhdChmaWVsZCwgXCInIGRlZmluaXRpb24gb24gJ1wiKS5jb25jYXQoY29uc3RydWN0b3IubmFtZSwgXCInLlxcbkNoZWNrIEB0eXBlKCkgYW5ub3RhdGlvblwiKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWZpbml0aW9uQXRMaW5lID0gZS5zdGFjay5zcGxpdChcIlxcblwiKVs0XS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcIi5jb25jYXQoZS5tZXNzYWdlLCBcIiBcIikuY29uY2F0KGRlZmluaXRpb25BdExpbmUpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpc0FycmF5ID0gQXJyYXlTY2hlbWEuaXModHlwZSk7XG4gICAgICAgICAgICB2YXIgaXNNYXAgPSAhaXNBcnJheSAmJiBNYXBTY2hlbWEuaXModHlwZSk7XG4gICAgICAgICAgICAvLyBUT0RPOiByZWZhY3RvciBtZS5cbiAgICAgICAgICAgIC8vIEFsbG93IGFic3RyYWN0IGludGVybWVkaWFyeSBjbGFzc2VzIHdpdGggbm8gZmllbGRzIHRvIGJlIHNlcmlhbGl6ZWRcbiAgICAgICAgICAgIC8vIChTZWUgXCJzaG91bGQgc3VwcG9ydCBhbiBpbmhlcml0YW5jZSB3aXRoIGEgU2NoZW1hIHR5cGUgd2l0aG91dCBmaWVsZHNcIiB0ZXN0KVxuICAgICAgICAgICAgaWYgKHR5cGVvZiAodHlwZSkgIT09IFwic3RyaW5nXCIgJiYgIVNjaGVtYS5pcyh0eXBlKSkge1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZFR5cGUgPSBPYmplY3QudmFsdWVzKHR5cGUpWzBdO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKGNoaWxkVHlwZSkgIT09IFwic3RyaW5nXCIgJiYgIWNvbnRleHQuaGFzKGNoaWxkVHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5hZGQoY2hpbGRUeXBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5tYW51YWwpIHtcbiAgICAgICAgICAgICAgICAvLyBkbyBub3QgZGVjbGFyZSBnZXR0ZXIvc2V0dGVyIGRlc2NyaXB0b3JcbiAgICAgICAgICAgICAgICBkZWZpbml0aW9uLmRlc2NyaXB0b3JzW2ZpZWxkXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBmaWVsZENhY2hlZCA9IFwiX1wiLmNvbmNhdChmaWVsZCk7XG4gICAgICAgICAgICBkZWZpbml0aW9uLmRlc2NyaXB0b3JzW2ZpZWxkQ2FjaGVkXSA9IHtcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGRlZmluaXRpb24uZGVzY3JpcHRvcnNbZmllbGRdID0ge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1tmaWVsZENhY2hlZF07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogQ3JlYXRlIFByb3h5IGZvciBhcnJheSBvciBtYXAgaXRlbXNcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIC8vIHNraXAgaWYgdmFsdWUgaXMgdGhlIHNhbWUgYXMgY2FjaGVkLlxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IHRoaXNbZmllbGRDYWNoZWRdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhdXRvbWF0aWNhbGx0eSB0cmFuc2Zvcm0gQXJyYXkgaW50byBBcnJheVNjaGVtYVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkgJiYgISh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5U2NoZW1hKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3IChBcnJheVNjaGVtYS5iaW5kLmFwcGx5KEFycmF5U2NoZW1hLCBfX3NwcmVhZEFycmF5KFt2b2lkIDBdLCB2YWx1ZSwgZmFsc2UpKSkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF1dG9tYXRpY2FsbHR5IHRyYW5zZm9ybSBNYXAgaW50byBNYXBTY2hlbWFcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc01hcCAmJiAhKHZhbHVlIGluc3RhbmNlb2YgTWFwU2NoZW1hKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3IE1hcFNjaGVtYSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0cnkgdG8gdHVybiBwcm92aWRlZCBzdHJ1Y3R1cmUgaW50byBhIFByb3h5XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVbJyRwcm94eSddID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNNYXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBnZXRNYXBQcm94eSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzQXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBnZXRBcnJheVByb3h5KHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmbGFnIHRoZSBjaGFuZ2UgZm9yIGVuY29kaW5nLlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kY2hhbmdlcy5jaGFuZ2UoZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgc2V0UGFyZW50KCkgcmVjdXJzaXZlbHkgZm9yIHRoaXMgYW5kIGl0cyBjaGlsZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RydWN0dXJlcy5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVbJyRjaGFuZ2VzJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVsnJGNoYW5nZXMnXS5zZXRQYXJlbnQodGhpcywgdGhpcy4kY2hhbmdlcy5yb290LCB0aGlzLl9kZWZpbml0aW9uLmluZGV4ZXNbZmllbGRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzW2ZpZWxkQ2FjaGVkXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldHRpbmcgYSBmaWVsZCB0byBgbnVsbGAgb3IgYHVuZGVmaW5lZGAgd2lsbCBkZWxldGUgaXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kY2hhbmdlcy5kZWxldGUoZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbZmllbGRDYWNoZWRdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogYEBmaWx0ZXIoKWAgZGVjb3JhdG9yIGZvciBkZWZpbmluZyBkYXRhIGZpbHRlcnMgcGVyIGNsaWVudFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZpbHRlcihjYikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBjb25zdHJ1Y3RvciA9IHRhcmdldC5jb25zdHJ1Y3RvcjtcbiAgICAgICAgICAgIHZhciBkZWZpbml0aW9uID0gY29uc3RydWN0b3IuX2RlZmluaXRpb247XG4gICAgICAgICAgICBpZiAoZGVmaW5pdGlvbi5hZGRGaWx0ZXIoZmllbGQsIGNiKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yLl9jb250ZXh0LnVzZUZpbHRlcnMgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBmaWx0ZXJDaGlsZHJlbihjYikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBjb25zdHJ1Y3RvciA9IHRhcmdldC5jb25zdHJ1Y3RvcjtcbiAgICAgICAgICAgIHZhciBkZWZpbml0aW9uID0gY29uc3RydWN0b3IuX2RlZmluaXRpb247XG4gICAgICAgICAgICBpZiAoZGVmaW5pdGlvbi5hZGRDaGlsZHJlbkZpbHRlcihmaWVsZCwgY2IpKSB7XG4gICAgICAgICAgICAgICAgY29uc3RydWN0b3IuX2NvbnRleHQudXNlRmlsdGVycyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGBAZGVwcmVjYXRlZCgpYCBmbGFnIGEgZmllbGQgYXMgZGVwcmVjYXRlZC5cbiAgICAgKiBUaGUgcHJldmlvdXMgYEB0eXBlKClgIGFubm90YXRpb24gc2hvdWxkIHJlbWFpbiBhbG9uZyB3aXRoIHRoaXMgb25lLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGRlcHJlY2F0ZWQodGhyb3dzKSB7XG4gICAgICAgIGlmICh0aHJvd3MgPT09IHZvaWQgMCkgeyB0aHJvd3MgPSB0cnVlOyB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBmaWVsZCkge1xuICAgICAgICAgICAgdmFyIGNvbnN0cnVjdG9yID0gdGFyZ2V0LmNvbnN0cnVjdG9yO1xuICAgICAgICAgICAgdmFyIGRlZmluaXRpb24gPSBjb25zdHJ1Y3Rvci5fZGVmaW5pdGlvbjtcbiAgICAgICAgICAgIGRlZmluaXRpb24uZGVwcmVjYXRlZFtmaWVsZF0gPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRocm93cykge1xuICAgICAgICAgICAgICAgIGRlZmluaXRpb24uZGVzY3JpcHRvcnNbZmllbGRdID0ge1xuICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IEVycm9yKFwiXCIuY29uY2F0KGZpZWxkLCBcIiBpcyBkZXByZWNhdGVkLlwiKSk7IH0sXG4gICAgICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7IH0sXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBkZWZpbmVUeXBlcyh0YXJnZXQsIGZpZWxkcywgb3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxuICAgICAgICBpZiAoIW9wdGlvbnMuY29udGV4dCkge1xuICAgICAgICAgICAgb3B0aW9ucy5jb250ZXh0ID0gdGFyZ2V0Ll9jb250ZXh0IHx8IG9wdGlvbnMuY29udGV4dCB8fCBnbG9iYWxDb250ZXh0O1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGZpZWxkIGluIGZpZWxkcykge1xuICAgICAgICAgICAgdHlwZShmaWVsZHNbZmllbGRdLCBvcHRpb25zKSh0YXJnZXQucHJvdG90eXBlLCBmaWVsZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb3B5cmlnaHQgKGMpIDIwMTggRW5kZWwgRHJleWVyXG4gICAgICogQ29weXJpZ2h0IChjKSAyMDE0IElvbiBEcml2ZSBTb2Z0d2FyZSBMdGQuXG4gICAgICpcbiAgICAgKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4gICAgICogb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuICAgICAqIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbiAgICAgKiB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4gICAgICogY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4gICAgICogZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAgICAgKlxuICAgICAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbFxuICAgICAqIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gICAgICpcbiAgICAgKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gICAgICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gICAgICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4gICAgICogQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICAgICAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4gICAgICogT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEVcbiAgICAgKiBTT0ZUV0FSRVxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIG1zZ3BhY2sgaW1wbGVtZW50YXRpb24gaGlnaGx5IGJhc2VkIG9uIG5vdGVwYWNrLmlvXG4gICAgICogaHR0cHM6Ly9naXRodWIuY29tL2RhcnJhY2hlcXVlc25lL25vdGVwYWNrXG4gICAgICovXG4gICAgZnVuY3Rpb24gdXRmOExlbmd0aChzdHIpIHtcbiAgICAgICAgdmFyIGMgPSAwLCBsZW5ndGggPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHN0ci5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICAgICAgICAgIGlmIChjIDwgMHg4MCkge1xuICAgICAgICAgICAgICAgIGxlbmd0aCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYyA8IDB4ODAwKSB7XG4gICAgICAgICAgICAgICAgbGVuZ3RoICs9IDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjIDwgMHhkODAwIHx8IGMgPj0gMHhlMDAwKSB7XG4gICAgICAgICAgICAgICAgbGVuZ3RoICs9IDM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgbGVuZ3RoICs9IDQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxlbmd0aDtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXRmOFdyaXRlKHZpZXcsIG9mZnNldCwgc3RyKSB7XG4gICAgICAgIHZhciBjID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdHIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgICAgICBpZiAoYyA8IDB4ODApIHtcbiAgICAgICAgICAgICAgICB2aWV3W29mZnNldCsrXSA9IGM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjIDwgMHg4MDApIHtcbiAgICAgICAgICAgICAgICB2aWV3W29mZnNldCsrXSA9IDB4YzAgfCAoYyA+PiA2KTtcbiAgICAgICAgICAgICAgICB2aWV3W29mZnNldCsrXSA9IDB4ODAgfCAoYyAmIDB4M2YpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYyA8IDB4ZDgwMCB8fCBjID49IDB4ZTAwMCkge1xuICAgICAgICAgICAgICAgIHZpZXdbb2Zmc2V0KytdID0gMHhlMCB8IChjID4+IDEyKTtcbiAgICAgICAgICAgICAgICB2aWV3W29mZnNldCsrXSA9IDB4ODAgfCAoYyA+PiA2ICYgMHgzZik7XG4gICAgICAgICAgICAgICAgdmlld1tvZmZzZXQrK10gPSAweDgwIHwgKGMgJiAweDNmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICBjID0gMHgxMDAwMCArICgoKGMgJiAweDNmZikgPDwgMTApIHwgKHN0ci5jaGFyQ29kZUF0KGkpICYgMHgzZmYpKTtcbiAgICAgICAgICAgICAgICB2aWV3W29mZnNldCsrXSA9IDB4ZjAgfCAoYyA+PiAxOCk7XG4gICAgICAgICAgICAgICAgdmlld1tvZmZzZXQrK10gPSAweDgwIHwgKGMgPj4gMTIgJiAweDNmKTtcbiAgICAgICAgICAgICAgICB2aWV3W29mZnNldCsrXSA9IDB4ODAgfCAoYyA+PiA2ICYgMHgzZik7XG4gICAgICAgICAgICAgICAgdmlld1tvZmZzZXQrK10gPSAweDgwIHwgKGMgJiAweDNmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBpbnQ4JDEoYnl0ZXMsIHZhbHVlKSB7XG4gICAgICAgIGJ5dGVzLnB1c2godmFsdWUgJiAyNTUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1aW50OCQxKGJ5dGVzLCB2YWx1ZSkge1xuICAgICAgICBieXRlcy5wdXNoKHZhbHVlICYgMjU1KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaW50MTYkMShieXRlcywgdmFsdWUpIHtcbiAgICAgICAgYnl0ZXMucHVzaCh2YWx1ZSAmIDI1NSk7XG4gICAgICAgIGJ5dGVzLnB1c2goKHZhbHVlID4+IDgpICYgMjU1KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdWludDE2JDEoYnl0ZXMsIHZhbHVlKSB7XG4gICAgICAgIGJ5dGVzLnB1c2godmFsdWUgJiAyNTUpO1xuICAgICAgICBieXRlcy5wdXNoKCh2YWx1ZSA+PiA4KSAmIDI1NSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGludDMyJDEoYnl0ZXMsIHZhbHVlKSB7XG4gICAgICAgIGJ5dGVzLnB1c2godmFsdWUgJiAyNTUpO1xuICAgICAgICBieXRlcy5wdXNoKCh2YWx1ZSA+PiA4KSAmIDI1NSk7XG4gICAgICAgIGJ5dGVzLnB1c2goKHZhbHVlID4+IDE2KSAmIDI1NSk7XG4gICAgICAgIGJ5dGVzLnB1c2goKHZhbHVlID4+IDI0KSAmIDI1NSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVpbnQzMiQxKGJ5dGVzLCB2YWx1ZSkge1xuICAgICAgICB2YXIgYjQgPSB2YWx1ZSA+PiAyNDtcbiAgICAgICAgdmFyIGIzID0gdmFsdWUgPj4gMTY7XG4gICAgICAgIHZhciBiMiA9IHZhbHVlID4+IDg7XG4gICAgICAgIHZhciBiMSA9IHZhbHVlO1xuICAgICAgICBieXRlcy5wdXNoKGIxICYgMjU1KTtcbiAgICAgICAgYnl0ZXMucHVzaChiMiAmIDI1NSk7XG4gICAgICAgIGJ5dGVzLnB1c2goYjMgJiAyNTUpO1xuICAgICAgICBieXRlcy5wdXNoKGI0ICYgMjU1KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaW50NjQkMShieXRlcywgdmFsdWUpIHtcbiAgICAgICAgdmFyIGhpZ2ggPSBNYXRoLmZsb29yKHZhbHVlIC8gTWF0aC5wb3coMiwgMzIpKTtcbiAgICAgICAgdmFyIGxvdyA9IHZhbHVlID4+PiAwO1xuICAgICAgICB1aW50MzIkMShieXRlcywgbG93KTtcbiAgICAgICAgdWludDMyJDEoYnl0ZXMsIGhpZ2gpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1aW50NjQkMShieXRlcywgdmFsdWUpIHtcbiAgICAgICAgdmFyIGhpZ2ggPSAodmFsdWUgLyBNYXRoLnBvdygyLCAzMikpID4+IDA7XG4gICAgICAgIHZhciBsb3cgPSB2YWx1ZSA+Pj4gMDtcbiAgICAgICAgdWludDMyJDEoYnl0ZXMsIGxvdyk7XG4gICAgICAgIHVpbnQzMiQxKGJ5dGVzLCBoaWdoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZmxvYXQzMiQxKGJ5dGVzLCB2YWx1ZSkge1xuICAgICAgICB3cml0ZUZsb2F0MzIoYnl0ZXMsIHZhbHVlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZmxvYXQ2NCQxKGJ5dGVzLCB2YWx1ZSkge1xuICAgICAgICB3cml0ZUZsb2F0NjQoYnl0ZXMsIHZhbHVlKTtcbiAgICB9XG4gICAgdmFyIF9pbnQzMiQxID0gbmV3IEludDMyQXJyYXkoMik7XG4gICAgdmFyIF9mbG9hdDMyJDEgPSBuZXcgRmxvYXQzMkFycmF5KF9pbnQzMiQxLmJ1ZmZlcik7XG4gICAgdmFyIF9mbG9hdDY0JDEgPSBuZXcgRmxvYXQ2NEFycmF5KF9pbnQzMiQxLmJ1ZmZlcik7XG4gICAgZnVuY3Rpb24gd3JpdGVGbG9hdDMyKGJ5dGVzLCB2YWx1ZSkge1xuICAgICAgICBfZmxvYXQzMiQxWzBdID0gdmFsdWU7XG4gICAgICAgIGludDMyJDEoYnl0ZXMsIF9pbnQzMiQxWzBdKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gd3JpdGVGbG9hdDY0KGJ5dGVzLCB2YWx1ZSkge1xuICAgICAgICBfZmxvYXQ2NCQxWzBdID0gdmFsdWU7XG4gICAgICAgIGludDMyJDEoYnl0ZXMsIF9pbnQzMiQxWzAgXSk7XG4gICAgICAgIGludDMyJDEoYnl0ZXMsIF9pbnQzMiQxWzEgXSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJvb2xlYW4kMShieXRlcywgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHVpbnQ4JDEoYnl0ZXMsIHZhbHVlID8gMSA6IDApO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzdHJpbmckMShieXRlcywgdmFsdWUpIHtcbiAgICAgICAgLy8gZW5jb2RlIGBudWxsYCBzdHJpbmdzIGFzIGVtcHR5LlxuICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxlbmd0aCA9IHV0ZjhMZW5ndGgodmFsdWUpO1xuICAgICAgICB2YXIgc2l6ZSA9IDA7XG4gICAgICAgIC8vIGZpeHN0clxuICAgICAgICBpZiAobGVuZ3RoIDwgMHgyMCkge1xuICAgICAgICAgICAgYnl0ZXMucHVzaChsZW5ndGggfCAweGEwKTtcbiAgICAgICAgICAgIHNpemUgPSAxO1xuICAgICAgICB9XG4gICAgICAgIC8vIHN0ciA4XG4gICAgICAgIGVsc2UgaWYgKGxlbmd0aCA8IDB4MTAwKSB7XG4gICAgICAgICAgICBieXRlcy5wdXNoKDB4ZDkpO1xuICAgICAgICAgICAgdWludDgkMShieXRlcywgbGVuZ3RoKTtcbiAgICAgICAgICAgIHNpemUgPSAyO1xuICAgICAgICB9XG4gICAgICAgIC8vIHN0ciAxNlxuICAgICAgICBlbHNlIGlmIChsZW5ndGggPCAweDEwMDAwKSB7XG4gICAgICAgICAgICBieXRlcy5wdXNoKDB4ZGEpO1xuICAgICAgICAgICAgdWludDE2JDEoYnl0ZXMsIGxlbmd0aCk7XG4gICAgICAgICAgICBzaXplID0gMztcbiAgICAgICAgfVxuICAgICAgICAvLyBzdHIgMzJcbiAgICAgICAgZWxzZSBpZiAobGVuZ3RoIDwgMHgxMDAwMDAwMDApIHtcbiAgICAgICAgICAgIGJ5dGVzLnB1c2goMHhkYik7XG4gICAgICAgICAgICB1aW50MzIkMShieXRlcywgbGVuZ3RoKTtcbiAgICAgICAgICAgIHNpemUgPSA1O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdHJpbmcgdG9vIGxvbmcnKTtcbiAgICAgICAgfVxuICAgICAgICB1dGY4V3JpdGUoYnl0ZXMsIGJ5dGVzLmxlbmd0aCwgdmFsdWUpO1xuICAgICAgICByZXR1cm4gc2l6ZSArIGxlbmd0aDtcbiAgICB9XG4gICAgZnVuY3Rpb24gbnVtYmVyJDEoYnl0ZXMsIHZhbHVlKSB7XG4gICAgICAgIGlmIChpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBudW1iZXIkMShieXRlcywgMCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWlzRmluaXRlKHZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bWJlciQxKGJ5dGVzLCAodmFsdWUgPiAwKSA/IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSIDogLU51bWJlci5NQVhfU0FGRV9JTlRFR0VSKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSAhPT0gKHZhbHVlIHwgMCkpIHtcbiAgICAgICAgICAgIGJ5dGVzLnB1c2goMHhjYik7XG4gICAgICAgICAgICB3cml0ZUZsb2F0NjQoYnl0ZXMsIHZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiA5O1xuICAgICAgICAgICAgLy8gVE9ETzogZW5jb2RlIGZsb2F0IDMyP1xuICAgICAgICAgICAgLy8gaXMgaXQgcG9zc2libGUgdG8gZGlmZmVyZW50aWF0ZSBiZXR3ZWVuIGZsb2F0MzIgLyBmbG9hdDY0IGhlcmU/XG4gICAgICAgICAgICAvLyAvLyBmbG9hdCAzMlxuICAgICAgICAgICAgLy8gYnl0ZXMucHVzaCgweGNhKTtcbiAgICAgICAgICAgIC8vIHdyaXRlRmxvYXQzMihieXRlcywgdmFsdWUpO1xuICAgICAgICAgICAgLy8gcmV0dXJuIDU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlID49IDApIHtcbiAgICAgICAgICAgIC8vIHBvc2l0aXZlIGZpeG51bVxuICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHg4MCkge1xuICAgICAgICAgICAgICAgIHVpbnQ4JDEoYnl0ZXMsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHVpbnQgOFxuICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHgxMDApIHtcbiAgICAgICAgICAgICAgICBieXRlcy5wdXNoKDB4Y2MpO1xuICAgICAgICAgICAgICAgIHVpbnQ4JDEoYnl0ZXMsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHVpbnQgMTZcbiAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4MTAwMDApIHtcbiAgICAgICAgICAgICAgICBieXRlcy5wdXNoKDB4Y2QpO1xuICAgICAgICAgICAgICAgIHVpbnQxNiQxKGJ5dGVzLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB1aW50IDMyXG4gICAgICAgICAgICBpZiAodmFsdWUgPCAweDEwMDAwMDAwMCkge1xuICAgICAgICAgICAgICAgIGJ5dGVzLnB1c2goMHhjZSk7XG4gICAgICAgICAgICAgICAgdWludDMyJDEoYnl0ZXMsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gNTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHVpbnQgNjRcbiAgICAgICAgICAgIGJ5dGVzLnB1c2goMHhjZik7XG4gICAgICAgICAgICB1aW50NjQkMShieXRlcywgdmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIDk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBuZWdhdGl2ZSBmaXhudW1cbiAgICAgICAgICAgIGlmICh2YWx1ZSA+PSAtMHgyMCkge1xuICAgICAgICAgICAgICAgIGJ5dGVzLnB1c2goMHhlMCB8ICh2YWx1ZSArIDB4MjApKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGludCA4XG4gICAgICAgICAgICBpZiAodmFsdWUgPj0gLTB4ODApIHtcbiAgICAgICAgICAgICAgICBieXRlcy5wdXNoKDB4ZDApO1xuICAgICAgICAgICAgICAgIGludDgkMShieXRlcywgdmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaW50IDE2XG4gICAgICAgICAgICBpZiAodmFsdWUgPj0gLTB4ODAwMCkge1xuICAgICAgICAgICAgICAgIGJ5dGVzLnB1c2goMHhkMSk7XG4gICAgICAgICAgICAgICAgaW50MTYkMShieXRlcywgdmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiAzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaW50IDMyXG4gICAgICAgICAgICBpZiAodmFsdWUgPj0gLTB4ODAwMDAwMDApIHtcbiAgICAgICAgICAgICAgICBieXRlcy5wdXNoKDB4ZDIpO1xuICAgICAgICAgICAgICAgIGludDMyJDEoYnl0ZXMsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gNTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGludCA2NFxuICAgICAgICAgICAgYnl0ZXMucHVzaCgweGQzKTtcbiAgICAgICAgICAgIGludDY0JDEoYnl0ZXMsIHZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiA5O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGVuY29kZSA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgICAgICAgX19wcm90b19fOiBudWxsLFxuICAgICAgICBib29sZWFuOiBib29sZWFuJDEsXG4gICAgICAgIGZsb2F0MzI6IGZsb2F0MzIkMSxcbiAgICAgICAgZmxvYXQ2NDogZmxvYXQ2NCQxLFxuICAgICAgICBpbnQxNjogaW50MTYkMSxcbiAgICAgICAgaW50MzI6IGludDMyJDEsXG4gICAgICAgIGludDY0OiBpbnQ2NCQxLFxuICAgICAgICBpbnQ4OiBpbnQ4JDEsXG4gICAgICAgIG51bWJlcjogbnVtYmVyJDEsXG4gICAgICAgIHN0cmluZzogc3RyaW5nJDEsXG4gICAgICAgIHVpbnQxNjogdWludDE2JDEsXG4gICAgICAgIHVpbnQzMjogdWludDMyJDEsXG4gICAgICAgIHVpbnQ2NDogdWludDY0JDEsXG4gICAgICAgIHVpbnQ4OiB1aW50OCQxLFxuICAgICAgICB1dGY4V3JpdGU6IHV0ZjhXcml0ZSxcbiAgICAgICAgd3JpdGVGbG9hdDMyOiB3cml0ZUZsb2F0MzIsXG4gICAgICAgIHdyaXRlRmxvYXQ2NDogd3JpdGVGbG9hdDY0XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDb3B5cmlnaHQgKGMpIDIwMTggRW5kZWwgRHJleWVyXG4gICAgICogQ29weXJpZ2h0IChjKSAyMDE0IElvbiBEcml2ZSBTb2Z0d2FyZSBMdGQuXG4gICAgICpcbiAgICAgKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4gICAgICogb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuICAgICAqIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbiAgICAgKiB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4gICAgICogY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4gICAgICogZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAgICAgKlxuICAgICAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbFxuICAgICAqIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gICAgICpcbiAgICAgKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gICAgICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gICAgICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4gICAgICogQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICAgICAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4gICAgICogT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEVcbiAgICAgKiBTT0ZUV0FSRVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHV0ZjhSZWFkKGJ5dGVzLCBvZmZzZXQsIGxlbmd0aCkge1xuICAgICAgICB2YXIgc3RyaW5nID0gJycsIGNociA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSBvZmZzZXQsIGVuZCA9IG9mZnNldCArIGxlbmd0aDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYnl0ZSA9IGJ5dGVzW2ldO1xuICAgICAgICAgICAgaWYgKChieXRlICYgMHg4MCkgPT09IDB4MDApIHtcbiAgICAgICAgICAgICAgICBzdHJpbmcgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoYnl0ZSAmIDB4ZTApID09PSAweGMwKSB7XG4gICAgICAgICAgICAgICAgc3RyaW5nICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChieXRlICYgMHgxZikgPDwgNikgfFxuICAgICAgICAgICAgICAgICAgICAoYnl0ZXNbKytpXSAmIDB4M2YpKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoYnl0ZSAmIDB4ZjApID09PSAweGUwKSB7XG4gICAgICAgICAgICAgICAgc3RyaW5nICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChieXRlICYgMHgwZikgPDwgMTIpIHxcbiAgICAgICAgICAgICAgICAgICAgKChieXRlc1srK2ldICYgMHgzZikgPDwgNikgfFxuICAgICAgICAgICAgICAgICAgICAoKGJ5dGVzWysraV0gJiAweDNmKSA8PCAwKSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGJ5dGUgJiAweGY4KSA9PT0gMHhmMCkge1xuICAgICAgICAgICAgICAgIGNociA9ICgoYnl0ZSAmIDB4MDcpIDw8IDE4KSB8XG4gICAgICAgICAgICAgICAgICAgICgoYnl0ZXNbKytpXSAmIDB4M2YpIDw8IDEyKSB8XG4gICAgICAgICAgICAgICAgICAgICgoYnl0ZXNbKytpXSAmIDB4M2YpIDw8IDYpIHxcbiAgICAgICAgICAgICAgICAgICAgKChieXRlc1srK2ldICYgMHgzZikgPDwgMCk7XG4gICAgICAgICAgICAgICAgaWYgKGNociA+PSAweDAxMDAwMCkgeyAvLyBzdXJyb2dhdGUgcGFpclxuICAgICAgICAgICAgICAgICAgICBjaHIgLT0gMHgwMTAwMDA7XG4gICAgICAgICAgICAgICAgICAgIHN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjaHIgPj4+IDEwKSArIDB4RDgwMCwgKGNociAmIDB4M0ZGKSArIDB4REMwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdHJpbmcgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjaHIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgYnl0ZSAnICsgYnl0ZS50b1N0cmluZygxNikpO1xuICAgICAgICAgICAgLy8gKGRvIG5vdCB0aHJvdyBlcnJvciB0byBhdm9pZCBzZXJ2ZXIvY2xpZW50IGZyb20gY3Jhc2hpbmcgZHVlIHRvIGhhY2sgYXR0ZW1wcylcbiAgICAgICAgICAgIC8vIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBieXRlICcgKyBieXRlLnRvU3RyaW5nKDE2KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cmluZztcbiAgICB9XG4gICAgZnVuY3Rpb24gaW50OChieXRlcywgaXQpIHtcbiAgICAgICAgcmV0dXJuIHVpbnQ4KGJ5dGVzLCBpdCkgPDwgMjQgPj4gMjQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVpbnQ4KGJ5dGVzLCBpdCkge1xuICAgICAgICByZXR1cm4gYnl0ZXNbaXQub2Zmc2V0KytdO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbnQxNihieXRlcywgaXQpIHtcbiAgICAgICAgcmV0dXJuIHVpbnQxNihieXRlcywgaXQpIDw8IDE2ID4+IDE2O1xuICAgIH1cbiAgICBmdW5jdGlvbiB1aW50MTYoYnl0ZXMsIGl0KSB7XG4gICAgICAgIHJldHVybiBieXRlc1tpdC5vZmZzZXQrK10gfCBieXRlc1tpdC5vZmZzZXQrK10gPDwgODtcbiAgICB9XG4gICAgZnVuY3Rpb24gaW50MzIoYnl0ZXMsIGl0KSB7XG4gICAgICAgIHJldHVybiBieXRlc1tpdC5vZmZzZXQrK10gfCBieXRlc1tpdC5vZmZzZXQrK10gPDwgOCB8IGJ5dGVzW2l0Lm9mZnNldCsrXSA8PCAxNiB8IGJ5dGVzW2l0Lm9mZnNldCsrXSA8PCAyNDtcbiAgICB9XG4gICAgZnVuY3Rpb24gdWludDMyKGJ5dGVzLCBpdCkge1xuICAgICAgICByZXR1cm4gaW50MzIoYnl0ZXMsIGl0KSA+Pj4gMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gZmxvYXQzMihieXRlcywgaXQpIHtcbiAgICAgICAgcmV0dXJuIHJlYWRGbG9hdDMyKGJ5dGVzLCBpdCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZsb2F0NjQoYnl0ZXMsIGl0KSB7XG4gICAgICAgIHJldHVybiByZWFkRmxvYXQ2NChieXRlcywgaXQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbnQ2NChieXRlcywgaXQpIHtcbiAgICAgICAgdmFyIGxvdyA9IHVpbnQzMihieXRlcywgaXQpO1xuICAgICAgICB2YXIgaGlnaCA9IGludDMyKGJ5dGVzLCBpdCkgKiBNYXRoLnBvdygyLCAzMik7XG4gICAgICAgIHJldHVybiBoaWdoICsgbG93O1xuICAgIH1cbiAgICBmdW5jdGlvbiB1aW50NjQoYnl0ZXMsIGl0KSB7XG4gICAgICAgIHZhciBsb3cgPSB1aW50MzIoYnl0ZXMsIGl0KTtcbiAgICAgICAgdmFyIGhpZ2ggPSB1aW50MzIoYnl0ZXMsIGl0KSAqIE1hdGgucG93KDIsIDMyKTtcbiAgICAgICAgcmV0dXJuIGhpZ2ggKyBsb3c7XG4gICAgfVxuICAgIHZhciBfaW50MzIgPSBuZXcgSW50MzJBcnJheSgyKTtcbiAgICB2YXIgX2Zsb2F0MzIgPSBuZXcgRmxvYXQzMkFycmF5KF9pbnQzMi5idWZmZXIpO1xuICAgIHZhciBfZmxvYXQ2NCA9IG5ldyBGbG9hdDY0QXJyYXkoX2ludDMyLmJ1ZmZlcik7XG4gICAgZnVuY3Rpb24gcmVhZEZsb2F0MzIoYnl0ZXMsIGl0KSB7XG4gICAgICAgIF9pbnQzMlswXSA9IGludDMyKGJ5dGVzLCBpdCk7XG4gICAgICAgIHJldHVybiBfZmxvYXQzMlswXTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVhZEZsb2F0NjQoYnl0ZXMsIGl0KSB7XG4gICAgICAgIF9pbnQzMlswIF0gPSBpbnQzMihieXRlcywgaXQpO1xuICAgICAgICBfaW50MzJbMSBdID0gaW50MzIoYnl0ZXMsIGl0KTtcbiAgICAgICAgcmV0dXJuIF9mbG9hdDY0WzBdO1xuICAgIH1cbiAgICBmdW5jdGlvbiBib29sZWFuKGJ5dGVzLCBpdCkge1xuICAgICAgICByZXR1cm4gdWludDgoYnl0ZXMsIGl0KSA+IDA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHN0cmluZyhieXRlcywgaXQpIHtcbiAgICAgICAgdmFyIHByZWZpeCA9IGJ5dGVzW2l0Lm9mZnNldCsrXTtcbiAgICAgICAgdmFyIGxlbmd0aDtcbiAgICAgICAgaWYgKHByZWZpeCA8IDB4YzApIHtcbiAgICAgICAgICAgIC8vIGZpeHN0clxuICAgICAgICAgICAgbGVuZ3RoID0gcHJlZml4ICYgMHgxZjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwcmVmaXggPT09IDB4ZDkpIHtcbiAgICAgICAgICAgIGxlbmd0aCA9IHVpbnQ4KGJ5dGVzLCBpdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocHJlZml4ID09PSAweGRhKSB7XG4gICAgICAgICAgICBsZW5ndGggPSB1aW50MTYoYnl0ZXMsIGl0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwcmVmaXggPT09IDB4ZGIpIHtcbiAgICAgICAgICAgIGxlbmd0aCA9IHVpbnQzMihieXRlcywgaXQpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB2YWx1ZSA9IHV0ZjhSZWFkKGJ5dGVzLCBpdC5vZmZzZXQsIGxlbmd0aCk7XG4gICAgICAgIGl0Lm9mZnNldCArPSBsZW5ndGg7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc3RyaW5nQ2hlY2soYnl0ZXMsIGl0KSB7XG4gICAgICAgIHZhciBwcmVmaXggPSBieXRlc1tpdC5vZmZzZXRdO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAvLyBmaXhzdHJcbiAgICAgICAgKHByZWZpeCA8IDB4YzAgJiYgcHJlZml4ID4gMHhhMCkgfHxcbiAgICAgICAgICAgIC8vIHN0ciA4XG4gICAgICAgICAgICBwcmVmaXggPT09IDB4ZDkgfHxcbiAgICAgICAgICAgIC8vIHN0ciAxNlxuICAgICAgICAgICAgcHJlZml4ID09PSAweGRhIHx8XG4gICAgICAgICAgICAvLyBzdHIgMzJcbiAgICAgICAgICAgIHByZWZpeCA9PT0gMHhkYik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG51bWJlcihieXRlcywgaXQpIHtcbiAgICAgICAgdmFyIHByZWZpeCA9IGJ5dGVzW2l0Lm9mZnNldCsrXTtcbiAgICAgICAgaWYgKHByZWZpeCA8IDB4ODApIHtcbiAgICAgICAgICAgIC8vIHBvc2l0aXZlIGZpeGludFxuICAgICAgICAgICAgcmV0dXJuIHByZWZpeDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwcmVmaXggPT09IDB4Y2EpIHtcbiAgICAgICAgICAgIC8vIGZsb2F0IDMyXG4gICAgICAgICAgICByZXR1cm4gcmVhZEZsb2F0MzIoYnl0ZXMsIGl0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwcmVmaXggPT09IDB4Y2IpIHtcbiAgICAgICAgICAgIC8vIGZsb2F0IDY0XG4gICAgICAgICAgICByZXR1cm4gcmVhZEZsb2F0NjQoYnl0ZXMsIGl0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwcmVmaXggPT09IDB4Y2MpIHtcbiAgICAgICAgICAgIC8vIHVpbnQgOFxuICAgICAgICAgICAgcmV0dXJuIHVpbnQ4KGJ5dGVzLCBpdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocHJlZml4ID09PSAweGNkKSB7XG4gICAgICAgICAgICAvLyB1aW50IDE2XG4gICAgICAgICAgICByZXR1cm4gdWludDE2KGJ5dGVzLCBpdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocHJlZml4ID09PSAweGNlKSB7XG4gICAgICAgICAgICAvLyB1aW50IDMyXG4gICAgICAgICAgICByZXR1cm4gdWludDMyKGJ5dGVzLCBpdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocHJlZml4ID09PSAweGNmKSB7XG4gICAgICAgICAgICAvLyB1aW50IDY0XG4gICAgICAgICAgICByZXR1cm4gdWludDY0KGJ5dGVzLCBpdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocHJlZml4ID09PSAweGQwKSB7XG4gICAgICAgICAgICAvLyBpbnQgOFxuICAgICAgICAgICAgcmV0dXJuIGludDgoYnl0ZXMsIGl0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwcmVmaXggPT09IDB4ZDEpIHtcbiAgICAgICAgICAgIC8vIGludCAxNlxuICAgICAgICAgICAgcmV0dXJuIGludDE2KGJ5dGVzLCBpdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocHJlZml4ID09PSAweGQyKSB7XG4gICAgICAgICAgICAvLyBpbnQgMzJcbiAgICAgICAgICAgIHJldHVybiBpbnQzMihieXRlcywgaXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHByZWZpeCA9PT0gMHhkMykge1xuICAgICAgICAgICAgLy8gaW50IDY0XG4gICAgICAgICAgICByZXR1cm4gaW50NjQoYnl0ZXMsIGl0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwcmVmaXggPiAweGRmKSB7XG4gICAgICAgICAgICAvLyBuZWdhdGl2ZSBmaXhpbnRcbiAgICAgICAgICAgIHJldHVybiAoMHhmZiAtIHByZWZpeCArIDEpICogLTE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gbnVtYmVyQ2hlY2soYnl0ZXMsIGl0KSB7XG4gICAgICAgIHZhciBwcmVmaXggPSBieXRlc1tpdC5vZmZzZXRdO1xuICAgICAgICAvLyBwb3NpdGl2ZSBmaXhpbnQgLSAweDAwIC0gMHg3ZlxuICAgICAgICAvLyBmbG9hdCAzMiAgICAgICAgLSAweGNhXG4gICAgICAgIC8vIGZsb2F0IDY0ICAgICAgICAtIDB4Y2JcbiAgICAgICAgLy8gdWludCA4ICAgICAgICAgIC0gMHhjY1xuICAgICAgICAvLyB1aW50IDE2ICAgICAgICAgLSAweGNkXG4gICAgICAgIC8vIHVpbnQgMzIgICAgICAgICAtIDB4Y2VcbiAgICAgICAgLy8gdWludCA2NCAgICAgICAgIC0gMHhjZlxuICAgICAgICAvLyBpbnQgOCAgICAgICAgICAgLSAweGQwXG4gICAgICAgIC8vIGludCAxNiAgICAgICAgICAtIDB4ZDFcbiAgICAgICAgLy8gaW50IDMyICAgICAgICAgIC0gMHhkMlxuICAgICAgICAvLyBpbnQgNjQgICAgICAgICAgLSAweGQzXG4gICAgICAgIHJldHVybiAocHJlZml4IDwgMHg4MCB8fFxuICAgICAgICAgICAgKHByZWZpeCA+PSAweGNhICYmIHByZWZpeCA8PSAweGQzKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFycmF5Q2hlY2soYnl0ZXMsIGl0KSB7XG4gICAgICAgIHJldHVybiBieXRlc1tpdC5vZmZzZXRdIDwgMHhhMDtcbiAgICAgICAgLy8gY29uc3QgcHJlZml4ID0gYnl0ZXNbaXQub2Zmc2V0XSA7XG4gICAgICAgIC8vIGlmIChwcmVmaXggPCAweGEwKSB7XG4gICAgICAgIC8vICAgcmV0dXJuIHByZWZpeDtcbiAgICAgICAgLy8gLy8gYXJyYXlcbiAgICAgICAgLy8gfSBlbHNlIGlmIChwcmVmaXggPT09IDB4ZGMpIHtcbiAgICAgICAgLy8gICBpdC5vZmZzZXQgKz0gMjtcbiAgICAgICAgLy8gfSBlbHNlIGlmICgweGRkKSB7XG4gICAgICAgIC8vICAgaXQub2Zmc2V0ICs9IDQ7XG4gICAgICAgIC8vIH1cbiAgICAgICAgLy8gcmV0dXJuIHByZWZpeDtcbiAgICB9XG4gICAgZnVuY3Rpb24gc3dpdGNoU3RydWN0dXJlQ2hlY2soYnl0ZXMsIGl0KSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgIC8vIHByZXZpb3VzIGJ5dGUgc2hvdWxkIGJlIGBTV0lUQ0hfVE9fU1RSVUNUVVJFYFxuICAgICAgICBieXRlc1tpdC5vZmZzZXQgLSAxXSA9PT0gU1dJVENIX1RPX1NUUlVDVFVSRSAmJlxuICAgICAgICAgICAgLy8gbmV4dCBieXRlIHNob3VsZCBiZSBhIG51bWJlclxuICAgICAgICAgICAgKGJ5dGVzW2l0Lm9mZnNldF0gPCAweDgwIHx8IChieXRlc1tpdC5vZmZzZXRdID49IDB4Y2EgJiYgYnl0ZXNbaXQub2Zmc2V0XSA8PSAweGQzKSkpO1xuICAgIH1cblxuICAgIHZhciBkZWNvZGUgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gICAgICAgIF9fcHJvdG9fXzogbnVsbCxcbiAgICAgICAgYXJyYXlDaGVjazogYXJyYXlDaGVjayxcbiAgICAgICAgYm9vbGVhbjogYm9vbGVhbixcbiAgICAgICAgZmxvYXQzMjogZmxvYXQzMixcbiAgICAgICAgZmxvYXQ2NDogZmxvYXQ2NCxcbiAgICAgICAgaW50MTY6IGludDE2LFxuICAgICAgICBpbnQzMjogaW50MzIsXG4gICAgICAgIGludDY0OiBpbnQ2NCxcbiAgICAgICAgaW50ODogaW50OCxcbiAgICAgICAgbnVtYmVyOiBudW1iZXIsXG4gICAgICAgIG51bWJlckNoZWNrOiBudW1iZXJDaGVjayxcbiAgICAgICAgcmVhZEZsb2F0MzI6IHJlYWRGbG9hdDMyLFxuICAgICAgICByZWFkRmxvYXQ2NDogcmVhZEZsb2F0NjQsXG4gICAgICAgIHN0cmluZzogc3RyaW5nLFxuICAgICAgICBzdHJpbmdDaGVjazogc3RyaW5nQ2hlY2ssXG4gICAgICAgIHN3aXRjaFN0cnVjdHVyZUNoZWNrOiBzd2l0Y2hTdHJ1Y3R1cmVDaGVjayxcbiAgICAgICAgdWludDE2OiB1aW50MTYsXG4gICAgICAgIHVpbnQzMjogdWludDMyLFxuICAgICAgICB1aW50NjQ6IHVpbnQ2NCxcbiAgICAgICAgdWludDg6IHVpbnQ4XG4gICAgfSk7XG5cbiAgICB2YXIgQ29sbGVjdGlvblNjaGVtYSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ29sbGVjdGlvblNjaGVtYShpbml0aWFsVmFsdWVzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy4kY2hhbmdlcyA9IG5ldyBDaGFuZ2VUcmVlKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy4kaXRlbXMgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICB0aGlzLiRpbmRleGVzID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgdGhpcy4kcmVmSWQgPSAwO1xuICAgICAgICAgICAgaWYgKGluaXRpYWxWYWx1ZXMpIHtcbiAgICAgICAgICAgICAgICBpbml0aWFsVmFsdWVzLmZvckVhY2goZnVuY3Rpb24gKHYpIHsgcmV0dXJuIF90aGlzLmFkZCh2KTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgQ29sbGVjdGlvblNjaGVtYS5wcm90b3R5cGUub25BZGQgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIHRyaWdnZXJBbGwpIHtcbiAgICAgICAgICAgIGlmICh0cmlnZ2VyQWxsID09PSB2b2lkIDApIHsgdHJpZ2dlckFsbCA9IHRydWU7IH1cbiAgICAgICAgICAgIHJldHVybiBhZGRDYWxsYmFjaygodGhpcy4kY2FsbGJhY2tzIHx8ICh0aGlzLiRjYWxsYmFja3MgPSBbXSkpLCBleHBvcnRzLk9QRVJBVElPTi5BREQsIGNhbGxiYWNrLCAodHJpZ2dlckFsbClcbiAgICAgICAgICAgICAgICA/IHRoaXMuJGl0ZW1zXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uU2NoZW1hLnByb3RvdHlwZS5vblJlbW92ZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykgeyByZXR1cm4gYWRkQ2FsbGJhY2sodGhpcy4kY2FsbGJhY2tzIHx8ICh0aGlzLiRjYWxsYmFja3MgPSBbXSksIGV4cG9ydHMuT1BFUkFUSU9OLkRFTEVURSwgY2FsbGJhY2spOyB9O1xuICAgICAgICBDb2xsZWN0aW9uU2NoZW1hLnByb3RvdHlwZS5vbkNoYW5nZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykgeyByZXR1cm4gYWRkQ2FsbGJhY2sodGhpcy4kY2FsbGJhY2tzIHx8ICh0aGlzLiRjYWxsYmFja3MgPSBbXSksIGV4cG9ydHMuT1BFUkFUSU9OLlJFUExBQ0UsIGNhbGxiYWNrKTsgfTtcbiAgICAgICAgQ29sbGVjdGlvblNjaGVtYS5pcyA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZVsnY29sbGVjdGlvbiddICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb25TY2hlbWEucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgLy8gc2V0IFwiaW5kZXhcIiBmb3IgcmVmZXJlbmNlLlxuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy4kcmVmSWQrKztcbiAgICAgICAgICAgIHZhciBpc1JlZiA9ICh2YWx1ZVsnJGNoYW5nZXMnXSkgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmIChpc1JlZikge1xuICAgICAgICAgICAgICAgIHZhbHVlWyckY2hhbmdlcyddLnNldFBhcmVudCh0aGlzLCB0aGlzLiRjaGFuZ2VzLnJvb3QsIGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuJGNoYW5nZXMuaW5kZXhlc1tpbmRleF0gPSBpbmRleDtcbiAgICAgICAgICAgIHRoaXMuJGluZGV4ZXMuc2V0KGluZGV4LCBpbmRleCk7XG4gICAgICAgICAgICB0aGlzLiRpdGVtcy5zZXQoaW5kZXgsIHZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuJGNoYW5nZXMuY2hhbmdlKGluZGV4KTtcbiAgICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvblNjaGVtYS5wcm90b3R5cGUuYXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBBcnJheS5mcm9tKHRoaXMuJGl0ZW1zLmtleXMoKSlbaW5kZXhdO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGl0ZW1zLmdldChrZXkpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uU2NoZW1hLnByb3RvdHlwZS5lbnRyaWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGl0ZW1zLmVudHJpZXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvblNjaGVtYS5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHZhciBlbnRyaWVzID0gdGhpcy4kaXRlbXMuZW50cmllcygpO1xuICAgICAgICAgICAgdmFyIGluZGV4O1xuICAgICAgICAgICAgdmFyIGVudHJ5O1xuICAgICAgICAgICAgd2hpbGUgKGVudHJ5ID0gZW50cmllcy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZW50cnkuZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0gPT09IGVudHJ5LnZhbHVlWzFdKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gZW50cnkudmFsdWVbMF07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4kY2hhbmdlcy5kZWxldGUoaW5kZXgpO1xuICAgICAgICAgICAgdGhpcy4kaW5kZXhlcy5kZWxldGUoaW5kZXgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGl0ZW1zLmRlbGV0ZShpbmRleCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb25TY2hlbWEucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKGNoYW5nZXMpIHtcbiAgICAgICAgICAgIC8vIGRpc2NhcmQgcHJldmlvdXMgb3BlcmF0aW9ucy5cbiAgICAgICAgICAgIHRoaXMuJGNoYW5nZXMuZGlzY2FyZCh0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuJGNoYW5nZXMuaW5kZXhlcyA9IHt9O1xuICAgICAgICAgICAgLy8gY2xlYXIgcHJldmlvdXMgaW5kZXhlc1xuICAgICAgICAgICAgdGhpcy4kaW5kZXhlcy5jbGVhcigpO1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIFdoZW4gZGVjb2Rpbmc6XG4gICAgICAgICAgICAvLyAtIGVucXVldWUgaXRlbXMgZm9yIERFTEVURSBjYWxsYmFjay5cbiAgICAgICAgICAgIC8vIC0gZmxhZyBjaGlsZCBpdGVtcyBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uLlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIGlmIChjaGFuZ2VzKSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlQ2hpbGRSZWZzLmNhbGwodGhpcywgY2hhbmdlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjbGVhciBpdGVtc1xuICAgICAgICAgICAgdGhpcy4kaXRlbXMuY2xlYXIoKTtcbiAgICAgICAgICAgIHRoaXMuJGNoYW5nZXMub3BlcmF0aW9uKHsgaW5kZXg6IDAsIG9wOiBleHBvcnRzLk9QRVJBVElPTi5DTEVBUiB9KTtcbiAgICAgICAgICAgIC8vIHRvdWNoIGFsbCBzdHJ1Y3R1cmVzIHVudGlsIHJlYWNoIHJvb3RcbiAgICAgICAgICAgIHRoaXMuJGNoYW5nZXMudG91Y2hQYXJlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb25TY2hlbWEucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy4kaXRlbXMudmFsdWVzKCkpLnNvbWUoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHYgPT09IHZhbHVlOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvblNjaGVtYS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChjYWxsYmFja2ZuKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy4kaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUsIGtleSwgXykgeyByZXR1cm4gY2FsbGJhY2tmbih2YWx1ZSwga2V5LCBfdGhpcyk7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uU2NoZW1hLnByb3RvdHlwZS52YWx1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kaXRlbXMudmFsdWVzKCk7XG4gICAgICAgIH07XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb2xsZWN0aW9uU2NoZW1hLnByb3RvdHlwZSwgXCJzaXplXCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRpdGVtcy5zaXplO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBDb2xsZWN0aW9uU2NoZW1hLnByb3RvdHlwZS5zZXRJbmRleCA9IGZ1bmN0aW9uIChpbmRleCwga2V5KSB7XG4gICAgICAgICAgICB0aGlzLiRpbmRleGVzLnNldChpbmRleCwga2V5KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvblNjaGVtYS5wcm90b3R5cGUuZ2V0SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRpbmRleGVzLmdldChpbmRleCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb25TY2hlbWEucHJvdG90eXBlLmdldEJ5SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRpdGVtcy5nZXQodGhpcy4kaW5kZXhlcy5nZXQoaW5kZXgpKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvblNjaGVtYS5wcm90b3R5cGUuZGVsZXRlQnlJbmRleCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgdmFyIGtleSA9IHRoaXMuJGluZGV4ZXMuZ2V0KGluZGV4KTtcbiAgICAgICAgICAgIHRoaXMuJGl0ZW1zLmRlbGV0ZShrZXkpO1xuICAgICAgICAgICAgdGhpcy4kaW5kZXhlcy5kZWxldGUoaW5kZXgpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uU2NoZW1hLnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy4kaXRlbXMudmFsdWVzKCkpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uU2NoZW1hLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gW107XG4gICAgICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaCgodHlwZW9mICh2YWx1ZVsndG9KU09OJ10pID09PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgICAgICAgICAgICAgID8gdmFsdWVbJ3RvSlNPTiddKClcbiAgICAgICAgICAgICAgICAgICAgOiB2YWx1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgICAgIH07XG4gICAgICAgIC8vXG4gICAgICAgIC8vIERlY29kaW5nIHV0aWxpdGllc1xuICAgICAgICAvL1xuICAgICAgICBDb2xsZWN0aW9uU2NoZW1hLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uIChpc0RlY29kaW5nKSB7XG4gICAgICAgICAgICB2YXIgY2xvbmVkO1xuICAgICAgICAgICAgaWYgKGlzRGVjb2RpbmcpIHtcbiAgICAgICAgICAgICAgICAvLyBjbGllbnQtc2lkZVxuICAgICAgICAgICAgICAgIGNsb25lZCA9IE9iamVjdC5hc3NpZ24obmV3IENvbGxlY3Rpb25TY2hlbWEoKSwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBzZXJ2ZXItc2lkZVxuICAgICAgICAgICAgICAgIGNsb25lZCA9IG5ldyBDb2xsZWN0aW9uU2NoZW1hKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVbJyRjaGFuZ2VzJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lZC5hZGQodmFsdWVbJ2Nsb25lJ10oKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9uZWQuYWRkKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNsb25lZDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENvbGxlY3Rpb25TY2hlbWE7XG4gICAgfSgpKTtcblxuICAgIHZhciBTZXRTY2hlbWEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFNldFNjaGVtYShpbml0aWFsVmFsdWVzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy4kY2hhbmdlcyA9IG5ldyBDaGFuZ2VUcmVlKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy4kaXRlbXMgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICB0aGlzLiRpbmRleGVzID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgdGhpcy4kcmVmSWQgPSAwO1xuICAgICAgICAgICAgaWYgKGluaXRpYWxWYWx1ZXMpIHtcbiAgICAgICAgICAgICAgICBpbml0aWFsVmFsdWVzLmZvckVhY2goZnVuY3Rpb24gKHYpIHsgcmV0dXJuIF90aGlzLmFkZCh2KTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgU2V0U2NoZW1hLnByb3RvdHlwZS5vbkFkZCA9IGZ1bmN0aW9uIChjYWxsYmFjaywgdHJpZ2dlckFsbCkge1xuICAgICAgICAgICAgaWYgKHRyaWdnZXJBbGwgPT09IHZvaWQgMCkgeyB0cmlnZ2VyQWxsID0gdHJ1ZTsgfVxuICAgICAgICAgICAgcmV0dXJuIGFkZENhbGxiYWNrKCh0aGlzLiRjYWxsYmFja3MgfHwgKHRoaXMuJGNhbGxiYWNrcyA9IFtdKSksIGV4cG9ydHMuT1BFUkFUSU9OLkFERCwgY2FsbGJhY2ssICh0cmlnZ2VyQWxsKVxuICAgICAgICAgICAgICAgID8gdGhpcy4kaXRlbXNcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH07XG4gICAgICAgIFNldFNjaGVtYS5wcm90b3R5cGUub25SZW1vdmUgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsgcmV0dXJuIGFkZENhbGxiYWNrKHRoaXMuJGNhbGxiYWNrcyB8fCAodGhpcy4kY2FsbGJhY2tzID0gW10pLCBleHBvcnRzLk9QRVJBVElPTi5ERUxFVEUsIGNhbGxiYWNrKTsgfTtcbiAgICAgICAgU2V0U2NoZW1hLnByb3RvdHlwZS5vbkNoYW5nZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykgeyByZXR1cm4gYWRkQ2FsbGJhY2sodGhpcy4kY2FsbGJhY2tzIHx8ICh0aGlzLiRjYWxsYmFja3MgPSBbXSksIGV4cG9ydHMuT1BFUkFUSU9OLlJFUExBQ0UsIGNhbGxiYWNrKTsgfTtcbiAgICAgICAgU2V0U2NoZW1hLmlzID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlWydzZXQnXSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICBTZXRTY2hlbWEucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgIC8vIGltbWVkaWF0ZWxseSByZXR1cm4gZmFsc2UgaWYgdmFsdWUgYWxyZWFkeSBhZGRlZC5cbiAgICAgICAgICAgIGlmICh0aGlzLmhhcyh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBzZXQgXCJpbmRleFwiIGZvciByZWZlcmVuY2UuXG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLiRyZWZJZCsrO1xuICAgICAgICAgICAgaWYgKCh2YWx1ZVsnJGNoYW5nZXMnXSkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhbHVlWyckY2hhbmdlcyddLnNldFBhcmVudCh0aGlzLCB0aGlzLiRjaGFuZ2VzLnJvb3QsIGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvcGVyYXRpb24gPSAoX2IgPSAoX2EgPSB0aGlzLiRjaGFuZ2VzLmluZGV4ZXNbaW5kZXhdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eub3ApICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGV4cG9ydHMuT1BFUkFUSU9OLkFERDtcbiAgICAgICAgICAgIHRoaXMuJGNoYW5nZXMuaW5kZXhlc1tpbmRleF0gPSBpbmRleDtcbiAgICAgICAgICAgIHRoaXMuJGluZGV4ZXMuc2V0KGluZGV4LCBpbmRleCk7XG4gICAgICAgICAgICB0aGlzLiRpdGVtcy5zZXQoaW5kZXgsIHZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuJGNoYW5nZXMuY2hhbmdlKGluZGV4LCBvcGVyYXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICB9O1xuICAgICAgICBTZXRTY2hlbWEucHJvdG90eXBlLmVudHJpZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kaXRlbXMuZW50cmllcygpO1xuICAgICAgICB9O1xuICAgICAgICBTZXRTY2hlbWEucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICB2YXIgZW50cmllcyA9IHRoaXMuJGl0ZW1zLmVudHJpZXMoKTtcbiAgICAgICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgICAgIHZhciBlbnRyeTtcbiAgICAgICAgICAgIHdoaWxlIChlbnRyeSA9IGVudHJpZXMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5LmRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpdGVtID09PSBlbnRyeS52YWx1ZVsxXSkge1xuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGVudHJ5LnZhbHVlWzBdO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuJGNoYW5nZXMuZGVsZXRlKGluZGV4KTtcbiAgICAgICAgICAgIHRoaXMuJGluZGV4ZXMuZGVsZXRlKGluZGV4KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRpdGVtcy5kZWxldGUoaW5kZXgpO1xuICAgICAgICB9O1xuICAgICAgICBTZXRTY2hlbWEucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKGNoYW5nZXMpIHtcbiAgICAgICAgICAgIC8vIGRpc2NhcmQgcHJldmlvdXMgb3BlcmF0aW9ucy5cbiAgICAgICAgICAgIHRoaXMuJGNoYW5nZXMuZGlzY2FyZCh0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuJGNoYW5nZXMuaW5kZXhlcyA9IHt9O1xuICAgICAgICAgICAgLy8gY2xlYXIgcHJldmlvdXMgaW5kZXhlc1xuICAgICAgICAgICAgdGhpcy4kaW5kZXhlcy5jbGVhcigpO1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIFdoZW4gZGVjb2Rpbmc6XG4gICAgICAgICAgICAvLyAtIGVucXVldWUgaXRlbXMgZm9yIERFTEVURSBjYWxsYmFjay5cbiAgICAgICAgICAgIC8vIC0gZmxhZyBjaGlsZCBpdGVtcyBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uLlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIGlmIChjaGFuZ2VzKSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlQ2hpbGRSZWZzLmNhbGwodGhpcywgY2hhbmdlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjbGVhciBpdGVtc1xuICAgICAgICAgICAgdGhpcy4kaXRlbXMuY2xlYXIoKTtcbiAgICAgICAgICAgIHRoaXMuJGNoYW5nZXMub3BlcmF0aW9uKHsgaW5kZXg6IDAsIG9wOiBleHBvcnRzLk9QRVJBVElPTi5DTEVBUiB9KTtcbiAgICAgICAgICAgIC8vIHRvdWNoIGFsbCBzdHJ1Y3R1cmVzIHVudGlsIHJlYWNoIHJvb3RcbiAgICAgICAgICAgIHRoaXMuJGNoYW5nZXMudG91Y2hQYXJlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIFNldFNjaGVtYS5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gdGhpcy4kaXRlbXMudmFsdWVzKCk7XG4gICAgICAgICAgICB2YXIgaGFzID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgZW50cnk7XG4gICAgICAgICAgICB3aGlsZSAoZW50cnkgPSB2YWx1ZXMubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5LmRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gZW50cnkudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGhhcztcbiAgICAgICAgfTtcbiAgICAgICAgU2V0U2NoZW1hLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNhbGxiYWNrZm4pIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLiRpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwga2V5LCBfKSB7IHJldHVybiBjYWxsYmFja2ZuKHZhbHVlLCBrZXksIF90aGlzKTsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFNldFNjaGVtYS5wcm90b3R5cGUudmFsdWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGl0ZW1zLnZhbHVlcygpO1xuICAgICAgICB9O1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2V0U2NoZW1hLnByb3RvdHlwZSwgXCJzaXplXCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRpdGVtcy5zaXplO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBTZXRTY2hlbWEucHJvdG90eXBlLnNldEluZGV4ID0gZnVuY3Rpb24gKGluZGV4LCBrZXkpIHtcbiAgICAgICAgICAgIHRoaXMuJGluZGV4ZXMuc2V0KGluZGV4LCBrZXkpO1xuICAgICAgICB9O1xuICAgICAgICBTZXRTY2hlbWEucHJvdG90eXBlLmdldEluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kaW5kZXhlcy5nZXQoaW5kZXgpO1xuICAgICAgICB9O1xuICAgICAgICBTZXRTY2hlbWEucHJvdG90eXBlLmdldEJ5SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRpdGVtcy5nZXQodGhpcy4kaW5kZXhlcy5nZXQoaW5kZXgpKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2V0U2NoZW1hLnByb3RvdHlwZS5kZWxldGVCeUluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gdGhpcy4kaW5kZXhlcy5nZXQoaW5kZXgpO1xuICAgICAgICAgICAgdGhpcy4kaXRlbXMuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICB0aGlzLiRpbmRleGVzLmRlbGV0ZShpbmRleCk7XG4gICAgICAgIH07XG4gICAgICAgIFNldFNjaGVtYS5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuJGl0ZW1zLnZhbHVlcygpKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2V0U2NoZW1hLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gW107XG4gICAgICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaCgodHlwZW9mICh2YWx1ZVsndG9KU09OJ10pID09PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgICAgICAgICAgICAgID8gdmFsdWVbJ3RvSlNPTiddKClcbiAgICAgICAgICAgICAgICAgICAgOiB2YWx1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgICAgIH07XG4gICAgICAgIC8vXG4gICAgICAgIC8vIERlY29kaW5nIHV0aWxpdGllc1xuICAgICAgICAvL1xuICAgICAgICBTZXRTY2hlbWEucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKGlzRGVjb2RpbmcpIHtcbiAgICAgICAgICAgIHZhciBjbG9uZWQ7XG4gICAgICAgICAgICBpZiAoaXNEZWNvZGluZykge1xuICAgICAgICAgICAgICAgIC8vIGNsaWVudC1zaWRlXG4gICAgICAgICAgICAgICAgY2xvbmVkID0gT2JqZWN0LmFzc2lnbihuZXcgU2V0U2NoZW1hKCksIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gc2VydmVyLXNpZGVcbiAgICAgICAgICAgICAgICBjbG9uZWQgPSBuZXcgU2V0U2NoZW1hKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVbJyRjaGFuZ2VzJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lZC5hZGQodmFsdWVbJ2Nsb25lJ10oKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9uZWQuYWRkKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNsb25lZDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFNldFNjaGVtYTtcbiAgICB9KCkpO1xuXG4gICAgdmFyIENsaWVudFN0YXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDbGllbnRTdGF0ZSgpIHtcbiAgICAgICAgICAgIHRoaXMucmVmSWRzID0gbmV3IFdlYWtTZXQoKTtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVySW5kZXhlcyA9IG5ldyBXZWFrTWFwKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY29udGFpbmVySW5kZXhlcyA9IG5ldyBNYXA8Q2hhbmdlVHJlZSwgU2V0PG51bWJlcj4+KCk7XG4gICAgICAgIENsaWVudFN0YXRlLnByb3RvdHlwZS5hZGRSZWZJZCA9IGZ1bmN0aW9uIChjaGFuZ2VUcmVlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucmVmSWRzLmhhcyhjaGFuZ2VUcmVlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmSWRzLmFkZChjaGFuZ2VUcmVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lckluZGV4ZXMuc2V0KGNoYW5nZVRyZWUsIG5ldyBTZXQoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENsaWVudFN0YXRlLmdldCA9IGZ1bmN0aW9uIChjbGllbnQpIHtcbiAgICAgICAgICAgIGlmIChjbGllbnQuJGZpbHRlclN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjbGllbnQuJGZpbHRlclN0YXRlID0gbmV3IENsaWVudFN0YXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2xpZW50LiRmaWx0ZXJTdGF0ZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENsaWVudFN0YXRlO1xuICAgIH0oKSk7XG5cbiAgICB2YXIgUmVmZXJlbmNlVHJhY2tlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUmVmZXJlbmNlVHJhY2tlcigpIHtcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBSZWxhdGlvbiBvZiByZWZJZCA9PiBTY2hlbWEgc3RydWN0dXJlXG4gICAgICAgICAgICAvLyBGb3IgZGlyZWN0IGFjY2VzcyBvZiBzdHJ1Y3R1cmVzIGR1cmluZyBkZWNvZGluZyB0aW1lLlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIHRoaXMucmVmcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIHRoaXMucmVmQ291bnRzID0ge307XG4gICAgICAgICAgICB0aGlzLmRlbGV0ZWRSZWZzID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgdGhpcy5uZXh0VW5pcXVlSWQgPSAwO1xuICAgICAgICB9XG4gICAgICAgIFJlZmVyZW5jZVRyYWNrZXIucHJvdG90eXBlLmdldE5leHRVbmlxdWVJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5leHRVbmlxdWVJZCsrO1xuICAgICAgICB9O1xuICAgICAgICAvLyBmb3IgZGVjb2RpbmdcbiAgICAgICAgUmVmZXJlbmNlVHJhY2tlci5wcm90b3R5cGUuYWRkUmVmID0gZnVuY3Rpb24gKHJlZklkLCByZWYsIGluY3JlbWVudENvdW50KSB7XG4gICAgICAgICAgICBpZiAoaW5jcmVtZW50Q291bnQgPT09IHZvaWQgMCkgeyBpbmNyZW1lbnRDb3VudCA9IHRydWU7IH1cbiAgICAgICAgICAgIHRoaXMucmVmcy5zZXQocmVmSWQsIHJlZik7XG4gICAgICAgICAgICBpZiAoaW5jcmVtZW50Q291bnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZkNvdW50c1tyZWZJZF0gPSAodGhpcy5yZWZDb3VudHNbcmVmSWRdIHx8IDApICsgMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gZm9yIGRlY29kaW5nXG4gICAgICAgIFJlZmVyZW5jZVRyYWNrZXIucHJvdG90eXBlLnJlbW92ZVJlZiA9IGZ1bmN0aW9uIChyZWZJZCkge1xuICAgICAgICAgICAgdmFyIHJlZkNvdW50ID0gdGhpcy5yZWZDb3VudHNbcmVmSWRdO1xuICAgICAgICAgICAgaWYgKHJlZkNvdW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJ0cnlpbmcgdG8gcmVtb3ZlIHJlZmVyZW5jZSBcIi5jb25jYXQocmVmSWQsIFwiIHRoYXQgZG9lc24ndCBleGlzdFwiKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlZkNvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwidHJ5aW5nIHRvIHJlbW92ZSByZWZlcmVuY2UgXCIuY29uY2F0KHJlZklkLCBcIiB3aXRoIDAgcmVmQ291bnRcIikpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVmQ291bnRzW3JlZklkXSA9IHJlZkNvdW50IC0gMTtcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlZFJlZnMuYWRkKHJlZklkKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVmZXJlbmNlVHJhY2tlci5wcm90b3R5cGUuY2xlYXJSZWZzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZWZzLmNsZWFyKCk7XG4gICAgICAgICAgICB0aGlzLmRlbGV0ZWRSZWZzLmNsZWFyKCk7XG4gICAgICAgICAgICB0aGlzLnJlZkNvdW50cyA9IHt9O1xuICAgICAgICB9O1xuICAgICAgICAvLyBmb3IgZGVjb2RpbmdcbiAgICAgICAgUmVmZXJlbmNlVHJhY2tlci5wcm90b3R5cGUuZ2FyYmFnZUNvbGxlY3REZWxldGVkUmVmcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmRlbGV0ZWRSZWZzLmZvckVhY2goZnVuY3Rpb24gKHJlZklkKSB7XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyBTa2lwIGFjdGl2ZSByZWZlcmVuY2VzLlxuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnJlZkNvdW50c1tyZWZJZF0gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHJlZiA9IF90aGlzLnJlZnMuZ2V0KHJlZklkKTtcbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vIEVuc3VyZSBjaGlsZCBzY2hlbWEgaW5zdGFuY2VzIGhhdmUgdGhlaXIgcmVmZXJlbmNlcyByZW1vdmVkIGFzIHdlbGwuXG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICBpZiAocmVmIGluc3RhbmNlb2YgU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGZpZWxkTmFtZSBpbiByZWZbJ19kZWZpbml0aW9uJ10uc2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChyZWZbJ19kZWZpbml0aW9uJ10uc2NoZW1hW2ZpZWxkTmFtZV0pICE9PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmW2ZpZWxkTmFtZV0gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZbZmllbGROYW1lXVsnJGNoYW5nZXMnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlbW92ZVJlZihyZWZbZmllbGROYW1lXVsnJGNoYW5nZXMnXS5yZWZJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWZpbml0aW9uID0gcmVmWyckY2hhbmdlcyddLnBhcmVudC5fZGVmaW5pdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBkZWZpbml0aW9uLnNjaGVtYVtkZWZpbml0aW9uLmZpZWxkc0J5SW5kZXhbcmVmWyckY2hhbmdlcyddLnBhcmVudEluZGV4XV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKE9iamVjdC52YWx1ZXModHlwZSlbMF0pID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmZyb20ocmVmLnZhbHVlcygpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkgeyByZXR1cm4gX3RoaXMucmVtb3ZlUmVmKGNoaWxkWyckY2hhbmdlcyddLnJlZklkKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMucmVmcy5kZWxldGUocmVmSWQpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBfdGhpcy5yZWZDb3VudHNbcmVmSWRdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBjbGVhciBkZWxldGVkIHJlZnMuXG4gICAgICAgICAgICB0aGlzLmRlbGV0ZWRSZWZzLmNsZWFyKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBSZWZlcmVuY2VUcmFja2VyO1xuICAgIH0oKSk7XG5cbiAgICB2YXIgRW5jb2RlU2NoZW1hRXJyb3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhFbmNvZGVTY2hlbWFFcnJvciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRW5jb2RlU2NoZW1hRXJyb3IoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEVuY29kZVNjaGVtYUVycm9yO1xuICAgIH0oRXJyb3IpKTtcbiAgICBmdW5jdGlvbiBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlLCBrbGFzcywgZmllbGQpIHtcbiAgICAgICAgdmFyIHR5cGVvZlRhcmdldDtcbiAgICAgICAgdmFyIGFsbG93TnVsbCA9IGZhbHNlO1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgICAgIGNhc2UgXCJpbnQ4XCI6XG4gICAgICAgICAgICBjYXNlIFwidWludDhcIjpcbiAgICAgICAgICAgIGNhc2UgXCJpbnQxNlwiOlxuICAgICAgICAgICAgY2FzZSBcInVpbnQxNlwiOlxuICAgICAgICAgICAgY2FzZSBcImludDMyXCI6XG4gICAgICAgICAgICBjYXNlIFwidWludDMyXCI6XG4gICAgICAgICAgICBjYXNlIFwiaW50NjRcIjpcbiAgICAgICAgICAgIGNhc2UgXCJ1aW50NjRcIjpcbiAgICAgICAgICAgIGNhc2UgXCJmbG9hdDMyXCI6XG4gICAgICAgICAgICBjYXNlIFwiZmxvYXQ2NFwiOlxuICAgICAgICAgICAgICAgIHR5cGVvZlRhcmdldCA9IFwibnVtYmVyXCI7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInRyeWluZyB0byBlbmNvZGUgXFxcIk5hTlxcXCIgaW4gXCIuY29uY2F0KGtsYXNzLmNvbnN0cnVjdG9yLm5hbWUsIFwiI1wiKS5jb25jYXQoZmllbGQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgICAgICAgdHlwZW9mVGFyZ2V0ID0gXCJzdHJpbmdcIjtcbiAgICAgICAgICAgICAgICBhbGxvd051bGwgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgICAgICAgICAvLyBib29sZWFuIGlzIGFsd2F5cyBlbmNvZGVkIGFzIHRydWUvZmFsc2UgYmFzZWQgb24gdHJ1dGhpbmVzc1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mICh2YWx1ZSkgIT09IHR5cGVvZlRhcmdldCAmJiAoIWFsbG93TnVsbCB8fCAoYWxsb3dOdWxsICYmIHZhbHVlICE9PSBudWxsKSkpIHtcbiAgICAgICAgICAgIHZhciBmb3VuZFZhbHVlID0gXCInXCIuY29uY2F0KEpTT04uc3RyaW5naWZ5KHZhbHVlKSwgXCInXCIpLmNvbmNhdCgodmFsdWUgJiYgdmFsdWUuY29uc3RydWN0b3IgJiYgXCIgKFwiLmNvbmNhdCh2YWx1ZS5jb25zdHJ1Y3Rvci5uYW1lLCBcIilcIikpIHx8ICcnKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFbmNvZGVTY2hlbWFFcnJvcihcImEgJ1wiLmNvbmNhdCh0eXBlb2ZUYXJnZXQsIFwiJyB3YXMgZXhwZWN0ZWQsIGJ1dCBcIikuY29uY2F0KGZvdW5kVmFsdWUsIFwiIHdhcyBwcm92aWRlZCBpbiBcIikuY29uY2F0KGtsYXNzLmNvbnN0cnVjdG9yLm5hbWUsIFwiI1wiKS5jb25jYXQoZmllbGQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBhc3NlcnRJbnN0YW5jZVR5cGUodmFsdWUsIHR5cGUsIGtsYXNzLCBmaWVsZCkge1xuICAgICAgICBpZiAoISh2YWx1ZSBpbnN0YW5jZW9mIHR5cGUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRW5jb2RlU2NoZW1hRXJyb3IoXCJhICdcIi5jb25jYXQodHlwZS5uYW1lLCBcIicgd2FzIGV4cGVjdGVkLCBidXQgJ1wiKS5jb25jYXQodmFsdWUuY29uc3RydWN0b3IubmFtZSwgXCInIHdhcyBwcm92aWRlZCBpbiBcIikuY29uY2F0KGtsYXNzLmNvbnN0cnVjdG9yLm5hbWUsIFwiI1wiKS5jb25jYXQoZmllbGQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBlbmNvZGVQcmltaXRpdmVUeXBlKHR5cGUsIGJ5dGVzLCB2YWx1ZSwga2xhc3MsIGZpZWxkKSB7XG4gICAgICAgIGFzc2VydFR5cGUodmFsdWUsIHR5cGUsIGtsYXNzLCBmaWVsZCk7XG4gICAgICAgIHZhciBlbmNvZGVGdW5jID0gZW5jb2RlW3R5cGVdO1xuICAgICAgICBpZiAoZW5jb2RlRnVuYykge1xuICAgICAgICAgICAgZW5jb2RlRnVuYyhieXRlcywgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVuY29kZVNjaGVtYUVycm9yKFwiYSAnXCIuY29uY2F0KHR5cGUsIFwiJyB3YXMgZXhwZWN0ZWQsIGJ1dCBcIikuY29uY2F0KHZhbHVlLCBcIiB3YXMgcHJvdmlkZWQgaW4gXCIpLmNvbmNhdChrbGFzcy5jb25zdHJ1Y3Rvci5uYW1lLCBcIiNcIikuY29uY2F0KGZpZWxkKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZGVjb2RlUHJpbWl0aXZlVHlwZSh0eXBlLCBieXRlcywgaXQpIHtcbiAgICAgICAgcmV0dXJuIGRlY29kZVt0eXBlXShieXRlcywgaXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTY2hlbWEgZW5jb2RlciAvIGRlY29kZXJcbiAgICAgKi9cbiAgICB2YXIgU2NoZW1hID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBhbGxvdyBpbmhlcml0ZWQgY2xhc3NlcyB0byBoYXZlIGEgY29uc3RydWN0b3JcbiAgICAgICAgZnVuY3Rpb24gU2NoZW1hKCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZml4IGVudW1lcmFiaWxpdHkgb2YgZmllbGRzIGZvciBlbmQtdXNlclxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xuICAgICAgICAgICAgICAgICRjaGFuZ2VzOiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBuZXcgQ2hhbmdlVHJlZSh0aGlzLCB1bmRlZmluZWQsIG5ldyBSZWZlcmVuY2VUcmFja2VyKCkpLFxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vICRsaXN0ZW5lcnM6IHtcbiAgICAgICAgICAgICAgICAvLyAgICAgdmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAvLyAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgLy8gICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgLy8gfSxcbiAgICAgICAgICAgICAgICAkY2FsbGJhY2tzOiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBkZXNjcmlwdG9ycyA9IHRoaXMuX2RlZmluaXRpb24uZGVzY3JpcHRvcnM7XG4gICAgICAgICAgICBpZiAoZGVzY3JpcHRvcnMpIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCBkZXNjcmlwdG9ycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gQXNzaWduIGluaXRpYWwgdmFsdWVzXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgaWYgKGFyZ3NbMF0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2lnbihhcmdzWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBTY2hlbWEub25FcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICB9O1xuICAgICAgICBTY2hlbWEuaXMgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuICh0eXBlWydfZGVmaW5pdGlvbiddICYmXG4gICAgICAgICAgICAgICAgdHlwZVsnX2RlZmluaXRpb24nXS5zY2hlbWEgIT09IHVuZGVmaW5lZCk7XG4gICAgICAgIH07XG4gICAgICAgIFNjaGVtYS5wcm90b3R5cGUub25DaGFuZ2UgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHJldHVybiBhZGRDYWxsYmFjaygodGhpcy4kY2FsbGJhY2tzIHx8ICh0aGlzLiRjYWxsYmFja3MgPSB7fSkpLCBleHBvcnRzLk9QRVJBVElPTi5SRVBMQUNFLCBjYWxsYmFjayk7XG4gICAgICAgIH07XG4gICAgICAgIFNjaGVtYS5wcm90b3R5cGUub25SZW1vdmUgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHJldHVybiBhZGRDYWxsYmFjaygodGhpcy4kY2FsbGJhY2tzIHx8ICh0aGlzLiRjYWxsYmFja3MgPSB7fSkpLCBleHBvcnRzLk9QRVJBVElPTi5ERUxFVEUsIGNhbGxiYWNrKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2NoZW1hLnByb3RvdHlwZS5hc3NpZ24gPSBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgcHJvcHMpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTY2hlbWEucHJvdG90eXBlLCBcIl9kZWZpbml0aW9uXCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5fZGVmaW5pdGlvbjsgfSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogKFNlcnZlci1zaWRlKTogRmxhZyBhIHByb3BlcnR5IHRvIGJlIGVuY29kZWQgZm9yIHRoZSBuZXh0IHBhdGNoLlxuICAgICAgICAgKiBAcGFyYW0gaW5zdGFuY2UgU2NoZW1hIGluc3RhbmNlXG4gICAgICAgICAqIEBwYXJhbSBwcm9wZXJ0eSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBwcm9wZXJ0eSBuYW1lLCBvciBudW1iZXIgcmVwcmVzZW50aW5nIHRoZSBpbmRleCBvZiB0aGUgcHJvcGVydHkuXG4gICAgICAgICAqIEBwYXJhbSBvcGVyYXRpb24gT1BFUkFUSU9OIHRvIHBlcmZvcm0gKGRldGVjdGVkIGF1dG9tYXRpY2FsbHkpXG4gICAgICAgICAqL1xuICAgICAgICBTY2hlbWEucHJvdG90eXBlLnNldERpcnR5ID0gZnVuY3Rpb24gKHByb3BlcnR5LCBvcGVyYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuJGNoYW5nZXMuY2hhbmdlKHByb3BlcnR5LCBvcGVyYXRpb24pO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2xpZW50LXNpZGU6IGxpc3RlbiBmb3IgY2hhbmdlcyBvbiBwcm9wZXJ0eS5cbiAgICAgICAgICogQHBhcmFtIHByb3AgdGhlIHByb3BlcnR5IG5hbWVcbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrIGNhbGxiYWNrIHRvIGJlIHRyaWdnZXJlZCBvbiBwcm9wZXJ0eSBjaGFuZ2VcbiAgICAgICAgICogQHBhcmFtIGltbWVkaWF0ZSB0cmlnZ2VyIGltbWVkaWF0ZWxseSBpZiBwcm9wZXJ0eSBoYXMgYmVlbiBhbHJlYWR5IHNldC5cbiAgICAgICAgICovXG4gICAgICAgIFNjaGVtYS5wcm90b3R5cGUubGlzdGVuID0gZnVuY3Rpb24gKHByb3AsIGNhbGxiYWNrLCBpbW1lZGlhdGUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoaW1tZWRpYXRlID09PSB2b2lkIDApIHsgaW1tZWRpYXRlID0gdHJ1ZTsgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLiRjYWxsYmFja3MpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRjYWxsYmFja3MgPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy4kY2FsbGJhY2tzW3Byb3BdKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kY2FsbGJhY2tzW3Byb3BdID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiRjYWxsYmFja3NbcHJvcF0ucHVzaChjYWxsYmFjayk7XG4gICAgICAgICAgICBpZiAoaW1tZWRpYXRlICYmIHRoaXNbcHJvcF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRoaXNbcHJvcF0sIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyByZXR1cm4gdW4tcmVnaXN0ZXIgY2FsbGJhY2suXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gc3BsaWNlT25lKF90aGlzLiRjYWxsYmFja3NbcHJvcF0sIF90aGlzLiRjYWxsYmFja3NbcHJvcF0uaW5kZXhPZihjYWxsYmFjaykpOyB9O1xuICAgICAgICB9O1xuICAgICAgICBTY2hlbWEucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChieXRlcywgaXQsIHJlZikge1xuICAgICAgICAgICAgaWYgKGl0ID09PSB2b2lkIDApIHsgaXQgPSB7IG9mZnNldDogMCB9OyB9XG4gICAgICAgICAgICBpZiAocmVmID09PSB2b2lkIDApIHsgcmVmID0gdGhpczsgfVxuICAgICAgICAgICAgdmFyIGFsbENoYW5nZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciAkcm9vdCA9IHRoaXMuJGNoYW5nZXMucm9vdDtcbiAgICAgICAgICAgIHZhciB0b3RhbEJ5dGVzID0gYnl0ZXMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIHJlZklkID0gMDtcbiAgICAgICAgICAgICRyb290LnJlZnMuc2V0KHJlZklkLCB0aGlzKTtcbiAgICAgICAgICAgIHdoaWxlIChpdC5vZmZzZXQgPCB0b3RhbEJ5dGVzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJ5dGUgPSBieXRlc1tpdC5vZmZzZXQrK107XG4gICAgICAgICAgICAgICAgaWYgKGJ5dGUgPT0gU1dJVENIX1RPX1NUUlVDVFVSRSkge1xuICAgICAgICAgICAgICAgICAgICByZWZJZCA9IG51bWJlcihieXRlcywgaXQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dFJlZiA9ICRyb290LnJlZnMuZ2V0KHJlZklkKTtcbiAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgLy8gVHJ5aW5nIHRvIGFjY2VzcyBhIHJlZmVyZW5jZSB0aGF0IGhhdmVuJ3QgYmVlbiBkZWNvZGVkIHlldC5cbiAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXh0UmVmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcXFwicmVmSWRcXFwiIG5vdCBmb3VuZDogXCIuY29uY2F0KHJlZklkKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVmID0gbmV4dFJlZjtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBjaGFuZ2VUcmVlID0gcmVmWyckY2hhbmdlcyddO1xuICAgICAgICAgICAgICAgIHZhciBpc1NjaGVtYSA9IChyZWZbJ19kZWZpbml0aW9uJ10gIT09IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgdmFyIG9wZXJhdGlvbiA9IChpc1NjaGVtYSlcbiAgICAgICAgICAgICAgICAgICAgPyAoYnl0ZSA+PiA2KSA8PCA2IC8vIFwiY29tcHJlc3NlZFwiIGluZGV4ICsgb3BlcmF0aW9uXG4gICAgICAgICAgICAgICAgICAgIDogYnl0ZTsgLy8gXCJ1bmNvbXByZXNzZWRcIiBpbmRleCArIG9wZXJhdGlvbiAoYXJyYXkvbWFwIGl0ZW1zKVxuICAgICAgICAgICAgICAgIGlmIChvcGVyYXRpb24gPT09IGV4cG9ydHMuT1BFUkFUSU9OLkNMRUFSKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IHJlZmFjdG9yIG1lIVxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgYC5jbGVhcigpYCBtZXRob2QgaXMgY2FsbGluZyBgJHJvb3QucmVtb3ZlUmVmKHJlZklkKWAgZm9yXG4gICAgICAgICAgICAgICAgICAgIC8vIGVhY2ggaXRlbSBpbnNpZGUgdGhpcyBjb2xsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgIHJlZi5jbGVhcihhbGxDaGFuZ2VzKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBmaWVsZEluZGV4ID0gKGlzU2NoZW1hKVxuICAgICAgICAgICAgICAgICAgICA/IGJ5dGUgJSAob3BlcmF0aW9uIHx8IDI1NSkgLy8gaWYgXCJSRVBMQUNFXCIgb3BlcmF0aW9uICgwKSwgdXNlIDI1NVxuICAgICAgICAgICAgICAgICAgICA6IG51bWJlcihieXRlcywgaXQpO1xuICAgICAgICAgICAgICAgIHZhciBmaWVsZE5hbWUgPSAoaXNTY2hlbWEpXG4gICAgICAgICAgICAgICAgICAgID8gKHJlZlsnX2RlZmluaXRpb24nXS5maWVsZHNCeUluZGV4W2ZpZWxkSW5kZXhdKVxuICAgICAgICAgICAgICAgICAgICA6IFwiXCI7XG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBjaGFuZ2VUcmVlLmdldFR5cGUoZmllbGRJbmRleCk7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciBwcmV2aW91c1ZhbHVlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciBkeW5hbWljSW5kZXggPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1NjaGVtYSkge1xuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1ZhbHVlID0gcmVmWydnZXRCeUluZGV4J10oZmllbGRJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgob3BlcmF0aW9uICYgZXhwb3J0cy5PUEVSQVRJT04uQUREKSA9PT0gZXhwb3J0cy5PUEVSQVRJT04uQUREKSB7IC8vIEFERCBvciBERUxFVEVfQU5EX0FERFxuICAgICAgICAgICAgICAgICAgICAgICAgZHluYW1pY0luZGV4ID0gKHJlZiBpbnN0YW5jZW9mIE1hcFNjaGVtYSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHN0cmluZyhieXRlcywgaXQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmaWVsZEluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVmWydzZXRJbmRleCddKGZpZWxkSW5kZXgsIGR5bmFtaWNJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBoZXJlXG4gICAgICAgICAgICAgICAgICAgICAgICBkeW5hbWljSW5kZXggPSByZWZbJ2dldEluZGV4J10oZmllbGRJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWUgPSByZWZbXCJfXCIuY29uY2F0KGZpZWxkTmFtZSldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBvcGVyYXRpb25zXG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICBpZiAoKG9wZXJhdGlvbiAmIGV4cG9ydHMuT1BFUkFUSU9OLkRFTEVURSkgPT09IGV4cG9ydHMuT1BFUkFUSU9OLkRFTEVURSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3BlcmF0aW9uICE9PSBleHBvcnRzLk9QRVJBVElPTi5ERUxFVEVfQU5EX0FERCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVmWydkZWxldGVCeUluZGV4J10oZmllbGRJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gRmxhZyBgcmVmSWRgIGZvciBnYXJiYWdlIGNvbGxlY3Rpb24uXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c1ZhbHVlICYmIHByZXZpb3VzVmFsdWVbJyRjaGFuZ2VzJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LnJlbW92ZVJlZihwcmV2aW91c1ZhbHVlWyckY2hhbmdlcyddLnJlZklkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmaWVsZE5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJAY29seXNldXMvc2NoZW1hOiBkZWZpbml0aW9uIG1pc21hdGNoXCIpO1xuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAvLyBrZWVwIHNraXBwaW5nIG5leHQgYnl0ZXMgdW50aWwgcmVhY2hlcyBhIGtub3duIHN0cnVjdHVyZVxuICAgICAgICAgICAgICAgICAgICAvLyBieSBsb2NhbCBkZWNvZGVyLlxuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dEl0ZXJhdG9yID0geyBvZmZzZXQ6IGl0Lm9mZnNldCB9O1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaXQub2Zmc2V0IDwgdG90YWxCeXRlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN3aXRjaFN0cnVjdHVyZUNoZWNrKGJ5dGVzLCBpdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0SXRlcmF0b3Iub2Zmc2V0ID0gaXQub2Zmc2V0ICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHJvb3QucmVmcy5oYXMobnVtYmVyKGJ5dGVzLCBuZXh0SXRlcmF0b3IpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpdC5vZmZzZXQrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAob3BlcmF0aW9uID09PSBleHBvcnRzLk9QRVJBVElPTi5ERUxFVEUpIDtcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChTY2hlbWEuaXModHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlZklkXzEgPSBudW1iZXIoYnl0ZXMsIGl0KTtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAkcm9vdC5yZWZzLmdldChyZWZJZF8xKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wZXJhdGlvbiAhPT0gZXhwb3J0cy5PUEVSQVRJT04uUkVQTEFDRSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkVHlwZSA9IHRoaXMuZ2V0U2NoZW1hVHlwZShieXRlcywgaXQsIHR5cGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5jcmVhdGVUeXBlSW5zdGFuY2UoY2hpbGRUeXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS4kY2hhbmdlcy5yZWZJZCA9IHJlZklkXzE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuJGNhbGxiYWNrcyA9IHByZXZpb3VzVmFsdWUuJGNhbGxiYWNrcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFsdWUuJGxpc3RlbmVycyA9IHByZXZpb3VzVmFsdWUuJGxpc3RlbmVycztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzVmFsdWVbJyRjaGFuZ2VzJ10ucmVmSWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZklkXzEgIT09IHByZXZpb3VzVmFsdWVbJyRjaGFuZ2VzJ10ucmVmSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290LnJlbW92ZVJlZihwcmV2aW91c1ZhbHVlWyckY2hhbmdlcyddLnJlZklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmFkZFJlZihyZWZJZF8xLCB2YWx1ZSwgKHZhbHVlICE9PSBwcmV2aW91c1ZhbHVlKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mICh0eXBlKSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAvLyBwcmltaXRpdmUgdmFsdWUgKG51bWJlciwgc3RyaW5nLCBib29sZWFuLCBldGMpXG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gZGVjb2RlUHJpbWl0aXZlVHlwZSh0eXBlLCBieXRlcywgaXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGVEZWYgPSBnZXRUeXBlKE9iamVjdC5rZXlzKHR5cGUpWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlZklkXzIgPSBudW1iZXIoYnl0ZXMsIGl0KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlUmVmID0gKCRyb290LnJlZnMuaGFzKHJlZklkXzIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBwcmV2aW91c1ZhbHVlIHx8ICRyb290LnJlZnMuZ2V0KHJlZklkXzIpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG5ldyB0eXBlRGVmLmNvbnN0cnVjdG9yKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWVSZWYuY2xvbmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLiRjaGFuZ2VzLnJlZklkID0gcmVmSWRfMjtcbiAgICAgICAgICAgICAgICAgICAgLy8gcHJlc2VydmUgc2NoZW1hIGNhbGxiYWNrc1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVbJyRjYWxsYmFja3MnXSA9IHByZXZpb3VzVmFsdWVbJyRjYWxsYmFja3MnXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c1ZhbHVlWyckY2hhbmdlcyddLnJlZklkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmSWRfMiAhPT0gcHJldmlvdXNWYWx1ZVsnJGNoYW5nZXMnXS5yZWZJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290LnJlbW92ZVJlZihwcmV2aW91c1ZhbHVlWyckY2hhbmdlcyddLnJlZklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyaWdnZXIgb25SZW1vdmUgaWYgc3RydWN0dXJlIGhhcyBiZWVuIHJlcGxhY2VkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVudHJpZXMgPSBwcmV2aW91c1ZhbHVlLmVudHJpZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlciA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKGl0ZXIgPSBlbnRyaWVzLm5leHQoKSkgJiYgIWl0ZXIuZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2EgPSBpdGVyLnZhbHVlLCBrZXkgPSBfYVswXSwgdmFsdWVfMSA9IF9hWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxDaGFuZ2VzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmSWQ6IHJlZklkXzIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcDogZXhwb3J0cy5PUEVSQVRJT04uREVMRVRFLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1ZhbHVlOiB2YWx1ZV8xLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgJHJvb3QuYWRkUmVmKHJlZklkXzIsIHZhbHVlLCAodmFsdWVSZWYgIT09IHByZXZpb3VzVmFsdWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlWyckY2hhbmdlcyddKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVsnJGNoYW5nZXMnXS5zZXRQYXJlbnQoY2hhbmdlVHJlZS5yZWYsIGNoYW5nZVRyZWUucm9vdCwgZmllbGRJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlZiBpbnN0YW5jZW9mIFNjaGVtYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVmW2ZpZWxkTmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlZltgXyR7ZmllbGROYW1lfWBdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocmVmIGluc3RhbmNlb2YgTWFwU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zdCBrZXkgPSByZWZbJyRpbmRleGVzJ10uZ2V0KGZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBkeW5hbWljSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZWYuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVmWyckaXRlbXMnXS5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWZbJyRjaGFuZ2VzJ10uYWxsQ2hhbmdlcy5hZGQoZmllbGRJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocmVmIGluc3RhbmNlb2YgQXJyYXlTY2hlbWEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0IGtleSA9IHJlZlsnJGluZGV4ZXMnXVtmaWVsZF07XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIlNFVFRJTkcgRk9SIEFycmF5U2NoZW1hID0+XCIsIHsgZmllbGQsIGtleSwgdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZWZba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVmLnNldEF0KGZpZWxkSW5kZXgsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChyZWYgaW5zdGFuY2VvZiBDb2xsZWN0aW9uU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSByZWYuYWRkKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZlsnc2V0SW5kZXgnXShmaWVsZEluZGV4LCBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocmVmIGluc3RhbmNlb2YgU2V0U2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSByZWYuYWRkKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZbJ3NldEluZGV4J10oZmllbGRJbmRleCwgaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c1ZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBhbGxDaGFuZ2VzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVmSWQ6IHJlZklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3A6IG9wZXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkOiBmaWVsZE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBkeW5hbWljSW5kZXg6IGR5bmFtaWNJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWU6IHByZXZpb3VzVmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3RyaWdnZXJDaGFuZ2VzKGFsbENoYW5nZXMpO1xuICAgICAgICAgICAgLy8gZHJvcCByZWZlcmVuY2VzIG9mIHVudXNlZCBzY2hlbWFzXG4gICAgICAgICAgICAkcm9vdC5nYXJiYWdlQ29sbGVjdERlbGV0ZWRSZWZzKCk7XG4gICAgICAgICAgICByZXR1cm4gYWxsQ2hhbmdlcztcbiAgICAgICAgfTtcbiAgICAgICAgU2NoZW1hLnByb3RvdHlwZS5lbmNvZGUgPSBmdW5jdGlvbiAoZW5jb2RlQWxsLCBieXRlcywgdXNlRmlsdGVycykge1xuICAgICAgICAgICAgaWYgKGVuY29kZUFsbCA9PT0gdm9pZCAwKSB7IGVuY29kZUFsbCA9IGZhbHNlOyB9XG4gICAgICAgICAgICBpZiAoYnl0ZXMgPT09IHZvaWQgMCkgeyBieXRlcyA9IFtdOyB9XG4gICAgICAgICAgICBpZiAodXNlRmlsdGVycyA9PT0gdm9pZCAwKSB7IHVzZUZpbHRlcnMgPSBmYWxzZTsgfVxuICAgICAgICAgICAgdmFyIHJvb3RDaGFuZ2VUcmVlID0gdGhpcy4kY2hhbmdlcztcbiAgICAgICAgICAgIHZhciByZWZJZHNWaXNpdGVkID0gbmV3IFdlYWtTZXQoKTtcbiAgICAgICAgICAgIHZhciBjaGFuZ2VUcmVlcyA9IFtyb290Q2hhbmdlVHJlZV07XG4gICAgICAgICAgICB2YXIgbnVtQ2hhbmdlVHJlZXMgPSAxO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1DaGFuZ2VUcmVlczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoYW5nZVRyZWUgPSBjaGFuZ2VUcmVlc1tpXTtcbiAgICAgICAgICAgICAgICB2YXIgcmVmID0gY2hhbmdlVHJlZS5yZWY7XG4gICAgICAgICAgICAgICAgdmFyIGlzU2NoZW1hID0gKHJlZiBpbnN0YW5jZW9mIFNjaGVtYSk7XG4gICAgICAgICAgICAgICAgLy8gR2VuZXJhdGUgdW5pcXVlIHJlZklkIGZvciB0aGUgQ2hhbmdlVHJlZS5cbiAgICAgICAgICAgICAgICBjaGFuZ2VUcmVlLmVuc3VyZVJlZklkKCk7XG4gICAgICAgICAgICAgICAgLy8gbWFyayB0aGlzIENoYW5nZVRyZWUgYXMgdmlzaXRlZC5cbiAgICAgICAgICAgICAgICByZWZJZHNWaXNpdGVkLmFkZChjaGFuZ2VUcmVlKTtcbiAgICAgICAgICAgICAgICAvLyByb290IGByZWZJZGAgaXMgc2tpcHBlZC5cbiAgICAgICAgICAgICAgICBpZiAoY2hhbmdlVHJlZSAhPT0gcm9vdENoYW5nZVRyZWUgJiZcbiAgICAgICAgICAgICAgICAgICAgKGNoYW5nZVRyZWUuY2hhbmdlZCB8fCBlbmNvZGVBbGwpKSB7XG4gICAgICAgICAgICAgICAgICAgIHVpbnQ4JDEoYnl0ZXMsIFNXSVRDSF9UT19TVFJVQ1RVUkUpO1xuICAgICAgICAgICAgICAgICAgICBudW1iZXIkMShieXRlcywgY2hhbmdlVHJlZS5yZWZJZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBjaGFuZ2VzID0gKGVuY29kZUFsbClcbiAgICAgICAgICAgICAgICAgICAgPyBBcnJheS5mcm9tKGNoYW5nZVRyZWUuYWxsQ2hhbmdlcylcbiAgICAgICAgICAgICAgICAgICAgOiBBcnJheS5mcm9tKGNoYW5nZVRyZWUuY2hhbmdlcy52YWx1ZXMoKSk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGNsID0gY2hhbmdlcy5sZW5ndGg7IGogPCBjbDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvcGVyYXRpb24gPSAoZW5jb2RlQWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyB7IG9wOiBleHBvcnRzLk9QRVJBVElPTi5BREQsIGluZGV4OiBjaGFuZ2VzW2pdIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDogY2hhbmdlc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpZWxkSW5kZXggPSBvcGVyYXRpb24uaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmaWVsZCA9IChpc1NjaGVtYSlcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcmVmWydfZGVmaW5pdGlvbiddLmZpZWxkc0J5SW5kZXggJiYgcmVmWydfZGVmaW5pdGlvbiddLmZpZWxkc0J5SW5kZXhbZmllbGRJbmRleF1cbiAgICAgICAgICAgICAgICAgICAgICAgIDogZmllbGRJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FjaGUgYmVnaW4gaW5kZXggaWYgYHVzZUZpbHRlcnNgXG4gICAgICAgICAgICAgICAgICAgIHZhciBiZWdpbkluZGV4ID0gYnl0ZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAvLyBlbmNvZGUgZmllbGQgaW5kZXggKyBvcGVyYXRpb25cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wZXJhdGlvbi5vcCAhPT0gZXhwb3J0cy5PUEVSQVRJT04uVE9VQ0gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1NjaGVtYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcHJlc3MgYGZpZWxkSW5kZXhgICsgYG9wZXJhdGlvbmAgaW50byBhIHNpbmdsZSBieXRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgYWRkcyBhIGxpbWl0YWlvbiBvZiA2NCBmaWVsZHMgcGVyIFNjaGVtYSBzdHJ1Y3R1cmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQ4JDEoYnl0ZXMsIChmaWVsZEluZGV4IHwgb3BlcmF0aW9uLm9wKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50OCQxKGJ5dGVzLCBvcGVyYXRpb24ub3ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGN1c3RvbSBvcGVyYXRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wZXJhdGlvbi5vcCA9PT0gZXhwb3J0cy5PUEVSQVRJT04uQ0xFQVIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluZGV4ZWQgb3BlcmF0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bWJlciQxKGJ5dGVzLCBmaWVsZEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAvLyBlbmNvZGUgXCJhbGlhc1wiIGZvciBkeW5hbWljIGZpZWxkcyAobWFwcylcbiAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1NjaGVtYSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKG9wZXJhdGlvbi5vcCAmIGV4cG9ydHMuT1BFUkFUSU9OLkFERCkgPT0gZXhwb3J0cy5PUEVSQVRJT04uQUREIC8vIEFERCBvciBERUxFVEVfQU5EX0FERFxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWYgaW5zdGFuY2VvZiBNYXBTY2hlbWEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcFNjaGVtYSBkeW5hbWljIGtleVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGR5bmFtaWNJbmRleCA9IGNoYW5nZVRyZWUucmVmWyckaW5kZXhlcyddLmdldChmaWVsZEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmckMShieXRlcywgZHluYW1pY0luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BlcmF0aW9uLm9wID09PSBleHBvcnRzLk9QRVJBVElPTi5ERUxFVEUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBkZWxldGUgZnJvbSBmaWx0ZXIgY2FjaGUgZGF0YS5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiAodXNlRmlsdGVycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGRlbGV0ZSBjaGFuZ2VUcmVlLmNhY2hlc1tmaWVsZEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0IHR5cGUgPSBjaGFuZ2VUcmVlLmNoaWxkVHlwZSB8fCByZWYuX3NjaGVtYVtmaWVsZF07XG4gICAgICAgICAgICAgICAgICAgIHZhciB0eXBlID0gY2hhbmdlVHJlZS5nZXRUeXBlKGZpZWxkSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zdCB0eXBlID0gY2hhbmdlVHJlZS5nZXRUeXBlKGZpZWxkSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBjaGFuZ2VUcmVlLmdldFZhbHVlKGZpZWxkSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBFbnF1ZXVlIENoYW5nZVRyZWUgdG8gYmUgdmlzaXRlZFxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlWyckY2hhbmdlcyddICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhcmVmSWRzVmlzaXRlZC5oYXModmFsdWVbJyRjaGFuZ2VzJ10pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VUcmVlcy5wdXNoKHZhbHVlWyckY2hhbmdlcyddKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlWyckY2hhbmdlcyddLmVuc3VyZVJlZklkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBudW1DaGFuZ2VUcmVlcysrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcGVyYXRpb24ub3AgPT09IGV4cG9ydHMuT1BFUkFUSU9OLlRPVUNIKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoU2NoZW1hLmlzKHR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnRJbnN0YW5jZVR5cGUodmFsdWUsIHR5cGUsIHJlZiwgZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVuY29kZSByZWZJZCBmb3IgdGhpcyBpbnN0YW5jZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBhY3R1YWwgaW5zdGFuY2UgaXMgZ29pbmcgdG8gYmUgZW5jb2RlZCBvbiBuZXh0IGBjaGFuZ2VUcmVlYCBpdGVyYXRpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgbnVtYmVyJDEoYnl0ZXMsIHZhbHVlLiRjaGFuZ2VzLnJlZklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyeSB0byBlbmNvZGUgaW5oZXJpdGVkIFRZUEVfSUQgaWYgaXQncyBhbiBBREQgb3BlcmF0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChvcGVyYXRpb24ub3AgJiBleHBvcnRzLk9QRVJBVElPTi5BREQpID09PSBleHBvcnRzLk9QRVJBVElPTi5BREQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyeUVuY29kZVR5cGVJZChieXRlcywgdHlwZSwgdmFsdWUuY29uc3RydWN0b3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiAodHlwZSkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmltaXRpdmUgdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5jb2RlUHJpbWl0aXZlVHlwZSh0eXBlLCBieXRlcywgdmFsdWUsIHJlZiwgZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEN1c3RvbSB0eXBlIChNYXBTY2hlbWEsIEFycmF5U2NoZW1hLCBldGMpXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlZmluaXRpb24gPSBnZXRUeXBlKE9iamVjdC5rZXlzKHR5cGUpWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlbnN1cmUgYSBBcnJheVNjaGVtYSBoYXMgYmVlbiBwcm92aWRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydEluc3RhbmNlVHlwZShyZWZbXCJfXCIuY29uY2F0KGZpZWxkKV0sIGRlZmluaXRpb24uY29uc3RydWN0b3IsIHJlZiwgZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVuY29kZSByZWZJZCBmb3IgdGhpcyBpbnN0YW5jZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBhY3R1YWwgaW5zdGFuY2UgaXMgZ29pbmcgdG8gYmUgZW5jb2RlZCBvbiBuZXh0IGBjaGFuZ2VUcmVlYCBpdGVyYXRpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgbnVtYmVyJDEoYnl0ZXMsIHZhbHVlLiRjaGFuZ2VzLnJlZklkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodXNlRmlsdGVycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FjaGUgYmVnaW4gLyBlbmQgaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVRyZWUuY2FjaGUoZmllbGRJbmRleCwgYnl0ZXMuc2xpY2UoYmVnaW5JbmRleCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZW5jb2RlQWxsICYmICF1c2VGaWx0ZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZVRyZWUuZGlzY2FyZCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBieXRlcztcbiAgICAgICAgfTtcbiAgICAgICAgU2NoZW1hLnByb3RvdHlwZS5lbmNvZGVBbGwgPSBmdW5jdGlvbiAodXNlRmlsdGVycykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKHRydWUsIFtdLCB1c2VGaWx0ZXJzKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2NoZW1hLnByb3RvdHlwZS5hcHBseUZpbHRlcnMgPSBmdW5jdGlvbiAoY2xpZW50LCBlbmNvZGVBbGwpIHtcbiAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICBpZiAoZW5jb2RlQWxsID09PSB2b2lkIDApIHsgZW5jb2RlQWxsID0gZmFsc2U7IH1cbiAgICAgICAgICAgIHZhciByb290ID0gdGhpcztcbiAgICAgICAgICAgIHZhciByZWZJZHNEaXNzYWxsb3dlZCA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgIHZhciAkZmlsdGVyU3RhdGUgPSBDbGllbnRTdGF0ZS5nZXQoY2xpZW50KTtcbiAgICAgICAgICAgIHZhciBjaGFuZ2VUcmVlcyA9IFt0aGlzLiRjaGFuZ2VzXTtcbiAgICAgICAgICAgIHZhciBudW1DaGFuZ2VUcmVlcyA9IDE7XG4gICAgICAgICAgICB2YXIgZmlsdGVyZWRCeXRlcyA9IFtdO1xuICAgICAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgICAgIHZhciBjaGFuZ2VUcmVlID0gY2hhbmdlVHJlZXNbaV07XG4gICAgICAgICAgICAgICAgaWYgKHJlZklkc0Rpc3NhbGxvd2VkLmhhcyhjaGFuZ2VUcmVlLnJlZklkKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJjb250aW51ZVwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcmVmID0gY2hhbmdlVHJlZS5yZWY7XG4gICAgICAgICAgICAgICAgdmFyIGlzU2NoZW1hID0gcmVmIGluc3RhbmNlb2YgU2NoZW1hO1xuICAgICAgICAgICAgICAgIHVpbnQ4JDEoZmlsdGVyZWRCeXRlcywgU1dJVENIX1RPX1NUUlVDVFVSRSk7XG4gICAgICAgICAgICAgICAgbnVtYmVyJDEoZmlsdGVyZWRCeXRlcywgY2hhbmdlVHJlZS5yZWZJZCk7XG4gICAgICAgICAgICAgICAgdmFyIGNsaWVudEhhc1JlZklkID0gJGZpbHRlclN0YXRlLnJlZklkcy5oYXMoY2hhbmdlVHJlZSk7XG4gICAgICAgICAgICAgICAgdmFyIGlzRW5jb2RlQWxsID0gKGVuY29kZUFsbCB8fCAhY2xpZW50SGFzUmVmSWQpO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiUkVGOlwiLCByZWYuY29uc3RydWN0b3IubmFtZSk7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJFbmNvZGUgYWxsP1wiLCBpc0VuY29kZUFsbCk7XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyBpbmNsdWRlIGBjaGFuZ2VUcmVlYCBvbiBsaXN0IG9mIGtub3duIHJlZklkcyBieSB0aGlzIGNsaWVudC5cbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICRmaWx0ZXJTdGF0ZS5hZGRSZWZJZChjaGFuZ2VUcmVlKTtcbiAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVySW5kZXhlcyA9ICRmaWx0ZXJTdGF0ZS5jb250YWluZXJJbmRleGVzLmdldChjaGFuZ2VUcmVlKTtcbiAgICAgICAgICAgICAgICB2YXIgY2hhbmdlcyA9IChpc0VuY29kZUFsbClcbiAgICAgICAgICAgICAgICAgICAgPyBBcnJheS5mcm9tKGNoYW5nZVRyZWUuYWxsQ2hhbmdlcylcbiAgICAgICAgICAgICAgICAgICAgOiBBcnJheS5mcm9tKGNoYW5nZVRyZWUuY2hhbmdlcy52YWx1ZXMoKSk7XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyBXT1JLQVJPVU5EOiB0cmllcyB0byByZS1ldmFsdWF0ZSBwcmV2aW91c2x5IG5vdCBpbmNsdWRlZCBAZmlsdGVyKCkgYXR0cmlidXRlc1xuICAgICAgICAgICAgICAgIC8vIC0gc2VlIFwiREVMRVRFIGEgZmllbGQgb2YgU2NoZW1hXCIgdGVzdCBjYXNlLlxuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgaWYgKCFlbmNvZGVBbGwgJiZcbiAgICAgICAgICAgICAgICAgICAgaXNTY2hlbWEgJiZcbiAgICAgICAgICAgICAgICAgICAgcmVmLl9kZWZpbml0aW9uLmluZGV4ZXNXaXRoRmlsdGVycykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXhlc1dpdGhGaWx0ZXJzID0gcmVmLl9kZWZpbml0aW9uLmluZGV4ZXNXaXRoRmlsdGVycztcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhlc1dpdGhGaWx0ZXJzLmZvckVhY2goZnVuY3Rpb24gKGluZGV4V2l0aEZpbHRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb250YWluZXJJbmRleGVzLmhhcyhpbmRleFdpdGhGaWx0ZXIpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlVHJlZS5hbGxDaGFuZ2VzLmhhcyhpbmRleFdpdGhGaWx0ZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRW5jb2RlQWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXMucHVzaChpbmRleFdpdGhGaWx0ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlcy5wdXNoKHsgb3A6IGV4cG9ydHMuT1BFUkFUSU9OLkFERCwgaW5kZXg6IGluZGV4V2l0aEZpbHRlciwgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGNsID0gY2hhbmdlcy5sZW5ndGg7IGogPCBjbDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGFuZ2UgPSAoaXNFbmNvZGVBbGwpXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHsgb3A6IGV4cG9ydHMuT1BFUkFUSU9OLkFERCwgaW5kZXg6IGNoYW5nZXNbal0gfVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBjaGFuZ2VzW2pdO1xuICAgICAgICAgICAgICAgICAgICAvLyBjdXN0b20gb3BlcmF0aW9uc1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hhbmdlLm9wID09PSBleHBvcnRzLk9QRVJBVElPTi5DTEVBUikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdWludDgkMShmaWx0ZXJlZEJ5dGVzLCBjaGFuZ2Uub3ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpZWxkSW5kZXggPSBjaGFuZ2UuaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgIC8vIERlbGV0aW5nIGZpZWxkczogZW5jb2RlIHRoZSBvcGVyYXRpb24gKyBmaWVsZCBpbmRleFxuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hhbmdlLm9wID09PSBleHBvcnRzLk9QRVJBVElPTi5ERUxFVEUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBERUxFVEUgb3BlcmF0aW9ucyBhbHNvIG5lZWQgdG8gZ28gdGhyb3VnaCBmaWx0ZXJpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogY2FjaGUgdGhlIHByZXZpb3VzIHZhbHVlIHNvIHdlIGNhbiBhY2Nlc3MgdGhlIHZhbHVlIChwcmltaXRpdmUgb3IgYHJlZklkYClcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIChjaGVjayBhZ2FpbnN0IGAkZmlsdGVyU3RhdGUucmVmSWRzYClcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNTY2hlbWEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50OCQxKGZpbHRlcmVkQnl0ZXMsIGNoYW5nZS5vcCB8IGZpZWxkSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDgkMShmaWx0ZXJlZEJ5dGVzLCBjaGFuZ2Uub3ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bWJlciQxKGZpbHRlcmVkQnl0ZXMsIGZpZWxkSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gaW5kZXhlZCBvcGVyYXRpb25cbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gY2hhbmdlVHJlZS5nZXRWYWx1ZShmaWVsZEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBjaGFuZ2VUcmVlLmdldFR5cGUoZmllbGRJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1NjaGVtYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSXMgYSBTY2hlbWEhXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlsdGVyID0gKHJlZi5fZGVmaW5pdGlvbi5maWx0ZXJzICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmLl9kZWZpbml0aW9uLmZpbHRlcnNbZmllbGRJbmRleF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlciAmJiAhZmlsdGVyLmNhbGwocmVmLCBjbGllbnQsIHZhbHVlLCByb290KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAmJiB2YWx1ZVsnJGNoYW5nZXMnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZJZHNEaXNzYWxsb3dlZC5hZGQodmFsdWVbJyRjaGFuZ2VzJ10ucmVmSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElzIGEgY29sbGVjdGlvbiEgKG1hcCwgYXJyYXksIGV0Yy4pXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gY2hhbmdlVHJlZS5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlsdGVyID0gY2hhbmdlVHJlZS5nZXRDaGlsZHJlbkZpbHRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlciAmJiAhZmlsdGVyLmNhbGwocGFyZW50LCBjbGllbnQsIHJlZlsnJGluZGV4ZXMnXS5nZXQoZmllbGRJbmRleCksIHZhbHVlLCByb290KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAmJiB2YWx1ZVsnJGNoYW5nZXMnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZJZHNEaXNzYWxsb3dlZC5hZGQodmFsdWVbJyRjaGFuZ2VzJ10ucmVmSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyB2aXNpdCBjaGlsZCBDaGFuZ2VUcmVlIG9uIGZ1cnRoZXIgaXRlcmF0aW9uLlxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVbJyRjaGFuZ2VzJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVRyZWVzLnB1c2godmFsdWVbJyRjaGFuZ2VzJ10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbnVtQ2hhbmdlVHJlZXMrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAvLyBDb3B5IGNhY2hlZCBieXRlc1xuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hhbmdlLm9wICE9PSBleHBvcnRzLk9QRVJBVElPTi5UT1VDSCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IHJlZmFjdG9yIG1lIVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFuZ2Uub3AgPT09IGV4cG9ydHMuT1BFUkFUSU9OLkFERCB8fCBpc1NjaGVtYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlIGNhY2hlZCBieXRlcyBkaXJlY3RseSBpZiBpcyBmcm9tIFNjaGVtYSB0eXBlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWRCeXRlcy5wdXNoLmFwcGx5KGZpbHRlcmVkQnl0ZXMsIChfYSA9IGNoYW5nZVRyZWUuY2FjaGVzW2ZpZWxkSW5kZXhdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVySW5kZXhlcy5hZGQoZmllbGRJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGFpbmVySW5kZXhlcy5oYXMoZmllbGRJbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlIGNhY2hlZCBieXRlcyBpZiBhbHJlYWR5IGhhcyB0aGUgZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWRCeXRlcy5wdXNoLmFwcGx5KGZpbHRlcmVkQnl0ZXMsIChfYiA9IGNoYW5nZVRyZWUuY2FjaGVzW2ZpZWxkSW5kZXhdKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3JjZSBBREQgb3BlcmF0aW9uIGlmIGZpZWxkIGlzIG5vdCBrbm93biBieSB0aGlzIGNsaWVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVySW5kZXhlcy5hZGQoZmllbGRJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQ4JDEoZmlsdGVyZWRCeXRlcywgZXhwb3J0cy5PUEVSQVRJT04uQUREKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtYmVyJDEoZmlsdGVyZWRCeXRlcywgZmllbGRJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWYgaW5zdGFuY2VvZiBNYXBTY2hlbWEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXBTY2hlbWEgZHluYW1pYyBrZXlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHluYW1pY0luZGV4ID0gY2hhbmdlVHJlZS5yZWZbJyRpbmRleGVzJ10uZ2V0KGZpZWxkSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nJDEoZmlsdGVyZWRCeXRlcywgZHluYW1pY0luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVbJyRjaGFuZ2VzJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bWJlciQxKGZpbHRlcmVkQnl0ZXMsIHZhbHVlWyckY2hhbmdlcyddLnJlZklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFwiZW5jb2RlUHJpbWl0aXZlVHlwZVwiIHdpdGhvdXQgdHlwZSBjaGVja2luZy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSB0eXBlIGNoZWNraW5nIGhhcyBiZWVuIGRvbmUgb24gdGhlIGZpcnN0IC5lbmNvZGUoKSBjYWxsLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5jb2RlW3R5cGVdKGZpbHRlcmVkQnl0ZXMsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZVsnJGNoYW5nZXMnXSAmJiAhaXNTY2hlbWEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gLSB0cmFjayBBREQvUkVQTEFDRS9ERUxFVEUgaW5zdGFuY2VzIG9uIGAkZmlsdGVyU3RhdGVgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAtIGRvIE5PVCBhbHdheXMgZW5jb2RlIGR5bmFtaWNJbmRleCBmb3IgTWFwU2NoZW1hLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAoSWYgY2xpZW50IGFscmVhZHkgaGFzIHRoYXQga2V5LCBvbmx5IHRoZSBmaXJzdCBpbmRleCBpcyBuZWNlc3NhcnkuKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQ4JDEoZmlsdGVyZWRCeXRlcywgZXhwb3J0cy5PUEVSQVRJT04uQUREKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bWJlciQxKGZpbHRlcmVkQnl0ZXMsIGZpZWxkSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlZiBpbnN0YW5jZW9mIE1hcFNjaGVtYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFwU2NoZW1hIGR5bmFtaWMga2V5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHluYW1pY0luZGV4ID0gY2hhbmdlVHJlZS5yZWZbJyRpbmRleGVzJ10uZ2V0KGZpZWxkSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyQxKGZpbHRlcmVkQnl0ZXMsIGR5bmFtaWNJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBudW1iZXIkMShmaWx0ZXJlZEJ5dGVzLCB2YWx1ZVsnJGNoYW5nZXMnXS5yZWZJZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1DaGFuZ2VUcmVlczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgX2xvb3BfMShpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmaWx0ZXJlZEJ5dGVzO1xuICAgICAgICB9O1xuICAgICAgICBTY2hlbWEucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgdmFyIGNsb25lZCA9IG5ldyAodGhpcy5jb25zdHJ1Y3Rvcik7XG4gICAgICAgICAgICB2YXIgc2NoZW1hID0gdGhpcy5fZGVmaW5pdGlvbi5zY2hlbWE7XG4gICAgICAgICAgICBmb3IgKHZhciBmaWVsZCBpbiBzY2hlbWEpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mICh0aGlzW2ZpZWxkXSkgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mICgoX2EgPSB0aGlzW2ZpZWxkXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNsb25lKSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRlZXAgY2xvbmVcbiAgICAgICAgICAgICAgICAgICAgY2xvbmVkW2ZpZWxkXSA9IHRoaXNbZmllbGRdLmNsb25lKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBwcmltaXRpdmUgdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgIGNsb25lZFtmaWVsZF0gPSB0aGlzW2ZpZWxkXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2xvbmVkO1xuICAgICAgICB9O1xuICAgICAgICBTY2hlbWEucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzY2hlbWEgPSB0aGlzLl9kZWZpbml0aW9uLnNjaGVtYTtcbiAgICAgICAgICAgIHZhciBkZXByZWNhdGVkID0gdGhpcy5fZGVmaW5pdGlvbi5kZXByZWNhdGVkO1xuICAgICAgICAgICAgdmFyIG9iaiA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgZmllbGQgaW4gc2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkZXByZWNhdGVkW2ZpZWxkXSAmJiB0aGlzW2ZpZWxkXSAhPT0gbnVsbCAmJiB0eXBlb2YgKHRoaXNbZmllbGRdKSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICBvYmpbZmllbGRdID0gKHR5cGVvZiAodGhpc1tmaWVsZF1bJ3RvSlNPTiddKSA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzW2ZpZWxkXVsndG9KU09OJ10oKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzW1wiX1wiLmNvbmNhdChmaWVsZCldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH07XG4gICAgICAgIFNjaGVtYS5wcm90b3R5cGUuZGlzY2FyZEFsbENoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLiRjaGFuZ2VzLmRpc2NhcmRBbGwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2NoZW1hLnByb3RvdHlwZS5nZXRCeUluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpc1t0aGlzLl9kZWZpbml0aW9uLmZpZWxkc0J5SW5kZXhbaW5kZXhdXTtcbiAgICAgICAgfTtcbiAgICAgICAgU2NoZW1hLnByb3RvdHlwZS5kZWxldGVCeUluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICB0aGlzW3RoaXMuX2RlZmluaXRpb24uZmllbGRzQnlJbmRleFtpbmRleF1dID0gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICBTY2hlbWEucHJvdG90eXBlLnRyeUVuY29kZVR5cGVJZCA9IGZ1bmN0aW9uIChieXRlcywgdHlwZSwgdGFyZ2V0VHlwZSkge1xuICAgICAgICAgICAgaWYgKHR5cGUuX3R5cGVpZCAhPT0gdGFyZ2V0VHlwZS5fdHlwZWlkKSB7XG4gICAgICAgICAgICAgICAgdWludDgkMShieXRlcywgVFlQRV9JRCk7XG4gICAgICAgICAgICAgICAgbnVtYmVyJDEoYnl0ZXMsIHRhcmdldFR5cGUuX3R5cGVpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNjaGVtYS5wcm90b3R5cGUuZ2V0U2NoZW1hVHlwZSA9IGZ1bmN0aW9uIChieXRlcywgaXQsIGRlZmF1bHRUeXBlKSB7XG4gICAgICAgICAgICB2YXIgdHlwZTtcbiAgICAgICAgICAgIGlmIChieXRlc1tpdC5vZmZzZXRdID09PSBUWVBFX0lEKSB7XG4gICAgICAgICAgICAgICAgaXQub2Zmc2V0Kys7XG4gICAgICAgICAgICAgICAgdHlwZSA9IHRoaXMuY29uc3RydWN0b3IuX2NvbnRleHQuZ2V0KG51bWJlcihieXRlcywgaXQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0eXBlIHx8IGRlZmF1bHRUeXBlO1xuICAgICAgICB9O1xuICAgICAgICBTY2hlbWEucHJvdG90eXBlLmNyZWF0ZVR5cGVJbnN0YW5jZSA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBuZXcgdHlwZSgpO1xuICAgICAgICAgICAgLy8gYXNzaWduIHJvb3Qgb24gJGNoYW5nZXNcbiAgICAgICAgICAgIGluc3RhbmNlLiRjaGFuZ2VzLnJvb3QgPSB0aGlzLiRjaGFuZ2VzLnJvb3Q7XG4gICAgICAgICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgICAgIH07XG4gICAgICAgIFNjaGVtYS5wcm90b3R5cGUuX3RyaWdnZXJDaGFuZ2VzID0gZnVuY3Rpb24gKGNoYW5nZXMpIHtcbiAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9qO1xuICAgICAgICAgICAgdmFyIHVuaXF1ZVJlZklkcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgIHZhciAkcmVmcyA9IHRoaXMuJGNoYW5nZXMucm9vdC5yZWZzO1xuICAgICAgICAgICAgdmFyIF9sb29wXzIgPSBmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgICAgIHZhciBjaGFuZ2UgPSBjaGFuZ2VzW2ldO1xuICAgICAgICAgICAgICAgIHZhciByZWZJZCA9IGNoYW5nZS5yZWZJZDtcbiAgICAgICAgICAgICAgICB2YXIgcmVmID0gJHJlZnMuZ2V0KHJlZklkKTtcbiAgICAgICAgICAgICAgICB2YXIgJGNhbGxiYWNrcyA9IHJlZlsnJGNhbGxiYWNrcyddO1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gdHJpZ2dlciBvblJlbW92ZSBvbiBjaGlsZCBzdHJ1Y3R1cmUuXG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICBpZiAoKGNoYW5nZS5vcCAmIGV4cG9ydHMuT1BFUkFUSU9OLkRFTEVURSkgPT09IGV4cG9ydHMuT1BFUkFUSU9OLkRFTEVURSAmJlxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2UucHJldmlvdXNWYWx1ZSBpbnN0YW5jZW9mIFNjaGVtYSkge1xuICAgICAgICAgICAgICAgICAgICAoX2IgPSAoX2EgPSBjaGFuZ2UucHJldmlvdXNWYWx1ZVsnJGNhbGxiYWNrcyddKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbZXhwb3J0cy5PUEVSQVRJT04uREVMRVRFXSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7IHJldHVybiBjYWxsYmFjaygpOyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gbm8gY2FsbGJhY2tzIGRlZmluZWQsIHNraXAgdGhpcyBzdHJ1Y3R1cmUhXG4gICAgICAgICAgICAgICAgaWYgKCEkY2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZWYgaW5zdGFuY2VvZiBTY2hlbWEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF1bmlxdWVSZWZJZHMuaGFzKHJlZklkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlnZ2VyIG9uQ2hhbmdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKF9jID0gJGNhbGxiYWNrcyA9PT0gbnVsbCB8fCAkY2FsbGJhY2tzID09PSB2b2lkIDAgPyB2b2lkIDAgOiAkY2FsbGJhY2tzW2V4cG9ydHMuT1BFUkFUSU9OLlJFUExBQ0VdKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNjaGVtYS5vbkVycm9yKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJGNhbGxiYWNrcy5oYXNPd25Qcm9wZXJ0eShjaGFuZ2UuZmllbGQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKF9kID0gJGNhbGxiYWNrc1tjaGFuZ2UuZmllbGRdKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGNoYW5nZS52YWx1ZSwgY2hhbmdlLnByZXZpb3VzVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBTY2hlbWEub25FcnJvcihlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaXMgYSBjb2xsZWN0aW9uIG9mIGl0ZW1zXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGFuZ2Uub3AgPT09IGV4cG9ydHMuT1BFUkFUSU9OLkFERCAmJiBjaGFuZ2UucHJldmlvdXNWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlnZXIgb25BZGRcbiAgICAgICAgICAgICAgICAgICAgICAgIChfZSA9ICRjYWxsYmFja3NbZXhwb3J0cy5PUEVSQVRJT04uQUREXSkgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7IHZhciBfYTsgcmV0dXJuIGNhbGxiYWNrKGNoYW5nZS52YWx1ZSwgKF9hID0gY2hhbmdlLmR5bmFtaWNJbmRleCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogY2hhbmdlLmZpZWxkKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY2hhbmdlLm9wID09PSBleHBvcnRzLk9QRVJBVElPTi5ERUxFVEUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGSVhNRTogYHByZXZpb3VzVmFsdWVgIHNob3VsZCBhbHdheXMgYmUgYXZhaWxhYmxlLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQUREICsgREVMRVRFIG9wZXJhdGlvbnMgYXJlIHN0aWxsIGVuY29kaW5nIERFTEVURSBvcGVyYXRpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5nZS5wcmV2aW91c1ZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlnZXIgb25SZW1vdmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoX2YgPSAkY2FsbGJhY2tzW2V4cG9ydHMuT1BFUkFUSU9OLkRFTEVURV0pID09PSBudWxsIHx8IF9mID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZi5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykgeyB2YXIgX2E7IHJldHVybiBjYWxsYmFjayhjaGFuZ2UucHJldmlvdXNWYWx1ZSwgKF9hID0gY2hhbmdlLmR5bmFtaWNJbmRleCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogY2hhbmdlLmZpZWxkKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY2hhbmdlLm9wID09PSBleHBvcnRzLk9QRVJBVElPTi5ERUxFVEVfQU5EX0FERCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpZ2VyIG9uUmVtb3ZlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhbmdlLnByZXZpb3VzVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfZyA9ICRjYWxsYmFja3NbZXhwb3J0cy5PUEVSQVRJT04uREVMRVRFXSkgPT09IG51bGwgfHwgX2cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9nLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7IHZhciBfYTsgcmV0dXJuIGNhbGxiYWNrKGNoYW5nZS5wcmV2aW91c1ZhbHVlLCAoX2EgPSBjaGFuZ2UuZHluYW1pY0luZGV4KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBjaGFuZ2UuZmllbGQpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaWdlciBvbkFkZFxuICAgICAgICAgICAgICAgICAgICAgICAgKF9oID0gJGNhbGxiYWNrc1tleHBvcnRzLk9QRVJBVElPTi5BRERdKSA9PT0gbnVsbCB8fCBfaCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2guZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHsgdmFyIF9hOyByZXR1cm4gY2FsbGJhY2soY2hhbmdlLnZhbHVlLCAoX2EgPSBjaGFuZ2UuZHluYW1pY0luZGV4KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBjaGFuZ2UuZmllbGQpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyB0cmlnZ2VyIG9uQ2hhbmdlXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGFuZ2UudmFsdWUgIT09IGNoYW5nZS5wcmV2aW91c1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAoX2ogPSAkY2FsbGJhY2tzW2V4cG9ydHMuT1BFUkFUSU9OLlJFUExBQ0VdKSA9PT0gbnVsbCB8fCBfaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2ouZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHsgdmFyIF9hOyByZXR1cm4gY2FsbGJhY2soY2hhbmdlLnZhbHVlLCAoX2EgPSBjaGFuZ2UuZHluYW1pY0luZGV4KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBjaGFuZ2UuZmllbGQpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1bmlxdWVSZWZJZHMuYWRkKHJlZklkKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBfbG9vcF8yKGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTY2hlbWEuX2RlZmluaXRpb24gPSBTY2hlbWFEZWZpbml0aW9uLmNyZWF0ZSgpO1xuICAgICAgICByZXR1cm4gU2NoZW1hO1xuICAgIH0oKSk7XG5cbiAgICBmdW5jdGlvbiBkdW1wQ2hhbmdlcyhzY2hlbWEpIHtcbiAgICAgICAgdmFyIGNoYW5nZVRyZWVzID0gW3NjaGVtYVsnJGNoYW5nZXMnXV07XG4gICAgICAgIHZhciBudW1DaGFuZ2VUcmVlcyA9IDE7XG4gICAgICAgIHZhciBkdW1wID0ge307XG4gICAgICAgIHZhciBjdXJyZW50U3RydWN0dXJlID0gZHVtcDtcbiAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgdmFyIGNoYW5nZVRyZWUgPSBjaGFuZ2VUcmVlc1tpXTtcbiAgICAgICAgICAgIGNoYW5nZVRyZWUuY2hhbmdlcy5mb3JFYWNoKGZ1bmN0aW9uIChjaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVmID0gY2hhbmdlVHJlZS5yZWY7XG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkSW5kZXggPSBjaGFuZ2UuaW5kZXg7XG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkID0gKHJlZlsnX2RlZmluaXRpb24nXSlcbiAgICAgICAgICAgICAgICAgICAgPyByZWZbJ19kZWZpbml0aW9uJ10uZmllbGRzQnlJbmRleFtmaWVsZEluZGV4XVxuICAgICAgICAgICAgICAgICAgICA6IHJlZlsnJGluZGV4ZXMnXS5nZXQoZmllbGRJbmRleCk7XG4gICAgICAgICAgICAgICAgY3VycmVudFN0cnVjdHVyZVtmaWVsZF0gPSBjaGFuZ2VUcmVlLmdldFZhbHVlKGZpZWxkSW5kZXgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQ2hhbmdlVHJlZXM7IGkrKykge1xuICAgICAgICAgICAgX2xvb3BfMShpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZHVtcDtcbiAgICB9XG5cbiAgICB2YXIgcmVmbGVjdGlvbkNvbnRleHQgPSB7IGNvbnRleHQ6IG5ldyBDb250ZXh0KCkgfTtcbiAgICAvKipcbiAgICAgKiBSZWZsZWN0aW9uXG4gICAgICovXG4gICAgdmFyIFJlZmxlY3Rpb25GaWVsZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFJlZmxlY3Rpb25GaWVsZCwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gUmVmbGVjdGlvbkZpZWxkKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgdHlwZShcInN0cmluZ1wiLCByZWZsZWN0aW9uQ29udGV4dClcbiAgICAgICAgXSwgUmVmbGVjdGlvbkZpZWxkLnByb3RvdHlwZSwgXCJuYW1lXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgdHlwZShcInN0cmluZ1wiLCByZWZsZWN0aW9uQ29udGV4dClcbiAgICAgICAgXSwgUmVmbGVjdGlvbkZpZWxkLnByb3RvdHlwZSwgXCJ0eXBlXCIsIHZvaWQgMCk7XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgdHlwZShcIm51bWJlclwiLCByZWZsZWN0aW9uQ29udGV4dClcbiAgICAgICAgXSwgUmVmbGVjdGlvbkZpZWxkLnByb3RvdHlwZSwgXCJyZWZlcmVuY2VkVHlwZVwiLCB2b2lkIDApO1xuICAgICAgICByZXR1cm4gUmVmbGVjdGlvbkZpZWxkO1xuICAgIH0oU2NoZW1hKSk7XG4gICAgdmFyIFJlZmxlY3Rpb25UeXBlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoUmVmbGVjdGlvblR5cGUsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFJlZmxlY3Rpb25UeXBlKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5maWVsZHMgPSBuZXcgQXJyYXlTY2hlbWEoKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIHR5cGUoXCJudW1iZXJcIiwgcmVmbGVjdGlvbkNvbnRleHQpXG4gICAgICAgIF0sIFJlZmxlY3Rpb25UeXBlLnByb3RvdHlwZSwgXCJpZFwiLCB2b2lkIDApO1xuICAgICAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgIHR5cGUoW1JlZmxlY3Rpb25GaWVsZF0sIHJlZmxlY3Rpb25Db250ZXh0KVxuICAgICAgICBdLCBSZWZsZWN0aW9uVHlwZS5wcm90b3R5cGUsIFwiZmllbGRzXCIsIHZvaWQgMCk7XG4gICAgICAgIHJldHVybiBSZWZsZWN0aW9uVHlwZTtcbiAgICB9KFNjaGVtYSkpO1xuICAgIHZhciBSZWZsZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoUmVmbGVjdGlvbiwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gUmVmbGVjdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMudHlwZXMgPSBuZXcgQXJyYXlTY2hlbWEoKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBSZWZsZWN0aW9uLmVuY29kZSA9IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgdmFyIHJvb3RTY2hlbWFUeXBlID0gaW5zdGFuY2UuY29uc3RydWN0b3I7XG4gICAgICAgICAgICB2YXIgcmVmbGVjdGlvbiA9IG5ldyBSZWZsZWN0aW9uKCk7XG4gICAgICAgICAgICByZWZsZWN0aW9uLnJvb3RUeXBlID0gcm9vdFNjaGVtYVR5cGUuX3R5cGVpZDtcbiAgICAgICAgICAgIHZhciBidWlsZFR5cGUgPSBmdW5jdGlvbiAoY3VycmVudFR5cGUsIHNjaGVtYSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGZpZWxkTmFtZSBpbiBzY2hlbWEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpZWxkID0gbmV3IFJlZmxlY3Rpb25GaWVsZCgpO1xuICAgICAgICAgICAgICAgICAgICBmaWVsZC5uYW1lID0gZmllbGROYW1lO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZmllbGRUeXBlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChzY2hlbWFbZmllbGROYW1lXSkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkVHlwZSA9IHNjaGVtYVtmaWVsZE5hbWVdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGVfMSA9IHNjaGVtYVtmaWVsZE5hbWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkVHlwZVNjaGVtYSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiByZWZhY3RvciBiZWxvdy5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoU2NoZW1hLmlzKHR5cGVfMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZFR5cGUgPSBcInJlZlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkVHlwZVNjaGVtYSA9IHNjaGVtYVtmaWVsZE5hbWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRUeXBlID0gT2JqZWN0LmtleXModHlwZV8xKVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mICh0eXBlXzFbZmllbGRUeXBlXSkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRUeXBlICs9IFwiOlwiICsgdHlwZV8xW2ZpZWxkVHlwZV07IC8vIGFycmF5OnN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRUeXBlU2NoZW1hID0gdHlwZV8xW2ZpZWxkVHlwZV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQucmVmZXJlbmNlZFR5cGUgPSAoY2hpbGRUeXBlU2NoZW1hKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gY2hpbGRUeXBlU2NoZW1hLl90eXBlaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IC0xO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLnR5cGUgPSBmaWVsZFR5cGU7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUeXBlLmZpZWxkcy5wdXNoKGZpZWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVmbGVjdGlvbi50eXBlcy5wdXNoKGN1cnJlbnRUeXBlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgdHlwZXMgPSAoX2EgPSByb290U2NoZW1hVHlwZS5fY29udGV4dCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnR5cGVzO1xuICAgICAgICAgICAgZm9yICh2YXIgdHlwZWlkIGluIHR5cGVzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHR5cGVfMiA9IG5ldyBSZWZsZWN0aW9uVHlwZSgpO1xuICAgICAgICAgICAgICAgIHR5cGVfMi5pZCA9IE51bWJlcih0eXBlaWQpO1xuICAgICAgICAgICAgICAgIGJ1aWxkVHlwZSh0eXBlXzIsIHR5cGVzW3R5cGVpZF0uX2RlZmluaXRpb24uc2NoZW1hKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZWZsZWN0aW9uLmVuY29kZUFsbCgpO1xuICAgICAgICB9O1xuICAgICAgICBSZWZsZWN0aW9uLmRlY29kZSA9IGZ1bmN0aW9uIChieXRlcywgaXQpIHtcbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gbmV3IENvbnRleHQoKTtcbiAgICAgICAgICAgIHZhciByZWZsZWN0aW9uID0gbmV3IFJlZmxlY3Rpb24oKTtcbiAgICAgICAgICAgIHJlZmxlY3Rpb24uZGVjb2RlKGJ5dGVzLCBpdCk7XG4gICAgICAgICAgICB2YXIgc2NoZW1hVHlwZXMgPSByZWZsZWN0aW9uLnR5cGVzLnJlZHVjZShmdW5jdGlvbiAodHlwZXMsIHJlZmxlY3Rpb25UeXBlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNjaGVtYSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgX19leHRlbmRzKF8sIF9zdXBlcik7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIF8oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF87XG4gICAgICAgICAgICAgICAgfShTY2hlbWEpKTtcbiAgICAgICAgICAgICAgICB2YXIgdHlwZWlkID0gcmVmbGVjdGlvblR5cGUuaWQ7XG4gICAgICAgICAgICAgICAgdHlwZXNbdHlwZWlkXSA9IHNjaGVtYTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmFkZChzY2hlbWEsIHR5cGVpZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVzO1xuICAgICAgICAgICAgfSwge30pO1xuICAgICAgICAgICAgcmVmbGVjdGlvbi50eXBlcy5mb3JFYWNoKGZ1bmN0aW9uIChyZWZsZWN0aW9uVHlwZSkge1xuICAgICAgICAgICAgICAgIHZhciBzY2hlbWFUeXBlID0gc2NoZW1hVHlwZXNbcmVmbGVjdGlvblR5cGUuaWRdO1xuICAgICAgICAgICAgICAgIHJlZmxlY3Rpb25UeXBlLmZpZWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZC5yZWZlcmVuY2VkVHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmllbGRUeXBlID0gZmllbGQudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWZUeXBlID0gc2NoZW1hVHlwZXNbZmllbGQucmVmZXJlbmNlZFR5cGVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWFwIG9yIGFycmF5IG9mIHByaW1pdGl2ZSB0eXBlICgtMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVmVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0eXBlSW5mbyA9IGZpZWxkLnR5cGUuc3BsaXQoXCI6XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkVHlwZSA9IHR5cGVJbmZvWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZlR5cGUgPSB0eXBlSW5mb1sxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZFR5cGUgPT09IFwicmVmXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlKHJlZlR5cGUsIHsgY29udGV4dDogY29udGV4dCB9KShzY2hlbWFUeXBlLnByb3RvdHlwZSwgZmllbGQubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlKChfYSA9IHt9LCBfYVtmaWVsZFR5cGVdID0gcmVmVHlwZSwgX2EpLCB7IGNvbnRleHQ6IGNvbnRleHQgfSkoc2NoZW1hVHlwZS5wcm90b3R5cGUsIGZpZWxkLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZShmaWVsZC50eXBlLCB7IGNvbnRleHQ6IGNvbnRleHQgfSkoc2NoZW1hVHlwZS5wcm90b3R5cGUsIGZpZWxkLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciByb290VHlwZSA9IHNjaGVtYVR5cGVzW3JlZmxlY3Rpb24ucm9vdFR5cGVdO1xuICAgICAgICAgICAgdmFyIHJvb3RJbnN0YW5jZSA9IG5ldyByb290VHlwZSgpO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBhdXRvLWluaXRpYWxpemUgcmVmZXJlbmNlZCB0eXBlcyBvbiByb290IHR5cGVcbiAgICAgICAgICAgICAqIHRvIGFsbG93IHJlZ2lzdGVyaW5nIGxpc3RlbmVycyBpbW1lZGlhdGVsbHkgb24gY2xpZW50LXNpZGVcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZm9yICh2YXIgZmllbGROYW1lIGluIHJvb3RUeXBlLl9kZWZpbml0aW9uLnNjaGVtYSkge1xuICAgICAgICAgICAgICAgIHZhciBmaWVsZFR5cGUgPSByb290VHlwZS5fZGVmaW5pdGlvbi5zY2hlbWFbZmllbGROYW1lXTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChmaWVsZFR5cGUpICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvb3RJbnN0YW5jZVtmaWVsZE5hbWVdID0gKHR5cGVvZiAoZmllbGRUeXBlKSA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBuZXcgZmllbGRUeXBlKCkgLy8gaXMgYSBzY2hlbWEgcmVmZXJlbmNlXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG5ldyAoZ2V0VHlwZShPYmplY3Qua2V5cyhmaWVsZFR5cGUpWzBdKSkuY29uc3RydWN0b3IoKTsgLy8gaXMgYSBcImNvbGxlY3Rpb25cIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByb290SW5zdGFuY2U7XG4gICAgICAgIH07XG4gICAgICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgdHlwZShbUmVmbGVjdGlvblR5cGVdLCByZWZsZWN0aW9uQ29udGV4dClcbiAgICAgICAgXSwgUmVmbGVjdGlvbi5wcm90b3R5cGUsIFwidHlwZXNcIiwgdm9pZCAwKTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICB0eXBlKFwibnVtYmVyXCIsIHJlZmxlY3Rpb25Db250ZXh0KVxuICAgICAgICBdLCBSZWZsZWN0aW9uLnByb3RvdHlwZSwgXCJyb290VHlwZVwiLCB2b2lkIDApO1xuICAgICAgICByZXR1cm4gUmVmbGVjdGlvbjtcbiAgICB9KFNjaGVtYSkpO1xuXG4gICAgcmVnaXN0ZXJUeXBlKFwibWFwXCIsIHsgY29uc3RydWN0b3I6IE1hcFNjaGVtYSB9KTtcbiAgICByZWdpc3RlclR5cGUoXCJhcnJheVwiLCB7IGNvbnN0cnVjdG9yOiBBcnJheVNjaGVtYSB9KTtcbiAgICByZWdpc3RlclR5cGUoXCJzZXRcIiwgeyBjb25zdHJ1Y3RvcjogU2V0U2NoZW1hIH0pO1xuICAgIHJlZ2lzdGVyVHlwZShcImNvbGxlY3Rpb25cIiwgeyBjb25zdHJ1Y3RvcjogQ29sbGVjdGlvblNjaGVtYSwgfSk7XG5cbiAgICBleHBvcnRzLkFycmF5U2NoZW1hID0gQXJyYXlTY2hlbWE7XG4gICAgZXhwb3J0cy5Db2xsZWN0aW9uU2NoZW1hID0gQ29sbGVjdGlvblNjaGVtYTtcbiAgICBleHBvcnRzLkNvbnRleHQgPSBDb250ZXh0O1xuICAgIGV4cG9ydHMuTWFwU2NoZW1hID0gTWFwU2NoZW1hO1xuICAgIGV4cG9ydHMuUmVmbGVjdGlvbiA9IFJlZmxlY3Rpb247XG4gICAgZXhwb3J0cy5SZWZsZWN0aW9uRmllbGQgPSBSZWZsZWN0aW9uRmllbGQ7XG4gICAgZXhwb3J0cy5SZWZsZWN0aW9uVHlwZSA9IFJlZmxlY3Rpb25UeXBlO1xuICAgIGV4cG9ydHMuU2NoZW1hID0gU2NoZW1hO1xuICAgIGV4cG9ydHMuU2NoZW1hRGVmaW5pdGlvbiA9IFNjaGVtYURlZmluaXRpb247XG4gICAgZXhwb3J0cy5TZXRTY2hlbWEgPSBTZXRTY2hlbWE7XG4gICAgZXhwb3J0cy5kZWNvZGUgPSBkZWNvZGU7XG4gICAgZXhwb3J0cy5kZWZpbmVUeXBlcyA9IGRlZmluZVR5cGVzO1xuICAgIGV4cG9ydHMuZGVwcmVjYXRlZCA9IGRlcHJlY2F0ZWQ7XG4gICAgZXhwb3J0cy5kdW1wQ2hhbmdlcyA9IGR1bXBDaGFuZ2VzO1xuICAgIGV4cG9ydHMuZW5jb2RlID0gZW5jb2RlO1xuICAgIGV4cG9ydHMuZmlsdGVyID0gZmlsdGVyO1xuICAgIGV4cG9ydHMuZmlsdGVyQ2hpbGRyZW4gPSBmaWx0ZXJDaGlsZHJlbjtcbiAgICBleHBvcnRzLmhhc0ZpbHRlciA9IGhhc0ZpbHRlcjtcbiAgICBleHBvcnRzLnJlZ2lzdGVyVHlwZSA9IHJlZ2lzdGVyVHlwZTtcbiAgICBleHBvcnRzLnR5cGUgPSB0eXBlO1xuXG59KSk7XG4iLCAiaW1wb3J0ICogYXMgbXNncGFjayBmcm9tICcuL21zZ3BhY2snO1xuXG5pbXBvcnQgeyBDb25uZWN0aW9uIH0gZnJvbSAnLi9Db25uZWN0aW9uJztcbmltcG9ydCB7IFByb3RvY29sLCB1dGY4TGVuZ3RoLCB1dGY4UmVhZCB9IGZyb20gJy4vUHJvdG9jb2wnO1xuaW1wb3J0IHsgZ2V0U2VyaWFsaXplciwgU2VyaWFsaXplciB9IGZyb20gJy4vc2VyaWFsaXplci9TZXJpYWxpemVyJztcblxuLy8gVGhlIHVudXNlZCBpbXBvcnRzIGhlcmUgYXJlIGltcG9ydGFudCBmb3IgYmV0dGVyIGAuZC50c2AgZmlsZSBnZW5lcmF0aW9uXG4vLyAoTGF0ZXIgbWVyZ2VkIHdpdGggYGR0cy1idW5kbGUtZ2VuZXJhdG9yYClcbmltcG9ydCB7IGNyZWF0ZU5hbm9FdmVudHMgfSBmcm9tICcuL2NvcmUvbmFub2V2ZW50cyc7XG5pbXBvcnQgeyBjcmVhdGVTaWduYWwgfSBmcm9tICcuL2NvcmUvc2lnbmFsJztcblxuaW1wb3J0IHsgQ29udGV4dCwgZGVjb2RlLCBlbmNvZGUsIFNjaGVtYSB9IGZyb20gJ0Bjb2x5c2V1cy9zY2hlbWEnO1xuaW1wb3J0IHsgU2NoZW1hQ29uc3RydWN0b3IsIFNjaGVtYVNlcmlhbGl6ZXIgfSBmcm9tICcuL3NlcmlhbGl6ZXIvU2NoZW1hU2VyaWFsaXplcic7XG5pbXBvcnQgeyBDbG9zZUNvZGUgfSBmcm9tICcuL2Vycm9ycy9TZXJ2ZXJFcnJvcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUm9vbUF2YWlsYWJsZTxNZXRhZGF0YSA9IGFueT4ge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICByb29tSWQ6IHN0cmluZztcbiAgICBjbGllbnRzOiBudW1iZXI7XG4gICAgbWF4Q2xpZW50czogbnVtYmVyO1xuICAgIG1ldGFkYXRhPzogTWV0YWRhdGE7XG59XG5cbmV4cG9ydCBjbGFzcyBSb29tPFN0YXRlPSBhbnk+IHtcbiAgICBwdWJsaWMgcm9vbUlkOiBzdHJpbmc7XG4gICAgcHVibGljIHNlc3Npb25JZDogc3RyaW5nO1xuICAgIHB1YmxpYyByZWNvbm5lY3Rpb25Ub2tlbjogc3RyaW5nO1xuXG4gICAgcHVibGljIG5hbWU6IHN0cmluZztcbiAgICBwdWJsaWMgY29ubmVjdGlvbjogQ29ubmVjdGlvbjtcblxuICAgIC8vIFB1YmxpYyBzaWduYWxzXG4gICAgcHVibGljIG9uU3RhdGVDaGFuZ2UgPSBjcmVhdGVTaWduYWw8KHN0YXRlOiBTdGF0ZSkgPT4gdm9pZD4oKTtcbiAgICBwdWJsaWMgb25FcnJvciA9IGNyZWF0ZVNpZ25hbDwoY29kZTogbnVtYmVyLCBtZXNzYWdlPzogc3RyaW5nKSA9PiB2b2lkPigpO1xuICAgIHB1YmxpYyBvbkxlYXZlID0gY3JlYXRlU2lnbmFsPChjb2RlOiBudW1iZXIpID0+IHZvaWQ+KCk7XG4gICAgcHJvdGVjdGVkIG9uSm9pbiA9IGNyZWF0ZVNpZ25hbCgpO1xuXG4gICAgcHVibGljIHNlcmlhbGl6ZXJJZDogc3RyaW5nO1xuICAgIHB1YmxpYyBzZXJpYWxpemVyOiBTZXJpYWxpemVyPFN0YXRlPjtcblxuICAgIHByb3RlY3RlZCBoYXNKb2luZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIC8vIFRPRE86IHJlbW92ZSBtZSBvbiAxLjAuMFxuICAgIHByb3RlY3RlZCByb290U2NoZW1hOiBTY2hlbWFDb25zdHJ1Y3RvcjxTdGF0ZT47XG5cbiAgICBwcm90ZWN0ZWQgb25NZXNzYWdlSGFuZGxlcnMgPSBjcmVhdGVOYW5vRXZlbnRzKCk7XG5cbiAgICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIHJvb3RTY2hlbWE/OiBTY2hlbWFDb25zdHJ1Y3RvcjxTdGF0ZT4pIHtcbiAgICAgICAgdGhpcy5yb29tSWQgPSBudWxsO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuXG4gICAgICAgIGlmIChyb290U2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBuZXcgKGdldFNlcmlhbGl6ZXIoXCJzY2hlbWFcIikpO1xuICAgICAgICAgICAgdGhpcy5yb290U2NoZW1hID0gcm9vdFNjaGVtYTtcbiAgICAgICAgICAgICh0aGlzLnNlcmlhbGl6ZXIgYXMgU2NoZW1hU2VyaWFsaXplcikuc3RhdGUgPSBuZXcgcm9vdFNjaGVtYSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5vbkVycm9yKChjb2RlLCBtZXNzYWdlKSA9PiBjb25zb2xlLndhcm4/LihgY29seXNldXMuanMgLSBvbkVycm9yID0+ICgke2NvZGV9KSAke21lc3NhZ2V9YCkpO1xuICAgICAgICB0aGlzLm9uTGVhdmUoKCkgPT4gdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKSk7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogZGVwcmVjYXRlIG1lIG9uIHZlcnNpb24gMS4wXG4gICAgZ2V0IGlkKCkgeyByZXR1cm4gdGhpcy5yb29tSWQ7IH1cblxuICAgIHB1YmxpYyBjb25uZWN0KFxuICAgICAgICBlbmRwb2ludDogc3RyaW5nLFxuICAgICAgICBkZXZNb2RlQ2xvc2VDYWxsYmFjaz86ICgpID0+IHZvaWQsXG4gICAgICAgIHJvb206IFJvb20gPSB0aGlzIC8vIHdoZW4gcmVjb25uZWN0aW5nIG9uIGRldk1vZGUsIHJlLXVzZSBwcmV2aW91cyByb29tIGludGFuY2UgZm9yIGhhbmRsaW5nIGV2ZW50cy5cbiAgICApIHtcbiAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IG5ldyBDb25uZWN0aW9uKCk7XG4gICAgICAgIHJvb20uY29ubmVjdGlvbiA9IGNvbm5lY3Rpb247XG5cbiAgICAgICAgY29ubmVjdGlvbi5ldmVudHMub25tZXNzYWdlID0gUm9vbS5wcm90b3R5cGUub25NZXNzYWdlQ2FsbGJhY2suYmluZChyb29tKTtcbiAgICAgICAgY29ubmVjdGlvbi5ldmVudHMub25jbG9zZSA9IGZ1bmN0aW9uIChlOiBDbG9zZUV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoIXJvb20uaGFzSm9pbmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuPy4oYFJvb20gY29ubmVjdGlvbiB3YXMgY2xvc2VkIHVuZXhwZWN0ZWRseSAoJHtlLmNvZGV9KTogJHtlLnJlYXNvbn1gKTtcbiAgICAgICAgICAgICAgICByb29tLm9uRXJyb3IuaW52b2tlKGUuY29kZSwgZS5yZWFzb24pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLmNvZGUgPT09IENsb3NlQ29kZS5ERVZNT0RFX1JFU1RBUlQgJiYgZGV2TW9kZUNsb3NlQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBkZXZNb2RlQ2xvc2VDYWxsYmFjaygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByb29tLm9uTGVhdmUuaW52b2tlKGUuY29kZSk7XG4gICAgICAgICAgICAgICAgcm9vbS5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNvbm5lY3Rpb24uZXZlbnRzLm9uZXJyb3IgPSBmdW5jdGlvbiAoZTogQ2xvc2VFdmVudCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuPy4oYFJvb20sIG9uRXJyb3IgKCR7ZS5jb2RlfSk6ICR7ZS5yZWFzb259YCk7XG4gICAgICAgICAgICByb29tLm9uRXJyb3IuaW52b2tlKGUuY29kZSwgZS5yZWFzb24pO1xuICAgICAgICB9O1xuICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoZW5kcG9pbnQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBsZWF2ZShjb25zZW50ZWQ6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uTGVhdmUoKGNvZGUpID0+IHJlc29sdmUoY29kZSkpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5jb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnNlbnRlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24uc2VuZChbUHJvdG9jb2wuTEVBVkVfUk9PTV0pO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMub25MZWF2ZS5pbnZva2UoQ2xvc2VDb2RlLkNPTlNFTlRFRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBvbk1lc3NhZ2U8VCA9IGFueT4oXG4gICAgICAgIHR5cGU6IFwiKlwiLFxuICAgICAgICBjYWxsYmFjazogKHR5cGU6IHN0cmluZyB8IG51bWJlciB8IFNjaGVtYSwgbWVzc2FnZTogVCkgPT4gdm9pZFxuICAgIClcbiAgICBwdWJsaWMgb25NZXNzYWdlPFQgZXh0ZW5kcyAodHlwZW9mIFNjaGVtYSAmIChuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnkpKT4oXG4gICAgICAgIHR5cGU6IFQsXG4gICAgICAgIGNhbGxiYWNrOiAobWVzc2FnZTogSW5zdGFuY2VUeXBlPFQ+KSA9PiB2b2lkXG4gICAgKVxuICAgIHB1YmxpYyBvbk1lc3NhZ2U8VCA9IGFueT4oXG4gICAgICAgIHR5cGU6IHN0cmluZyB8IG51bWJlcixcbiAgICAgICAgY2FsbGJhY2s6IChtZXNzYWdlOiBUKSA9PiB2b2lkXG4gICAgKVxuICAgIHB1YmxpYyBvbk1lc3NhZ2UoXG4gICAgICAgIHR5cGU6ICcqJyB8IHN0cmluZyB8IG51bWJlciB8IHR5cGVvZiBTY2hlbWEsXG4gICAgICAgIGNhbGxiYWNrOiAoLi4uYXJnczogYW55W10pID0+IHZvaWRcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub25NZXNzYWdlSGFuZGxlcnMub24odGhpcy5nZXRNZXNzYWdlSGFuZGxlcktleSh0eXBlKSwgY2FsbGJhY2spO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZW5kPFQgPSBhbnk+KHR5cGU6IHN0cmluZyB8IG51bWJlciwgbWVzc2FnZT86IFQpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgaW5pdGlhbEJ5dGVzOiBudW1iZXJbXSA9IFtQcm90b2NvbC5ST09NX0RBVEFdO1xuXG4gICAgICAgIGlmICh0eXBlb2YodHlwZSkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGVuY29kZS5zdHJpbmcoaW5pdGlhbEJ5dGVzLCB0eXBlKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZW5jb2RlLm51bWJlcihpbml0aWFsQnl0ZXMsIHR5cGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGFycjogVWludDhBcnJheTtcblxuICAgICAgICBpZiAobWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBlbmNvZGVkID0gbXNncGFjay5lbmNvZGUobWVzc2FnZSk7XG4gICAgICAgICAgICBhcnIgPSBuZXcgVWludDhBcnJheShpbml0aWFsQnl0ZXMubGVuZ3RoICsgZW5jb2RlZC5ieXRlTGVuZ3RoKTtcbiAgICAgICAgICAgIGFyci5zZXQobmV3IFVpbnQ4QXJyYXkoaW5pdGlhbEJ5dGVzKSwgMCk7XG4gICAgICAgICAgICBhcnIuc2V0KG5ldyBVaW50OEFycmF5KGVuY29kZWQpLCBpbml0aWFsQnl0ZXMubGVuZ3RoKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXJyID0gbmV3IFVpbnQ4QXJyYXkoaW5pdGlhbEJ5dGVzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5zZW5kKGFyci5idWZmZXIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZW5kQnl0ZXModHlwZTogc3RyaW5nIHwgbnVtYmVyLCBieXRlczogbnVtYmVyW10gfCBBcnJheUJ1ZmZlckxpa2UpIHtcbiAgICAgICAgY29uc3QgaW5pdGlhbEJ5dGVzOiBudW1iZXJbXSA9IFtQcm90b2NvbC5ST09NX0RBVEFfQllURVNdO1xuXG4gICAgICAgIGlmICh0eXBlb2YodHlwZSkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGVuY29kZS5zdHJpbmcoaW5pdGlhbEJ5dGVzLCB0eXBlKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZW5jb2RlLm51bWJlcihpbml0aWFsQnl0ZXMsIHR5cGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGFycjogVWludDhBcnJheTtcbiAgICAgICAgYXJyID0gbmV3IFVpbnQ4QXJyYXkoaW5pdGlhbEJ5dGVzLmxlbmd0aCArICgoYnl0ZXMgYXMgQXJyYXlCdWZmZXJMaWtlKS5ieXRlTGVuZ3RoIHx8IChieXRlcyBhcyBudW1iZXJbXSkubGVuZ3RoKSk7XG4gICAgICAgIGFyci5zZXQobmV3IFVpbnQ4QXJyYXkoaW5pdGlhbEJ5dGVzKSwgMCk7XG4gICAgICAgIGFyci5zZXQobmV3IFVpbnQ4QXJyYXkoYnl0ZXMpLCBpbml0aWFsQnl0ZXMubGVuZ3RoKTtcblxuICAgICAgICB0aGlzLmNvbm5lY3Rpb24uc2VuZChhcnIuYnVmZmVyKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IHN0YXRlICgpOiBTdGF0ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlcmlhbGl6ZXIuZ2V0U3RhdGUoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlQWxsTGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLm9uSm9pbi5jbGVhcigpO1xuICAgICAgICB0aGlzLm9uU3RhdGVDaGFuZ2UuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5vbkVycm9yLmNsZWFyKCk7XG4gICAgICAgIHRoaXMub25MZWF2ZS5jbGVhcigpO1xuICAgICAgICB0aGlzLm9uTWVzc2FnZUhhbmRsZXJzLmV2ZW50cyA9IHt9O1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBvbk1lc3NhZ2VDYWxsYmFjayhldmVudDogTWVzc2FnZUV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGJ5dGVzID0gQXJyYXkuZnJvbShuZXcgVWludDhBcnJheShldmVudC5kYXRhKSlcbiAgICAgICAgY29uc3QgY29kZSA9IGJ5dGVzWzBdO1xuXG4gICAgICAgIGlmIChjb2RlID09PSBQcm90b2NvbC5KT0lOX1JPT00pIHtcbiAgICAgICAgICAgIGxldCBvZmZzZXQgPSAxO1xuXG4gICAgICAgICAgICBjb25zdCByZWNvbm5lY3Rpb25Ub2tlbiA9IHV0ZjhSZWFkKGJ5dGVzLCBvZmZzZXQpO1xuICAgICAgICAgICAgb2Zmc2V0ICs9IHV0ZjhMZW5ndGgocmVjb25uZWN0aW9uVG9rZW4pO1xuXG4gICAgICAgICAgICB0aGlzLnNlcmlhbGl6ZXJJZCA9IHV0ZjhSZWFkKGJ5dGVzLCBvZmZzZXQpO1xuICAgICAgICAgICAgb2Zmc2V0ICs9IHV0ZjhMZW5ndGgodGhpcy5zZXJpYWxpemVySWQpO1xuXG4gICAgICAgICAgICAvLyBJbnN0YW50aWF0ZSBzZXJpYWxpemVyIGlmIG5vdCBsb2NhbGx5IGF2YWlsYWJsZS5cbiAgICAgICAgICAgIGlmICghdGhpcy5zZXJpYWxpemVyKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VyaWFsaXplciA9IGdldFNlcmlhbGl6ZXIodGhpcy5zZXJpYWxpemVySWQpXG4gICAgICAgICAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gbmV3IHNlcmlhbGl6ZXIoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGJ5dGVzLmxlbmd0aCA+IG9mZnNldCAmJiB0aGlzLnNlcmlhbGl6ZXIuaGFuZHNoYWtlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXJpYWxpemVyLmhhbmRzaGFrZShieXRlcywgeyBvZmZzZXQgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucmVjb25uZWN0aW9uVG9rZW4gPSBgJHt0aGlzLnJvb21JZH06JHtyZWNvbm5lY3Rpb25Ub2tlbn1gO1xuXG4gICAgICAgICAgICB0aGlzLmhhc0pvaW5lZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLm9uSm9pbi5pbnZva2UoKTtcblxuICAgICAgICAgICAgLy8gYWNrbm93bGVkZ2Ugc3VjY2Vzc2Z1bGwgSk9JTl9ST09NXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24uc2VuZChbUHJvdG9jb2wuSk9JTl9ST09NXSk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb2RlID09PSBQcm90b2NvbC5FUlJPUikge1xuICAgICAgICAgICAgY29uc3QgaXQ6IGRlY29kZS5JdGVyYXRvciA9IHsgb2Zmc2V0OiAxIH07XG5cbiAgICAgICAgICAgIGNvbnN0IGNvZGUgPSBkZWNvZGUubnVtYmVyKGJ5dGVzLCBpdCk7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZGVjb2RlLnN0cmluZyhieXRlcywgaXQpO1xuXG4gICAgICAgICAgICB0aGlzLm9uRXJyb3IuaW52b2tlKGNvZGUsIG1lc3NhZ2UpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY29kZSA9PT0gUHJvdG9jb2wuTEVBVkVfUk9PTSkge1xuICAgICAgICAgICAgdGhpcy5sZWF2ZSgpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY29kZSA9PT0gUHJvdG9jb2wuUk9PTV9EQVRBX1NDSEVNQSkge1xuICAgICAgICAgICAgY29uc3QgaXQgPSB7IG9mZnNldDogMSB9O1xuXG4gICAgICAgICAgICBjb25zdCBjb250ZXh0OiBDb250ZXh0ID0gKHRoaXMuc2VyaWFsaXplci5nZXRTdGF0ZSgpIGFzIGFueSkuY29uc3RydWN0b3IuX2NvbnRleHQ7XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gY29udGV4dC5nZXQoZGVjb2RlLm51bWJlcihieXRlcywgaXQpKTtcblxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZTogU2NoZW1hID0gbmV3ICh0eXBlIGFzIGFueSkoKTtcbiAgICAgICAgICAgIG1lc3NhZ2UuZGVjb2RlKGJ5dGVzLCBpdCk7XG5cbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hNZXNzYWdlKHR5cGUsIG1lc3NhZ2UpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY29kZSA9PT0gUHJvdG9jb2wuUk9PTV9TVEFURSkge1xuICAgICAgICAgICAgYnl0ZXMuc2hpZnQoKTsgLy8gZHJvcCBgY29kZWAgYnl0ZVxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZShieXRlcyk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb2RlID09PSBQcm90b2NvbC5ST09NX1NUQVRFX1BBVENIKSB7XG4gICAgICAgICAgICBieXRlcy5zaGlmdCgpOyAvLyBkcm9wIGBjb2RlYCBieXRlXG4gICAgICAgICAgICB0aGlzLnBhdGNoKGJ5dGVzKTtcblxuICAgICAgICB9IGVsc2UgaWYgKGNvZGUgPT09IFByb3RvY29sLlJPT01fREFUQSkge1xuICAgICAgICAgICAgY29uc3QgaXQ6IGRlY29kZS5JdGVyYXRvciA9IHsgb2Zmc2V0OiAxIH07XG5cbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSAoZGVjb2RlLnN0cmluZ0NoZWNrKGJ5dGVzLCBpdCkpXG4gICAgICAgICAgICAgICAgPyBkZWNvZGUuc3RyaW5nKGJ5dGVzLCBpdClcbiAgICAgICAgICAgICAgICA6IGRlY29kZS5udW1iZXIoYnl0ZXMsIGl0KTtcblxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IChieXRlcy5sZW5ndGggPiBpdC5vZmZzZXQpXG4gICAgICAgICAgICAgICAgPyBtc2dwYWNrLmRlY29kZShldmVudC5kYXRhLCBpdC5vZmZzZXQpXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hNZXNzYWdlKHR5cGUsIG1lc3NhZ2UpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY29kZSA9PT0gUHJvdG9jb2wuUk9PTV9EQVRBX0JZVEVTKSB7XG4gICAgICAgICAgICBjb25zdCBpdDogZGVjb2RlLkl0ZXJhdG9yID0geyBvZmZzZXQ6IDEgfTtcblxuICAgICAgICAgICAgY29uc3QgdHlwZSA9IChkZWNvZGUuc3RyaW5nQ2hlY2soYnl0ZXMsIGl0KSlcbiAgICAgICAgICAgICAgICA/IGRlY29kZS5zdHJpbmcoYnl0ZXMsIGl0KVxuICAgICAgICAgICAgICAgIDogZGVjb2RlLm51bWJlcihieXRlcywgaXQpO1xuXG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoTWVzc2FnZSh0eXBlLCBuZXcgVWludDhBcnJheShieXRlcy5zbGljZShpdC5vZmZzZXQpKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgc2V0U3RhdGUoZW5jb2RlZFN0YXRlOiBudW1iZXJbXSk6IHZvaWQge1xuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIuc2V0U3RhdGUoZW5jb2RlZFN0YXRlKTtcbiAgICAgICAgdGhpcy5vblN0YXRlQ2hhbmdlLmludm9rZSh0aGlzLnNlcmlhbGl6ZXIuZ2V0U3RhdGUoKSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHBhdGNoKGJpbmFyeVBhdGNoOiBudW1iZXJbXSkge1xuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIucGF0Y2goYmluYXJ5UGF0Y2gpO1xuICAgICAgICB0aGlzLm9uU3RhdGVDaGFuZ2UuaW52b2tlKHRoaXMuc2VyaWFsaXplci5nZXRTdGF0ZSgpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGRpc3BhdGNoTWVzc2FnZSh0eXBlOiBzdHJpbmcgfCBudW1iZXIgfCB0eXBlb2YgU2NoZW1hLCBtZXNzYWdlOiBhbnkpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZVR5cGUgPSB0aGlzLmdldE1lc3NhZ2VIYW5kbGVyS2V5KHR5cGUpO1xuXG4gICAgICAgIGlmICh0aGlzLm9uTWVzc2FnZUhhbmRsZXJzLmV2ZW50c1ttZXNzYWdlVHlwZV0pIHtcbiAgICAgICAgICAgIHRoaXMub25NZXNzYWdlSGFuZGxlcnMuZW1pdChtZXNzYWdlVHlwZSwgbWVzc2FnZSk7XG5cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9uTWVzc2FnZUhhbmRsZXJzLmV2ZW50c1snKiddKSB7XG4gICAgICAgICAgICB0aGlzLm9uTWVzc2FnZUhhbmRsZXJzLmVtaXQoJyonLCB0eXBlLCBtZXNzYWdlKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuPy4oYGNvbHlzZXVzLmpzOiBvbk1lc3NhZ2UoKSBub3QgcmVnaXN0ZXJlZCBmb3IgdHlwZSAnJHt0eXBlfScuYCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGRlc3Ryb3kgKCkge1xuICAgICAgICBpZiAodGhpcy5zZXJpYWxpemVyKSB7XG4gICAgICAgICAgICB0aGlzLnNlcmlhbGl6ZXIudGVhcmRvd24oKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0TWVzc2FnZUhhbmRsZXJLZXkodHlwZTogc3RyaW5nIHwgbnVtYmVyIHwgdHlwZW9mIFNjaGVtYSk6IHN0cmluZyB7XG4gICAgICAgIHN3aXRjaCAodHlwZW9mKHR5cGUpKSB7XG4gICAgICAgICAgICAvLyB0eXBlb2YgU2NoZW1hXG4gICAgICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjogcmV0dXJuIGAkJHsodHlwZSBhcyB0eXBlb2YgU2NoZW1hKS5fdHlwZWlkfWA7XG5cbiAgICAgICAgICAgIC8vIHN0cmluZ1xuICAgICAgICAgICAgY2FzZSBcInN0cmluZ1wiOiByZXR1cm4gdHlwZTtcblxuICAgICAgICAgICAgLy8gbnVtYmVyXG4gICAgICAgICAgICBjYXNlIFwibnVtYmVyXCI6IHJldHVybiBgaSR7dHlwZX1gO1xuXG4gICAgICAgICAgICBkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIG1lc3NhZ2UgdHlwZS5cIik7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cbiIsICJmdW5jdGlvbiBhcHBseShzcmMsIHRhcikge1xuXHR0YXIuaGVhZGVycyA9IHNyYy5oZWFkZXJzIHx8IHt9O1xuXHR0YXIuc3RhdHVzTWVzc2FnZSA9IHNyYy5zdGF0dXNUZXh0O1xuXHR0YXIuc3RhdHVzQ29kZSA9IHNyYy5zdGF0dXM7XG5cdHRhci5kYXRhID0gc3JjLnJlc3BvbnNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2VuZChtZXRob2QsIHVyaSwgb3B0cykge1xuXHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlcywgcmVqKSB7XG5cdFx0b3B0cyA9IG9wdHMgfHwge307XG5cdFx0dmFyIHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdDtcblx0XHR2YXIgaywgdG1wLCBhcnIsIHN0cj1vcHRzLmJvZHk7XG5cdFx0dmFyIGhlYWRlcnMgPSBvcHRzLmhlYWRlcnMgfHwge307XG5cblx0XHQvLyBJRSBjb21wYXRpYmxlXG5cdFx0aWYgKG9wdHMudGltZW91dCkgcmVxLnRpbWVvdXQgPSBvcHRzLnRpbWVvdXQ7XG5cdFx0cmVxLm9udGltZW91dCA9IHJlcS5vbmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHRcdFx0ZXJyLnRpbWVvdXQgPSBlcnIudHlwZSA9PSAndGltZW91dCc7XG5cdFx0XHRyZWooZXJyKTtcblx0XHR9XG5cblx0XHRyZXEub3BlbihtZXRob2QsIHVyaS5ocmVmIHx8IHVyaSk7XG5cblx0XHRyZXEub25sb2FkID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0YXJyID0gcmVxLmdldEFsbFJlc3BvbnNlSGVhZGVycygpLnRyaW0oKS5zcGxpdCgvW1xcclxcbl0rLyk7XG5cdFx0XHRhcHBseShyZXEsIHJlcSk7IC8vPT4gcmVxLmhlYWRlcnNcblxuXHRcdFx0d2hpbGUgKHRtcCA9IGFyci5zaGlmdCgpKSB7XG5cdFx0XHRcdHRtcCA9IHRtcC5zcGxpdCgnOiAnKTtcblx0XHRcdFx0cmVxLmhlYWRlcnNbdG1wLnNoaWZ0KCkudG9Mb3dlckNhc2UoKV0gPSB0bXAuam9pbignOiAnKTtcblx0XHRcdH1cblxuXHRcdFx0dG1wID0gcmVxLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddO1xuXHRcdFx0aWYgKHRtcCAmJiAhIX50bXAuaW5kZXhPZignYXBwbGljYXRpb24vanNvbicpKSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0cmVxLmRhdGEgPSBKU09OLnBhcnNlKHJlcS5kYXRhLCBvcHRzLnJldml2ZXIpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRhcHBseShyZXEsIGVycik7XG5cdFx0XHRcdFx0cmV0dXJuIHJlaihlcnIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdChyZXEuc3RhdHVzID49IDQwMCA/IHJlaiA6IHJlcykocmVxKTtcblx0XHR9O1xuXG5cdFx0aWYgKHR5cGVvZiBGb3JtRGF0YSA8ICd1JyAmJiBzdHIgaW5zdGFuY2VvZiBGb3JtRGF0YSkge1xuXHRcdFx0Ly8gc3RyID0gb3B0cy5ib2R5XG5cdFx0fSBlbHNlIGlmIChzdHIgJiYgdHlwZW9mIHN0ciA9PSAnb2JqZWN0Jykge1xuXHRcdFx0aGVhZGVyc1snY29udGVudC10eXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG5cdFx0XHRzdHIgPSBKU09OLnN0cmluZ2lmeShzdHIpO1xuXHRcdH1cblxuXHRcdHJlcS53aXRoQ3JlZGVudGlhbHMgPSAhIW9wdHMud2l0aENyZWRlbnRpYWxzO1xuXG5cdFx0Zm9yIChrIGluIGhlYWRlcnMpIHtcblx0XHRcdHJlcS5zZXRSZXF1ZXN0SGVhZGVyKGssIGhlYWRlcnNba10pO1xuXHRcdH1cblxuXHRcdHJlcS5zZW5kKHN0cik7XG5cdH0pO1xufVxuXG5leHBvcnQgdmFyIGdldCA9IC8qI19fUFVSRV9fKi8gc2VuZC5iaW5kKHNlbmQsICdHRVQnKTtcbmV4cG9ydCB2YXIgcG9zdCA9IC8qI19fUFVSRV9fKi8gc2VuZC5iaW5kKHNlbmQsICdQT1NUJyk7XG5leHBvcnQgdmFyIHBhdGNoID0gLyojX19QVVJFX18qLyBzZW5kLmJpbmQoc2VuZCwgJ1BBVENIJyk7XG5leHBvcnQgdmFyIGRlbCA9IC8qI19fUFVSRV9fKi8gc2VuZC5iaW5kKHNlbmQsICdERUxFVEUnKTtcbmV4cG9ydCB2YXIgcHV0ID0gLyojX19QVVJFX18qLyBzZW5kLmJpbmQoc2VuZCwgJ1BVVCcpO1xuIiwgImltcG9ydCB7IENsaWVudCB9IGZyb20gXCIuL0NsaWVudFwiO1xuaW1wb3J0IHsgU2VydmVyRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMvU2VydmVyRXJyb3JcIjtcbmltcG9ydCAqIGFzIGh0dHBpZSBmcm9tIFwiaHR0cGllXCI7XG5cbmV4cG9ydCBjbGFzcyBIVFRQIHtcbiAgICBwdWJsaWMgYXV0aFRva2VuOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgY2xpZW50OiBDbGllbnQpIHt9XG5cbiAgICBwdWJsaWMgZ2V0PFQgPSBhbnk+KHBhdGg6IHN0cmluZywgb3B0aW9uczogUGFydGlhbDxodHRwaWUuT3B0aW9ucz4gPSB7fSk6IFByb21pc2U8aHR0cGllLlJlc3BvbnNlPFQ+PiB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QoXCJnZXRcIiwgcGF0aCwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgcHVibGljIHBvc3Q8VCA9IGFueT4ocGF0aDogc3RyaW5nLCBvcHRpb25zOiBQYXJ0aWFsPGh0dHBpZS5PcHRpb25zPiA9IHt9KTogUHJvbWlzZTxodHRwaWUuUmVzcG9uc2U8VD4+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdChcInBvc3RcIiwgcGF0aCwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgcHVibGljIGRlbDxUID0gYW55PihwYXRoOiBzdHJpbmcsIG9wdGlvbnM6IFBhcnRpYWw8aHR0cGllLk9wdGlvbnM+ID0ge30pOiBQcm9taXNlPGh0dHBpZS5SZXNwb25zZTxUPj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KFwiZGVsXCIsIHBhdGgsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBwdXQ8VCA9IGFueT4ocGF0aDogc3RyaW5nLCBvcHRpb25zOiBQYXJ0aWFsPGh0dHBpZS5PcHRpb25zPiA9IHt9KTogUHJvbWlzZTxodHRwaWUuUmVzcG9uc2U8VD4+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdChcInB1dFwiLCBwYXRoLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgcmVxdWVzdChtZXRob2Q6IFwiZ2V0XCIgfCBcInBvc3RcIiB8IFwicHV0XCIgfCBcImRlbFwiLCBwYXRoOiBzdHJpbmcsIG9wdGlvbnM6IFBhcnRpYWw8aHR0cGllLk9wdGlvbnM+ID0ge30pOiBQcm9taXNlPGh0dHBpZS5SZXNwb25zZT4ge1xuICAgICAgICByZXR1cm4gaHR0cGllW21ldGhvZF0odGhpcy5jbGllbnRbJ2dldEh0dHBFbmRwb2ludCddKHBhdGgpLCB0aGlzLmdldE9wdGlvbnMob3B0aW9ucykpLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IGUuc3RhdHVzQ29kZTsgLy8gIHx8IC0xXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZS5kYXRhPy5lcnJvciB8fCBlLnN0YXR1c01lc3NhZ2UgfHwgZS5tZXNzYWdlOyAvLyAgfHwgXCJvZmZsaW5lXCJcblxuICAgICAgICAgICAgaWYgKCFzdGF0dXMgJiYgIW1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aHJvdyBuZXcgU2VydmVyRXJyb3Ioc3RhdHVzLCBtZXNzYWdlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldE9wdGlvbnMob3B0aW9uczogUGFydGlhbDxodHRwaWUuT3B0aW9ucz4pIHtcbiAgICAgICAgaWYgKHRoaXMuYXV0aFRva2VuKSB7XG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMuaGVhZGVycykge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuaGVhZGVycyA9IHt9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvcHRpb25zLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9IGBCZWFyZXIgJHt0aGlzLmF1dGhUb2tlbn1gO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiAoY2MpICE9PSAndW5kZWZpbmVkJyAmJiBjYy5zeXMgJiYgY2Muc3lzLmlzTmF0aXZlKSB7XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgQ29jb3MgQ3JlYXRvciBvbiBOYXRpdmUgcGxhdGZvcm1cbiAgICAgICAgICAgIC8vIFwiQ2Fubm90IHNldCBwcm9wZXJ0eSB3aXRoQ3JlZGVudGlhbHMgb2YgIzxYTUxIdHRwUmVxdWVzdD4gd2hpY2ggaGFzIG9ubHkgYSBnZXR0ZXJcIlxuICAgICAgICAgICAgLy9cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGFsd2F5cyBpbmNsdWRlIGNyZWRlbnRpYWxzXG4gICAgICAgICAgICBvcHRpb25zLndpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gb3B0aW9ucztcbiAgICB9XG59XG4iLCAiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL3R5cGluZ3MvY29jb3MtY3JlYXRvci5kLnRzXCIgLz5cblxuLyoqXG4gKiBXZSBkbyBub3QgYXNzaWduICdzdG9yYWdlJyB0byB3aW5kb3cubG9jYWxTdG9yYWdlIGltbWVkaWF0ZWxseSBmb3IgUmVhY3RcbiAqIE5hdGl2ZSBjb21wYXRpYmlsaXR5LiB3aW5kb3cubG9jYWxTdG9yYWdlIGlzIG5vdCBwcmVzZW50IHdoZW4gdGhpcyBtb2R1bGUgaXNcbiAqIGxvYWRlZC5cbiAqL1xuXG5sZXQgc3RvcmFnZTogYW55O1xuXG5mdW5jdGlvbiBnZXRTdG9yYWdlKCk6IFN0b3JhZ2Uge1xuICAgIGlmICghc3RvcmFnZSkgIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHN0b3JhZ2UgPSAodHlwZW9mIChjYykgIT09ICd1bmRlZmluZWQnICYmIGNjLnN5cyAmJiBjYy5zeXMubG9jYWxTdG9yYWdlKVxuICAgICAgICAgICAgICAgID8gY2Muc3lzLmxvY2FsU3RvcmFnZSAgLy8gY29tcGF0aWJpbGl0eSB3aXRoIGNvY29zIGNyZWF0b3JcbiAgICAgICAgICAgICAgICA6IHdpbmRvdy5sb2NhbFN0b3JhZ2U7IC8vIFJOIGRvZXMgaGF2ZSB3aW5kb3cgb2JqZWN0IGF0IHRoaXMgcG9pbnQsIGJ1dCBsb2NhbFN0b3JhZ2UgaXMgbm90IGRlZmluZWRcblxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBpZ25vcmUgZXJyb3JcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICghc3RvcmFnZSkge1xuICAgICAgICAvLyBtb2NrIGxvY2FsU3RvcmFnZSBpZiBub3QgYXZhaWxhYmxlIChOb2RlLmpzIG9yIFJOIGVudmlyb25tZW50KVxuICAgICAgICBzdG9yYWdlID0ge1xuICAgICAgICAgICAgY2FjaGU6IHt9LFxuICAgICAgICAgICAgc2V0SXRlbTogZnVuY3Rpb24gKGtleSwgdmFsdWUpIHsgdGhpcy5jYWNoZVtrZXldID0gdmFsdWU7IH0sXG4gICAgICAgICAgICBnZXRJdGVtOiBmdW5jdGlvbiAoa2V5KSB7IHRoaXMuY2FjaGVba2V5XTsgfSxcbiAgICAgICAgICAgIHJlbW92ZUl0ZW06IGZ1bmN0aW9uIChrZXkpIHsgZGVsZXRlIHRoaXMuY2FjaGVba2V5XTsgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RvcmFnZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEl0ZW0oa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcbiAgICBnZXRTdG9yYWdlKCkuc2V0SXRlbShrZXksIHZhbHVlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUl0ZW0oa2V5OiBzdHJpbmcpIHtcbiAgICBnZXRTdG9yYWdlKCkucmVtb3ZlSXRlbShrZXkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SXRlbShrZXk6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uKSB7XG4gICAgY29uc3QgdmFsdWU6IGFueSA9IGdldFN0b3JhZ2UoKS5nZXRJdGVtKGtleSk7XG5cbiAgICBpZiAoXG4gICAgICAgIHR5cGVvZiAoUHJvbWlzZSkgPT09ICd1bmRlZmluZWQnIHx8IC8vIG9sZCBicm93c2Vyc1xuICAgICAgICAhKHZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSlcbiAgICApIHtcbiAgICAgICAgLy8gYnJvd3NlciBoYXMgc3luY2hyb25vdXMgcmV0dXJuXG4gICAgICAgIGNhbGxiYWNrKHZhbHVlKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHJlYWN0LW5hdGl2ZSBpcyBhc3luY2hyb25vdXNcbiAgICAgICAgdmFsdWUudGhlbigoaWQpID0+IGNhbGxiYWNrKGlkKSk7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IEhUVFAgfSBmcm9tIFwiLi9IVFRQXCI7XG5pbXBvcnQgeyBnZXRJdGVtLCByZW1vdmVJdGVtLCBzZXRJdGVtIH0gZnJvbSBcIi4vU3RvcmFnZVwiO1xuaW1wb3J0IHsgY3JlYXRlTmFub0V2ZW50cyB9IGZyb20gJy4vY29yZS9uYW5vZXZlbnRzJztcblxuZXhwb3J0IGludGVyZmFjZSBBdXRoU2V0dGluZ3Mge1xuICAgIHBhdGg6IHN0cmluZztcbiAgICBrZXk6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQb3B1cFNldHRpbmdzIHtcbiAgICBwcmVmaXg6IHN0cmluZztcbiAgICB3aWR0aDogbnVtYmVyO1xuICAgIGhlaWdodDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhEYXRhIHtcbiAgICB1c2VyOiBhbnk7XG4gICAgdG9rZW46IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIEF1dGgge1xuICAgIHNldHRpbmdzOiBBdXRoU2V0dGluZ3MgPSB7XG4gICAgICAgIHBhdGg6IFwiL2F1dGhcIixcbiAgICAgICAga2V5OiBcImNvbHlzZXVzLWF1dGgtdG9rZW5cIixcbiAgICB9O1xuXG4gICAgI19pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICNfaW5pdGlhbGl6YXRpb25Qcm9taXNlOiBQcm9taXNlPHZvaWQ+O1xuICAgICNfc2lnbkluV2luZG93ID0gdW5kZWZpbmVkO1xuICAgICNfZXZlbnRzID0gY3JlYXRlTmFub0V2ZW50cygpO1xuXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIGh0dHA6IEhUVFApIHtcbiAgICAgICAgZ2V0SXRlbSh0aGlzLnNldHRpbmdzLmtleSwgKHRva2VuKSA9PiB0aGlzLnRva2VuID0gdG9rZW4pO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXQgdG9rZW4odG9rZW46IHN0cmluZykge1xuICAgICAgICB0aGlzLmh0dHAuYXV0aFRva2VuID0gdG9rZW47XG4gICAgfVxuXG4gICAgcHVibGljIGdldCB0b2tlbigpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwLmF1dGhUb2tlbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgb25DaGFuZ2UoY2FsbGJhY2s6IChyZXNwb25zZTogQXV0aERhdGEpID0+IHZvaWQpIHtcbiAgICAgICAgY29uc3QgdW5iaW5kQ2hhbmdlID0gdGhpcy4jX2V2ZW50cy5vbihcImNoYW5nZVwiLCBjYWxsYmFjayk7XG4gICAgICAgIGlmICghdGhpcy4jX2luaXRpYWxpemVkKSB7XG4gICAgICAgICAgICB0aGlzLiNfaW5pdGlhbGl6YXRpb25Qcm9taXNlID0gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0VXNlckRhdGEoKS50aGVuKCh1c2VyRGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXRDaGFuZ2UoeyAuLi51c2VyRGF0YSwgdG9rZW46IHRoaXMudG9rZW4gfSk7XG5cbiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyB1c2VyIGlzIG5vdCBsb2dnZWQgaW4sIG9yIHNlcnZpY2UgaXMgZG93blxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXRDaGFuZ2UoeyB1c2VyOiBudWxsLCB0b2tlbjogdW5kZWZpbmVkIH0pO1xuXG4gICAgICAgICAgICAgICAgfSkuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI19pbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgIHJldHVybiB1bmJpbmRDaGFuZ2U7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGdldFVzZXJEYXRhKCkge1xuICAgICAgICBpZiAodGhpcy50b2tlbikge1xuICAgICAgICAgICAgcmV0dXJuIChhd2FpdCB0aGlzLmh0dHAuZ2V0KGAke3RoaXMuc2V0dGluZ3MucGF0aH0vdXNlcmRhdGFgKSkuZGF0YTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm1pc3NpbmcgYXV0aC50b2tlblwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyByZWdpc3RlcldpdGhFbWFpbEFuZFBhc3N3b3JkKGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcsIG9wdGlvbnM/OiBhbnkpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IChhd2FpdCB0aGlzLmh0dHAucG9zdChgJHt0aGlzLnNldHRpbmdzLnBhdGh9L3JlZ2lzdGVyYCwge1xuICAgICAgICAgICAgYm9keTogeyBlbWFpbCwgcGFzc3dvcmQsIG9wdGlvbnMsIH0sXG4gICAgICAgIH0pKS5kYXRhO1xuXG4gICAgICAgIHRoaXMuZW1pdENoYW5nZShkYXRhKTtcblxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykge1xuICAgICAgICBjb25zdCBkYXRhID0gKGF3YWl0IHRoaXMuaHR0cC5wb3N0KGAke3RoaXMuc2V0dGluZ3MucGF0aH0vbG9naW5gLCB7XG4gICAgICAgICAgICBib2R5OiB7IGVtYWlsLCBwYXNzd29yZCwgfSxcbiAgICAgICAgfSkpLmRhdGE7XG5cbiAgICAgICAgdGhpcy5lbWl0Q2hhbmdlKGRhdGEpO1xuXG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBzaWduSW5Bbm9ueW1vdXNseShvcHRpb25zPzogYW55KSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSAoYXdhaXQgdGhpcy5odHRwLnBvc3QoYCR7dGhpcy5zZXR0aW5ncy5wYXRofS9hbm9ueW1vdXNgLCB7XG4gICAgICAgICAgICBib2R5OiB7IG9wdGlvbnMsIH1cbiAgICAgICAgfSkpLmRhdGE7XG5cbiAgICAgICAgdGhpcy5lbWl0Q2hhbmdlKGRhdGEpO1xuXG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBzZW5kUGFzc3dvcmRSZXNldEVtYWlsKGVtYWlsOiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIChhd2FpdCB0aGlzLmh0dHAucG9zdChgJHt0aGlzLnNldHRpbmdzLnBhdGh9L2ZvcmdvdC1wYXNzd29yZGAsIHtcbiAgICAgICAgICAgIGJvZHk6IHsgZW1haWwsIH1cbiAgICAgICAgfSkpLmRhdGE7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHNpZ25JbldpdGhQcm92aWRlcihwcm92aWRlck5hbWU6IHN0cmluZywgc2V0dGluZ3M6IFBhcnRpYWw8UG9wdXBTZXR0aW5ncz4gPSB7fSkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdyA9IHNldHRpbmdzLndpZHRoIHx8IDQ4MDtcbiAgICAgICAgICAgIGNvbnN0IGggPSBzZXR0aW5ncy5oZWlnaHQgfHwgNzY4O1xuXG4gICAgICAgICAgICAvLyBmb3J3YXJkIGV4aXN0aW5nIHRva2VuIGZvciB1cGdyYWRpbmdcbiAgICAgICAgICAgIGNvbnN0IHVwZ3JhZGluZ1Rva2VuID0gdGhpcy50b2tlbiA/IGA/dG9rZW49JHt0aGlzLnRva2VufWAgOiBcIlwiO1xuXG4gICAgICAgICAgICAvLyBDYXBpdGFsaXplIGZpcnN0IGxldHRlciBvZiBwcm92aWRlck5hbWVcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gYExvZ2luIHdpdGggJHsocHJvdmlkZXJOYW1lWzBdLnRvVXBwZXJDYXNlKCkgKyBwcm92aWRlck5hbWUuc3Vic3RyaW5nKDEpKX1gO1xuICAgICAgICAgICAgY29uc3QgdXJsID0gdGhpcy5odHRwWydjbGllbnQnXVsnZ2V0SHR0cEVuZHBvaW50J10oYCR7KHNldHRpbmdzLnByZWZpeCB8fCBgJHt0aGlzLnNldHRpbmdzLnBhdGh9L3Byb3ZpZGVyYCl9LyR7cHJvdmlkZXJOYW1lfSR7dXBncmFkaW5nVG9rZW59YCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGxlZnQgPSAoc2NyZWVuLndpZHRoIC8gMikgLSAodyAvIDIpO1xuICAgICAgICAgICAgY29uc3QgdG9wID0gKHNjcmVlbi5oZWlnaHQgLyAyKSAtIChoIC8gMik7XG5cbiAgICAgICAgICAgIHRoaXMuI19zaWduSW5XaW5kb3cgPSB3aW5kb3cub3Blbih1cmwsIHRpdGxlLCAndG9vbGJhcj1ubywgbG9jYXRpb249bm8sIGRpcmVjdG9yaWVzPW5vLCBzdGF0dXM9bm8sIG1lbnViYXI9bm8sIHNjcm9sbGJhcnM9bm8sIHJlc2l6YWJsZT1ubywgY29weWhpc3Rvcnk9bm8sIHdpZHRoPScgKyB3ICsgJywgaGVpZ2h0PScgKyBoICsgJywgdG9wPScgKyB0b3AgKyAnLCBsZWZ0PScgKyBsZWZ0KTtcblxuICAgICAgICAgICAgY29uc3Qgb25NZXNzYWdlID0gKGV2ZW50OiBNZXNzYWdlRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBpdCBpcyBhIGdvb2QgaWRlYSB0byBjaGVjayBpZiBldmVudC5vcmlnaW4gY2FuIGJlIHRydXN0ZWQhXG4gICAgICAgICAgICAgICAgLy8gaWYgKGV2ZW50Lm9yaWdpbi5pbmRleE9mKHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSkgPT09IC0xKSB7IHJldHVybjsgfVxuXG4gICAgICAgICAgICAgICAgLy8gcmVxdWlyZSAndXNlcicgYW5kICd0b2tlbicgaW5zaWRlIHJlY2VpdmVkIGRhdGEuXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEudXNlciA9PT0gdW5kZWZpbmVkICYmIGV2ZW50LmRhdGEudG9rZW4gPT09IHVuZGVmaW5lZCkgeyByZXR1cm47IH1cblxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwocmVqZWN0aW9uQ2hlY2tlcik7XG4gICAgICAgICAgICAgICAgdGhpcy4jX3NpZ25JbldpbmRvdy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuI19zaWduSW5XaW5kb3cgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25NZXNzYWdlKTtcblxuICAgICAgICAgICAgICAgIGlmIChldmVudC5kYXRhLmVycm9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGV2ZW50LmRhdGEuZXJyb3IpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShldmVudC5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0Q2hhbmdlKGV2ZW50LmRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgcmVqZWN0aW9uQ2hlY2tlciA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuI19zaWduSW5XaW5kb3cgfHwgdGhpcy4jX3NpZ25JbldpbmRvdy5jbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jX3NpZ25JbldpbmRvdyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFwiY2FuY2VsbGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25NZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAyMDApO1xuXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25NZXNzYWdlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHNpZ25PdXQoKSB7XG4gICAgICAgIHRoaXMuZW1pdENoYW5nZSh7IHVzZXI6IG51bGwsIHRva2VuOiBudWxsIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgZW1pdENoYW5nZShhdXRoRGF0YTogUGFydGlhbDxBdXRoRGF0YT4pIHtcbiAgICAgICAgaWYgKGF1dGhEYXRhLnRva2VuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMudG9rZW4gPSBhdXRoRGF0YS50b2tlbjtcblxuICAgICAgICAgICAgaWYgKGF1dGhEYXRhLnRva2VuID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlSXRlbSh0aGlzLnNldHRpbmdzLmtleSk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gc3RvcmUga2V5IGluIGxvY2FsU3RvcmFnZVxuICAgICAgICAgICAgICAgIHNldEl0ZW0odGhpcy5zZXR0aW5ncy5rZXksIGF1dGhEYXRhLnRva2VuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuI19ldmVudHMuZW1pdChcImNoYW5nZVwiLCBhdXRoRGF0YSk7XG4gICAgfVxuXG59XG4iLCAiaW1wb3J0IHsgU2VydmVyRXJyb3IgfSBmcm9tICcuL2Vycm9ycy9TZXJ2ZXJFcnJvcic7XG5pbXBvcnQgeyBSb29tLCBSb29tQXZhaWxhYmxlIH0gZnJvbSAnLi9Sb29tJztcbmltcG9ydCB7IFNjaGVtYUNvbnN0cnVjdG9yIH0gZnJvbSAnLi9zZXJpYWxpemVyL1NjaGVtYVNlcmlhbGl6ZXInO1xuaW1wb3J0IHsgSFRUUCB9IGZyb20gXCIuL0hUVFBcIjtcbmltcG9ydCB7IEF1dGggfSBmcm9tICcuL0F1dGgnO1xuXG5leHBvcnQgdHlwZSBKb2luT3B0aW9ucyA9IGFueTtcblxuZXhwb3J0IGNsYXNzIE1hdGNoTWFrZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvZGU6IG51bWJlcjtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIGNvZGU6IG51bWJlcikge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIE1hdGNoTWFrZUVycm9yLnByb3RvdHlwZSk7XG4gICAgfVxufVxuXG4vLyAtIFJlYWN0IE5hdGl2ZSBkb2VzIG5vdCBwcm92aWRlIGB3aW5kb3cubG9jYXRpb25gXG4vLyAtIENvY29zIENyZWF0b3IgKE5hdGl2ZSkgZG9lcyBub3QgcHJvdmlkZSBgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lYFxuY29uc3QgREVGQVVMVF9FTkRQT0lOVCA9ICh0eXBlb2YgKHdpbmRvdykgIT09IFwidW5kZWZpbmVkXCIgJiYgIHR5cGVvZiAod2luZG93Py5sb2NhdGlvbj8uaG9zdG5hbWUpICE9PSBcInVuZGVmaW5lZFwiKVxuICAgID8gYCR7d2luZG93LmxvY2F0aW9uLnByb3RvY29sLnJlcGxhY2UoXCJodHRwXCIsIFwid3NcIil9Ly8ke3dpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZX0keyh3aW5kb3cubG9jYXRpb24ucG9ydCAmJiBgOiR7d2luZG93LmxvY2F0aW9uLnBvcnR9YCl9YFxuICAgIDogXCJ3czovLzEyNy4wLjAuMToyNTY3XCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW5kcG9pbnRTZXR0aW5ncyB7XG4gICAgaG9zdG5hbWU6IHN0cmluZyxcbiAgICBzZWN1cmU6IGJvb2xlYW4sXG4gICAgcG9ydD86IG51bWJlcixcbiAgICBwYXRobmFtZT86IHN0cmluZyxcbn1cblxuZXhwb3J0IGNsYXNzIENsaWVudCB7XG4gICAgcHVibGljIGh0dHA6IEhUVFA7XG4gICAgcHVibGljIGF1dGg6IEF1dGg7XG5cbiAgICBwcm90ZWN0ZWQgc2V0dGluZ3M6IEVuZHBvaW50U2V0dGluZ3M7XG5cbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5nczogc3RyaW5nIHwgRW5kcG9pbnRTZXR0aW5ncyA9IERFRkFVTFRfRU5EUE9JTlQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiAoc2V0dGluZ3MpID09PSBcInN0cmluZ1wiKSB7XG5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBlbmRwb2ludCBieSB1cmxcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICBjb25zdCB1cmwgPSAoc2V0dGluZ3Muc3RhcnRzV2l0aChcIi9cIikpXG4gICAgICAgICAgICAgICAgPyBuZXcgVVJMKHNldHRpbmdzLCBERUZBVUxUX0VORFBPSU5UKVxuICAgICAgICAgICAgICAgIDogbmV3IFVSTChzZXR0aW5ncyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHNlY3VyZSA9ICh1cmwucHJvdG9jb2wgPT09IFwiaHR0cHM6XCIgfHwgdXJsLnByb3RvY29sID09PSBcIndzczpcIik7XG4gICAgICAgICAgICBjb25zdCBwb3J0ID0gTnVtYmVyKHVybC5wb3J0IHx8IChzZWN1cmUgPyA0NDMgOiA4MCkpO1xuXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzID0ge1xuICAgICAgICAgICAgICAgIGhvc3RuYW1lOiB1cmwuaG9zdG5hbWUsXG4gICAgICAgICAgICAgICAgcGF0aG5hbWU6IHVybC5wYXRobmFtZSxcbiAgICAgICAgICAgICAgICBwb3J0LFxuICAgICAgICAgICAgICAgIHNlY3VyZVxuICAgICAgICAgICAgfTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIGVuZHBvaW50IGJ5IHNldHRpbmdzXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgaWYgKHNldHRpbmdzLnBvcnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHNldHRpbmdzLnBvcnQgPSAoc2V0dGluZ3Muc2VjdXJlKSA/IDQ0MyA6IDgwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNldHRpbmdzLnBhdGhuYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5wYXRobmFtZSA9IFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtYWtlIHN1cmUgcGF0aG5hbWUgZG9lcyBub3QgZW5kIHdpdGggXCIvXCJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MucGF0aG5hbWUuZW5kc1dpdGgoXCIvXCIpKSB7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLnBhdGhuYW1lID0gdGhpcy5zZXR0aW5ncy5wYXRobmFtZS5zbGljZSgwLCAtMSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmh0dHAgPSBuZXcgSFRUUCh0aGlzKTtcbiAgICAgICAgdGhpcy5hdXRoID0gbmV3IEF1dGgodGhpcy5odHRwKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgam9pbk9yQ3JlYXRlPFQ+KHJvb21OYW1lOiBzdHJpbmcsIG9wdGlvbnM6IEpvaW5PcHRpb25zID0ge30sIHJvb3RTY2hlbWE/OiBTY2hlbWFDb25zdHJ1Y3RvcjxUPikge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jcmVhdGVNYXRjaE1ha2VSZXF1ZXN0PFQ+KCdqb2luT3JDcmVhdGUnLCByb29tTmFtZSwgb3B0aW9ucywgcm9vdFNjaGVtYSk7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGNyZWF0ZTxUPihyb29tTmFtZTogc3RyaW5nLCBvcHRpb25zOiBKb2luT3B0aW9ucyA9IHt9LCByb290U2NoZW1hPzogU2NoZW1hQ29uc3RydWN0b3I8VD4pIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY3JlYXRlTWF0Y2hNYWtlUmVxdWVzdDxUPignY3JlYXRlJywgcm9vbU5hbWUsIG9wdGlvbnMsIHJvb3RTY2hlbWEpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBqb2luPFQ+KHJvb21OYW1lOiBzdHJpbmcsIG9wdGlvbnM6IEpvaW5PcHRpb25zID0ge30sIHJvb3RTY2hlbWE/OiBTY2hlbWFDb25zdHJ1Y3RvcjxUPikge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jcmVhdGVNYXRjaE1ha2VSZXF1ZXN0PFQ+KCdqb2luJywgcm9vbU5hbWUsIG9wdGlvbnMsIHJvb3RTY2hlbWEpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBqb2luQnlJZDxUPihyb29tSWQ6IHN0cmluZywgb3B0aW9uczogSm9pbk9wdGlvbnMgPSB7fSwgcm9vdFNjaGVtYT86IFNjaGVtYUNvbnN0cnVjdG9yPFQ+KSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNyZWF0ZU1hdGNoTWFrZVJlcXVlc3Q8VD4oJ2pvaW5CeUlkJywgcm9vbUlkLCBvcHRpb25zLCByb290U2NoZW1hKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZS1lc3RhYmxpc2ggY29ubmVjdGlvbiB3aXRoIGEgcm9vbSB0aGlzIGNsaWVudCB3YXMgcHJldmlvdXNseSBjb25uZWN0ZWQgdG8uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmVjb25uZWN0aW9uVG9rZW4gVGhlIGByb29tLnJlY29ubmVjdGlvblRva2VuYCBmcm9tIHByZXZpb3VzbHkgY29ubmVjdGVkIHJvb20uXG4gICAgICogQHBhcmFtIHJvb3RTY2hlbWEgKG9wdGlvbmFsKSBDb25jcmV0ZSByb290IHNjaGVtYSBkZWZpbml0aW9uXG4gICAgICogQHJldHVybnMgUHJvbWlzZTxSb29tPlxuICAgICAqL1xuICAgIHB1YmxpYyBhc3luYyByZWNvbm5lY3Q8VD4ocmVjb25uZWN0aW9uVG9rZW46IHN0cmluZywgcm9vdFNjaGVtYT86IFNjaGVtYUNvbnN0cnVjdG9yPFQ+KSB7XG4gICAgICAgIGlmICh0eXBlb2YgKHJlY29ubmVjdGlvblRva2VuKSA9PT0gXCJzdHJpbmdcIiAmJiB0eXBlb2YgKHJvb3RTY2hlbWEpID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJERVBSRUNBVEVEOiAucmVjb25uZWN0KCkgbm93IG9ubHkgYWNjZXB0cyAncmVjb25uZWN0aW9uVG9rZW4nIGFzIGFyZ3VtZW50LlxcbllvdSBjYW4gZ2V0IHRoaXMgdG9rZW4gZnJvbSBwcmV2aW91c2x5IGNvbm5lY3RlZCBgcm9vbS5yZWNvbm5lY3Rpb25Ub2tlbmBcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgW3Jvb21JZCwgdG9rZW5dID0gcmVjb25uZWN0aW9uVG9rZW4uc3BsaXQoXCI6XCIpO1xuXHRcdGlmICghcm9vbUlkIHx8ICF0b2tlbikge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCByZWNvbm5lY3Rpb24gdG9rZW4gZm9ybWF0LlxcblRoZSBmb3JtYXQgc2hvdWxkIGJlIHJvb21JZDpyZWNvbm5lY3Rpb25Ub2tlblwiKTtcblx0XHR9XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNyZWF0ZU1hdGNoTWFrZVJlcXVlc3Q8VD4oJ3JlY29ubmVjdCcsIHJvb21JZCwgeyByZWNvbm5lY3Rpb25Ub2tlbjogdG9rZW4gfSwgcm9vdFNjaGVtYSk7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGdldEF2YWlsYWJsZVJvb21zPE1ldGFkYXRhID0gYW55Pihyb29tTmFtZTogc3RyaW5nID0gXCJcIik6IFByb21pc2U8Um9vbUF2YWlsYWJsZTxNZXRhZGF0YT5bXT4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgYXdhaXQgdGhpcy5odHRwLmdldChgbWF0Y2htYWtlLyR7cm9vbU5hbWV9YCwge1xuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICkuZGF0YTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgY29uc3VtZVNlYXRSZXNlcnZhdGlvbjxUPihcbiAgICAgICAgcmVzcG9uc2U6IGFueSxcbiAgICAgICAgcm9vdFNjaGVtYT86IFNjaGVtYUNvbnN0cnVjdG9yPFQ+LFxuICAgICAgICByZXVzZVJvb21JbnN0YW5jZT86IFJvb20gLy8gdXNlZCBpbiBkZXZNb2RlXG4gICAgKTogUHJvbWlzZTxSb29tPFQ+PiB7XG4gICAgICAgIGNvbnN0IHJvb20gPSB0aGlzLmNyZWF0ZVJvb208VD4ocmVzcG9uc2Uucm9vbS5uYW1lLCByb290U2NoZW1hKTtcbiAgICAgICAgcm9vbS5yb29tSWQgPSByZXNwb25zZS5yb29tLnJvb21JZDtcbiAgICAgICAgcm9vbS5zZXNzaW9uSWQgPSByZXNwb25zZS5zZXNzaW9uSWQ7XG5cbiAgICAgICAgY29uc3Qgb3B0aW9uczogYW55ID0geyBzZXNzaW9uSWQ6IHJvb20uc2Vzc2lvbklkIH07XG5cbiAgICAgICAgLy8gZm9yd2FyZCBcInJlY29ubmVjdGlvbiB0b2tlblwiIGluIGNhc2Ugb2YgcmVjb25uZWN0aW9uLlxuICAgICAgICBpZiAocmVzcG9uc2UucmVjb25uZWN0aW9uVG9rZW4pIHtcbiAgICAgICAgICAgIG9wdGlvbnMucmVjb25uZWN0aW9uVG9rZW4gPSByZXNwb25zZS5yZWNvbm5lY3Rpb25Ub2tlbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRhcmdldFJvb20gPSByZXVzZVJvb21JbnN0YW5jZSB8fCByb29tO1xuICAgICAgICByb29tLmNvbm5lY3QodGhpcy5idWlsZEVuZHBvaW50KHJlc3BvbnNlLnJvb20sIG9wdGlvbnMpLCByZXNwb25zZS5kZXZNb2RlICYmIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oYFtDb2x5c2V1cyBkZXZNb2RlXTogJHtTdHJpbmcuZnJvbUNvZGVQb2ludCgweDFGNTA0KX0gUmUtZXN0YWJsaXNoaW5nIGNvbm5lY3Rpb24gd2l0aCByb29tIGlkICcke3Jvb20ucm9vbUlkfScuLi5gKTsgLy8g8J+UhFxuXG4gICAgICAgICAgICBsZXQgcmV0cnlDb3VudCA9IDA7XG4gICAgICAgICAgICBsZXQgcmV0cnlNYXhSZXRyaWVzID0gODtcblxuICAgICAgICAgICAgY29uc3QgcmV0cnlSZWNvbm5lY3Rpb24gPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0cnlDb3VudCsrO1xuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jb25zdW1lU2VhdFJlc2VydmF0aW9uKHJlc3BvbnNlLCByb290U2NoZW1hLCB0YXJnZXRSb29tKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKGBbQ29seXNldXMgZGV2TW9kZV06ICR7U3RyaW5nLmZyb21Db2RlUG9pbnQoMHgyNzA1KX0gU3VjY2Vzc2Z1bGx5IHJlLWVzdGFibGlzaGVkIGNvbm5lY3Rpb24gd2l0aCByb29tICcke3Jvb20ucm9vbUlkfSdgKTsgLy8g4pyFXG5cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXRyeUNvdW50IDwgcmV0cnlNYXhSZXRyaWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oYFtDb2x5c2V1cyBkZXZNb2RlXTogJHtTdHJpbmcuZnJvbUNvZGVQb2ludCgweDFGNTA0KX0gcmV0cnlpbmcuLi4gKCR7cmV0cnlDb3VudH0gb3V0IG9mICR7cmV0cnlNYXhSZXRyaWVzfSlgKTsgLy8g8J+UhFxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChyZXRyeVJlY29ubmVjdGlvbiwgMjAwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhgW0NvbHlzZXVzIGRldk1vZGVdOiAke1N0cmluZy5mcm9tQ29kZVBvaW50KDB4Mjc0Qyl9IEZhaWxlZCB0byByZWNvbm5lY3QuIElzIHlvdXIgc2VydmVyIHJ1bm5pbmc/IFBsZWFzZSBjaGVjayBzZXJ2ZXIgbG9ncy5gKTsgLy8g4p2MXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJldHJ5UmVjb25uZWN0aW9uLCAyMDAwKTtcbiAgICAgICAgfSksIHRhcmdldFJvb20pO1xuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvbkVycm9yID0gKGNvZGUsIG1lc3NhZ2UpID0+IHJlamVjdChuZXcgU2VydmVyRXJyb3IoY29kZSwgbWVzc2FnZSkpO1xuICAgICAgICAgICAgdGFyZ2V0Um9vbS5vbkVycm9yLm9uY2Uob25FcnJvcik7XG5cbiAgICAgICAgICAgIHRhcmdldFJvb21bJ29uSm9pbiddLm9uY2UoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRhcmdldFJvb20ub25FcnJvci5yZW1vdmUob25FcnJvcik7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0YXJnZXRSb29tKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYXN5bmMgY3JlYXRlTWF0Y2hNYWtlUmVxdWVzdDxUPihcbiAgICAgICAgbWV0aG9kOiBzdHJpbmcsXG4gICAgICAgIHJvb21OYW1lOiBzdHJpbmcsXG4gICAgICAgIG9wdGlvbnM6IEpvaW5PcHRpb25zID0ge30sXG4gICAgICAgIHJvb3RTY2hlbWE/OiBTY2hlbWFDb25zdHJ1Y3RvcjxUPixcbiAgICAgICAgcmV1c2VSb29tSW5zdGFuY2U/OiBSb29tLFxuICAgICkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IChcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaHR0cC5wb3N0KGBtYXRjaG1ha2UvJHttZXRob2R9LyR7cm9vbU5hbWV9YCwge1xuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkob3B0aW9ucylcbiAgICAgICAgICAgIH0pXG4gICAgICAgICkuZGF0YTtcblxuICAgICAgICAvLyBGSVhNRTogSFRUUCBjbGFzcyBpcyBhbHJlYWR5IGhhbmRsaW5nIHRoaXMgYXMgU2VydmVyRXJyb3IuXG4gICAgICAgIGlmIChyZXNwb25zZS5lcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1hdGNoTWFrZUVycm9yKHJlc3BvbnNlLmVycm9yLCByZXNwb25zZS5jb2RlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGZvcndhcmQgcmVjb25uZWN0aW9uIHRva2VuIGR1cmluZyBcInJlY29ubmVjdFwiIG1ldGhvZHMuXG4gICAgICAgIGlmIChtZXRob2QgPT09IFwicmVjb25uZWN0XCIpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLnJlY29ubmVjdGlvblRva2VuID0gb3B0aW9ucy5yZWNvbm5lY3Rpb25Ub2tlbjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbnN1bWVTZWF0UmVzZXJ2YXRpb248VD4ocmVzcG9uc2UsIHJvb3RTY2hlbWEsIHJldXNlUm9vbUluc3RhbmNlKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgY3JlYXRlUm9vbTxUPihyb29tTmFtZTogc3RyaW5nLCByb290U2NoZW1hPzogU2NoZW1hQ29uc3RydWN0b3I8VD4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSb29tPFQ+KHJvb21OYW1lLCByb290U2NoZW1hKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYnVpbGRFbmRwb2ludChyb29tOiBhbnksIG9wdGlvbnM6IGFueSA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IFtdO1xuXG4gICAgICAgIC8vIGFwcGVuZCBwcm92aWRlZCBvcHRpb25zXG4gICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiBvcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKGAke25hbWV9PSR7b3B0aW9uc1tuYW1lXX1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBlbmRwb2ludCA9ICh0aGlzLnNldHRpbmdzLnNlY3VyZSlcbiAgICAgICAgICAgID8gXCJ3c3M6Ly9cIlxuICAgICAgICAgICAgOiBcIndzOi8vXCJcblxuICAgICAgICBpZiAocm9vbS5wdWJsaWNBZGRyZXNzKSB7XG4gICAgICAgICAgICBlbmRwb2ludCArPSBgJHtyb29tLnB1YmxpY0FkZHJlc3N9YDtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZW5kcG9pbnQgKz0gYCR7dGhpcy5zZXR0aW5ncy5ob3N0bmFtZX0ke3RoaXMuZ2V0RW5kcG9pbnRQb3J0KCl9JHt0aGlzLnNldHRpbmdzLnBhdGhuYW1lfWA7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYCR7ZW5kcG9pbnR9LyR7cm9vbS5wcm9jZXNzSWR9LyR7cm9vbS5yb29tSWR9PyR7cGFyYW1zLmpvaW4oJyYnKX1gO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXRIdHRwRW5kcG9pbnQoc2VnbWVudHM6IHN0cmluZyA9ICcnKSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSBzZWdtZW50cy5zdGFydHNXaXRoKFwiL1wiKSA/IHNlZ21lbnRzIDogYC8ke3NlZ21lbnRzfWA7XG4gICAgICAgIHJldHVybiBgJHsodGhpcy5zZXR0aW5ncy5zZWN1cmUpID8gXCJodHRwc1wiIDogXCJodHRwXCJ9Oi8vJHt0aGlzLnNldHRpbmdzLmhvc3RuYW1lfSR7dGhpcy5nZXRFbmRwb2ludFBvcnQoKX0ke3RoaXMuc2V0dGluZ3MucGF0aG5hbWV9JHtwYXRofWA7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldEVuZHBvaW50UG9ydCgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLnNldHRpbmdzLnBvcnQgIT09IDgwICYmIHRoaXMuc2V0dGluZ3MucG9ydCAhPT0gNDQzKVxuICAgICAgICAgICAgPyBgOiR7dGhpcy5zZXR0aW5ncy5wb3J0fWBcbiAgICAgICAgICAgIDogXCJcIjtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgU2VyaWFsaXplciB9IGZyb20gXCIuL1NlcmlhbGl6ZXJcIjtcbmltcG9ydCB7IFNjaGVtYSwgUmVmbGVjdGlvbiwgSXRlcmF0b3IgfSBmcm9tIFwiQGNvbHlzZXVzL3NjaGVtYVwiO1xuXG5leHBvcnQgdHlwZSBTY2hlbWFDb25zdHJ1Y3RvcjxUID0gU2NoZW1hPiA9IG5ldyAoLi4uYXJnczogYW55W10pID0+IFQ7XG5cbmV4cG9ydCBjbGFzcyBTY2hlbWFTZXJpYWxpemVyPFQgZXh0ZW5kcyBTY2hlbWEgPSBhbnk+IGltcGxlbWVudHMgU2VyaWFsaXplcjxUPiB7XG4gICAgc3RhdGU6IFQ7XG5cbiAgICBzZXRTdGF0ZShyYXdTdGF0ZTogYW55KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLmRlY29kZShyYXdTdGF0ZSk7XG4gICAgfVxuXG4gICAgZ2V0U3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICAgIH1cblxuICAgIHBhdGNoKHBhdGNoZXMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuZGVjb2RlKHBhdGNoZXMpO1xuICAgIH1cblxuICAgIHRlYXJkb3duKCkge1xuICAgICAgICB0aGlzLnN0YXRlPy5bJyRjaGFuZ2VzJ10/LnJvb3QuY2xlYXJSZWZzKCk7XG4gICAgfVxuXG4gICAgaGFuZHNoYWtlKGJ5dGVzOiBudW1iZXJbXSwgaXQ/OiBJdGVyYXRvcikge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSkge1xuICAgICAgICAgICAgLy8gVE9ETzogdmFsaWRhdGUgY2xpZW50L3NlcnZlciBkZWZpbml0aW5vc1xuICAgICAgICAgICAgY29uc3QgcmVmbGVjdGlvbiA9IG5ldyBSZWZsZWN0aW9uKCk7XG4gICAgICAgICAgICByZWZsZWN0aW9uLmRlY29kZShieXRlcywgaXQpO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBpbml0aWFsaXplIHJlZmxlY3RlZCBzdGF0ZSBmcm9tIHNlcnZlclxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFJlZmxlY3Rpb24uZGVjb2RlKGJ5dGVzLCBpdCkgYXMgYW55O1xuICAgICAgICB9XG4gICAgfVxufVxuIiwgImltcG9ydCB7IFNlcmlhbGl6ZXIgfSBmcm9tIFwiLi9TZXJpYWxpemVyXCI7XG5cbmV4cG9ydCBjbGFzcyBOb25lU2VyaWFsaXplcjxUID0gYW55PiBpbXBsZW1lbnRzIFNlcmlhbGl6ZXI8VD4ge1xuICAgIHNldFN0YXRlKHJhd1N0YXRlOiBhbnkpOiB2b2lkIHt9XG4gICAgZ2V0U3RhdGUoKSB7IHJldHVybiBudWxsOyB9XG4gICAgcGF0Y2gocGF0Y2hlcykge31cbiAgICB0ZWFyZG93bigpIHsgfVxuICAgIGhhbmRzaGFrZShieXRlczogbnVtYmVyW10pIHt9XG59XG4iLCAiaW1wb3J0ICcuL2xlZ2FjeSc7XG5cbmV4cG9ydCB7IENsaWVudCwgSm9pbk9wdGlvbnMgfSBmcm9tICcuL0NsaWVudCc7XG5leHBvcnQgeyBQcm90b2NvbCwgRXJyb3JDb2RlIH0gZnJvbSAnLi9Qcm90b2NvbCc7XG5leHBvcnQgeyBSb29tLCBSb29tQXZhaWxhYmxlIH0gZnJvbSAnLi9Sb29tJztcbmV4cG9ydCB7IEF1dGgsIHR5cGUgQXV0aFNldHRpbmdzLCB0eXBlIFBvcHVwU2V0dGluZ3MgfSBmcm9tIFwiLi9BdXRoXCI7XG5cbi8qXG4gKiBTZXJpYWxpemVyc1xuICovXG5cbmltcG9ydCB7IFNjaGVtYVNlcmlhbGl6ZXIgfSBmcm9tIFwiLi9zZXJpYWxpemVyL1NjaGVtYVNlcmlhbGl6ZXJcIjtcbmltcG9ydCB7IE5vbmVTZXJpYWxpemVyIH0gZnJvbSBcIi4vc2VyaWFsaXplci9Ob25lU2VyaWFsaXplclwiO1xuaW1wb3J0IHsgcmVnaXN0ZXJTZXJpYWxpemVyIH0gZnJvbSAnLi9zZXJpYWxpemVyL1NlcmlhbGl6ZXInO1xuXG5leHBvcnQgeyByZWdpc3RlclNlcmlhbGl6ZXIsIFNjaGVtYVNlcmlhbGl6ZXIgfTtcbnJlZ2lzdGVyU2VyaWFsaXplcignc2NoZW1hJywgU2NoZW1hU2VyaWFsaXplcik7XG5yZWdpc3RlclNlcmlhbGl6ZXIoJ25vbmUnLCBOb25lU2VyaWFsaXplcik7XG4iLCAiZXhwb3J0ICogZnJvbSAnLi84dGh3YWxsLWNhbWVyYS5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2FuY2hvci5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2N1cnNvci10YXJnZXQuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9jdXJzb3IuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9kZWJ1Zy1vYmplY3QuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9kZXZpY2Utb3JpZW50YXRpb24tbG9vay5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2Zpbmdlci1jdXJzb3IuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9maXhlZC1mb3ZlYXRpb24uanMnO1xuZXhwb3J0ICogZnJvbSAnLi9oYW5kLXRyYWNraW5nLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vaGl0LXRlc3QtbG9jYXRpb24uanMnO1xuZXhwb3J0ICogZnJvbSAnLi9ob3dsZXItYXVkaW8tbGlzdGVuZXIuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9ob3dsZXItYXVkaW8tc291cmNlLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vaW1hZ2UtdGV4dHVyZS5qcyc7XG5leHBvcnQgKiBmcm9tICcuL21vdXNlLWxvb2suanMnO1xuZXhwb3J0ICogZnJvbSAnLi9wbGF5ZXItaGVpZ2h0LmpzJztcbmV4cG9ydCAqIGZyb20gJy4vdGFyZ2V0LWZyYW1lcmF0ZS5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3RlbGVwb3J0LmpzJztcbmV4cG9ydCAqIGZyb20gJy4vdHJhaWwuanMnO1xuZXhwb3J0ICogZnJvbSAnLi90d28tam9pbnQtaWstc29sdmVyLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vdmlkZW8tdGV4dHVyZS5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3ZyLW1vZGUtYWN0aXZlLXN3aXRjaC5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3BsYW5lLWRldGVjdGlvbi5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3ZybS5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3dhc2QtY29udHJvbHMuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9pbnB1dC1wcm9maWxlLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vb3JiaXRhbC1jYW1lcmEuanMnO1xuIiwgIi8qKlxuICogQ29tcG9uZW50IHByb3BlcnR5IHR5cGUuXG4gKi9cbmV4cG9ydCB2YXIgVHlwZTtcbihmdW5jdGlvbiAoVHlwZSkge1xuICAgIC8qKlxuICAgICAqICoqTmF0aXZlKipcbiAgICAgKlxuICAgICAqIFByb3BlcnR5IG9mIGEgbmF0aXZlIGNvbXBvbmVudC4gTXVzdCBub3QgYmUgdXNlZCBpbiBjdXN0b20gY29tcG9uZW50cy5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBUeXBlW1R5cGVbXCJOYXRpdmVcIl0gPSAwXSA9IFwiTmF0aXZlXCI7XG4gICAgLyoqXG4gICAgICogKipCb29sKio6XG4gICAgICpcbiAgICAgKiBBcHBlYXJzIGluIHRoZSBlZGl0b3IgYXMgYSBjaGVja2JveC5cbiAgICAgKlxuICAgICAqIEluaXRpYWwgdmFsdWUgaXMgYGZhbHNlYCwgdW5sZXNzIG92ZXJyaWRkZW4gYnkgdGhlIGBkZWZhdWx0YCBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBUeXBlW1R5cGVbXCJCb29sXCJdID0gMV0gPSBcIkJvb2xcIjtcbiAgICAvKipcbiAgICAgKiAqKkludCoqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGFuIGludGVnZXIgaW5wdXQgZmllbGQuXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIGAwYCwgdW5sZXNzIG92ZXJyaWRkZW4gYnkgdGhlIGBkZWZhdWx0YCBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBUeXBlW1R5cGVbXCJJbnRcIl0gPSAyXSA9IFwiSW50XCI7XG4gICAgLyoqXG4gICAgICogKipGbG9hdCoqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGEgZmxvYXRpbmcgcG9pbnQgaW5wdXQgZmllbGQuXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIGAwLjBgLCB1bmxlc3Mgb3ZlcnJpZGRlbiBieSB0aGUgYGRlZmF1bHRgIHByb3BlcnR5LlxuICAgICAqL1xuICAgIFR5cGVbVHlwZVtcIkZsb2F0XCJdID0gM10gPSBcIkZsb2F0XCI7XG4gICAgLyoqXG4gICAgICogKipTdHJpbmcgLyBUZXh0Kio6XG4gICAgICpcbiAgICAgKiBBcHBlYXJzIGluIHRoZSBlZGl0b3IgYXMgYSBzaW5nbGUtbGluZSB0ZXh0IGlucHV0IGZpZWxkLlxuICAgICAqXG4gICAgICogSW5pdGlhbCB2YWx1ZSBpcyBhbiBlbXB0eSBzdHJpbmcsIHVubGVzcyBvdmVycmlkZGVuIGJ5IHRoZSBgZGVmYXVsdGBcbiAgICAgKiBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBUeXBlW1R5cGVbXCJTdHJpbmdcIl0gPSA0XSA9IFwiU3RyaW5nXCI7XG4gICAgLyoqXG4gICAgICogKipFbnVtZXJhdGlvbioqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGEgZHJvcGRvd24gd2l0aCBnaXZlbiB2YWx1ZXMuIFRoZSBhZGRpdGlvbmFsXG4gICAgICogYHZhbHVlc2AgcGFyYW1ldGVyIHdpdGggc2VsZWN0aW9uIG9wdGlvbnMgaXMgbWFuZGF0b3J5LlxuICAgICAqXG4gICAgICogVGhlIHByb3BlcnR5IHZhbHVlIGlzIHJlc29sdmVkIHRvIGFuICoqaW5kZXgqKiBpbnRvIHRoZSBgdmFsdWVzYCBhcnJheS5cbiAgICAgKlxuICAgICAqIEluaXRpYWwgdmFsdWUgaXMgdGhlIGZpcnN0IGVsZW1lbnQgaW4gYHZhbHVlc2AsIHVubGVzcyBvdmVycmlkZGVuIGJ5XG4gICAgICogdGhlIGBkZWZhdWx0YCBwcm9wZXJ0eS4gVGhlIGBkZWZhdWx0YCB2YWx1ZSBjYW4gYmUgYSBzdHJpbmcgb3IgYW4gaW5kZXhcbiAgICAgKiBpbnRvIGB2YWx1ZXNgLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogICAgIGNhbWVyYToge3R5cGU6IFR5cGUuRW51bSwgdmFsdWVzOiBbJ2F1dG8nLCAnYmFjaycsICdmcm9udCddLCBkZWZhdWx0OiAnYXV0byd9LFxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIFR5cGVbVHlwZVtcIkVudW1cIl0gPSA1XSA9IFwiRW51bVwiO1xuICAgIC8qKlxuICAgICAqICoqT2JqZWN0IHJlZmVyZW5jZSoqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGFuIG9iamVjdCByZXNvdXJjZSBzZWxlY3Rpb24gZHJvcGRvd25cbiAgICAgKiB3aXRoIG9iamVjdCBwaWNrZXIuXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIGBudWxsYC5cbiAgICAgKi9cbiAgICBUeXBlW1R5cGVbXCJPYmplY3RcIl0gPSA2XSA9IFwiT2JqZWN0XCI7XG4gICAgLyoqXG4gICAgICogKipNZXNoIHJlZmVyZW5jZSoqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGEgbWVzaCByZXNvdXJjZSBzZWxlY3Rpb24gZHJvcGRvd24uXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIGBudWxsYC5cbiAgICAgKi9cbiAgICBUeXBlW1R5cGVbXCJNZXNoXCJdID0gN10gPSBcIk1lc2hcIjtcbiAgICAvKipcbiAgICAgKiAqKlRleHR1cmUgcmVmZXJlbmNlKio6XG4gICAgICpcbiAgICAgKiBBcHBlYXJzIGluIHRoZSBlZGl0b3IgYXMgYSB0ZXh0dXJlIHJlc291cmNlIHNlbGVjdGlvbiBkcm9wZG93bi5cbiAgICAgKlxuICAgICAqIEluaXRpYWwgdmFsdWUgaXMgYG51bGxgLlxuICAgICAqL1xuICAgIFR5cGVbVHlwZVtcIlRleHR1cmVcIl0gPSA4XSA9IFwiVGV4dHVyZVwiO1xuICAgIC8qKlxuICAgICAqICoqTWF0ZXJpYWwgcmVmZXJlbmNlKio6XG4gICAgICpcbiAgICAgKiBBcHBlYXJzIGluIHRoZSBlZGl0b3IgYXMgYSBtYXRlcmlhbCByZXNvdXJjZSBzZWxlY3Rpb24gZHJvcGRvd24uXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIGBudWxsYC5cbiAgICAgKi9cbiAgICBUeXBlW1R5cGVbXCJNYXRlcmlhbFwiXSA9IDldID0gXCJNYXRlcmlhbFwiO1xuICAgIC8qKlxuICAgICAqICoqQW5pbWF0aW9uIHJlZmVyZW5jZSoqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGFuIGFuaW1hdGlvbiByZXNvdXJjZSBzZWxlY3Rpb24gZHJvcGRvd24uXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIGBudWxsYC5cbiAgICAgKi9cbiAgICBUeXBlW1R5cGVbXCJBbmltYXRpb25cIl0gPSAxMF0gPSBcIkFuaW1hdGlvblwiO1xuICAgIC8qKlxuICAgICAqICoqU2tpbiByZWZlcmVuY2UqKjpcbiAgICAgKlxuICAgICAqIEFwcGVhcnMgaW4gdGhlIGVkaXRvciBhcyBhIHNraW4gcmVzb3VyY2Ugc2VsZWN0aW9uIGRyb3Bkb3duLlxuICAgICAqXG4gICAgICogSW5pdGlhbCB2YWx1ZSBpcyBgbnVsbGAuXG4gICAgICovXG4gICAgVHlwZVtUeXBlW1wiU2tpblwiXSA9IDExXSA9IFwiU2tpblwiO1xuICAgIC8qKlxuICAgICAqICoqQ29sb3IqKjpcbiAgICAgKlxuICAgICAqIEFwcGVhcnMgaW4gdGhlIGVkaXRvciBhcyBhIGNvbG9yIHdpZGdldC5cbiAgICAgKlxuICAgICAqIEluaXRpYWwgdmFsdWUgaXMgYFswLjAsIDAuMCwgMC4wLCAxLjBdYCwgdW5sZXNzIG92ZXJyaWRkZW4gYnkgdGhlXG4gICAgICogYGRlZmF1bHRgIHByb3BlcnR5LlxuICAgICAqL1xuICAgIFR5cGVbVHlwZVtcIkNvbG9yXCJdID0gMTJdID0gXCJDb2xvclwiO1xuICAgIC8qKlxuICAgICAqICoqVmVjdG9yIG9mIHR3byBmbG9hdHMqKjpcbiAgICAgKlxuICAgICAqIEFwcGVhcnMgaW4gdGhlIGVkaXRvciBhcyBhIHR3by1lbGVtZW50IGZsb2F0aW5nIHBvaW50IGlucHV0IGZpZWxkLlxuICAgICAqXG4gICAgICogSW5pdGlhbCB2YWx1ZSBpcyBgWzAuMCwgMC4wXWAsIHVubGVzcyBvdmVycmlkZGVuIGJ5IHRoZVxuICAgICAqIGBkZWZhdWx0YCBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBUeXBlW1R5cGVbXCJWZWN0b3IyXCJdID0gMTNdID0gXCJWZWN0b3IyXCI7XG4gICAgLyoqXG4gICAgICogKipWZWN0b3Igb2YgdGhyZWUgZmxvYXRzKio6XG4gICAgICpcbiAgICAgKiBBcHBlYXJzIGluIHRoZSBlZGl0b3IgYXMgYSB0aHJlZS1lbGVtZW50IGZsb2F0aW5nIHBvaW50IGlucHV0IGZpZWxkLlxuICAgICAqXG4gICAgICogSW5pdGlhbCB2YWx1ZSBpcyBgWzAuMCwgMC4wLCAwLjBdYCwgdW5sZXNzIG92ZXJyaWRkZW4gYnkgdGhlXG4gICAgICogYGRlZmF1bHRgIHByb3BlcnR5LlxuICAgICAqL1xuICAgIFR5cGVbVHlwZVtcIlZlY3RvcjNcIl0gPSAxNF0gPSBcIlZlY3RvcjNcIjtcbiAgICAvKipcbiAgICAgKiAqKlZlY3RvciBvZiBmb3VyIGZsb2F0cyoqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGEgZm91ci1lbGVtZW50IGZsb2F0aW5nIHBvaW50IGlucHV0IGZpZWxkLlxuICAgICAqXG4gICAgICogSW5pdGlhbCB2YWx1ZSBpcyBgWzAuMCwgMC4wLCAwLjAsIDAuMF1gLCB1bmxlc3Mgb3ZlcnJpZGRlbiBieSB0aGVcbiAgICAgKiBgZGVmYXVsdGAgcHJvcGVydHkuXG4gICAgICovXG4gICAgVHlwZVtUeXBlW1wiVmVjdG9yNFwiXSA9IDE1XSA9IFwiVmVjdG9yNFwiO1xufSkoVHlwZSB8fCAoVHlwZSA9IHt9KSk7XG4vKipcbiAqIERlZmF1bHQgY2xvbmVyIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIENsb25lcyBhcnJheS1saWtlIHByb3BlcnRpZXMgYW5kIGxlYXZlcyBhbGwgb3RoZXIgdHlwZXMgdW5jaGFuZ2VkLlxuICovXG5leHBvcnQgY2xhc3MgRGVmYXVsdFByb3BlcnR5Q2xvbmVyIHtcbiAgICBjbG9uZSh0eXBlLCB2YWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgVHlwZS5Db2xvcjpcbiAgICAgICAgICAgIGNhc2UgVHlwZS5WZWN0b3IyOlxuICAgICAgICAgICAgY2FzZSBUeXBlLlZlY3RvcjM6XG4gICAgICAgICAgICBjYXNlIFR5cGUuVmVjdG9yNDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUuc2xpY2UoKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqIERlZmF1bHQgY2xvbmVyIGZvciBwcm9wZXJ0eSB2YWx1ZXMuICovXG5leHBvcnQgY29uc3QgZGVmYXVsdFByb3BlcnR5Q2xvbmVyID0gbmV3IERlZmF1bHRQcm9wZXJ0eUNsb25lcigpO1xuLyoqXG4gKiBDb21wb25lbnQgcHJvcGVydHkgbmFtZXNwYWNlLlxuICpcbiAqIFVzYWdlOlxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQge0NvbXBvbmVudCwgUHJvcGVydHl9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4gKlxuICogY2xhc3MgTXlDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICogICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge1xuICogICAgICAgICBteUJvb2w6IFByb3BlcnR5LmJvb2wodHJ1ZSksXG4gKiAgICAgICAgIG15SW50OiBQcm9wZXJ0eS5pbnQoNDIpLFxuICogICAgICAgICBteVN0cmluZzogUHJvcGVydHkuc3RyaW5nKCdIZWxsbyBXb3JsZCEnKSxcbiAqICAgICAgICAgbXlNZXNoOiBQcm9wZXJ0eS5tZXNoKCksXG4gKiAgICAgfVxuICogfVxuICogYGBgXG4gKlxuICogRm9yIFR5cGVTY3JpcHQgdXNlcnMsIHlvdSBjYW4gdXNlIHRoZSBkZWNvcmF0b3JzIGluc3RlYWQuXG4gKi9cbmV4cG9ydCBjb25zdCBQcm9wZXJ0eSA9IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gYm9vbGVhbiBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkZWZhdWx0VmFsdWUgVGhlIGRlZmF1bHQgdmFsdWUuIElmIG5vdCBwcm92aWRlZCwgZGVmYXVsdHMgdG8gYGZhbHNlYC5cbiAgICAgKi9cbiAgICBib29sKGRlZmF1bHRWYWx1ZSA9IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFR5cGUuQm9vbCwgZGVmYXVsdDogZGVmYXVsdFZhbHVlIH07XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gaW50ZWdlciBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkZWZhdWx0VmFsdWUgVGhlIGRlZmF1bHQgdmFsdWUuIElmIG5vdCBwcm92aWRlZCwgZGVmYXVsdHMgdG8gYDBgLlxuICAgICAqL1xuICAgIGludChkZWZhdWx0VmFsdWUgPSAwKSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFR5cGUuSW50LCBkZWZhdWx0OiBkZWZhdWx0VmFsdWUgfTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBmbG9hdCBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkZWZhdWx0VmFsdWUgVGhlIGRlZmF1bHQgdmFsdWUuIElmIG5vdCBwcm92aWRlZCwgZGVmYXVsdHMgdG8gYDAuMGAuXG4gICAgICovXG4gICAgZmxvYXQoZGVmYXVsdFZhbHVlID0gMC4wKSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFR5cGUuRmxvYXQsIGRlZmF1bHQ6IGRlZmF1bHRWYWx1ZSB9O1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIHN0cmluZyBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkZWZhdWx0VmFsdWUgVGhlIGRlZmF1bHQgdmFsdWUuIElmIG5vdCBwcm92aWRlZCwgZGVmYXVsdHMgdG8gYCcnYC5cbiAgICAgKi9cbiAgICBzdHJpbmcoZGVmYXVsdFZhbHVlID0gJycpIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogVHlwZS5TdHJpbmcsIGRlZmF1bHQ6IGRlZmF1bHRWYWx1ZSB9O1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGVudW1lcmF0aW9uIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlcyBUaGUgbGlzdCBvZiB2YWx1ZXMuXG4gICAgICogQHBhcmFtIGRlZmF1bHRWYWx1ZSBUaGUgZGVmYXVsdCB2YWx1ZS4gQ2FuIGJlIGEgc3RyaW5nIG9yIGFuIGluZGV4IGludG9cbiAgICAgKiAgICAgYHZhbHVlc2AuIElmIG5vdCBwcm92aWRlZCwgZGVmYXVsdHMgdG8gdGhlIGZpcnN0IGVsZW1lbnQuXG4gICAgICovXG4gICAgZW51bSh2YWx1ZXMsIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBUeXBlLkVudW0sIHZhbHVlcywgZGVmYXVsdDogZGVmYXVsdFZhbHVlIH07XG4gICAgfSxcbiAgICAvKiogQ3JlYXRlIGFuIHtAbGluayBPYmplY3QzRH0gcmVmZXJlbmNlIHByb3BlcnR5LiAqL1xuICAgIG9iamVjdChvcHRzKSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFR5cGUuT2JqZWN0LCBkZWZhdWx0OiBudWxsLCByZXF1aXJlZDogb3B0cz8ucmVxdWlyZWQgPz8gZmFsc2UgfTtcbiAgICB9LFxuICAgIC8qKiBDcmVhdGUgYSB7QGxpbmsgTWVzaH0gcmVmZXJlbmNlIHByb3BlcnR5LiAqL1xuICAgIG1lc2gob3B0cykge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBUeXBlLk1lc2gsIGRlZmF1bHQ6IG51bGwsIHJlcXVpcmVkOiBvcHRzPy5yZXF1aXJlZCA/PyBmYWxzZSB9O1xuICAgIH0sXG4gICAgLyoqIENyZWF0ZSBhIHtAbGluayBUZXh0dXJlfSByZWZlcmVuY2UgcHJvcGVydHkuICovXG4gICAgdGV4dHVyZShvcHRzKSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFR5cGUuVGV4dHVyZSwgZGVmYXVsdDogbnVsbCwgcmVxdWlyZWQ6IG9wdHM/LnJlcXVpcmVkID8/IGZhbHNlIH07XG4gICAgfSxcbiAgICAvKiogQ3JlYXRlIGEge0BsaW5rIE1hdGVyaWFsfSByZWZlcmVuY2UgcHJvcGVydHkuICovXG4gICAgbWF0ZXJpYWwob3B0cykge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBUeXBlLk1hdGVyaWFsLCBkZWZhdWx0OiBudWxsLCByZXF1aXJlZDogb3B0cz8ucmVxdWlyZWQgPz8gZmFsc2UgfTtcbiAgICB9LFxuICAgIC8qKiBDcmVhdGUgYW4ge0BsaW5rIEFuaW1hdGlvbn0gcmVmZXJlbmNlIHByb3BlcnR5LiAqL1xuICAgIGFuaW1hdGlvbihvcHRzKSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFR5cGUuQW5pbWF0aW9uLCBkZWZhdWx0OiBudWxsLCByZXF1aXJlZDogb3B0cz8ucmVxdWlyZWQgPz8gZmFsc2UgfTtcbiAgICB9LFxuICAgIC8qKiBDcmVhdGUgYSB7QGxpbmsgU2tpbn0gcmVmZXJlbmNlIHByb3BlcnR5LiAqL1xuICAgIHNraW4ob3B0cykge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBUeXBlLlNraW4sIGRlZmF1bHQ6IG51bGwsIHJlcXVpcmVkOiBvcHRzPy5yZXF1aXJlZCA/PyBmYWxzZSB9O1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgY29sb3IgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gciBUaGUgcmVkIGNvbXBvbmVudCwgaW4gdGhlIHJhbmdlIFswOyAxXS5cbiAgICAgKiBAcGFyYW0gZyBUaGUgZ3JlZW4gY29tcG9uZW50LCBpbiB0aGUgcmFuZ2UgWzA7IDFdLlxuICAgICAqIEBwYXJhbSBiIFRoZSBibHVlIGNvbXBvbmVudCwgaW4gdGhlIHJhbmdlIFswOyAxXS5cbiAgICAgKiBAcGFyYW0gYSBUaGUgYWxwaGEgY29tcG9uZW50LCBpbiB0aGUgcmFuZ2UgWzA7IDFdLlxuICAgICAqL1xuICAgIGNvbG9yKHIgPSAwLjAsIGcgPSAwLjAsIGIgPSAwLjAsIGEgPSAxLjApIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogVHlwZS5Db2xvciwgZGVmYXVsdDogW3IsIGcsIGIsIGFdIH07XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSB0d28tZWxlbWVudCB2ZWN0b3IgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geCBUaGUgeCBjb21wb25lbnQuXG4gICAgICogQHBhcmFtIHkgVGhlIHkgY29tcG9uZW50LlxuICAgICAqL1xuICAgIHZlY3RvcjIoeCA9IDAuMCwgeSA9IDAuMCkge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBUeXBlLlZlY3RvcjIsIGRlZmF1bHQ6IFt4LCB5XSB9O1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgdGhyZWUtZWxlbWVudCB2ZWN0b3IgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geCBUaGUgeCBjb21wb25lbnQuXG4gICAgICogQHBhcmFtIHkgVGhlIHkgY29tcG9uZW50LlxuICAgICAqIEBwYXJhbSB6IFRoZSB6IGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICB2ZWN0b3IzKHggPSAwLjAsIHkgPSAwLjAsIHogPSAwLjApIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogVHlwZS5WZWN0b3IzLCBkZWZhdWx0OiBbeCwgeSwgel0gfTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGZvdXItZWxlbWVudCB2ZWN0b3IgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geCBUaGUgeCBjb21wb25lbnQuXG4gICAgICogQHBhcmFtIHkgVGhlIHkgY29tcG9uZW50LlxuICAgICAqIEBwYXJhbSB6IFRoZSB6IGNvbXBvbmVudC5cbiAgICAgKiBAcGFyYW0gdyBUaGUgdyBjb21wb25lbnQuXG4gICAgICovXG4gICAgdmVjdG9yNCh4ID0gMC4wLCB5ID0gMC4wLCB6ID0gMC4wLCB3ID0gMC4wKSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFR5cGUuVmVjdG9yNCwgZGVmYXVsdDogW3gsIHksIHosIHddIH07XG4gICAgfSxcbn07XG4iLCAiaW1wb3J0IHsgUHJvcGVydHksIFR5cGUgfSBmcm9tICcuL3Byb3BlcnR5LmpzJztcbi8qKlxuICogRGVjb3JhdG9yIGZvciBKUyBjb21wb25lbnQgcHJvcGVydGllcy5cbiAqXG4gKiBAcGFyYW0gZGF0YSBUaGUgcHJvcGVydHkgZGVzY3JpcHRpb24gYXMgYW4gb2JqZWN0IGxpdGVyYWxcbiAqIEByZXR1cm5zIEEgZGVjb3JhdG9yIGZ1bmN0aW9uIG1vZGlmeWluZyB0aGUgYFByb3BlcnRpZXNgIHN0YXRpY1xuICogICAgIGF0dHJpYnV0ZVxuICovXG5mdW5jdGlvbiBwcm9wZXJ0eURlY29yYXRvcihkYXRhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIHByb3BlcnR5S2V5KSB7XG4gICAgICAgIGNvbnN0IGN0b3IgPSB0YXJnZXQuY29uc3RydWN0b3I7XG4gICAgICAgIGN0b3IuUHJvcGVydGllcyA9IGN0b3IuaGFzT3duUHJvcGVydHkoJ1Byb3BlcnRpZXMnKSA/IGN0b3IuUHJvcGVydGllcyA6IHt9O1xuICAgICAgICBjdG9yLlByb3BlcnRpZXNbcHJvcGVydHlLZXldID0gZGF0YTtcbiAgICB9O1xufVxuLyoqXG4gKiBEZWNvcmF0b3IgZm9yIG1ha2luZyBhIGdldHRlciBlbnVtZXJhYmxlLlxuICpcbiAqIFVzYWdlOlxuICpcbiAqIGBgYHRzXG4gKiBjbGFzcyBNeUNsYXNzIHtcbiAqICAgICBAZW51bWVyYWJsZSgpXG4gKiAgICAgZ2V0IHByb2plY3Rpb25NYXRyaXgoKTogRmxvYXQzMkFycmF5IHsgLi4uIH1cbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gZW51bWVyYWJsZSgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKF8sIF9fLCBkZXNjcmlwdG9yKSB7XG4gICAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IHRydWU7XG4gICAgfTtcbn1cbi8qKlxuICogRGVjb3JhdG9yIGZvciBuYXRpdmUgcHJvcGVydGllcy5cbiAqXG4gKiBVc2FnZTpcbiAqXG4gKiBgYGB0c1xuICogY2xhc3MgTXlDbGFzcyB7XG4gKiAgICAgQG5hdGl2ZVByb3BlcnR5KClcbiAqICAgICBnZXQgcHJvamVjdGlvbk1hdHJpeCgpOiBGbG9hdDMyQXJyYXkgeyAuLi4gfVxuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBuYXRpdmVQcm9wZXJ0eSgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgcHJvcGVydHlLZXksIGRlc2NyaXB0b3IpIHtcbiAgICAgICAgZW51bWVyYWJsZSgpKHRhcmdldCwgcHJvcGVydHlLZXksIGRlc2NyaXB0b3IpO1xuICAgICAgICBwcm9wZXJ0eURlY29yYXRvcih7IHR5cGU6IFR5cGUuTmF0aXZlIH0pKHRhcmdldCwgcHJvcGVydHlLZXkpO1xuICAgIH07XG59XG4vKipcbiAqIFByb3BlcnR5IGRlY29yYXRvcnMgbmFtZXNwYWNlLlxuICpcbiAqIFlvdSBjYW4gdXNlIHRoZSBkZWNvcmF0b3JzIHRvIG1hcmsgYSBjbGFzcyBhdHRyaWJ1dGUgYXNcbiAqIGEgV29uZGVybGFuZCBFbmdpbmUgcHJvcGVydHkuXG4gKlxuICogVXNhZ2U6XG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7TWVzaH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbiAqIGltcG9ydCB7cHJvcGVydHl9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzJztcbiAqXG4gKiBjbGFzcyBNeUNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gKiAgICAgQHByb3BlcnR5LmJvb2wodHJ1ZSlcbiAqICAgICBteUJvb2whOiBib29sZWFuO1xuICpcbiAqICAgICBAcHJvcGVydHkuaW50KDQyKVxuICogICAgIG15SW50ITogbnVtYmVyO1xuICpcbiAqICAgICBAcHJvcGVydHkuc3RyaW5nKCdIZWxsbyBXb3JsZCEnKVxuICogICAgIG15U3RyaW5nITogc3RyaW5nO1xuICpcbiAqICAgICBAcHJvcGVydHkubWVzaCgpXG4gKiAgICAgbXlNZXNoITogTWVzaDtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEZvciBKYXZhU2NyaXB0IHVzZXJzLCBwbGVhc2UgZGVjbGFyZSB0aGUgcHJvcGVydGllcyBzdGF0aWNhbGx5LlxuICovXG5leHBvcnQgY29uc3QgcHJvcGVydHkgPSB7fTtcbmZvciAoY29uc3QgbmFtZSBpbiBQcm9wZXJ0eSkge1xuICAgIC8qIEFzc2lnbiBlYWNoIHByb3BlcnR5IGZ1bmN0b3IgdG8gYSBUeXBlU2NyaXB0IGRlY29yYXRvci5cbiAgICAgKiBUaGlzIGNvZGUgZXh0cmFjdHMgcGFyYW1ldGVycyBhbmQgcmV0dXJuIHR5cGUgdG8gcHJvdmlkZSBwcm9wZXJcbiAgICAgKiB0eXBpbmdzIHRvIHRoZSB1c2VyLiAqL1xuICAgIHByb3BlcnR5W25hbWVdID0gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgY29uc3QgZnVuY3RvciA9IFByb3BlcnR5W25hbWVdO1xuICAgICAgICByZXR1cm4gcHJvcGVydHlEZWNvcmF0b3IoZnVuY3RvciguLi5hcmdzKSk7XG4gICAgfTtcbn1cbiIsICIvKipcbiAqIENoZWNrIGlmIGEgZ2l2ZW4gdmFsdWUgaXMgYSBuYXRpdmUgc3RyaW5nIG9yIGEgYFN0cmluZ2AgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBoYXMgdHlwZSBzdHJpbmcgbGl0ZXJhbCBvciBgU3RyaW5nYCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1N0cmluZyh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gJycpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIHJldHVybiB2YWx1ZSAmJiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyB8fCB2YWx1ZS5jb25zdHJ1Y3RvciA9PT0gU3RyaW5nKTtcbn1cbi8qKlxuICogQ2hlY2sgaWYgYSBnaXZlbiB2YWx1ZSBpcyBhIG5hdGl2ZSBudW1iZXIgb3IgYSBgTnVtYmVyYCBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGhhcyB0eXBlIG51bWJlciBsaXRlcmFsIG9yIGBOdW1iZXJgLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTnVtYmVyKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fCB2YWx1ZS5jb25zdHJ1Y3RvciA9PT0gTnVtYmVyO1xufVxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIGEgZ2l2ZW4gdmFsdWUgaXMgYSB2aXN1YWwgbWVkaWEuXG4gKlxuICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVja1xuICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGFuIGltYWdlLCB2aWRlbywgb3IgY2FudmFzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNJbWFnZUxpa2UodmFsdWUpIHtcbiAgICByZXR1cm4gKHZhbHVlIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCB8fFxuICAgICAgICB2YWx1ZSBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQgfHxcbiAgICAgICAgdmFsdWUgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCk7XG59XG4iLCAiLyoqIEludGVybmFsIHR5cGUgZm9yIHRyYW5zYWN0aW9uLiAqL1xudmFyIFRyYW5zYWN0aW9uVHlwZTtcbihmdW5jdGlvbiAoVHJhbnNhY3Rpb25UeXBlKSB7XG4gICAgVHJhbnNhY3Rpb25UeXBlW1RyYW5zYWN0aW9uVHlwZVtcIkFkZGl0aW9uXCJdID0gMV0gPSBcIkFkZGl0aW9uXCI7XG4gICAgVHJhbnNhY3Rpb25UeXBlW1RyYW5zYWN0aW9uVHlwZVtcIlJlbW92YWxcIl0gPSAyXSA9IFwiUmVtb3ZhbFwiO1xufSkoVHJhbnNhY3Rpb25UeXBlIHx8IChUcmFuc2FjdGlvblR5cGUgPSB7fSkpO1xuLyoqXG4gKiBFdmVudCBlbWl0dGVyLlxuICpcbiAqIFRoaXMgY2xhc3MgYWxsb3dzIHRvIHJlZ2lzdGVyIGxpc3RlbmVycyB0aGF0IHdpbGwgZ2V0IG5vdGlmaWVkIGJ5IHRoZSBlbWl0dGVyLlxuICpcbiAqIFVzYWdlIGV4YW1wbGU6XG4gKlxuICogYGBganNcbiAqIC8vIGBvblByZVJlbmRlcmAgaXMgYW4gYEVtaXR0ZXJgIGluc3RhbmNlLlxuICogc2NlbmUub25QcmVSZW5kZXIuYWRkKCgpID0+IGNvbnNvbGUubG9nKCdiZWZvcmUgcmVuZGVyaW5nJykpO1xuICogLy8gYG9uUG9zdFJlbmRlcmAgaXMgYW4gYEVtaXR0ZXJgIGluc3RhbmNlLlxuICogc2NlbmUub25Qb3N0UmVuZGVyLmFkZCgoKSA9PiBjb25zb2xlLmxvZygnYWZ0ZXIgcmVuZGVyaW5nJykpO1xuICogYGBgXG4gKlxuICogWW91IGNhbiBjcmVhdGUgeW91ciBvd24gZW1pdHRlcnM6XG4gKlxuICogYGBganNcbiAqIGltcG9ydCB7RW1pdHRlcn0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbiAqXG4gKiBjb25zdCBlbWl0dGVyID0gbmV3IEVtaXR0ZXIoKTtcbiAqIGBgYFxuICpcbiAqIFlvdSBjYW4gbm90aWZ5IGxpc3RlbmVycyBpbiB0byB5b3VyIGVtaXR0ZXIgdXNpbmcge0BsaW5rIEVtaXR0ZXIubm90aWZ5fTpcbiAqXG4gKiBgYGBqc1xuICogLy8gTm90aWZpZXMgYWxsIHRoZSBsaXN0ZW5lcnMuXG4gKiBlbWl0dGVyLm5vdGlmeSgpO1xuICogLy8gTm90aWZpZXMgYWxsIHRoZSBsaXN0ZW5lcnMgd2l0aCBzb21lIGRhdGEuXG4gKiBlbWl0dGVyLm5vdGlmeSh7IG15SW50OiA0MiwgbXlTdHI6ICdIZWxsbyBXb3JsZCEnIH0pO1xuICogYGBgXG4gKlxuICogQGNhdGVnb3J5IGV2ZW50XG4gKi9cbmV4cG9ydCBjbGFzcyBFbWl0dGVyIHtcbiAgICAvKipcbiAgICAgKiBMaXN0IG9mIGxpc3RlbmVycyB0byB0cmlnZ2VyIHdoZW4gYG5vdGlmeWAgaXMgY2FsbGVkLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9saXN0ZW5lcnMgPSBbXTtcbiAgICAvKipcbiAgICAgKiBgdHJ1ZWAgaWYgdGhlIGVtaXR0ZXIgaXMgY3VycmVudGx5IG5vdGlmeWluZyBsaXN0ZW5lcnMuIFRoaXNcbiAgICAgKiBpcyB1c2VkIHRvIGRlZmVyIGFkZGl0aW9uIGFuZCByZW1vdmFsLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9ub3RpZnlpbmcgPSBmYWxzZTtcbiAgICAvKipcbiAgICAgKiBQZW5kaW5nIGFkZGl0aW9ucyAvIHJlbW92YWxzLCBwZXJmb3JtZWQgZHVyaW5nIGEgbm90aWZpY2F0aW9uLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF90cmFuc2FjdGlvbnMgPSBbXTtcbiAgICAvKipcbiAgICAgKiBSZWdpc3RlciBhIG5ldyBsaXN0ZW5lciB0byBiZSB0cmlnZ2VyZWQgb24ge0BsaW5rIEVtaXR0ZXIubm90aWZ5fS5cbiAgICAgKlxuICAgICAqIEJhc2ljIHVzYWdlOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBlbWl0dGVyLmFkZCgoZGF0YSkgPT4ge1xuICAgICAqICAgICBjb25zb2xlLmxvZygnZXZlbnQgcmVjZWl2ZWQhJyk7XG4gICAgICogICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQXV0b21hdGljYWxseSByZW1vdmUgdGhlIGxpc3RlbmVyIHdoZW4gYW4gZXZlbnQgaXMgcmVjZWl2ZWQ6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGVtaXR0ZXIuYWRkKChkYXRhKSA9PiB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKCdldmVudCByZWNlaXZlZCEnKTtcbiAgICAgKiAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICogfSwge29uY2U6IHRydWV9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBsaXN0ZW5lciBUaGUgY2FsbGJhY2sgdG8gcmVnaXN0ZXIuXG4gICAgICogQHBhcmFtIG9wdHMgVGhlIGxpc3RlbmVyIG9wdGlvbnMuIEZvciBtb3JlIGluZm9ybWF0aW9uLCBwbGVhc2UgaGF2ZSBhIGxvb2tcbiAgICAgKiAgICAgYXQgdGhlIHtAbGluayBMaXN0ZW5lck9wdGlvbnN9IGludGVyZmFjZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKVxuICAgICAqL1xuICAgIGFkZChsaXN0ZW5lciwgb3B0cyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHsgb25jZSA9IGZhbHNlLCBpZCA9IHVuZGVmaW5lZCB9ID0gb3B0cztcbiAgICAgICAgY29uc3QgZGF0YSA9IHsgaWQsIG9uY2UsIGNhbGxiYWNrOiBsaXN0ZW5lciB9O1xuICAgICAgICBpZiAodGhpcy5fbm90aWZ5aW5nKSB7XG4gICAgICAgICAgICB0aGlzLl90cmFuc2FjdGlvbnMucHVzaCh7IHR5cGU6IFRyYW5zYWN0aW9uVHlwZS5BZGRpdGlvbiwgZGF0YSB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2xpc3RlbmVycy5wdXNoKGRhdGEpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byB7QGxpbmsgRW1pdHRlci5hZGR9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGxpc3RlbmVycyBUaGUgY2FsbGJhY2socykgdG8gcmVnaXN0ZXIuXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgRW1pdHRlci5hZGR9IGluc3RlYWQuXG4gICAgICovXG4gICAgcHVzaCguLi5saXN0ZW5lcnMpIHtcbiAgICAgICAgZm9yIChjb25zdCBjYiBvZiBsaXN0ZW5lcnMpXG4gICAgICAgICAgICB0aGlzLmFkZChjYik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlciBhIG5ldyBsaXN0ZW5lciB0byBiZSB0cmlnZ2VyZWQgb24ge0BsaW5rIEVtaXR0ZXIubm90aWZ5fS5cbiAgICAgKlxuICAgICAqIE9uY2Ugbm90aWZpZWQsIHRoZSBsaXN0ZW5lciB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZC5cbiAgICAgKlxuICAgICAqIFRoZSBtZXRob2QgaXMgZXF1aXZhbGVudCB0byBjYWxsaW5nIHtAbGluayBFbWl0dGVyLmFkZH0gd2l0aDpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogZW1pdHRlci5hZGQobGlzdGVuZXIsIHtvbmNlOiB0cnVlfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGlzdGVuZXIgVGhlIGNhbGxiYWNrIHRvIHJlZ2lzdGVyLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIG9uY2UobGlzdGVuZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkKGxpc3RlbmVyLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIHJlZ2lzdGVyZWQgbGlzdGVuZXIuXG4gICAgICpcbiAgICAgKiBVc2FnZSB3aXRoIGEgY2FsbGJhY2s6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IGxpc3RlbmVyID0gKGRhdGEpID0+IGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAqIGVtaXR0ZXIuYWRkKGxpc3RlbmVyKTtcbiAgICAgKlxuICAgICAqIC8vIFJlbW92ZSB1c2luZyB0aGUgY2FsbGJhY2sgcmVmZXJlbmNlOlxuICAgICAqIGVtaXR0ZXIucmVtb3ZlKGxpc3RlbmVyKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFVzYWdlIHdpdGggYW4gaWQ6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGVtaXR0ZXIuYWRkKChkYXRhKSA9PiBjb25zb2xlLmxvZyhkYXRhKSwge2lkOiAnbXktY2FsbGJhY2snfSk7XG4gICAgICpcbiAgICAgKiAvLyBSZW1vdmUgdXNpbmcgdGhlIGlkOlxuICAgICAqIGVtaXR0ZXIucmVtb3ZlKCdteS1jYWxsYmFjaycpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogVXNpbmcgaWRlbnRpZmllcnMsIHlvdSB3aWxsIG5lZWQgdG8gZW5zdXJlIHlvdXIgdmFsdWUgaXMgdW5pcXVlIHRvIGF2b2lkXG4gICAgICogcmVtb3ZpbmcgbGlzdGVuZXJzIGZyb20gb3RoZXIgbGlicmFyaWVzLCBlLmcuLDpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogZW1pdHRlci5hZGQoKGRhdGEpID0+IGNvbnNvbGUubG9nKGRhdGEpLCB7aWQ6ICdub24tdW5pcXVlJ30pO1xuICAgICAqIC8vIFRoaXMgc2Vjb25kIGxpc3RlbmVyIGNvdWxkIGJlIGFkZGVkIGJ5IGEgdGhpcmQtcGFydHkgbGlicmFyeS5cbiAgICAgKiBlbWl0dGVyLmFkZCgoZGF0YSkgPT4gY29uc29sZS5sb2coJ0hlbGxvIEZyb20gTGlicmFyeSEnKSwge2lkOiAnbm9uLXVuaXF1ZSd9KTtcbiAgICAgKlxuICAgICAqIC8vIEhvIFNuYXAhIFRoaXMgYWxzbyByZW1vdmVkIHRoZSBsaWJyYXJ5IGxpc3RlbmVyIVxuICAgICAqIGVtaXR0ZXIucmVtb3ZlKCdub24tdW5pcXVlJyk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBUaGUgaWRlbnRpZmllciBjYW4gYmUgYW55IHR5cGUuIEhvd2V2ZXIsIHJlbWVtYmVyIHRoYXQgdGhlIGNvbXBhcmlzb24gd2lsbCBiZVxuICAgICAqIGJ5LXZhbHVlIGZvciBwcmltaXRpdmUgdHlwZXMgKHN0cmluZywgbnVtYmVyKSwgYnV0IGJ5IHJlZmVyZW5jZSBmb3Igb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIEV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGVtaXR0ZXIuYWRkKCgpID0+IGNvbnNvbGUubG9nKCdIZWxsbycpLCB7aWQ6IHt2YWx1ZTogNDJ9fSk7XG4gICAgICogZW1pdHRlci5hZGQoKCkgPT4gY29uc29sZS5sb2coJ1dvcmxkIScpLCB7aWQ6IHt2YWx1ZTogNDJ9fSk7XG4gICAgICogZW1pdHRlci5yZW1vdmUoe3ZhbHVlOiA0Mn0pOyAvLyBOb25lIG9mIHRoZSBhYm92ZSBsaXN0ZW5lcnMgbWF0Y2ghXG4gICAgICogZW1pdHRlci5ub3RpZnkoKTsgLy8gUHJpbnRzICdIZWxsbycgYW5kICdXb3JsZCEnLlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogSGVyZSwgYm90aCBlbWl0dGVycyBoYXZlIGlkIGB7dmFsdWU6IDQyfWAsIGJ1dCB0aGUgY29tcGFyaXNvbiBpcyBtYWRlIGJ5IHJlZmVyZW5jZS4gVGh1cyxcbiAgICAgKiB0aGUgYHJlbW92ZSgpYCBjYWxsIGhhcyBubyBlZmZlY3QuIFdlIGNhbiBtYWtlIGl0IHdvcmsgYnkgZG9pbmc6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IGlkID0ge3ZhbHVlOiA0Mn07XG4gICAgICogZW1pdHRlci5hZGQoKCkgPT4gY29uc29sZS5sb2coJ0hlbGxvJyksIHtpZH0pO1xuICAgICAqIGVtaXR0ZXIuYWRkKCgpID0+IGNvbnNvbGUubG9nKCdXb3JsZCEnKSwge2lkfSk7XG4gICAgICogZW1pdHRlci5yZW1vdmUoaWQpOyAvLyBTYW1lIHJlZmVyZW5jZSwgaXQgd29ya3MhXG4gICAgICogZW1pdHRlci5ub3RpZnkoKTsgLy8gRG9lc24ndCBwcmludC5cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBsaXN0ZW5lciBUaGUgcmVnaXN0ZXJlZCBjYWxsYmFjayBvciBhIHZhbHVlIHJlcHJlc2VudGluZyB0aGUgYGlkYC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKVxuICAgICAqL1xuICAgIHJlbW92ZShsaXN0ZW5lcikge1xuICAgICAgICBpZiAodGhpcy5fbm90aWZ5aW5nKSB7XG4gICAgICAgICAgICB0aGlzLl90cmFuc2FjdGlvbnMucHVzaCh7IHR5cGU6IFRyYW5zYWN0aW9uVHlwZS5SZW1vdmFsLCBkYXRhOiBsaXN0ZW5lciB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGxpc3RlbmVyc1tpXTtcbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2FsbGJhY2sgPT09IGxpc3RlbmVyIHx8IHRhcmdldC5pZCA9PT0gbGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGktLSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrIHdoZXRoZXIgdGhlIGxpc3RlbmVyIGlzIHJlZ2lzdGVyZWQuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIG1ldGhvZCBwZXJmb3JtcyBhIGxpbmVhciBzZWFyY2guXG4gICAgICpcbiAgICAgKiAqIEBub3RlIERvZXNuJ3QgYWNjb3VudCBmb3IgcGVuZGluZyBsaXN0ZW5lcnMsIGkuZS4sXG4gICAgICogbGlzdGVuZXJzIGFkZGVkIC8gcmVtb3ZlZCBkdXJpbmcgYSBub3RpZmljYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGlzdGVuZXIgVGhlIHJlZ2lzdGVyZWQgY2FsbGJhY2sgb3IgYSB2YWx1ZSByZXByZXNlbnRpbmcgdGhlIGBpZGAuXG4gICAgICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBoYW5kbGUgaXMgZm91bmQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIGhhcyhsaXN0ZW5lcikge1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBsaXN0ZW5lcnNbaV07XG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNhbGxiYWNrID09PSBsaXN0ZW5lciB8fCB0YXJnZXQuaWQgPT09IGxpc3RlbmVyKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTm90aWZ5IGxpc3RlbmVycyB3aXRoIHRoZSBnaXZlbiBkYXRhIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgbWV0aG9kIGVuc3VyZXMgYWxsIGxpc3RlbmVycyBhcmUgY2FsbGVkIGV2ZW4gaWZcbiAgICAgKiBhbiBleGNlcHRpb24gaXMgdGhyb3duLiBGb3IgKHBvc3NpYmx5KSBmYXN0ZXIgbm90aWZpY2F0aW9uLFxuICAgICAqIHBsZWFzZSB1c2Uge0BsaW5rIEVtaXR0ZXIubm90aWZ5VW5zYWZlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIHBhc3MgdG8gbGlzdGVuZXIgd2hlbiBpbnZva2VkLlxuICAgICAqL1xuICAgIG5vdGlmeSguLi5kYXRhKSB7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycztcbiAgICAgICAgdGhpcy5fbm90aWZ5aW5nID0gdHJ1ZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RlbmVyID0gbGlzdGVuZXJzW2ldO1xuICAgICAgICAgICAgaWYgKGxpc3RlbmVyLm9uY2UpXG4gICAgICAgICAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpLS0sIDEpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lci5jYWxsYmFjayguLi5kYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9ub3RpZnlpbmcgPSBmYWxzZTtcbiAgICAgICAgLyogUHJvY2VzcyBkZWZlcnJlZCBhZGRpdGlvbnMgJiByZW1vdmFscyAqL1xuICAgICAgICB0aGlzLl9mbHVzaFRyYW5zYWN0aW9ucygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOb3RpZnkgbGlzdGVuZXJzIHdpdGggdGhlIGdpdmVuIGRhdGEgb2JqZWN0LlxuICAgICAqXG4gICAgICogQG5vdGUgQmVjYXVzZSB0aGlzIG1ldGhvZCBkb2Vzbid0IGNhdGNoIGV4Y2VwdGlvbnMsIHNvbWUgbGlzdGVuZXJzXG4gICAgICogd2lsbCBiZSBza2lwcGVkIG9uIGEgdGhyb3cuIFBsZWFzZSB1c2Uge0BsaW5rIEVtaXR0ZXIubm90aWZ5fSBmb3Igc2FmZVxuICAgICAqIG5vdGlmaWNhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIHBhc3MgdG8gbGlzdGVuZXIgd2hlbiBpbnZva2VkLlxuICAgICAqL1xuICAgIG5vdGlmeVVuc2FmZSguLi5kYXRhKSB7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RlbmVyID0gbGlzdGVuZXJzW2ldO1xuICAgICAgICAgICAgaWYgKGxpc3RlbmVyLm9uY2UpXG4gICAgICAgICAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpLS0sIDEpO1xuICAgICAgICAgICAgbGlzdGVuZXIuY2FsbGJhY2soLi4uZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgLyogUHJvY2VzcyBkZWZlcnJlZCBhZGRpdGlvbnMgJiByZW1vdmFscyAqL1xuICAgICAgICB0aGlzLl9mbHVzaFRyYW5zYWN0aW9ucygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSBwcm9taXNlIHRoYXQgd2lsbCByZXNvbHZlIG9uIHRoZSBuZXh0IGV2ZW50LlxuICAgICAqXG4gICAgICogQG5vdGUgVGhlIHByb21pc2UgbWlnaHQgbmV2ZXIgcmVzb2x2ZSBpZiBubyBldmVudCBpcyBzZW50LlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgZGF0YSBwYXNzZWQgdG9cbiAgICAgKiAgICAge0BsaW5rIEVtaXR0ZXIubm90aWZ5fS5cbiAgICAgKi9cbiAgICBwcm9taXNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlcywgXykgPT4ge1xuICAgICAgICAgICAgdGhpcy5vbmNlKCguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICByZXMoYXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXMoYXJnc1swXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOdW1iZXIgb2YgbGlzdGVuZXJzLlxuICAgICAqXG4gICAgICogQG5vdGUgRG9lc24ndCBhY2NvdW50IGZvciBwZW5kaW5nIGxpc3RlbmVycywgaS5lLixcbiAgICAgKiBsaXN0ZW5lcnMgYWRkZWQgLyByZW1vdmVkIGR1cmluZyBhIG5vdGlmaWNhdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgbGlzdGVuZXJDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xpc3RlbmVycy5sZW5ndGg7XG4gICAgfVxuICAgIC8qKiBgdHJ1ZWAgaWYgaXQgaGFzIG5vIGxpc3RlbmVycywgYGZhbHNlYCBvdGhlcndpc2UuICovXG4gICAgZ2V0IGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyQ291bnQgPT09IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZsdXNoIGFsbCBwZW5kaW5nIHRyYW5zYWN0aW9ucy5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfZmx1c2hUcmFuc2FjdGlvbnMoKSB7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycztcbiAgICAgICAgZm9yIChjb25zdCB0cmFuc2FjdGlvbiBvZiB0aGlzLl90cmFuc2FjdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICh0cmFuc2FjdGlvbi50eXBlID09PSBUcmFuc2FjdGlvblR5cGUuQWRkaXRpb24pIHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcnMucHVzaCh0cmFuc2FjdGlvbi5kYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKHRyYW5zYWN0aW9uLmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3RyYW5zYWN0aW9ucy5sZW5ndGggPSAwO1xuICAgIH1cbn1cbi8qIER1bW15IHZhbHVlIHVzZWQgd2l0aCBSZXRhaW5FbWl0dGVyLiAqL1xuY29uc3QgUmV0YWluRW1pdHRlclVuZGVmaW5lZCA9IHt9O1xuLyoqXG4gKiBFdmVudCBlbWl0dGVyIHRoYXQgcmV0YWlucyBldmVudCBkYXRhIHdoZW4gbm90aWZpZWQuXG4gKlxuICogQWZ0ZXIgYSBub3RpZmljYXRpb24gaGFwcGVucywgc3Vic2VxdWVudCBjYWxscyB0byB7QGxpbmsgUmV0YWluRW1pdHRlci5hZGR9IHdpbGwgZ2V0XG4gKiBhdXRvbWF0aWNhbGx5IG5vdGlmaWVkLlxuICpcbiAqIFlvdSBjYW4gdXNlIGFub3RoZXIgZW1pdHRlciBpbiBvcmRlciB0byBjYW5jZWwgdGhlIGxhc3QgcmV0YWluZWQgZXZlbnQ6XG4gKlxuICogYGBganNcbiAqIGltcG9ydCB7RW1pdHRlciwgUmV0YWluZWRFbWl0dGVyfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICpcbiAqIGNvbnN0IG9uU3RhcnQgPSBuZXcgUmV0YWluZWRFbWl0dGVyKCk7XG4gKlxuICogb25TdGFydC5ub3RpZnkoNDIpO1xuICogb25TdGFydC5hZGQoKGRhdGEpID0+IGNvbnNvbGUubG9nKGRhdGEpKSAvLyBQcmludHMgJzQyJy5cbiAqIGBgYFxuICpcbiAqIFlvdSBjYW4gcmVzZXQgdGhlIHN0YXRlIG9mIHRoZSBlbWl0dGVyLCBpLmUuLCBtYWtpbmcgaXQgZm9yZ2V0IGFib3V0IHRoZVxuICogbGFzdCBldmVudCB1c2luZzpcbiAqXG4gKiBgYGBqc1xuICogaW1wb3J0IHtFbWl0dGVyLCBSZXRhaW5lZEVtaXR0ZXJ9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4gKlxuICogY29uc3Qgb25TdGFydCA9IG5ldyBSZXRhaW5lZEVtaXR0ZXIoKTtcbiAqIG9uU3RhcnQubm90aWZ5KDQyKTtcbiAqIG9uU3RhcnQuYWRkKChkYXRhKSA9PiBjb25zb2xlLmxvZyhkYXRhKSkgLy8gUHJpbnRzICc0MicuXG4gKlxuICogLy8gUmVzZXQgdGhlIHN0YXRlIG9mIHRoZSBlbWl0dGVyLlxuICogb25TdGFydC5yZXNldCgpO1xuICogb25TdGFydC5hZGQoKGRhdGEpID0+IGNvbnNvbGUubG9nKGRhdGEpKSAvLyBEb2Vzbid0IHByaW50IGFueXRoaW5nLlxuICogYGBgXG4gKlxuICogRm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgZW1pdHRlcnMsIHBsZWFzZSBoYXZlIGEgbG9vayBhdCB0aGUgYmFzZSB7QGxpbmsgRW1pdHRlcn0gY2xhc3MuXG4gKlxuICogQGNhdGVnb3J5IGV2ZW50XG4gKi9cbmV4cG9ydCBjbGFzcyBSZXRhaW5FbWl0dGVyIGV4dGVuZHMgRW1pdHRlciB7XG4gICAgLyoqIFByZS1yZXNvbHZlZCBkYXRhLiBAaGlkZGVuICovXG4gICAgX2V2ZW50ID0gUmV0YWluRW1pdHRlclVuZGVmaW5lZDtcbiAgICAvKipcbiAgICAgKiBFbWl0dGVyIHRhcmdldCB1c2VkIHRvIHJlc2V0IHRoZSBzdGF0ZSBvZiB0aGlzIGVtaXR0ZXIuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX3Jlc2V0O1xuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBhZGQobGlzdGVuZXIsIG9wdHMpIHtcbiAgICAgICAgY29uc3QgaW1tZWRpYXRlID0gb3B0cz8uaW1tZWRpYXRlID8/IHRydWU7XG4gICAgICAgIGlmICh0aGlzLl9ldmVudCAhPT0gUmV0YWluRW1pdHRlclVuZGVmaW5lZCAmJiBpbW1lZGlhdGUpIHtcbiAgICAgICAgICAgIGxpc3RlbmVyKC4uLnRoaXMuX2V2ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlci5hZGQobGlzdGVuZXIsIG9wdHMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGlzdGVuZXIgVGhlIGNhbGxiYWNrIHRvIHJlZ2lzdGVyLlxuICAgICAqIEBwYXJhbSBpbW1lZGlhdGUgSWYgYHRydWVgLCBkaXJlY3RseSByZXNvbHZlcyBpZiB0aGUgZW1pdHRlciByZXRhaW5zIGEgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgb25jZShsaXN0ZW5lciwgaW1tZWRpYXRlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFkZChsaXN0ZW5lciwgeyBvbmNlOiB0cnVlLCBpbW1lZGlhdGUgfSk7XG4gICAgfVxuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBub3RpZnkoLi4uZGF0YSkge1xuICAgICAgICB0aGlzLl9ldmVudCA9IGRhdGE7XG4gICAgICAgIHN1cGVyLm5vdGlmeSguLi5kYXRhKTtcbiAgICB9XG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIG5vdGlmeVVuc2FmZSguLi5kYXRhKSB7XG4gICAgICAgIHRoaXMuX2V2ZW50ID0gZGF0YTtcbiAgICAgICAgc3VwZXIubm90aWZ5VW5zYWZlKC4uLmRhdGEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldCB0aGUgc3RhdGUgb2YgdGhlIGVtaXR0ZXIuXG4gICAgICpcbiAgICAgKiBGdXJ0aGVyIGNhbGwgdG8ge0BsaW5rIEVtaXR0ZXIuYWRkfSB3aWxsIG5vdCBhdXRvbWF0aWNhbGx5IHJlc29sdmUsXG4gICAgICogdW50aWwgYSBuZXcgY2FsbCB0byB7QGxpbmsgRW1pdHRlci5ub3RpZnl9IGlzIHBlcmZvcm1lZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKVxuICAgICAqL1xuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLl9ldmVudCA9IFJldGFpbkVtaXR0ZXJVbmRlZmluZWQ7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0aGUgcmV0YWluZWQgZGF0YSwgb3IgYHVuZGVmaW5lZGAgaWYgbm8gZGF0YSB3YXMgcmV0YWluZWQuICovXG4gICAgZ2V0IGRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzRGF0YVJldGFpbmVkID8gdGhpcy5fZXZlbnQgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKiBgdHJ1ZWAgaWYgZGF0YSBpcyByZXRhaW5lZCBmcm9tIHRoZSBsYXN0IGV2ZW50LCBgZmFsc2VgIG90aGVyd2lzZS4gKi9cbiAgICBnZXQgaXNEYXRhUmV0YWluZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ldmVudCAhPT0gUmV0YWluRW1pdHRlclVuZGVmaW5lZDtcbiAgICB9XG59XG4iLCAiLyoqXG4gKiBDcmVhdGUgYSBwcm94eSB0aHJvd2luZyBkZXN0cm95ZWQgZXJyb3JzIHVwb24gYWNjZXNzLlxuICpcbiAqIEBwYXJhbSB0eXBlIFRoZSB0eXBlIHRvIGRpc3BsYXkgdXBvbiBlcnJvclxuICogQHJldHVybnMgVGhlIHByb3h5IGluc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZURlc3Ryb3llZFByb3h5KGhvc3QsIHR5cGUpIHtcbiAgICByZXR1cm4gbmV3IFByb3h5KHt9LCB7XG4gICAgICAgIGdldChfLCBwYXJhbSkge1xuICAgICAgICAgICAgaWYgKHBhcmFtID09PSAnaXNEZXN0cm95ZWQnKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcmVhZCAnJHtwYXJhbX0nIG9mIGRlc3Ryb3llZCAnJHt0eXBlLm5hbWV9JyByZXNvdXJjZSBmcm9tICR7aG9zdH1gKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0KF8sIHBhcmFtKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCB3cml0ZSAnJHtwYXJhbX0nIG9mIGRlc3Ryb3llZCAnJHt0eXBlLm5hbWV9JyByZXNvdXJjZSBmcm9tICR7aG9zdH1gKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgZW5naW5lIHJlc291cmNlcywgc3VjaCBhczpcbiAqIC0ge0BsaW5rIFRleHR1cmV9XG4gKiAtIHtAbGluayBNZXNofVxuICogLSB7QGxpbmsgTWF0ZXJpYWx9XG4gKlxuICogQHNpbmNlIDEuMi4wXG4gKi9cbmV4cG9ydCBjbGFzcyBSZXNvdXJjZSB7XG4gICAgLyoqIFJlbGF0aXZlIGluZGV4IGluIHRoZSBob3N0LiBAaGlkZGVuICovXG4gICAgX2luZGV4ID0gLTE7XG4gICAgLyoqIEZvciBjb21wYXRpYmlsaXR5IHdpdGggU2NlbmVSZXNvdXJjZS4gQGhpZGRlbiAqL1xuICAgIF9pZCA9IC0xO1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgX2VuZ2luZTtcbiAgICBjb25zdHJ1Y3RvcihlbmdpbmUsIGluZGV4KSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZSA9IGVuZ2luZTtcbiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDtcbiAgICAgICAgdGhpcy5faWQgPSBpbmRleDtcbiAgICB9XG4gICAgLyoqIEhvc3RpbmcgZW5naW5lIGluc3RhbmNlLiAqL1xuICAgIGdldCBlbmdpbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmdpbmU7XG4gICAgfVxuICAgIC8qKiBJbmRleCBvZiB0aGlzIHJlc291cmNlIGluIHRoZSB7QGxpbmsgU2NlbmV9J3MgbWFuYWdlci4gKi9cbiAgICBnZXQgaW5kZXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbmRleDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGVxdWFsaXR5IGJ5IGNvbXBhcmluZyBpZHMgYW5kICoqbm90KiogdGhlIEphdmFTY3JpcHQgcmVmZXJlbmNlLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIEphdmFTY3JpcHQgcmVmZXJlbmNlIGNvbXBhcmlzb24gaW5zdGVhZDpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgbWVzaEEgPSBlbmdpbmUubWVzaGVzLmNyZWF0ZSh7dmVydGV4Q291bnQ6IDF9KTtcbiAgICAgKiBjb25zdCBtZXNoQiA9IGVuZ2luZS5tZXNoZXMuY3JlYXRlKHt2ZXJ0ZXhDb3VudDogMX0pO1xuICAgICAqIGNvbnN0IG1lc2hDID0gbWVzaEI7XG4gICAgICogY29uc29sZS5sb2cobWVzaEEgPT09IG1lc2hCKTsgLy8gZmFsc2VcbiAgICAgKiBjb25zb2xlLmxvZyhtZXNoQSA9PT0gbWVzaEEpOyAvLyB0cnVlXG4gICAgICogY29uc29sZS5sb2cobWVzaEIgPT09IG1lc2hDKTsgLy8gdHJ1ZVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGVxdWFscyhvdGhlcikge1xuICAgICAgICBpZiAoIW90aGVyKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcy5faW5kZXggPT09IG90aGVyLl9pbmRleDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogYHRydWVgIGlmIHRoZSBvYmplY3QgaXMgZGVzdHJveWVkLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIElmIHtAbGluayBXb25kZXJsYW5kRW5naW5lLmVyYXNlUHJvdG90eXBlT25EZXN0cm95fSBpcyBgdHJ1ZWAsXG4gICAgICogcmVhZGluZyBhIGNsYXNzIGF0dHJpYnV0ZSAvIG1ldGhvZCB3aWxsIHRocm93LlxuICAgICAqL1xuICAgIGdldCBpc0Rlc3Ryb3llZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2luZGV4IDw9IDA7XG4gICAgfVxufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBzY2VuZSByZXNvdXJjZXMsIHN1Y2ggYXM6XG4gKiAgKiAtIHtAbGluayBUZXh0dXJlfVxuICogLSB7QGxpbmsgTWVzaH1cbiAqIC0ge0BsaW5rIE1hdGVyaWFsfVxuICogLSB7QGxpbmsgU2tpbn1cbiAqIC0ge0BsaW5rIEFuaW1hdGlvbn1cbiAqXG4gKiBAc2luY2UgMS4yLjBcbiAqL1xuZXhwb3J0IGNsYXNzIFNjZW5lUmVzb3VyY2Uge1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgc3RhdGljIF9wYWNrKHNjZW5lLCBpbmRleCkge1xuICAgICAgICByZXR1cm4gKHNjZW5lIDw8IDIyKSB8IGluZGV4O1xuICAgIH1cbiAgICAvKiogUmVsYXRpdmUgaW5kZXggaW4gdGhlIGhvc3QuIEBoaWRkZW4gKi9cbiAgICBfaW5kZXggPSAtMTtcbiAgICAvKiogRm9yIGNvbXBhdGliaWxpdHkgd2l0aCBTY2VuZVJlc291cmNlLiBAaGlkZGVuICovXG4gICAgX2lkID0gLTE7XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBfc2NlbmU7XG4gICAgY29uc3RydWN0b3Ioc2NlbmUsIGluZGV4KSB7XG4gICAgICAgIHRoaXMuX3NjZW5lID0gc2NlbmU7XG4gICAgICAgIHRoaXMuX2luZGV4ID0gaW5kZXg7XG4gICAgICAgIHRoaXMuX2lkID0gU2NlbmVSZXNvdXJjZS5fcGFjayhzY2VuZS5faW5kZXgsIGluZGV4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGVxdWFsaXR5IGJ5IGNvbXBhcmluZyBpZHMgYW5kICoqbm90KiogdGhlIEphdmFTY3JpcHQgcmVmZXJlbmNlLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIEphdmFTY3JpcHQgcmVmZXJlbmNlIGNvbXBhcmlzb24gaW5zdGVhZDpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgbWVzaEEgPSBlbmdpbmUubWVzaGVzLmNyZWF0ZSh7dmVydGV4Q291bnQ6IDF9KTtcbiAgICAgKiBjb25zdCBtZXNoQiA9IGVuZ2luZS5tZXNoZXMuY3JlYXRlKHt2ZXJ0ZXhDb3VudDogMX0pO1xuICAgICAqIGNvbnN0IG1lc2hDID0gbWVzaEI7XG4gICAgICogY29uc29sZS5sb2cobWVzaEEgPT09IG1lc2hCKTsgLy8gZmFsc2VcbiAgICAgKiBjb25zb2xlLmxvZyhtZXNoQSA9PT0gbWVzaEEpOyAvLyB0cnVlXG4gICAgICogY29uc29sZS5sb2cobWVzaEIgPT09IG1lc2hDKTsgLy8gdHJ1ZVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGVxdWFscyhvdGhlcikge1xuICAgICAgICBpZiAoIW90aGVyKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcy5faWQgPT09IG90aGVyLl9pZDtcbiAgICB9XG4gICAgLyoqIEhvc3RpbmcgaW5zdGFuY2UuICovXG4gICAgZ2V0IHNjZW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NlbmU7XG4gICAgfVxuICAgIC8qKiBIb3N0aW5nIGVuZ2luZSBpbnN0YW5jZS4gKi9cbiAgICBnZXQgZW5naW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NlbmUuZW5naW5lO1xuICAgIH1cbiAgICAvKiogSW5kZXggb2YgdGhpcyByZXNvdXJjZSBpbiB0aGUge0BsaW5rIFNjZW5lfSdzIG1hbmFnZXIuICovXG4gICAgZ2V0IGluZGV4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5kZXg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGB0cnVlYCBpZiB0aGUgb2JqZWN0IGlzIGRlc3Ryb3llZCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBJZiB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5lcmFzZVByb3RvdHlwZU9uRGVzdHJveX0gaXMgYHRydWVgLFxuICAgICAqIHJlYWRpbmcgYSBjbGFzcyBhdHRyaWJ1dGUgLyBtZXRob2Qgd2lsbCB0aHJvdy5cbiAgICAgKi9cbiAgICBnZXQgaXNEZXN0cm95ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pZCA8PSAwO1xuICAgIH1cbn1cbi8qKlxuICogTWFuYWdlciBmb3IgcmVzb3VyY2VzLlxuICpcbiAqIFJlc291cmNlcyBhcmUgYWNjZXNzZWQgdmlhIHRoZSBlbmdpbmUgdGhleSBiZWxvbmcgdG8uXG4gKlxuICogQHNlZSB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS50ZXh0dXJlc30sIHtAbGluayBXb25kZXJsYW5kRW5naW5lLm1lc2hlc30sXG4gKiBhbmQge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUubWF0ZXJpYWxzfS5cbiAqXG4gKiBAc2luY2UgMS4yLjBcbiAqL1xuZXhwb3J0IGNsYXNzIFJlc291cmNlTWFuYWdlciB7XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBfaG9zdDtcbiAgICAvKiogQ2FjaGUuIEBoaWRkZW4gKi9cbiAgICBfY2FjaGUgPSBbXTtcbiAgICAvKiogUmVzb3VyY2UgY2xhc3MuIEBoaWRkZW4gKi9cbiAgICBfdGVtcGxhdGU7XG4gICAgLyoqIERlc3RydWN0b3IgcHJveHksIHVzZWQgaWYge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUuZXJhc2VQcm90b3R5cGVPbkRlc3Ryb3l9IGlzIGB0cnVlYC4gQGhpZGRlbiAqL1xuICAgIF9kZXN0cnVjdG9yID0gbnVsbDtcbiAgICBfZW5naW5lO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBtYW5hZ2VyXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaG9zdCBUaGUgaG9zdCBjb250YWluaW5nIHRoZSBtYW5hZ2VkIHJlc291cmNlcy5cbiAgICAgKiBAcGFyYW0gQ2xhc3MgVGhlIGNsYXNzIHRvIGluc3RhbnRpYXRlIHdoZW4gd3JhcHBpbmcgYW4gaW5kZXguXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoaG9zdCwgQ2xhc3MpIHtcbiAgICAgICAgdGhpcy5faG9zdCA9IGhvc3Q7XG4gICAgICAgIHRoaXMuX3RlbXBsYXRlID0gQ2xhc3M7XG4gICAgICAgIHRoaXMuX2VuZ2luZSA9IGhvc3QuZW5naW5lID8/IGhvc3Q7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdyYXAgdGhlIGluZGV4IGludG8gYSByZXNvdXJjZSBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoZSBpbmRleCBpcyByZWxhdGl2ZSB0byB0aGUgaG9zdCwgaS5lLiwgZG9lc24ndCBwYWNrIHRoZSBob3N0IGluZGV4IChpZiBhbnkpLlxuICAgICAqXG4gICAgICogQHBhcmFtIGluZGV4IFRoZSByZXNvdXJjZSBpbmRleC5cbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIHdyYXAoaW5kZXgpIHtcbiAgICAgICAgaWYgKGluZGV4IDw9IDApXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgdGV4dHVyZSA9IHRoaXMuX2NhY2hlW2luZGV4XSA/P1xuICAgICAgICAgICAgKHRoaXMuX2NhY2hlW2luZGV4XSA9IG5ldyB0aGlzLl90ZW1wbGF0ZSh0aGlzLl9ob3N0LCBpbmRleCkpO1xuICAgICAgICByZXR1cm4gdGV4dHVyZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgdGhlIHJlc291cmNlIGF0IHRoZSBnaXZlbiBpbmRleC5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoZSBpbmRleCBpcyByZWxhdGl2ZSB0byB0aGUgaG9zdCwgaS5lLiwgZG9lc24ndCBwYWNrIHRoZSBob3N0IGluZGV4LlxuICAgICAqL1xuICAgIGdldChpbmRleCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVbaW5kZXhdID8/IG51bGw7XG4gICAgfVxuICAgIC8qKiBOdW1iZXIgb2YgdGV4dHVyZXMgYWxsb2NhdGVkIGluIHRoZSBtYW5hZ2VyLiAqL1xuICAgIGdldCBhbGxvY2F0ZWRDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlLmxlbmd0aDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTnVtYmVyIG9mIHRleHR1cmVzIGluIHRoZSBtYW5hZ2VyLlxuICAgICAqXG4gICAgICogQG5vdGUgRm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMsIGF2b2lkIGNhbGxpbmcgdGhpcyBtZXRob2Qgd2hlbiBwb3NzaWJsZS5cbiAgICAgKi9cbiAgICBnZXQgY291bnQoKSB7XG4gICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgcmVzIG9mIHRoaXMuX2NhY2hlKSB7XG4gICAgICAgICAgICBpZiAocmVzICYmIHJlcy5pbmRleCA+PSAwKVxuICAgICAgICAgICAgICAgICsrY291bnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgIH1cbiAgICAvKiogSG9zdGluZyBlbmdpbmUgaW5zdGFuY2UuICovXG4gICAgZ2V0IGVuZ2luZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVzdHJveSB0aGUgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIG1ldGhvZCB0YWtlcyBjYXJlIG9mIHRoZSBwcm90b3R5cGUgZGVzdHJ1Y3Rpb24uXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX2Rlc3Ryb3koaW5zdGFuY2UpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBpbnN0YW5jZS5pbmRleDtcbiAgICAgICAgaW5zdGFuY2UuX2luZGV4ID0gLTE7XG4gICAgICAgIGluc3RhbmNlLl9pZCA9IC0xO1xuICAgICAgICB0aGlzLl9jYWNoZVtpbmRleF0gPSBudWxsO1xuICAgICAgICBpZiAoIXRoaXMuZW5naW5lLmVyYXNlUHJvdG90eXBlT25EZXN0cm95KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoIXRoaXMuX2Rlc3RydWN0b3IpXG4gICAgICAgICAgICB0aGlzLl9kZXN0cnVjdG9yID0gY3JlYXRlRGVzdHJveWVkUHJveHkodGhpcy5faG9zdCwgdGhpcy5fdGVtcGxhdGUpO1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoaW5zdGFuY2UsIHRoaXMuX2Rlc3RydWN0b3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXJrIGFsbCBpbnN0YW5jZXMgYXMgZGVzdHJveWVkLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9jbGVhcigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuZ2luZS5lcmFzZVByb3RvdHlwZU9uRGVzdHJveSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9jYWNoZS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLl9jYWNoZVtpXTtcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZSlcbiAgICAgICAgICAgICAgICB0aGlzLl9kZXN0cm95KGluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jYWNoZS5sZW5ndGggPSAwO1xuICAgIH1cbn1cbiIsICIvKipcbiAqIFNjaGVkdWxlIGEgdGltZW91dCwgcmVzb2x2aW5nIGluIGB0aW1lYCBtaWxsaXNlY29uZHMuXG4gKlxuICogQG5vdGUgYHNldFRpbWVvdXRgIGJlaW5nIGEgbWFjcm8tdGFzaywgdGhpcyBtZXRob2QgY2FuXG4gKiBiZSB1c2UgYXMgYSBkZWJvdW5jZSBjYWxsLlxuICpcbiAqIEBwYXJhbSB0aW1lIFRoZSB0aW1lIHVudGlsIGl0IHJlc29sdmVzLCBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcmV0dXJucyBBIHByb21pc2UgcmVzb2x2aW5nIGluIGB0aW1lYCBtcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRpbWVvdXQodGltZSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzKSA9PiBzZXRUaW1lb3V0KHJlcywgdGltZSkpO1xufVxuLyoqXG4gKiBDbGFtcCB0aGUgdmFsdWUgaW4gdGhlIHJhbmdlIFttaW47IG1heF0uXG4gKlxuICogQHBhcmFtIHZhbCBUaGUgdmFsdWUgdG8gY2xhbXAuXG4gKiBAcGFyYW0gbWluIFRoZSBtaW5pbXVtIHZhbHVlIChpbmNsdXNpdmUpLlxuICogQHBhcmFtIG1heCBUaGUgbWF4aW11bSB2YWx1ZSAoaW5jbHVzaXZlKS5cbiAqIEByZXR1cm5zIFRoZSBjbGFtcGVkIHZhbHVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xhbXAodmFsLCBtaW4sIG1heCkge1xuICAgIHJldHVybiBNYXRoLm1heChNYXRoLm1pbihtYXgsIHZhbCksIG1pbik7XG59XG4vKipcbiAqIENhcGl0YWxpemUgdGhlIGZpcnN0IGxldHRlciBpbiBhIHN0cmluZy5cbiAqXG4gKiBAbm90ZSBUaGUgc3RyaW5nIG11c3QgYmUgVVRGLTguXG4gKlxuICogQHBhcmFtIHN0ciBUaGUgc3RyaW5nIHRvIGZvcm1hdC5cbiAqIEByZXR1cm5zIFRoZSBzdHJpbmcgd2l0aCB0aGUgZmlyc3QgbGV0dGVyIGNhcGl0YWxpemVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FwaXRhbGl6ZUZpcnN0VVRGOChzdHIpIHtcbiAgICByZXR1cm4gYCR7c3RyWzBdLnRvVXBwZXJDYXNlKCl9JHtzdHIuc3Vic3RyaW5nKDEpfWA7XG59XG4vKipcbiAqIENyZWF0ZSBhIHByb3h5IHRocm93aW5nIGRlc3Ryb3llZCBlcnJvcnMgdXBvbiBhY2Nlc3MuXG4gKlxuICogQHBhcmFtIHR5cGUgVGhlIHR5cGUgdG8gZGlzcGxheSB1cG9uIGVycm9yXG4gKiBAcmV0dXJucyBUaGUgcHJveHkgaW5zdGFuY2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURlc3Ryb3llZFByb3h5KHR5cGUpIHtcbiAgICByZXR1cm4gbmV3IFByb3h5KHt9LCB7XG4gICAgICAgIGdldChfLCBwYXJhbSkge1xuICAgICAgICAgICAgaWYgKHBhcmFtID09PSAnaXNEZXN0cm95ZWQnKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcmVhZCAnJHtwYXJhbX0nIG9mIGRlc3Ryb3llZCAke3R5cGV9YCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldChfLCBwYXJhbSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3Qgd3JpdGUgJyR7cGFyYW19JyBvZiBkZXN0cm95ZWQgJHt0eXBlfWApO1xuICAgICAgICB9LFxuICAgIH0pO1xufVxuIiwgIi8qKlxuICogVHlwZXNcbiAqL1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgbmF0aXZlUHJvcGVydHksIGVudW1lcmFibGUgfSBmcm9tICcuL2RlY29yYXRvcnMuanMnO1xuaW1wb3J0IHsgaXNJbWFnZUxpa2UsIGlzTnVtYmVyLCBpc1N0cmluZyB9IGZyb20gJy4vdXRpbHMvb2JqZWN0LmpzJztcbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICcuL3V0aWxzL2V2ZW50LmpzJztcbmltcG9ydCB7IFR5cGUsIGRlZmF1bHRQcm9wZXJ0eUNsb25lciB9IGZyb20gJy4vcHJvcGVydHkuanMnO1xuaW1wb3J0IHsgUmVzb3VyY2UsIFNjZW5lUmVzb3VyY2UgfSBmcm9tICcuL3Jlc291cmNlcy9yZXNvdXJjZS5qcyc7XG5pbXBvcnQgeyBQcmVmYWIgfSBmcm9tICcuL3ByZWZhYi5qcyc7XG5pbXBvcnQgeyBjcmVhdGVEZXN0cm95ZWRQcm94eSB9IGZyb20gJy4vdXRpbHMvbWlzYy5qcyc7XG4vKipcbiAqIFdvbmRlcmxhbmQgRW5naW5lIEFQSVxuICogQG5hbWVzcGFjZSBXTFxuICovXG4vKipcbiAqIERlZmF1bHQgc2V0IG9mIGxvZ2dpbmcgdGFncyB1c2VkIGJ5IHRoZSBBUEkuXG4gKi9cbmV4cG9ydCB2YXIgTG9nVGFnO1xuKGZ1bmN0aW9uIChMb2dUYWcpIHtcbiAgICAvKiogSW5pdGlhbGl6YXRpb24sIGNvbXBvbmVudCByZWdpc3RyYXRpb24sIGV0Yy4uLiAqL1xuICAgIExvZ1RhZ1tMb2dUYWdbXCJFbmdpbmVcIl0gPSAwXSA9IFwiRW5naW5lXCI7XG4gICAgLyoqIFNjZW5lIGxvYWRpbmcgKi9cbiAgICBMb2dUYWdbTG9nVGFnW1wiU2NlbmVcIl0gPSAxXSA9IFwiU2NlbmVcIjtcbiAgICAvKiogQ29tcG9uZW50IGluaXQsIHVwZGF0ZSwgZXRjLi4uICovXG4gICAgTG9nVGFnW0xvZ1RhZ1tcIkNvbXBvbmVudFwiXSA9IDJdID0gXCJDb21wb25lbnRcIjtcbn0pKExvZ1RhZyB8fCAoTG9nVGFnID0ge30pKTtcbi8qKlxuICogQ29sbGlkZXIgdHlwZSBlbnVtIGZvciB7QGxpbmsgQ29sbGlzaW9uQ29tcG9uZW50fS5cbiAqL1xuZXhwb3J0IHZhciBDb2xsaWRlcjtcbihmdW5jdGlvbiAoQ29sbGlkZXIpIHtcbiAgICAvKipcbiAgICAgKiAqKlNwaGVyZSBDb2xsaWRlcioqOlxuICAgICAqXG4gICAgICogU2ltcGxlc3QgYW5kIG1vc3QgcGVyZm9ybWFudCBjb2xsaXNpb24gc2hhcGUuIElmIHRoaXMgdHlwZSBpcyBzZXQgb24gYVxuICAgICAqIHtAbGluayBDb2xsaXNpb25Db21wb25lbnR9LCBvbmx5IHRoZSBmaXJzdCBjb21wb25lbnQgb2ZcbiAgICAgKiB7QGxpbmsgQ29sbGlzaW9uQ29tcG9uZW50I2V4dGVudHN9IHdpbGwgYmUgdXNlZCB0byBkZXRlcm1pbmUgdGhlIHJhZGl1cy5cbiAgICAgKi9cbiAgICBDb2xsaWRlcltDb2xsaWRlcltcIlNwaGVyZVwiXSA9IDBdID0gXCJTcGhlcmVcIjtcbiAgICAvKipcbiAgICAgKiAqKkF4aXMgQWxpZ25lZCBCb3VuZGluZyBCb3ggQ29sbGlkZXIqKjpcbiAgICAgKlxuICAgICAqIEJveCB0aGF0IGlzIGFsd2F5cyBhbGlnbmVkIHRvIFhZWiBheGlzLiBJdCBjYW5ub3QgYmUgcm90YXRlZCBidXQgaXMgbW9yZVxuICAgICAqIGVmZmljaWVudCB0aGFuIHtAbGluayBDb2xsaWRlci5Cb3h9LlxuICAgICAqL1xuICAgIENvbGxpZGVyW0NvbGxpZGVyW1wiQXhpc0FsaWduZWRCb3hcIl0gPSAxXSA9IFwiQXhpc0FsaWduZWRCb3hcIjtcbiAgICAvKipcbiAgICAgKiAqKkFsaWduZWQgQm91bmRpbmcgQm94IENvbGxpZGVyKio6XG4gICAgICpcbiAgICAgKiBCb3ggdGhhdCBtYXRjaGVzIHRoZSBvYmplY3QncyByb3RhdGlvbiBhbmQgdHJhbnNsYXRpb24gY29ycmVjdGx5LiBUaGlzXG4gICAgICogaXMgdGhlIGxlYXN0IGVmZmljaWVudCBjb2xsaWRlciBhbmQgc2hvdWxkIG9ubHkgYmUgY2hvc2VuIG92ZXJcbiAgICAgKiB7QGxpbmsgQ29sbGlkZXIuU3BoZXJlfSBhbmQge0BsaW5rIENvbGxpZGVyLkF4aXNBbGlnbmVkQm94fSBpZiByZWFsbHlcbiAgICAgKiBuZWNlc3NhcnkuXG4gICAgICovXG4gICAgQ29sbGlkZXJbQ29sbGlkZXJbXCJCb3hcIl0gPSAyXSA9IFwiQm94XCI7XG59KShDb2xsaWRlciB8fCAoQ29sbGlkZXIgPSB7fSkpO1xuLyoqXG4gKiBBbGlnbm1lbnQgdHlwZSBlbnVtIGZvciB7QGxpbmsgVGV4dENvbXBvbmVudH0uXG4gKi9cbmV4cG9ydCB2YXIgQWxpZ25tZW50O1xuKGZ1bmN0aW9uIChBbGlnbm1lbnQpIHtcbiAgICAvKiogVGV4dCBzdGFydCBpcyBhdCBvYmplY3Qgb3JpZ2luICovXG4gICAgQWxpZ25tZW50W0FsaWdubWVudFtcIkxlZnRcIl0gPSAwXSA9IFwiTGVmdFwiO1xuICAgIC8qKiBUZXh0IGNlbnRlciBpcyBhdCBvYmplY3Qgb3JpZ2luICovXG4gICAgQWxpZ25tZW50W0FsaWdubWVudFtcIkNlbnRlclwiXSA9IDFdID0gXCJDZW50ZXJcIjtcbiAgICAvKiogVGV4dCBlbmQgaXMgYXQgb2JqZWN0IG9yaWdpbiAqL1xuICAgIEFsaWdubWVudFtBbGlnbm1lbnRbXCJSaWdodFwiXSA9IDJdID0gXCJSaWdodFwiO1xufSkoQWxpZ25tZW50IHx8IChBbGlnbm1lbnQgPSB7fSkpO1xuLyoqXG4gKiBWZXJ0aWNhbCBhbGlnbm1lbnQgdHlwZSBlbnVtIGZvciB7QGxpbmsgVGV4dENvbXBvbmVudH0uXG4gKi9cbmV4cG9ydCB2YXIgVmVydGljYWxBbGlnbm1lbnQ7XG4oZnVuY3Rpb24gKFZlcnRpY2FsQWxpZ25tZW50KSB7XG4gICAgLyoqIFRleHQgbGluZSBpcyBhdCBvYmplY3Qgb3JpZ2luICovXG4gICAgVmVydGljYWxBbGlnbm1lbnRbVmVydGljYWxBbGlnbm1lbnRbXCJMaW5lXCJdID0gMF0gPSBcIkxpbmVcIjtcbiAgICAvKiogVGV4dCBtaWRkbGUgaXMgYXQgb2JqZWN0IG9yaWdpbiAqL1xuICAgIFZlcnRpY2FsQWxpZ25tZW50W1ZlcnRpY2FsQWxpZ25tZW50W1wiTWlkZGxlXCJdID0gMV0gPSBcIk1pZGRsZVwiO1xuICAgIC8qKiBUZXh0IHRvcCBpcyBhdCBvYmplY3Qgb3JpZ2luICovXG4gICAgVmVydGljYWxBbGlnbm1lbnRbVmVydGljYWxBbGlnbm1lbnRbXCJUb3BcIl0gPSAyXSA9IFwiVG9wXCI7XG4gICAgLyoqIFRleHQgYm90dG9tIGlzIGF0IG9iamVjdCBvcmlnaW4gKi9cbiAgICBWZXJ0aWNhbEFsaWdubWVudFtWZXJ0aWNhbEFsaWdubWVudFtcIkJvdHRvbVwiXSA9IDNdID0gXCJCb3R0b21cIjtcbn0pKFZlcnRpY2FsQWxpZ25tZW50IHx8IChWZXJ0aWNhbEFsaWdubWVudCA9IHt9KSk7XG4vKipcbiAqIEp1c3RpZmljYXRpb24gdHlwZSBlbnVtIGZvciB7QGxpbmsgVGV4dENvbXBvbmVudH0uXG4gKlxuICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgVmVydGljYWxBbGlnbm1lbnR9IGluc3RlYWQuXG4gKi9cbmV4cG9ydCBjb25zdCBKdXN0aWZpY2F0aW9uID0gVmVydGljYWxBbGlnbm1lbnQ7XG4vKipcbiAqIEVmZmVjdCB0eXBlIGVudW0gZm9yIHtAbGluayBUZXh0Q29tcG9uZW50fS5cbiAqL1xuZXhwb3J0IHZhciBUZXh0RWZmZWN0O1xuKGZ1bmN0aW9uIChUZXh0RWZmZWN0KSB7XG4gICAgLyoqIFRleHQgaXMgcmVuZGVyZWQgbm9ybWFsbHkgKi9cbiAgICBUZXh0RWZmZWN0W1RleHRFZmZlY3RbXCJOb25lXCJdID0gMF0gPSBcIk5vbmVcIjtcbiAgICAvKiogVGV4dCBpcyByZW5kZXJlZCB3aXRoIGFuIG91dGxpbmUgKi9cbiAgICBUZXh0RWZmZWN0W1RleHRFZmZlY3RbXCJPdXRsaW5lXCJdID0gMV0gPSBcIk91dGxpbmVcIjtcbn0pKFRleHRFZmZlY3QgfHwgKFRleHRFZmZlY3QgPSB7fSkpO1xuLyoqXG4gKiBXcmFwIG1vZGUgZW51bSBmb3Ige0BsaW5rIFRleHRDb21wb25lbnR9LlxuICpcbiAqIEBzaW5jZSAxLjIuMVxuICovXG5leHBvcnQgdmFyIFRleHRXcmFwTW9kZTtcbihmdW5jdGlvbiAoVGV4dFdyYXBNb2RlKSB7XG4gICAgLyoqIFRleHQgZG9lc24ndCB3cmFwIGF1dG9tYXRpY2FsbHksIG9ubHkgd2l0aCBleHBsaWNpdCBuZXdsaW5lICovXG4gICAgVGV4dFdyYXBNb2RlW1RleHRXcmFwTW9kZVtcIk5vbmVcIl0gPSAwXSA9IFwiTm9uZVwiO1xuICAgIC8qKiBUZXh0IHdyYXBzIGF0IHdvcmQgYm91bmRhcmllcyAqL1xuICAgIFRleHRXcmFwTW9kZVtUZXh0V3JhcE1vZGVbXCJTb2Z0XCJdID0gMV0gPSBcIlNvZnRcIjtcbiAgICAvKiogVGV4dCB3cmFwcyBhbnl3aGVyZSAqL1xuICAgIFRleHRXcmFwTW9kZVtUZXh0V3JhcE1vZGVbXCJIYXJkXCJdID0gMl0gPSBcIkhhcmRcIjtcbiAgICAvKiogVGV4dCBpcyBjdXQgb2ZmICovXG4gICAgVGV4dFdyYXBNb2RlW1RleHRXcmFwTW9kZVtcIkNsaXBcIl0gPSAzXSA9IFwiQ2xpcFwiO1xufSkoVGV4dFdyYXBNb2RlIHx8IChUZXh0V3JhcE1vZGUgPSB7fSkpO1xuLyoqXG4gKiBJbnB1dCB0eXBlIGVudW0gZm9yIHtAbGluayBJbnB1dENvbXBvbmVudH0uXG4gKi9cbmV4cG9ydCB2YXIgSW5wdXRUeXBlO1xuKGZ1bmN0aW9uIChJbnB1dFR5cGUpIHtcbiAgICAvKiogSGVhZCBpbnB1dCAqL1xuICAgIElucHV0VHlwZVtJbnB1dFR5cGVbXCJIZWFkXCJdID0gMF0gPSBcIkhlYWRcIjtcbiAgICAvKiogTGVmdCBleWUgaW5wdXQgKi9cbiAgICBJbnB1dFR5cGVbSW5wdXRUeXBlW1wiRXllTGVmdFwiXSA9IDFdID0gXCJFeWVMZWZ0XCI7XG4gICAgLyoqIFJpZ2h0IGV5ZSBpbnB1dCAqL1xuICAgIElucHV0VHlwZVtJbnB1dFR5cGVbXCJFeWVSaWdodFwiXSA9IDJdID0gXCJFeWVSaWdodFwiO1xuICAgIC8qKiBMZWZ0IGNvbnRyb2xsZXIgaW5wdXQgKi9cbiAgICBJbnB1dFR5cGVbSW5wdXRUeXBlW1wiQ29udHJvbGxlckxlZnRcIl0gPSAzXSA9IFwiQ29udHJvbGxlckxlZnRcIjtcbiAgICAvKiogUmlnaHQgY29udHJvbGxlciBpbnB1dCAqL1xuICAgIElucHV0VHlwZVtJbnB1dFR5cGVbXCJDb250cm9sbGVyUmlnaHRcIl0gPSA0XSA9IFwiQ29udHJvbGxlclJpZ2h0XCI7XG4gICAgLyoqIExlZnQgcmF5IGlucHV0ICovXG4gICAgSW5wdXRUeXBlW0lucHV0VHlwZVtcIlJheUxlZnRcIl0gPSA1XSA9IFwiUmF5TGVmdFwiO1xuICAgIC8qKiBSaWdodCByYXkgaW5wdXQgKi9cbiAgICBJbnB1dFR5cGVbSW5wdXRUeXBlW1wiUmF5UmlnaHRcIl0gPSA2XSA9IFwiUmF5UmlnaHRcIjtcbn0pKElucHV0VHlwZSB8fCAoSW5wdXRUeXBlID0ge30pKTtcbi8qKlxuICogTGlnaHQgdHlwZSBlbnVtIGZvciB7QGxpbmsgTGlnaHRDb21wb25lbnR9LlxuICovXG5leHBvcnQgdmFyIExpZ2h0VHlwZTtcbihmdW5jdGlvbiAoTGlnaHRUeXBlKSB7XG4gICAgLyoqIFBvaW50IGxpZ2h0ICovXG4gICAgTGlnaHRUeXBlW0xpZ2h0VHlwZVtcIlBvaW50XCJdID0gMF0gPSBcIlBvaW50XCI7XG4gICAgLyoqIFNwb3QgbGlnaHQgKi9cbiAgICBMaWdodFR5cGVbTGlnaHRUeXBlW1wiU3BvdFwiXSA9IDFdID0gXCJTcG90XCI7XG4gICAgLyoqIFN1biBsaWdodCAvIERpcmVjdGlvbmFsIGxpZ2h0ICovXG4gICAgTGlnaHRUeXBlW0xpZ2h0VHlwZVtcIlN1blwiXSA9IDJdID0gXCJTdW5cIjtcbn0pKExpZ2h0VHlwZSB8fCAoTGlnaHRUeXBlID0ge30pKTtcbi8qKlxuICogQW5pbWF0aW9uIHN0YXRlIG9mIHtAbGluayBBbmltYXRpb25Db21wb25lbnR9LlxuICovXG5leHBvcnQgdmFyIEFuaW1hdGlvblN0YXRlO1xuKGZ1bmN0aW9uIChBbmltYXRpb25TdGF0ZSkge1xuICAgIC8qKiBBbmltYXRpb24gaXMgY3VycmVudGx5IHBsYXlpbmcgKi9cbiAgICBBbmltYXRpb25TdGF0ZVtBbmltYXRpb25TdGF0ZVtcIlBsYXlpbmdcIl0gPSAwXSA9IFwiUGxheWluZ1wiO1xuICAgIC8qKiBBbmltYXRpb24gaXMgcGF1c2VkIGFuZCB3aWxsIGNvbnRpbnVlIGF0IGN1cnJlbnQgcGxheWJhY2tcbiAgICAgKiB0aW1lIG9uIHtAbGluayBBbmltYXRpb25Db21wb25lbnQjcGxheX0gKi9cbiAgICBBbmltYXRpb25TdGF0ZVtBbmltYXRpb25TdGF0ZVtcIlBhdXNlZFwiXSA9IDFdID0gXCJQYXVzZWRcIjtcbiAgICAvKiogQW5pbWF0aW9uIGlzIHN0b3BwZWQgKi9cbiAgICBBbmltYXRpb25TdGF0ZVtBbmltYXRpb25TdGF0ZVtcIlN0b3BwZWRcIl0gPSAyXSA9IFwiU3RvcHBlZFwiO1xufSkoQW5pbWF0aW9uU3RhdGUgfHwgKEFuaW1hdGlvblN0YXRlID0ge30pKTtcbi8qKlxuICogUmlnaWQgYm9keSBmb3JjZSBtb2RlIGZvciB7QGxpbmsgUGh5c1hDb21wb25lbnQjYWRkRm9yY2V9IGFuZCB7QGxpbmsgUGh5c1hDb21wb25lbnQjYWRkVG9ycXVlfS5cbiAqXG4gKiBbUGh5c1ggQVBJIFJlZmVyZW5jZV0oaHR0cHM6Ly9nYW1ld29ya3Nkb2NzLm52aWRpYS5jb20vUGh5c1gvNC4xL2RvY3VtZW50YXRpb24vcGh5c3hhcGkvZmlsZXMvc3RydWN0UHhGb3JjZU1vZGUuaHRtbClcbiAqL1xuZXhwb3J0IHZhciBGb3JjZU1vZGU7XG4oZnVuY3Rpb24gKEZvcmNlTW9kZSkge1xuICAgIC8qKiBBcHBseSBhcyBmb3JjZSAqL1xuICAgIEZvcmNlTW9kZVtGb3JjZU1vZGVbXCJGb3JjZVwiXSA9IDBdID0gXCJGb3JjZVwiO1xuICAgIC8qKiBBcHBseSBhcyBpbXB1bHNlICovXG4gICAgRm9yY2VNb2RlW0ZvcmNlTW9kZVtcIkltcHVsc2VcIl0gPSAxXSA9IFwiSW1wdWxzZVwiO1xuICAgIC8qKiBBcHBseSBhcyB2ZWxvY2l0eSBjaGFuZ2UsIG1hc3MgZGVwZW5kZW50ICovXG4gICAgRm9yY2VNb2RlW0ZvcmNlTW9kZVtcIlZlbG9jaXR5Q2hhbmdlXCJdID0gMl0gPSBcIlZlbG9jaXR5Q2hhbmdlXCI7XG4gICAgLyoqIEFwcGx5IGFzIG1hc3MgZGVwZW5kZW50IGZvcmNlICovXG4gICAgRm9yY2VNb2RlW0ZvcmNlTW9kZVtcIkFjY2VsZXJhdGlvblwiXSA9IDNdID0gXCJBY2NlbGVyYXRpb25cIjtcbn0pKEZvcmNlTW9kZSB8fCAoRm9yY2VNb2RlID0ge30pKTtcbi8qKlxuICogQ29sbGlzaW9uIGNhbGxiYWNrIGV2ZW50IHR5cGUuXG4gKi9cbmV4cG9ydCB2YXIgQ29sbGlzaW9uRXZlbnRUeXBlO1xuKGZ1bmN0aW9uIChDb2xsaXNpb25FdmVudFR5cGUpIHtcbiAgICAvKiogVG91Y2gvY29udGFjdCBkZXRlY3RlZCwgY29sbGlzaW9uICovXG4gICAgQ29sbGlzaW9uRXZlbnRUeXBlW0NvbGxpc2lvbkV2ZW50VHlwZVtcIlRvdWNoXCJdID0gMF0gPSBcIlRvdWNoXCI7XG4gICAgLyoqIFRvdWNoL2NvbnRhY3QgbG9zdCwgdW5jb2xsaWRlICovXG4gICAgQ29sbGlzaW9uRXZlbnRUeXBlW0NvbGxpc2lvbkV2ZW50VHlwZVtcIlRvdWNoTG9zdFwiXSA9IDFdID0gXCJUb3VjaExvc3RcIjtcbiAgICAvKiogVG91Y2gvY29udGFjdCB3aXRoIHRyaWdnZXIgZGV0ZWN0ZWQgKi9cbiAgICBDb2xsaXNpb25FdmVudFR5cGVbQ29sbGlzaW9uRXZlbnRUeXBlW1wiVHJpZ2dlclRvdWNoXCJdID0gMl0gPSBcIlRyaWdnZXJUb3VjaFwiO1xuICAgIC8qKiBUb3VjaC9jb250YWN0IHdpdGggdHJpZ2dlciBsb3N0ICovXG4gICAgQ29sbGlzaW9uRXZlbnRUeXBlW0NvbGxpc2lvbkV2ZW50VHlwZVtcIlRyaWdnZXJUb3VjaExvc3RcIl0gPSAzXSA9IFwiVHJpZ2dlclRvdWNoTG9zdFwiO1xufSkoQ29sbGlzaW9uRXZlbnRUeXBlIHx8IChDb2xsaXNpb25FdmVudFR5cGUgPSB7fSkpO1xuLyoqXG4gKiBSaWdpZCBib2R5IHtAbGluayBQaHlzWENvbXBvbmVudCNzaGFwZX0uXG4gKlxuICogW1BoeXNYIFNESyBHdWlkZV0oaHR0cHM6Ly9nYW1ld29ya3Nkb2NzLm52aWRpYS5jb20vUGh5c1gvNC4xL2RvY3VtZW50YXRpb24vcGh5c3hndWlkZS9NYW51YWwvR2VvbWV0cnkuaHRtbCNnZW9tZXRyeS10eXBlcykuXG4gKi9cbmV4cG9ydCB2YXIgU2hhcGU7XG4oZnVuY3Rpb24gKFNoYXBlKSB7XG4gICAgLyoqIE5vIHNoYXBlLiAqL1xuICAgIFNoYXBlW1NoYXBlW1wiTm9uZVwiXSA9IDBdID0gXCJOb25lXCI7XG4gICAgLyoqIFNwaGVyZSBzaGFwZS4gKi9cbiAgICBTaGFwZVtTaGFwZVtcIlNwaGVyZVwiXSA9IDFdID0gXCJTcGhlcmVcIjtcbiAgICAvKiogQ2Fwc3VsZSBzaGFwZS4gKi9cbiAgICBTaGFwZVtTaGFwZVtcIkNhcHN1bGVcIl0gPSAyXSA9IFwiQ2Fwc3VsZVwiO1xuICAgIC8qKiBCb3ggc2hhcGUuICovXG4gICAgU2hhcGVbU2hhcGVbXCJCb3hcIl0gPSAzXSA9IFwiQm94XCI7XG4gICAgLyoqIFBsYW5lIHNoYXBlLiAqL1xuICAgIFNoYXBlW1NoYXBlW1wiUGxhbmVcIl0gPSA0XSA9IFwiUGxhbmVcIjtcbiAgICAvKiogQ29udmV4IG1lc2ggc2hhcGUuICovXG4gICAgU2hhcGVbU2hhcGVbXCJDb252ZXhNZXNoXCJdID0gNV0gPSBcIkNvbnZleE1lc2hcIjtcbiAgICAvKiogVHJpYW5nbGUgbWVzaCBzaGFwZS4gKi9cbiAgICBTaGFwZVtTaGFwZVtcIlRyaWFuZ2xlTWVzaFwiXSA9IDZdID0gXCJUcmlhbmdsZU1lc2hcIjtcbn0pKFNoYXBlIHx8IChTaGFwZSA9IHt9KSk7XG4vKipcbiAqIE1lc2ggYXR0cmlidXRlIGVudW0uXG4gKiBAc2luY2UgMC45LjBcbiAqL1xuZXhwb3J0IHZhciBNZXNoQXR0cmlidXRlO1xuKGZ1bmN0aW9uIChNZXNoQXR0cmlidXRlKSB7XG4gICAgLyoqIFBvc2l0aW9uIGF0dHJpYnV0ZSwgMyBmbG9hdHMgKi9cbiAgICBNZXNoQXR0cmlidXRlW01lc2hBdHRyaWJ1dGVbXCJQb3NpdGlvblwiXSA9IDBdID0gXCJQb3NpdGlvblwiO1xuICAgIC8qKiBUYW5nZW50IGF0dHJpYnV0ZSwgNCBmbG9hdHMgKi9cbiAgICBNZXNoQXR0cmlidXRlW01lc2hBdHRyaWJ1dGVbXCJUYW5nZW50XCJdID0gMV0gPSBcIlRhbmdlbnRcIjtcbiAgICAvKiogTm9ybWFsIGF0dHJpYnV0ZSwgMyBmbG9hdHMgKi9cbiAgICBNZXNoQXR0cmlidXRlW01lc2hBdHRyaWJ1dGVbXCJOb3JtYWxcIl0gPSAyXSA9IFwiTm9ybWFsXCI7XG4gICAgLyoqIFRleHR1cmUgY29vcmRpbmF0ZSBhdHRyaWJ1dGUsIDIgZmxvYXRzICovXG4gICAgTWVzaEF0dHJpYnV0ZVtNZXNoQXR0cmlidXRlW1wiVGV4dHVyZUNvb3JkaW5hdGVcIl0gPSAzXSA9IFwiVGV4dHVyZUNvb3JkaW5hdGVcIjtcbiAgICAvKiogQ29sb3IgYXR0cmlidXRlLCA0IGZsb2F0cywgUkdCQSwgcmFuZ2UgYDBgIHRvIGAxYCAqL1xuICAgIE1lc2hBdHRyaWJ1dGVbTWVzaEF0dHJpYnV0ZVtcIkNvbG9yXCJdID0gNF0gPSBcIkNvbG9yXCI7XG4gICAgLyoqIEpvaW50IGlkIGF0dHJpYnV0ZSwgOCB1bnNpZ25lZCBpbnRzICovXG4gICAgTWVzaEF0dHJpYnV0ZVtNZXNoQXR0cmlidXRlW1wiSm9pbnRJZFwiXSA9IDVdID0gXCJKb2ludElkXCI7XG4gICAgLyoqIEpvaW50IHdlaWdodHMgYXR0cmlidXRlLCA4IGZsb2F0cyAqL1xuICAgIE1lc2hBdHRyaWJ1dGVbTWVzaEF0dHJpYnV0ZVtcIkpvaW50V2VpZ2h0XCJdID0gNl0gPSBcIkpvaW50V2VpZ2h0XCI7XG59KShNZXNoQXR0cmlidXRlIHx8IChNZXNoQXR0cmlidXRlID0ge30pKTtcbi8qKiBQcm94eSB1c2VkIHRvIG92ZXJyaWRlIHByb3RvdHlwZXMgb2YgZGVzdHJveWVkIG9iamVjdHMuICovXG5leHBvcnQgY29uc3QgRGVzdHJveWVkT2JqZWN0SW5zdGFuY2UgPSBjcmVhdGVEZXN0cm95ZWRQcm94eSgnb2JqZWN0Jyk7XG4vKiogUHJveHkgdXNlZCB0byBvdmVycmlkZSBwcm90b3R5cGVzIG9mIGRlc3Ryb3llZCBjb21wb25lbnRzLiAqL1xuZXhwb3J0IGNvbnN0IERlc3Ryb3llZENvbXBvbmVudEluc3RhbmNlID0gY3JlYXRlRGVzdHJveWVkUHJveHkoJ2NvbXBvbmVudCcpO1xuLyoqIFByb3h5IHVzZWQgdG8gb3ZlcnJpZGUgcHJvdG90eXBlcyBvZiBkZXN0cm95ZWQgcHJlZmFicy4gKi9cbmV4cG9ydCBjb25zdCBEZXN0cm95ZWRQcmVmYWJJbnN0YW5jZSA9IGNyZWF0ZURlc3Ryb3llZFByb3h5KCdwcmVmYWIvc2NlbmUnKTtcbi8qKlxuICogQ2hlY2sgd2hldGhlciBhIGdpdmVuIHNoYXBlIGlzIGEgbWVzaCBvciBub3QuXG4gKlxuICogQHBhcmFtIHNoYXBlIFRoZSBzaGFwZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgc2hhcGUgaXMgYSBtZXNoLCBgZmFsc2VgIGlmIGl0J3MgYSBwcmltaXRpdmUuXG4gKi9cbmZ1bmN0aW9uIGlzTWVzaFNoYXBlKHNoYXBlKSB7XG4gICAgcmV0dXJuIHNoYXBlID09PSBTaGFwZS5Db252ZXhNZXNoIHx8IHNoYXBlID09PSBTaGFwZS5UcmlhbmdsZU1lc2g7XG59XG4vKipcbiAqIENoZWNrIHdoZXRoZXIgYW4gb2JqZWN0IGlzIHRoZSB7QGxpbmsgQ29tcG9uZW50fSBjbGFzcyBvciBub3QsXG4gKlxuICogQG5vdGUgVGhpcyBtZXRob2QgaWYgZm9vbHByb29mIHRvIGRldmVsb3BlcnMgaW5hZHZlcnRlbnRseSB1c2luZ1xuICogbXVsdGlwbGUgV29uZGVybGFuZCBFbmdpbmUgQVBJIGluIGEgYnVuZGxlLlxuICpcbiAqIEBwYXJhbSB2YWx1ZSBUaGUgb2JqZWN0IHRvIGNoZWNrLlxuICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3QgaXMgYSB7QGxpbmsgQ29tcG9uZW50fSBjbGFzcywgYGZhbHNlYCBvdGhlcndpc2UuXG4gKi9cbmZ1bmN0aW9uIGlzQmFzZUNvbXBvbmVudENsYXNzKHZhbHVlKSB7XG4gICAgcmV0dXJuICghIXZhbHVlICYmXG4gICAgICAgIHZhbHVlLmhhc093blByb3BlcnR5KCdfaXNCYXNlQ29tcG9uZW50JykgJiZcbiAgICAgICAgdmFsdWUuX2lzQmFzZUNvbXBvbmVudCk7XG59XG4vKipcbiAqIENvbnN0YW50cy5cbiAqL1xuLyoqXG4gKiBEZWZhdWx0IHdvcmxkIHVwIHZlY3Rvci5cbiAqL1xuY29uc3QgVVBfVkVDVE9SID0gWzAsIDEsIDBdO1xuY29uc3QgU1FSVF8zID0gTWF0aC5zcXJ0KDMpO1xuLyoqXG4gKiBQcm92aWRlcyBhY2Nlc3MgdG8gYSBjb21wb25lbnQgaW5zdGFuY2Ugb2YgYSBzcGVjaWZpZWQgY29tcG9uZW50IHR5cGUuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBUaGlzIGlzIGhvdyB5b3UgZXh0ZW5kIHRoaXMgY2xhc3MgdG8gY3JlYXRlIHlvdXIgb3duIGN1c3RvbVxuICogY29tcG9uZW50OlxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQgeyBDb21wb25lbnQsIFR5cGUgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICpcbiAqIGV4cG9ydCBjbGFzcyBNeUNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gKiAgICAgc3RhdGljIFR5cGVOYW1lID0gJ215LWNvbXBvbmVudCc7XG4gKiAgICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gKiAgICAgICAgIG15Qm9vbGVhbjogeyB0eXBlOiBUeXBlLkJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0sXG4gKiAgICAgfTtcbiAqICAgICBzdGFydCgpIHt9XG4gKiAgICAgb25BY3RpdmF0ZSgpIHt9XG4gKiAgICAgb25EZWFjdGl2YXRlKCkge31cbiAqICAgICB1cGRhdGUoZHQpIHt9XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBJbiBhIGNvbXBvbmVudCwgdGhlIHNjZW5lIGNhbiBiZSBhY2Nlc3NlZCB1c2luZyBgdGhpcy5zY2VuZWA6XG4gKlxuICogYGBganNcbiAqIGltcG9ydCB7IENvbXBvbmVudCwgVHlwZSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4gKlxuICogZXhwb3J0IGNsYXNzIE15Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAqICAgICBzdGF0aWMgVHlwZU5hbWUgPSAnbXktY29tcG9uZW50JztcbiAqICAgICBzdGFydCgpIHtcbiAqICAgICAgICAgY29uc3Qgb2JqID0gdGhpcy5zY2VuZS5hZGRPYmplY3QoKTtcbiAqICAgICB9XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIENvbXBvbmVudCB7XG4gICAgLyoqXG4gICAgICogUGFjayBzY2VuZSBpbmRleCBhbmQgY29tcG9uZW50IGlkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNjZW5lIFNjZW5lIGluZGV4LlxuICAgICAqIEBwYXJhbSBpZCBDb21wb25lbnQgaWQuXG4gICAgICogQHJldHVybnMgVGhlIHBhY2tlZCBpZC5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzdGF0aWMgX3BhY2soc2NlbmUsIGlkKSB7XG4gICAgICAgIHJldHVybiAoc2NlbmUgPDwgMjIpIHwgaWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGB0cnVlYCBmb3IgZXZlcnkgY2xhc3MgaW5oZXJpdGluZyBmcm9tIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGlzIGEgd29ya2Fyb3VuZCBmb3IgYGluc3RhbmNlb2ZgIHRvIHByZXZlbnQgaXNzdWVzXG4gICAgICogdGhhdCBjb3VsZCBhcmlzZSB3aGVuIGFuIGFwcGxpY2F0aW9uIGVuZHMgdXAgdXNpbmcgbXVsdGlwbGUgQVBJIHZlcnNpb25zLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHN0YXRpYyBfaXNCYXNlQ29tcG9uZW50ID0gdHJ1ZTtcbiAgICAvKipcbiAgICAgKiBGaXhlZCBvcmRlciBvZiBhdHRyaWJ1dGVzIGluIHRoZSBgUHJvcGVydGllc2AgYXJyYXkuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGlzIHVzZWQgZm9yIHBhcmFtZXRlciBkZXNlcmlhbGl6YXRpb24gYW5kIGlzIGZpbGxlZCBkdXJpbmdcbiAgICAgKiBjb21wb25lbnQgcmVnaXN0cmF0aW9uLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHN0YXRpYyBfcHJvcGVydHlPcmRlciA9IFtdO1xuICAgIC8qKlxuICAgICAqIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGlzIGNvbXBvbmVudCBjbGFzcy5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgdXNlZCB0byByZWdpc3RlciwgYWRkLCBhbmQgcmV0cmlldmUgY29tcG9uZW50cyBvZiBhIGdpdmVuIHR5cGUuXG4gICAgICovXG4gICAgc3RhdGljIFR5cGVOYW1lO1xuICAgIC8qKlxuICAgICAqIFByb3BlcnRpZXMgb2YgdGhpcyBjb21wb25lbnQgY2xhc3MuXG4gICAgICpcbiAgICAgKiBQcm9wZXJ0aWVzIGFyZSBwdWJsaWMgYXR0cmlidXRlcyB0aGF0IGNhbiBiZSBjb25maWd1cmVkIHZpYSB0aGVcbiAgICAgKiBXb25kZXJsYW5kIEVkaXRvci5cbiAgICAgKlxuICAgICAqIEV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGltcG9ydCB7IENvbXBvbmVudCwgVHlwZSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4gICAgICogY2xhc3MgTXlDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgICAqICAgICBzdGF0aWMgVHlwZU5hbWUgPSAnbXktY29tcG9uZW50JztcbiAgICAgKiAgICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICogICAgICAgICBteUJvb2xlYW46IHsgdHlwZTogVHlwZS5Cb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LFxuICAgICAqICAgICAgICAgbXlGbG9hdDogeyB0eXBlOiBUeXBlLkZsb2F0LCBkZWZhdWx0OiBmYWxzZSB9LFxuICAgICAqICAgICAgICAgbXlUZXh0dXJlOiB7IHR5cGU6IFR5cGUuVGV4dHVyZSwgZGVmYXVsdDogbnVsbCB9LFxuICAgICAqICAgICB9O1xuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFByb3BlcnRpZXMgYXJlIGF1dG9tYXRpY2FsbHkgYWRkZWQgdG8gZWFjaCBjb21wb25lbnQgaW5zdGFuY2UsIGFuZCBhcmVcbiAgICAgKiBhY2Nlc3NpYmxlIGxpa2UgYW55IEpTIGF0dHJpYnV0ZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogLy8gQ3JlYXRlcyBhIG5ldyBjb21wb25lbnQgYW5kIHNldCBlYWNoIHByb3BlcnRpZXMgdmFsdWU6XG4gICAgICogY29uc3QgbXlDb21wb25lbnQgPSBvYmplY3QuYWRkQ29tcG9uZW50KE15Q29tcG9uZW50LCB7XG4gICAgICogICAgIG15Qm9vbGVhbjogdHJ1ZSxcbiAgICAgKiAgICAgbXlGbG9hdDogNDIuMCxcbiAgICAgKiAgICAgbXlUZXh0dXJlOiBudWxsXG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiAvLyBZb3UgY2FuIGFsc28gb3ZlcnJpZGUgdGhlIHByb3BlcnRpZXMgb24gdGhlIGluc3RhbmNlOlxuICAgICAqIG15Q29tcG9uZW50Lm15Qm9vbGVhbiA9IGZhbHNlO1xuICAgICAqIG15Q29tcG9uZW50Lm15RmxvYXQgPSAtNDIuMDtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqICMjIyMgUmVmZXJlbmNlc1xuICAgICAqXG4gICAgICogUmVmZXJlbmNlIHR5cGVzIChpLmUuLCBtZXNoLCBvYmplY3QsIGV0Yy4uLikgY2FuIGFsc28gYmUgbGlzdGVkIGFzICoqcmVxdWlyZWQqKjpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogaW1wb3J0IHtDb21wb25lbnQsIFByb3BlcnR5fSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICAgICAqXG4gICAgICogY2xhc3MgTXlDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgICAqICAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtcbiAgICAgKiAgICAgICAgIG15T2JqZWN0OiBQcm9wZXJ0eS5vYmplY3Qoe3JlcXVpcmVkOiB0cnVlfSksXG4gICAgICogICAgICAgICBteUFuaW1hdGlvbjogUHJvcGVydHkuYW5pbWF0aW9uKHtyZXF1aXJlZDogdHJ1ZX0pLFxuICAgICAqICAgICAgICAgbXlUZXh0dXJlOiBQcm9wZXJ0eS50ZXh0dXJlKHtyZXF1aXJlZDogdHJ1ZX0pLFxuICAgICAqICAgICAgICAgbXlNZXNoOiBQcm9wZXJ0eS5tZXNoKHtyZXF1aXJlZDogdHJ1ZX0pLFxuICAgICAqICAgICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogUGxlYXNlIG5vdGUgdGhhdCByZWZlcmVuY2VzIGFyZSB2YWxpZGF0ZWQgKipvbmNlKiogYmVmb3JlIHRoZSBjYWxsIHRvIHtAbGluayBDb21wb25lbnQuc3RhcnR9IG9ubHksXG4gICAgICogdmlhIHRoZSB7QGxpbmsgQ29tcG9uZW50LnZhbGlkYXRlUHJvcGVydGllc30gbWV0aG9kLlxuICAgICAqL1xuICAgIHN0YXRpYyBQcm9wZXJ0aWVzO1xuICAgIC8qKlxuICAgICAqIFdoZW4gc2V0IHRvIGB0cnVlYCwgdGhlIGNoaWxkIGNsYXNzIGluaGVyaXRzIGZyb20gdGhlIHBhcmVudFxuICAgICAqIHByb3BlcnRpZXMsIGFzIHNob3duIGluIHRoZSBmb2xsb3dpbmcgZXhhbXBsZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogaW1wb3J0IHtDb21wb25lbnQsIFByb3BlcnR5fSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICAgICAqXG4gICAgICogY2xhc3MgUGFyZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAgKiAgICAgc3RhdGljIFR5cGVOYW1lID0gJ3BhcmVudCc7XG4gICAgICogICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge3BhcmVudE5hbWU6IFByb3BlcnR5LnN0cmluZygncGFyZW50Jyl9XG4gICAgICogfVxuICAgICAqXG4gICAgICogY2xhc3MgQ2hpbGQgZXh0ZW5kcyBQYXJlbnQge1xuICAgICAqICAgICBzdGF0aWMgVHlwZU5hbWUgPSAnY2hpbGQnO1xuICAgICAqICAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtuYW1lOiBQcm9wZXJ0eS5zdHJpbmcoJ2NoaWxkJyl9XG4gICAgICogICAgIHN0YXRpYyBJbmhlcml0UHJvcGVydGllcyA9IHRydWU7XG4gICAgICpcbiAgICAgKiAgICAgc3RhcnQoKSB7XG4gICAgICogICAgICAgICAvLyBXb3JrcyBiZWNhdXNlIGBJbmhlcml0UHJvcGVydGllc2AgaXMgYHRydWVgLlxuICAgICAqICAgICAgICAgY29uc29sZS5sb2coYCR7dGhpcy5uYW1lfSBpbmhlcml0cyBmcm9tICR7dGhpcy5wYXJlbnROYW1lfWApO1xuICAgICAqICAgICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQG5vdGUgUHJvcGVydGllcyBkZWZpbmVkIGluIGRlc2NlbmRhbnQgY2xhc3NlcyB3aWxsIG92ZXJyaWRlIHByb3BlcnRpZXNcbiAgICAgKiB3aXRoIHRoZSBzYW1lIG5hbWUgZGVmaW5lZCBpbiBhbmNlc3RvciBjbGFzc2VzLlxuICAgICAqXG4gICAgICogRGVmYXVsdHMgdG8gYHRydWVgLlxuICAgICAqL1xuICAgIHN0YXRpYyBJbmhlcml0UHJvcGVydGllcztcbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2hlbiB0aGlzIGNvbXBvbmVudCBjbGFzcyBpcyByZWdpc3RlcmVkLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIFRoaXMgY2FsbGJhY2sgY2FuIGJlIHVzZWQgdG8gcmVnaXN0ZXIgZGVwZW5kZW5jaWVzIG9mIGEgY29tcG9uZW50LFxuICAgICAqIGUuZy4sIGNvbXBvbmVudCBjbGFzc2VzIHRoYXQgbmVlZCB0byBiZSByZWdpc3RlcmVkIGluIG9yZGVyIHRvIGFkZFxuICAgICAqIHRoZW0gYXQgcnVudGltZSB3aXRoIHtAbGluayBPYmplY3QzRC5hZGRDb21wb25lbnR9LCBpbmRlcGVuZGVudCBvZiB3aGV0aGVyXG4gICAgICogdGhleSBhcmUgdXNlZCBpbiB0aGUgZWRpdG9yLlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjbGFzcyBTcGF3bmVyIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAgKiAgICAgc3RhdGljIFR5cGVOYW1lID0gJ3NwYXduZXInO1xuICAgICAqXG4gICAgICogICAgIHN0YXRpYyBvblJlZ2lzdGVyKGVuZ2luZSkge1xuICAgICAqICAgICAgICAgZW5naW5lLnJlZ2lzdGVyQ29tcG9uZW50KFNwYXduZWRDb21wb25lbnQpO1xuICAgICAqICAgICB9XG4gICAgICpcbiAgICAgKiAgICAgLy8gWW91IGNhbiBub3cgdXNlIGFkZENvbXBvbmVudCB3aXRoIFNwYXduZWRDb21wb25lbnRcbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogVGhpcyBjYWxsYmFjayBjYW4gYmUgdXNlZCB0byByZWdpc3RlciBkaWZmZXJlbnQgaW1wbGVtZW50YXRpb25zIG9mIGFcbiAgICAgKiBjb21wb25lbnQgZGVwZW5kaW5nIG9uIGNsaWVudCBmZWF0dXJlcyBvciBBUEkgdmVyc2lvbnMuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIC8vIFByb3BlcnRpZXMgbmVlZCB0byBiZSB0aGUgc2FtZSBmb3IgYWxsIGltcGxlbWVudGF0aW9ucyFcbiAgICAgKiBjb25zdCBTaGFyZWRQcm9wZXJ0aWVzID0ge307XG4gICAgICpcbiAgICAgKiBjbGFzcyBBbmNob3IgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgICAqICAgICBzdGF0aWMgVHlwZU5hbWUgPSAnc3Bhd25lcic7XG4gICAgICogICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0gU2hhcmVkUHJvcGVydGllcztcbiAgICAgKlxuICAgICAqICAgICBzdGF0aWMgb25SZWdpc3RlcihlbmdpbmUpIHtcbiAgICAgKiAgICAgICAgIGlmKG5hdmlnYXRvci54ciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICogICAgICAgICAgICAgLyogV2ViWFIgdW5zdXBwb3J0ZWQsIGtlZXAgdGhpcyBkdW1teSBjb21wb25lbnQgKlxcL1xuICAgICAqICAgICAgICAgICAgIHJldHVybjtcbiAgICAgKiAgICAgICAgIH1cbiAgICAgKiAgICAgICAgIC8qIFdlYlhSIHN1cHBvcnRlZCEgT3ZlcnJpZGUgYWxyZWFkeSByZWdpc3RlcmVkIGR1bW15IGltcGxlbWVudGF0aW9uXG4gICAgICogICAgICAgICAgKiB3aXRoIG9uZSBkZXBlbmRpbmcgb24gaGl0LXRlc3QgQVBJIHN1cHBvcnQgKlxcL1xuICAgICAqICAgICAgICAgZW5naW5lLnJlZ2lzdGVyQ29tcG9uZW50KHdpbmRvdy5IaXRUZXN0U291cmNlID09PSB1bmRlZmluZWQgP1xuICAgICAqICAgICAgICAgICAgIEFuY2hvcldpdGhvdXRIaXRUZXN0IDogQW5jaG9yV2l0aEhpdFRlc3QpO1xuICAgICAqICAgICB9XG4gICAgICpcbiAgICAgKiAgICAgLy8gVGhpcyBvbmUgaW1wbGVtZW50cyBubyBmdW5jdGlvbnNcbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICovXG4gICAgc3RhdGljIG9uUmVnaXN0ZXI7XG4gICAgLyoqXG4gICAgICogQWxsb3dzIHRvIGluaGVyaXQgcHJvcGVydGllcyBkaXJlY3RseSBpbnNpZGUgdGhlIGVkaXRvci5cbiAgICAgKlxuICAgICAqIEBub3RlIERvIG5vdCB1c2UgZGlyZWN0bHksIHByZWZlciB1c2luZyB7QGxpbmsgaW5oZXJpdFByb3BlcnRpZXN9LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHN0YXRpYyBfaW5oZXJpdFByb3BlcnRpZXMoKSB7XG4gICAgICAgIGluaGVyaXRQcm9wZXJ0aWVzKHRoaXMpO1xuICAgIH1cbiAgICAvKiogTWFuYWdlciBpbmRleC4gQGhpZGRlbiAqL1xuICAgIF9tYW5hZ2VyO1xuICAgIC8qKiBQYWNrZWQgaWQsIGNvbnRhaW5pbmcgdGhlIHNjZW5lIGFuZCB0aGUgbG9jYWwgaWQuIEBoaWRkZW4gKi9cbiAgICBfaWQ7XG4gICAgLyoqIElkIHJlbGF0aXZlIHRvIHRoZSBzY2VuZSBjb21wb25lbnQncyBtYW5hZ2VyLiBAaGlkZGVuICovXG4gICAgX2xvY2FsSWQ7XG4gICAgLyoqXG4gICAgICogT2JqZWN0IGNvbnRhaW5pbmcgdGhpcyBvYmplY3QuXG4gICAgICpcbiAgICAgKiAqKk5vdGUqKjogVGhpcyBpcyBjYWNoZWQgZm9yIGZhc3RlciByZXRyaWV2YWwuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX29iamVjdDtcbiAgICAvKiogU2NlbmUgaW5zdGFuY2UuIEBoaWRkZW4gKi9cbiAgICBfc2NlbmU7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZW5naW5lIFRoZSBlbmdpbmUgaW5zdGFuY2UuXG4gICAgICogQHBhcmFtIG1hbmFnZXIgSW5kZXggb2YgdGhlIG1hbmFnZXIuXG4gICAgICogQHBhcmFtIGlkIFdBU00gY29tcG9uZW50IGluc3RhbmNlIGluZGV4LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNjZW5lLCBtYW5hZ2VyID0gLTEsIGlkID0gLTEpIHtcbiAgICAgICAgdGhpcy5fc2NlbmUgPSBzY2VuZTtcbiAgICAgICAgdGhpcy5fbWFuYWdlciA9IG1hbmFnZXI7XG4gICAgICAgIHRoaXMuX2xvY2FsSWQgPSBpZDtcbiAgICAgICAgdGhpcy5faWQgPSBDb21wb25lbnQuX3BhY2soc2NlbmUuX2luZGV4LCBpZCk7XG4gICAgICAgIHRoaXMuX29iamVjdCA9IG51bGw7XG4gICAgfVxuICAgIC8qKiBTY2VuZSB0aGlzIGNvbXBvbmVudCBpcyBwYXJ0IG9mLiAqL1xuICAgIGdldCBzY2VuZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjZW5lO1xuICAgIH1cbiAgICAvKiogSG9zdGluZyBlbmdpbmUgaW5zdGFuY2UuICovXG4gICAgZ2V0IGVuZ2luZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjZW5lLmVuZ2luZTtcbiAgICB9XG4gICAgLyoqIFRoZSBuYW1lIG9mIHRoaXMgY29tcG9uZW50J3MgdHlwZSAqL1xuICAgIGdldCB0eXBlKCkge1xuICAgICAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcjtcbiAgICAgICAgcmV0dXJuIGN0b3IuVHlwZU5hbWU7XG4gICAgfVxuICAgIC8qKiBUaGUgb2JqZWN0IHRoaXMgY29tcG9uZW50IGlzIGF0dGFjaGVkIHRvLiAqL1xuICAgIGdldCBvYmplY3QoKSB7XG4gICAgICAgIGlmICghdGhpcy5fb2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBvYmplY3RJZCA9IHRoaXMuZW5naW5lLndhc20uX3dsX2NvbXBvbmVudF9nZXRfb2JqZWN0KHRoaXMuX21hbmFnZXIsIHRoaXMuX2lkKTtcbiAgICAgICAgICAgIHRoaXMuX29iamVjdCA9IHRoaXMuX3NjZW5lLndyYXAob2JqZWN0SWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9vYmplY3Q7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRoaXMgY29tcG9uZW50IGlzIGFjdGl2ZS5cbiAgICAgKlxuICAgICAqIEFjdGl2YXRpbmcvZGVhY3RpdmF0aW5nIGEgY29tcG9uZW50IGNvbWVzIGF0IGEgc21hbGwgY29zdCBvZiByZW9yZGVyaW5nXG4gICAgICogY29tcG9uZW50cyBpbiB0aGUgcmVzcGVjdGl2ZSBjb21wb25lbnQgbWFuYWdlci4gVGhpcyBmdW5jdGlvbiB0aGVyZWZvcmVcbiAgICAgKiBpcyBub3QgYSB0cml2aWFsIGFzc2lnbm1lbnQuXG4gICAgICpcbiAgICAgKiBEb2VzIG5vdGhpbmcgaWYgdGhlIGNvbXBvbmVudCBpcyBhbHJlYWR5IGFjdGl2YXRlZC9kZWFjdGl2YXRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhY3RpdmUgTmV3IGFjdGl2ZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBzZXQgYWN0aXZlKGFjdGl2ZSkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9jb21wb25lbnRfc2V0QWN0aXZlKHRoaXMuX21hbmFnZXIsIHRoaXMuX2lkLCBhY3RpdmUpO1xuICAgIH1cbiAgICAvKiogYHRydWVgIGlmIHRoZSBjb21wb25lbnQgaXMgbWFya2VkIGFzIGFjdGl2ZSBhbmQgaXRzIHNjZW5lIGlzIGFjdGl2ZS4gKi9cbiAgICBnZXQgYWN0aXZlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXJrZWRBY3RpdmUgJiYgdGhpcy5fc2NlbmUuaXNBY3RpdmU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGB0cnVlYCBpZiB0aGUgY29tcG9uZW50IGlzIG1hcmtlZCBhcyBhY3RpdmUgaW4gdGhlIHNjZW5lLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIEBub3RlIEF0IHRoZSBvcHBvc2l0ZSBvZiB7QGxpbmsgQ29tcG9uZW50LmFjdGl2ZX0sIHRoaXMgYWNjZXNzb3IgZG9lc24ndFxuICAgICAqIHRha2UgaW50byBhY2NvdW50IHdoZXRoZXIgdGhlIHNjZW5lIGlzIGFjdGl2ZSBvciBub3QuXG4gICAgICovXG4gICAgZ2V0IG1hcmtlZEFjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2NvbXBvbmVudF9pc0FjdGl2ZSh0aGlzLl9tYW5hZ2VyLCB0aGlzLl9pZCkgIT0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29weSBhbGwgdGhlIHByb3BlcnRpZXMgZnJvbSBgc3JjYCBpbnRvIHRoaXMgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAbm90ZSBPbmx5IHByb3BlcnRpZXMgYXJlIGNvcGllZC4gSWYgYSBjb21wb25lbnQgbmVlZHMgdG9cbiAgICAgKiBjb3B5IGV4dHJhIGRhdGEsIGl0IG5lZWRzIHRvIG92ZXJyaWRlIHRoaXMgbWV0aG9kLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNsYXNzIE15Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAgKiAgICAgbm9uUHJvcGVydHlEYXRhID0gJ0hlbGxvIFdvcmxkJztcbiAgICAgKlxuICAgICAqICAgICBjb3B5KHNyYykge1xuICAgICAqICAgICAgICAgc3VwZXIuY29weShzcmMpO1xuICAgICAqICAgICAgICAgdGhpcy5ub25Qcm9wZXJ0eURhdGEgPSBzcmMubm9uUHJvcGVydHlEYXRhO1xuICAgICAqICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICogICAgIH1cbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgYnkge0BsaW5rIE9iamVjdDNELmNsb25lfS4gRG8gbm90IGF0dGVtcHQgdG86XG4gICAgICogICAgIC0gQ3JlYXRlIG5ldyBjb21wb25lbnRcbiAgICAgKiAgICAgLSBSZWFkIHJlZmVyZW5jZXMgdG8gb3RoZXIgb2JqZWN0c1xuICAgICAqXG4gICAgICogV2hlbiBjbG9uaW5nIHZpYSB7QGxpbmsgT2JqZWN0M0QuY2xvbmV9LCB0aGlzIG1ldGhvZCB3aWxsIGJlIGNhbGxlZCBiZWZvcmVcbiAgICAgKiB7QGxpbmsgQ29tcG9uZW50LnN0YXJ0fS5cbiAgICAgKlxuICAgICAqIEBub3RlIEphdmFTY3JpcHQgY29tcG9uZW50IHByb3BlcnRpZXMgYXJlbid0IHJldGFyZ2V0ZWQuIFRodXMsIHJlZmVyZW5jZXNcbiAgICAgKiBpbnNpZGUgdGhlIHNvdXJjZSBvYmplY3Qgd2lsbCBub3QgYmUgcmV0YXJnZXRlZCB0byB0aGUgZGVzdGluYXRpb24gb2JqZWN0LFxuICAgICAqIGF0IHRoZSBleGNlcHRpb24gb2YgdGhlIHNraW4gZGF0YSBvbiB7QGxpbmsgTWVzaENvbXBvbmVudH0gYW5kIHtAbGluayBBbmltYXRpb25Db21wb25lbnR9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHNyYyBUaGUgc291cmNlIGNvbXBvbmVudCB0byBjb3B5IGZyb20uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgY29weShzcmMpIHtcbiAgICAgICAgY29uc3QgY3RvciA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSBjdG9yLlByb3BlcnRpZXM7XG4gICAgICAgIGlmICghcHJvcGVydGllcylcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gcHJvcGVydGllcykge1xuICAgICAgICAgICAgY29uc3QgcHJvcGVydHkgPSBwcm9wZXJ0aWVzW25hbWVdO1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBzcmNbbmFtZV07XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IGNsb25lciA9IHByb3BlcnR5LmNsb25lciA/PyBkZWZhdWx0UHJvcGVydHlDbG9uZXI7XG4gICAgICAgICAgICB0aGlzW25hbWVdID0gY2xvbmVyLmNsb25lKHByb3BlcnR5LnR5cGUsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoaXMgY29tcG9uZW50IGZyb20gaXRzIG9iamVjdHMgYW5kIGRlc3Ryb3kgaXQuXG4gICAgICpcbiAgICAgKiBJdCBpcyBiZXN0IHByYWN0aWNlIHRvIHNldCB0aGUgY29tcG9uZW50IHRvIGBudWxsYCBhZnRlcixcbiAgICAgKiB0byBlbnN1cmUgaXQgZG9lcyBub3QgZ2V0IHVzZWQgbGF0ZXIuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqICAgIGMuZGVzdHJveSgpO1xuICAgICAqICAgIGMgPSBudWxsO1xuICAgICAqIGBgYFxuICAgICAqIEBzaW5jZSAwLjkuMFxuICAgICAqL1xuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSB0aGlzLl9tYW5hZ2VyO1xuICAgICAgICBpZiAobWFuYWdlciA8IDAgfHwgdGhpcy5faWQgPCAwKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAvKiBUaGlzIGNhbGwgd2lsbCBtYXJrIHRoZSBjb21wb25lbnQgZGVzdHJveWVkLFxuICAgICAgICAgKiBhdXRvbWF0aWNhbGx5IGNhbGxpbmcgYF90cmlnZ2VyT25EZXN0cm95YC4gICovXG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2NvbXBvbmVudF9yZW1vdmUobWFuYWdlciwgdGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgZXF1YWxpdHkgYnkgY29tcGFyaW5nIGlkcyBhbmQgKipub3QqKiB0aGUgSmF2YVNjcmlwdCByZWZlcmVuY2UuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlIFVzZSBKYXZhU2NyaXB0IHJlZmVyZW5jZSBjb21wYXJpc29uIGluc3RlYWQ6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IGNvbXBvbmVudEEgPSBvYmouYWRkQ29tcG9uZW50KCdtZXNoJyk7XG4gICAgICogY29uc3QgY29tcG9uZW50QiA9IG9iai5hZGRDb21wb25lbnQoJ21lc2gnKTtcbiAgICAgKiBjb25zdCBjb21wb25lbnRDID0gY29tcG9uZW50QjtcbiAgICAgKiBjb25zb2xlLmxvZyhjb21wb25lbnRBID09PSBjb21wb25lbnRCKTsgLy8gZmFsc2VcbiAgICAgKiBjb25zb2xlLmxvZyhjb21wb25lbnRBID09PSBjb21wb25lbnRBKTsgLy8gdHJ1ZVxuICAgICAqIGNvbnNvbGUubG9nKGNvbXBvbmVudEIgPT09IGNvbXBvbmVudEMpOyAvLyB0cnVlXG4gICAgICogYGBgXG4gICAgICovXG4gICAgZXF1YWxzKG90aGVyQ29tcG9uZW50KSB7XG4gICAgICAgIC8qKiBAdG9kbygyLjAuMCk6IFJlbW92ZSB0aGlzIG1ldGhvZC4gKi9cbiAgICAgICAgaWYgKCFvdGhlckNvbXBvbmVudClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hbmFnZXIgPT09IG90aGVyQ29tcG9uZW50Ll9tYW5hZ2VyICYmIHRoaXMuX2lkID09PSBvdGhlckNvbXBvbmVudC5faWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0IHRoZSBjb21wb25lbnQgcHJvcGVydGllcyB0byBkZWZhdWx0LlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBpcyBhdXRvbWF0aWNhbGx5IGNhbGxlZCBkdXJpbmcgdGhlIGNvbXBvbmVudCBpbnN0YW50aWF0aW9uLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHJlc2V0UHJvcGVydGllcygpIHtcbiAgICAgICAgY29uc3QgY3RvciA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSBjdG9yLlByb3BlcnRpZXM7XG4gICAgICAgIGlmICghcHJvcGVydGllcylcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gcHJvcGVydGllcykge1xuICAgICAgICAgICAgY29uc3QgcHJvcGVydHkgPSBwcm9wZXJ0aWVzW25hbWVdO1xuICAgICAgICAgICAgY29uc3QgY2xvbmVyID0gcHJvcGVydHkuY2xvbmVyID8/IGRlZmF1bHRQcm9wZXJ0eUNsb25lcjtcbiAgICAgICAgICAgIHRoaXNbbmFtZV0gPSBjbG9uZXIuY2xvbmUocHJvcGVydHkudHlwZSwgcHJvcGVydHkuZGVmYXVsdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIENvbXBvbmVudC5yZXNldFByb3BlcnRpZXN9IGluc3RlYWQuICovXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc2V0UHJvcGVydGllcygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWYWxpZGF0ZSB0aGUgcHJvcGVydGllcyBvbiB0aGlzIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHRocm93cyBJZiBhbnkgb2YgdGhlIHJlcXVpcmVkIHByb3BlcnRpZXMgaXNuJ3QgaW5pdGlhbGl6ZWRcbiAgICAgKiBvbiB0aGlzIGluc3RhbmNlLlxuICAgICAqL1xuICAgIHZhbGlkYXRlUHJvcGVydGllcygpIHtcbiAgICAgICAgY29uc3QgY3RvciA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgICAgIGlmICghY3Rvci5Qcm9wZXJ0aWVzKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gY3Rvci5Qcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBpZiAoIWN0b3IuUHJvcGVydGllc1tuYW1lXS5yZXF1aXJlZClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGlmICghdGhpc1tuYW1lXSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUHJvcGVydHkgJyR7bmFtZX0nIGlzIHJlcXVpcmVkIGJ1dCB3YXMgbm90IGluaXRpYWxpemVkYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0NvbXBvbmVudChkZXN0cm95ZWQpJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYENvbXBvbmVudCgnJHt0aGlzLnR5cGV9JywgJHt0aGlzLl9sb2NhbElkfSlgO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBgdHJ1ZWAgaWYgdGhlIGNvbXBvbmVudCBpcyBkZXN0cm95ZWQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqXG4gICAgICogSWYge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUuZXJhc2VQcm90b3R5cGVPbkRlc3Ryb3l9IGlzIGB0cnVlYCxcbiAgICAgKiByZWFkaW5nIGEgY3VzdG9tIHByb3BlcnR5IHdpbGwgbm90IHdvcms6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGVuZ2luZS5lcmFzZVByb3RvdHlwZU9uRGVzdHJveSA9IHRydWU7XG4gICAgICpcbiAgICAgKiBjb25zdCBjb21wID0gb2JqLmFkZENvbXBvbmVudCgnbWVzaCcpO1xuICAgICAqIGNvbXAuY3VzdG9tUGFyYW0gPSAnSGVsbG8gV29ybGQhJztcbiAgICAgKlxuICAgICAqIGNvbnNvbGUubG9nKGNvbXAuaXNEZXN0cm95ZWQpOyAvLyBQcmludHMgYGZhbHNlYFxuICAgICAqIGNvbXAuZGVzdHJveSgpO1xuICAgICAqIGNvbnNvbGUubG9nKGNvbXAuaXNEZXN0cm95ZWQpOyAvLyBQcmludHMgYHRydWVgXG4gICAgICogY29uc29sZS5sb2coY29tcC5jdXN0b21QYXJhbSk7IC8vIFRocm93cyBhbiBlcnJvclxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMS4xXG4gICAgICovXG4gICAgZ2V0IGlzRGVzdHJveWVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faWQgPCAwO1xuICAgIH1cbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIF9jb3B5KHNyYywgb2Zmc2V0c1B0cikge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgLyoqIEB0b2RvOiBTdXBwb3J0IHJldGFyZ2V0aW5nIGZvciBgT2JqZWN0M0QuY2xvbmVgIGFzIHdlbGwuICovXG4gICAgICAgIGNvbnN0IG9mZnNldHMgPSB3YXNtLkhFQVBVMzI7XG4gICAgICAgIGNvbnN0IG9mZnNldHNTdGFydCA9IG9mZnNldHNQdHIgPj4+IDI7XG4gICAgICAgIGNvbnN0IGRlc3RTY2VuZSA9IHRoaXMuX3NjZW5lO1xuICAgICAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcjtcbiAgICAgICAgZm9yIChjb25zdCBuYW1lIGluIGN0b3IuUHJvcGVydGllcykge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBzcmNbbmFtZV07XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzW25hbWVdID0gbnVsbDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHByb3AgPSBjdG9yLlByb3BlcnRpZXNbbmFtZV07XG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSBvZmZzZXRzW29mZnNldHNTdGFydCArIHByb3AudHlwZV07XG4gICAgICAgICAgICBsZXQgcmV0YXJnZXRlZDtcbiAgICAgICAgICAgIHN3aXRjaCAocHJvcC50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlLk9iamVjdDoge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHdhc20uX3dsX29iamVjdF9pbmRleCh2YWx1ZS5faWQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHdhc20uX3dsX29iamVjdF9pZChkZXN0U2NlbmUuX2luZGV4LCBpbmRleCArIG9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgIHJldGFyZ2V0ZWQgPSBkZXN0U2NlbmUud3JhcChpZCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFR5cGUuQW5pbWF0aW9uOlxuICAgICAgICAgICAgICAgICAgICByZXRhcmdldGVkID0gZGVzdFNjZW5lLmFuaW1hdGlvbnMud3JhcChvZmZzZXQgKyB2YWx1ZS5faW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFR5cGUuU2tpbjpcbiAgICAgICAgICAgICAgICAgICAgcmV0YXJnZXRlZCA9IGRlc3RTY2VuZS5za2lucy53cmFwKG9mZnNldCArIHZhbHVlLl9pbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsb25lciA9IHByb3AuY2xvbmVyID8/IGRlZmF1bHRQcm9wZXJ0eUNsb25lcjtcbiAgICAgICAgICAgICAgICAgICAgcmV0YXJnZXRlZCA9IGNsb25lci5jbG9uZShwcm9wLnR5cGUsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzW25hbWVdID0gcmV0YXJnZXRlZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJpZ2dlciB0aGUgY29tcG9uZW50IHtAbGluayBDb21wb25lbnQuaW5pdH0gbWV0aG9kLlxuICAgICAqXG4gICAgICogQG5vdGUgVXNlIHRoaXMgbWV0aG9kIGluc3RlYWQgb2YgZGlyZWN0bHkgY2FsbGluZyB7QGxpbmsgQ29tcG9uZW50LmluaXR9LFxuICAgICAqIGJlY2F1c2UgdGhpcyBtZXRob2QgY3JlYXRlcyBhbiBoYW5kbGVyIGZvciB0aGUge0BsaW5rIENvbXBvbmVudC5zdGFydH0uXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX3RyaWdnZXJJbml0KCkge1xuICAgICAgICBpZiAodGhpcy5pbml0KSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZS5sb2cuZXJyb3IoTG9nVGFnLkNvbXBvbmVudCwgYEV4Y2VwdGlvbiBkdXJpbmcgJHt0aGlzLnR5cGV9IGluaXQoKSBvbiBvYmplY3QgJHt0aGlzLm9iamVjdC5uYW1lfWApO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5naW5lLmxvZy5lcnJvcihMb2dUYWcuQ29tcG9uZW50LCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKiBBcm0gb25BY3RpdmF0ZSgpIHdpdGggdGhlIGluaXRpYWwgc3RhcnQoKSBjYWxsICovXG4gICAgICAgIGNvbnN0IG9sZEFjdGl2YXRlID0gdGhpcy5vbkFjdGl2YXRlO1xuICAgICAgICB0aGlzLm9uQWN0aXZhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLm9uQWN0aXZhdGUgPSBvbGRBY3RpdmF0ZTtcbiAgICAgICAgICAgIGxldCBmYWlsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVByb3BlcnRpZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGBFeGNlcHRpb24gZHVyaW5nICR7dGhpcy50eXBlfSB2YWxpZGF0ZVByb3BlcnRpZXMoKSBvbiBvYmplY3QgJHt0aGlzLm9iamVjdC5uYW1lfWApO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5naW5lLmxvZy5lcnJvcihMb2dUYWcuQ29tcG9uZW50LCBlKTtcbiAgICAgICAgICAgICAgICBmYWlsZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0Py4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGBFeGNlcHRpb24gZHVyaW5nICR7dGhpcy50eXBlfSBzdGFydCgpIG9uIG9iamVjdCAke3RoaXMub2JqZWN0Lm5hbWV9YCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGUpO1xuICAgICAgICAgICAgICAgIGZhaWxlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmFpbGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMub25BY3RpdmF0ZSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMub25BY3RpdmF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZS5sb2cuZXJyb3IoTG9nVGFnLkNvbXBvbmVudCwgYEV4Y2VwdGlvbiBkdXJpbmcgJHt0aGlzLnR5cGV9IG9uQWN0aXZhdGUoKSBvbiBvYmplY3QgJHt0aGlzLm9iamVjdC5uYW1lfWApO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5naW5lLmxvZy5lcnJvcihMb2dUYWcuQ29tcG9uZW50LCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJpZ2dlciB0aGUgY29tcG9uZW50IHtAbGluayBDb21wb25lbnQudXBkYXRlfSBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX3RyaWdnZXJVcGRhdGUoZHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnVwZGF0ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKGR0KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGBFeGNlcHRpb24gZHVyaW5nICR7dGhpcy50eXBlfSB1cGRhdGUoKSBvbiBvYmplY3QgJHt0aGlzLm9iamVjdC5uYW1lfWApO1xuICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGUpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZW5naW5lLndhc20uX2RlYWN0aXZhdGVfY29tcG9uZW50X29uX2Vycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyIHRoZSBjb21wb25lbnQge0BsaW5rIENvbXBvbmVudC5vbkFjdGl2YXRlfSBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX3RyaWdnZXJPbkFjdGl2YXRlKCkge1xuICAgICAgICBpZiAoIXRoaXMub25BY3RpdmF0ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMub25BY3RpdmF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aGlzLmVuZ2luZS5sb2cuZXJyb3IoTG9nVGFnLkNvbXBvbmVudCwgYEV4Y2VwdGlvbiBkdXJpbmcgJHt0aGlzLnR5cGV9IG9uQWN0aXZhdGUoKSBvbiBvYmplY3QgJHt0aGlzLm9iamVjdC5uYW1lfWApO1xuICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyaWdnZXIgdGhlIGNvbXBvbmVudCB7QGxpbmsgQ29tcG9uZW50Lm9uRGVhY3RpdmF0ZX0gbWV0aG9kLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF90cmlnZ2VyT25EZWFjdGl2YXRlKCkge1xuICAgICAgICBpZiAoIXRoaXMub25EZWFjdGl2YXRlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5vbkRlYWN0aXZhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGBFeGNlcHRpb24gZHVyaW5nICR7dGhpcy50eXBlfSBvbkRlYWN0aXZhdGUoKSBvbiBvYmplY3QgJHt0aGlzLm9iamVjdC5uYW1lfWApO1xuICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyaWdnZXIgdGhlIGNvbXBvbmVudCB7QGxpbmsgQ29tcG9uZW50Lm9uRGVzdHJveX0gbWV0aG9kLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF90cmlnZ2VyT25EZXN0cm95KCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHRoaXMub25EZXN0cm95KVxuICAgICAgICAgICAgICAgIHRoaXMub25EZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLmxvZy5lcnJvcihMb2dUYWcuQ29tcG9uZW50LCBgRXhjZXB0aW9uIGR1cmluZyAke3RoaXMudHlwZX0gb25EZXN0cm95KCkgb24gb2JqZWN0ICR7dGhpcy5vYmplY3QubmFtZX1gKTtcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLmxvZy5lcnJvcihMb2dUYWcuQ29tcG9uZW50LCBlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zY2VuZS5fY29tcG9uZW50cy5kZXN0cm95KHRoaXMpO1xuICAgIH1cbn1cbi8qKlxuICogQ29tcG9uZW50cyBtdXN0IGJlIHJlZ2lzdGVyZWQgYmVmb3JlIGxvYWRpbmcgLyBhcHBlbmRpbmcgYSBzY2VuZS5cbiAqXG4gKiBJdCdzIHBvc3NpYmxlIHRvIGVuZCB1cCB3aXRoIGEgYnJva2VuIGNvbXBvbmVudCBpbiB0aGUgZm9sbG93aW5nIGNhc2VzOlxuICpcbiAqIC0gQ29tcG9uZW50IHdhc24ndCByZWdpc3RlcmVkIHdoZW4gdGhlIHNjZW5lIHdhcyBsb2FkZWRcbiAqIC0gQ29tcG9uZW50IGluc3RhbnRpYXRpb24gZmFpbGVkXG4gKlxuICogVGhpcyBkdW1teSBjb21wb25lbnQgaXMgdGh1cyB1c2VkIGFzIGEgcGxhY2Vob2xkZXIgYnkgdGhlIGVuZ2luZS5cbiAqL1xuZXhwb3J0IGNsYXNzIEJyb2tlbkNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ19fYnJva2VuLWNvbXBvbmVudF9fJztcbn1cbi8qKlxuICogTWVyZ2UgdGhlIGFzY2VuZGFudCBwcm9wZXJ0aWVzIG9mIGNsYXNzXG4gKlxuICogVGhpcyBtZXRob2Qgd2Fsa3MgdGhlIHByb3RvdHlwZSBjaGFpbiwgYW5kIG1lcmdlc1xuICogYWxsIHRoZSBwcm9wZXJ0aWVzIGZvdW5kIGluIHBhcmVudCBjb21wb25lbnRzLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBganNcbiAqIGltcG9ydCB7UHJvcGVydHksIGluaGVyaXRQcm9wZXJ0aWVzfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICpcbiAqIGNsYXNzIFBhcmVudCB7XG4gKiAgICAgc3RhdGljIFByb3BlcnRpZXMgPSB7IHBhcmVudFByb3A6IFByb3BlcnR5LnN0cmluZygncGFyZW50JykgfTtcbiAqIH1cbiAqXG4gKiBjbGFzcyBDaGlsZCBleHRlbmRzIFBhcmVudCB7XG4gKiAgICAgc3RhdGljIFByb3BlcnRpZXMgPSB7IGNoaWxkUHJvcDogUHJvcGVydHkuc3RyaW5nKCdjaGlsZCcpIH07XG4gKiB9XG4gKiBpbmhlcml0UHJvcGVydGllcyhDaGlsZCk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gdGFyZ2V0IFRoZSBjbGFzcyBpbiB3aGljaCBwcm9wZXJ0aWVzIHNob3VsZCBiZSBtZXJnZWRcbiAqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmhlcml0UHJvcGVydGllcyh0YXJnZXQpIHtcbiAgICBpZiAoIXRhcmdldC5UeXBlTmFtZSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGNoYWluID0gW107XG4gICAgbGV0IGN1cnIgPSB0YXJnZXQ7XG4gICAgd2hpbGUgKGN1cnIgJiYgIWlzQmFzZUNvbXBvbmVudENsYXNzKGN1cnIpKSB7XG4gICAgICAgIGNvbnN0IGNvbXAgPSBjdXJyO1xuICAgICAgICAvKiBTdG9wIGF0IHRoZSBmaXJzdCBjbGFzcyB0aGF0IGRvZXNuJ3QgcmVxdWlyZSBwcm9wZXJ0aWVzIG1lcmdpbmcgKi9cbiAgICAgICAgY29uc3QgbmVlZHNNZXJnZSA9IGNvbXAuaGFzT3duUHJvcGVydHkoJ0luaGVyaXRQcm9wZXJ0aWVzJylcbiAgICAgICAgICAgID8gY29tcC5Jbmhlcml0UHJvcGVydGllc1xuICAgICAgICAgICAgOiB0cnVlO1xuICAgICAgICBpZiAoIW5lZWRzTWVyZ2UpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgaWYgKGNvbXAuVHlwZU5hbWUgJiYgY29tcC5oYXNPd25Qcm9wZXJ0eSgnUHJvcGVydGllcycpKSB7XG4gICAgICAgICAgICBjaGFpbi5wdXNoKGNvbXApO1xuICAgICAgICB9XG4gICAgICAgIGN1cnIgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoY3Vycik7XG4gICAgfVxuICAgIC8qIE5vIHByb3RvdHlwZSBtZXJnZSBpcyBuZWVkZWQuICovXG4gICAgaWYgKCFjaGFpbi5sZW5ndGggfHwgKGNoYWluLmxlbmd0aCA9PT0gMSAmJiBjaGFpblswXSA9PT0gdGFyZ2V0KSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG1lcmdlZCA9IHt9O1xuICAgIGZvciAobGV0IGkgPSBjaGFpbi5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICBPYmplY3QuYXNzaWduKG1lcmdlZCwgY2hhaW5baV0uUHJvcGVydGllcyk7XG4gICAgfVxuICAgIHRhcmdldC5Qcm9wZXJ0aWVzID0gbWVyZ2VkO1xufVxuLyoqXG4gKiBOYXRpdmUgY29sbGlzaW9uIGNvbXBvbmVudC5cbiAqXG4gKiBQcm92aWRlcyBhY2Nlc3MgdG8gYSBuYXRpdmUgY29sbGlzaW9uIGNvbXBvbmVudCBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGNsYXNzIENvbGxpc2lvbkNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdjb2xsaXNpb24nO1xuICAgIGdldEV4dGVudHMob3V0ID0gbmV3IEZsb2F0MzJBcnJheSgzKSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfY29sbGlzaW9uX2NvbXBvbmVudF9nZXRfZXh0ZW50cyh0aGlzLl9pZCkgLyA0OyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgb3V0WzBdID0gd2FzbS5IRUFQRjMyW3B0cl07XG4gICAgICAgIG91dFsxXSA9IHdhc20uSEVBUEYzMltwdHIgKyAxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5IRUFQRjMyW3B0ciArIDJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKiogQ29sbGlzaW9uIGNvbXBvbmVudCBjb2xsaWRlciAqL1xuICAgIGdldCBjb2xsaWRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2NvbGxpc2lvbl9jb21wb25lbnRfZ2V0X2NvbGxpZGVyKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGNvbGxpc2lvbiBjb21wb25lbnQgY29sbGlkZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29sbGlkZXIgQ29sbGlkZXIgb2YgdGhlIGNvbGxpc2lvbiBjb21wb25lbnQuXG4gICAgICovXG4gICAgc2V0IGNvbGxpZGVyKGNvbGxpZGVyKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2NvbGxpc2lvbl9jb21wb25lbnRfc2V0X2NvbGxpZGVyKHRoaXMuX2lkLCBjb2xsaWRlcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIENvbGxpc2lvbkNvbXBvbmVudC5nZXRFeHRlbnRzfS5cbiAgICAgKlxuICAgICAqIEBub3RlIFByZWZlciB0byB1c2Uge0BsaW5rIENvbGxpc2lvbkNvbXBvbmVudC5nZXRFeHRlbnRzfSBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICovXG4gICAgZ2V0IGV4dGVudHMoKSB7XG4gICAgICAgIC8qKiBAdG9kbzogQnJlYWsgYXQgMi4wLjAuIERvIG5vdCBhbGxvdyBtb2RpZnlpbmcgbWVtb3J5IGluLXBsYWNlLiAqL1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkod2FzbS5IRUFQRjMyLmJ1ZmZlciwgd2FzbS5fd2xfY29sbGlzaW9uX2NvbXBvbmVudF9nZXRfZXh0ZW50cyh0aGlzLl9pZCksIDMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgY29sbGlzaW9uIGNvbXBvbmVudCBleHRlbnRzLlxuICAgICAqXG4gICAgICogSWYge0BsaW5rIGNvbGxpZGVyfSByZXR1cm5zIHtAbGluayBDb2xsaWRlci5TcGhlcmV9LCBvbmx5IHRoZSBmaXJzdFxuICAgICAqIGNvbXBvbmVudCBvZiB0aGUgcGFzc2VkIHZlY3RvciBpcyB1c2VkLlxuICAgICAqXG4gICAgICogRXhhbXBsZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogLy8gU3BhbnMgMSB1bml0IG9uIHRoZSB4LWF4aXMsIDIgb24gdGhlIHktYXhpcywgMyBvbiB0aGUgei1heGlzLlxuICAgICAqIGNvbGxpc2lvbi5leHRlbnQgPSBbMSwgMiwgM107XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXh0ZW50cyBFeHRlbnRzIG9mIHRoZSBjb2xsaXNpb24gY29tcG9uZW50LCBleHBlY3RzIGFcbiAgICAgKiAgICAgIDMgY29tcG9uZW50IGFycmF5LlxuICAgICAqL1xuICAgIHNldCBleHRlbnRzKGV4dGVudHMpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX2NvbGxpc2lvbl9jb21wb25lbnRfZ2V0X2V4dGVudHModGhpcy5faWQpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIHdhc20uSEVBUEYzMltwdHJdID0gZXh0ZW50c1swXTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDFdID0gZXh0ZW50c1sxXTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDJdID0gZXh0ZW50c1syXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGNvbGxpc2lvbiBjb21wb25lbnQgcmFkaXVzLlxuICAgICAqXG4gICAgICogQG5vdGUgSWYge0BsaW5rIGNvbGxpZGVyfSBpcyBub3Qge0BsaW5rIENvbGxpZGVyLlNwaGVyZX0sIHRoZSByZXR1cm5lZCB2YWx1ZVxuICAgICAqIGNvcnJlc3BvbmRzIHRvIHRoZSByYWRpdXMgb2YgYSBzcGhlcmUgZW5jbG9zaW5nIHRoZSBzaGFwZS5cbiAgICAgKlxuICAgICAqIEV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIHNwaGVyZS5yYWRpdXMgPSAzLjA7XG4gICAgICogY29uc29sZS5sb2coc3BoZXJlLnJhZGl1cyk7IC8vIDMuMFxuICAgICAqXG4gICAgICogYm94LmV4dGVudHMgPSBbMi4wLCAyLjAsIDIuMF07XG4gICAgICogY29uc29sZS5sb2coYm94LnJhZGl1cyk7IC8vIDEuNzMyLi4uXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKi9cbiAgICBnZXQgcmFkaXVzKCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgaWYgKHRoaXMuY29sbGlkZXIgPT09IENvbGxpZGVyLlNwaGVyZSlcbiAgICAgICAgICAgIHJldHVybiB3YXNtLkhFQVBGMzJbd2FzbS5fd2xfY29sbGlzaW9uX2NvbXBvbmVudF9nZXRfZXh0ZW50cyh0aGlzLl9pZCkgPj4gMl07XG4gICAgICAgIGNvbnN0IGV4dGVudHMgPSBuZXcgRmxvYXQzMkFycmF5KHdhc20uSEVBUEYzMi5idWZmZXIsIHdhc20uX3dsX2NvbGxpc2lvbl9jb21wb25lbnRfZ2V0X2V4dGVudHModGhpcy5faWQpLCAzKTtcbiAgICAgICAgY29uc3QgeDIgPSBleHRlbnRzWzBdICogZXh0ZW50c1swXTtcbiAgICAgICAgY29uc3QgeTIgPSBleHRlbnRzWzFdICogZXh0ZW50c1sxXTtcbiAgICAgICAgY29uc3QgejIgPSBleHRlbnRzWzJdICogZXh0ZW50c1syXTtcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydCh4MiArIHkyICsgejIpIC8gMjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGNvbGxpc2lvbiBjb21wb25lbnQgcmFkaXVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHJhZGl1cyBSYWRpdXMgb2YgdGhlIGNvbGxpc2lvbiBjb21wb25lbnRcbiAgICAgKlxuICAgICAqIEBub3RlIElmIHtAbGluayBjb2xsaWRlcn0gaXMgbm90IHtAbGluayBDb2xsaWRlci5TcGhlcmV9LFxuICAgICAqIHRoZSBleHRlbnRzIGFyZSBzZXQgdG8gZm9ybSBhIHNxdWFyZSB0aGF0IGZpdHMgYSBzcGhlcmUgd2l0aCB0aGUgcHJvdmlkZWQgcmFkaXVzLlxuICAgICAqXG4gICAgICogRXhhbXBsZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogYWFiYkNvbGxpc2lvbi5yYWRpdXMgPSAyLjA7IC8vIEFBQkIgZml0cyBhIHNwaGVyZSBvZiByYWRpdXMgMi4wXG4gICAgICogYm94Q29sbGlzaW9uLnJhZGl1cyA9IDMuMDsgLy8gQm94IG5vdyBmaXRzIGEgc3BoZXJlIG9mIHJhZGl1cyAzLjAsIGtlZXBpbmcgb3JpZW50YXRpb25cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqL1xuICAgIHNldCByYWRpdXMocmFkaXVzKSB7XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IHRoaXMuY29sbGlkZXIgPT09IENvbGxpZGVyLlNwaGVyZSA/IHJhZGl1cyA6ICgyICogcmFkaXVzKSAvIFNRUlRfMztcbiAgICAgICAgdGhpcy5leHRlbnRzLnNldChbbGVuZ3RoLCBsZW5ndGgsIGxlbmd0aF0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb2xsaXNpb24gY29tcG9uZW50IGdyb3VwLlxuICAgICAqXG4gICAgICogVGhlIGdyb3VwcyBpcyBhIGJpdG1hc2sgdGhhdCBpcyBjb21wYXJlZCB0byBvdGhlciBjb21wb25lbnRzIGluIHtAbGluayBDb2xsaXNpb25Db21wb25lbnQjcXVlcnlPdmVybGFwc31cbiAgICAgKiBvciB0aGUgZ3JvdXAgaW4ge0BsaW5rIFNjZW5lI3JheUNhc3R9LlxuICAgICAqXG4gICAgICogQ29sbGlkZXJzIHRoYXQgaGF2ZSBubyBjb21tb24gZ3JvdXBzIHdpbGwgbm90IG92ZXJsYXAgd2l0aCBlYWNoIG90aGVyLiBJZiBhIGNvbGxpZGVyXG4gICAgICogaGFzIG5vbmUgb2YgdGhlIGdyb3VwcyBzZXQgZm9yIHtAbGluayBTY2VuZSNyYXlDYXN0fSwgdGhlIHJheSB3aWxsIG5vdCBoaXQgaXQuXG4gICAgICpcbiAgICAgKiBFYWNoIGJpdCByZXByZXNlbnRzIGJlbG9uZ2luZyB0byBhIGdyb3VwLCBzZWUgZXhhbXBsZS5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogICAgLy8gYyBiZWxvbmdzIHRvIGdyb3VwIDJcbiAgICAgKiAgICBjLmdyb3VwID0gKDEgPDwgMik7XG4gICAgICpcbiAgICAgKiAgICAvLyBjIGJlbG9uZ3MgdG8gZ3JvdXAgMFxuICAgICAqICAgIGMuZ3JvdXAgPSAoMSA8PCAwKTtcbiAgICAgKlxuICAgICAqICAgIC8vIGMgYmVsb25ncyB0byBncm91cCAwICphbmQqIDJcbiAgICAgKiAgICBjLmdyb3VwID0gKDEgPDwgMCkgfCAoMSA8PCAyKTtcbiAgICAgKlxuICAgICAqICAgIChjLmdyb3VwICYgKDEgPDwgMikpICE9IDA7IC8vIHRydWVcbiAgICAgKiAgICAoYy5ncm91cCAmICgxIDw8IDcpKSAhPSAwOyAvLyBmYWxzZVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGdldCBncm91cCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2NvbGxpc2lvbl9jb21wb25lbnRfZ2V0X2dyb3VwKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGNvbGxpc2lvbiBjb21wb25lbnQgZ3JvdXAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZ3JvdXAgR3JvdXAgbWFzayBvZiB0aGUgY29sbGlzaW9uIGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBzZXQgZ3JvdXAoZ3JvdXApIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfY29sbGlzaW9uX2NvbXBvbmVudF9zZXRfZ3JvdXAodGhpcy5faWQsIGdyb3VwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUXVlcnkgb3ZlcmxhcHBpbmcgb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIFVzYWdlOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBjb2xsaXNpb24gPSBvYmplY3QuZ2V0Q29tcG9uZW50KCdjb2xsaXNpb24nKTtcbiAgICAgKiBjb25zdCBvdmVybGFwcyA9IGNvbGxpc2lvbi5xdWVyeU92ZXJsYXBzKCk7XG4gICAgICogZm9yKGNvbnN0IG90aGVyQ29sbGlzaW9uIG9mIG92ZXJsYXBzKSB7XG4gICAgICogICAgIGNvbnN0IG90aGVyT2JqZWN0ID0gb3RoZXJDb2xsaXNpb24ub2JqZWN0O1xuICAgICAqICAgICBjb25zb2xlLmxvZyhgQ29sbGlzaW9uIHdpdGggb2JqZWN0ICR7b3RoZXJPYmplY3Qub2JqZWN0SWR9YCk7XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHJldHVybnMgQ29sbGlzaW9uIGNvbXBvbmVudHMgb3ZlcmxhcHBpbmcgdGhpcyBjb2xsaWRlci5cbiAgICAgKi9cbiAgICBxdWVyeU92ZXJsYXBzKCkge1xuICAgICAgICBjb25zdCBjb3VudCA9IHRoaXMuZW5naW5lLndhc20uX3dsX2NvbGxpc2lvbl9jb21wb25lbnRfcXVlcnlfb3ZlcmxhcHModGhpcy5faWQsIHRoaXMuZW5naW5lLndhc20uX3RlbXBNZW0sIHRoaXMuZW5naW5lLndhc20uX3RlbXBNZW1TaXplID4+IDEpO1xuICAgICAgICBjb25zdCBvdmVybGFwcyA9IG5ldyBBcnJheShjb3VudCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLmVuZ2luZS53YXNtLl90ZW1wTWVtVWludDE2W2ldO1xuICAgICAgICAgICAgb3ZlcmxhcHNbaV0gPSB0aGlzLl9zY2VuZS5fY29tcG9uZW50cy53cmFwQ29sbGlzaW9uKGlkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3ZlcmxhcHM7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgQ29sbGlzaW9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjb2xsaWRlclwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIENvbGxpc2lvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiZXh0ZW50c1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIENvbGxpc2lvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiZ3JvdXBcIiwgbnVsbCk7XG4vKipcbiAqIE5hdGl2ZSB0ZXh0IGNvbXBvbmVudFxuICpcbiAqIFByb3ZpZGVzIGFjY2VzcyB0byBhIG5hdGl2ZSB0ZXh0IGNvbXBvbmVudCBpbnN0YW5jZVxuICovXG5leHBvcnQgY2xhc3MgVGV4dENvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICd0ZXh0JztcbiAgICAvKiogVGV4dCBjb21wb25lbnQgYWxpZ25tZW50LiAqL1xuICAgIGdldCBhbGlnbm1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9nZXRfaG9yaXpvbnRhbF9hbGlnbm1lbnQodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGV4dCBjb21wb25lbnQgYWxpZ25tZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIGFsaWdubWVudCBBbGlnbm1lbnQgZm9yIHRoZSB0ZXh0IGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBzZXQgYWxpZ25tZW50KGFsaWdubWVudCkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9zZXRfaG9yaXpvbnRhbF9hbGlnbm1lbnQodGhpcy5faWQsIGFsaWdubWVudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRleHQgY29tcG9uZW50IHZlcnRpY2FsIGFsaWdubWVudC5cbiAgICAgKiBAc2luY2UgMS4yLjBcbiAgICAgKi9cbiAgICBnZXQgdmVydGljYWxBbGlnbm1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9nZXRfdmVydGljYWxfYWxpZ25tZW50KHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRleHQgY29tcG9uZW50IHZlcnRpY2FsIGFsaWdubWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2ZXJ0aWNhbEFsaWdubWVudCBWZXJ0aWNhbCBmb3IgdGhlIHRleHQgY29tcG9uZW50LlxuICAgICAqIEBzaW5jZSAxLjIuMFxuICAgICAqL1xuICAgIHNldCB2ZXJ0aWNhbEFsaWdubWVudCh2ZXJ0aWNhbEFsaWdubWVudCkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9zZXRfdmVydGljYWxfYWxpZ25tZW50KHRoaXMuX2lkLCB2ZXJ0aWNhbEFsaWdubWVudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRleHQgY29tcG9uZW50IGp1c3RpZmljYXRpb24uXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBUZXh0Q29tcG9uZW50LnZlcnRpY2FsQWxpZ25tZW50fSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIGdldCBqdXN0aWZpY2F0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZXJ0aWNhbEFsaWdubWVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRleHQgY29tcG9uZW50IGp1c3RpZmljYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ganVzdGlmaWNhdGlvbiBKdXN0aWZpY2F0aW9uIGZvciB0aGUgdGV4dCBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBUZXh0Q29tcG9uZW50LnZlcnRpY2FsQWxpZ25tZW50fSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIHNldCBqdXN0aWZpY2F0aW9uKGp1c3RpZmljYXRpb24pIHtcbiAgICAgICAgdGhpcy52ZXJ0aWNhbEFsaWdubWVudCA9IGp1c3RpZmljYXRpb247XG4gICAgfVxuICAgIC8qKiBUZXh0IGNvbXBvbmVudCBjaGFyYWN0ZXIgc3BhY2luZy4gKi9cbiAgICBnZXQgY2hhcmFjdGVyU3BhY2luZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X2dldF9jaGFyYWN0ZXJfc3BhY2luZyh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0ZXh0IGNvbXBvbmVudCBjaGFyYWN0ZXIgc3BhY2luZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzcGFjaW5nIENoYXJhY3RlciBzcGFjaW5nIGZvciB0aGUgdGV4dCBjb21wb25lbnQuXG4gICAgICovXG4gICAgc2V0IGNoYXJhY3RlclNwYWNpbmcoc3BhY2luZykge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9zZXRfY2hhcmFjdGVyX3NwYWNpbmcodGhpcy5faWQsIHNwYWNpbmcpO1xuICAgIH1cbiAgICAvKiogVGV4dCBjb21wb25lbnQgbGluZSBzcGFjaW5nLiAqL1xuICAgIGdldCBsaW5lU3BhY2luZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X2dldF9saW5lX3NwYWNpbmcodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGV4dCBjb21wb25lbnQgbGluZSBzcGFjaW5nXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3BhY2luZyBMaW5lIHNwYWNpbmcgZm9yIHRoZSB0ZXh0IGNvbXBvbmVudFxuICAgICAqL1xuICAgIHNldCBsaW5lU3BhY2luZyhzcGFjaW5nKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X3NldF9saW5lX3NwYWNpbmcodGhpcy5faWQsIHNwYWNpbmcpO1xuICAgIH1cbiAgICAvKiogVGV4dCBjb21wb25lbnQgZWZmZWN0LiAqL1xuICAgIGdldCBlZmZlY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9nZXRfZWZmZWN0KHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRleHQgY29tcG9uZW50IGVmZmVjdFxuICAgICAqXG4gICAgICogQHBhcmFtIGVmZmVjdCBFZmZlY3QgZm9yIHRoZSB0ZXh0IGNvbXBvbmVudFxuICAgICAqL1xuICAgIHNldCBlZmZlY3QoZWZmZWN0KSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X3NldF9lZmZlY3QodGhpcy5faWQsIGVmZmVjdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRleHQgY29tcG9uZW50IGxpbmUgd3JhcCBtb2RlLlxuICAgICAqIEBzaW5jZSAxLjIuMVxuICAgICAqL1xuICAgIGdldCB3cmFwTW9kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X2dldF93cmFwTW9kZSh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0ZXh0IGNvbXBvbmVudCBsaW5lIHdyYXAgbW9kZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB3cmFwTW9kZSBMaW5lIHdyYXAgbW9kZSBmb3IgdGhlIHRleHQgY29tcG9uZW50LlxuICAgICAqIEBzaW5jZSAxLjIuMVxuICAgICAqL1xuICAgIHNldCB3cmFwTW9kZSh3cmFwTW9kZSkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9zZXRfd3JhcE1vZGUodGhpcy5faWQsIHdyYXBNb2RlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGV4dCBjb21wb25lbnQgbGluZSB3cmFwIHdpZHRoLlxuICAgICAqIEBzaW5jZSAxLjIuMVxuICAgICAqL1xuICAgIGdldCB3cmFwV2lkdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9nZXRfd3JhcFdpZHRoKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRleHQgY29tcG9uZW50IGxpbmUgd3JhcCB3aWR0aC5cbiAgICAgKlxuICAgICAqIE9ubHkgdGFrZXMgZWZmZWN0IHdoZW4ge0BsaW5rIHdyYXBNb2RlfSBpcyBzb21ldGhpbmcgb3RoZXIgdGhhblxuICAgICAqIHtAbGluayBUZXh0V3JhcE1vZGUuTm9uZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gd2lkdGggTGluZSB3cmFwIHdpZHRoIGZvciB0aGUgdGV4dCBjb21wb25lbnQuXG4gICAgICogQHNpbmNlIDEuMi4xXG4gICAgICovXG4gICAgc2V0IHdyYXBXaWR0aCh3aWR0aCkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9zZXRfd3JhcFdpZHRoKHRoaXMuX2lkLCB3aWR0aCk7XG4gICAgfVxuICAgIC8qKiBUZXh0IGNvbXBvbmVudCB0ZXh0LiAqL1xuICAgIGdldCB0ZXh0KCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfdGV4dF9jb21wb25lbnRfZ2V0X3RleHQodGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gd2FzbS5VVEY4VG9TdHJpbmcocHRyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRleHQgY29tcG9uZW50IHRleHQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGV4dCBUZXh0IG9mIHRoZSB0ZXh0IGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBzZXQgdGV4dCh0ZXh0KSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl93bF90ZXh0X2NvbXBvbmVudF9zZXRfdGV4dCh0aGlzLl9pZCwgd2FzbS50ZW1wVVRGOCh0ZXh0LnRvU3RyaW5nKCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IG1hdGVyaWFsIHRvIHJlbmRlciB0aGUgdGV4dCB3aXRoLlxuICAgICAqXG4gICAgICogQHBhcmFtIG1hdGVyaWFsIE5ldyBtYXRlcmlhbC5cbiAgICAgKi9cbiAgICBzZXQgbWF0ZXJpYWwobWF0ZXJpYWwpIHtcbiAgICAgICAgY29uc3QgbWF0SW5kZXggPSBtYXRlcmlhbCA/IG1hdGVyaWFsLl9pZCA6IDA7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X3NldF9tYXRlcmlhbCh0aGlzLl9pZCwgbWF0SW5kZXgpO1xuICAgIH1cbiAgICAvKiogTWF0ZXJpYWwgdXNlZCB0byByZW5kZXIgdGhlIHRleHQuICovXG4gICAgZ2V0IG1hdGVyaWFsKCkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X2dldF9tYXRlcmlhbCh0aGlzLl9pZCk7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS5tYXRlcmlhbHMud3JhcChpbmRleCk7XG4gICAgfVxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRCb3VuZGluZ0JveEZvclRleHQodGV4dCwgb3V0ID0gbmV3IEZsb2F0MzJBcnJheSg0KSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgLyogT2Zmc2V0IGJ5IDQgZmxvYXRzLCBvdXRwdXQgaXMgd3JpdHRlbiB0byBfdGVtcE1lbSAqL1xuICAgICAgICBjb25zdCB0ZXh0UHRyID0gd2FzbS50ZW1wVVRGOCh0ZXh0LCA0ICogNCk7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X2dldF9ib3VuZGluZ0JveCh0aGlzLl9pZCwgdGV4dFB0ciwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIG91dFszXSA9IHdhc20uX3RlbXBNZW1GbG9hdFszXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldEJvdW5kaW5nQm94KG91dCA9IG5ldyBGbG9hdDMyQXJyYXkoNCkpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X2dldF9ib3VuZGluZ0JveCh0aGlzLl9pZCwgMCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIG91dFszXSA9IHdhc20uX3RlbXBNZW1GbG9hdFszXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBUZXh0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJhbGlnbm1lbnRcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBUZXh0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ2ZXJ0aWNhbEFsaWdubWVudFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFRleHRDb21wb25lbnQucHJvdG90eXBlLCBcImp1c3RpZmljYXRpb25cIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBUZXh0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJjaGFyYWN0ZXJTcGFjaW5nXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgVGV4dENvbXBvbmVudC5wcm90b3R5cGUsIFwibGluZVNwYWNpbmdcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBUZXh0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJlZmZlY3RcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBUZXh0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ3cmFwTW9kZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFRleHRDb21wb25lbnQucHJvdG90eXBlLCBcIndyYXBXaWR0aFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFRleHRDb21wb25lbnQucHJvdG90eXBlLCBcInRleHRcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBUZXh0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJtYXRlcmlhbFwiLCBudWxsKTtcbi8qKlxuICogTmF0aXZlIHZpZXcgY29tcG9uZW50LlxuICpcbiAqIFByb3ZpZGVzIGFjY2VzcyB0byBhIG5hdGl2ZSB2aWV3IGNvbXBvbmVudCBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFZpZXdDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAndmlldyc7XG4gICAgZ2V0UHJvamVjdGlvbk1hdHJpeChvdXQgPSBuZXcgRmxvYXQzMkFycmF5KDE2KSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfdmlld19jb21wb25lbnRfZ2V0X3Byb2plY3Rpb25fbWF0cml4KHRoaXMuX2lkKSAvIDQ7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyArK2kpIHtcbiAgICAgICAgICAgIG91dFtpXSA9IHdhc20uSEVBUEYzMltwdHIgKyBpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBWaWV3Q29tcG9uZW50LmdldFByb2plY3Rpb25NYXRyaXh9LlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgVmlld0NvbXBvbmVudC5nZXRQcm9qZWN0aW9uTWF0cml4fSBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICovXG4gICAgZ2V0IHByb2plY3Rpb25NYXRyaXgoKSB7XG4gICAgICAgIC8qKiBAdG9kbzogQnJlYWsgYXQgMi4wLjAuIERvIG5vdCBhbGxvdyBtb2RpZnlpbmcgbWVtb3J5IGluLXBsYWNlLiAqL1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkod2FzbS5IRUFQRjMyLmJ1ZmZlciwgd2FzbS5fd2xfdmlld19jb21wb25lbnRfZ2V0X3Byb2plY3Rpb25fbWF0cml4KHRoaXMuX2lkKSwgMTYpO1xuICAgIH1cbiAgICAvKiogVmlld0NvbXBvbmVudCBuZWFyIGNsaXBwaW5nIHBsYW5lIHZhbHVlLiAqL1xuICAgIGdldCBuZWFyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfdmlld19jb21wb25lbnRfZ2V0X25lYXIodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgbmVhciBjbGlwcGluZyBwbGFuZSBkaXN0YW5jZSBmb3IgdGhlIHZpZXcuXG4gICAgICpcbiAgICAgKiBJZiBhbiBYUiBzZXNzaW9uIGlzIGFjdGl2ZSwgdGhlIGNoYW5nZSB3aWxsIGFwcGx5IGluIHRoZVxuICAgICAqIGZvbGxvd2luZyBmcmFtZSwgb3RoZXJ3aXNlIHRoZSBjaGFuZ2UgaXMgaW1tZWRpYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5lYXIgTmVhciBkZXB0aCB2YWx1ZS5cbiAgICAgKi9cbiAgICBzZXQgbmVhcihuZWFyKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3ZpZXdfY29tcG9uZW50X3NldF9uZWFyKHRoaXMuX2lkLCBuZWFyKTtcbiAgICB9XG4gICAgLyoqIEZhciBjbGlwcGluZyBwbGFuZSB2YWx1ZS4gKi9cbiAgICBnZXQgZmFyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfdmlld19jb21wb25lbnRfZ2V0X2Zhcih0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBmYXIgY2xpcHBpbmcgcGxhbmUgZGlzdGFuY2UgZm9yIHRoZSB2aWV3LlxuICAgICAqXG4gICAgICogSWYgYW4gWFIgc2Vzc2lvbiBpcyBhY3RpdmUsIHRoZSBjaGFuZ2Ugd2lsbCBhcHBseSBpbiB0aGVcbiAgICAgKiBmb2xsb3dpbmcgZnJhbWUsIG90aGVyd2lzZSB0aGUgY2hhbmdlIGlzIGltbWVkaWF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmYXIgTmVhciBkZXB0aCB2YWx1ZS5cbiAgICAgKi9cbiAgICBzZXQgZmFyKGZhcikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF92aWV3X2NvbXBvbmVudF9zZXRfZmFyKHRoaXMuX2lkLCBmYXIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGhvcml6b250YWwgZmllbGQgb2YgdmlldyBmb3IgdGhlIHZpZXcsICoqaW4gZGVncmVlcyoqLlxuICAgICAqXG4gICAgICogSWYgYW4gWFIgc2Vzc2lvbiBpcyBhY3RpdmUsIHRoaXMgcmV0dXJucyB0aGUgZmllbGQgb2YgdmlldyByZXBvcnRlZCBieVxuICAgICAqIHRoZSBkZXZpY2UsIHJlZ2FyZGxlc3Mgb2YgdGhlIGZvdiB0aGF0IHdhcyBzZXQuXG4gICAgICovXG4gICAgZ2V0IGZvdigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3ZpZXdfY29tcG9uZW50X2dldF9mb3YodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGhvcml6b250YWwgZmllbGQgb2YgdmlldyBmb3IgdGhlIHZpZXcsICoqaW4gZGVncmVlcyoqLlxuICAgICAqXG4gICAgICogSWYgYW4gWFIgc2Vzc2lvbiBpcyBhY3RpdmUsIHRoZSBmaWVsZCBvZiB2aWV3IHJlcG9ydGVkIGJ5IHRoZSBkZXZpY2UgaXNcbiAgICAgKiB1c2VkIGFuZCB0aGlzIHZhbHVlIGlzIGlnbm9yZWQuIEFmdGVyIHRoZSBYUiBzZXNzaW9uIGVuZHMsIHRoZSBuZXcgdmFsdWVcbiAgICAgKiBpcyBhcHBsaWVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZvdiBIb3Jpem9udGFsIGZpZWxkIG9mIHZpZXcsICoqaW4gZGVncmVlcyoqLlxuICAgICAqL1xuICAgIHNldCBmb3YoZm92KSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3ZpZXdfY29tcG9uZW50X3NldF9mb3YodGhpcy5faWQsIGZvdik7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgZW51bWVyYWJsZSgpXG5dLCBWaWV3Q29tcG9uZW50LnByb3RvdHlwZSwgXCJwcm9qZWN0aW9uTWF0cml4XCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgVmlld0NvbXBvbmVudC5wcm90b3R5cGUsIFwibmVhclwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFZpZXdDb21wb25lbnQucHJvdG90eXBlLCBcImZhclwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFZpZXdDb21wb25lbnQucHJvdG90eXBlLCBcImZvdlwiLCBudWxsKTtcbi8qKlxuICogTmF0aXZlIGlucHV0IGNvbXBvbmVudC5cbiAqXG4gKiBQcm92aWRlcyBhY2Nlc3MgdG8gYSBuYXRpdmUgaW5wdXQgY29tcG9uZW50IGluc3RhbmNlLlxuICovXG5leHBvcnQgY2xhc3MgSW5wdXRDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnaW5wdXQnO1xuICAgIC8qKiBJbnB1dCBjb21wb25lbnQgdHlwZSAqL1xuICAgIGdldCBpbnB1dFR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9pbnB1dF9jb21wb25lbnRfZ2V0X3R5cGUodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgaW5wdXQgY29tcG9uZW50IHR5cGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW1zIE5ldyBpbnB1dCBjb21wb25lbnQgdHlwZS5cbiAgICAgKi9cbiAgICBzZXQgaW5wdXRUeXBlKHR5cGUpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfaW5wdXRfY29tcG9uZW50X3NldF90eXBlKHRoaXMuX2lkLCB0eXBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2ViWFIgRGV2aWNlIEFQSSBpbnB1dCBzb3VyY2UgYXNzb2NpYXRlZCB3aXRoIHRoaXMgaW5wdXQgY29tcG9uZW50LFxuICAgICAqIGlmIHR5cGUge0BsaW5rIElucHV0VHlwZS5Db250cm9sbGVyTGVmdH0gb3Ige0BsaW5rIElucHV0VHlwZS5Db250cm9sbGVyUmlnaHR9LlxuICAgICAqL1xuICAgIGdldCB4cklucHV0U291cmNlKCkge1xuICAgICAgICBjb25zdCB4ciA9IHRoaXMuZW5naW5lLnhyO1xuICAgICAgICBpZiAoIXhyKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGZvciAobGV0IGlucHV0U291cmNlIG9mIHhyLnNlc3Npb24uaW5wdXRTb3VyY2VzKSB7XG4gICAgICAgICAgICBpZiAoaW5wdXRTb3VyY2UuaGFuZGVkbmVzcyA9PSB0aGlzLmhhbmRlZG5lc3MpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5wdXRTb3VyY2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqICdsZWZ0JywgJ3JpZ2h0JyBvciBgbnVsbGAgZGVwZW5kaW5nIG9uIHRoZSB7QGxpbmsgSW5wdXRDb21wb25lbnQjaW5wdXRUeXBlfS5cbiAgICAgKi9cbiAgICBnZXQgaGFuZGVkbmVzcygpIHtcbiAgICAgICAgY29uc3QgaW5wdXRUeXBlID0gdGhpcy5pbnB1dFR5cGU7XG4gICAgICAgIGlmIChpbnB1dFR5cGUgPT0gSW5wdXRUeXBlLkNvbnRyb2xsZXJSaWdodCB8fFxuICAgICAgICAgICAgaW5wdXRUeXBlID09IElucHV0VHlwZS5SYXlSaWdodCB8fFxuICAgICAgICAgICAgaW5wdXRUeXBlID09IElucHV0VHlwZS5FeWVSaWdodClcbiAgICAgICAgICAgIHJldHVybiAncmlnaHQnO1xuICAgICAgICBpZiAoaW5wdXRUeXBlID09IElucHV0VHlwZS5Db250cm9sbGVyTGVmdCB8fFxuICAgICAgICAgICAgaW5wdXRUeXBlID09IElucHV0VHlwZS5SYXlMZWZ0IHx8XG4gICAgICAgICAgICBpbnB1dFR5cGUgPT0gSW5wdXRUeXBlLkV5ZUxlZnQpXG4gICAgICAgICAgICByZXR1cm4gJ2xlZnQnO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBJbnB1dENvbXBvbmVudC5wcm90b3R5cGUsIFwiaW5wdXRUeXBlXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgZW51bWVyYWJsZSgpXG5dLCBJbnB1dENvbXBvbmVudC5wcm90b3R5cGUsIFwieHJJbnB1dFNvdXJjZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIGVudW1lcmFibGUoKVxuXSwgSW5wdXRDb21wb25lbnQucHJvdG90eXBlLCBcImhhbmRlZG5lc3NcIiwgbnVsbCk7XG4vKipcbiAqIE5hdGl2ZSBsaWdodCBjb21wb25lbnQuXG4gKlxuICogUHJvdmlkZXMgYWNjZXNzIHRvIGEgbmF0aXZlIGxpZ2h0IGNvbXBvbmVudCBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGNsYXNzIExpZ2h0Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAvKiogQG92ZXJyaWRlICovXG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2xpZ2h0JztcbiAgICBnZXRDb2xvcihvdXQgPSBuZXcgRmxvYXQzMkFycmF5KDMpKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9saWdodF9jb21wb25lbnRfZ2V0X2NvbG9yKHRoaXMuX2lkKSAvIDQ7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICBvdXRbMF0gPSB3YXNtLkhFQVBGMzJbcHRyXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5IRUFQRjMyW3B0ciArIDFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMl07XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBsaWdodCBjb2xvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjIE5ldyBjb2xvciBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgMyBlbGVtZW50cy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBzZXRDb2xvcihjKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9saWdodF9jb21wb25lbnRfZ2V0X2NvbG9yKHRoaXMuX2lkKSAvIDQ7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyXSA9IGNbMF07XG4gICAgICAgIHdhc20uSEVBUEYzMltwdHIgKyAxXSA9IGNbMV07XG4gICAgICAgIHdhc20uSEVBUEYzMltwdHIgKyAyXSA9IGNbMl07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZpZXcgb24gdGhlIGxpZ2h0IGNvbG9yLlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgZ2V0Q29sb3J9IGluIHBlcmZvcm1hbmNlLWNyaXRpY2FsIGNvZGUuXG4gICAgICovXG4gICAgZ2V0IGNvbG9yKCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkod2FzbS5IRUFQRjMyLmJ1ZmZlciwgd2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X2dldF9jb2xvcih0aGlzLl9pZCksIDMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgbGlnaHQgY29sb3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYyBDb2xvciBvZiB0aGUgbGlnaHQgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgc2V0Q29sb3J9IGluIHBlcmZvcm1hbmNlLWNyaXRpY2FsIGNvZGUuXG4gICAgICovXG4gICAgc2V0IGNvbG9yKGMpIHtcbiAgICAgICAgdGhpcy5jb2xvci5zZXQoYyk7XG4gICAgfVxuICAgIC8qKiBMaWdodCB0eXBlLiAqL1xuICAgIGdldCBsaWdodFR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfZ2V0X3R5cGUodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgbGlnaHQgdHlwZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBsaWdodFR5cGUgVHlwZSBvZiB0aGUgbGlnaHQgY29tcG9uZW50LlxuICAgICAqL1xuICAgIHNldCBsaWdodFR5cGUodCkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfc2V0X3R5cGUodGhpcy5faWQsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMaWdodCBpbnRlbnNpdHkuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgZ2V0IGludGVuc2l0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfaW50ZW5zaXR5KHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGxpZ2h0IGludGVuc2l0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbnRlbnNpdHkgSW50ZW5zaXR5IG9mIHRoZSBsaWdodCBjb21wb25lbnQuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgc2V0IGludGVuc2l0eShpbnRlbnNpdHkpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X3NldF9pbnRlbnNpdHkodGhpcy5faWQsIGludGVuc2l0eSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE91dGVyIGFuZ2xlIGZvciBzcG90IGxpZ2h0cywgaW4gZGVncmVlcy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBnZXQgb3V0ZXJBbmdsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfb3V0ZXJBbmdsZSh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBvdXRlciBhbmdsZSBmb3Igc3BvdCBsaWdodHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYW5nbGUgT3V0ZXIgYW5nbGUsIGluIGRlZ3JlZXMuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgc2V0IG91dGVyQW5nbGUoYW5nbGUpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X3NldF9vdXRlckFuZ2xlKHRoaXMuX2lkLCBhbmdsZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElubmVyIGFuZ2xlIGZvciBzcG90IGxpZ2h0cywgaW4gZGVncmVlcy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBnZXQgaW5uZXJBbmdsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfaW5uZXJBbmdsZSh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBpbm5lciBhbmdsZSBmb3Igc3BvdCBsaWdodHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYW5nbGUgSW5uZXIgYW5nbGUsIGluIGRlZ3JlZXMuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgc2V0IGlubmVyQW5nbGUoYW5nbGUpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X3NldF9pbm5lckFuZ2xlKHRoaXMuX2lkLCBhbmdsZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIGxpZ2h0IGNhc3RzIHNoYWRvd3MuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgZ2V0IHNoYWRvd3MoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfc2hhZG93cyh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRoZSBsaWdodCBjYXN0cyBzaGFkb3dzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGIgV2hldGhlciB0aGUgbGlnaHQgY2FzdHMgc2hhZG93cy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBzZXQgc2hhZG93cyhiKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9zZXRfc2hhZG93cyh0aGlzLl9pZCwgYik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJhbmdlIGZvciBzaGFkb3dzLlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIGdldCBzaGFkb3dSYW5nZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfc2hhZG93UmFuZ2UodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgcmFuZ2UgZm9yIHNoYWRvd3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmFuZ2UgUmFuZ2UgZm9yIHNoYWRvd3MuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgc2V0IHNoYWRvd1JhbmdlKHJhbmdlKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9zZXRfc2hhZG93UmFuZ2UodGhpcy5faWQsIHJhbmdlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmlhcyB2YWx1ZSBmb3Igc2hhZG93cy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBnZXQgc2hhZG93QmlhcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfc2hhZG93Qmlhcyh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBiaWFzIHZhbHVlIGZvciBzaGFkb3dzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJpYXMgQmlhcyBmb3Igc2hhZG93cy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBzZXQgc2hhZG93QmlhcyhiaWFzKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9zZXRfc2hhZG93Qmlhcyh0aGlzLl9pZCwgYmlhcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vcm1hbCBiaWFzIHZhbHVlIGZvciBzaGFkb3dzLlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIGdldCBzaGFkb3dOb3JtYWxCaWFzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X2dldF9zaGFkb3dOb3JtYWxCaWFzKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IG5vcm1hbCBiaWFzIHZhbHVlIGZvciBzaGFkb3dzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJpYXMgTm9ybWFsIGJpYXMgZm9yIHNoYWRvd3MuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgc2V0IHNoYWRvd05vcm1hbEJpYXMoYmlhcykge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfc2V0X3NoYWRvd05vcm1hbEJpYXModGhpcy5faWQsIGJpYXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUZXhlbCBzaXplIGZvciBzaGFkb3dzLlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIGdldCBzaGFkb3dUZXhlbFNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfZ2V0X3NoYWRvd1RleGVsU2l6ZSh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0ZXhlbCBzaXplIGZvciBzaGFkb3dzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNpemUgVGV4ZWwgc2l6ZSBmb3Igc2hhZG93cy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBzZXQgc2hhZG93VGV4ZWxTaXplKHNpemUpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X3NldF9zaGFkb3dUZXhlbFNpemUodGhpcy5faWQsIHNpemUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYXNjYWRlIGNvdW50IGZvciB7QGxpbmsgTGlnaHRUeXBlLlN1bn0gc2hhZG93cy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBnZXQgY2FzY2FkZUNvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X2dldF9jYXNjYWRlQ291bnQodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgY2FzY2FkZSBjb3VudCBmb3Ige0BsaW5rIExpZ2h0VHlwZS5TdW59IHNoYWRvd3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY291bnQgQ2FzY2FkZSBjb3VudC5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBzZXQgY2FzY2FkZUNvdW50KGNvdW50KSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9zZXRfY2FzY2FkZUNvdW50KHRoaXMuX2lkLCBjb3VudCk7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgTGlnaHRDb21wb25lbnQucHJvdG90eXBlLCBcImNvbG9yXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgTGlnaHRDb21wb25lbnQucHJvdG90eXBlLCBcImxpZ2h0VHlwZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIExpZ2h0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJpbnRlbnNpdHlcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBMaWdodENvbXBvbmVudC5wcm90b3R5cGUsIFwib3V0ZXJBbmdsZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIExpZ2h0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJpbm5lckFuZ2xlXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgTGlnaHRDb21wb25lbnQucHJvdG90eXBlLCBcInNoYWRvd3NcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBMaWdodENvbXBvbmVudC5wcm90b3R5cGUsIFwic2hhZG93UmFuZ2VcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBMaWdodENvbXBvbmVudC5wcm90b3R5cGUsIFwic2hhZG93Qmlhc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIExpZ2h0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzaGFkb3dOb3JtYWxCaWFzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgTGlnaHRDb21wb25lbnQucHJvdG90eXBlLCBcInNoYWRvd1RleGVsU2l6ZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIExpZ2h0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJjYXNjYWRlQ291bnRcIiwgbnVsbCk7XG4vKipcbiAqIE5hdGl2ZSBhbmltYXRpb24gY29tcG9uZW50LlxuICpcbiAqIFByb3ZpZGVzIGFjY2VzcyB0byBhIG5hdGl2ZSBhbmltYXRpb24gY29tcG9uZW50IGluc3RhbmNlLlxuICovXG5leHBvcnQgY2xhc3MgQW5pbWF0aW9uQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAvKiogQG92ZXJyaWRlICovXG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2FuaW1hdGlvbic7XG4gICAgLyoqXG4gICAgICogRW1pdHRlciBmb3IgYW5pbWF0aW9uIGV2ZW50cyB0cmlnZ2VyZWQgb24gdGhpcyBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBUaGUgZmlyc3QgYXJndW1lbnQgaXMgdGhlIG5hbWUgb2YgdGhlIGV2ZW50LlxuICAgICAqL1xuICAgIG9uRXZlbnQgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKlxuICAgICAqIFNldCBhbmltYXRpb24gdG8gcGxheS5cbiAgICAgKlxuICAgICAqIE1ha2Ugc3VyZSB0byB7QGxpbmsgQW5pbWF0aW9uI3JldGFyZ2V0fSB0aGUgYW5pbWF0aW9uIHRvIGFmZmVjdCB0aGVcbiAgICAgKiByaWdodCBvYmplY3RzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFuaW0gQW5pbWF0aW9uIHRvIHBsYXkuXG4gICAgICovXG4gICAgc2V0IGFuaW1hdGlvbihhbmltKSB7XG4gICAgICAgIHRoaXMuc2NlbmUuYXNzZXJ0T3JpZ2luKGFuaW0pO1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9hbmltYXRpb25fY29tcG9uZW50X3NldF9hbmltYXRpb24odGhpcy5faWQsIGFuaW0gPyBhbmltLl9pZCA6IDApO1xuICAgIH1cbiAgICAvKiogQW5pbWF0aW9uIHNldCBmb3IgdGhpcyBjb21wb25lbnQgKi9cbiAgICBnZXQgYW5pbWF0aW9uKCkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfZ2V0X2FuaW1hdGlvbih0aGlzLl9pZCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zY2VuZS5hbmltYXRpb25zLndyYXAoaW5kZXgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgcGxheSBjb3VudC4gU2V0IHRvIGAwYCB0byBsb29wIGluZGVmaW5pdGVseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwbGF5Q291bnQgTnVtYmVyIG9mIHRpbWVzIHRvIHJlcGVhdCB0aGUgYW5pbWF0aW9uLlxuICAgICAqL1xuICAgIHNldCBwbGF5Q291bnQocGxheUNvdW50KSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfc2V0X3BsYXlDb3VudCh0aGlzLl9pZCwgcGxheUNvdW50KTtcbiAgICB9XG4gICAgLyoqIE51bWJlciBvZiB0aW1lcyB0aGUgYW5pbWF0aW9uIGlzIHBsYXllZC4gKi9cbiAgICBnZXQgcGxheUNvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9nZXRfcGxheUNvdW50KHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHNwZWVkLiBTZXQgdG8gbmVnYXRpdmUgdmFsdWVzIHRvIHJ1biB0aGUgYW5pbWF0aW9uIGJhY2t3YXJkcy5cbiAgICAgKlxuICAgICAqIFNldHRpbmcgc3BlZWQgaGFzIGFuIGltbWVkaWF0ZSBlZmZlY3QgZm9yIHRoZSBjdXJyZW50IGZyYW1lJ3MgdXBkYXRlXG4gICAgICogYW5kIHdpbGwgY29udGludWUgd2l0aCB0aGUgc3BlZWQgZnJvbSB0aGUgY3VycmVudCBwb2ludCBpbiB0aGUgYW5pbWF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNwZWVkIE5ldyBzcGVlZCBhdCB3aGljaCB0byBwbGF5IHRoZSBhbmltYXRpb24uXG4gICAgICogQHNpbmNlIDAuOC4xMFxuICAgICAqL1xuICAgIHNldCBzcGVlZChzcGVlZCkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9hbmltYXRpb25fY29tcG9uZW50X3NldF9zcGVlZCh0aGlzLl9pZCwgc3BlZWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVlZCBmYWN0b3IgYXQgd2hpY2ggdGhlIGFuaW1hdGlvbiBpcyBwbGF5ZWQuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjEwXG4gICAgICovXG4gICAgZ2V0IHNwZWVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9nZXRfc3BlZWQodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKiogQ3VycmVudCBwbGF5aW5nIHN0YXRlIG9mIHRoZSBhbmltYXRpb24gKi9cbiAgICBnZXQgc3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9hbmltYXRpb25fY29tcG9uZW50X3N0YXRlKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGxheSBhbmltYXRpb24uXG4gICAgICpcbiAgICAgKiBJZiB0aGUgYW5pbWF0aW9uIGlzIGN1cnJlbnRseSBwYXVzZWQsIHJlc3VtZXMgZnJvbSB0aGF0IHBvc2l0aW9uLiBJZiB0aGVcbiAgICAgKiBhbmltYXRpb24gaXMgYWxyZWFkeSBwbGF5aW5nLCBkb2VzIG5vdGhpbmcuXG4gICAgICpcbiAgICAgKiBUbyByZXN0YXJ0IHRoZSBhbmltYXRpb24sIHtAbGluayBBbmltYXRpb25Db21wb25lbnQjc3RvcH0gaXQgZmlyc3QuXG4gICAgICovXG4gICAgcGxheSgpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9wbGF5KHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqIFN0b3AgYW5pbWF0aW9uLiAqL1xuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfc3RvcCh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKiBQYXVzZSBhbmltYXRpb24uICovXG4gICAgcGF1c2UoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfcGF1c2UodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZhbHVlIG9mIGEgZmxvYXQgcGFyYW1ldGVyIGluIHRoZSBhdHRhY2hlZCBncmFwaC5cbiAgICAgKiBUaHJvd3MgaWYgdGhlIHBhcmFtZXRlciBpcyBtaXNzaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgcGFyYW1ldGVyLlxuICAgICAqIEBzaW5jZSAxLjIuMFxuICAgICAqL1xuICAgIGdldEZsb2F0UGFyYW1ldGVyKG5hbWUpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGluZGV4ID0gd2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9nZXRHcmFwaFBhcmFtSW5kZXgodGhpcy5faWQsIHdhc20udGVtcFVURjgobmFtZSkpO1xuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgTWlzc2luZyBwYXJhbWV0ZXIgJyR7bmFtZX0nYCk7XG4gICAgICAgIH1cbiAgICAgICAgd2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9nZXRHcmFwaFBhcmFtVmFsdWUodGhpcy5faWQsIGluZGV4LCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgcmV0dXJuIHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB2YWx1ZSBvZiBhIGZsb2F0IHBhcmFtZXRlciBpbiB0aGUgYXR0YWNoZWQgZ3JhcGhcbiAgICAgKiBUaHJvd3MgaWYgdGhlIHBhcmFtZXRlciBpcyBtaXNzaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgcGFyYW1ldGVyLlxuICAgICAqIEBwYXJhbSB2YWx1ZSBGbG9hdCB2YWx1ZSB0byBzZXQuXG4gICAgICogQHJldHVybnMgMSBpZiB0aGUgcGFyYW1ldGVyIHdhcyBzdWNjZXNzZnVsbHkgc2V0LCAwIG9uIGZhaWwuXG4gICAgICogQHNpbmNlIDEuMi4wXG4gICAgICovXG4gICAgc2V0RmxvYXRQYXJhbWV0ZXIobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGluZGV4ID0gd2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9nZXRHcmFwaFBhcmFtSW5kZXgodGhpcy5faWQsIHdhc20udGVtcFVURjgobmFtZSkpO1xuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgTWlzc2luZyBwYXJhbWV0ZXIgJyR7bmFtZX0nYCk7XG4gICAgICAgIH1cbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzBdID0gdmFsdWU7XG4gICAgICAgIHdhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfc2V0R3JhcGhQYXJhbVZhbHVlKHRoaXMuX2lkLCBpbmRleCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgQW5pbWF0aW9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJhbmltYXRpb25cIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBBbmltYXRpb25Db21wb25lbnQucHJvdG90eXBlLCBcInBsYXlDb3VudFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIEFuaW1hdGlvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwic3BlZWRcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBlbnVtZXJhYmxlKClcbl0sIEFuaW1hdGlvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwic3RhdGVcIiwgbnVsbCk7XG4vKipcbiAqIE5hdGl2ZSBtZXNoIGNvbXBvbmVudC5cbiAqXG4gKiBQcm92aWRlcyBhY2Nlc3MgdG8gYSBuYXRpdmUgbWVzaCBjb21wb25lbnQgaW5zdGFuY2UuXG4gKi9cbmV4cG9ydCBjbGFzcyBNZXNoQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAvKiogQG92ZXJyaWRlICovXG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ21lc2gnO1xuICAgIC8qKlxuICAgICAqIFNldCBtYXRlcmlhbCB0byByZW5kZXIgdGhlIG1lc2ggd2l0aC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtYXRlcmlhbCBNYXRlcmlhbCB0byByZW5kZXIgdGhlIG1lc2ggd2l0aC5cbiAgICAgKi9cbiAgICBzZXQgbWF0ZXJpYWwobWF0ZXJpYWwpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfbWVzaF9jb21wb25lbnRfc2V0X21hdGVyaWFsKHRoaXMuX2lkLCBtYXRlcmlhbCA/IG1hdGVyaWFsLl9pZCA6IDApO1xuICAgIH1cbiAgICAvKiogTWF0ZXJpYWwgdXNlZCB0byByZW5kZXIgdGhlIG1lc2guICovXG4gICAgZ2V0IG1hdGVyaWFsKCkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZW5naW5lLndhc20uX3dsX21lc2hfY29tcG9uZW50X2dldF9tYXRlcmlhbCh0aGlzLl9pZCk7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS5tYXRlcmlhbHMud3JhcChpbmRleCk7XG4gICAgfVxuICAgIC8qKiBNZXNoIHJlbmRlcmVkIGJ5IHRoaXMgY29tcG9uZW50LiAqL1xuICAgIGdldCBtZXNoKCkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZW5naW5lLndhc20uX3dsX21lc2hfY29tcG9uZW50X2dldF9tZXNoKHRoaXMuX2lkKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLm1lc2hlcy53cmFwKGluZGV4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IG1lc2ggdG8gcmVuZGVyZWQgd2l0aCB0aGlzIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtZXNoIE1lc2ggcmVuZGVyZWQgYnkgdGhpcyBjb21wb25lbnQuXG4gICAgICovXG4gICAgc2V0IG1lc2gobWVzaCkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9tZXNoX2NvbXBvbmVudF9zZXRfbWVzaCh0aGlzLl9pZCwgbWVzaD8uX2lkID8/IDApO1xuICAgIH1cbiAgICAvKiogU2tpbiBmb3IgdGhpcyBtZXNoIGNvbXBvbmVudC4gKi9cbiAgICBnZXQgc2tpbigpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmVuZ2luZS53YXNtLl93bF9tZXNoX2NvbXBvbmVudF9nZXRfc2tpbih0aGlzLl9pZCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zY2VuZS5za2lucy53cmFwKGluZGV4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHNraW4gdG8gdHJhbnNmb3JtIHRoaXMgbWVzaCBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2tpbiBTa2luIHRvIHVzZSBmb3IgcmVuZGVyaW5nIHNraW5uZWQgbWVzaGVzLlxuICAgICAqL1xuICAgIHNldCBza2luKHNraW4pIHtcbiAgICAgICAgdGhpcy5zY2VuZS5hc3NlcnRPcmlnaW4oc2tpbik7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX21lc2hfY29tcG9uZW50X3NldF9za2luKHRoaXMuX2lkLCBza2luID8gc2tpbi5faWQgOiAwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW9ycGggdGFyZ2V0cyBmb3IgdGhpcyBtZXNoIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjIuMFxuICAgICAqL1xuICAgIGdldCBtb3JwaFRhcmdldHMoKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5lbmdpbmUud2FzbS5fd2xfbWVzaF9jb21wb25lbnRfZ2V0X21vcnBoX3RhcmdldHModGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUubW9ycGhUYXJnZXRzLndyYXAoaW5kZXgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgbW9ycGggdGFyZ2V0cyB0byB0cmFuc2Zvcm0gdGhpcyBtZXNoIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtb3JwaFRhcmdldHMgTW9ycGggdGFyZ2V0cyB0byB1c2UgZm9yIHJlbmRlcmluZy5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjIuMFxuICAgICAqL1xuICAgIHNldCBtb3JwaFRhcmdldHMobW9ycGhUYXJnZXRzKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX21lc2hfY29tcG9uZW50X3NldF9tb3JwaF90YXJnZXRzKHRoaXMuX2lkLCBtb3JwaFRhcmdldHM/Ll9pZCA/PyAwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byB7QGxpbmsgZ2V0TW9ycGhUYXJnZXRXZWlnaHRzfS5cbiAgICAgKlxuICAgICAqIEBub3RlIFByZWZlciB0byB1c2Uge0BsaW5rIGdldE1vcnBoVGFyZ2V0V2VpZ2h0c30gZm9yIHBlcmZvcm1hbmNlLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMi4wXG4gICAgICovXG4gICAgZ2V0IG1vcnBoVGFyZ2V0V2VpZ2h0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TW9ycGhUYXJnZXRXZWlnaHRzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbW9ycGggdGFyZ2V0IHdlaWdodHMgdG8gdHJhbnNmb3JtIHRoaXMgbWVzaCBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gd2VpZ2h0cyBOZXcgd2VpZ2h0cy5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjIuMFxuICAgICAqL1xuICAgIHNldCBtb3JwaFRhcmdldFdlaWdodHMod2VpZ2h0cykge1xuICAgICAgICB0aGlzLnNldE1vcnBoVGFyZ2V0V2VpZ2h0cyh3ZWlnaHRzKTtcbiAgICB9XG4gICAgZ2V0TW9ycGhUYXJnZXRXZWlnaHRzKG91dCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgY291bnQgPSB3YXNtLl93bF9tZXNoX2NvbXBvbmVudF9nZXRfbW9ycGhfdGFyZ2V0X3dlaWdodHModGhpcy5faWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBpZiAoIW91dCkge1xuICAgICAgICAgICAgb3V0ID0gbmV3IEZsb2F0MzJBcnJheShjb3VudCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICAgICAgICBvdXRbaV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB3ZWlnaHQgb2YgYSBzaW5nbGUgbW9ycGggdGFyZ2V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHRhcmdldCBJbmRleCBvZiB0aGUgbW9ycGggdGFyZ2V0LlxuICAgICAqIEByZXR1cm5zIFRoZSB3ZWlnaHQuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4yLjBcbiAgICAgKi9cbiAgICBnZXRNb3JwaFRhcmdldFdlaWdodCh0YXJnZXQpIHtcbiAgICAgICAgY29uc3QgY291bnQgPSB0aGlzLm1vcnBoVGFyZ2V0cz8uY291bnQgPz8gMDtcbiAgICAgICAgaWYgKHRhcmdldCA+PSBjb3VudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbmRleCAke3RhcmdldH0gaXMgb3V0IG9mIGJvdW5kcyBmb3IgJHtjb3VudH0gdGFyZ2V0c2ApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9tZXNoX2NvbXBvbmVudF9nZXRfbW9ycGhfdGFyZ2V0X3dlaWdodCh0aGlzLl9pZCwgdGFyZ2V0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IG1vcnBoIHRhcmdldCB3ZWlnaHRzIGZvciB0aGlzIG1lc2ggY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHdlaWdodHMgQXJyYXkgb2YgbmV3IHdlaWdodHMsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgYXMgbWFueVxuICAgICAqICAgICBlbGVtZW50cyBhcyB7QGxpbmsgTW9ycGhUYXJnZXRzLmNvdW50fS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjIuMFxuICAgICAqL1xuICAgIHNldE1vcnBoVGFyZ2V0V2VpZ2h0cyh3ZWlnaHRzKSB7XG4gICAgICAgIGNvbnN0IGNvdW50ID0gdGhpcy5tb3JwaFRhcmdldHM/LmNvdW50ID8/IDA7XG4gICAgICAgIGlmICh3ZWlnaHRzLmxlbmd0aCAhPT0gY291bnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgJHtjb3VudH0gd2VpZ2h0cyBidXQgZ290ICR7d2VpZ2h0cy5sZW5ndGh9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdC5zZXQod2VpZ2h0cyk7XG4gICAgICAgIHdhc20uX3dsX21lc2hfY29tcG9uZW50X3NldF9tb3JwaF90YXJnZXRfd2VpZ2h0cyh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSwgd2VpZ2h0cy5sZW5ndGgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHdlaWdodCBvZiBhIHNpbmdsZSBtb3JwaCB0YXJnZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGFyZ2V0IEluZGV4IG9mIHRoZSBtb3JwaCB0YXJnZXQuXG4gICAgICogQHBhcmFtIHdlaWdodCBUaGUgbmV3IHdlaWdodC5cbiAgICAgKlxuICAgICAqICMjIFVzYWdlXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IG1lc2ggPSBvYmplY3QuZ2V0Q29tcG9uZW50KCdtZXNoJyk7XG4gICAgICogY29uc3QgbW91dGhUYXJnZXQgPSBtZXNoLm1vcnBoVGFyZ2V0cy5nZXRUYXJnZXRJbmRleCgnbW91dGgnKTtcbiAgICAgKiBtZXNoLnNldE1vcnBoVGFyZ2V0V2VpZ2h0KG1vdXRoVGFyZ2V0LCAwLjUpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMi4wXG4gICAgICovXG4gICAgc2V0TW9ycGhUYXJnZXRXZWlnaHQodGFyZ2V0LCB3ZWlnaHQpIHtcbiAgICAgICAgY29uc3QgY291bnQgPSB0aGlzLm1vcnBoVGFyZ2V0cz8uY291bnQgPz8gMDtcbiAgICAgICAgaWYgKHRhcmdldCA+PSBjb3VudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbmRleCAke3RhcmdldH0gaXMgb3V0IG9mIGJvdW5kcyBmb3IgJHtjb3VudH0gdGFyZ2V0c2ApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX21lc2hfY29tcG9uZW50X3NldF9tb3JwaF90YXJnZXRfd2VpZ2h0KHRoaXMuX2lkLCB0YXJnZXQsIHdlaWdodCk7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgTWVzaENvbXBvbmVudC5wcm90b3R5cGUsIFwibWF0ZXJpYWxcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBNZXNoQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtZXNoXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgTWVzaENvbXBvbmVudC5wcm90b3R5cGUsIFwic2tpblwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIE1lc2hDb21wb25lbnQucHJvdG90eXBlLCBcIm1vcnBoVGFyZ2V0c1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIE1lc2hDb21wb25lbnQucHJvdG90eXBlLCBcIm1vcnBoVGFyZ2V0V2VpZ2h0c1wiLCBudWxsKTtcbi8qKlxuICogRW51bSBmb3IgUGh5c2ljcyBheGVzIGxvY2tpbmdcbiAqXG4gKiBTZWUge0BsaW5rIFBoeXNYQ29tcG9uZW50LmFuZ3VsYXJMb2NrQXhpc30gYW5kIHtAbGluayBQaHlzWENvbXBvbmVudC5saW5lYXJMb2NrQXhpc30uXG4gKi9cbmV4cG9ydCB2YXIgTG9ja0F4aXM7XG4oZnVuY3Rpb24gKExvY2tBeGlzKSB7XG4gICAgLyoqXG4gICAgICogTm8gYXhpcyBzZWxlY3RlZC5cbiAgICAgKi9cbiAgICBMb2NrQXhpc1tMb2NrQXhpc1tcIk5vbmVcIl0gPSAwXSA9IFwiTm9uZVwiO1xuICAgIC8qKlxuICAgICAqICoqWCBheGlzKio6XG4gICAgICovXG4gICAgTG9ja0F4aXNbTG9ja0F4aXNbXCJYXCJdID0gMV0gPSBcIlhcIjtcbiAgICAvKipcbiAgICAgKiAqKlkgYXhpcyoqOlxuICAgICAqL1xuICAgIExvY2tBeGlzW0xvY2tBeGlzW1wiWVwiXSA9IDJdID0gXCJZXCI7XG4gICAgLyoqXG4gICAgICogKipaIGF4aXMqKjpcbiAgICAgKi9cbiAgICBMb2NrQXhpc1tMb2NrQXhpc1tcIlpcIl0gPSA0XSA9IFwiWlwiO1xufSkoTG9ja0F4aXMgfHwgKExvY2tBeGlzID0ge30pKTtcbi8qKlxuICogTmF0aXZlIHBoeXN4IHJpZ2lkIGJvZHkgY29tcG9uZW50LlxuICpcbiAqIFByb3ZpZGVzIGFjY2VzcyB0byBhIG5hdGl2ZSBtZXNoIGNvbXBvbmVudCBpbnN0YW5jZS5cbiAqIE9ubHkgYXZhaWxhYmxlIHdoZW4gdXNpbmcgcGh5c3ggZW5hYmxlZCBydW50aW1lLCBzZWUgXCJQcm9qZWN0IFNldHRpbmdzID4gUnVudGltZVwiLlxuICovXG5leHBvcnQgY2xhc3MgUGh5c1hDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAncGh5c3gnO1xuICAgIGdldFRyYW5zbGF0aW9uT2Zmc2V0KG91dCA9IG5ldyBGbG9hdDMyQXJyYXkoMykpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfb2Zmc2V0VHJhbnNsYXRpb24odGhpcy5faWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICBnZXRSb3RhdGlvbk9mZnNldChvdXQgPSBuZXcgRmxvYXQzMkFycmF5KDQpKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X29mZnNldFRyYW5zZm9ybSh0aGlzLl9pZCkgPj4gMjsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIG91dFswXSA9IHdhc20uSEVBUEYzMltwdHJdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uSEVBUEYzMltwdHIgKyAyXTtcbiAgICAgICAgb3V0WzNdID0gd2FzbS5IRUFQRjMyW3B0ciArIDNdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICBnZXRFeHRlbnRzKG91dCA9IG5ldyBGbG9hdDMyQXJyYXkoMykpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfZXh0ZW50cyh0aGlzLl9pZCkgLyA0OyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgb3V0WzBdID0gd2FzbS5IRUFQRjMyW3B0cl07XG4gICAgICAgIG91dFsxXSA9IHdhc20uSEVBUEYzMltwdHIgKyAxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5IRUFQRjMyW3B0ciArIDJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICBnZXRMaW5lYXJWZWxvY2l0eShvdXQgPSBuZXcgRmxvYXQzMkFycmF5KDMpKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCB0ZW1wTWVtRmxvYXQgPSB3YXNtLl90ZW1wTWVtRmxvYXQ7XG4gICAgICAgIHdhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfbGluZWFyVmVsb2NpdHkodGhpcy5faWQsIHdhc20uX3RlbXBNZW0pOyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgb3V0WzBdID0gdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB0ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHRlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgZ2V0QW5ndWxhclZlbG9jaXR5KG91dCA9IG5ldyBGbG9hdDMyQXJyYXkoMykpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHRlbXBNZW1GbG9hdCA9IHdhc20uX3RlbXBNZW1GbG9hdDtcbiAgICAgICAgd2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9hbmd1bGFyVmVsb2NpdHkodGhpcy5faWQsIHdhc20uX3RlbXBNZW0pOyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgb3V0WzBdID0gdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB0ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHRlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgdGhpcyByaWdpZCBib2R5IGlzIHN0YXRpYy5cbiAgICAgKlxuICAgICAqIFNldHRpbmcgdGhpcyBwcm9wZXJ0eSBvbmx5IHRha2VzIGVmZmVjdCBvbmNlIHRoZSBjb21wb25lbnRcbiAgICAgKiBzd2l0Y2hlcyBmcm9tIGluYWN0aXZlIHRvIGFjdGl2ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiIFdoZXRoZXIgdGhlIHJpZ2lkIGJvZHkgc2hvdWxkIGJlIHN0YXRpYy5cbiAgICAgKi9cbiAgICBzZXQgc3RhdGljKGIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9zdGF0aWModGhpcy5faWQsIGIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgcmlnaWQgYm9keSBpcyBzdGF0aWMuXG4gICAgICpcbiAgICAgKiBUaGlzIHByb3BlcnR5IHJldHVybnMgd2hldGhlciB0aGUgcmlnaWQgYm9keSBpcyAqZWZmZWN0aXZlbHkqXG4gICAgICogc3RhdGljLiBJZiBzdGF0aWMgcHJvcGVydHkgd2FzIHNldCB3aGlsZSB0aGUgcmlnaWQgYm9keSB3YXNcbiAgICAgKiBhY3RpdmUsIGl0IHdpbGwgbm90IHRha2UgZWZmZWN0IHVudGlsIHRoZSByaWdpZCBib2R5IGlzIHNldFxuICAgICAqIGluYWN0aXZlIGFuZCBhY3RpdmUgYWdhaW4uIFVudGlsIHRoZSBjb21wb25lbnQgaXMgc2V0IGluYWN0aXZlLFxuICAgICAqIHRoaXMgZ2V0dGVyIHdpbGwgcmV0dXJuIHdoZXRoZXIgdGhlIHJpZ2lkIGJvZHkgaXMgYWN0dWFsbHlcbiAgICAgKiBzdGF0aWMuXG4gICAgICovXG4gICAgZ2V0IHN0YXRpYygpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9zdGF0aWModGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBQaHlzWENvbXBvbmVudC5nZXRUcmFuc2xhdGlvbk9mZnNldH0uXG4gICAgICpcbiAgICAgKiBHaXZlcyBhIHF1aWNrIHZpZXcgb2YgdGhlIG9mZnNldCBpbiBhIGRlYnVnZ2VyLlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgUGh5c1hDb21wb25lbnQuZ2V0VHJhbnNsYXRpb25PZmZzZXR9IGZvciBwZXJmb3JtYW5jZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuMVxuICAgICAqL1xuICAgIGdldCB0cmFuc2xhdGlvbk9mZnNldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VHJhbnNsYXRpb25PZmZzZXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBvZmZzZXQgdHJhbnNsYXRpb24uXG4gICAgICpcbiAgICAgKiBUaGUgYXJyYXkgbXVzdCBiZSBhIHZlY3RvciBvZiBhdCBsZWFzdCAqKjMqKiBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoZSBjb21wb25lbnQgbXVzdCBiZSByZS1hY3RpdmF0ZWQgdG8gYXBwbHkgdGhlIGNoYW5nZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuMVxuICAgICAqL1xuICAgIHNldCB0cmFuc2xhdGlvbk9mZnNldChvZmZzZXQpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfb2Zmc2V0VHJhbnNsYXRpb24odGhpcy5faWQsIG9mZnNldFswXSwgb2Zmc2V0WzFdLCBvZmZzZXRbMl0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBQaHlzWENvbXBvbmVudC5nZXRSb3RhdGlvbk9mZnNldH0uXG4gICAgICpcbiAgICAgKiBHaXZlcyBhIHF1aWNrIHZpZXcgb2YgdGhlIG9mZnNldCBpbiBhIGRlYnVnZ2VyLlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgUGh5c1hDb21wb25lbnQuZ2V0Um90YXRpb25PZmZzZXR9IGZvciBwZXJmb3JtYW5jZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuMVxuICAgICAqL1xuICAgIGdldCByb3RhdGlvbk9mZnNldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Um90YXRpb25PZmZzZXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBvZmZzZXQgcm90YXRpb24uXG4gICAgICpcbiAgICAgKiBUaGUgYXJyYXkgbXVzdCBiZSBhIHF1YXRlcm5pb24gb2YgYXQgbGVhc3QgKio0KiogZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGUgY29tcG9uZW50IG11c3QgYmUgcmUtYWN0aXZhdGVkIHRvIGFwcGx5IHRoZSBjaGFuZ2UuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4xLjFcbiAgICAgKi9cbiAgICBzZXQgcm90YXRpb25PZmZzZXQob2Zmc2V0KSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X29mZnNldFJvdGF0aW9uKHRoaXMuX2lkLCBvZmZzZXRbMF0sIG9mZnNldFsxXSwgb2Zmc2V0WzJdLCBvZmZzZXRbM10pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgd2hldGhlciB0aGlzIHJpZ2lkIGJvZHkgaXMga2luZW1hdGljLlxuICAgICAqXG4gICAgICogQHBhcmFtIGIgV2hldGhlciB0aGUgcmlnaWQgYm9keSBzaG91bGQgYmUga2luZW1hdGljLlxuICAgICAqL1xuICAgIHNldCBraW5lbWF0aWMoYikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2tpbmVtYXRpYyh0aGlzLl9pZCwgYik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhpcyByaWdpZCBib2R5IGlzIGtpbmVtYXRpYy5cbiAgICAgKi9cbiAgICBnZXQga2luZW1hdGljKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2tpbmVtYXRpYyh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRoaXMgcmlnaWQgYm9keSdzIGdyYXZpdHkgaXMgZW5hYmxlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiIFdoZXRoZXIgdGhlIHJpZ2lkIGJvZHkncyBncmF2aXR5IHNob3VsZCBiZSBlbmFibGVkLlxuICAgICAqL1xuICAgIHNldCBncmF2aXR5KGIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9ncmF2aXR5KHRoaXMuX2lkLCBiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGlzIHJpZ2lkIGJvZHkncyBncmF2aXR5IGZsYWcgaXMgZW5hYmxlZC5cbiAgICAgKi9cbiAgICBnZXQgZ3Jhdml0eSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9ncmF2aXR5KHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgdGhpcyByaWdpZCBib2R5J3Mgc2ltdWxhdGUgZmxhZyBpcyBlbmFibGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGIgV2hldGhlciB0aGUgcmlnaWQgYm9keSdzIHNpbXVsYXRlIGZsYWcgc2hvdWxkIGJlIGVuYWJsZWQuXG4gICAgICovXG4gICAgc2V0IHNpbXVsYXRlKGIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9zaW11bGF0ZSh0aGlzLl9pZCwgYik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhpcyByaWdpZCBib2R5J3Mgc2ltdWxhdGUgZmxhZyBpcyBlbmFibGVkLlxuICAgICAqL1xuICAgIGdldCBzaW11bGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9zaW11bGF0ZSh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRvIGFsbG93IHNpbXVsYXRpb24gb2YgdGhpcyByaWdpZCBib2R5LlxuICAgICAqXG4gICAgICoge0BsaW5rIGFsbG93U2ltdWxhdGlvbn0gYW5kIHtAbGluayB0cmlnZ2VyfSBjYW4gbm90IGJlIGVuYWJsZWQgYXQgdGhlXG4gICAgICogc2FtZSB0aW1lLiBFbmFibGluZyB7QGxpbmsgYWxsb3dTaW11bGF0aW9ufSB3aGlsZSB7QGxpbmsgdHJpZ2dlcn0gaXMgZW5hYmxlZFxuICAgICAqIHdpbGwgZGlzYWJsZSB7QGxpbmsgdHJpZ2dlcn0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYiBXaGV0aGVyIHRvIGFsbG93IHNpbXVsYXRpb24gb2YgdGhpcyByaWdpZCBib2R5LlxuICAgICAqL1xuICAgIHNldCBhbGxvd1NpbXVsYXRpb24oYikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2FsbG93U2ltdWxhdGlvbih0aGlzLl9pZCwgYik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdG8gYWxsb3cgc2ltdWxhdGlvbiBvZiB0aGlzIHJpZ2lkIGJvZHkuXG4gICAgICovXG4gICAgZ2V0IGFsbG93U2ltdWxhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9hbGxvd1NpbXVsYXRpb24odGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgd2hldGhlciB0aGlzIHJpZ2lkIGJvZHkgbWF5IGJlIHF1ZXJpZWQgaW4gcmF5IGNhc3RzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGIgV2hldGhlciB0aGlzIHJpZ2lkIGJvZHkgbWF5IGJlIHF1ZXJpZWQgaW4gcmF5IGNhc3RzLlxuICAgICAqL1xuICAgIHNldCBhbGxvd1F1ZXJ5KGIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9hbGxvd1F1ZXJ5KHRoaXMuX2lkLCBiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGlzIHJpZ2lkIGJvZHkgbWF5IGJlIHF1ZXJpZWQgaW4gcmF5IGNhc3RzLlxuICAgICAqL1xuICAgIGdldCBhbGxvd1F1ZXJ5KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2FsbG93UXVlcnkodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgd2hldGhlciB0aGlzIHBoeXNpY3MgYm9keSBpcyBhIHRyaWdnZXIuXG4gICAgICpcbiAgICAgKiB7QGxpbmsgYWxsb3dTaW11bGF0aW9ufSBhbmQge0BsaW5rIHRyaWdnZXJ9IGNhbiBub3QgYmUgZW5hYmxlZCBhdCB0aGVcbiAgICAgKiBzYW1lIHRpbWUuIEVuYWJsaW5nIHRyaWdnZXIgd2hpbGUge0BsaW5rIGFsbG93U2ltdWxhdGlvbn0gaXMgZW5hYmxlZCxcbiAgICAgKiB3aWxsIGRpc2FibGUge0BsaW5rIGFsbG93U2ltdWxhdGlvbn0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYiBXaGV0aGVyIHRoaXMgcGh5c2ljcyBib2R5IGlzIGEgdHJpZ2dlci5cbiAgICAgKi9cbiAgICBzZXQgdHJpZ2dlcihiKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfdHJpZ2dlcih0aGlzLl9pZCwgYik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhpcyBwaHlzaWNzIGJvZHkgaXMgYSB0cmlnZ2VyLlxuICAgICAqL1xuICAgIGdldCB0cmlnZ2VyKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X3RyaWdnZXIodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHNoYXBlIGZvciBjb2xsaXNpb24gZGV0ZWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHMgTmV3IHNoYXBlLlxuICAgICAqIEBzaW5jZSAwLjguNVxuICAgICAqL1xuICAgIHNldCBzaGFwZShzKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfc2hhcGUodGhpcy5faWQsIHMpO1xuICAgIH1cbiAgICAvKiogVGhlIHNoYXBlIGZvciBjb2xsaXNpb24gZGV0ZWN0aW9uLiAqL1xuICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfc2hhcGUodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgYWRkaXRpb25hbCBkYXRhIGZvciB0aGUgc2hhcGUuXG4gICAgICpcbiAgICAgKiBSZXRyaWV2ZWQgb25seSBmcm9tIHtAbGluayBQaHlzWENvbXBvbmVudCNzaGFwZURhdGF9LlxuICAgICAqIEBzaW5jZSAwLjguMTBcbiAgICAgKi9cbiAgICBzZXQgc2hhcGVEYXRhKGQpIHtcbiAgICAgICAgaWYgKGQgPT0gbnVsbCB8fCAhaXNNZXNoU2hhcGUodGhpcy5zaGFwZSkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfc2hhcGVfZGF0YSh0aGlzLl9pZCwgZC5pbmRleCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZGl0aW9uYWwgZGF0YSBmb3IgdGhlIHNoYXBlLlxuICAgICAqXG4gICAgICogYG51bGxgIGZvciB7QGxpbmsgU2hhcGV9IHZhbHVlczogYE5vbmVgLCBgU3BoZXJlYCwgYENhcHN1bGVgLCBgQm94YCwgYFBsYW5lYC5cbiAgICAgKiBge2luZGV4OiBufWAgZm9yIGBUcmlhbmdsZU1lc2hgIGFuZCBgQ29udmV4SHVsbGAuXG4gICAgICpcbiAgICAgKiBUaGlzIGRhdGEgaXMgY3VycmVudGx5IG9ubHkgZm9yIHBhc3Npbmcgb250byBvciBjcmVhdGluZyBvdGhlciB7QGxpbmsgUGh5c1hDb21wb25lbnR9LlxuICAgICAqIEBzaW5jZSAwLjguMTBcbiAgICAgKi9cbiAgICBnZXQgc2hhcGVEYXRhKCkge1xuICAgICAgICBpZiAoIWlzTWVzaFNoYXBlKHRoaXMuc2hhcGUpKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpbmRleDogdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9zaGFwZV9kYXRhKHRoaXMuX2lkKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBzaGFwZSBleHRlbnRzIGZvciBjb2xsaXNpb24gZGV0ZWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGUgTmV3IGV4dGVudHMgZm9yIHRoZSBzaGFwZS5cbiAgICAgKiBAc2luY2UgMC44LjVcbiAgICAgKi9cbiAgICBzZXQgZXh0ZW50cyhlKSB7XG4gICAgICAgIHRoaXMuZXh0ZW50cy5zZXQoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIFBoeXNYQ29tcG9uZW50LmdldEV4dGVudHN9LlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgUGh5c1hDb21wb25lbnQuZ2V0RXh0ZW50c30gZm9yIHBlcmZvcm1hbmNlLlxuICAgICAqL1xuICAgIGdldCBleHRlbnRzKCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgLyoqIEB0b2RvOiBCcmVhayBhdCAyLjAuMC4gRG8gbm90IGFsbG93IG1vZGlmeWluZyBtZW1vcnkgaW4tcGxhY2UuICovXG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfZXh0ZW50cyh0aGlzLl9pZCk7XG4gICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KHdhc20uSEVBUEYzMi5idWZmZXIsIHB0ciwgMyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBzdGF0aWNGcmljdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgc3RhdGljRnJpY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X3N0YXRpY0ZyaWN0aW9uKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHN0YXRpY0ZyaWN0aW9uLlxuICAgICAqIEBwYXJhbSB2IE5ldyBzdGF0aWNGcmljdGlvbi5cbiAgICAgKi9cbiAgICBzZXQgc3RhdGljRnJpY3Rpb24odikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X3N0YXRpY0ZyaWN0aW9uKHRoaXMuX2lkLCB2KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGR5bmFtaWNGcmljdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgZHluYW1pY0ZyaWN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9keW5hbWljRnJpY3Rpb24odGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgZHluYW1pY0ZyaWN0aW9uXG4gICAgICogQHBhcmFtIHYgTmV3IGR5bmFtaWNEYW1waW5nLlxuICAgICAqL1xuICAgIHNldCBkeW5hbWljRnJpY3Rpb24odikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2R5bmFtaWNGcmljdGlvbih0aGlzLl9pZCwgdik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBib3VuY2luZXNzLlxuICAgICAqIEBzaW5jZSAwLjkuMFxuICAgICAqL1xuICAgIGdldCBib3VuY2luZXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9ib3VuY2luZXNzKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGJvdW5jaW5lc3MuXG4gICAgICogQHBhcmFtIHYgTmV3IGJvdW5jaW5lc3MuXG4gICAgICogQHNpbmNlIDAuOS4wXG4gICAgICovXG4gICAgc2V0IGJvdW5jaW5lc3Modikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2JvdW5jaW5lc3ModGhpcy5faWQsIHYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgbGluZWFyRGFtcGluZy9cbiAgICAgKi9cbiAgICBnZXQgbGluZWFyRGFtcGluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfbGluZWFyRGFtcGluZyh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBsaW5lYXJEYW1waW5nLlxuICAgICAqIEBwYXJhbSB2IE5ldyBsaW5lYXJEYW1waW5nLlxuICAgICAqL1xuICAgIHNldCBsaW5lYXJEYW1waW5nKHYpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9saW5lYXJEYW1waW5nKHRoaXMuX2lkLCB2KTtcbiAgICB9XG4gICAgLyoqIEdldCBhbmd1bGFyRGFtcGluZy4gKi9cbiAgICBnZXQgYW5ndWxhckRhbXBpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2FuZ3VsYXJEYW1waW5nKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGFuZ3VsYXJEYW1waW5nLlxuICAgICAqIEBwYXJhbSB2IE5ldyBhbmd1bGFyRGFtcGluZy5cbiAgICAgKi9cbiAgICBzZXQgYW5ndWxhckRhbXBpbmcodikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2FuZ3VsYXJEYW1waW5nKHRoaXMuX2lkLCB2KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGxpbmVhciB2ZWxvY2l0eS5cbiAgICAgKlxuICAgICAqIFtQaHlzWCBNYW51YWwgLSBcIlZlbG9jaXR5XCJdKGh0dHBzOi8vZ2FtZXdvcmtzZG9jcy5udmlkaWEuY29tL1BoeXNYLzQuMS9kb2N1bWVudGF0aW9uL3BoeXN4Z3VpZGUvTWFudWFsL1JpZ2lkQm9keUR5bmFtaWNzLmh0bWwjdmVsb2NpdHkpXG4gICAgICpcbiAgICAgKiBIYXMgbm8gZWZmZWN0LCBpZiB0aGUgY29tcG9uZW50IGlzIG5vdCBhY3RpdmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBOZXcgbGluZWFyIHZlbG9jaXR5LlxuICAgICAqL1xuICAgIHNldCBsaW5lYXJWZWxvY2l0eSh2KSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfbGluZWFyVmVsb2NpdHkodGhpcy5faWQsIHZbMF0sIHZbMV0sIHZbMl0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBQaHlzWENvbXBvbmVudC5nZXRMaW5lYXJWZWxvY2l0eX0uXG4gICAgICpcbiAgICAgKiBAbm90ZSBQcmVmZXIgdG8gdXNlIHtAbGluayBQaHlzWENvbXBvbmVudC5nZXRMaW5lYXJWZWxvY2l0eX0gZm9yIHBlcmZvcm1hbmNlLlxuICAgICAqL1xuICAgIGdldCBsaW5lYXJWZWxvY2l0eSgpIHtcbiAgICAgICAgLyoqIEB0b2RvOiBCcmVhayBhdCAyLjAuMC4gRG8gbm90IGFsbG93IG1vZGlmeWluZyBtZW1vcnkgaW4tcGxhY2UuICovXG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2xpbmVhclZlbG9jaXR5KHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkod2FzbS5IRUFQRjMyLmJ1ZmZlciwgd2FzbS5fdGVtcE1lbSwgMyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBhbmd1bGFyIHZlbG9jaXR5XG4gICAgICpcbiAgICAgKiBbUGh5c1ggTWFudWFsIC0gXCJWZWxvY2l0eVwiXShodHRwczovL2dhbWV3b3Jrc2RvY3MubnZpZGlhLmNvbS9QaHlzWC80LjEvZG9jdW1lbnRhdGlvbi9waHlzeGd1aWRlL01hbnVhbC9SaWdpZEJvZHlEeW5hbWljcy5odG1sI3ZlbG9jaXR5KVxuICAgICAqXG4gICAgICogSGFzIG5vIGVmZmVjdCwgaWYgdGhlIGNvbXBvbmVudCBpcyBub3QgYWN0aXZlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgTmV3IGFuZ3VsYXIgdmVsb2NpdHlcbiAgICAgKi9cbiAgICBzZXQgYW5ndWxhclZlbG9jaXR5KHYpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9hbmd1bGFyVmVsb2NpdHkodGhpcy5faWQsIHZbMF0sIHZbMV0sIHZbMl0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBQaHlzWENvbXBvbmVudC5nZXRBbmd1bGFyVmVsb2NpdHl9LlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgUGh5c1hDb21wb25lbnQuZ2V0QW5ndWxhclZlbG9jaXR5fSBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICovXG4gICAgZ2V0IGFuZ3VsYXJWZWxvY2l0eSgpIHtcbiAgICAgICAgLyoqIEB0b2RvOiBCcmVhayBhdCAyLjAuMC4gRG8gbm90IGFsbG93IG1vZGlmeWluZyBtZW1vcnkgaW4tcGxhY2UuICovXG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2FuZ3VsYXJWZWxvY2l0eSh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KHdhc20uSEVBUEYzMi5idWZmZXIsIHdhc20uX3RlbXBNZW0sIDMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGNvbXBvbmVudHMgZ3JvdXBzIG1hc2suXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmxhZ3MgTmV3IGZsYWdzIHRoYXQgbmVlZCB0byBiZSBzZXQuXG4gICAgICovXG4gICAgc2V0IGdyb3Vwc01hc2soZmxhZ3MpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9ncm91cHNNYXNrKHRoaXMuX2lkLCBmbGFncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY29tcG9uZW50cyBncm91cHMgbWFzayBmbGFncy5cbiAgICAgKlxuICAgICAqIEVhY2ggYml0IHJlcHJlc2VudHMgbWVtYmVyc2hpcCB0byBncm91cCwgc2VlIGV4YW1wbGUuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIC8vIEFzc2lnbiBjIHRvIGdyb3VwIDJcbiAgICAgKiBjLmdyb3Vwc01hc2sgPSAoMSA8PCAyKTtcbiAgICAgKlxuICAgICAqIC8vIEFzc2lnbiBjIHRvIGdyb3VwIDBcbiAgICAgKiBjLmdyb3Vwc01hc2sgID0gKDEgPDwgMCk7XG4gICAgICpcbiAgICAgKiAvLyBBc3NpZ24gYyB0byBncm91cCAwIGFuZCAyXG4gICAgICogYy5ncm91cHNNYXNrID0gKDEgPDwgMCkgfCAoMSA8PCAyKTtcbiAgICAgKlxuICAgICAqIChjLmdyb3Vwc01hc2sgJiAoMSA8PCAyKSkgIT0gMDsgLy8gdHJ1ZVxuICAgICAqIChjLmdyb3Vwc01hc2sgJiAoMSA8PCA3KSkgIT0gMDsgLy8gZmFsc2VcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBnZXQgZ3JvdXBzTWFzaygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfZ3JvdXBzTWFzayh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY29tcG9uZW50cyBibG9ja3MgbWFzay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmbGFncyBOZXcgZmxhZ3MgdGhhdCBuZWVkIHRvIGJlIHNldC5cbiAgICAgKi9cbiAgICBzZXQgYmxvY2tzTWFzayhmbGFncykge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2Jsb2Nrc01hc2sodGhpcy5faWQsIGZsYWdzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjb21wb25lbnRzIGJsb2NrcyBtYXNrIGZsYWdzLlxuICAgICAqXG4gICAgICogRWFjaCBiaXQgcmVwcmVzZW50cyBtZW1iZXJzaGlwIHRvIHRoZSBibG9jaywgc2VlIGV4YW1wbGUuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIC8vIEJsb2NrIG92ZXJsYXAgd2l0aCBhbnkgb2JqZWN0cyBpbiBncm91cCAyXG4gICAgICogYy5ibG9ja3NNYXNrID0gKDEgPDwgMik7XG4gICAgICpcbiAgICAgKiAvLyBCbG9jayBvdmVybGFwIHdpdGggYW55IG9iamVjdHMgaW4gZ3JvdXAgMFxuICAgICAqIGMuYmxvY2tzTWFzayAgPSAoMSA8PCAwKVxuICAgICAqXG4gICAgICogLy8gQmxvY2sgb3ZlcmxhcCB3aXRoIGFueSBvYmplY3RzIGluIGdyb3VwIDAgYW5kIDJcbiAgICAgKiBjLmJsb2Nrc01hc2sgPSAoMSA8PCAwKSB8ICgxIDw8IDIpO1xuICAgICAqXG4gICAgICogKGMuYmxvY2tzTWFzayAmICgxIDw8IDIpKSAhPSAwOyAvLyB0cnVlXG4gICAgICogKGMuYmxvY2tzTWFzayAmICgxIDw8IDcpKSAhPSAwOyAvLyBmYWxzZVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGdldCBibG9ja3NNYXNrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9ibG9ja3NNYXNrKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGF4ZXMgdG8gbG9jayBmb3IgbGluZWFyIHZlbG9jaXR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGxvY2sgVGhlIEF4aXMgdGhhdCBuZWVkcyB0byBiZSBzZXQuXG4gICAgICpcbiAgICAgKiBDb21iaW5lIGZsYWdzIHdpdGggQml0d2lzZSBPUjpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogYm9keS5saW5lYXJMb2NrQXhpcyA9IExvY2tBeGlzLlggfCBMb2NrQXhpcy5ZOyAvLyB4IGFuZCB5IHNldFxuICAgICAqIGJvZHkubGluZWFyTG9ja0F4aXMgPSBMb2NrQXhpcy5YOyAvLyB5IHVuc2V0XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGhhcyBubyBlZmZlY3QgaWYgdGhlIGNvbXBvbmVudCBpcyBzdGF0aWMuXG4gICAgICovXG4gICAgc2V0IGxpbmVhckxvY2tBeGlzKGxvY2spIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9saW5lYXJMb2NrQXhpcyh0aGlzLl9pZCwgbG9jayk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGluZWFyIGxvY2sgYXhlcyBmbGFncy5cbiAgICAgKlxuICAgICAqIFRvIGdldCB0aGUgc3RhdGUgb2YgYSBzcGVjaWZpYyBmbGFnLCBCaXR3aXNlIEFORCB3aXRoIHRoZSBMb2NrQXhpcyBuZWVkZWQuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGlmKGJvZHkubGluZWFyTG9ja0F4aXMgJiBMb2NrQXhpcy5ZKSB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKFwiVGhlIFkgZmxhZyB3YXMgc2V0IVwiKTtcbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIGF4ZXMgdGhhdCBhcmUgY3VycmVudGx5IGxvY2tlZCBmb3IgbGluZWFyIG1vdmVtZW50LlxuICAgICAqL1xuICAgIGdldCBsaW5lYXJMb2NrQXhpcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfbGluZWFyTG9ja0F4aXModGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgYXhlcyB0byBsb2NrIGZvciBhbmd1bGFyIHZlbG9jaXR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGxvY2sgVGhlIEF4aXMgdGhhdCBuZWVkcyB0byBiZSBzZXQuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGJvZHkuYW5ndWxhckxvY2tBeGlzID0gTG9ja0F4aXMuWCB8IExvY2tBeGlzLlk7IC8vIHggYW5kIHkgc2V0XG4gICAgICogYm9keS5hbmd1bGFyTG9ja0F4aXMgPSBMb2NrQXhpcy5YOyAvLyB5IHVuc2V0XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGhhcyBubyBlZmZlY3QgaWYgdGhlIGNvbXBvbmVudCBpcyBzdGF0aWMuXG4gICAgICovXG4gICAgc2V0IGFuZ3VsYXJMb2NrQXhpcyhsb2NrKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfYW5ndWxhckxvY2tBeGlzKHRoaXMuX2lkLCBsb2NrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBhbmd1bGFyIGxvY2sgYXhlcyBmbGFncy5cbiAgICAgKlxuICAgICAqIFRvIGdldCB0aGUgc3RhdGUgb2YgYSBzcGVjaWZpYyBmbGFnLCBCaXR3aXNlIEFORCB3aXRoIHRoZSBMb2NrQXhpcyBuZWVkZWQ6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGlmKGJvZHkuYW5ndWxhckxvY2tBeGlzICYgTG9ja0F4aXMuWSkge1xuICAgICAqICAgICBjb25zb2xlLmxvZyhcIlRoZSBZIGZsYWcgd2FzIHNldCFcIik7XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHJldHVybiBheGVzIHRoYXQgYXJlIGN1cnJlbnRseSBsb2NrZWQgZm9yIGFuZ3VsYXIgbW92ZW1lbnQuXG4gICAgICovXG4gICAgZ2V0IGFuZ3VsYXJMb2NrQXhpcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfYW5ndWxhckxvY2tBeGlzKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IG1hc3MuXG4gICAgICpcbiAgICAgKiBbUGh5c1ggTWFudWFsIC0gXCJNYXNzIFByb3BlcnRpZXNcIl0oaHR0cHM6Ly9nYW1ld29ya3Nkb2NzLm52aWRpYS5jb20vUGh5c1gvNC4xL2RvY3VtZW50YXRpb24vcGh5c3hndWlkZS9NYW51YWwvUmlnaWRCb2R5RHluYW1pY3MuaHRtbCNtYXNzLXByb3BlcnRpZXMpXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbSBOZXcgbWFzcy5cbiAgICAgKi9cbiAgICBzZXQgbWFzcyhtKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfbWFzcyh0aGlzLl9pZCwgbSk7XG4gICAgfVxuICAgIC8qKiBNYXNzICovXG4gICAgZ2V0IG1hc3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X21hc3ModGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgbWFzcyBzcGFjZSBpbnRlcmlhIHRlbnNvci5cbiAgICAgKlxuICAgICAqIFtQaHlzWCBNYW51YWwgLSBcIk1hc3MgUHJvcGVydGllc1wiXShodHRwczovL2dhbWV3b3Jrc2RvY3MubnZpZGlhLmNvbS9QaHlzWC80LjEvZG9jdW1lbnRhdGlvbi9waHlzeGd1aWRlL01hbnVhbC9SaWdpZEJvZHlEeW5hbWljcy5odG1sI21hc3MtcHJvcGVydGllcylcbiAgICAgKlxuICAgICAqIEhhcyBubyBlZmZlY3QsIGlmIHRoZSBjb21wb25lbnQgaXMgbm90IGFjdGl2ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2IE5ldyBtYXNzIHNwYWNlIGludGVyYXRpYSB0ZW5zb3IuXG4gICAgICovXG4gICAgc2V0IG1hc3NTcGFjZUludGVyaWFUZW5zb3Iodikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X21hc3NTcGFjZUluZXJ0aWFUZW5zb3IodGhpcy5faWQsIHZbMF0sIHZbMV0sIHZbMl0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHJpZ2lkIGJvZHkgdG8gc2xlZXAgdXBvbiBhY3RpdmF0aW9uLlxuICAgICAqXG4gICAgICogV2hlbiBhc2xlZXAsIHRoZSByaWdpZCBib2R5IHdpbGwgbm90IGJlIHNpbXVsYXRlZCB1bnRpbCB0aGUgbmV4dCBjb250YWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZsYWcgYHRydWVgIHRvIHNsZWVwIHVwb24gYWN0aXZhdGlvbi5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuNVxuICAgICAqL1xuICAgIHNldCBzbGVlcE9uQWN0aXZhdGUoZmxhZykge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X3NsZWVwT25BY3RpdmF0ZSh0aGlzLl9pZCwgZmxhZyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGB0cnVlYCBpZiB0aGUgcmlnaWQgYm9keSBpcyBzZXQgdG8gc2xlZXAgdXBvbiBhY3RpdmF0aW9uLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuNVxuICAgICAqL1xuICAgIGdldCBzbGVlcE9uQWN0aXZhdGUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfc2xlZXBPbkFjdGl2YXRlKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbHkgYSBmb3JjZS5cbiAgICAgKlxuICAgICAqIFtQaHlzWCBNYW51YWwgLSBcIkFwcGx5aW5nIEZvcmNlcyBhbmQgVG9ycXVlc1wiXShodHRwczovL2dhbWV3b3Jrc2RvY3MubnZpZGlhLmNvbS9QaHlzWC80LjEvZG9jdW1lbnRhdGlvbi9waHlzeGd1aWRlL01hbnVhbC9SaWdpZEJvZHlEeW5hbWljcy5odG1sI2FwcGx5aW5nLWZvcmNlcy1hbmQtdG9ycXVlcylcbiAgICAgKlxuICAgICAqIEhhcyBubyBlZmZlY3QsIGlmIHRoZSBjb21wb25lbnQgaXMgbm90IGFjdGl2ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmIEZvcmNlIHZlY3Rvci5cbiAgICAgKiBAcGFyYW0gbSBGb3JjZSBtb2RlLCBzZWUge0BsaW5rIEZvcmNlTW9kZX0sIGRlZmF1bHQgYEZvcmNlYC5cbiAgICAgKiBAcGFyYW0gbG9jYWxGb3JjZSBXaGV0aGVyIHRoZSBmb3JjZSB2ZWN0b3IgaXMgaW4gbG9jYWwgc3BhY2UsIGRlZmF1bHQgYGZhbHNlYC5cbiAgICAgKiBAcGFyYW0gcCBQb3NpdGlvbiB0byBhcHBseSBmb3JjZSBhdCwgZGVmYXVsdCBpcyBjZW50ZXIgb2YgbWFzcy5cbiAgICAgKiBAcGFyYW0gbG9jYWwgV2hldGhlciBwb3NpdGlvbiBpcyBpbiBsb2NhbCBzcGFjZSwgZGVmYXVsdCBgZmFsc2VgLlxuICAgICAqL1xuICAgIGFkZEZvcmNlKGYsIG0gPSBGb3JjZU1vZGUuRm9yY2UsIGxvY2FsRm9yY2UgPSBmYWxzZSwgcCwgbG9jYWwgPSBmYWxzZSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgaWYgKCFwKSB7XG4gICAgICAgICAgICB3YXNtLl93bF9waHlzeF9jb21wb25lbnRfYWRkRm9yY2UodGhpcy5faWQsIGZbMF0sIGZbMV0sIGZbMl0sIG0sIGxvY2FsRm9yY2UpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHdhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9hZGRGb3JjZUF0KHRoaXMuX2lkLCBmWzBdLCBmWzFdLCBmWzJdLCBtLCBsb2NhbEZvcmNlLCBwWzBdLCBwWzFdLCBwWzJdLCBsb2NhbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGx5IHRvcnF1ZS5cbiAgICAgKlxuICAgICAqIFtQaHlzWCBNYW51YWwgLSBcIkFwcGx5aW5nIEZvcmNlcyBhbmQgVG9ycXVlc1wiXShodHRwczovL2dhbWV3b3Jrc2RvY3MubnZpZGlhLmNvbS9QaHlzWC80LjEvZG9jdW1lbnRhdGlvbi9waHlzeGd1aWRlL01hbnVhbC9SaWdpZEJvZHlEeW5hbWljcy5odG1sI2FwcGx5aW5nLWZvcmNlcy1hbmQtdG9ycXVlcylcbiAgICAgKlxuICAgICAqIEhhcyBubyBlZmZlY3QsIGlmIHRoZSBjb21wb25lbnQgaXMgbm90IGFjdGl2ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmIEZvcmNlIHZlY3Rvci5cbiAgICAgKiBAcGFyYW0gbSBGb3JjZSBtb2RlLCBzZWUge0BsaW5rIEZvcmNlTW9kZX0sIGRlZmF1bHQgYEZvcmNlYC5cbiAgICAgKi9cbiAgICBhZGRUb3JxdWUoZiwgbSA9IEZvcmNlTW9kZS5Gb3JjZSkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfYWRkVG9ycXVlKHRoaXMuX2lkLCBmWzBdLCBmWzFdLCBmWzJdLCBtKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIG9uIGNvbGxpc2lvbiBjYWxsYmFjay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayBGdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhpcyByaWdpZCBib2R5ICh1biljb2xsaWRlcyB3aXRoIGFueSBvdGhlci5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogIGxldCByaWdpZEJvZHkgPSB0aGlzLm9iamVjdC5nZXRDb21wb25lbnQoJ3BoeXN4Jyk7XG4gICAgICogIHJpZ2lkQm9keS5vbkNvbGxpc2lvbihmdW5jdGlvbih0eXBlLCBvdGhlcikge1xuICAgICAqICAgICAgLy8gSWdub3JlIHVuY29sbGlkZXNcbiAgICAgKiAgICAgIGlmKHR5cGUgPT0gQ29sbGlzaW9uRXZlbnRUeXBlLlRvdWNoTG9zdCkgcmV0dXJuO1xuICAgICAqXG4gICAgICogICAgICAvLyBUYWtlIGRhbWFnZSBvbiBjb2xsaXNpb24gd2l0aCBlbmVtaWVzXG4gICAgICogICAgICBpZihvdGhlci5vYmplY3QubmFtZS5zdGFydHNXaXRoKFwiZW5lbXktXCIpKSB7XG4gICAgICogICAgICAgICAgdGhpcy5hcHBseURhbWFnZSgxMCk7XG4gICAgICogICAgICB9XG4gICAgICogIH0uYmluZCh0aGlzKSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBJZCBvZiB0aGUgbmV3IGNhbGxiYWNrIGZvciB1c2Ugd2l0aCB7QGxpbmsgUGh5c1hDb21wb25lbnQjcmVtb3ZlQ29sbGlzaW9uQ2FsbGJhY2t9LlxuICAgICAqL1xuICAgIG9uQ29sbGlzaW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9uQ29sbGlzaW9uV2l0aCh0aGlzLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBmaWx0ZXJlZCBvbiBjb2xsaXNpb24gY2FsbGJhY2suXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXJDb21wIENvbXBvbmVudCBmb3Igd2hpY2ggY2FsbGJhY2tzIHdpbGxcbiAgICAgKiAgICAgICAgYmUgdHJpZ2dlcmVkLiBJZiB5b3UgcGFzcyB0aGlzIGNvbXBvbmVudCwgdGhlIG1ldGhvZCBpcyBlcXVpdmFsZW50IHRvLlxuICAgICAqICAgICAgICB7QGxpbmsgUGh5c1hDb21wb25lbnQjb25Db2xsaXNpb259LlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayBGdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhpcyByaWdpZCBib2R5XG4gICAgICogICAgICAgICh1biljb2xsaWRlcyB3aXRoIGBvdGhlckNvbXBgLlxuICAgICAqIEByZXR1cm5zIElkIG9mIHRoZSBuZXcgY2FsbGJhY2sgZm9yIHVzZSB3aXRoIHtAbGluayBQaHlzWENvbXBvbmVudCNyZW1vdmVDb2xsaXNpb25DYWxsYmFja30uXG4gICAgICovXG4gICAgb25Db2xsaXNpb25XaXRoKG90aGVyQ29tcCwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgcGh5c2ljcyA9IHRoaXMuZW5naW5lLnBoeXNpY3M7XG4gICAgICAgIHBoeXNpY3MuX2NhbGxiYWNrc1t0aGlzLl9pZF0gPSBwaHlzaWNzLl9jYWxsYmFja3NbdGhpcy5faWRdIHx8IFtdO1xuICAgICAgICBwaHlzaWNzLl9jYWxsYmFja3NbdGhpcy5faWRdLnB1c2goY2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2FkZENhbGxiYWNrKHRoaXMuX2lkLCBvdGhlckNvbXAuX2lkIHx8IHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgY29sbGlzaW9uIGNhbGxiYWNrIGFkZGVkIHdpdGgge0BsaW5rIFBoeXNYQ29tcG9uZW50I29uQ29sbGlzaW9ufSBvciB7QGxpbmsgUGh5c1hDb21wb25lbnQjb25Db2xsaXNpb25XaXRofS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjYWxsYmFja0lkIENhbGxiYWNrIGlkIGFzIHJldHVybmVkIGJ5IHtAbGluayBQaHlzWENvbXBvbmVudCNvbkNvbGxpc2lvbn0gb3Ige0BsaW5rIFBoeXNYQ29tcG9uZW50I29uQ29sbGlzaW9uV2l0aH0uXG4gICAgICogQHRocm93cyBXaGVuIHRoZSBjYWxsYmFjayBkb2VzIG5vdCBiZWxvbmcgdG8gdGhlIGNvbXBvbmVudC5cbiAgICAgKiBAdGhyb3dzIFdoZW4gdGhlIGNhbGxiYWNrIGRvZXMgbm90IGV4aXN0LlxuICAgICAqL1xuICAgIHJlbW92ZUNvbGxpc2lvbkNhbGxiYWNrKGNhbGxiYWNrSWQpIHtcbiAgICAgICAgY29uc3QgcGh5c2ljcyA9IHRoaXMuZW5naW5lLnBoeXNpY3M7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfcmVtb3ZlQ2FsbGJhY2sodGhpcy5faWQsIGNhbGxiYWNrSWQpO1xuICAgICAgICAvKiByIGlzIHRoZSBhbW91bnQgb2Ygb2JqZWN0IHRvIHJlbW92ZSBmcm9tIHRoZSBlbmQgb2YgdGhlXG4gICAgICAgICAqIGNhbGxiYWNrcyBhcnJheSBmb3IgdGhpcyBvYmplY3QgKi9cbiAgICAgICAgaWYgKHIpXG4gICAgICAgICAgICBwaHlzaWNzLl9jYWxsYmFja3NbdGhpcy5faWRdLnNwbGljZSgtcik7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgUGh5c1hDb21wb25lbnQucHJvdG90eXBlLCBcInN0YXRpY1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0cmFuc2xhdGlvbk9mZnNldFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJyb3RhdGlvbk9mZnNldFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJraW5lbWF0aWNcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBQaHlzWENvbXBvbmVudC5wcm90b3R5cGUsIFwiZ3Jhdml0eVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzaW11bGF0ZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJhbGxvd1NpbXVsYXRpb25cIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBQaHlzWENvbXBvbmVudC5wcm90b3R5cGUsIFwiYWxsb3dRdWVyeVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0cmlnZ2VyXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgUGh5c1hDb21wb25lbnQucHJvdG90eXBlLCBcInNoYXBlXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgUGh5c1hDb21wb25lbnQucHJvdG90eXBlLCBcInNoYXBlRGF0YVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJleHRlbnRzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgUGh5c1hDb21wb25lbnQucHJvdG90eXBlLCBcInN0YXRpY0ZyaWN0aW9uXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgUGh5c1hDb21wb25lbnQucHJvdG90eXBlLCBcImR5bmFtaWNGcmljdGlvblwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJib3VuY2luZXNzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgUGh5c1hDb21wb25lbnQucHJvdG90eXBlLCBcImxpbmVhckRhbXBpbmdcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBQaHlzWENvbXBvbmVudC5wcm90b3R5cGUsIFwiYW5ndWxhckRhbXBpbmdcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBQaHlzWENvbXBvbmVudC5wcm90b3R5cGUsIFwibGluZWFyVmVsb2NpdHlcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBQaHlzWENvbXBvbmVudC5wcm90b3R5cGUsIFwiYW5ndWxhclZlbG9jaXR5XCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgbmF0aXZlUHJvcGVydHkoKVxuXSwgUGh5c1hDb21wb25lbnQucHJvdG90eXBlLCBcImdyb3Vwc01hc2tcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBQaHlzWENvbXBvbmVudC5wcm90b3R5cGUsIFwiYmxvY2tzTWFza1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsaW5lYXJMb2NrQXhpc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJhbmd1bGFyTG9ja0F4aXNcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBuYXRpdmVQcm9wZXJ0eSgpXG5dLCBQaHlzWENvbXBvbmVudC5wcm90b3R5cGUsIFwibWFzc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG5hdGl2ZVByb3BlcnR5KClcbl0sIFBoeXNYQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzbGVlcE9uQWN0aXZhdGVcIiwgbnVsbCk7XG4vKipcbiAqIEFjY2VzcyB0byB0aGUgcGh5c2ljcyBzY2VuZVxuICovXG5leHBvcnQgY2xhc3MgUGh5c2ljcyB7XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqXG4gICAgICogKipOb3RlKio6IFRoaXMgaXMgcHVibGljIHRvIGVtdWxhdGUgYSBgZnJpZW5kYCBhY2Nlc3Nvci5cbiAgICAgKi9cbiAgICBfY2FsbGJhY2tzO1xuICAgIC8qKlxuICAgICAqIEhpdC5cbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX2hpdDtcbiAgICAvKipcbiAgICAgKiBXb25kZXJsYW5kIEVuZ2luZSBpbnN0YW5jZVxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfZW5naW5lO1xuICAgIC8qKlxuICAgICAqIFJheSBIaXRcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX3JheUhpdDtcbiAgICBjb25zdHJ1Y3RvcihlbmdpbmUpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lID0gZW5naW5lO1xuICAgICAgICB0aGlzLl9yYXlIaXQgPSBlbmdpbmUud2FzbS5fbWFsbG9jKDQgKiAoMyAqIDQgKyAzICogNCArIDQgKyAyKSArIDQpO1xuICAgICAgICB0aGlzLl9oaXQgPSBuZXcgUmF5SGl0KGVuZ2luZS5zY2VuZSwgdGhpcy5fcmF5SGl0KTtcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzID0ge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhc3QgYSByYXkgdGhyb3VnaCB0aGUgc2NlbmUgYW5kIGZpbmQgaW50ZXJzZWN0aW5nIHBoeXNpY3MgY29tcG9uZW50cy5cbiAgICAgKlxuICAgICAqIFRoZSByZXN1bHRpbmcgcmF5IGhpdCB3aWxsIGNvbnRhaW4gKip1cCB0byA0KiogY2xvc2VzdCByYXkgaGl0cyxcbiAgICAgKiBzb3J0ZWQgYnkgaW5jcmVhc2luZyBkaXN0YW5jZS5cbiAgICAgKlxuICAgICAqIEV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IGhpdCA9IGVuZ2luZS5waHlzaWNzLnJheUNhc3QoXG4gICAgICogICAgIFswLCAwLCAwXSxcbiAgICAgKiAgICAgWzAsIDAsIDFdLFxuICAgICAqICAgICAxIDw8IDAgfCAxIDw8IDQsIC8vIE9ubHkgY2hlY2sgYWdhaW5zdCBwaHlzaWNzIGNvbXBvbmVudHMgaW4gZ3JvdXBzIDAgYW5kIDRcbiAgICAgKiAgICAgMjVcbiAgICAgKiApO1xuICAgICAqIGlmIChoaXQuaGl0Q291bnQgPiAwKSB7XG4gICAgICogICAgIGNvbnN0IGxvY2F0aW9ucyA9IGhpdC5nZXRMb2NhdGlvbnMoKTtcbiAgICAgKiAgICAgY29uc29sZS5sb2coYE9iamVjdCBoaXQgYXQ6ICR7bG9jYXRpb25zWzBdWzBdfSwgJHtsb2NhdGlvbnNbMF1bMV19LCAke2xvY2F0aW9uc1swXVsyXX1gKTtcbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbyBSYXkgb3JpZ2luLlxuICAgICAqIEBwYXJhbSBkIFJheSBkaXJlY3Rpb24uXG4gICAgICogQHBhcmFtIGdyb3VwTWFzayBCaXRtYXNrIG9mIHBoeXNpY3MgZ3JvdXBzIHRvIGZpbHRlciBieTogb25seSBvYmplY3RzXG4gICAgICogICAgICAgIHRoYXQgYXJlIHBhcnQgb2YgZ2l2ZW4gZ3JvdXBzIGFyZSBjb25zaWRlcmVkIGZvciB0aGUgcmF5Y2FzdC5cbiAgICAgKiBAcGFyYW0gbWF4RGlzdGFuY2UgTWF4aW11bSAqKmluY2x1c2l2ZSoqIGhpdCBkaXN0YW5jZS4gRGVmYXVsdHMgdG8gYDEwMGAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUge0BsaW5rIFJheUhpdH0gaW5zdGFuY2UsIGNhY2hlZCBieSB0aGlzIGNsYXNzLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhlIHJldHVybmVkIHtAbGluayBSYXlIaXR9IG9iamVjdCBpcyBvd25lZCBieSB0aGUge0BsaW5rIFBoeXNpY3N9XG4gICAgICogICAgICAgaW5zdGFuY2UgYW5kIHdpbGwgYmUgcmV1c2VkIHdpdGggdGhlIG5leHQge0BsaW5rIFBoeXNpY3MjcmF5Q2FzdH0gY2FsbC5cbiAgICAgKi9cbiAgICByYXlDYXN0KG8sIGQsIGdyb3VwTWFzaywgbWF4RGlzdGFuY2UgPSAxMDAuMCkge1xuICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuX2VuZ2luZS5zY2VuZS5faW5kZXg7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9waHlzeF9yYXlfY2FzdChzY2VuZSwgb1swXSwgb1sxXSwgb1syXSwgZFswXSwgZFsxXSwgZFsyXSwgZ3JvdXBNYXNrLCBtYXhEaXN0YW5jZSwgdGhpcy5fcmF5SGl0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hpdDtcbiAgICB9XG4gICAgLyoqIEhvc3RpbmcgZW5naW5lIGluc3RhbmNlLiAqL1xuICAgIGdldCBlbmdpbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmdpbmU7XG4gICAgfVxufVxuLyoqXG4gKiBNZXNoIGluZGV4IHR5cGUuXG4gKi9cbmV4cG9ydCB2YXIgTWVzaEluZGV4VHlwZTtcbihmdW5jdGlvbiAoTWVzaEluZGV4VHlwZSkge1xuICAgIC8qKiBTaW5nbGUgYnl0ZSBtZXNoIGluZGV4LCByYW5nZSAwLTI1NSAqL1xuICAgIE1lc2hJbmRleFR5cGVbTWVzaEluZGV4VHlwZVtcIlVuc2lnbmVkQnl0ZVwiXSA9IDFdID0gXCJVbnNpZ25lZEJ5dGVcIjtcbiAgICAvKiogVHdvIGJ5dGUgbWVzaCBpbmRleCwgcmFuZ2UgMC02NTUzNSAqL1xuICAgIE1lc2hJbmRleFR5cGVbTWVzaEluZGV4VHlwZVtcIlVuc2lnbmVkU2hvcnRcIl0gPSAyXSA9IFwiVW5zaWduZWRTaG9ydFwiO1xuICAgIC8qKiBGb3VyIGJ5dGUgbWVzaCBpbmRleCwgcmFuZ2UgMC00Mjk0OTY3Mjk1ICovXG4gICAgTWVzaEluZGV4VHlwZVtNZXNoSW5kZXhUeXBlW1wiVW5zaWduZWRJbnRcIl0gPSA0XSA9IFwiVW5zaWduZWRJbnRcIjtcbn0pKE1lc2hJbmRleFR5cGUgfHwgKE1lc2hJbmRleFR5cGUgPSB7fSkpO1xuLyoqXG4gKiBNZXNoIHNraW5uaW5nIHR5cGUuXG4gKi9cbmV4cG9ydCB2YXIgTWVzaFNraW5uaW5nVHlwZTtcbihmdW5jdGlvbiAoTWVzaFNraW5uaW5nVHlwZSkge1xuICAgIC8qKiBOb3Qgc2tpbm5lZCAqL1xuICAgIE1lc2hTa2lubmluZ1R5cGVbTWVzaFNraW5uaW5nVHlwZVtcIk5vbmVcIl0gPSAwXSA9IFwiTm9uZVwiO1xuICAgIC8qKiBTa2lubmVkLCA0IGpvaW50cy93ZWlnaHQgcGVyIHZlcnRleCAqL1xuICAgIE1lc2hTa2lubmluZ1R5cGVbTWVzaFNraW5uaW5nVHlwZVtcIkZvdXJKb2ludHNcIl0gPSAxXSA9IFwiRm91ckpvaW50c1wiO1xuICAgIC8qKiBTa2lubmVkLCA4IGpvaW50cy93ZWlnaHQgcGVyIHZlcnRleCAqL1xuICAgIE1lc2hTa2lubmluZ1R5cGVbTWVzaFNraW5uaW5nVHlwZVtcIkVpZ2h0Sm9pbnRzXCJdID0gMl0gPSBcIkVpZ2h0Sm9pbnRzXCI7XG59KShNZXNoU2tpbm5pbmdUeXBlIHx8IChNZXNoU2tpbm5pbmdUeXBlID0ge30pKTtcbi8qKlxuICogV3JhcHBlciBhcm91bmQgYSBuYXRpdmUgbWVzaCBkYXRhLlxuICpcbiAqIEZvciBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGhvdyB0byBjcmVhdGUgbWVzaGVzLCBoYXZlIGEgbG9vayBhdCB0aGVcbiAqIHtAbGluayBNZXNoTWFuYWdlcn0gY2xhc3MuXG4gKlxuICogIyMjIyBVcGRhdGVcbiAqXG4gKiBUbyBtb2RpZnkgYSBtZXNoLCB5b3UgZ2V0IGFjY2VzcyB0byBhIHtAbGluayBNZXNoQXR0cmlidXRlQWNjZXNzb3J9IHRoYXRcbiAqIGFsbG93cyB5b3UgdG8gbW9kaWZ5IHRoZSBjb250ZW50IG9mIHRoZSBidWZmZXJzOlxuICpcbiAqIFVzYWdlOlxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBtZXNoID0gZW5naW5lLmVzLmNyZWF0ZSh7dmVydGV4Q291bnQ6IDMsIGluZGV4RGF0YTogWzAsIDEsIDJdfSk7XG4gKiBjb25zdCBwb3NpdGlvbnMgPSBtZXNoLmF0dHJpYnV0ZShNZXNoQXR0cmlidXRlLlBvc2l0aW9uKTtcbiAqIC4uLlxuICogYGBgXG4gKlxuICogQG5vdGUgTWVzaGVzIGFyZSAqKnBlci1lbmdpbmUqKiwgdGhleSBjYW4gdGh1cyBiZSBzaGFyZWQgYnkgbXVsdGlwbGUgc2NlbmVzLlxuICovXG5leHBvcnQgY2xhc3MgTWVzaCBleHRlbmRzIFJlc291cmNlIHtcbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIE1lc2hNYW5hZ2VyLmNyZWF0ZX0gaW5zdGVhZCwgYWNjZXNzaWJsZSB2aWEge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUubWVzaGVzfTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgbWVzaCA9IGVuZ2luZS5tZXNoZXMuY3JlYXRlKHt2ZXJ0ZXhDb3VudDogMywgaW5kZXhEYXRhOiBbMCwgMSwgMl19KTtcbiAgICAgKiAuLi5cbiAgICAgKiBtZXNoLnVwZGF0ZSgpO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGVuZ2luZSwgcGFyYW1zKSB7XG4gICAgICAgIGlmICghaXNOdW1iZXIocGFyYW1zKSkge1xuICAgICAgICAgICAgY29uc3QgbWVzaCA9IGVuZ2luZS5tZXNoZXMuY3JlYXRlKHBhcmFtcyk7XG4gICAgICAgICAgICAvKiBgc3VwZXIoKWAgbXVzdCBiZSBjYWxsZWQgYXMgc3RhdGVkIGluIHRoZSBzcGVjaWZpY2F0aW9uICovXG4gICAgICAgICAgICBzdXBlcihlbmdpbmUsIG1lc2guX2luZGV4KTtcbiAgICAgICAgICAgIHJldHVybiBtZXNoO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGVuZ2luZSwgcGFyYW1zKTtcbiAgICB9XG4gICAgLyoqIE51bWJlciBvZiB2ZXJ0aWNlcyBpbiB0aGlzIG1lc2guICovXG4gICAgZ2V0IHZlcnRleENvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfbWVzaF9nZXRfdmVydGV4Q291bnQodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKiogSW5kZXggZGF0YSAocmVhZC1vbmx5KSBvciBgbnVsbGAgaWYgdGhlIG1lc2ggaXMgbm90IGluZGV4ZWQuICovXG4gICAgZ2V0IGluZGV4RGF0YSgpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHRlbXBNZW0gPSB3YXNtLl90ZW1wTWVtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9tZXNoX2dldF9pbmRleERhdGEodGhpcy5faWQsIHRlbXBNZW0sIHRlbXBNZW0gKyA0KTtcbiAgICAgICAgaWYgKHB0ciA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCBpbmRleENvdW50ID0gd2FzbS5IRUFQVTMyW3RlbXBNZW0gLyA0XTtcbiAgICAgICAgY29uc3QgaW5kZXhTaXplID0gd2FzbS5IRUFQVTMyW3RlbXBNZW0gLyA0ICsgMV07XG4gICAgICAgIHN3aXRjaCAoaW5kZXhTaXplKSB7XG4gICAgICAgICAgICBjYXNlIE1lc2hJbmRleFR5cGUuVW5zaWduZWRCeXRlOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh3YXNtLkhFQVBVOC5idWZmZXIsIHB0ciwgaW5kZXhDb3VudCk7XG4gICAgICAgICAgICBjYXNlIE1lc2hJbmRleFR5cGUuVW5zaWduZWRTaG9ydDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQxNkFycmF5KHdhc20uSEVBUFUxNi5idWZmZXIsIHB0ciwgaW5kZXhDb3VudCk7XG4gICAgICAgICAgICBjYXNlIE1lc2hJbmRleFR5cGUuVW5zaWduZWRJbnQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50MzJBcnJheSh3YXNtLkhFQVBVMzIuYnVmZmVyLCBwdHIsIGluZGV4Q291bnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBseSBjaGFuZ2VzIHRvIHtAbGluayBhdHRyaWJ1dGUgfCB2ZXJ0ZXggYXR0cmlidXRlc30uXG4gICAgICpcbiAgICAgKiBVcGxvYWRzIHRoZSB1cGRhdGVkIHZlcnRleCBhdHRyaWJ1dGVzIHRvIHRoZSBHUFUgYW5kIHVwZGF0ZXMgdGhlIGJvdW5kaW5nXG4gICAgICogc3BoZXJlIHRvIG1hdGNoIHRoZSBuZXcgdmVydGV4IHBvc2l0aW9ucy5cbiAgICAgKlxuICAgICAqIFNpbmNlIHRoaXMgaXMgYW4gZXhwZW5zaXZlIG9wZXJhdGlvbiwgY2FsbCBpdCBvbmx5IG9uY2UgeW91IGhhdmUgcGVyZm9ybWVkXG4gICAgICogYWxsIG1vZGlmaWNhdGlvbnMgb24gYSBtZXNoIGFuZCBhdm9pZCBjYWxsaW5nIGlmIHlvdSBkaWQgbm90IHBlcmZvcm0gYW55XG4gICAgICogbW9kaWZpY2F0aW9ucyBhdCBhbGwuXG4gICAgICovXG4gICAgdXBkYXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9tZXNoX3VwZGF0ZSh0aGlzLl9pZCk7XG4gICAgfVxuICAgIGdldEJvdW5kaW5nU3BoZXJlKG91dCA9IG5ldyBGbG9hdDMyQXJyYXkoNCkpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX21lc2hfZ2V0X2JvdW5kaW5nU3BoZXJlKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgb3V0WzNdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzNdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICBhdHRyaWJ1dGUoYXR0cikge1xuICAgICAgICBpZiAodHlwZW9mIGF0dHIgIT0gJ251bWJlcicpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBudW1iZXIsIGJ1dCBnb3QgJyArIHR5cGVvZiBhdHRyKTtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHRlbXBNZW1VaW50MzIgPSB3YXNtLl90ZW1wTWVtVWludDMyO1xuICAgICAgICB3YXNtLl93bF9tZXNoX2dldF9hdHRyaWJ1dGUodGhpcy5faWQsIGF0dHIsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBpZiAodGVtcE1lbVVpbnQzMlswXSA9PSAyNTUpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgYXJyYXlTaXplID0gdGVtcE1lbVVpbnQzMls1XTtcbiAgICAgICAgcmV0dXJuIG5ldyBNZXNoQXR0cmlidXRlQWNjZXNzb3IodGhpcy5lbmdpbmUsIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZTogdGVtcE1lbVVpbnQzMlswXSxcbiAgICAgICAgICAgIG9mZnNldDogdGVtcE1lbVVpbnQzMlsxXSxcbiAgICAgICAgICAgIHN0cmlkZTogdGVtcE1lbVVpbnQzMlsyXSxcbiAgICAgICAgICAgIGZvcm1hdFNpemU6IHRlbXBNZW1VaW50MzJbM10sXG4gICAgICAgICAgICBjb21wb25lbnRDb3VudDogdGVtcE1lbVVpbnQzMls0XSxcbiAgICAgICAgICAgIC8qIFRoZSBXQVNNIEFQSSByZXR1cm5zIGAwYCBmb3IgYSBzY2FsYXIgdmFsdWUuIFdlIGNsYW1wIGl0IHRvIDEgYXMgd2Ugc3RyaWN0bHkgdXNlIGl0IGFzIGEgbXVsdGlwbGllciBmb3IgZ2V0L3NldCBvcGVyYXRpb25zICovXG4gICAgICAgICAgICBhcnJheVNpemU6IGFycmF5U2l6ZSA/IGFycmF5U2l6ZSA6IDEsXG4gICAgICAgICAgICBsZW5ndGg6IHRoaXMudmVydGV4Q291bnQsXG4gICAgICAgICAgICBidWZmZXJUeXBlOiAoYXR0ciAhPT0gTWVzaEF0dHJpYnV0ZS5Kb2ludElkXG4gICAgICAgICAgICAgICAgPyBGbG9hdDMyQXJyYXlcbiAgICAgICAgICAgICAgICA6IFVpbnQxNkFycmF5KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlc3Ryb3kgYW5kIGZyZWUgdGhlIG1lc2hlcyBtZW1vcnkuXG4gICAgICpcbiAgICAgKiBJdCBpcyBiZXN0IHByYWN0aWNlIHRvIHNldCB0aGUgbWVzaCB2YXJpYWJsZSB0byBgbnVsbGAgYWZ0ZXIgY2FsbGluZ1xuICAgICAqIGRlc3Ryb3kgdG8gcHJldmVudCBhY2NpZGVudGFsIHVzZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogICBtZXNoLmRlc3Ryb3koKTtcbiAgICAgKiAgIG1lc2ggPSBudWxsO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQWNjZXNzaW5nIHRoZSBtZXNoIGFmdGVyIGRlc3RydWN0aW9uIGJlaGF2ZXMgbGlrZSBhY2Nlc3NpbmcgYW4gZW1wdHlcbiAgICAgKiBtZXNoLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOS4wXG4gICAgICovXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfbWVzaF9kZXN0cm95KHRoaXMuX2lkKTtcbiAgICAgICAgdGhpcy5lbmdpbmUubWVzaGVzLl9kZXN0cm95KHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAnTWVzaChkZXN0cm95ZWQpJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYE1lc2goJHt0aGlzLl9pbmRleH0pYDtcbiAgICB9XG59XG4vKipcbiAqIEFuIGl0ZXJhdG9yIG92ZXIgYSBtZXNoIHZlcnRleCBhdHRyaWJ1dGUuXG4gKlxuICogVXNhZ2U6XG4gKlxuICogYGBganNcbiAqIGNvbnN0IG1lc2ggPSB0aGlzLm9iamVjdC5nZXRDb21wb25lbnQoJ21lc2gnKS5tZXNoO1xuICogY29uc3QgcG9zaXRpb25zID0gbWVzaC5hdHRyaWJ1dGUoTWVzaEF0dHJpYnV0ZS5Qb3NpdGlvbik7XG4gKlxuICogLy8gRXF1aXZhbGVudCB0byBgbmV3IEZsb2F0MzJBcnJheSgzKWAuXG4gKiBjb25zdCB0ZW1wID0gcG9zaXRpb25zLmNyZWF0ZUFycmF5KCk7XG4gKlxuICogZm9yKGxldCBpID0gMDsgaSA8IHBvc2l0aW9ucy5sZW5ndGg7ICsraSkge1xuICogICAgIC8vIGBwb3NgIHdpbGwgcmVmZXJlbmNlIGB0ZW1wYCBhbmQgdGhlcmVieSBub3QgYWxsb2NhdGUgYWRkaXRpb25hbFxuICogICAgIC8vIG1lbW9yeSwgd2hpY2ggd291bGQgY2F1c2UgYSBwZXJmIHNwaWtlIHdoZW4gY29sbGVjdGVkLlxuICogICAgIGNvbnN0IHBvcyA9IHBvc2l0aW9ucy5nZXQoaSwgdGVtcCk7XG4gKiAgICAgLy8gU2NhbGUgcG9zaXRpb24gYnkgMiBvbiB4LWF4aXMgb25seS5cbiAqICAgICBwb3NbMF0gKj0gMi4wO1xuICogICAgIHBvc2l0aW9ucy5zZXQoaSwgcG9zKTtcbiAqIH1cbiAqIC8vIFdlJ3JlIGRvbmUgbW9kaWZ5aW5nLCB0ZWxsIHRoZSBlbmdpbmUgdG8gbW92ZSB2ZXJ0ZXggZGF0YSB0byB0aGUgR1BVLlxuICogbWVzaC51cGRhdGUoKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgTWVzaEF0dHJpYnV0ZUFjY2Vzc29yIHtcbiAgICAvKiogTWF4IG51bWJlciBvZiBlbGVtZW50cy4gKi9cbiAgICBsZW5ndGggPSAwO1xuICAgIC8qKiBXb25kZXJsYW5kIEVuZ2luZSBpbnN0YW5jZS4gQGhpZGRlbiAqL1xuICAgIF9lbmdpbmU7XG4gICAgLyoqIEF0dHJpYnV0ZSBpbmRleC4gQGhpZGRlbiAqL1xuICAgIF9hdHRyaWJ1dGUgPSAtMTtcbiAgICAvKiogQXR0cmlidXRlIG9mZnNldC4gQGhpZGRlbiAqL1xuICAgIF9vZmZzZXQgPSAwO1xuICAgIC8qKiBBdHRyaWJ1dGUgc3RyaWRlLiBAaGlkZGVuICovXG4gICAgX3N0cmlkZSA9IDA7XG4gICAgLyoqIEZvcm1hdCBzaXplIG5hdGl2ZSBlbnVtLiBAaGlkZGVuICovXG4gICAgX2Zvcm1hdFNpemUgPSAwO1xuICAgIC8qKiBOdW1iZXIgb2YgY29tcG9uZW50cyBwZXIgdmVydGV4LiBAaGlkZGVuICovXG4gICAgX2NvbXBvbmVudENvdW50ID0gMDtcbiAgICAvKiogTnVtYmVyIG9mIHZhbHVlcyBwZXIgdmVydGV4LiBAaGlkZGVuICovXG4gICAgX2FycmF5U2l6ZSA9IDE7XG4gICAgLyoqXG4gICAgICogQ2xhc3MgdG8gaW5zdGFudGlhdGUgYW4gQXJyYXlCdWZmZXIgdG8gZ2V0L3NldCB2YWx1ZXMuXG4gICAgICovXG4gICAgX2J1ZmZlclR5cGU7XG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gdG8gYWxsb2NhdGUgdGVtcG9yYXJ5IFdBU00gbWVtb3J5LiBJdCBpcyBjYWNoZWQgaW4gdGhlIGFjY2Vzc29yIHRvIGF2b2lkXG4gICAgICogY29uZGl0aW9uYWxzIGR1cmluZyBnZXQvc2V0LlxuICAgICAqL1xuICAgIF90ZW1wQnVmZmVyR2V0dGVyO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBub3RlIFBsZWFzZSB1c2Uge0BsaW5rIE1lc2guYXR0cmlidXRlfSB0byBjcmVhdGUgYSBuZXcgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBDb250YWlucyBpbmZvcm1hdGlvbiBhYm91dCBob3cgdG8gcmVhZCB0aGUgZGF0YS5cbiAgICAgKiBAbm90ZSBEbyBub3QgdXNlIHRoaXMgY29uc3RydWN0b3IuIEluc3RlYWQsIHBsZWFzZSB1c2UgdGhlIHtAbGluayBNZXNoLmF0dHJpYnV0ZX0gbWV0aG9kLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGVuZ2luZSwgb3B0aW9ucykge1xuICAgICAgICB0aGlzLl9lbmdpbmUgPSBlbmdpbmU7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgdGhpcy5fYXR0cmlidXRlID0gb3B0aW9ucy5hdHRyaWJ1dGU7XG4gICAgICAgIHRoaXMuX29mZnNldCA9IG9wdGlvbnMub2Zmc2V0O1xuICAgICAgICB0aGlzLl9zdHJpZGUgPSBvcHRpb25zLnN0cmlkZTtcbiAgICAgICAgdGhpcy5fZm9ybWF0U2l6ZSA9IG9wdGlvbnMuZm9ybWF0U2l6ZTtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50Q291bnQgPSBvcHRpb25zLmNvbXBvbmVudENvdW50O1xuICAgICAgICB0aGlzLl9hcnJheVNpemUgPSBvcHRpb25zLmFycmF5U2l6ZTtcbiAgICAgICAgdGhpcy5fYnVmZmVyVHlwZSA9IG9wdGlvbnMuYnVmZmVyVHlwZTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBvcHRpb25zLmxlbmd0aDtcbiAgICAgICAgdGhpcy5fdGVtcEJ1ZmZlckdldHRlciA9ICh0aGlzLl9idWZmZXJUeXBlID09PSBGbG9hdDMyQXJyYXlcbiAgICAgICAgICAgID8gd2FzbS5nZXRUZW1wQnVmZmVyRjMyLmJpbmQod2FzbSlcbiAgICAgICAgICAgIDogd2FzbS5nZXRUZW1wQnVmZmVyVTE2LmJpbmQod2FzbSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgVHlwZWRBcnJheSB0byBob2xkIHRoaXMgYXR0cmlidXRlJ3MgdmFsdWVzLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZnVsIHRvIGNyZWF0ZSBhIHZpZXcgdG8gaG9sZCB0aGUgZGF0YSB0b1xuICAgICAqIHBhc3MgdG8ge0BsaW5rIGdldH0gYW5kIHtAbGluayBzZXR9XG4gICAgICpcbiAgICAgKiBFeGFtcGxlOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCB2ZXJ0ZXhDb3VudCA9IDQ7XG4gICAgICogY29uc3QgcG9zaXRpb25BdHRyaWJ1dGUgPSBtZXNoLmF0dHJpYnV0ZShNZXNoQXR0cmlidXRlLlBvc2l0aW9uKTtcbiAgICAgKlxuICAgICAqIC8vIEEgcG9zaXRpb24gaGFzIDMgZmxvYXRzIHBlciB2ZXJ0ZXguIFRodXMsIHBvc2l0aW9ucyBoYXMgbGVuZ3RoIDMgKiA0LlxuICAgICAqIGNvbnN0IHBvc2l0aW9ucyA9IHBvc2l0aW9uQXR0cmlidXRlLmNyZWF0ZUFycmF5KHZlcnRleENvdW50KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb3VudCBUaGUgbnVtYmVyIG9mICoqdmVydGljZXMqKiBleHBlY3RlZC5cbiAgICAgKiBAcmV0dXJucyBBIFR5cGVkQXJyYXkgd2l0aCB0aGUgYXBwcm9wcmlhdGUgZm9ybWF0IHRvIGFjY2VzcyB0aGUgZGF0YVxuICAgICAqL1xuICAgIGNyZWF0ZUFycmF5KGNvdW50ID0gMSkge1xuICAgICAgICBjb3VudCA9IGNvdW50ID4gdGhpcy5sZW5ndGggPyB0aGlzLmxlbmd0aCA6IGNvdW50O1xuICAgICAgICByZXR1cm4gbmV3IHRoaXMuX2J1ZmZlclR5cGUoY291bnQgKiB0aGlzLl9jb21wb25lbnRDb3VudCAqIHRoaXMuX2FycmF5U2l6ZSk7XG4gICAgfVxuICAgIGdldChpbmRleCwgb3V0ID0gdGhpcy5jcmVhdGVBcnJheSgpKSB7XG4gICAgICAgIGlmIChvdXQubGVuZ3RoICUgdGhpcy5fY29tcG9uZW50Q291bnQgIT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgb3V0Lmxlbmd0aCwgJHtvdXQubGVuZ3RofSBpcyBub3QgYSBtdWx0aXBsZSBvZiB0aGUgYXR0cmlidXRlIHZlY3RvciBjb21wb25lbnRzLCAke3RoaXMuX2NvbXBvbmVudENvdW50fWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlc3QgPSB0aGlzLl90ZW1wQnVmZmVyR2V0dGVyKG91dC5sZW5ndGgpO1xuICAgICAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuX2J1ZmZlclR5cGUuQllURVNfUEVSX0VMRU1FTlQ7XG4gICAgICAgIGNvbnN0IGRlc3RTaXplID0gZWxlbWVudFNpemUgKiBvdXQubGVuZ3RoO1xuICAgICAgICBjb25zdCBzcmNGb3JtYXRTaXplID0gdGhpcy5fZm9ybWF0U2l6ZSAqIHRoaXMuX2FycmF5U2l6ZTtcbiAgICAgICAgY29uc3QgZGVzdEZvcm1hdFNpemUgPSB0aGlzLl9jb21wb25lbnRDb3VudCAqIGVsZW1lbnRTaXplICogdGhpcy5fYXJyYXlTaXplO1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfbWVzaF9nZXRfYXR0cmlidXRlX3ZhbHVlcyh0aGlzLl9hdHRyaWJ1dGUsIHNyY0Zvcm1hdFNpemUsIHRoaXMuX29mZnNldCArIGluZGV4ICogdGhpcy5fc3RyaWRlLCB0aGlzLl9zdHJpZGUsIGRlc3RGb3JtYXRTaXplLCBkZXN0LmJ5dGVPZmZzZXQsIGRlc3RTaXplKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvdXQubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICBvdXRbaV0gPSBkZXN0W2ldO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgYXR0cmlidXRlIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaSBJbmRleFxuICAgICAqIEBwYXJhbSB2IFZhbHVlIHRvIHNldCB0aGUgZWxlbWVudCB0b1xuICAgICAqXG4gICAgICogYHYubGVuZ3RoYCBuZWVkcyB0byBiZSBhIG11bHRpcGxlIG9mIHRoZSBhdHRyaWJ1dGVzIGNvbXBvbmVudCBjb3VudCwgc2VlXG4gICAgICoge0BsaW5rIE1lc2hBdHRyaWJ1dGV9LiBJZiBgdi5sZW5ndGhgIGlzIG1vcmUgdGhhbiBvbmUgbXVsdGlwbGUsIGl0IHdpbGwgYmVcbiAgICAgKiBmaWxsZWQgd2l0aCB0aGUgbmV4dCBuIGF0dHJpYnV0ZSBlbGVtZW50cywgd2hpY2ggY2FuIHJlZHVjZSBvdmVyaGVhZFxuICAgICAqIG9mIHRoaXMgY2FsbC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKVxuICAgICAqL1xuICAgIHNldChpLCB2KSB7XG4gICAgICAgIGlmICh2Lmxlbmd0aCAlIHRoaXMuX2NvbXBvbmVudENvdW50ICE9PSAwKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBvdXQubGVuZ3RoLCAke3YubGVuZ3RofSBpcyBub3QgYSBtdWx0aXBsZSBvZiB0aGUgYXR0cmlidXRlIHZlY3RvciBjb21wb25lbnRzLCAke3RoaXMuX2NvbXBvbmVudENvdW50fWApO1xuICAgICAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuX2J1ZmZlclR5cGUuQllURVNfUEVSX0VMRU1FTlQ7XG4gICAgICAgIGNvbnN0IHNyY1NpemUgPSBlbGVtZW50U2l6ZSAqIHYubGVuZ3RoO1xuICAgICAgICBjb25zdCBzcmNGb3JtYXRTaXplID0gdGhpcy5fY29tcG9uZW50Q291bnQgKiBlbGVtZW50U2l6ZSAqIHRoaXMuX2FycmF5U2l6ZTtcbiAgICAgICAgY29uc3QgZGVzdEZvcm1hdFNpemUgPSB0aGlzLl9mb3JtYXRTaXplICogdGhpcy5fYXJyYXlTaXplO1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIC8qIFVubGVzcyB3ZSBhcmUgYWxyZWFkeSB3b3JraW5nIHdpdGggZGF0YSBmcm9tIFdBU00gaGVhcCwgd2VcbiAgICAgICAgICogbmVlZCB0byBjb3B5IGludG8gdGVtcG9yYXJ5IG1lbW9yeS4gKi9cbiAgICAgICAgaWYgKHYuYnVmZmVyICE9IHdhc20uSEVBUFU4LmJ1ZmZlcikge1xuICAgICAgICAgICAgY29uc3QgZGVzdCA9IHRoaXMuX3RlbXBCdWZmZXJHZXR0ZXIodi5sZW5ndGgpO1xuICAgICAgICAgICAgZGVzdC5zZXQodik7XG4gICAgICAgICAgICB2ID0gZGVzdDtcbiAgICAgICAgfVxuICAgICAgICB3YXNtLl93bF9tZXNoX3NldF9hdHRyaWJ1dGVfdmFsdWVzKHRoaXMuX2F0dHJpYnV0ZSwgc3JjRm9ybWF0U2l6ZSwgdi5ieXRlT2Zmc2V0LCBzcmNTaXplLCBkZXN0Rm9ybWF0U2l6ZSwgdGhpcy5fb2Zmc2V0ICsgaSAqIHRoaXMuX3N0cmlkZSwgdGhpcy5fc3RyaWRlKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBIb3N0aW5nIGVuZ2luZSBpbnN0YW5jZS4gKi9cbiAgICBnZXQgZW5naW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lO1xuICAgIH1cbn1cbi8qKlxuICogV3JhcHBlciBhcm91bmQgYSBuYXRpdmUgZm9udCByZXNvdXJjZS5cbiAqXG4gKiBAbm90ZSBGb250cyBhcmUgKipwZXItZW5naW5lKiosIHRoZXkgY2FuIHRodXMgYmUgc2hhcmVkIGJ5IG11bHRpcGxlIHNjZW5lcy5cbiAqXG4gKiBAc2luY2UgMS4yLjBcbiAqL1xuZXhwb3J0IGNsYXNzIEZvbnQgZXh0ZW5kcyBSZXNvdXJjZSB7XG4gICAgLyoqIEVtIGhlaWdodCBpbiBvYmplY3Qgc3BhY2UuIEVxdWl2YWxlbnQgdG8gbGluZSBoZWlnaHQuICovXG4gICAgZ2V0IGVtSGVpZ2h0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfZm9udF9nZXRfZW1IZWlnaHQodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYXAgaGVpZ2h0IGluIG9iamVjdCBzcGFjZS4gVGhpcyBpcyB0aGUgdHlwaWNhbCBoZWlnaHQgb2YgY2FwaXRhbFxuICAgICAqIGxldHRlcnMuIENhbiBiZSAwIGlmIG5vdCBkZWZpbmVkIGJ5IHRoZSBmb250LlxuICAgICAqL1xuICAgIGdldCBjYXBIZWlnaHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9mb250X2dldF9jYXBIZWlnaHQodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBYIGhlaWdodCBpbiBvYmplY3Qgc3BhY2UuIFRoaXMgaXMgdGhlIHR5cGljYWwgaGVpZ2h0IG9mIGxvd2VyY2FzZVxuICAgICAqIGxldHRlcnMuIENhbiBiZSAwIGlmIG5vdCBkZWZpbmVkIGJ5IHRoZSBmb250LlxuICAgICAqL1xuICAgIGdldCB4SGVpZ2h0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfZm9udF9nZXRfeEhlaWdodCh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE91dGxpbmUgc2l6ZS4gVGhpcyBpcyB0aGUgZmFjdG9yIGJ5IHdoaWNoIGNoYXJhY3RlcnMgYXJlIGV4cGFuZGVkIHRvXG4gICAgICogY3JlYXRlIHRoZSBvdXRsaW5lIGVmZmVjdC4gUmV0dXJucyAwIGlmIHRoZSBmb250IHdhcyBjb21waWxlZCB3aXRob3V0XG4gICAgICogYW4gb3V0bGluZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjIuMVxuICAgICAqL1xuICAgIGdldCBvdXRsaW5lU2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2ZvbnRfZ2V0X291dGxpbmVTaXplKHRoaXMuX2lkKTtcbiAgICB9XG59XG4vKiogVGVtcG9yYXJ5IGNhbnZhcyAqL1xubGV0IHRlbXAyZCA9IG51bGw7XG4vKipcbiAqIFdyYXBwZXIgYXJvdW5kIGEgbmF0aXZlIHRleHR1cmUgZGF0YS5cbiAqXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBob3cgdG8gY3JlYXRlIG1lc2hlcywgaGF2ZSBhIGxvb2sgYXQgdGhlXG4gKiB7QGxpbmsgVGV4dHVyZU1hbmFnZXJ9IGNsYXNzLlxuICpcbiAqIEBub3RlIFRleHR1cmVzIGFyZSAqKnBlci1lbmdpbmUqKiwgdGhleSBjYW4gdGh1cyBiZSBzaGFyZWQgYnkgbXVsdGlwbGUgc2NlbmVzLlxuICovXG5leHBvcnQgY2xhc3MgVGV4dHVyZSBleHRlbmRzIFJlc291cmNlIHtcbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIFRleHR1cmVNYW5hZ2VyLmNyZWF0ZX0gaW5zdGVhZCwgYWNjZXNzaWJsZSB2aWFcbiAgICAgKiB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS50ZXh0dXJlc306XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICogaW1hZ2Uub25sb2FkID0gKCkgPT4ge1xuICAgICAqICAgICBjb25zdCB0ZXh0dXJlID0gZW5naW5lLnRleHR1cmVzLmNyZWF0ZShpbWFnZSk7XG4gICAgICogfTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbmdpbmUsIHBhcmFtKSB7XG4gICAgICAgIGlmIChpc0ltYWdlTGlrZShwYXJhbSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHRleHR1cmUgPSBlbmdpbmUudGV4dHVyZXMuY3JlYXRlKHBhcmFtKTtcbiAgICAgICAgICAgIC8qIGBzdXBlcigpYCBtdXN0IGJlIGNhbGxlZCBhcyBzdGF0ZWQgaW4gdGhlIHNwZWNpZmljYXRpb24gKi9cbiAgICAgICAgICAgIHN1cGVyKGVuZ2luZSwgdGV4dHVyZS5faW5kZXgpO1xuICAgICAgICAgICAgcmV0dXJuIHRleHR1cmU7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZW5naW5lLCBwYXJhbSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhpcyB0ZXh0dXJlIGlzIHZhbGlkXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIFNjZW5lUmVzb3VyY2UjaXNEZXN0cm95ZWR9IGluc3RlYWQuXG4gICAgICovXG4gICAgZ2V0IHZhbGlkKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuaXNEZXN0cm95ZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluZGV4IGluIHRoaXMgbWFuYWdlci5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgVGV4dHVyZS5pbmRleH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4O1xuICAgIH1cbiAgICAvKiogVXBkYXRlIHRoZSB0ZXh0dXJlIHRvIG1hdGNoIHRoZSBIVE1MIGVsZW1lbnQgKGUuZy4gcmVmbGVjdCB0aGUgY3VycmVudCBmcmFtZSBvZiBhIHZpZGVvKS4gKi9cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIGNvbnN0IGltYWdlID0gdGhpcy5faW1hZ2VJbmRleDtcbiAgICAgICAgaWYgKCF0aGlzLnZhbGlkIHx8ICFpbWFnZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcmVuZGVyZXJfdXBkYXRlSW1hZ2UoaW1hZ2UpO1xuICAgIH1cbiAgICAvKiogV2lkdGggb2YgdGhlIHRleHR1cmUuICovXG4gICAgZ2V0IHdpZHRoKCkge1xuICAgICAgICAvKiBIVE1MIHRleHR1cmVzIHNob3VsZCBiZSByZWFkIGRpcmVjdGx5IGZyb20ganMsIHNpbmNlIHRoZSBDKysgY291bGQgYmVcbiAgICAgICAgICogb25lIGZyYW1lIG91dC1vZi1zeW5jIG9uIHRoZSBzaXplIG9mIHRoZSBlbGVtZW50IGl0c2VsZi4gKi9cbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuaHRtbEVsZW1lbnQ7XG4gICAgICAgIGlmIChlbGVtZW50KVxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQud2lkdGg7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl93bF9pbWFnZV9zaXplKHRoaXMuX2ltYWdlSW5kZXgsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICByZXR1cm4gd2FzbS5fdGVtcE1lbVVpbnQzMlswXTtcbiAgICB9XG4gICAgLyoqIEhlaWdodCBvZiB0aGUgdGV4dHVyZS4gKi9cbiAgICBnZXQgaGVpZ2h0KCkge1xuICAgICAgICAvKiBIVE1MIHRleHR1cmVzIHNob3VsZCBiZSByZWFkIGRpcmVjdGx5IGZyb20ganMsIHNpbmNlIHRoZSBDKysgY291bGQgYmVcbiAgICAgICAgICogb25lIGZyYW1lIG91dC1vZi1zeW5jIG9uIHRoZSBzaXplIG9mIHRoZSBlbGVtZW50IGl0c2VsZi4gKi9cbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuaHRtbEVsZW1lbnQ7XG4gICAgICAgIGlmIChlbGVtZW50KVxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuaGVpZ2h0O1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfaW1hZ2Vfc2l6ZSh0aGlzLl9pbWFnZUluZGV4LCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgcmV0dXJuIHdhc20uX3RlbXBNZW1VaW50MzJbMV07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGh0bWwgZWxlbWVudCBhc3NvY2lhdGVkIHRvIHRoaXMgdGV4dHVyZS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYWNjZXNzb3Igd2lsbCByZXR1cm4gYG51bGxgIGlmIHRoZSBpbWFnZSBpcyBjb21wcmVzc2VkLlxuICAgICAqL1xuICAgIGdldCBodG1sRWxlbWVudCgpIHtcbiAgICAgICAgY29uc3QgaW1hZ2UgPSB0aGlzLl9pbWFnZUluZGV4O1xuICAgICAgICBpZiAoIWltYWdlKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBqc0ltYWdlSW5kZXggPSB3YXNtLl93bF9pbWFnZV9nZXRfanNJbWFnZV9pbmRleChpbWFnZSk7XG4gICAgICAgIC8qIFNpbmNlIHRoZSBmaXJzdCBlbGVtZW50IGlzIGBudWxsYCwgbm8gbmVlZCB0byBjaGVjayBmb3IgYGpzSW1hZ2VJbmRleGAgKi9cbiAgICAgICAgcmV0dXJuIHdhc20uX2ltYWdlc1tqc0ltYWdlSW5kZXhdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgYSBzdWJyYW5nZSBvbiB0aGUgdGV4dHVyZSB0byBtYXRjaCB0aGUgSFRNTCBlbGVtZW50IChlLmcuIHJlZmxlY3QgdGhlIGN1cnJlbnQgZnJhbWUgb2YgYSB2aWRlbykuXG4gICAgICpcbiAgICAgKiBVc2FnZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogLy8gQ29waWVzIHJlY3RhbmdsZSBvZiBwaXhlbCBzdGFydGluZyBmcm9tICgxMCwgMjApXG4gICAgICogdGV4dHVyZS51cGRhdGVTdWJJbWFnZSgxMCwgMjAsIDYwMCwgNDAwKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSB4IHggb2Zmc2V0XG4gICAgICogQHBhcmFtIHkgeSBvZmZzZXRcbiAgICAgKiBAcGFyYW0gdyB3aWR0aFxuICAgICAqIEBwYXJhbSBoIGhlaWdodFxuICAgICAqL1xuICAgIHVwZGF0ZVN1YkltYWdlKHgsIHksIHcsIGgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGltYWdlID0gdGhpcy5faW1hZ2VJbmRleDtcbiAgICAgICAgaWYgKCFpbWFnZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGpzSW1hZ2VJbmRleCA9IHdhc20uX3dsX2ltYWdlX2dldF9qc0ltYWdlX2luZGV4KGltYWdlKTtcbiAgICAgICAgLyogTGF6eSBpbml0aWFsaXplIHRlbXAgY2FudmFzICovXG4gICAgICAgIGlmICghdGVtcDJkKSB7XG4gICAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICAgICAgaWYgKCFjdHgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RleHR1cmUudXBkYXRlU3ViSW1hZ2UoKTogRmFpbGVkIHRvIG9idGFpbiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZW1wMmQgPSB7XG4gICAgICAgICAgICAgICAgY2FudmFzLFxuICAgICAgICAgICAgICAgIGN0eCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW1nID0gd2FzbS5faW1hZ2VzW2pzSW1hZ2VJbmRleF07XG4gICAgICAgIGlmICghaW1nKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAvKiogQHRvZG86IElmIHRoZSBpbWFnZSBpcyBhbiBpbnN0YW5jZSBvZiBjYW52YXMsIHRoaXNcbiAgICAgICAgICogY2FuIGJlIHNraXBwZWQgZW50aXJlbHkuICovXG4gICAgICAgIHRlbXAyZC5jYW52YXMud2lkdGggPSB3O1xuICAgICAgICB0ZW1wMmQuY2FudmFzLmhlaWdodCA9IGg7XG4gICAgICAgIHRlbXAyZC5jdHguZHJhd0ltYWdlKGltZywgeCwgeSwgdywgaCwgMCwgMCwgdywgaCk7XG4gICAgICAgIGNvbnN0IHlPZmZzZXQgPSAoaW1nLnZpZGVvSGVpZ2h0ID8/IGltZy5oZWlnaHQpIC0geSAtIGg7XG4gICAgICAgIHdhc20uX2ltYWdlc1tqc0ltYWdlSW5kZXhdID0gdGVtcDJkLmNhbnZhcztcbiAgICAgICAgd2FzbS5fd2xfcmVuZGVyZXJfdXBkYXRlSW1hZ2UoaW1hZ2UsIHgsIHlPZmZzZXQpO1xuICAgICAgICB3YXNtLl9pbWFnZXNbanNJbWFnZUluZGV4XSA9IGltZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVzdHJveSBhbmQgZnJlZSB0aGUgdGV4dHVyZSdzIHRleHR1cmUgYWx0YXMgc3BhY2UgYW5kIG1lbW9yeS5cbiAgICAgKlxuICAgICAqIEl0IGlzIGJlc3QgcHJhY3RpY2UgdG8gc2V0IHRoZSB0ZXh0dXJlIHZhcmlhYmxlIHRvIGBudWxsYCBhZnRlciBjYWxsaW5nXG4gICAgICogZGVzdHJveSB0byBwcmV2ZW50IGFjY2lkZW50YWwgdXNlIG9mIHRoZSBpbnZhbGlkIHRleHR1cmU6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqICAgdGV4dHVyZS5kZXN0cm95KCk7XG4gICAgICogICB0ZXh0dXJlID0gbnVsbDtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjkuMFxuICAgICAqL1xuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl93bF90ZXh0dXJlX2Rlc3Ryb3kodGhpcy5faWQpO1xuICAgICAgICB0aGlzLmVuZ2luZS50ZXh0dXJlcy5fZGVzdHJveSh0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1RleHR1cmUoZGVzdHJveWVkKSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGBUZXh0dXJlKCR7dGhpcy5faW5kZXh9KWA7XG4gICAgfVxuICAgIGdldCBfaW1hZ2VJbmRleCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3RleHR1cmVfZ2V0X2ltYWdlX2luZGV4KHRoaXMuX2lkKTtcbiAgICB9XG59XG4vKipcbiAqIFdyYXBwZXIgYXJvdW5kIGEgbmF0aXZlIGFuaW1hdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIEFuaW1hdGlvbiBleHRlbmRzIFNjZW5lUmVzb3VyY2Uge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBpbmRleCBJbmRleCBpbiB0aGUgbWFuYWdlclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGhvc3QgPSBXTCwgaW5kZXgpIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBob3N0IGluc3RhbmNlb2YgUHJlZmFiID8gaG9zdCA6IGhvc3Quc2NlbmU7XG4gICAgICAgIHN1cGVyKHNjZW5lLCBpbmRleCk7XG4gICAgfVxuICAgIC8qKiBEdXJhdGlvbiBvZiB0aGlzIGFuaW1hdGlvbi4gKi9cbiAgICBnZXQgZHVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9hbmltYXRpb25fZ2V0X2R1cmF0aW9uKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqIE51bWJlciBvZiB0cmFja3MgaW4gdGhpcyBhbmltYXRpb24uICovXG4gICAgZ2V0IHRyYWNrQ291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9hbmltYXRpb25fZ2V0X3RyYWNrQ291bnQodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9uZSB0aGlzIGFuaW1hdGlvbiByZXRhcmdldGVkIHRvIGEgbmV3IHNldCBvZiBvYmplY3RzLlxuICAgICAqXG4gICAgICogVGhlIGNsb25lIHNoYXJlcyBtb3N0IG9mIHRoZSBkYXRhIHdpdGggdGhlIG9yaWdpbmFsIGFuZCBpcyB0aGVyZWZvcmVcbiAgICAgKiBsaWdodC13ZWlnaHQuXG4gICAgICpcbiAgICAgKiAqKkV4cGVyaW1lbnRhbDoqKiBUaGlzIEFQSSBtaWdodCBjaGFuZ2UgaW4gdXBjb21pbmcgdmVyc2lvbnMuXG4gICAgICpcbiAgICAgKiBJZiByZXRhcmdldGluZyB0byB7QGxpbmsgU2tpbn0sIHRoZSBqb2luIG5hbWVzIHdpbGwgYmUgdXNlZCB0byBkZXRlcm1pbmUgYSBtYXBwaW5nXG4gICAgICogZnJvbSB0aGUgcHJldmlvdXMgc2tpbiB0byB0aGUgbmV3IHNraW4uIFRoZSBzb3VyY2Ugc2tpbiB3aWxsIGJlIHJldHJpZXZlZCBmcm9tXG4gICAgICogdGhlIGZpcnN0IHRyYWNrIGluIHRoZSBhbmltYXRpb24gdGhhdCB0YXJnZXRzIGEgam9pbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmV3VGFyZ2V0cyBOZXcgdGFyZ2V0cyBwZXIgdHJhY2suIEV4cGVjdGVkIHRvIGhhdmVcbiAgICAgKiAgICAgIHtAbGluayBBbmltYXRpb24jdHJhY2tDb3VudH0gZWxlbWVudHMgb3IgdG8gYmUgYSB7QGxpbmsgU2tpbn0uXG4gICAgICogQHJldHVybnMgVGhlIHJldGFyZ2V0ZWQgY2xvbmUgb2YgdGhpcyBhbmltYXRpb24uXG4gICAgICovXG4gICAgcmV0YXJnZXQobmV3VGFyZ2V0cykge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgaWYgKG5ld1RhcmdldHMgaW5zdGFuY2VvZiBTa2luKSB7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHdhc20uX3dsX2FuaW1hdGlvbl9yZXRhcmdldFRvU2tpbih0aGlzLl9pZCwgbmV3VGFyZ2V0cy5faWQpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NjZW5lLmFuaW1hdGlvbnMud3JhcChpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5ld1RhcmdldHMubGVuZ3RoICE9IHRoaXMudHJhY2tDb3VudCkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0V4cGVjdGVkICcgK1xuICAgICAgICAgICAgICAgIHRoaXMudHJhY2tDb3VudC50b1N0cmluZygpICtcbiAgICAgICAgICAgICAgICAnIHRhcmdldHMsIGJ1dCBnb3QgJyArXG4gICAgICAgICAgICAgICAgbmV3VGFyZ2V0cy5sZW5ndGgudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fbWFsbG9jKDIgKiBuZXdUYXJnZXRzLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3VGFyZ2V0cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgY29uc3Qgb2JqZWN0M2QgPSBuZXdUYXJnZXRzW2ldO1xuICAgICAgICAgICAgdGhpcy5zY2VuZS5hc3NlcnRPcmlnaW4ob2JqZWN0M2QpO1xuICAgICAgICAgICAgLyogVXNlIGxvY2FsIGlkIGhlcmUgYW5kICoqbm90KiogcGFja2VkIGlkLCBiZWNhdXNlIHRoZSBXQVNNXG4gICAgICAgICAgICAgKiB0YWtlcyBvd25lcnNoaXAgYW5kIHJlaW50ZXJwcmV0cyB0aGUgaWRzLiAqL1xuICAgICAgICAgICAgd2FzbS5IRUFQVTE2W3B0ciA+PiAoMSArIGkpXSA9IG5ld1RhcmdldHNbaV0ub2JqZWN0SWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5kZXggPSB3YXNtLl93bF9hbmltYXRpb25fcmV0YXJnZXQodGhpcy5faWQsIHB0cik7XG4gICAgICAgIHdhc20uX2ZyZWUocHRyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjZW5lLmFuaW1hdGlvbnMud3JhcChpbmRleCk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgcmV0dXJuICdBbmltYXRpb24oZGVzdHJveWVkKSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGBBbmltYXRpb24oJHt0aGlzLl9pbmRleH0pYDtcbiAgICB9XG59XG4vKipcbiAqIFNjZW5lIGdyYXBoIG9iamVjdC5cbiAqXG4gKiBOb2RlIGluIHRoZSBzY2VuZSBncmFwaCBvciBcImVudGl0eVwiLiBDb25zaXN0cyBvZiB0cmFuc2Zvcm1hdGlvbiBhbmQgYSByZWZlcmVuY2VcbiAqIHRvIGl0cyBwYXJlbnQgb2JqZWN0LiBVc3VhbGx5IGhvbGRzIGNvbXBvbmVudHMgYW5kIGlzIGFjY2Vzc2libGUgYnkgY29tcG9uZW50c1xuICogdGhyb3VnaCB7QGxpbmsgQ29tcG9uZW50I29iamVjdH0uXG4gKlxuICogT2JqZWN0cyBhcmUgc3RvcmVkIGluIGEgZGF0YSBvcmllbnRlZCBtYW5uZXIgaW5zaWRlIFdlYkFzc2VtYmx5IG1lbW9yeS4gVGhpcyBjbGFzc1xuICogaXMgYSBKYXZhU2NyaXB0IEFQSSB3cmFwcGVyIGFyb3VuZCB0aGlzIG1lbW9yeSBmb3IgbW9yZSBjb252ZW5pZW50IHVzZSBpblxuICogY29tcG9uZW50cy5cbiAqXG4gKiBPYmplY3RzIGNhbiBiZSBjcmVhdGVkIGFuZCBhZGRlZCB0byBhIHNjZW5lIHRocm91Z2gge0BsaW5rIFByZWZhYi5hZGRPYmplY3R9OlxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBwYXJlbnQgPSBzY2VuZS5hZGRPYmplY3QoKTtcbiAqIHBhcmVudC5uYW1lID0gJ3BhcmVudGAnO1xuICogY29uc3QgY2hpbGQgPSBzY2VuZS5hZGRPYmplY3QocGFyZW50KTtcbiAqIGNoaWxkLm5hbWUgPSAnY2hpbGRgJztcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgT2JqZWN0M0Qge1xuICAgIC8qKlxuICAgICAqIFBhY2tlZCBvYmplY3QgaWQsIGNvbnRhaW5pbmcgc2NlbmUgaW5kZXggYW5kIGxvY2FsIGlkLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9pZCA9IC0xO1xuICAgIC8qKiBPYmplY3QgaWQsIHJlbGF0aXZlIHRvIHRoZSBzY2VuZSBtYW5hZ2VyLiBAaGlkZGVuICovXG4gICAgX2xvY2FsSWQgPSAtMTtcbiAgICAvKiogU2NlbmUgaW5zdGFuY2UuIEBoaWRkZW4gKi9cbiAgICBfc2NlbmU7XG4gICAgLyoqIFdvbmRlcmxhbmQgRW5naW5lIGluc3RhbmNlLiBAaGlkZGVuICovXG4gICAgX2VuZ2luZTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gbyBPYmplY3QgaWQgdG8gd3JhcC5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIE9iamVjdHMgbXVzdCBiZSBvYnRhaW5lZCB2aWEge0BsaW5rIFNjZW5lLmFkZE9iamVjdH0gb3Ige0BsaW5rIFNjZW5lLndyYXB9OlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAvLyBDcmVhdGUgYSBuZXcgb2JqZWN0LlxuICAgICAqIGNvbnN0IG9iaiA9IHNjZW5lLmFkZE9iamVjdCgpO1xuICAgICAqXG4gICAgICogLy8gV3JhcCBhbiBvYmplY3QgdXNpbmcgaXRzIGlkLiBUaGUgaWQgbXVzdCBiZSB2YWxpZC5cbiAgICAgKiBjb25zdCBvYmogPSBzY2VuZS53cmFwKDApO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNjZW5lLCBpZCkge1xuICAgICAgICBzY2VuZSA9IHNjZW5lIGluc3RhbmNlb2YgUHJlZmFiID8gc2NlbmUgOiBzY2VuZS5zY2VuZTtcbiAgICAgICAgdGhpcy5fbG9jYWxJZCA9IGlkO1xuICAgICAgICB0aGlzLl9pZCA9IChzY2VuZS5faW5kZXggPDwgMjIpIHwgaWQ7XG4gICAgICAgIHRoaXMuX3NjZW5lID0gc2NlbmU7XG4gICAgICAgIC8qKiBAdG9kbzogUmVtb3ZlIGFuZCBvbmx5IGtlZXAgZ2V0dGVyLiAqL1xuICAgICAgICB0aGlzLl9lbmdpbmUgPSBzY2VuZS5lbmdpbmU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5hbWUgb2YgdGhlIG9iamVjdC5cbiAgICAgKlxuICAgICAqIFVzZWZ1bCBmb3IgaWRlbnRpZnlpbmcgb2JqZWN0cyBkdXJpbmcgZGVidWdnaW5nLlxuICAgICAqL1xuICAgIGdldCBuYW1lKCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiB3YXNtLlVURjhUb1N0cmluZyh3YXNtLl93bF9vYmplY3RfbmFtZSh0aGlzLl9pZCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG9iamVjdCdzIG5hbWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmV3TmFtZSBUaGUgbmV3IG5hbWUgdG8gc2V0LlxuICAgICAqL1xuICAgIHNldCBuYW1lKG5ld05hbWUpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl93bF9vYmplY3Rfc2V0X25hbWUodGhpcy5faWQsIHdhc20udGVtcFVURjgobmV3TmFtZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJlbnQgb2YgdGhpcyBvYmplY3Qgb3IgYG51bGxgIGlmIHBhcmVudGVkIHRvIHJvb3QuXG4gICAgICovXG4gICAgZ2V0IHBhcmVudCgpIHtcbiAgICAgICAgY29uc3QgcCA9IHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfcGFyZW50KHRoaXMuX2lkKTtcbiAgICAgICAgcmV0dXJuIHAgPT09IDAgPyBudWxsIDogdGhpcy5fc2NlbmUud3JhcChwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byB7QGxpbmsgT2JqZWN0M0QuZ2V0Q2hpbGRyZW59LlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgT2JqZWN0M0QuZ2V0Q2hpbGRyZW59IGZvciBwZXJmb3JtYW5jZS5cbiAgICAgKi9cbiAgICBnZXQgY2hpbGRyZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldENoaWxkcmVuKCk7XG4gICAgfVxuICAgIC8qKiBUaGUgbnVtYmVyIG9mIGNoaWxkcmVuIG9mIHRoaXMgb2JqZWN0LiAqL1xuICAgIGdldCBjaGlsZHJlbkNvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9nZXRfY2hpbGRyZW5fY291bnQodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXBhcmVudCBvYmplY3QgdG8gZ2l2ZW4gb2JqZWN0LlxuICAgICAqXG4gICAgICogQG5vdGUgUmVwYXJlbnRpbmcgaXMgbm90IHRyaXZpYWwgYW5kIG1pZ2h0IGhhdmUgYSBub3RpY2VhYmxlIHBlcmZvcm1hbmNlIGltcGFjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuZXdQYXJlbnQgTmV3IHBhcmVudCBvciBgbnVsbGAgdG8gcGFyZW50IHRvIHJvb3RcbiAgICAgKi9cbiAgICBzZXQgcGFyZW50KG5ld1BhcmVudCkge1xuICAgICAgICB0aGlzLnNjZW5lLmFzc2VydE9yaWdpbihuZXdQYXJlbnQpO1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3NldF9wYXJlbnQodGhpcy5faWQsIG5ld1BhcmVudCA9PSBudWxsID8gMCA6IG5ld1BhcmVudC5faWQpO1xuICAgIH1cbiAgICAvKiogTG9jYWwgb2JqZWN0IGlkIGluIHRoZSBzY2VuZSBtYW5hZ2VyLiAqL1xuICAgIGdldCBvYmplY3RJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvY2FsSWQ7XG4gICAgfVxuICAgIC8qKiBTY2VuZSBpbnN0YW5jZS4gKi9cbiAgICBnZXQgc2NlbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zY2VuZTtcbiAgICB9XG4gICAgLyoqIEhvc3RpbmcgZW5naW5lIGluc3RhbmNlLiAqL1xuICAgIGdldCBlbmdpbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmdpbmU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb25lIHRoaXMgaGllcmFyY2h5IGludG8gYSBuZXcgb25lLlxuICAgICAqXG4gICAgICogQ2xvbmluZyBjb3BpZXMgdGhlIGhpZXJhcmNoeSBzdHJ1Y3R1cmUsIG9iamVjdCBuYW1lcyxcbiAgICAgKiBhcyB3ZWxsIGFzIGNvbXBvbmVudHMuXG4gICAgICpcbiAgICAgKiBKYXZhU2NyaXB0IGNvbXBvbmVudHMgYXJlIGNsb25lZCB1c2luZyB7QGxpbmsgQ29tcG9uZW50LmNvcHl9LiBZb3UgY2FuXG4gICAgICogb3ZlcnJpZGUgdGhpcyBtZXRob2QgaW4geW91ciBjb21wb25lbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhcmVudCBUaGUgcGFyZW50IGZvciB0aGUgY2xvbmVkIGhpZXJhcmNoeSBvciBgbnVsbGAgdG8gY2xvbmVcbiAgICAgKiAgICAgaW50byB0aGUgc2NlbmUgcm9vdC4gRGVmYXVsdHMgdG8gYG51bGxgLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIGNsb25lIG9mIHRoaXMgb2JqZWN0LlxuICAgICAqL1xuICAgIGNsb25lKHBhcmVudCA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5zY2VuZS5hc3NlcnRPcmlnaW4ocGFyZW50KTtcbiAgICAgICAgY29uc3QgZW5naW5lID0gdGhpcy5fZW5naW5lO1xuICAgICAgICBjb25zdCBpZCA9IGVuZ2luZS53YXNtLl93bF9vYmplY3RfY2xvbmUodGhpcy5faWQsIHBhcmVudCA/IHBhcmVudC5faWQgOiAwKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjZW5lLndyYXAoaWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGlsZHJlbiBvZiB0aGlzIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBub3RlIENoaWxkIG9yZGVyIGlzICoqdW5kZWZpbmVkKiouIE5vIGFzc3VtcHRpb25zIHNob3VsZCBiZSBtYWRlXG4gICAgICogYWJvdXQgdGhlIGluZGV4IG9mIGEgc3BlY2lmaWMgb2JqZWN0LlxuICAgICAqXG4gICAgICogSWYgeW91IG5lZWQgdG8gYWNjZXNzIGEgc3BlY2lmaWMgY2hpbGQgb2YgdGhpcyBvYmplY3QsIHlvdSBjYW5cbiAgICAgKiB1c2Uge0BsaW5rIE9iamVjdDNELmZpbmRCeU5hbWV9LlxuICAgICAqXG4gICAgICogV2hlbiB0aGUgb2JqZWN0IGV4aXN0cyBpbiB0aGUgc2NlbmUgYXQgZWRpdG9yIHRpbWUsIHByZWZlciBwYXNzaW5nIGl0IGFzXG4gICAgICogYSBjb21wb25lbnQgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAbm90ZSBXaGVuIHByb3ZpZGluZyBhbiBvdXRwdXQgYXJyYXksIG9ubHkgYHRoaXMuY2hpbGRyZW5Db3VudGAgZWxlbWVudHMgd2lsbCBiZSB3cml0dGVuLlxuICAgICAqIFRoZSByZXN0IG9mIHRoZSBhcnJheSB3aWxsIG5vdCBiZSBtb2RpZmllZCBieSB0aGlzIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgRGVzdGluYXRpb24gYXJyYXksIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgYHRoaXMuY2hpbGRyZW5Db3VudGAgZWxlbWVudHMuXG4gICAgICogQHJldHVybnMgVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBnZXRDaGlsZHJlbihvdXQgPSBuZXcgQXJyYXkodGhpcy5jaGlsZHJlbkNvdW50KSkge1xuICAgICAgICBjb25zdCBjaGlsZHJlbkNvdW50ID0gdGhpcy5jaGlsZHJlbkNvdW50O1xuICAgICAgICBpZiAoY2hpbGRyZW5Db3VudCA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5yZXF1aXJlVGVtcE1lbShjaGlsZHJlbkNvdW50ICogMik7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfZ2V0X2NoaWxkcmVuKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtLCB3YXNtLl90ZW1wTWVtU2l6ZSA+PiAxKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbkNvdW50OyArK2kpIHtcbiAgICAgICAgICAgIG91dFtpXSA9IHRoaXMuX3NjZW5lLndyYXAod2FzbS5fdGVtcE1lbVVpbnQxNltpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgbG9jYWwgdHJhbnNmb3JtYXRpb24gKHRyYW5zbGF0aW9uLCByb3RhdGlvbiBhbmQgc2NhbGluZykgdG8gaWRlbnRpdHkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgcmVzZXRUcmFuc2Zvcm0oKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfcmVzZXRfdHJhbnNsYXRpb25fcm90YXRpb24odGhpcy5faWQpO1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3Jlc2V0X3NjYWxpbmcodGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgbG9jYWwgcG9zaXRpb24gYW5kIHJvdGF0aW9uIHRvIGlkZW50aXR5LlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHJlc2V0UG9zaXRpb25Sb3RhdGlvbigpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9yZXNldF90cmFuc2xhdGlvbl9yb3RhdGlvbih0aGlzLl9pZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKiogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0QucmVzZXRQb3NpdGlvblJvdGF0aW9ufSBpbnN0ZWFkLiAqL1xuICAgIHJlc2V0VHJhbnNsYXRpb25Sb3RhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzZXRQb3NpdGlvblJvdGF0aW9uKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0IGxvY2FsIHJvdGF0aW9uLCBrZWVwIHRyYW5zbGF0aW9uLlxuICAgICAqXG4gICAgICogQG5vdGUgVG8gcmVzZXQgYm90aCByb3RhdGlvbiBhbmQgdHJhbnNsYXRpb24sIHByZWZlclxuICAgICAqICAgICAgIHtAbGluayByZXNldFRyYW5zbGF0aW9uUm90YXRpb259LlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHJlc2V0Um90YXRpb24oKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfcmVzZXRfcm90YXRpb24odGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgbG9jYWwgdHJhbnNsYXRpb24sIGtlZXAgcm90YXRpb24uXG4gICAgICpcbiAgICAgKiBAbm90ZSBUbyByZXNldCBib3RoIHJvdGF0aW9uIGFuZCB0cmFuc2xhdGlvbiwgcHJlZmVyXG4gICAgICogICAgICAge0BsaW5rIHJlc2V0VHJhbnNsYXRpb25Sb3RhdGlvbn0uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgcmVzZXRQb3NpdGlvbigpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9yZXNldF90cmFuc2xhdGlvbih0aGlzLl9pZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKiogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0QucmVzZXRQb3NpdGlvbn0gaW5zdGVhZC4gKi9cbiAgICByZXNldFRyYW5zbGF0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXNldFBvc2l0aW9uKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0IGxvY2FsIHNjYWxpbmcgdG8gaWRlbnRpdHkgKGBgWzEuMCwgMS4wLCAxLjBdYGApLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHJlc2V0U2NhbGluZygpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9yZXNldF9zY2FsaW5nKHRoaXMuX2lkKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC50cmFuc2xhdGVMb2NhbH0gaW5zdGVhZC4gKi9cbiAgICB0cmFuc2xhdGUodikge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2xhdGVMb2NhbCh2KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhbnNsYXRlIG9iamVjdCBieSBhIHZlY3RvciBpbiB0aGUgcGFyZW50J3Mgc3BhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBWZWN0b3IgdG8gdHJhbnNsYXRlIGJ5LlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHRyYW5zbGF0ZUxvY2FsKHYpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF90cmFuc2xhdGUodGhpcy5faWQsIHZbMF0sIHZbMV0sIHZbMl0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhbnNsYXRlIG9iamVjdCBieSBhIHZlY3RvciBpbiBvYmplY3Qgc3BhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBWZWN0b3IgdG8gdHJhbnNsYXRlIGJ5LlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHRyYW5zbGF0ZU9iamVjdCh2KSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfdHJhbnNsYXRlX29iaih0aGlzLl9pZCwgdlswXSwgdlsxXSwgdlsyXSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2xhdGUgb2JqZWN0IGJ5IGEgdmVjdG9yIGluIHdvcmxkIHNwYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgVmVjdG9yIHRvIHRyYW5zbGF0ZSBieS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICB0cmFuc2xhdGVXb3JsZCh2KSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfdHJhbnNsYXRlX3dvcmxkKHRoaXMuX2lkLCB2WzBdLCB2WzFdLCB2WzJdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5yb3RhdGVBeGlzQW5nbGVEZWdMb2NhbH0gaW5zdGVhZC4gKi9cbiAgICByb3RhdGVBeGlzQW5nbGVEZWcoYSwgZCkge1xuICAgICAgICB0aGlzLnJvdGF0ZUF4aXNBbmdsZURlZ0xvY2FsKGEsIGQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUm90YXRlIGFyb3VuZCBnaXZlbiBheGlzIGJ5IGdpdmVuIGFuZ2xlIChkZWdyZWVzKSBpbiBsb2NhbCBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhIFZlY3RvciByZXByZXNlbnRpbmcgdGhlIHJvdGF0aW9uIGF4aXMuXG4gICAgICogQHBhcmFtIGQgQW5nbGUgaW4gZGVncmVlcy5cbiAgICAgKlxuICAgICAqIEBub3RlIElmIHRoZSBvYmplY3QgaXMgdHJhbnNsYXRlZCB0aGUgcm90YXRpb24gd2lsbCBiZSBhcm91bmRcbiAgICAgKiAgICAgdGhlIHBhcmVudC4gVG8gcm90YXRlIGFyb3VuZCB0aGUgb2JqZWN0IG9yaWdpbiwgdXNlXG4gICAgICogICAgIHtAbGluayByb3RhdGVBeGlzQW5nbGVEZWdPYmplY3R9XG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayByb3RhdGVBeGlzQW5nbGVSYWR9XG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgcm90YXRlQXhpc0FuZ2xlRGVnTG9jYWwoYSwgZCkge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3JvdGF0ZV9heGlzX2FuZ2xlKHRoaXMuX2lkLCBhWzBdLCBhWzFdLCBhWzJdLCBkKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5yb3RhdGVBeGlzQW5nbGVSYWRMb2NhbH0gaW5zdGVhZC4gKi9cbiAgICByb3RhdGVBeGlzQW5nbGVSYWQoYSwgZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb3RhdGVBeGlzQW5nbGVSYWRMb2NhbChhLCBkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUm90YXRlIGFyb3VuZCBnaXZlbiBheGlzIGJ5IGdpdmVuIGFuZ2xlIChyYWRpYW5zKSBpbiBsb2NhbCBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhIFZlY3RvciByZXByZXNlbnRpbmcgdGhlIHJvdGF0aW9uIGF4aXMuXG4gICAgICogQHBhcmFtIGQgQW5nbGUgaW4gcmFkaWFucy5cbiAgICAgKlxuICAgICAqIEBub3RlIElmIHRoZSBvYmplY3QgaXMgdHJhbnNsYXRlZCB0aGUgcm90YXRpb24gd2lsbCBiZSBhcm91bmRcbiAgICAgKiAgICAgdGhlIHBhcmVudC4gVG8gcm90YXRlIGFyb3VuZCB0aGUgb2JqZWN0IG9yaWdpbiwgdXNlXG4gICAgICogICAgIHtAbGluayByb3RhdGVBeGlzQW5nbGVEZWdPYmplY3R9XG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayByb3RhdGVBeGlzQW5nbGVEZWd9XG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgcm90YXRlQXhpc0FuZ2xlUmFkTG9jYWwoYSwgZCkge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3JvdGF0ZV9heGlzX2FuZ2xlX3JhZCh0aGlzLl9pZCwgYVswXSwgYVsxXSwgYVsyXSwgZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSb3RhdGUgYXJvdW5kIGdpdmVuIGF4aXMgYnkgZ2l2ZW4gYW5nbGUgKGRlZ3JlZXMpIGluIG9iamVjdCBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhIFZlY3RvciByZXByZXNlbnRpbmcgdGhlIHJvdGF0aW9uIGF4aXMuXG4gICAgICogQHBhcmFtIGQgQW5nbGUgaW4gZGVncmVlcy5cbiAgICAgKlxuICAgICAqIEVxdWl2YWxlbnQgdG8gcHJlcGVuZGluZyBhIHJvdGF0aW9uIHF1YXRlcm5pb24gdG8gdGhlIG9iamVjdCdzXG4gICAgICogbG9jYWwgdHJhbnNmb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayByb3RhdGVBeGlzQW5nbGVSYWRPYmplY3R9XG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgcm90YXRlQXhpc0FuZ2xlRGVnT2JqZWN0KGEsIGQpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9yb3RhdGVfYXhpc19hbmdsZV9vYmoodGhpcy5faWQsIGFbMF0sIGFbMV0sIGFbMl0sIGQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUm90YXRlIGFyb3VuZCBnaXZlbiBheGlzIGJ5IGdpdmVuIGFuZ2xlIChyYWRpYW5zKSBpbiBvYmplY3Qgc3BhY2VcbiAgICAgKiBFcXVpdmFsZW50IHRvIHByZXBlbmRpbmcgYSByb3RhdGlvbiBxdWF0ZXJuaW9uIHRvIHRoZSBvYmplY3Qnc1xuICAgICAqIGxvY2FsIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGEgVmVjdG9yIHJlcHJlc2VudGluZyB0aGUgcm90YXRpb24gYXhpc1xuICAgICAqIEBwYXJhbSBkIEFuZ2xlIGluIGRlZ3JlZXNcbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIHJvdGF0ZUF4aXNBbmdsZURlZ09iamVjdH1cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICByb3RhdGVBeGlzQW5nbGVSYWRPYmplY3QoYSwgZCkge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3JvdGF0ZV9heGlzX2FuZ2xlX3JhZF9vYmoodGhpcy5faWQsIGFbMF0sIGFbMV0sIGFbMl0sIGQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnJvdGF0ZUxvY2FsfSBpbnN0ZWFkLiAqL1xuICAgIHJvdGF0ZShxKSB7XG4gICAgICAgIHRoaXMucm90YXRlTG9jYWwocSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSb3RhdGUgYnkgYSBxdWF0ZXJuaW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHEgdGhlIFF1YXRlcm5pb24gdG8gcm90YXRlIGJ5LlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHJvdGF0ZUxvY2FsKHEpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9yb3RhdGVfcXVhdCh0aGlzLl9pZCwgcVswXSwgcVsxXSwgcVsyXSwgcVszXSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSb3RhdGUgYnkgYSBxdWF0ZXJuaW9uIGluIG9iamVjdCBzcGFjZS5cbiAgICAgKlxuICAgICAqIEVxdWl2YWxlbnQgdG8gcHJlcGVuZGluZyBhIHJvdGF0aW9uIHF1YXRlcm5pb24gdG8gdGhlIG9iamVjdCdzXG4gICAgICogbG9jYWwgdHJhbnNmb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcSB0aGUgUXVhdGVybmlvbiB0byByb3RhdGUgYnkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgcm90YXRlT2JqZWN0KHEpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9yb3RhdGVfcXVhdF9vYmoodGhpcy5faWQsIHFbMF0sIHFbMV0sIHFbMl0sIHFbM10pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnNjYWxlTG9jYWx9IGluc3RlYWQuICovXG4gICAgc2NhbGUodikge1xuICAgICAgICB0aGlzLnNjYWxlTG9jYWwodik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTY2FsZSBvYmplY3QgYnkgYSB2ZWN0b3IgaW4gb2JqZWN0IHNwYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgVmVjdG9yIHRvIHNjYWxlIGJ5LlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHNjYWxlTG9jYWwodikge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3NjYWxlKHRoaXMuX2lkLCB2WzBdLCB2WzFdLCB2WzJdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGdldFBvc2l0aW9uTG9jYWwob3V0ID0gbmV3IEZsb2F0MzJBcnJheSgzKSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIC8qIFRyYW5zbGF0aW9uIGlzIGRpZmZlcmVudCB0aGFuIHJvdGF0aW9uICYgc2NhbGluZy5cbiAgICAgICAgICogV2UgY2FuJ3Qgc2ltcGx5IHJlYWQgdGhlIG1lbW9yeS4gKi9cbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X2dldF90cmFuc2xhdGlvbl9sb2NhbCh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIGdldFRyYW5zbGF0aW9uTG9jYWwob3V0ID0gbmV3IEZsb2F0MzJBcnJheSgzKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRQb3NpdGlvbkxvY2FsKG91dCk7XG4gICAgfVxuICAgIGdldFBvc2l0aW9uV29ybGQob3V0ID0gbmV3IEZsb2F0MzJBcnJheSgzKSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIC8qIFRyYW5zbGF0aW9uIGlzIGRpZmZlcmVudCB0aGFuIHJvdGF0aW9uICYgc2NhbGluZy5cbiAgICAgICAgICogV2UgY2FuJ3Qgc2ltcGx5IHJlYWQgdGhlIG1lbW9yeS4gKi9cbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X2dldF90cmFuc2xhdGlvbl93b3JsZCh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIGdldFRyYW5zbGF0aW9uV29ybGQob3V0ID0gbmV3IEZsb2F0MzJBcnJheSgzKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRQb3NpdGlvbldvcmxkKG91dCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBsb2NhbCAvIG9iamVjdCBzcGFjZSBwb3NpdGlvbi5cbiAgICAgKlxuICAgICAqIENvbmNhdGVuYXRlcyBhIG5ldyB0cmFuc2xhdGlvbiBkdWFsIHF1YXRlcm5pb24gb250byB0aGUgZXhpc3Rpbmcgcm90YXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBOZXcgbG9jYWwgcG9zaXRpb24gYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDMgZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgc2V0UG9zaXRpb25Mb2NhbCh2KSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3Rfc2V0X3RyYW5zbGF0aW9uX2xvY2FsKHRoaXMuX2lkLCB2WzBdLCB2WzFdLCB2WzJdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5zZXRQb3NpdGlvbkxvY2FsfSBpbnN0ZWFkLiAqL1xuICAgIHNldFRyYW5zbGF0aW9uTG9jYWwodikge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRQb3NpdGlvbkxvY2FsKHYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgd29ybGQgc3BhY2UgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBBcHBsaWVzIHRoZSBpbnZlcnNlIHBhcmVudCB0cmFuc2Zvcm0gd2l0aCBhIG5ldyB0cmFuc2xhdGlvbiBkdWFsIHF1YXRlcm5pb25cbiAgICAgKiB3aGljaCBpcyBjb25jYXRlbmF0ZWQgb250byB0aGUgZXhpc3Rpbmcgcm90YXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBOZXcgd29ybGQgcG9zaXRpb24gYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDMgZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgc2V0UG9zaXRpb25Xb3JsZCh2KSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3Rfc2V0X3RyYW5zbGF0aW9uX3dvcmxkKHRoaXMuX2lkLCB2WzBdLCB2WzFdLCB2WzJdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5zZXRQb3NpdGlvbldvcmxkfSBpbnN0ZWFkLiAqL1xuICAgIHNldFRyYW5zbGF0aW9uV29ybGQodikge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRQb3NpdGlvbldvcmxkKHYpO1xuICAgIH1cbiAgICBnZXRTY2FsaW5nTG9jYWwob3V0ID0gbmV3IEZsb2F0MzJBcnJheSgzKSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX29iamVjdF9zY2FsaW5nX2xvY2FsKHRoaXMuX2lkKSAvIDQ7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICBvdXRbMF0gPSB3YXNtLkhFQVBGMzJbcHRyXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5IRUFQRjMyW3B0ciArIDFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMl07XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBsb2NhbCAvIG9iamVjdCBzcGFjZSBzY2FsaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgTmV3IGxvY2FsIHNjYWxpbmcgYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDMgZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgc2V0U2NhbGluZ0xvY2FsKHYpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9zZXRfc2NhbGluZ19sb2NhbCh0aGlzLl9pZCwgdlswXSwgdlsxXSwgdlsyXSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBnZXRTY2FsaW5nV29ybGQob3V0ID0gbmV3IEZsb2F0MzJBcnJheSgzKSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX29iamVjdF9zY2FsaW5nX3dvcmxkKHRoaXMuX2lkKSAvIDQ7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICBvdXRbMF0gPSB3YXNtLkhFQVBGMzJbcHRyXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5IRUFQRjMyW3B0ciArIDFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMl07XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBXb3JsZCBzcGFjZSBzY2FsaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgTmV3IHdvcmxkIHNjYWxpbmcgYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDMgZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgc2V0U2NhbGluZ1dvcmxkKHYpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9zZXRfc2NhbGluZ193b3JsZCh0aGlzLl9pZCwgdlswXSwgdlsxXSwgdlsyXSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBnZXRSb3RhdGlvbkxvY2FsKG91dCA9IG5ldyBGbG9hdDMyQXJyYXkoNCkpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9vYmplY3RfdHJhbnNfbG9jYWwodGhpcy5faWQpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIC8qIFRoZSBmaXJzdCA0IGZsb2F0cyByZXByZXNlbnQgdGhlIHJvdGF0aW9uIHF1YXRlcm5pb24uICovXG4gICAgICAgIG91dFswXSA9IHdhc20uSEVBUEYzMltwdHJdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uSEVBUEYzMltwdHIgKyAyXTtcbiAgICAgICAgb3V0WzNdID0gd2FzbS5IRUFQRjMyW3B0ciArIDNdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgbG9jYWwgc3BhY2Ugcm90YXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBOZXcgd29ybGQgcm90YXRpb24gYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDQgZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgc2V0Um90YXRpb25Mb2NhbCh2KSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3Rfc2V0X3JvdGF0aW9uX2xvY2FsKHRoaXMuX2lkLCB2WzBdLCB2WzFdLCB2WzJdLCB2WzNdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGdldFJvdGF0aW9uV29ybGQob3V0ID0gbmV3IEZsb2F0MzJBcnJheSg0KSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX29iamVjdF90cmFuc193b3JsZCh0aGlzLl9pZCkgLyA0OyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgLyogVGhlIGZpcnN0IDQgZmxvYXRzIHJlcHJlc2VudCB0aGUgcm90YXRpb24gcXVhdGVybmlvbi4gKi9cbiAgICAgICAgb3V0WzBdID0gd2FzbS5IRUFQRjMyW3B0cl07XG4gICAgICAgIG91dFsxXSA9IHdhc20uSEVBUEYzMltwdHIgKyAxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5IRUFQRjMyW3B0ciArIDJdO1xuICAgICAgICBvdXRbM10gPSB3YXNtLkhFQVBGMzJbcHRyICsgM107XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBsb2NhbCBzcGFjZSByb3RhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2IE5ldyB3b3JsZCByb3RhdGlvbiBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgNCBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICBzZXRSb3RhdGlvbldvcmxkKHYpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9zZXRfcm90YXRpb25fd29ybGQodGhpcy5faWQsIHZbMF0sIHZbMV0sIHZbMl0sIHZbM10pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZ2V0VHJhbnNmb3JtTG9jYWwob3V0ID0gbmV3IEZsb2F0MzJBcnJheSg4KSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX29iamVjdF90cmFuc19sb2NhbCh0aGlzLl9pZCkgLyA0OyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgb3V0WzBdID0gd2FzbS5IRUFQRjMyW3B0cl07XG4gICAgICAgIG91dFsxXSA9IHdhc20uSEVBUEYzMltwdHIgKyAxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5IRUFQRjMyW3B0ciArIDJdO1xuICAgICAgICBvdXRbM10gPSB3YXNtLkhFQVBGMzJbcHRyICsgM107XG4gICAgICAgIG91dFs0XSA9IHdhc20uSEVBUEYzMltwdHIgKyA0XTtcbiAgICAgICAgb3V0WzVdID0gd2FzbS5IRUFQRjMyW3B0ciArIDVdO1xuICAgICAgICBvdXRbNl0gPSB3YXNtLkhFQVBGMzJbcHRyICsgNl07XG4gICAgICAgIG91dFs3XSA9IHdhc20uSEVBUEYzMltwdHIgKyA3XTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGxvY2FsIHNwYWNlIHJvdGF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgTmV3IGxvY2FsIHRyYW5zZm9ybSBhcnJheSwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCA4IGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHNldFRyYW5zZm9ybUxvY2FsKHYpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9vYmplY3RfdHJhbnNfbG9jYWwodGhpcy5faWQpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIHdhc20uSEVBUEYzMltwdHJdID0gdlswXTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDFdID0gdlsxXTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDJdID0gdlsyXTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDNdID0gdlszXTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDRdID0gdls0XTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDVdID0gdls1XTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDZdID0gdls2XTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDddID0gdls3XTtcbiAgICAgICAgdGhpcy5zZXREaXJ0eSgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZ2V0VHJhbnNmb3JtV29ybGQob3V0ID0gbmV3IEZsb2F0MzJBcnJheSg4KSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX29iamVjdF90cmFuc193b3JsZCh0aGlzLl9pZCkgLyA0OyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgb3V0WzBdID0gd2FzbS5IRUFQRjMyW3B0cl07XG4gICAgICAgIG91dFsxXSA9IHdhc20uSEVBUEYzMltwdHIgKyAxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5IRUFQRjMyW3B0ciArIDJdO1xuICAgICAgICBvdXRbM10gPSB3YXNtLkhFQVBGMzJbcHRyICsgM107XG4gICAgICAgIG91dFs0XSA9IHdhc20uSEVBUEYzMltwdHIgKyA0XTtcbiAgICAgICAgb3V0WzVdID0gd2FzbS5IRUFQRjMyW3B0ciArIDVdO1xuICAgICAgICBvdXRbNl0gPSB3YXNtLkhFQVBGMzJbcHRyICsgNl07XG4gICAgICAgIG91dFs3XSA9IHdhc20uSEVBUEYzMltwdHIgKyA3XTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHdvcmxkIHNwYWNlIHJvdGF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgTmV3IHdvcmxkIHRyYW5zZm9ybSBhcnJheSwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCA4IGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHNldFRyYW5zZm9ybVdvcmxkKHYpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9vYmplY3RfdHJhbnNfd29ybGQodGhpcy5faWQpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIHdhc20uSEVBUEYzMltwdHJdID0gdlswXTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDFdID0gdlsxXTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDJdID0gdlsyXTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDNdID0gdlszXTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDRdID0gdls0XTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDVdID0gdls1XTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDZdID0gdls2XTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDddID0gdls3XTtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF90cmFuc193b3JsZF90b19sb2NhbCh0aGlzLl9pZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2NhbCBzcGFjZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnNldFRyYW5zZm9ybUxvY2FsfSBhbmRcbiAgICAgKiB7QGxpbmsgT2JqZWN0M0QuZ2V0VHJhbnNmb3JtTG9jYWx9IGluc3RlYWQuXG4gICAgICovXG4gICAgZ2V0IHRyYW5zZm9ybUxvY2FsKCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KHdhc20uSEVBUEYzMi5idWZmZXIsIHdhc20uX3dsX29iamVjdF90cmFuc19sb2NhbCh0aGlzLl9pZCksIDgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgbG9jYWwgdHJhbnNmb3JtLlxuICAgICAqXG4gICAgICogQHBhcmFtIHQgTG9jYWwgc3BhY2UgdHJhbnNmb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjVcbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnNldFRyYW5zZm9ybUxvY2FsfSBhbmRcbiAgICAgKiB7QGxpbmsgT2JqZWN0M0QuZ2V0VHJhbnNmb3JtTG9jYWx9IGluc3RlYWQuXG4gICAgICovXG4gICAgc2V0IHRyYW5zZm9ybUxvY2FsKHQpIHtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1Mb2NhbC5zZXQodCk7XG4gICAgICAgIHRoaXMuc2V0RGlydHkoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2xvYmFsIC8gd29ybGQgc3BhY2UgdHJhbnNmb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBNYXkgcmVjb21wdXRlIHRyYW5zZm9ybWF0aW9ucyBvZiB0aGUgaGllcmFyY2h5IG9mIHRoaXMgb2JqZWN0LFxuICAgICAqIGlmIHRoZXkgd2VyZSBjaGFuZ2VkIGJ5IEphdmFTY3JpcHQgY29tcG9uZW50cyB0aGlzIGZyYW1lLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0Quc2V0VHJhbnNmb3JtV29ybGR9IGFuZFxuICAgICAqIHtAbGluayBPYmplY3QzRC5nZXRUcmFuc2Zvcm1Xb3JsZH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBnZXQgdHJhbnNmb3JtV29ybGQoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkod2FzbS5IRUFQRjMyLmJ1ZmZlciwgd2FzbS5fd2xfb2JqZWN0X3RyYW5zX3dvcmxkKHRoaXMuX2lkKSwgOCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB3b3JsZCB0cmFuc2Zvcm0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdCBHbG9iYWwgLyB3b3JsZCBzcGFjZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguNVxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0Quc2V0VHJhbnNmb3JtV29ybGR9IGFuZFxuICAgICAqIHtAbGluayBPYmplY3QzRC5nZXRUcmFuc2Zvcm1Xb3JsZH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBzZXQgdHJhbnNmb3JtV29ybGQodCkge1xuICAgICAgICB0aGlzLnRyYW5zZm9ybVdvcmxkLnNldCh0KTtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF90cmFuc193b3JsZF90b19sb2NhbCh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvY2FsIC8gb2JqZWN0IHNwYWNlIHNjYWxpbmcuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5zZXRTY2FsaW5nTG9jYWx9IGFuZFxuICAgICAqIHtAbGluayBPYmplY3QzRC5nZXRTY2FsaW5nTG9jYWx9IGluc3RlYWQuXG4gICAgICovXG4gICAgZ2V0IHNjYWxpbmdMb2NhbCgpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSh3YXNtLkhFQVBGMzIuYnVmZmVyLCB3YXNtLl93bF9vYmplY3Rfc2NhbGluZ19sb2NhbCh0aGlzLl9pZCksIDMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgbG9jYWwgc3BhY2Ugc2NhbGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzIExvY2FsIHNwYWNlIHNjYWxpbmcuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjdcbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnNldFNjYWxpbmdMb2NhbH0gYW5kXG4gICAgICoge0BsaW5rIE9iamVjdDNELmdldFNjYWxpbmdMb2NhbH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBzZXQgc2NhbGluZ0xvY2FsKHMpIHtcbiAgICAgICAgdGhpcy5zY2FsaW5nTG9jYWwuc2V0KHMpO1xuICAgICAgICB0aGlzLnNldERpcnR5KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdsb2JhbCAvIHdvcmxkIHNwYWNlIHNjYWxpbmcuXG4gICAgICpcbiAgICAgKiBNYXkgcmVjb21wdXRlIHRyYW5zZm9ybWF0aW9ucyBvZiB0aGUgaGllcmFyY2h5IG9mIHRoaXMgb2JqZWN0LFxuICAgICAqIGlmIHRoZXkgd2VyZSBjaGFuZ2VkIGJ5IEphdmFTY3JpcHQgY29tcG9uZW50cyB0aGlzIGZyYW1lLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0Quc2V0U2NhbGluZ1dvcmxkfSBhbmRcbiAgICAgKiB7QGxpbmsgT2JqZWN0M0QuZ2V0U2NhbGluZ1dvcmxkfSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIGdldCBzY2FsaW5nV29ybGQoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkod2FzbS5IRUFQRjMyLmJ1ZmZlciwgd2FzbS5fd2xfb2JqZWN0X3NjYWxpbmdfd29ybGQodGhpcy5faWQpLCAzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHdvcmxkIHNwYWNlIHNjYWxpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdCBXb3JsZCBzcGFjZSBzY2FsaW5nLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5zZXRTY2FsaW5nV29ybGR9IGFuZFxuICAgICAqIHtAbGluayBPYmplY3QzRC5nZXRTY2FsaW5nV29ybGR9IGluc3RlYWQuXG4gICAgICovXG4gICAgc2V0IHNjYWxpbmdXb3JsZChzKSB7XG4gICAgICAgIHRoaXMuc2NhbGluZ1dvcmxkLnNldChzKTtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9zY2FsaW5nX3dvcmxkX3RvX2xvY2FsKHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9jYWwgc3BhY2Ugcm90YXRpb24uXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjdcbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELmdldFJvdGF0aW9uTG9jYWx9IGFuZFxuICAgICAqIHtAbGluayBPYmplY3QzRC5zZXRSb3RhdGlvbkxvY2FsfSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIGdldCByb3RhdGlvbkxvY2FsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1Mb2NhbC5zdWJhcnJheSgwLCA0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2xvYmFsIC8gd29ybGQgc3BhY2Ugcm90YXRpb25cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0QuZ2V0Um90YXRpb25Xb3JsZH0gYW5kXG4gICAgICoge0BsaW5rIE9iamVjdDNELnNldFJvdGF0aW9uV29ybGR9IGluc3RlYWQuXG4gICAgICovXG4gICAgZ2V0IHJvdGF0aW9uV29ybGQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybVdvcmxkLnN1YmFycmF5KDAsIDQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgbG9jYWwgc3BhY2Ugcm90YXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gciBMb2NhbCBzcGFjZSByb3RhdGlvblxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5nZXRSb3RhdGlvbkxvY2FsfSBhbmRcbiAgICAgKiB7QGxpbmsgT2JqZWN0M0Quc2V0Um90YXRpb25Mb2NhbH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBzZXQgcm90YXRpb25Mb2NhbChyKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3Rfc2V0X3JvdGF0aW9uX2xvY2FsKHRoaXMuX2lkLCByWzBdLCByWzFdLCByWzJdLCByWzNdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHdvcmxkIHNwYWNlIHJvdGF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHIgR2xvYmFsIC8gd29ybGQgc3BhY2Ugcm90YXRpb24uXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjdcbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELmdldFJvdGF0aW9uV29ybGR9IGFuZFxuICAgICAqIHtAbGluayBPYmplY3QzRC5zZXRSb3RhdGlvbldvcmxkfSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIHNldCByb3RhdGlvbldvcmxkKHIpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9zZXRfcm90YXRpb25fd29ybGQodGhpcy5faWQsIHJbMF0sIHJbMV0sIHJbMl0sIHJbM10pO1xuICAgIH1cbiAgICAvKiogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0QuZ2V0Rm9yd2FyZFdvcmxkfSBpbnN0ZWFkLiAqL1xuICAgIGdldEZvcndhcmQob3V0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEZvcndhcmRXb3JsZChvdXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlIHRoZSBvYmplY3QncyBmb3J3YXJkIGZhY2luZyB3b3JsZCBzcGFjZSB2ZWN0b3IuXG4gICAgICpcbiAgICAgKiBUaGUgZm9yd2FyZCB2ZWN0b3IgaW4gb2JqZWN0IHNwYWNlIGlzIGFsb25nIHRoZSBuZWdhdGl2ZSB6LWF4aXMsIGkuZS4sXG4gICAgICogYFswLCAwLCAtMV1gLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgMyBlbGVtZW50cy5cbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICovXG4gICAgZ2V0Rm9yd2FyZFdvcmxkKG91dCkge1xuICAgICAgICBvdXRbMF0gPSAwO1xuICAgICAgICBvdXRbMV0gPSAwO1xuICAgICAgICBvdXRbMl0gPSAtMTtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1WZWN0b3JXb3JsZChvdXQpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKiogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0QuZ2V0VXBXb3JsZH0gaW5zdGVhZC4gKi9cbiAgICBnZXRVcChvdXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VXBXb3JsZChvdXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlIHRoZSBvYmplY3QncyB1cCBmYWNpbmcgd29ybGQgc3BhY2UgdmVjdG9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgMyBlbGVtZW50cy5cbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICovXG4gICAgZ2V0VXBXb3JsZChvdXQpIHtcbiAgICAgICAgb3V0WzBdID0gMDtcbiAgICAgICAgb3V0WzFdID0gMTtcbiAgICAgICAgb3V0WzJdID0gMDtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1WZWN0b3JXb3JsZChvdXQpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKiogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0QuZ2V0UmlnaHRXb3JsZH0gaW5zdGVhZC4gKi9cbiAgICBnZXRSaWdodChvdXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmlnaHRXb3JsZChvdXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlIHRoZSBvYmplY3QncyByaWdodCBmYWNpbmcgd29ybGQgc3BhY2UgdmVjdG9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgMyBlbGVtZW50cy5cbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICovXG4gICAgZ2V0UmlnaHRXb3JsZChvdXQpIHtcbiAgICAgICAgb3V0WzBdID0gMTtcbiAgICAgICAgb3V0WzFdID0gMDtcbiAgICAgICAgb3V0WzJdID0gMDtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1WZWN0b3JXb3JsZChvdXQpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYSB2ZWN0b3IgYnkgdGhpcyBvYmplY3QncyB3b3JsZCB0cmFuc2Zvcm0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IE91dCB2ZWN0b3JcbiAgICAgKiBAcGFyYW0gdiBWZWN0b3IgdG8gdHJhbnNmb3JtLCBkZWZhdWx0IGBvdXRgXG4gICAgICogQHJldHVybiBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICovXG4gICAgdHJhbnNmb3JtVmVjdG9yV29ybGQob3V0LCB2ID0gb3V0KSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzBdID0gdlswXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzFdID0gdlsxXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzJdID0gdlsyXTtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3RyYW5zZm9ybVZlY3RvcldvcmxkKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIGEgdmVjdG9yIGJ5IHRoaXMgb2JqZWN0J3MgbG9jYWwgdHJhbnNmb3JtLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBPdXQgdmVjdG9yXG4gICAgICogQHBhcmFtIHYgVmVjdG9yIHRvIHRyYW5zZm9ybSwgZGVmYXVsdCBgb3V0YFxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqL1xuICAgIHRyYW5zZm9ybVZlY3RvckxvY2FsKG91dCwgdiA9IG91dCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFswXSA9IHZbMF07XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFsxXSA9IHZbMV07XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFsyXSA9IHZbMl07XG4gICAgICAgIHdhc20uX3dsX29iamVjdF90cmFuc2Zvcm1WZWN0b3JMb2NhbCh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBhIHBvaW50IGJ5IHRoaXMgb2JqZWN0J3Mgd29ybGQgdHJhbnNmb3JtLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBPdXQgcG9pbnQuXG4gICAgICogQHBhcmFtIHAgUG9pbnQgdG8gdHJhbnNmb3JtLCBkZWZhdWx0IGBvdXRgLlxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqL1xuICAgIHRyYW5zZm9ybVBvaW50V29ybGQob3V0LCBwID0gb3V0KSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzBdID0gcFswXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzFdID0gcFsxXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzJdID0gcFsyXTtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3RyYW5zZm9ybVBvaW50V29ybGQodGhpcy5faWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYSBwb2ludCBieSB0aGlzIG9iamVjdCdzIGxvY2FsIHRyYW5zZm9ybS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgT3V0IHBvaW50LlxuICAgICAqIEBwYXJhbSBwIFBvaW50IHRvIHRyYW5zZm9ybSwgZGVmYXVsdCBgb3V0YC5cbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjdcbiAgICAgKi9cbiAgICB0cmFuc2Zvcm1Qb2ludExvY2FsKG91dCwgcCA9IG91dCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFswXSA9IHBbMF07XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFsxXSA9IHBbMV07XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFsyXSA9IHBbMl07XG4gICAgICAgIHdhc20uX3dsX29iamVjdF90cmFuc2Zvcm1Qb2ludExvY2FsKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIGEgdmVjdG9yIGJ5IHRoaXMgb2JqZWN0J3MgaW52ZXJzZSB3b3JsZCB0cmFuc2Zvcm0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IE91dCB2ZWN0b3IuXG4gICAgICogQHBhcmFtIHYgVmVjdG9yIHRvIHRyYW5zZm9ybSwgZGVmYXVsdCBgb3V0YC5cbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjdcbiAgICAgKi9cbiAgICB0cmFuc2Zvcm1WZWN0b3JJbnZlcnNlV29ybGQob3V0LCB2ID0gb3V0KSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzBdID0gdlswXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzFdID0gdlsxXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzJdID0gdlsyXTtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3RyYW5zZm9ybVZlY3RvckludmVyc2VXb3JsZCh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBhIHZlY3RvciBieSB0aGlzIG9iamVjdCdzIGludmVyc2UgbG9jYWwgdHJhbnNmb3JtLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBPdXQgdmVjdG9yXG4gICAgICogQHBhcmFtIHYgVmVjdG9yIHRvIHRyYW5zZm9ybSwgZGVmYXVsdCBgb3V0YFxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqL1xuICAgIHRyYW5zZm9ybVZlY3RvckludmVyc2VMb2NhbChvdXQsIHYgPSBvdXQpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMF0gPSB2WzBdO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMV0gPSB2WzFdO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMl0gPSB2WzJdO1xuICAgICAgICB3YXNtLl93bF9vYmplY3RfdHJhbnNmb3JtVmVjdG9ySW52ZXJzZUxvY2FsKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIGEgcG9pbnQgYnkgdGhpcyBvYmplY3QncyBpbnZlcnNlIHdvcmxkIHRyYW5zZm9ybS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgT3V0IHBvaW50LlxuICAgICAqIEBwYXJhbSBwIFBvaW50IHRvIHRyYW5zZm9ybSwgZGVmYXVsdCBgb3V0YC5cbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjdcbiAgICAgKi9cbiAgICB0cmFuc2Zvcm1Qb2ludEludmVyc2VXb3JsZChvdXQsIHAgPSBvdXQpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMF0gPSBwWzBdO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMV0gPSBwWzFdO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMl0gPSBwWzJdO1xuICAgICAgICB3YXNtLl93bF9vYmplY3RfdHJhbnNmb3JtUG9pbnRJbnZlcnNlV29ybGQodGhpcy5faWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYSBwb2ludCBieSB0aGlzIG9iamVjdCdzIGludmVyc2UgbG9jYWwgdHJhbnNmb3JtLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBPdXQgcG9pbnQuXG4gICAgICogQHBhcmFtIHAgUG9pbnQgdG8gdHJhbnNmb3JtLCBkZWZhdWx0IGBvdXRgLlxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqL1xuICAgIHRyYW5zZm9ybVBvaW50SW52ZXJzZUxvY2FsKG91dCwgcCA9IG91dCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdC5zZXQocCk7XG4gICAgICAgIHdhc20uX3dsX29iamVjdF90cmFuc2Zvcm1Qb2ludEludmVyc2VMb2NhbCh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBhbiBvYmplY3Qgc3BhY2UgZHVhbCBxdWF0ZXJuaW9uIGludG8gd29ybGQgc3BhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IE91dCB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKiBAcGFyYW0gcSBMb2NhbCBzcGFjZSB0cmFuc2Zvcm1hdGlvbiwgZGVmYXVsdCBgb3V0YC5cbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjdcbiAgICAgKi9cbiAgICB0b1dvcmxkU3BhY2VUcmFuc2Zvcm0ob3V0LCBxID0gb3V0KSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0LnNldChxKTtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3RvV29ybGRTcGFjZVRyYW5zZm9ybSh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIG91dFszXSA9IHdhc20uX3RlbXBNZW1GbG9hdFszXTtcbiAgICAgICAgb3V0WzRdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzRdO1xuICAgICAgICBvdXRbNV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbNV07XG4gICAgICAgIG91dFs2XSA9IHdhc20uX3RlbXBNZW1GbG9hdFs2XTtcbiAgICAgICAgb3V0WzddID0gd2FzbS5fdGVtcE1lbUZsb2F0WzddO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYSB3b3JsZCBzcGFjZSBkdWFsIHF1YXRlcm5pb24gaW50byBsb2NhbCBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgT3V0IHRyYW5zZm9ybWF0aW9uXG4gICAgICogQHBhcmFtIHEgV29ybGQgc3BhY2UgdHJhbnNmb3JtYXRpb24sIGRlZmF1bHQgYG91dGBcbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjdcbiAgICAgKi9cbiAgICB0b0xvY2FsU3BhY2VUcmFuc2Zvcm0ob3V0LCBxID0gb3V0KSB7XG4gICAgICAgIGNvbnN0IHAgPSB0aGlzLnBhcmVudDtcbiAgICAgICAgaWYgKHApIHtcbiAgICAgICAgICAgIHAudG9PYmplY3RTcGFjZVRyYW5zZm9ybShvdXQsIHEpO1xuICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3V0ICE9PSBxKSB7XG4gICAgICAgICAgICBvdXRbMF0gPSBxWzBdO1xuICAgICAgICAgICAgb3V0WzFdID0gcVsxXTtcbiAgICAgICAgICAgIG91dFsyXSA9IHFbMl07XG4gICAgICAgICAgICBvdXRbM10gPSBxWzNdO1xuICAgICAgICAgICAgb3V0WzRdID0gcVs0XTtcbiAgICAgICAgICAgIG91dFs1XSA9IHFbNV07XG4gICAgICAgICAgICBvdXRbNl0gPSBxWzZdO1xuICAgICAgICAgICAgb3V0WzddID0gcVs3XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYSB3b3JsZCBzcGFjZSBkdWFsIHF1YXRlcm5pb24gaW50byBvYmplY3Qgc3BhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IE91dCB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKiBAcGFyYW0gcSBXb3JsZCBzcGFjZSB0cmFuc2Zvcm1hdGlvbiwgZGVmYXVsdCBgb3V0YFxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqL1xuICAgIHRvT2JqZWN0U3BhY2VUcmFuc2Zvcm0ob3V0LCBxID0gb3V0KSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0LnNldChxKTtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3RvT2JqZWN0U3BhY2VUcmFuc2Zvcm0odGhpcy5faWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICBvdXRbM10gPSB3YXNtLl90ZW1wTWVtRmxvYXRbM107XG4gICAgICAgIG91dFs0XSA9IHdhc20uX3RlbXBNZW1GbG9hdFs0XTtcbiAgICAgICAgb3V0WzVdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzVdO1xuICAgICAgICBvdXRbNl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbNl07XG4gICAgICAgIG91dFs3XSA9IHdhc20uX3RlbXBNZW1GbG9hdFs3XTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHVybiB0b3dhcmRzIC8gbG9vayBhdCB0YXJnZXQuXG4gICAgICpcbiAgICAgKiBSb3RhdGVzIHRoZSBvYmplY3Qgc28gdGhhdCBpdHMgZm9yd2FyZCB2ZWN0b3IgZmFjZXMgdG93YXJkcyB0aGUgdGFyZ2V0XG4gICAgICogcG9zaXRpb24uIFRoZSBgdXBgIHZlY3RvciBhY3RzIGFzIGEgaGludCB0byB1bmlxdWVseSBvcmllbnQgdGhlIG9iamVjdCdzXG4gICAgICogdXAgZGlyZWN0aW9uLiBXaGVuIG9yaWVudGluZyBhIHZpZXcgY29tcG9uZW50LCB0aGUgcHJvamVjdGVkIGB1cGAgdmVjdG9yXG4gICAgICogZmFjZXMgdXB3YXJkcyBvbiB0aGUgdmlld2luZyBwbGFuZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwIFRhcmdldCBwb3NpdGlvbiB0byB0dXJuIHRvd2FyZHMsIGluIHdvcmxkIHNwYWNlLlxuICAgICAqIEBwYXJhbSB1cCBVcCB2ZWN0b3IgdG8gYWxpZ24gb2JqZWN0IHdpdGgsIGluIHdvcmxkIHNwYWNlLiBEZWZhdWx0IGlzIGBbMCwgMSwgMF1gLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIGxvb2tBdChwLCB1cCA9IFVQX1ZFQ1RPUikge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X2xvb2tBdCh0aGlzLl9pZCwgcFswXSwgcFsxXSwgcFsyXSwgdXBbMF0sIHVwWzFdLCB1cFsyXSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKiogRGVzdHJveSB0aGUgb2JqZWN0IHdpdGggYWxsIG9mIGl0cyBjb21wb25lbnRzIGFuZCByZW1vdmUgaXQgZnJvbSB0aGUgc2NlbmUgKi9cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBpZiAodGhpcy5faWQgPCAwKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAvKiBUaGlzIHdpbGwgYXV0b21hdGljYWxseSBjYWxsIGBzY2VuZS5fZGVzdHJveU9iamVjdGAgKi9cbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3JlbW92ZSh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hcmsgdHJhbnNmb3JtYXRpb24gZGlydHkuXG4gICAgICpcbiAgICAgKiBDYXVzZXMgYW4gZXZlbnR1YWwgcmVjYWxjdWxhdGlvbiBvZiB7QGxpbmsgdHJhbnNmb3JtV29ybGR9LCBlaXRoZXJcbiAgICAgKiBvbiBuZXh0IHtAbGluayBnZXRUcmFuc2xhdGlvbldvcmxkfSwge0BsaW5rIHRyYW5zZm9ybVdvcmxkfSBvclxuICAgICAqIHtAbGluayBzY2FsaW5nV29ybGR9IG9yIHRoZSBiZWdpbm5pbmcgb2YgbmV4dCBmcmFtZSwgd2hpY2hldmVyXG4gICAgICogaGFwcGVucyBmaXJzdC5cbiAgICAgKi9cbiAgICBzZXREaXJ0eSgpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9zZXRfZGlydHkodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNhYmxlL2VuYWJsZSBhbGwgY29tcG9uZW50cyBvZiB0aGlzIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiIE5ldyBzdGF0ZSBmb3IgdGhlIGNvbXBvbmVudHMuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjVcbiAgICAgKi9cbiAgICBzZXQgYWN0aXZlKGIpIHtcbiAgICAgICAgY29uc3QgY29tcHMgPSB0aGlzLmdldENvbXBvbmVudHMoKTtcbiAgICAgICAgZm9yIChsZXQgYyBvZiBjb21wcykge1xuICAgICAgICAgICAgYy5hY3RpdmUgPSBiO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldENvbXBvbmVudCh0eXBlT3JDbGFzcywgaW5kZXggPSAwKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgdHlwZSA9IGlzU3RyaW5nKHR5cGVPckNsYXNzKSA/IHR5cGVPckNsYXNzIDogdHlwZU9yQ2xhc3MuVHlwZU5hbWU7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5fc2NlbmU7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudFR5cGUgPSB3YXNtLl93bF9zY2VuZV9nZXRfY29tcG9uZW50X21hbmFnZXJfaW5kZXgoc2NlbmUuX2luZGV4LCB3YXNtLnRlbXBVVEY4KHR5cGUpKTtcbiAgICAgICAgaWYgKGNvbXBvbmVudFR5cGUgPCAwKSB7XG4gICAgICAgICAgICAvKiBOb3QgYSBuYXRpdmUgY29tcG9uZW50LCB0cnkganM6ICovXG4gICAgICAgICAgICBjb25zdCB0eXBlSW5kZXggPSB3YXNtLl9jb21wb25lbnRUeXBlSW5kaWNlc1t0eXBlXTtcbiAgICAgICAgICAgIGlmICh0eXBlSW5kZXggPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IGpzSW5kZXggPSB3YXNtLl93bF9nZXRfanNfY29tcG9uZW50X2luZGV4KHRoaXMuX2lkLCB0eXBlSW5kZXgsIGluZGV4KTtcbiAgICAgICAgICAgIGlmIChqc0luZGV4IDwgMClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMuX3NjZW5lLl9qc0NvbXBvbmVudHNbanNJbmRleF07XG4gICAgICAgICAgICByZXR1cm4gY29tcG9uZW50LmNvbnN0cnVjdG9yICE9PSBCcm9rZW5Db21wb25lbnQgPyBjb21wb25lbnQgOiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudElkID0gd2FzbS5fd2xfZ2V0X2NvbXBvbmVudF9pZCh0aGlzLl9pZCwgY29tcG9uZW50VHlwZSwgaW5kZXgpO1xuICAgICAgICByZXR1cm4gc2NlbmUuX2NvbXBvbmVudHMud3JhcE5hdGl2ZShjb21wb25lbnRUeXBlLCBjb21wb25lbnRJZCk7XG4gICAgfVxuICAgIGdldENvbXBvbmVudHModHlwZU9yQ2xhc3MpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuX3NjZW5lO1xuICAgICAgICBsZXQgbWFuYWdlciA9IG51bGw7XG4gICAgICAgIGxldCB0eXBlID0gbnVsbDtcbiAgICAgICAgaWYgKHR5cGVPckNsYXNzKSB7XG4gICAgICAgICAgICB0eXBlID0gaXNTdHJpbmcodHlwZU9yQ2xhc3MpID8gdHlwZU9yQ2xhc3MgOiB0eXBlT3JDbGFzcy5UeXBlTmFtZTtcbiAgICAgICAgICAgIGNvbnN0IG5hdGl2ZU1hbmFnZXIgPSBzY2VuZS5fY29tcG9uZW50cy5nZXROYXRpdmVNYW5hZ2VyKHR5cGUpO1xuICAgICAgICAgICAgbWFuYWdlciA9IG5hdGl2ZU1hbmFnZXIgIT09IG51bGwgPyBuYXRpdmVNYW5hZ2VyIDogc2NlbmUuX2NvbXBvbmVudHMuanM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29tcG9uZW50cyA9IFtdO1xuICAgICAgICBjb25zdCBtYXhDb21wcyA9IE1hdGguZmxvb3IoKHdhc20uX3RlbXBNZW1TaXplIC8gMykgKiAyKTtcbiAgICAgICAgY29uc3QgY29tcG9uZW50c0NvdW50ID0gd2FzbS5fd2xfb2JqZWN0X2dldF9jb21wb25lbnRzKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtLCBtYXhDb21wcyk7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IDIgKiBjb21wb25lbnRzQ291bnQ7XG4gICAgICAgIHdhc20uX3dsX29iamVjdF9nZXRfY29tcG9uZW50X3R5cGVzKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtICsgb2Zmc2V0LCBtYXhDb21wcyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29tcG9uZW50c0NvdW50OyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB3YXNtLl90ZW1wTWVtVWludDhbaSArIG9mZnNldF07XG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnRJZCA9IHdhc20uX3RlbXBNZW1VaW50MTZbaV07XG4gICAgICAgICAgICBpZiAobWFuYWdlciAhPT0gbnVsbCAmJiB0ICE9PSBtYW5hZ2VyKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3QgY29tcCA9IHRoaXMuX3NjZW5lLl9jb21wb25lbnRzLndyYXBBbnkodCwgY29tcG9uZW50SWQpO1xuICAgICAgICAgICAgaWYgKCFjb21wKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKHR5cGUgJiYgdHlwZSAhPT0gY29tcC5jb25zdHJ1Y3Rvci5UeXBlTmFtZSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbXBvbmVudHMucHVzaChjb21wKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29tcG9uZW50cztcbiAgICB9XG4gICAgYWRkQ29tcG9uZW50KHR5cGVPckNsYXNzLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCB0eXBlID0gaXNTdHJpbmcodHlwZU9yQ2xhc3MpID8gdHlwZU9yQ2xhc3MgOiB0eXBlT3JDbGFzcy5UeXBlTmFtZTtcbiAgICAgICAgY29uc3QgbmF0aXZlTWFuYWdlciA9IHRoaXMuX3NjZW5lLl9jb21wb25lbnRzLmdldE5hdGl2ZU1hbmFnZXIodHlwZSk7XG4gICAgICAgIGNvbnN0IGlzTmF0aXZlID0gbmF0aXZlTWFuYWdlciAhPT0gbnVsbDtcbiAgICAgICAgY29uc3QgbWFuYWdlciA9IGlzTmF0aXZlID8gbmF0aXZlTWFuYWdlciA6IHRoaXMuX3NjZW5lLl9jb21wb25lbnRzLmpzO1xuICAgICAgICBsZXQgY29tcG9uZW50SWQgPSAtMTtcbiAgICAgICAgaWYgKCFpc05hdGl2ZSkge1xuICAgICAgICAgICAgLyogSmF2YVNjcmlwdCBjb21wb25lbnQgKi9cbiAgICAgICAgICAgIGlmICghKHR5cGUgaW4gd2FzbS5fY29tcG9uZW50VHlwZUluZGljZXMpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVua25vd24gY29tcG9uZW50IHR5cGUgJ1wiICsgdHlwZSArIFwiJ1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbXBvbmVudElkID0gd2FzbS5fd2xfb2JqZWN0X2FkZF9qc19jb21wb25lbnQodGhpcy5faWQsIHdhc20uX2NvbXBvbmVudFR5cGVJbmRpY2VzW3R5cGVdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8qIG5hdGl2ZSBjb21wb25lbnQgKi9cbiAgICAgICAgICAgIGNvbXBvbmVudElkID0gd2FzbS5fd2xfb2JqZWN0X2FkZF9jb21wb25lbnQodGhpcy5faWQsIG1hbmFnZXIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMuX3NjZW5lLl9jb21wb25lbnRzLndyYXBBbnkobWFuYWdlciwgY29tcG9uZW50SWQpO1xuICAgICAgICBpZiAocGFyYW1zICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBjb21wb25lbnQuY29weShwYXJhbXMpO1xuICAgICAgICAvKiBFeHBsaWNpdGx5IGluaXRpYWxpemUganMgY29tcG9uZW50cyAqL1xuICAgICAgICBpZiAoIWlzTmF0aXZlKSB7XG4gICAgICAgICAgICBjb21wb25lbnQuX3RyaWdnZXJJbml0KCk7XG4gICAgICAgICAgICAvKiBzdGFydCgpIGlzIGNhbGxlZCB0aHJvdWdoIG9uQWN0aXZhdGUoKSAqL1xuICAgICAgICB9XG4gICAgICAgIC8qIElmIGl0IHdhcyBub3QgZXhwbGljaXRseSByZXF1ZXN0ZWQgYnkgdGhlIHVzZXIgdG8gbGVhdmUgdGhlIGNvbXBvbmVudCBpbmFjdGl2ZSxcbiAgICAgICAgICogd2UgYWN0aXZhdGUgaXQgYXMgYSBmaW5hbCBzdGVwLiBUaGlzIGludmFsaWRhdGVzIGNvbXBvbmVudEluZGV4ISAqL1xuICAgICAgICBpZiAoIXBhcmFtcyB8fCAhKCdhY3RpdmUnIGluIHBhcmFtcyAmJiAhcGFyYW1zLmFjdGl2ZSkpIHtcbiAgICAgICAgICAgIGNvbXBvbmVudC5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb21wb25lbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlYXJjaCBmb3IgZGVzY2VuZGFudHMgbWF0Y2hpbmcgdGhlIG5hbWUuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBhIHdyYXBwZXIgYXJvdW5kIHtAbGluayBPYmplY3QzRC5maW5kQnlOYW1lRGlyZWN0fSBhbmRcbiAgICAgKiB7QGxpbmsgT2JqZWN0M0QuZmluZEJ5TmFtZVJlY3Vyc2l2ZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSB0byBzZWFyY2ggZm9yLlxuICAgICAqIEBwYXJhbSByZWN1cnNpdmUgSWYgYHRydWVgLCB0aGUgbWV0aG9kIHdpbGwgbG9vayBhdCBhbGwgdGhlIGRlc2NlbmRhbnRzIG9mIHRoaXMgb2JqZWN0LlxuICAgICAqICAgICBJZiBgZmFsc2VgLCB0aGlzIG1ldGhvZCB3aWxsIG9ubHkgcGVyZm9ybSB0aGUgc2VhcmNoIGluIGRpcmVjdCBjaGlsZHJlbi5cbiAgICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiB7QGxpbmsgT2JqZWN0M0R9IG1hdGNoaW5nIHRoZSBuYW1lLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMS4wXG4gICAgICovXG4gICAgZmluZEJ5TmFtZShuYW1lLCByZWN1cnNpdmUgPSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gcmVjdXJzaXZlID8gdGhpcy5maW5kQnlOYW1lUmVjdXJzaXZlKG5hbWUpIDogdGhpcy5maW5kQnlOYW1lRGlyZWN0KG5hbWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZWFyY2ggZm9yIGFsbCAqKmRpcmVjdCoqIGNoaWxkcmVuIG1hdGNoaW5nIHRoZSBuYW1lLlxuICAgICAqXG4gICAgICogQG5vdGUgRXZlbiB0aG91Z2ggdGhpcyBtZXRob2QgaXMgaGVhdmlseSBvcHRpbWl6ZWQsIGl0IGRvZXMgcGVyZm9ybVxuICAgICAqIGEgbGluZWFyIHNlYXJjaCB0byBmaW5kIHRoZSBvYmplY3RzLiBEbyBub3QgdXNlIGluIGEgaG90IHBhdGguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSB0byBzZWFyY2ggZm9yLlxuICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHtAbGluayBPYmplY3QzRH0gbWF0Y2hpbmcgdGhlIG5hbWUuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4xLjBcbiAgICAgKi9cbiAgICBmaW5kQnlOYW1lRGlyZWN0KG5hbWUpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBpZCA9IHRoaXMuX2lkO1xuICAgICAgICAvKiBEaXZpZGUgYnkgNCB0byBnZXQgaGFsZiBhcyBtYW55IHVzaG9ydCBhcyBwb3NzaWJsZSAqL1xuICAgICAgICBjb25zdCB0ZW1wU2l6ZVUxNiA9IHdhc20uX3RlbXBNZW1TaXplID4+IDI7XG4gICAgICAgIGNvbnN0IG1heENvdW50ID0gdGVtcFNpemVVMTYgLSAyOyAvKiBSZXNlcnZlIHR3byB1c2hvcnQgKi9cbiAgICAgICAgY29uc3QgYnVmZmVyID0gd2FzbS5fdGVtcE1lbVVpbnQxNjtcbiAgICAgICAgYnVmZmVyW21heENvdW50XSA9IDA7IC8qIEluZGV4IG9mZnNldCAqL1xuICAgICAgICBidWZmZXJbbWF4Q291bnQgKyAxXSA9IDA7IC8qIGNoaWxkIGNvdW50ICovXG4gICAgICAgIGNvbnN0IGJ1ZmZlclB0ciA9IHdhc20uX3RlbXBNZW07XG4gICAgICAgIGNvbnN0IGluZGV4UHRyID0gYnVmZmVyUHRyICsgbWF4Q291bnQgKiAyO1xuICAgICAgICBjb25zdCBjaGlsZENvdW50UHRyID0gYnVmZmVyUHRyICsgbWF4Q291bnQgKiAyICsgMjtcbiAgICAgICAgY29uc3QgbmFtZVB0ciA9IHdhc20udGVtcFVURjgobmFtZSwgKG1heENvdW50ICsgMikgKiAyKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgICAgIGxldCByZWFkID0gMDtcbiAgICAgICAgd2hpbGUgKChyZWFkID0gd2FzbS5fd2xfb2JqZWN0X2ZpbmRCeU5hbWUoaWQsIG5hbWVQdHIsIGluZGV4UHRyLCBjaGlsZENvdW50UHRyLCBidWZmZXJQdHIsIG1heENvdW50KSkpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVhZDsgKytpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godGhpcy5fc2NlbmUud3JhcChidWZmZXJbaV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZWFyY2ggZm9yICoqYWxsIGRlc2NlbmRhbnRzKiogbWF0Y2hpbmcgdGhlIG5hbWUuXG4gICAgICpcbiAgICAgKiBAbm90ZSBFdmVuIHRob3VnaCB0aGlzIG1ldGhvZCBpcyBoZWF2aWx5IG9wdGltaXplZCwgaXQgZG9lcyBwZXJmb3JtXG4gICAgICogYSBsaW5lYXIgc2VhcmNoIHRvIGZpbmQgdGhlIG9iamVjdHMuIERvIG5vdCB1c2UgaW4gYSBob3QgcGF0aC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIHRvIHNlYXJjaCBmb3IuXG4gICAgICogQHJldHVybnMgQW4gYXJyYXkgb2Yge0BsaW5rIE9iamVjdDNEfSBtYXRjaGluZyB0aGUgbmFtZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuMFxuICAgICAqL1xuICAgIGZpbmRCeU5hbWVSZWN1cnNpdmUobmFtZSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGlkID0gdGhpcy5faWQ7XG4gICAgICAgIC8qIERpdmlkZSBieSA0IHRvIGdldCBoYWxmIGFzIG1hbnkgdXNob3J0IGFzIHBvc3NpYmxlICovXG4gICAgICAgIGNvbnN0IHRlbXBTaXplVTE2ID0gd2FzbS5fdGVtcE1lbVNpemUgPj4gMjtcbiAgICAgICAgY29uc3QgbWF4Q291bnQgPSB0ZW1wU2l6ZVUxNiAtIDE7IC8qIFJlc2VydmUgb25lIHVzaG9ydCAqL1xuICAgICAgICBjb25zdCBidWZmZXIgPSB3YXNtLl90ZW1wTWVtVWludDE2O1xuICAgICAgICBidWZmZXJbbWF4Q291bnRdID0gMDsgLyogSW5kZXggb2Zmc2V0ICovXG4gICAgICAgIGNvbnN0IGJ1ZmZlclB0ciA9IHdhc20uX3RlbXBNZW07XG4gICAgICAgIGNvbnN0IGluZGV4UHRyID0gYnVmZmVyUHRyICsgbWF4Q291bnQgKiAyO1xuICAgICAgICBjb25zdCBuYW1lUHRyID0gd2FzbS50ZW1wVVRGOChuYW1lLCAobWF4Q291bnQgKyAxKSAqIDIpO1xuICAgICAgICBsZXQgcmVhZCA9IDA7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgICAgICB3aGlsZSAoKHJlYWQgPSB3YXNtLl93bF9vYmplY3RfZmluZEJ5TmFtZVJlY3Vyc2l2ZShpZCwgbmFtZVB0ciwgaW5kZXhQdHIsIGJ1ZmZlclB0ciwgbWF4Q291bnQpKSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWFkOyArK2kpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh0aGlzLl9zY2VuZS53cmFwKGJ1ZmZlcltpXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgZ2l2ZW4gb2JqZWN0J3MgdHJhbnNmb3JtYXRpb24gaGFzIGNoYW5nZWQuXG4gICAgICovXG4gICAgZ2V0IGNoYW5nZWQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfaXNfY2hhbmdlZCh0aGlzLl9pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGB0cnVlYCBpZiB0aGUgb2JqZWN0IGlzIGRlc3Ryb3llZCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBJZiB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5lcmFzZVByb3RvdHlwZU9uRGVzdHJveX0gaXMgYHRydWVgLFxuICAgICAqIHJlYWRpbmcgYSBjdXN0b20gcHJvcGVydHkgd2lsbCBub3Qgd29yazpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogZW5naW5lLmVyYXNlUHJvdG90eXBlT25EZXN0cm95ID0gdHJ1ZTtcbiAgICAgKlxuICAgICAqIGNvbnN0IG9iaiA9IHNjZW5lLmFkZE9iamVjdCgpO1xuICAgICAqIG9iai5jdXN0b21QYXJhbSA9ICdIZWxsbyBXb3JsZCEnO1xuICAgICAqXG4gICAgICogY29uc29sZS5sb2cob2JqLmlzRGVzdHJveWVkKTsgLy8gUHJpbnRzIGBmYWxzZWBcbiAgICAgKiBvYmouZGVzdHJveSgpO1xuICAgICAqIGNvbnNvbGUubG9nKG9iai5pc0Rlc3Ryb3llZCk7IC8vIFByaW50cyBgdHJ1ZWBcbiAgICAgKiBjb25zb2xlLmxvZyhvYmouY3VzdG9tUGFyYW0pOyAvLyBUaHJvd3MgYW4gZXJyb3JcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuMVxuICAgICAqL1xuICAgIGdldCBpc0Rlc3Ryb3llZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lkIDwgMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGVxdWFsaXR5IGJ5IGNvbXBhcmluZyBpZHMgYW5kICoqbm90KiogdGhlIEphdmFTY3JpcHQgcmVmZXJlbmNlLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZSBVc2UgSmF2YVNjcmlwdCByZWZlcmVuY2UgY29tcGFyaXNvbiBpbnN0ZWFkOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBvYmplY3RBID0gc2NlbmUuYWRkT2JqZWN0KCk7XG4gICAgICogY29uc3Qgb2JqZWN0QiA9IHNjZW5lLmFkZE9iamVjdCgpO1xuICAgICAqIGNvbnN0IG9iamVjdEMgPSBvYmplY3RCO1xuICAgICAqIGNvbnNvbGUubG9nKG9iamVjdEEgPT09IG9iamVjdEIpOyAvLyBmYWxzZVxuICAgICAqIGNvbnNvbGUubG9nKG9iamVjdEEgPT09IG9iamVjdEEpOyAvLyB0cnVlXG4gICAgICogY29uc29sZS5sb2cob2JqZWN0QiA9PT0gb2JqZWN0Qyk7IC8vIHRydWVcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBlcXVhbHMob3RoZXJPYmplY3QpIHtcbiAgICAgICAgLyoqIEB0b2RvKDIuMC4wKTogUmVtb3ZlIHRoaXMgbWV0aG9kLiAqL1xuICAgICAgICBpZiAoIW90aGVyT2JqZWN0KVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcy5faWQgPT0gb3RoZXJPYmplY3QuX2lkO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAnT2JqZWN0M0QoZGVzdHJveWVkKSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGBPYmplY3QzRCgnJHt0aGlzLm5hbWV9JywgJHt0aGlzLl9sb2NhbElkfSlgO1xuICAgIH1cbn1cbi8qKlxuICogV3JhcHBlciBhcm91bmQgYSBuYXRpdmUgc2tpbiBkYXRhLlxuICovXG5leHBvcnQgY2xhc3MgU2tpbiBleHRlbmRzIFNjZW5lUmVzb3VyY2Uge1xuICAgIC8qKiBBbW91bnQgb2Ygam9pbnRzIGluIHRoaXMgc2tpbi4gKi9cbiAgICBnZXQgam9pbnRDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3NraW5fZ2V0X2pvaW50X2NvdW50KHRoaXMuX2lkKTtcbiAgICB9XG4gICAgLyoqIEpvaW50cyBvYmplY3QgaWRzIGZvciB0aGlzIHNraW4gKi9cbiAgICBnZXQgam9pbnRJZHMoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQxNkFycmF5KHdhc20uSEVBUFUxNi5idWZmZXIsIHdhc20uX3dsX3NraW5fam9pbnRfaWRzKHRoaXMuX2lkKSwgdGhpcy5qb2ludENvdW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRHVhbCBxdWF0ZXJuaW9ucyBpbiBhIGZsYXQgYXJyYXkgb2Ygc2l6ZSA4IHRpbWVzIHtAbGluayBqb2ludENvdW50fS5cbiAgICAgKlxuICAgICAqIEludmVyc2UgYmluZCB0cmFuc2Zvcm1zIG9mIHRoZSBza2luLlxuICAgICAqL1xuICAgIGdldCBpbnZlcnNlQmluZFRyYW5zZm9ybXMoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSh3YXNtLkhFQVBGMzIuYnVmZmVyLCB3YXNtLl93bF9za2luX2ludmVyc2VfYmluZF90cmFuc2Zvcm1zKHRoaXMuX2lkKSwgOCAqIHRoaXMuam9pbnRDb3VudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlY3RvcnMgaW4gYSBmbGF0IGFycmF5IG9mIHNpemUgMyB0aW1lcyB7QGxpbmsgam9pbnRDb3VudH0uXG4gICAgICpcbiAgICAgKiBJbnZlcnNlIGJpbmQgc2NhbGluZ3Mgb2YgdGhlIHNraW4uXG4gICAgICovXG4gICAgZ2V0IGludmVyc2VCaW5kU2NhbGluZ3MoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSh3YXNtLkhFQVBGMzIuYnVmZmVyLCB3YXNtLl93bF9za2luX2ludmVyc2VfYmluZF9zY2FsaW5ncyh0aGlzLl9pZCksIDMgKiB0aGlzLmpvaW50Q291bnQpO1xuICAgIH1cbn1cbi8qKlxuICogV3JhcHBlciBhcm91bmQgYSBuYXRpdmUgc2V0IG9mIG1vcnBoIHRhcmdldHMuXG4gKlxuICogIyMgVXNhZ2VcbiAqXG4gKiBgYGBqc1xuICogY29uc3QgbWVzaCA9IG9iamVjdC5nZXRDb21wb25lbnQoJ21lc2gnKTtcbiAqIGNvbnN0IG1vdXRoVGFyZ2V0ID0gbWVzaC5tb3JwaFRhcmdldHMuZ2V0VGFyZ2V0SW5kZXgoJ21vdXRoJyk7XG4gKiBtZXNoLnNldE1vcnBoVGFyZ2V0V2VpZ2h0KG1vdXRoVGFyZ2V0LCAwLjUpO1xuICogYGBgXG4gKlxuICogQHNpbmNlIDEuMi4wXG4gKi9cbmV4cG9ydCBjbGFzcyBNb3JwaFRhcmdldHMgZXh0ZW5kcyBSZXNvdXJjZSB7XG4gICAgLyoqIEFtb3VudCBvZiB0YXJnZXRzIGluIHRoaXMgbW9ycGggdGFyZ2V0IHNldC4gKi9cbiAgICBnZXQgY291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9tb3JwaF90YXJnZXRzX2dldF90YXJnZXRfY291bnQodGhpcy5faWQpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0aGUgbmFtZSBvZiBhIGdpdmVuIHRhcmdldCAqL1xuICAgIGdldFRhcmdldE5hbWUodGFyZ2V0KSB7XG4gICAgICAgIGlmICh0YXJnZXQgPj0gdGhpcy5jb3VudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbmRleCAke3RhcmdldH0gaXMgb3V0IG9mIGJvdW5kcyBmb3IgJHt0aGlzLmNvdW50fSB0YXJnZXRzYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiB3YXNtLlVURjhUb1N0cmluZyh3YXNtLl93bF9tb3JwaF90YXJnZXRzX2dldF90YXJnZXRfbmFtZSh0aGlzLl9pZCwgdGFyZ2V0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaW5kZXggZm9yIGEgZ2l2ZW4gdGFyZ2V0IG5hbWUuXG4gICAgICpcbiAgICAgKiBUaHJvd3MgaWYgbm8gdGFyZ2V0IHdpdGggdGhhdCBuYW1lIGV4aXN0cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIHRhcmdldC5cbiAgICAgKi9cbiAgICBnZXRUYXJnZXRJbmRleChuYW1lKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBpbmRleCA9IHdhc20uX3dsX21vcnBoX3RhcmdldHNfZ2V0X3RhcmdldF9pbmRleCh0aGlzLl9pZCwgd2FzbS50ZW1wVVRGOChuYW1lKSk7XG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBNaXNzaW5nIHRhcmdldCAnJHtuYW1lfSdgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgfVxufVxuLyogRm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgd2l0aCA8IDEuMC4wLiAqL1xuZXhwb3J0IHsgT2JqZWN0M0QgYXMgT2JqZWN0IH07XG4vKipcbiAqIFJheSBoaXQuXG4gKlxuICogUmVzdWx0IG9mIGEge0BsaW5rIFNjZW5lLnJheUNhc3R9IG9yIHtAbGluayBQaHlzaWNzLnJheUNhc3R9LlxuICpcbiAqIEBub3RlIHRoaXMgY2xhc3Mgd3JhcHMgaW50ZXJuYWwgZW5naW5lIGRhdGEgYW5kIHNob3VsZCBvbmx5IGJlIGNyZWF0ZWQgaW50ZXJuYWxseS5cbiAqL1xuZXhwb3J0IGNsYXNzIFJheUhpdCB7XG4gICAgLyoqIFNjZW5lIGluc3RhbmNlLiBAaGlkZGVuICovXG4gICAgX3NjZW5lO1xuICAgIC8qKiBQb2ludGVyIHRvIHRoZSBtZW1vcnkgaGVhcC4gKi9cbiAgICBfcHRyO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBwdHIgUG9pbnRlciB0byB0aGUgcmF5IGhpdHMgbWVtb3J5LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNjZW5lLCBwdHIpIHtcbiAgICAgICAgaWYgKChwdHIgJiAzKSAhPT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNhbGlnbmVkIHBvaW50ZXI6IHBsZWFzZSByZXBvcnQgYSBidWcnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zY2VuZSA9IHNjZW5lO1xuICAgICAgICB0aGlzLl9wdHIgPSBwdHI7XG4gICAgfVxuICAgIGdldExvY2F0aW9ucyhvdXQpIHtcbiAgICAgICAgb3V0ID0gb3V0ID8/IEFycmF5LmZyb20oeyBsZW5ndGg6IHRoaXMuaGl0Q291bnQgfSwgKCkgPT4gbmV3IEZsb2F0MzJBcnJheSgzKSk7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBhbGlnbmVkUHRyID0gdGhpcy5fcHRyIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5oaXRDb3VudDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBsb2NhdGlvblB0ciA9IGFsaWduZWRQdHIgKyAzICogaTtcbiAgICAgICAgICAgIG91dFtpXVswXSA9IHdhc20uSEVBUEYzMltsb2NhdGlvblB0cl07XG4gICAgICAgICAgICBvdXRbaV1bMV0gPSB3YXNtLkhFQVBGMzJbbG9jYXRpb25QdHIgKyAxXTtcbiAgICAgICAgICAgIG91dFtpXVsyXSA9IHdhc20uSEVBUEYzMltsb2NhdGlvblB0ciArIDJdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIGdldE5vcm1hbHMob3V0KSB7XG4gICAgICAgIG91dCA9IG91dCA/PyBBcnJheS5mcm9tKHsgbGVuZ3RoOiB0aGlzLmhpdENvdW50IH0sICgpID0+IG5ldyBGbG9hdDMyQXJyYXkoMykpO1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgYWxpZ25lZFB0ciA9ICh0aGlzLl9wdHIgKyA0OCkgLyA0OyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmhpdENvdW50OyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbFB0ciA9IGFsaWduZWRQdHIgKyAzICogaTtcbiAgICAgICAgICAgIG91dFtpXVswXSA9IHdhc20uSEVBUEYzMltub3JtYWxQdHJdO1xuICAgICAgICAgICAgb3V0W2ldWzFdID0gd2FzbS5IRUFQRjMyW25vcm1hbFB0ciArIDFdO1xuICAgICAgICAgICAgb3V0W2ldWzJdID0gd2FzbS5IRUFQRjMyW25vcm1hbFB0ciArIDJdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIGdldERpc3RhbmNlcyhvdXQgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuaGl0Q291bnQpKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBhbGlnbmVkUHRyID0gKHRoaXMuX3B0ciArIDQ4ICogMikgLyA0OyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmhpdENvdW50OyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlUHRyID0gYWxpZ25lZFB0ciArIGk7XG4gICAgICAgICAgICBvdXRbaV0gPSB3YXNtLkhFQVBGMzJbZGlzdGFuY2VQdHJdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFycmF5IG9mIGhpdCBvYmplY3RzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgYHRoaXMuaGl0Q291bnRgIGVsZW1lbnRzLlxuICAgICAqIEByZXR1cm5zIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICovXG4gICAgZ2V0T2JqZWN0cyhvdXQgPSBuZXcgQXJyYXkodGhpcy5oaXRDb3VudCkpIHtcbiAgICAgICAgY29uc3QgSEVBUFUxNiA9IHRoaXMuZW5naW5lLndhc20uSEVBUFUxNjtcbiAgICAgICAgY29uc3QgYWxpZ25lZFB0ciA9ICh0aGlzLl9wdHIgKyAoNDggKiAyICsgMTYpKSA+PiAxO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaGl0Q291bnQ7ICsraSkge1xuICAgICAgICAgICAgb3V0W2ldID0gdGhpcy5fc2NlbmUud3JhcChIRUFQVTE2W2FsaWduZWRQdHIgKyBpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgLyoqIEhvc3RpbmcgZW5naW5lIGluc3RhbmNlLiAqL1xuICAgIGdldCBlbmdpbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zY2VuZS5lbmdpbmU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIFJheUhpdC5nZXRMb2NhdGlvbnN9LlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgUmF5SGl0LmdldExvY2F0aW9uc30gZm9yIHBlcmZvcm1hbmNlLlxuICAgICAqL1xuICAgIGdldCBsb2NhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldExvY2F0aW9ucygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBSYXlIaXQuZ2V0Tm9ybWFsc30uXG4gICAgICpcbiAgICAgKiBAbm90ZSBQcmVmZXIgdG8gdXNlIHtAbGluayBSYXlIaXQuZ2V0Tm9ybWFsc30gZm9yIHBlcmZvcm1hbmNlLlxuICAgICAqL1xuICAgIGdldCBub3JtYWxzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXROb3JtYWxzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIFJheUhpdC5nZXREaXN0YW5jZXN9LlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgUmF5SGl0LmdldERpc3RhbmNlc30gZm9yIHBlcmZvcm1hbmNlLlxuICAgICAqL1xuICAgIGdldCBkaXN0YW5jZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldERpc3RhbmNlcygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBSYXlIaXQuZ2V0T2JqZWN0c30uXG4gICAgICpcbiAgICAgKiBAbm90ZSBQcmVmZXIgdG8gdXNlIHtAbGluayBSYXlIaXQuZ2V0T2JqZWN0c30gZm9yIHBlcmZvcm1hbmNlLlxuICAgICAqL1xuICAgIGdldCBvYmplY3RzKCkge1xuICAgICAgICAvKiogQHRvZG86IFJlbW92ZSBhdCAyLjAuMCwgdGhpcyBpcyBrZXB0IGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LiAqL1xuICAgICAgICBjb25zdCBvYmplY3RzID0gW251bGwsIG51bGwsIG51bGwsIG51bGxdO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRPYmplY3RzKG9iamVjdHMpO1xuICAgIH1cbiAgICAvKiogTnVtYmVyIG9mIGhpdHMgKG1heCA0KSAqL1xuICAgIGdldCBoaXRDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKHRoaXMuZW5naW5lLndhc20uSEVBUFUzMlt0aGlzLl9wdHIgLyA0ICsgMzBdLCA0KTtcbiAgICB9XG59XG5jbGFzcyBtYXRoIHtcbiAgICAvKiogKEV4cGVyaW1lbnRhbCEpIEN1YmljIEhlcm1pdGUgc3BsaW5lIGludGVycG9sYXRpb24gZm9yIHZlY3RvcjMgYW5kIHF1YXRlcm5pb25zLlxuICAgICAqXG4gICAgICogV2l0aCBgZiA9PSAwYCwgYG91dGAgd2lsbCBiZSBgYmAsIGlmIGBmID09IDFgLCBgb3V0YCB3aWxsIGJlIGMuXG4gICAgICpcbiAgICAgKiBXaGV0aGVyIGEgcXVhdGVybmlvbiBvciB2ZWN0b3IzIGludGVycG9sYXRpb24gaXMgaW50ZW5kZWQgaXMgZGV0ZXJtaW5lZCBieVxuICAgICAqIGxlbmd0aCBvZiBgYWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IEFycmF5IHRvIHdyaXRlIHJlc3VsdCB0by5cbiAgICAgKiBAcGFyYW0gYSBGaXJzdCB0YW5nZW50L2hhbmRsZS5cbiAgICAgKiBAcGFyYW0gYiBGaXJzdCBwb2ludCBvciBxdWF0ZXJuaW9uLlxuICAgICAqIEBwYXJhbSBjIFNlY29uZCBwb2ludCBvciBxdWF0ZXJuaW9uLlxuICAgICAqIEBwYXJhbSBkIFNlY29uZCBoYW5kbGUuXG4gICAgICogQHBhcmFtIGYgSW50ZXJwb2xhdGlvbiBmYWN0b3IgaW4gWzA7IDFdLlxuICAgICAqIEByZXR1cm5zIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjZcbiAgICAgKi9cbiAgICBzdGF0aWMgY3ViaWNIZXJtaXRlKG91dCwgYSwgYiwgYywgZCwgZiwgZW5naW5lID0gV0wpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IGVuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXQuc3ViYXJyYXkoMCkuc2V0KGEpO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXQuc3ViYXJyYXkoNCkuc2V0KGIpO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXQuc3ViYXJyYXkoOCkuc2V0KGMpO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXQuc3ViYXJyYXkoMTIpLnNldChkKTtcbiAgICAgICAgY29uc3QgaXNRdWF0ID0gYS5sZW5ndGggPT0gNDtcbiAgICAgICAgd2FzbS5fd2xfbWF0aF9jdWJpY0hlcm1pdGUod2FzbS5fdGVtcE1lbSArIDQgKiAxNiwgd2FzbS5fdGVtcE1lbSArIDQgKiAwLCB3YXNtLl90ZW1wTWVtICsgNCAqIDQsIHdhc20uX3RlbXBNZW0gKyA0ICogOCwgd2FzbS5fdGVtcE1lbSArIDQgKiAxMiwgZiwgaXNRdWF0KTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzE2XTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzE3XTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzE4XTtcbiAgICAgICAgaWYgKGlzUXVhdClcbiAgICAgICAgICAgIG91dFszXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxOV07XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxufVxuZXhwb3J0IHsgbWF0aCB9O1xuLyoqXG4gKiBDbGFzcyBmb3IgYWNjZXNzaW5nIGludGVybmF0aW9uYWxpemF0aW9uIChpMThuKSBmZWF0dXJlcy5cbiAqXG4gKiBBbGxvd3Mge0BsaW5rIEkxOE4ub25MYW5ndWFnZUNoYW5nZWQgXCJkZXRlY3RpbmcgbGFuZ3VhZ2UgY2hhbmdlXCJ9LFxuICoge0BsaW5rIEkxOE4ubGFuZ3VhZ2UgXCJzZXR0aW5nIHRoZSBjdXJyZW50IGxhbmd1YWdlXCJ9IG9yIHRyYW5zbGF0aW5nXG4gKiB7QGxpbmsgSTE4Ti50cmFuc2xhdGUgXCJpbmRpdmlkdWFsIHRlcm1zXCJ9LlxuICpcbiAqIEludGVybmF0aW9uYWxpemF0aW9uIHdvcmtzIHdpdGggdGVybXMsXG4gKiBhIHN0cmluZyB0eXBlIGtleXdvcmQgdGhhdCBpcyBsaW5rZWQgdG8gYSBkaWZmZXJlbnQgdGV4dCBmb3IgZWFjaCBsYW5ndWFnZS5cbiAqXG4gKiBJbnRlcm5hbGx5LCBzdHJpbmcgcGFyYW1ldGVycyBmb3IgdGV4dCBhbmQganMgY29tcG9uZW50cyBhcmVcbiAqIGF1dG9tYXRpY2FsbHkgc3dhcHBlZCBkdXJpbmcgbGFuZ3VhZ2UgY2hhbmdlLCBnaXZlbiB0aGV5IGFyZSBsaW5rZWQgdG8gYSB0ZXJtLlxuICogSWYgbWFudWFsIHRleHQgc3dhcHBpbmcgaXMgZGVzaXJlZCwge0BsaW5rIEkxOE4udHJhbnNsYXRlfVxuICogY2FuIGJlIHVzZWQgdG8gcmV0cmlldmUgdGhlIGN1cnJlbnQgdHJhbnNsYXRpb24gZm9yIGFueSB0ZXJtLlxuICpcbiAqIFlvdSBjYW4gYWxzbyB1c2UgdGhlIHtAbGluayBJMThOLm9uTGFuZ3VhZ2VDaGFuZ2VkfSB0byBtYW51YWxseSB1cGRhdGUgdGV4dFxuICogd2hlbiBhIGxhbmd1YWdlIGlzIGNoYW5nZWQgdG8gZm9yIGV4YW1wbGUgdXBkYXRlIGEgbnVtYmVyIGluIGEgc3RyaW5nLlxuICpcbiAqIEBzaW5jZSAxLjAuMFxuICovXG5leHBvcnQgY2xhc3MgSTE4TiB7XG4gICAgLyoqXG4gICAgICoge0BsaW5rIEVtaXR0ZXJ9IGZvciBsYW5ndWFnZSBjaGFuZ2UgZXZlbnRzLlxuICAgICAqXG4gICAgICogRmlyc3QgcGFyYW1ldGVyIHRvIGEgbGlzdGVuZXIgaXMgdGhlIG9sZCBsYW5ndWFnZSBpbmRleCxcbiAgICAgKiBzZWNvbmQgcGFyYW1ldGVyIGlzIHRoZSBuZXcgbGFuZ3VhZ2UgaW5kZXguXG4gICAgICpcbiAgICAgKiBVc2FnZSBmcm9tIGEgd2l0aGluIGEgY29tcG9uZW50OlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiB0aGlzLmVuZ2luZS5pMThuLm9uTGFuZ3VhZ2VDaGFuZ2VkLmFkZCgob2xkTGFuZ3VhZ2VJbmRleCwgbmV3TGFuZ3VhZ2VJbmRleCkgPT4ge1xuICAgICAqICAgICBjb25zdCBvbGRMYW5ndWFnZSA9IHRoaXMuZW5naW5lLmkxOG4ubGFuZ3VhZ2VOYW1lKG9sZExhbmd1YWdlSW5kZXgpO1xuICAgICAqICAgICBjb25zdCBuZXdMYW5ndWFnZSA9IHRoaXMuZW5naW5lLmkxOG4ubGFuZ3VhZ2VOYW1lKG5ld0xhbmd1YWdlSW5kZXgpO1xuICAgICAqICAgICBjb25zb2xlLmxvZyhcIlN3aXRjaGVkIGZyb21cIiwgb2xkTGFuZ3VhZ2UsIFwidG9cIiwgbmV3TGFuZ3VhZ2UpO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIG9uTGFuZ3VhZ2VDaGFuZ2VkID0gbmV3IEVtaXR0ZXIoKTtcbiAgICAvKiogV29uZGVybGFuZCBFbmdpbmUgaW5zdGFuY2UuIEBoaWRkZW4gKi9cbiAgICBfZW5naW5lO1xuICAgIC8qKiBQcmV2aW91c2x5IHNldCBsYW5ndWFnZSBpbmRleC4gQGhpZGRlbiAqL1xuICAgIF9wcmV2TGFuZ3VhZ2VJbmRleCA9IC0xO1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZW5naW5lKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZSA9IGVuZ2luZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGN1cnJlbnQgbGFuZ3VhZ2UgYW5kIGFwcGx5IHRyYW5zbGF0aW9ucyB0byBsaW5rZWQgdGV4dCBwYXJhbWV0ZXJzLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBpcyBlcXVpdmFsZW50IHRvIHtAbGluayBJMThOLnNldExhbmd1YWdlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2RlIExhbmd1YWdlIGNvZGUgdG8gc3dpdGNoIHRvXG4gICAgICovXG4gICAgc2V0IGxhbmd1YWdlKGNvZGUpIHtcbiAgICAgICAgdGhpcy5zZXRMYW5ndWFnZShjb2RlKTtcbiAgICB9XG4gICAgLyoqIEdldCBjdXJyZW50IGxhbmd1YWdlIGNvZGUuICovXG4gICAgZ2V0IGxhbmd1YWdlKCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGNvZGUgPSB3YXNtLl93bF9pMThuX2N1cnJlbnRMYW5ndWFnZSgpO1xuICAgICAgICBpZiAoY29kZSA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gd2FzbS5VVEY4VG9TdHJpbmcoY29kZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY3VycmVudCBsYW5ndWFnZSBpbmRleC5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIG1vcmUgZWZmaWNpZW50IHRoYW4gaXRzIGVxdWl2YWxlbnQ6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IGluZGV4ID0gaTE4bi5sYW5ndWFnZUluZGV4KGkxOG4ubGFuZ3VhZ2UpO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGdldCBjdXJyZW50SW5kZXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmdpbmUud2FzbS5fd2xfaTE4bl9jdXJyZW50TGFuZ3VhZ2VJbmRleCgpO1xuICAgIH1cbiAgICAvKiogUHJldmlvdXMgbGFuZ3VhZ2UgaW5kZXguICovXG4gICAgZ2V0IHByZXZpb3VzSW5kZXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wcmV2TGFuZ3VhZ2VJbmRleDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGN1cnJlbnQgbGFuZ3VhZ2UgYW5kIGFwcGx5IHRyYW5zbGF0aW9ucyB0byBsaW5rZWQgdGV4dCBwYXJhbWV0ZXJzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvZGUgVGhlIGxhbmd1YWdlIGNvZGUuXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgY3VycmVudCBpbmRleCBjb2RlIHdoZW4gdGhlXG4gICAgICogICAgIGxhbmd1YWdlIGlzIGxvYWRlZC5cbiAgICAgKi9cbiAgICBhc3luYyBzZXRMYW5ndWFnZShjb2RlKSB7XG4gICAgICAgIGlmIChjb2RlID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuY3VycmVudEluZGV4KTtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICB0aGlzLl9wcmV2TGFuZ3VhZ2VJbmRleCA9IHRoaXMuY3VycmVudEluZGV4O1xuICAgICAgICB3YXNtLl93bF9pMThuX3NldExhbmd1YWdlKHdhc20udGVtcFVURjgoY29kZSkpO1xuICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuZW5naW5lLnNjZW5lO1xuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IHdhc20uVVRGOFRvU3RyaW5nKHdhc20uX3dsX2kxOG5fbGFuZ3VhZ2VGaWxlKHRoaXMuY3VycmVudEluZGV4KSk7XG4gICAgICAgIGNvbnN0IHVybCA9IGAke3NjZW5lLmJhc2VVUkx9L2xvY2FsZS8ke2ZpbGVuYW1lfWA7XG4gICAgICAgIGF3YWl0IHNjZW5lLl9kb3dubG9hZERlcGVuZGVuY3kodXJsKTtcbiAgICAgICAgdGhpcy5vbkxhbmd1YWdlQ2hhbmdlZC5ub3RpZnkodGhpcy5fcHJldkxhbmd1YWdlSW5kZXgsIHRoaXMuY3VycmVudEluZGV4KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudEluZGV4O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdHJhbnNsYXRlZCBzdHJpbmcgZm9yIGEgdGVybSBmb3IgdGhlIGN1cnJlbnRseSBsb2FkZWQgbGFuZ3VhZ2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGVybSBUZXJtIHRvIHRyYW5zbGF0ZVxuICAgICAqL1xuICAgIHRyYW5zbGF0ZSh0ZXJtKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgdHJhbnNsYXRpb24gPSB3YXNtLl93bF9pMThuX3RyYW5zbGF0ZSh3YXNtLnRlbXBVVEY4KHRlcm0pKTtcbiAgICAgICAgaWYgKHRyYW5zbGF0aW9uID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB3YXNtLlVURjhUb1N0cmluZyh0cmFuc2xhdGlvbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbnVtYmVyIG9mIGxhbmd1YWdlcyBpbiB0aGUgcHJvamVjdC5cbiAgICAgKlxuICAgICAqL1xuICAgIGxhbmd1YWdlQ291bnQoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgcmV0dXJuIHdhc20uX3dsX2kxOG5fbGFuZ3VhZ2VDb3VudCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgYSBsYW5ndWFnZSBjb2RlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGluZGV4IEluZGV4IG9mIHRoZSBsYW5ndWFnZSB0byBnZXQgdGhlIGNvZGUgZnJvbVxuICAgICAqL1xuICAgIGxhbmd1YWdlSW5kZXgoY29kZSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiB3YXNtLl93bF9pMThuX2xhbmd1YWdlSW5kZXgod2FzbS50ZW1wVVRGOChjb2RlKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBhIGxhbmd1YWdlIGNvZGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW5kZXggSW5kZXggb2YgdGhlIGxhbmd1YWdlIHRvIGdldCB0aGUgY29kZSBmcm9tXG4gICAgICovXG4gICAgbGFuZ3VhZ2VDb2RlKGluZGV4KSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgY29kZSA9IHdhc20uX3dsX2kxOG5fbGFuZ3VhZ2VDb2RlKGluZGV4KTtcbiAgICAgICAgaWYgKGNvZGUgPT09IDApXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHdhc20uVVRGOFRvU3RyaW5nKGNvZGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgYSBsYW5ndWFnZSBuYW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIGluZGV4IEluZGV4IG9mIHRoZSBsYW5ndWFnZSB0byBnZXQgdGhlIG5hbWUgZnJvbVxuICAgICAqL1xuICAgIGxhbmd1YWdlTmFtZShpbmRleCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IG5hbWUgPSB3YXNtLl93bF9pMThuX2xhbmd1YWdlTmFtZShpbmRleCk7XG4gICAgICAgIGlmIChuYW1lID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB3YXNtLlVURjhUb1N0cmluZyhuYW1lKTtcbiAgICB9XG4gICAgLyoqIEhvc3RpbmcgZW5naW5lIGluc3RhbmNlLiAqL1xuICAgIGdldCBlbmdpbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmdpbmU7XG4gICAgfVxufVxuLyoqIFByb3BlcnRpZXMgb2YgYSBXZWJYUiBzZXNzaW9uICovXG5leHBvcnQgY2xhc3MgWFIge1xuICAgIC8qKiBXb25kZXJsYW5kIFdBU00gYnJpZGdlLiBAaGlkZGVuICovXG4gICAgI3dhc207XG4gICAgI21vZGU7XG4gICAgY29uc3RydWN0b3Iod2FzbSwgbW9kZSkge1xuICAgICAgICB0aGlzLiN3YXNtID0gd2FzbTtcbiAgICAgICAgdGhpcy4jbW9kZSA9IG1vZGU7XG4gICAgfVxuICAgIC8qKiBDdXJyZW50IFdlYlhSIHNlc3Npb24gbW9kZSAqL1xuICAgIGdldCBzZXNzaW9uTW9kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI21vZGU7XG4gICAgfVxuICAgIC8qKiBDdXJyZW50IFdlYlhSIHNlc3Npb24gKi9cbiAgICBnZXQgc2Vzc2lvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3dhc20ud2VieHJfc2Vzc2lvbjtcbiAgICB9XG4gICAgLyoqIEN1cnJlbnQgV2ViWFIgZnJhbWUgKi9cbiAgICBnZXQgZnJhbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN3YXNtLndlYnhyX2ZyYW1lO1xuICAgIH1cbiAgICByZWZlcmVuY2VTcGFjZUZvclR5cGUodHlwZSkge1xuICAgICAgICByZXR1cm4gdGhpcy4jd2FzbS53ZWJ4cl9yZWZTcGFjZXNbdHlwZV0gPz8gbnVsbDtcbiAgICB9XG4gICAgLyoqIFNldCBjdXJyZW50IHJlZmVyZW5jZSBzcGFjZSB0eXBlIHVzZWQgZm9yIHJldHJpZXZpbmcgZXllLCBoZWFkLCBoYW5kIGFuZCBqb2ludCBwb3NlcyAqL1xuICAgIHNldCBjdXJyZW50UmVmZXJlbmNlU3BhY2UocmVmU3BhY2UpIHtcbiAgICAgICAgdGhpcy4jd2FzbS53ZWJ4cl9yZWZTcGFjZSA9IHJlZlNwYWNlO1xuICAgICAgICB0aGlzLiN3YXNtLndlYnhyX3JlZlNwYWNlVHlwZSA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgdHlwZSBvZiBPYmplY3Qua2V5cyh0aGlzLiN3YXNtLndlYnhyX3JlZlNwYWNlcykpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiN3YXNtLndlYnhyX3JlZlNwYWNlc1t0eXBlXSA9PT0gcmVmU3BhY2UpIHtcbiAgICAgICAgICAgICAgICAvKiBLZWVwIHRyYWNrIG9mIHJlZmVyZW5jZSBzcGFjZSB0eXBlICovXG4gICAgICAgICAgICAgICAgdGhpcy4jd2FzbS53ZWJ4cl9yZWZTcGFjZVR5cGUgPSB0eXBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBDdXJyZW50IHJlZmVyZW5jZSBzcGFjZSB0eXBlIHVzZWQgZm9yIHJldHJpZXZpbmcgZXllLCBoZWFkLCBoYW5kIGFuZCBqb2ludCBwb3NlcyAqL1xuICAgIGdldCBjdXJyZW50UmVmZXJlbmNlU3BhY2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN3YXNtLndlYnhyX3JlZlNwYWNlO1xuICAgIH1cbiAgICAvKiogQ3VycmVudCBXZWJYUiByZWZlcmVuY2Ugc3BhY2UgdHlwZSBvciBgbnVsbGAgaWYgbm90IGEgZGVmYXVsdCByZWZlcmVuY2Ugc3BhY2UgKi9cbiAgICBnZXQgY3VycmVudFJlZmVyZW5jZVNwYWNlVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3dhc20ud2VieHJfcmVmU3BhY2VUeXBlO1xuICAgIH1cbiAgICAvKiogQ3VycmVudCBXZWJYUiBiYXNlIGxheWVyICAqL1xuICAgIGdldCBiYXNlTGF5ZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN3YXNtLndlYnhyX2Jhc2VMYXllcjtcbiAgICB9XG4gICAgLyoqIEN1cnJlbnQgV2ViWFIgZnJhbWVidWZmZXIgKi9cbiAgICBnZXQgZnJhbWVidWZmZXJzKCkge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy4jd2FzbS53ZWJ4cl9mYm8pKSB7XG4gICAgICAgICAgICByZXR1cm4gW3RoaXMuI3dhc20uR0wuZnJhbWVidWZmZXJzW3RoaXMuI3dhc20ud2VieHJfZmJvXV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuI3dhc20ud2VieHJfZmJvLm1hcCgoaWQpID0+IHRoaXMuI3dhc20uR0wuZnJhbWVidWZmZXJzW2lkXSk7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IGNhcGl0YWxpemVGaXJzdFVURjgsIGNyZWF0ZURlc3Ryb3llZFByb3h5IH0gZnJvbSAnLi4vdXRpbHMvbWlzYy5qcyc7XG5pbXBvcnQgeyBSZXNvdXJjZSwgUmVzb3VyY2VNYW5hZ2VyIH0gZnJvbSAnLi9yZXNvdXJjZS5qcyc7XG4vKipcbiAqIE1hdGVyaWFsIHBhcmFtZXRlciB0eXBlLlxuICovXG5leHBvcnQgdmFyIE1hdGVyaWFsUGFyYW1UeXBlO1xuKGZ1bmN0aW9uIChNYXRlcmlhbFBhcmFtVHlwZSkge1xuICAgIC8qKiBVbnNpZ25lZCBpbnRlZ2VyIHBhcmFtZXRlciB0eXBlLiAqL1xuICAgIE1hdGVyaWFsUGFyYW1UeXBlW01hdGVyaWFsUGFyYW1UeXBlW1wiVW5zaWduZWRJbnRcIl0gPSAwXSA9IFwiVW5zaWduZWRJbnRcIjtcbiAgICAvKiogSW50ZWdlciBwYXJhbWV0ZXIgdHlwZS4gKi9cbiAgICBNYXRlcmlhbFBhcmFtVHlwZVtNYXRlcmlhbFBhcmFtVHlwZVtcIkludFwiXSA9IDFdID0gXCJJbnRcIjtcbiAgICAvKiogMTYtYml0IGZsb2F0IHBhcmFtZXRlciB0eXBlLiAqL1xuICAgIE1hdGVyaWFsUGFyYW1UeXBlW01hdGVyaWFsUGFyYW1UeXBlW1wiSGFsZkZsb2F0XCJdID0gMl0gPSBcIkhhbGZGbG9hdFwiO1xuICAgIC8qKiBGbG9hdCBwYXJhbWV0ZXIgdHlwZS4gKi9cbiAgICBNYXRlcmlhbFBhcmFtVHlwZVtNYXRlcmlhbFBhcmFtVHlwZVtcIkZsb2F0XCJdID0gM10gPSBcIkZsb2F0XCI7XG4gICAgLyoqIFNhbXBsZXIgcmVzb3VyY2UgcGFyYW1ldGVyIHR5cGUsIGkuZS4sIGEge0BsaW5rIFRleHR1cmV9LiAqL1xuICAgIE1hdGVyaWFsUGFyYW1UeXBlW01hdGVyaWFsUGFyYW1UeXBlW1wiU2FtcGxlclwiXSA9IDRdID0gXCJTYW1wbGVyXCI7XG4gICAgLyoqXG4gICAgICogRm9udCByZXNvdXJjZSBwYXJhbWV0ZXIgdHlwZS5cbiAgICAgKlxuICAgICAqICoqTm90ZSoqOiBDaGFuZ2luZyBmb250IGlzbid0IGV4cG9zZWQgeWV0IGFuZCB3aWxsIHJhaXNlIGFuIGVycm9yLlxuICAgICAqL1xuICAgIE1hdGVyaWFsUGFyYW1UeXBlW01hdGVyaWFsUGFyYW1UeXBlW1wiRm9udFwiXSA9IDVdID0gXCJGb250XCI7XG59KShNYXRlcmlhbFBhcmFtVHlwZSB8fCAoTWF0ZXJpYWxQYXJhbVR5cGUgPSB7fSkpO1xuLyoqXG4gKiBXcmFwcGVyIGFyb3VuZCBhIG5hdGl2ZSBtYXRlcmlhbC5cbiAqXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBob3cgdG8gY3JlYXRlIG1hdGVyaWFscywgaGF2ZSBhIGxvb2sgYXQgdGhlXG4gKiB7QGxpbmsgTWF0ZXJpYWxNYW5hZ2VyfSBjbGFzcy5cbiAqXG4gKiAjIyMjIFByb3BlcnRpZXNcbiAqXG4gKiBUaGUgbWF0ZXJpYWwgcHJvcGVydGllcyBhcmUgYXV0b21hdGljYWxseSBjb252ZXJ0ZWQgaW50byBnZXR0ZXJzL3NldHRlcnM6XG4gKlxuICogYGBganNcbiAqIGNvbnN0IG1hdGVyaWFsID0gbmV3IFBob25nTWF0ZXJpYWwoKTtcbiAqXG4gKiAvLyBTZXQgdGhlIGBkaWZmdXNlQ29sb3JgIHByb3BlcnR5XG4gKiBtYXRlcmlhbC5zZXREaWZmdXNlQ29sb3IoWzEuMCwgMC4wLCAwLjAsIDEuMF0pO1xuICogY29uc29sZS5sb2cobWF0ZXJpYWwuZ2V0RGlmZnVzZUNvbG9yKCkpO1xuICogYGBgXG4gKlxuICogR2V0dGVycyBmb3Igbm9uLXNjYWxhciB0eXBlcyBoYXZlIGFuIG9wdGlvbmFsIGFyZ3VtZW50IHRvIHNraXAgYW4gYXJyYXlcbiAqIGFsbG9jYXRpb246XG4gKlxuICogYGBganNcbiAqIGNvbnN0IG1hdGVyaWFsID0gbmV3IFBob25nTWF0ZXJpYWwoKTtcbiAqIGNvbnN0IGRpZmZ1c2UgPSBbMCwgMCwgMCwgMF07XG4gKiBtYXRlcmlhbC5nZXREaWZmdXNlQ29sb3IoZGlmZnVzZSk7XG4gKiBjb25zb2xlLmxvZyhkaWZmdXNlKSAvLyBQcmludHMgJ1sxLjAsIDEuMCwgMS4wLCAxLjBdJ1xuICogYGBgXG4gKlxuICogQG5vdGUgTWF0ZXJpYWxzIGFyZSAqKnBlci1lbmdpbmUqKiwgdGhleSBjYW4gdGh1cyBiZSBzaGFyZWQgYnkgbXVsdGlwbGUgc2NlbmVzLlxuICpcbiAqIEBzaW5jZSAxLjIuMFxuICovXG5leHBvcnQgY2xhc3MgTWF0ZXJpYWwgZXh0ZW5kcyBSZXNvdXJjZSB7XG4gICAgLyoqIFByb3h5IHVzZWQgdG8gb3ZlcnJpZGUgcHJvdG90eXBlcyBvZiBkZXN0cm95ZWQgbWF0ZXJpYWxzLiAqL1xuICAgIHN0YXRpYyBfZGVzdHJveWVkUHJvdG90eXBlID0gY3JlYXRlRGVzdHJveWVkUHJveHkoJ21hdGVyaWFsJyk7XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayBNYXRlcmlhbE1hbmFnZXIjZ2V0VGVtcGxhdGV9IHZpYSB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5tYXRlcmlhbHN9XG4gICAgICogdG8gY3JlYXRlIGEgbmV3IG1hdGVyaWFsIHdpdGggYSBnaXZlbiBwaXBlbGluZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgUGhvbmdNYXRlcmlhbCA9IGVuZ2luZS5tYXRlcmlhbHMuZ2V0VGVtcGxhdGUoJ1Bob25nIE9wYXF1ZScpO1xuICAgICAqIGNvbnN0IG1hdGVyaWFsID0gbmV3IFBob25nTWF0ZXJpYWwoKTtcbiAgICAgKiBtYXRlcmlhbC5zZXREaWZmdXNlQ29sb3IoWzEsIDAsIDBdKTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbmdpbmUsIHBhcmFtcykge1xuICAgICAgICBpZiAodHlwZW9mIHBhcmFtcyAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIGlmICghcGFyYW1zPy5waXBlbGluZSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHBhcmFtZXRlciAncGlwZWxpbmUnXCIpO1xuICAgICAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBlbmdpbmUubWF0ZXJpYWxzLmdldFRlbXBsYXRlKHBhcmFtcy5waXBlbGluZSk7XG4gICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IG5ldyB0ZW1wbGF0ZSgpO1xuICAgICAgICAgICAgc3VwZXIoZW5naW5lLCBtYXRlcmlhbC5faW5kZXgpO1xuICAgICAgICAgICAgcmV0dXJuIG1hdGVyaWFsO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGVuZ2luZSwgcGFyYW1zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2sgd2hldGhlciBhIHBhcmFtZXRlciBleGlzdHMgb24gdGhpcyBtYXRlcmlhbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgcGFyYW1ldGVyIHdpdGggbmFtZSBgbmFtZWAgZXhpc3RzIG9uIHRoaXMgbWF0ZXJpYWwsXG4gICAgICogICAgIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIGhhc1BhcmFtZXRlcihuYW1lKSB7XG4gICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSB0aGlzLmNvbnN0cnVjdG9yLlBhcmFtZXRlcnM7XG4gICAgICAgIHJldHVybiBwYXJhbWV0ZXJzICYmIHBhcmFtZXRlcnMuaGFzKG5hbWUpO1xuICAgIH1cbiAgICAvKiogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayBwaXBlbGluZX0gaW5zdGVhZC4gKi9cbiAgICBnZXQgc2hhZGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5waXBlbGluZTtcbiAgICB9XG4gICAgLyoqIE5hbWUgb2YgdGhlIHBpcGVsaW5lIHVzZWQgYnkgdGhpcyBtYXRlcmlhbC4gKi9cbiAgICBnZXQgcGlwZWxpbmUoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gd2FzbS5VVEY4VG9TdHJpbmcod2FzbS5fd2xfbWF0ZXJpYWxfZ2V0X3BpcGVsaW5lKHRoaXMuX2lkKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGNvcHkgb2YgdGhlIHVuZGVybHlpbmcgbmF0aXZlIG1hdGVyaWFsLlxuICAgICAqXG4gICAgICogQHJldHVybnMgTWF0ZXJpYWwgY2xvbmUuXG4gICAgICovXG4gICAgY2xvbmUoKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5lbmdpbmUud2FzbS5fd2xfbWF0ZXJpYWxfY2xvbmUodGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUubWF0ZXJpYWxzLndyYXAoaW5kZXgpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAnTWF0ZXJpYWwoZGVzdHJveWVkKSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGBNYXRlcmlhbCgnJHt0aGlzLnBpcGVsaW5lfScsICR7dGhpcy5faW5kZXh9KWA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdyYXAgYSBuYXRpdmUgbWF0ZXJpYWwgaW5kZXguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZW5naW5lIEVuZ2luZSBpbnN0YW5jZS5cbiAgICAgKiBAcGFyYW0gaW5kZXggVGhlIGluZGV4LlxuICAgICAqIEByZXR1cm5zIE1hdGVyaWFsIGluc3RhbmNlIG9yIGBudWxsYCBpZiBpbmRleCA8PSAwLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHRoZSB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5tYXRlcmlhbHN9IGluc3RlYWQuXG4gICAgICovXG4gICAgc3RhdGljIHdyYXAoZW5naW5lLCBpbmRleCkge1xuICAgICAgICByZXR1cm4gZW5naW5lLm1hdGVyaWFscy53cmFwKGluZGV4KTtcbiAgICB9XG59XG4vKipcbiAqIE1hbmFnZSBtYXRlcmlhbHMuXG4gKlxuICogIyMjIyBDcmVhdGlvblxuICpcbiAqIFRvIGNyZWF0ZSBhIG1hdGVyaWFsLCBmaXJzdCByZXRyaWV2ZSB0aGUgY2xhc3MgYXNzb2NpYXRlZCB0b1xuICogdGhlIHBpcGVsaW5lIHVzaW5nIHtAbGluayBNYXRlcmlhbE1hbmFnZXIuZ2V0VGVtcGxhdGV9OlxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBQaG9uZ01hdGVyaWFsID0gZW5naW5lLm1hdGVyaWFscy5nZXRUZW1wbGF0ZSgnUGhvbmcgT3BhcXVlJyk7XG4gKiBgYGBcbiAqXG4gKiBDcmVhdGluZyBhIG1hdGVyaWFsIGlzIHRoZW4gZG9uZSB1c2luZyB0aGUgY29uc3RydWN0b3I6XG4gKlxuICogYGBganNcbiAqIGNvbnN0IG1hdGVyaWFsID0gbmV3IFBob25nTWF0ZXJpYWwoKTtcbiAqIG1hdGVyaWFsLnNldERpZmZ1c2VDb2xvcihbMS4wLCAwLjAsIDAuMCwgMS4wXSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIE1hdGVyaWFsTWFuYWdlciBleHRlbmRzIFJlc291cmNlTWFuYWdlciB7XG4gICAgLyoqIE1hdGVyaWFsIGNsYXNzZXMuIEBoaWRkZW4uICovXG4gICAgX21hdGVyaWFsVGVtcGxhdGVzID0gW107XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBjb25zdHJ1Y3RvcihlbmdpbmUpIHtcbiAgICAgICAgc3VwZXIoZW5naW5lLCBNYXRlcmlhbCk7XG4gICAgICAgIHRoaXMuX2NhY2hlRGVmaW5pdGlvbnMoKTtcbiAgICB9XG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIHdyYXAoaW5kZXgpIHtcbiAgICAgICAgaWYgKGluZGV4IDw9IDApXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgY2FjaGVkID0gdGhpcy5fY2FjaGVbaW5kZXhdO1xuICAgICAgICBpZiAoY2FjaGVkKVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZDtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGRlZmluaXRpb24gPSB3YXNtLl93bF9tYXRlcmlhbF9nZXRfZGVmaW5pdGlvbihpbmRleCk7XG4gICAgICAgIGNvbnN0IFRlbXBsYXRlID0gdGhpcy5fbWF0ZXJpYWxUZW1wbGF0ZXNbZGVmaW5pdGlvbl07XG4gICAgICAgIGNvbnN0IG1hdGVyaWFsID0gbmV3IFRlbXBsYXRlKGluZGV4KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dyYXBJbnN0YW5jZShtYXRlcmlhbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWF0ZXJpYWwgY2xhc3Mgd2l0aCB0aGUgZ2l2ZW4gcGlwZWxpbmUgbmFtZS5cbiAgICAgKlxuICAgICAqICMjIyMgVXNhZ2VcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgUGhvbmdNYXRlcmlhbCA9IGVuZ2luZS5tYXRlcmlhbHMuZ2V0VGVtcGxhdGUoJ1Bob25nIE9wYXF1ZScpO1xuICAgICAqIGNvbnN0IG1hdGVyaWFsID0gbmV3IFBob25nTWF0ZXJpYWwoKTtcbiAgICAgKiBtYXRlcmlhbC5zZXREaWZmdXNlQ29sb3IoWzEuMCwgMC4wLCAwLjAsIDEuMF0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHBpcGVsaW5lIFRoZSBwaXBlbGluZSBuYW1lIHRvIHNlYXJjaCBmb3IuXG4gICAgICogQHJldHVybnMgVGhlIG1hdGVyaWFsIGNsYXNzLlxuICAgICAqXG4gICAgICogQHRocm93cyBgRXJyb3JgIGlmIHRoZSBtYXRlcmlhbCBjbGFzcyBkb2Vzbid0IGV4aXN0LlxuICAgICAqL1xuICAgIGdldFRlbXBsYXRlKHBpcGVsaW5lKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBpbmRleCA9IHdhc20uX3dsX2dldF9tYXRlcmlhbF9kZWZpbml0aW9uX2luZGV4KHdhc20udGVtcFVURjgocGlwZWxpbmUpKTtcbiAgICAgICAgaWYgKCFpbmRleCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBQaXBlbGluZSAnJHtwaXBlbGluZX0nIGRvZXNuJ3QgZXhpc3QgaW4gdGhlIHNjZW5lYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX21hdGVyaWFsVGVtcGxhdGVzW2luZGV4XTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JhcCBhIG1hdGVyaWFsIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHRvZG86IFJlbW92ZSBhdCAyLjAuMC5cbiAgICAgKlxuICAgICAqIEBub3RlIFdyYXBwaW5nIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBvbmNlIHBlciBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbnN0YW5jZSBUaGUgbWF0ZXJpYWwgaW5zdGFuY2UuXG4gICAgICogQHJldHVybnMgVGhlIG5ldyBtYXRlcmlhbCwgd3JhcHBlZCBpbiBhIHByb3h5LlxuICAgICAqL1xuICAgIF93cmFwSW5zdGFuY2UoaW5zdGFuY2UpIHtcbiAgICAgICAgdGhpcy5fY2FjaGVbaW5zdGFuY2UuaW5kZXhdID0gaW5zdGFuY2U7XG4gICAgICAgIGlmICghdGhpcy5lbmdpbmUubGVnYWN5TWF0ZXJpYWxTdXBwb3J0KVxuICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgICAgICAvKiogQHRvZG86IFJlbW92ZSBhdCAyLjAuMC4gVGhpcyBpcyBrZXB0IGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LiAqL1xuICAgICAgICBjb25zdCBwcm94eSA9IG5ldyBQcm94eShpbnN0YW5jZSwge1xuICAgICAgICAgICAgZ2V0KHRhcmdldCwgcHJvcCkge1xuICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0Lmhhc1BhcmFtZXRlcihwcm9wKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0W3Byb3BdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvKiogVGhpcyBpcyBzbG93LCBidXQgdXNlcnMgc2hvdWxkIG1pZ3JhdGUgdG8gYGdldFBhcmFtYCAqL1xuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgZ2V0JHtjYXBpdGFsaXplRmlyc3RVVEY4KHByb3ApfWA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtuYW1lXSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldCh0YXJnZXQsIHByb3AsIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0YXJnZXQuaGFzUGFyYW1ldGVyKHByb3ApKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFtwcm9wXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLyoqIFRoaXMgaXMgc2xvdywgYnV0IHVzZXJzIHNob3VsZCBtaWdyYXRlIHRvIGBnZXRQYXJhbWAgKi9cbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gYHNldCR7Y2FwaXRhbGl6ZUZpcnN0VVRGOChwcm9wKX1gO1xuICAgICAgICAgICAgICAgIHRhcmdldFtuYW1lXSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fY2FjaGVbaW5zdGFuY2UuaW5kZXhdID0gcHJveHk7XG4gICAgICAgIHJldHVybiBwcm94eTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FjaGUgYWxsIHBpcGVsaW5lIGRlZmluaXRpb25zLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9jYWNoZURlZmluaXRpb25zKCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgY291bnQgPSB3YXNtLl93bF9nZXRfbWF0ZXJpYWxfZGVmaW5pdGlvbl9jb3VudCgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcbiAgICAgICAgICAgIHRoaXMuX21hdGVyaWFsVGVtcGxhdGVzW2ldID0gdGhpcy5fY3JlYXRlTWF0ZXJpYWxUZW1wbGF0ZShpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBtYXRlcmlhbCBjbGFzcyBmcm9tIGEgZGVmaW5pdGlvbiBpbmRleC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB3YXNtIFRoZSBXQVNNIGluc3RhbmNlLlxuICAgICAqIEBwYXJhbSBkZWZpbml0aW9uSW5kZXggVGhlIGRlZmluaXRpb24gaW5kZXggdG8gd3JhcC5cbiAgICAgKiBAcmV0dXJucyBUaGUgbWF0ZXJpYWwgY2xhc3MuXG4gICAgICovXG4gICAgX2NyZWF0ZU1hdGVyaWFsVGVtcGxhdGUoZGVmaW5pdGlvbkluZGV4KSB7XG4gICAgICAgIGNvbnN0IGVuZ2luZSA9IHRoaXMuZW5naW5lO1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IGNsYXNzIEN1c3RvbU1hdGVyaWFsIGV4dGVuZHMgTWF0ZXJpYWwge1xuICAgICAgICAgICAgc3RhdGljIFBhcmFtZXRlcnMgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcihpbmRleCkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gaW5kZXggPz8gZW5naW5lLndhc20uX3dsX21hdGVyaWFsX2NyZWF0ZShkZWZpbml0aW9uSW5kZXgpO1xuICAgICAgICAgICAgICAgIHN1cGVyKGVuZ2luZSwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIC8qKiBAdG9kbygyLjAuMCk6IFVuaWZ5IHdpdGggTWF0ZXJpYWwuIFdlIG5lZWQgdG8gd3JhcCBpbiBib3RoIHNpbmNlIG1hdGVyaWFsc1xuICAgICAgICAgICAgICAgICAqIGNhbiBiZSBjcmVhdGVkIHZpYSB0aGUgcGFyZW50IGNsYXNzLCBvciB2aWEgY2hpbGQgY2xhc3Nlcy5cbiAgICAgICAgICAgICAgICAgKiBJbiBhZGRpdGlvbiwgd3JhcHBpbmcgcmV0dXJucyBhIHByb3h5LCB3ZSB3YW50IHRvIHN1cHBvcnQgUHJveHk8TWF0ZXJpYWw+XG4gICAgICAgICAgICAgICAgICogYXMgd2VsbCBhcyBQcm94eTxDdXN0b21NYXRlcmlhbD4uICovXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVuZ2luZS5tYXRlcmlhbHMuX3dyYXBJbnN0YW5jZSh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IG5iUGFyYW1zID0gd2FzbS5fd2xfbWF0ZXJpYWxfZGVmaW5pdGlvbl9nZXRfcGFyYW1fY291bnQoZGVmaW5pdGlvbkluZGV4KTtcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IG5iUGFyYW1zOyArK2luZGV4KSB7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gd2FzbS5VVEY4VG9TdHJpbmcod2FzbS5fd2xfbWF0ZXJpYWxfZGVmaW5pdGlvbl9nZXRfcGFyYW1fbmFtZShkZWZpbml0aW9uSW5kZXgsIGluZGV4KSk7XG4gICAgICAgICAgICB0ZW1wbGF0ZS5QYXJhbWV0ZXJzLmFkZChuYW1lKTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB3YXNtLl93bF9tYXRlcmlhbF9kZWZpbml0aW9uX2dldF9wYXJhbV90eXBlKGRlZmluaXRpb25JbmRleCwgaW5kZXgpO1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHQgJiAweGZmO1xuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50Q291bnQgPSAodCA+PiA4KSAmIDB4ZmY7XG4gICAgICAgICAgICAvKiBtZXRhVHlwZSBjb3VsZCBhbHNvIGJlIGV4dHJhY3RlZCB1c2luZzogKHQgPj4gMTYpICYgMHhmZiAqL1xuICAgICAgICAgICAgY29uc3QgY2FwaXRhbGl6ZWQgPSBjYXBpdGFsaXplRmlyc3RVVEY4KG5hbWUpO1xuICAgICAgICAgICAgY29uc3QgZ2V0dGVySWQgPSBgZ2V0JHtjYXBpdGFsaXplZH1gO1xuICAgICAgICAgICAgY29uc3Qgc2V0dGVySWQgPSBgc2V0JHtjYXBpdGFsaXplZH1gO1xuICAgICAgICAgICAgY29uc3QgdGVtcGxhdGVQcm90byA9IHRlbXBsYXRlLnByb3RvdHlwZTtcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgTWF0ZXJpYWxQYXJhbVR5cGUuVW5zaWduZWRJbnQ6XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJvdG9bZ2V0dGVySWRdID0gdWludDMyR2V0dGVyKGluZGV4LCBjb21wb25lbnRDb3VudCk7XG4gICAgICAgICAgICAgICAgICAgIC8qIEZvciBub3csIGl0J3Mgb25seSBwb3NzaWJsZSB0byBzZXQgc2NhbGFyIHVpbnQgdmFsdWVzICovXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJvdG9bc2V0dGVySWRdID0gdWludDMyU2V0dGVyKGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBNYXRlcmlhbFBhcmFtVHlwZS5JbnQ6XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJvdG9bZ2V0dGVySWRdID0gaW50MzJHZXR0ZXIoaW5kZXgsIGNvbXBvbmVudENvdW50KTtcbiAgICAgICAgICAgICAgICAgICAgLyogRm9yIG5vdywgaXQncyBvbmx5IHBvc3NpYmxlIHRvIHNldCBzY2FsYXIgaW50IHZhbHVlcy4gSW50ZWdlciB2YWx1ZXMgc2V0dGVyXG4gICAgICAgICAgICAgICAgICAgICAqIGlzIHB1cnBvc2VseSBzaGFyZWQgd2l0aCB1aW50LiAqL1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVByb3RvW3NldHRlcklkXSA9IHVpbnQzMlNldHRlcihpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgTWF0ZXJpYWxQYXJhbVR5cGUuSGFsZkZsb2F0OlxuICAgICAgICAgICAgICAgIGNhc2UgTWF0ZXJpYWxQYXJhbVR5cGUuRmxvYXQ6XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJvdG9bZ2V0dGVySWRdID0gZmxvYXQzMkdldHRlcihpbmRleCwgY29tcG9uZW50Q291bnQpO1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVByb3RvW3NldHRlcklkXSA9IGZsb2F0MzJTZXR0ZXIoaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIE1hdGVyaWFsUGFyYW1UeXBlLlNhbXBsZXI6XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJvdG9bZ2V0dGVySWRdID0gc2FtcGxlckdldHRlcihpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJvdG9bc2V0dGVySWRdID0gc2FtcGxlclNldHRlcihpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgTWF0ZXJpYWxQYXJhbVR5cGUuRm9udDpcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVQcm90b1tnZXR0ZXJJZF0gPSBmb250R2V0dGVyKGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgLyogRm9yIG5vdywgc2V0dGluZyBmb250cyBpcyBub3Qgc3VwcG9ydGVkICovXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgICB9XG59XG4vKiogQHRvZG86IFdpdGggdGhpcyBpbXBsZW1lbnRhdGlvbiwgYF93bF9tYXRlcmlhbF9nZXRfcGFyYW1fdmFsdWVgXG4gKiBkbyBub3QgbmVlZCB0byBjaGVjayBmb3IgdGhlIHBhcmFtZXRlciB0eXBlIGFueW1vcmUsIHdlIGNvdWxkIHVzZVxuICogZXhwbGljaXQgY2FsbHMuICovXG5mdW5jdGlvbiB1aW50MzJHZXR0ZXIoaW5kZXgsIGNvdW50KSB7XG4gICAgaWYgKGNvdW50ID09PSAxKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgICAgIHdhc20uX3dsX21hdGVyaWFsX2dldF9wYXJhbV92YWx1ZSh0aGlzLl9pZCwgaW5kZXgsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICAgICAgcmV0dXJuIHdhc20uX3RlbXBNZW1VaW50MzJbMF07XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAob3V0ID0gbmV3IFVpbnQzMkFycmF5KGNvdW50KSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfbWF0ZXJpYWxfZ2V0X3BhcmFtX3ZhbHVlKHRoaXMuX2lkLCBpbmRleCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3V0Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBvdXRbaV0gPSB3YXNtLl90ZW1wTWVtVWludDMyW2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHVpbnQzMlNldHRlcihpbmRleCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX21hdGVyaWFsX3NldF9wYXJhbV92YWx1ZV91aW50KHRoaXMuX2lkLCBpbmRleCwgdmFsdWUpO1xuICAgIH07XG59XG5mdW5jdGlvbiBpbnQzMkdldHRlcihpbmRleCwgY291bnQpIHtcbiAgICBpZiAoY291bnQgPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICAgICAgd2FzbS5fd2xfbWF0ZXJpYWxfZ2V0X3BhcmFtX3ZhbHVlKHRoaXMuX2lkLCBpbmRleCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgICAgICByZXR1cm4gd2FzbS5fdGVtcE1lbUludFswXTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChvdXQgPSBuZXcgSW50MzJBcnJheShjb3VudCkpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX21hdGVyaWFsX2dldF9wYXJhbV92YWx1ZSh0aGlzLl9pZCwgaW5kZXgsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG91dC5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgb3V0W2ldID0gd2FzbS5fdGVtcE1lbUludFtpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG5mdW5jdGlvbiBmbG9hdDMyR2V0dGVyKGluZGV4LCBjb3VudCkge1xuICAgIGlmIChjb3VudCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgICAgICB3YXNtLl93bF9tYXRlcmlhbF9nZXRfcGFyYW1fdmFsdWUodGhpcy5faWQsIGluZGV4LCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgICAgIHJldHVybiB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAob3V0ID0gbmV3IEZsb2F0MzJBcnJheShjb3VudCkpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX21hdGVyaWFsX2dldF9wYXJhbV92YWx1ZSh0aGlzLl9pZCwgaW5kZXgsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG91dC5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgb3V0W2ldID0gd2FzbS5fdGVtcE1lbUZsb2F0W2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGZsb2F0MzJTZXR0ZXIoaW5kZXgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBsZXQgY291bnQgPSAxO1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzBdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb3VudCA9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7ICsraSlcbiAgICAgICAgICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbaV0gPSB2YWx1ZVtpXTtcbiAgICAgICAgfVxuICAgICAgICB3YXNtLl93bF9tYXRlcmlhbF9zZXRfcGFyYW1fdmFsdWVfZmxvYXQodGhpcy5faWQsIGluZGV4LCB3YXNtLl90ZW1wTWVtLCBjb3VudCk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHNhbXBsZXJHZXR0ZXIoaW5kZXgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfbWF0ZXJpYWxfZ2V0X3BhcmFtX3ZhbHVlKHRoaXMuX2lkLCBpbmRleCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS50ZXh0dXJlcy53cmFwKHdhc20uX3RlbXBNZW1JbnRbMF0pO1xuICAgIH07XG59XG5mdW5jdGlvbiBzYW1wbGVyU2V0dGVyKGluZGV4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfbWF0ZXJpYWxfc2V0X3BhcmFtX3ZhbHVlX3VpbnQodGhpcy5faWQsIGluZGV4LCB2YWx1ZS5faWQpO1xuICAgIH07XG59XG5mdW5jdGlvbiBmb250R2V0dGVyKGluZGV4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX21hdGVyaWFsX2dldF9wYXJhbV92YWx1ZSh0aGlzLl9pZCwgaW5kZXgsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUuZm9udHMud3JhcCh3YXNtLl90ZW1wTWVtSW50WzBdKTtcbiAgICB9O1xufVxuIiwgImltcG9ydCB7IExvZ1RhZyB9IGZyb20gJy4vaW5kZXguanMnO1xuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJy4vdXRpbHMvZXZlbnQuanMnO1xuaW1wb3J0IHsgZmV0Y2hXaXRoUHJvZ3Jlc3MsIGdldEJhc2VVcmwgfSBmcm9tICcuL3V0aWxzL2ZldGNoLmpzJztcbmltcG9ydCB7IGlzU3RyaW5nIH0gZnJvbSAnLi91dGlscy9vYmplY3QuanMnO1xuaW1wb3J0IHsgUmF5SGl0IH0gZnJvbSAnLi93b25kZXJsYW5kLmpzJztcbmltcG9ydCB7IFByZWZhYiB9IGZyb20gJy4vcHJlZmFiLmpzJztcbmltcG9ydCB7IFByZWZhYkdMVEYgfSBmcm9tICcuL3NjZW5lLWdsdGYuanMnO1xuLyoqXG4gKiBDb25zdGFudHNcbiAqL1xuLyoqIE1hZ2ljIG51bWJlciBmb3IgLmJpbiAqL1xuY29uc3QgTUFHSUNfQklOID0gJ1dMRVYnO1xuLyoqXG4gKiBTY2VuZSB0eXBlIHRvIGxvYWQgd2l0aCB7QGxpbmsgQ2h1bmtlZFNjZW5lTG9hZFNpbmt9LlxuICpcbiAqIEBzaW5jZSAxLjIuMVxuICogQGhpZGRlblxuICovXG5leHBvcnQgdmFyIFNjZW5lVHlwZTtcbihmdW5jdGlvbiAoU2NlbmVUeXBlKSB7XG4gICAgU2NlbmVUeXBlW1NjZW5lVHlwZVtcIlByZWZhYlwiXSA9IDBdID0gXCJQcmVmYWJcIjtcbiAgICBTY2VuZVR5cGVbU2NlbmVUeXBlW1wiTWFpblwiXSA9IDFdID0gXCJNYWluXCI7XG4gICAgU2NlbmVUeXBlW1NjZW5lVHlwZVtcIkRlcGVuZGVuY3lcIl0gPSAyXSA9IFwiRGVwZW5kZW5jeVwiO1xufSkoU2NlbmVUeXBlIHx8IChTY2VuZVR5cGUgPSB7fSkpO1xuLyoqXG4gKiBTaW5rIGZvciB7QGxpbmsgV3JpdGFibGVTdHJlYW19IHRoYXQgbG9hZHMgdGhlIGRhdGEgYXMgYSAuYmluIGZpbGUuXG4gKlxuICogRGF0YSBpcyBsb2FkZWQgY2h1bmsgYnkgY2h1bmsgdG8gbWluaW1pemUgdGhlIHRvdGFsIFdBU00gYWxsb2NhdGlvbiBzaXplLlxuICpcbiAqIEBzaW5jZSAxLjIuMVxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgQ2h1bmtlZFNjZW5lTG9hZFNpbmsge1xuICAgICN3YXNtO1xuICAgICN0eXBlO1xuICAgICNjbG9zZVBhcmFtZXRlcnM7XG4gICAgI29mZnNldCA9IDA7XG4gICAgI3JlcXVlc3RlZCA9IDA7XG4gICAgI2ZpcnN0Q2h1bmsgPSB0cnVlO1xuICAgIF9idWZmZXIgPSBuZXcgVWludDhBcnJheSgpO1xuICAgIF9sb2FkSW5kZXggPSAtMTtcbiAgICBzY2VuZUluZGV4ID0gLTE7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0gZW5naW5lIEVuZ2luZSBpbnN0YW5jZVxuICAgICAqIEBwYXJhbSB0eXBlIFR5cGUgb2Ygc2NlbmUgdG8gbG9hZFxuICAgICAqIEBwYXJhbSB1cmwgVVJMIGZvciB0aGUgc2NlbmUgY3JlYXRpb24uIENhbiBiZSBlbXB0eS5cbiAgICAgKiBAcGFyYW0gY2xvc2VQYXJhbWV0ZXJzIFBhcmFtZXRlcnMgZm9yIHRoZSBmaW5hbCBmdW5jdGlvbiB0byBiZSBjYWxsZWRcbiAgICAgKiAgICAgZHVyaW5nIGEgc3VjY2Vzc2Z1bCB7QGxpbmsgQ2h1bmtlZFNjZW5lTG9hZFNpbmsuY2xvc2V9LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGVuZ2luZSwgdHlwZSwgdXJsLCAuLi5jbG9zZVBhcmFtZXRlcnMpIHtcbiAgICAgICAgdGhpcy4jd2FzbSA9IGVuZ2luZS53YXNtO1xuICAgICAgICB0aGlzLiN0eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy4jY2xvc2VQYXJhbWV0ZXJzID0gY2xvc2VQYXJhbWV0ZXJzO1xuICAgICAgICB0aGlzLl9sb2FkSW5kZXggPSB0aGlzLiN3YXNtLl93bF9zY2VuZV9jcmVhdGVfY2h1bmtlZF9zdGFydCh0aGlzLiN3YXNtLnRlbXBVVEY4KHVybCkpO1xuICAgICAgICAvKiBJbml0aWFsIGJ1ZmZlciBmb3IgdGhlIGhlYWRlciBjaHVuayAqL1xuICAgICAgICB0aGlzLiNyZXF1ZXN0ZWQgPSB0aGlzLiN3YXNtLl93bF9zY2VuZV9jcmVhdGVfY2h1bmtlZF9idWZmZXJfc2l6ZSh0aGlzLl9sb2FkSW5kZXgpO1xuICAgICAgICB0aGlzLl9yZXNpemVCdWZmZXIodGhpcy4jcmVxdWVzdGVkKTtcbiAgICB9XG4gICAgX3Jlc2l6ZUJ1ZmZlcihzaXplKSB7XG4gICAgICAgIGlmICh0aGlzLl9idWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy4jd2FzbS5fZnJlZSh0aGlzLl9idWZmZXIuYnl0ZU9mZnNldCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNpemUgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBwdHIgPSB0aGlzLiN3YXNtLl9tYWxsb2Moc2l6ZSk7XG4gICAgICAgICAgICB0aGlzLl9idWZmZXIgPSBuZXcgVWludDhBcnJheSh0aGlzLiN3YXNtLkhFQVBVOC5idWZmZXIsIHB0ciwgc2l6ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9idWZmZXIgPSBuZXcgVWludDhBcnJheSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF90aHJvd0Vycm9yKHJlYXNvbikge1xuICAgICAgICB0aGlzLmFib3J0KCk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZWFzb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZSBhIHNpbmdsZSBibG9iIG9mIGRhdGEuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYmxvYiBEYXRhIHRvIHBhcnNlXG4gICAgICovXG4gICAgd3JpdGUoYmxvYikge1xuICAgICAgICBsZXQgcmVhZCA9IDA7XG4gICAgICAgIHdoaWxlIChyZWFkIDwgYmxvYi5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8qIEZpbGwgdGhlIGJ1ZmZlciAqL1xuICAgICAgICAgICAgY29uc3QgdG9SZWFkID0gTWF0aC5taW4oYmxvYi5sZW5ndGggLSByZWFkLCB0aGlzLl9idWZmZXIubGVuZ3RoIC0gdGhpcy4jb2Zmc2V0KTtcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlci5zZXQoYmxvYi5zdWJhcnJheShyZWFkLCByZWFkICsgdG9SZWFkKSwgdGhpcy4jb2Zmc2V0KTtcbiAgICAgICAgICAgIHRoaXMuI29mZnNldCArPSB0b1JlYWQ7XG4gICAgICAgICAgICByZWFkICs9IHRvUmVhZDtcbiAgICAgICAgICAgIGlmICh0aGlzLiNyZXF1ZXN0ZWQgPiB0aGlzLiNvZmZzZXQpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAvKiBTZW5kIGRhdGEuIFRoaXMgbG9hZHMgYXMgbWFueSBjaHVua3MgYXMgcG9zc2libGUgYW5kIHRoZW4gdGVsbHNcbiAgICAgICAgICAgICAqIHVzIGhvdyBtdWNoIGRhdGEgaXQncyBtaXNzaW5nLCBhbmQgaG93IG11Y2ggaXQgaGFzIHJlYWQuIFRoZVxuICAgICAgICAgICAgICogcmVhZCBjb3VudCBhbGxvd3MgdXMgdG8gbW92ZSBpbmNvbXBsZXRlIGNodW5rIGRhdGEgdG8gdGhlIHN0YXJ0XG4gICAgICAgICAgICAgKiBvZiB0aGUgYnVmZmVyLiBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHRoZSBidWZmZXIgaXMgYWxsb2NhdGVkXG4gICAgICAgICAgICAgKiB3aXRoIGp1c3QgZW5vdWdoIGRhdGEgdG8gaG9sZCB0aGUgbGFyZ2VzdCBjaHVuay4gKi9cbiAgICAgICAgICAgIGNvbnN0IHJlYWRQdHIgPSB0aGlzLiN3YXNtLl90ZW1wTWVtO1xuICAgICAgICAgICAgY29uc3Qgc2l6ZVB0ciA9IHRoaXMuI3dhc20uX3RlbXBNZW0gKyA0O1xuICAgICAgICAgICAgbGV0IHN1Y2Nlc3M7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSB0aGlzLiN3YXNtLl93bF9zY2VuZV9jcmVhdGVfY2h1bmtlZF9uZXh0KHRoaXMuX2xvYWRJbmRleCwgdGhpcy5fYnVmZmVyLmJ5dGVPZmZzZXQsIHRoaXMuI29mZnNldCwgcmVhZFB0ciwgc2l6ZVB0cik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgLyogQ2F0Y2ggY2FsbHMgdG8gYWJvcnQoKSwgZS5nLiB2aWEgYXNzZXJ0cyAqL1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3Rocm93RXJyb3IoJ0NodW5rIHBhcnNpbmcgZmFpbGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZWFkU2l6ZSA9IHRoaXMuI3dhc20uX3RlbXBNZW1VaW50MzJbMF07XG4gICAgICAgICAgICB0aGlzLiNyZXF1ZXN0ZWQgPSB0aGlzLiN3YXNtLl90ZW1wTWVtVWludDMyWzFdO1xuICAgICAgICAgICAgLyogTm90IGVub3VnaCBkYXRhLCB3YWl0IGZvciBtb3JlICovXG4gICAgICAgICAgICBpZiAodGhpcy4jcmVxdWVzdGVkID4gdGhpcy4jb2Zmc2V0KVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgLyogcmVxdWVzdGVkU2l6ZSAwIHNpZ25hbHMgZW5kIG9mIC5iaW4gZmlsZSAqL1xuICAgICAgICAgICAgaWYgKHRoaXMuI29mZnNldCAtIHJlYWRTaXplID4gdGhpcy4jcmVxdWVzdGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdGhyb3dFcnJvcignVW5leHBlY3RlZCBleHRyYSBkYXRhJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVhZFNpemUgPCB0aGlzLiNvZmZzZXQpIHtcbiAgICAgICAgICAgICAgICAvKiBXZSBwYXNzZWQgZXh0cmEgZGF0YSwgYnV0IG5vdCBlbm91Z2ggZm9yIGEgZnVsbCBjaHVuay4gTW92ZVxuICAgICAgICAgICAgICAgICAqIGl0IHRvIHRoZSBidWZmZXIgc3RhcnQuICovXG4gICAgICAgICAgICAgICAgdGhpcy5fYnVmZmVyLmNvcHlXaXRoaW4oMCwgcmVhZFNpemUsIHRoaXMuI29mZnNldCk7XG4gICAgICAgICAgICAgICAgdGhpcy4jb2Zmc2V0IC09IHJlYWRTaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jb2Zmc2V0ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLiNmaXJzdENodW5rKSB7XG4gICAgICAgICAgICAgICAgLyogRmlyc3QgY2h1bmsgaXMgdGhlIGhlYWRlci4gQXQgdGhpcyBwb2ludCB3ZSBjYW4gcXVlcnkgZm9yXG4gICAgICAgICAgICAgICAgICogdGhlIHJlcXVpcmVkIGJ1ZmZlciBzaXplIGZvciBwYXJzaW5nIHRoZSByZXN0IG9mIHRoZSAuYmluLlxuICAgICAgICAgICAgICAgICAqIFRoZSBpbml0aWFsIGJ1ZmZlciBpcyBleGFjdGx5IHRoZSBzaXplIG9mIHRoZSBoZWFkZXIgY2h1bmtcbiAgICAgICAgICAgICAgICAgKiBzbyAjb2Zmc2V0IHNob3VsZCBiZSAwIGhlcmUgc2luY2Ugd2Ugc2VudCBhIGNvbXBsZXRlIGNodW5rLiAqL1xuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc2l6ZUJ1ZmZlcih0aGlzLiN3YXNtLl93bF9zY2VuZV9jcmVhdGVfY2h1bmtlZF9idWZmZXJfc2l6ZSh0aGlzLl9sb2FkSW5kZXgpKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNmaXJzdENodW5rID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIENhbGxlZCB3aGVuIGFsbCBibG9icyBvZiBkYXRhIGhhdmUgYmVlbiB3cml0dGVuICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLiNyZXF1ZXN0ZWQgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLl90aHJvd0Vycm9yKCdVbmV4cGVjdGVkIGVuZCBvZiBkYXRhJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcmVzaXplQnVmZmVyKDApO1xuICAgICAgICBzd2l0Y2ggKHRoaXMuI3R5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgU2NlbmVUeXBlLlByZWZhYjpcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lSW5kZXggPSB0aGlzLiN3YXNtLl93bF9zY2VuZV9jcmVhdGVfY2h1bmtlZF9lbmRfcHJlZmFiKHRoaXMuX2xvYWRJbmRleCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFNjZW5lVHlwZS5NYWluOlxuICAgICAgICAgICAgICAgIHRoaXMuI3dhc20uX3dsX3NjZW5lX2NyZWF0ZV9jaHVua2VkX2VuZF9tYWluKHRoaXMuX2xvYWRJbmRleCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZUluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU2NlbmVUeXBlLkRlcGVuZGVuY3k6XG4gICAgICAgICAgICAgICAgW3RoaXMuc2NlbmVJbmRleF0gPSB0aGlzLiNjbG9zZVBhcmFtZXRlcnM7XG4gICAgICAgICAgICAgICAgdGhpcy4jd2FzbS5fd2xfc2NlbmVfY3JlYXRlX2NodW5rZWRfZW5kX3F1ZXVlZCh0aGlzLl9sb2FkSW5kZXgsIHRoaXMuc2NlbmVJbmRleCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRoaXMuI3dhc20uX3dsX3NjZW5lX2NyZWF0ZV9jaHVua2VkX2Fib3J0KHRoaXMuX2xvYWRJbmRleCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbG9hZEluZGV4ID0gLTE7XG4gICAgfVxuICAgIC8qKiBDYWxsZWQgd2hlbiB0aGUgc3RyZWFtIGlzIGFib3J0ZWQgKi9cbiAgICBhYm9ydCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2xvYWRJbmRleCA9PT0gLTEpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuI3dhc20uX3dsX3NjZW5lX2NyZWF0ZV9jaHVua2VkX2Fib3J0KHRoaXMuX2xvYWRJbmRleCk7XG4gICAgICAgIHRoaXMuX2xvYWRJbmRleCA9IC0xO1xuICAgICAgICB0aGlzLl9yZXNpemVCdWZmZXIoMCk7XG4gICAgfVxufVxuLyoqXG4gKiBXb25kZXJsYW5kIEVuZ2luZSAoLmJpbikgc2NlbmUuXG4gKlxuICogV29uZGVybGFuZCBFbmdpbmUgcGFja2FnZXMgdHdvIHR5cGVzIG9mIHNjZW5lOlxuICogLSBBY3RpdmF0YWJsZSBzY2VuZTogQ29udGFpbnMgb2JqZWN0cywgY29tcG9uZW50cywgdmlld3MsIHJlc291cmNlcywgYW5kIHJlbmRlcmluZyBkYXRhXG4gKiAtIFN0cmVhbWFibGUgc2NlbmU6IENvbnRhaW5zIG9iamVjdHMsIGNvbXBvbmVudHMsIGFuZCByZXNvdXJjZXNcbiAqXG4gKiAjIyMjIEFjdGl2YXRpb25cbiAqXG4gKiBTb21lIHNjZW5lcyBhcmUgKiphY3RpdmF0YWJsZSoqLCB0aGV5IGNhbiB0aHVzIGJlIGF0dGFjaGVkIHRvIHRoZSByZW5kZXJlclxuICogdG8gYmUgdXBkYXRlZCBhbmQgcmVuZGVyZWQgb24gdGhlIGNhbnZhcy5cbiAqXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgaGF2ZSBhIGxvb2sgYXQgdGhlIHtAbGluayBXb25kZXJsYW5kRW5naW5lLnN3aXRjaFRvfSBtZXRob2QuXG4gKlxuICogIyMjIyBJbnN0YW50aWF0aW9uXG4gKlxuICogQmVzaWRlcyBhY3RpdmF0aW9uLCBhIHNjZW5lIGNhbiBpbnN0YW50aWF0ZSB0aGUgY29udGVudCBvZiBhbm90aGVyIHNjZW5lLlxuICpcbiAqIEZvciBtb3JlIGluZm9ybWF0aW9uLCBoYXZlIGEgbG9vayBhdCB0aGUge0BsaW5rIFNjZW5lI2luc3RhbnRpYXRlfSBtZXRob2QuXG4gKlxuICogQGNhdGVnb3J5IHNjZW5lXG4gKi9cbmV4cG9ydCBjbGFzcyBTY2VuZSBleHRlbmRzIFByZWZhYiB7XG4gICAgLyoqIENhbGxlZCBiZWZvcmUgcmVuZGVyaW5nIHRoZSBzY2VuZSAqL1xuICAgIG9uUHJlUmVuZGVyID0gbmV3IEVtaXR0ZXIoKTtcbiAgICAvKiogQ2FsbGVkIGFmdGVyIHRoZSBzY2VuZSBoYXMgYmVlbiByZW5kZXJlZCAqL1xuICAgIG9uUG9zdFJlbmRlciA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqIFJheSBoaXQgcG9pbnRlciBpbiBXQVNNIGhlYXAuIEBoaWRkZW4gKi9cbiAgICBfcmF5SGl0O1xuICAgIC8qKiBSYXkgaGl0LiBAaGlkZGVuICovXG4gICAgX2hpdDtcbiAgICBjb25zdHJ1Y3RvcihlbmdpbmUsIGluZGV4KSB7XG4gICAgICAgIHN1cGVyKGVuZ2luZSwgaW5kZXgpO1xuICAgICAgICAvKiogYHRoaXMuZW5naW5lP2AgaXMgdXNlZCBmb3IgdGVzdGluZy4gKi9cbiAgICAgICAgdGhpcy5fcmF5SGl0ID0gdGhpcy5lbmdpbmU/Lndhc20uX21hbGxvYyg0ICogKDMgKiA0ICsgMyAqIDQgKyA0ICsgMikgKyA0KTtcbiAgICAgICAgdGhpcy5faGl0ID0gbmV3IFJheUhpdCh0aGlzLCB0aGlzLl9yYXlIaXQpO1xuICAgIH1cbiAgICBpbnN0YW50aWF0ZShwcmVmYWIpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGlkID0gd2FzbS5fd2xfc2NlbmVfaW5zdGFudGlhdGUocHJlZmFiLl9pbmRleCwgdGhpcy5faW5kZXgpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7IHJvb3Q6IHRoaXMud3JhcChpZCkgfTtcbiAgICAgICAgaWYgKHByZWZhYiBpbnN0YW5jZW9mIFByZWZhYkdMVEYpIHtcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IHRoaXMud3JhcChpZCk7XG4gICAgICAgICAgICBwcmVmYWIuX3Byb2Nlc3NJbnN0YW50aWF0b24odGhpcywgb2JqLCByZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKiBAdG9kbzogQWRkIGBpbnN0YW50aWF0ZUJhdGNoYCB0byBpbnN0YW50aWF0ZSBtdWx0aXBsZSBjaHVua3MgaW4gYSByb3cuICovXG4gICAgLyoqXG4gICAgICogQHRvZG8gUHJvdmlkZSBhbiBBUEkgdG8gZGVsZXRlIGFsbCByZXNvdXJjZXMgbGlua2VkIHRvIGEgc2NlbmUuXG4gICAgICpcbiAgICAgKiBFeGFtcGxlOlxuICAgICAqXG4gICAgICogYGBgdHNcbiAgICAgKiBjb25zdCBzY2VuZSA9IGF3YWl0IGVuZ2luZS5sb2FkU2NlbmUoJ1NjZW5lLmJpbicpO1xuICAgICAqIC4uLlxuICAgICAqIHNjZW5lLmRlc3Ryb3koe3JlbW92ZVJlc291cmNlczogdHJ1ZX0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIERlc3Ryb3kgdGhpcyBzY2VuZSBhbmQgcmVtb3ZlIGl0IGZyb20gdGhlIGVuZ2luZS5cbiAgICAgKlxuICAgICAqIEBub3RlIERlc3Ryb3lpbmcgYSBzY2VuZSAqKmRvZXNuJ3QqKiByZW1vdmUgdGhlIG1hdGVyaWFscywgbWVzaGVzLFxuICAgICAqIGFuZCB0ZXh0dXJlcyBpdCByZWZlcmVuY2VzIGluIHRoZSBlbmdpbmUuIFRob3NlIHNob3VsZCBiZSBjbGVhbmVkIHVwIGVpdGhlciBieSBsb2FkaW5nXG4gICAgICogYW5vdGhlciBtYWluIHNjZW5lIHZpYSB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5sb2FkTWFpblNjZW5lfSwgb3IgbWFudWFsbHkgdXNpbmcge0BsaW5rIE1lc2guZGVzdHJveX0uXG4gICAgICpcbiAgICAgKiBAdGhyb3dzIElmIHRoZSBzY2VuZSBpcyBjdXJyZW50bHkgYWN0aXZlLlxuICAgICAqICovXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdCB0byBkZXN0cm95ICR7dGhpc30sIGJ1dCBkZXN0cm95aW5nIHRoZSBhY3RpdmUgc2NlbmUgaXMgbm90IHN1cHBvcnRlZGApO1xuICAgICAgICB9XG4gICAgICAgIC8qIFN0b3JlIGJlZm9yZSBjYWxsaW5nIGBzdXBlci5kZXN0cm95KClgIHNpbmNlIHRoZSBjYWxsXG4gICAgICAgICAqIG1pZ2h0IGRlc3Ryb3kgZW50aXJlbHkgdGhlIHByb3RvdHlwZS4gKi9cbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHJheVB0ciA9IHRoaXMuX3JheUhpdDtcbiAgICAgICAgc3VwZXIuZGVzdHJveSgpO1xuICAgICAgICB3YXNtLl9mcmVlKHJheVB0cik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEN1cnJlbnRseSBhY3RpdmUgdmlldyBjb21wb25lbnRzLlxuICAgICAqL1xuICAgIGdldCBhY3RpdmVWaWV3cygpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGNvdW50ID0gd2FzbS5fd2xfc2NlbmVfZ2V0X2FjdGl2ZV92aWV3cyh0aGlzLl9pbmRleCwgd2FzbS5fdGVtcE1lbSwgMTYpO1xuICAgICAgICBjb25zdCB2aWV3cyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gd2FzbS5fdGVtcE1lbUludFtpXTtcbiAgICAgICAgICAgIHZpZXdzLnB1c2godGhpcy5fY29tcG9uZW50cy53cmFwVmlldyhpZCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2aWV3cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FzdCBhIHJheSB0aHJvdWdoIHRoZSBzY2VuZSBhbmQgZmluZCBpbnRlcnNlY3RpbmcgY29sbGlzaW9uIGNvbXBvbmVudHMuXG4gICAgICpcbiAgICAgKiBUaGUgcmVzdWx0aW5nIHJheSBoaXQgd2lsbCBjb250YWluICoqdXAgdG8gNCoqIGNsb3Nlc3QgcmF5IGhpdHMsXG4gICAgICogc29ydGVkIGJ5IGluY3JlYXNpbmcgZGlzdGFuY2UuXG4gICAgICpcbiAgICAgKiBFeGFtcGxlOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBoaXQgPSBlbmdpbmUuc2NlbmUucmF5Q2FzdChcbiAgICAgKiAgICAgWzAsIDAsIDBdLFxuICAgICAqICAgICBbMCwgMCwgMV0sXG4gICAgICogICAgIDEgPDwgMCB8IDEgPDwgNCwgLy8gT25seSBjaGVjayBhZ2FpbnN0IGNvbXBvbmVudHMgaW4gZ3JvdXBzIDAgYW5kIDRcbiAgICAgKiAgICAgMjVcbiAgICAgKiApO1xuICAgICAqIGlmIChoaXQuaGl0Q291bnQgPiAwKSB7XG4gICAgICogICAgIGNvbnN0IGxvY2F0aW9ucyA9IGhpdC5nZXRMb2NhdGlvbnMoKTtcbiAgICAgKiAgICAgY29uc29sZS5sb2coYE9iamVjdCBoaXQgYXQ6ICR7bG9jYXRpb25zWzBdWzBdfSwgJHtsb2NhdGlvbnNbMF1bMV19LCAke2xvY2F0aW9uc1swXVsyXX1gKTtcbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbyBSYXkgb3JpZ2luLlxuICAgICAqIEBwYXJhbSBkIFJheSBkaXJlY3Rpb24uXG4gICAgICogQHBhcmFtIGdyb3VwTWFzayBCaXRtYXNrIG9mIGNvbGxpc2lvbiBncm91cHMgdG8gZmlsdGVyIGJ5OiBvbmx5IG9iamVjdHNcbiAgICAgKiAgICAgICAgdGhhdCBhcmUgcGFydCBvZiBnaXZlbiBncm91cHMgYXJlIGNvbnNpZGVyZWQgZm9yIHRoZSByYXljYXN0LlxuICAgICAqIEBwYXJhbSBtYXhEaXN0YW5jZSBNYXhpbXVtICoqaW5jbHVzaXZlKiogaGl0IGRpc3RhbmNlLiBEZWZhdWx0cyB0byBgMTAwYC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSB7QGxpbmsgUmF5SGl0fSBpbnN0YW5jZSwgY2FjaGVkIGJ5IHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGUgcmV0dXJuZWQge0BsaW5rIFJheUhpdH0gb2JqZWN0IGlzIG93bmVkIGJ5IHRoZSB7QGxpbmsgU2NlbmV9XG4gICAgICogICAgICAgaW5zdGFuY2UgYW5kIHdpbGwgYmUgcmV1c2VkIHdpdGggdGhlIG5leHQge0BsaW5rIFNjZW5lI3JheUNhc3R9IGNhbGwuXG4gICAgICovXG4gICAgcmF5Q2FzdChvLCBkLCBncm91cE1hc2ssIG1heERpc3RhbmNlID0gMTAwLjApIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfc2NlbmVfcmF5X2Nhc3QodGhpcy5faW5kZXgsIG9bMF0sIG9bMV0sIG9bMl0sIGRbMF0sIGRbMV0sIGRbMl0sIGdyb3VwTWFzaywgdGhpcy5fcmF5SGl0LCBtYXhEaXN0YW5jZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9oaXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgYmFja2dyb3VuZCBjbGVhciBjb2xvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2xvciBuZXcgY2xlYXIgY29sb3IgKFJHQkEpLlxuICAgICAqIEBzaW5jZSAwLjguNVxuICAgICAqL1xuICAgIHNldCBjbGVhckNvbG9yKGNvbG9yKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3NjZW5lX3NldF9jbGVhckNvbG9yKGNvbG9yWzBdLCBjb2xvclsxXSwgY29sb3JbMl0sIGNvbG9yWzNdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgdG8gY2xlYXIgdGhlIGNvbG9yIGZyYW1lYnVmZmVyIGJlZm9yZSBkcmF3aW5nLlxuICAgICAqXG4gICAgICogVGhpcyBmdW5jdGlvbiBpcyB1c2VmdWwgaWYgYW4gZXh0ZXJuYWwgZnJhbWV3b3JrIChlLmcuIGFuIEFSIHRyYWNraW5nXG4gICAgICogZnJhbWV3b3JrKSBpcyByZXNwb25zaWJsZSBmb3IgZHJhd2luZyBhIGNhbWVyYSBmcmFtZSBiZWZvcmUgV29uZGVybGFuZFxuICAgICAqIEVuZ2luZSBkcmF3cyB0aGUgc2NlbmUgb24gdG9wIG9mIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGIgV2hldGhlciB0byBlbmFibGUgY29sb3IgY2xlYXIuXG4gICAgICogQHNpbmNlIDAuOS40XG4gICAgICovXG4gICAgc2V0IGNvbG9yQ2xlYXJFbmFibGVkKGIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfc2NlbmVfZW5hYmxlQ29sb3JDbGVhcihiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9hZCBhIHNjZW5lIGZpbGUgKC5iaW4pLlxuICAgICAqXG4gICAgICogV2lsbCByZXBsYWNlIHRoZSBjdXJyZW50bHkgYWN0aXZlIHNjZW5lIHdpdGggdGhlIG9uZSBsb2FkZWRcbiAgICAgKiBmcm9tIGdpdmVuIGZpbGUuIEl0IGlzIGFzc3VtZWQgdGhhdCBKYXZhU2NyaXB0IGNvbXBvbmVudHMgcmVxdWlyZWQgYnlcbiAgICAgKiB0aGUgbmV3IHNjZW5lIHdlcmUgcmVnaXN0ZXJlZCBpbiBhZHZhbmNlLlxuICAgICAqXG4gICAgICogT25jZSB0aGUgc2NlbmUgaXMgbG9hZGVkIHN1Y2Nlc3NmdWxseSBhbmQgaW5pdGlhbGl6ZWQsXG4gICAgICoge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUub25TY2VuZUxvYWRlZH0gaXMgbm90aWZpZWQuXG4gICAgICpcbiAgICAgKiAjIyMjIEFycmF5QnVmZmVyXG4gICAgICpcbiAgICAgKiBUaGUgYGxvYWQoKWAgbWV0aG9kIGFjY2VwdHMgYW4gaW4tbWVtb3J5IGJ1ZmZlcjpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogc2NlbmUubG9hZCh7XG4gICAgICogICAgIGJ1ZmZlcjogbmV3IEFycmF5QnVmZmVyKC4uLiksXG4gICAgICogICAgIGJhc2VVUkw6ICdodHRwczovL215LXdlYnNpdGUvYXNzZXRzJ1xuICAgICAqIH0pXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGUgYGJhc2VVUkxgIGlzIG1hbmRhdG9yeS4gSXQncyB1c2VkIHRvIGZldGNoIGltYWdlcyBhbmQgbGFuZ3VhZ2VzLlxuICAgICAqXG4gICAgICogVXNlIHtAbGluayBTY2VuZS5zZXRMb2FkaW5nUHJvZ3Jlc3N9IHRvIHVwZGF0ZSB0aGUgbG9hZGluZyBwcm9ncmVzcyBiYXJcbiAgICAgKiB3aGVuIHVzaW5nIGFuIEFycmF5QnVmZmVyLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHRoZSBuZXcge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUubG9hZE1haW5TY2VuZX0gQVBJLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgUGF0aCB0byB0aGUgZmlsZSB0byBsb2FkLCBvciBhbiBvcHRpb24gb2JqZWN0LlxuICAgICAqICAgICBGb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgb3B0aW9ucywgc2VlIHRoZSB7QGxpbmsgU2NlbmVMb2FkT3B0aW9uc30gZG9jdW1lbnRhdGlvbi5cbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgc2NlbmUgd2FzIGxvYWRlZC5cbiAgICAgKi9cbiAgICBhc3luYyBsb2FkKG9wdGlvbnMpIHtcbiAgICAgICAgLyoqIEB0b2RvKDIuMC4wKTogUmVtb3ZlIHRoaXMgbWV0aG9kLiAqL1xuICAgICAgICBsZXQgZGlzcGF0Y2hSZWFkeUV2ZW50ID0gZmFsc2U7XG4gICAgICAgIGxldCBvcHRzO1xuICAgICAgICBpZiAoaXNTdHJpbmcob3B0aW9ucykpIHtcbiAgICAgICAgICAgIG9wdHMgPSBhd2FpdCBTY2VuZS5sb2FkQnVmZmVyKG9wdGlvbnMsIChieXRlcywgc2l6ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZW5naW5lLmxvZy5pbmZvKExvZ1RhZy5TY2VuZSwgYFNjZW5lIGRvd25sb2FkaW5nOiAke2J5dGVzfSAvICR7c2l6ZX1gKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZS5zZXRMb2FkaW5nUHJvZ3Jlc3MoYnl0ZXMgLyBzaXplKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3B0cyA9IG9wdGlvbnM7XG4gICAgICAgICAgICBkaXNwYXRjaFJlYWR5RXZlbnQgPSBvcHRpb25zLmRpc3BhdGNoUmVhZHlFdmVudCA/PyBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzY2VuZSA9IGF3YWl0IHRoaXMuZW5naW5lLmxvYWRNYWluU2NlbmVGcm9tQnVmZmVyKHtcbiAgICAgICAgICAgIC4uLm9wdHMsXG4gICAgICAgICAgICBkaXNwYXRjaFJlYWR5RXZlbnQsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVuZ2luZS5vblNjZW5lTG9hZGVkLm5vdGlmeSgpO1xuICAgICAgICByZXR1cm4gc2NlbmU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGVuZCBhIHNjZW5lIGZpbGUuXG4gICAgICpcbiAgICAgKiBMb2FkcyBhbmQgcGFyc2VzIHRoZSBmaWxlIGFuZCBpdHMgaW1hZ2VzIGFuZCBhcHBlbmRzIHRoZSByZXN1bHRcbiAgICAgKiB0byB0aGUgY3VycmVudGx5IGFjdGl2ZSBzY2VuZS5cbiAgICAgKlxuICAgICAqIFN1cHBvcnRlZCBmb3JtYXRzIGFyZSBzdHJlYW1hYmxlIFdvbmRlcmxhbmQgc2NlbmUgZmlsZXMgKC5iaW4pIGFuZCBnbFRGXG4gICAgICogM0Qgc2NlbmVzICguZ2x0ZiwgLmdsYikuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIFdMLnNjZW5lLmFwcGVuZChmaWxlbmFtZSkudGhlbihyb290ID0+IHtcbiAgICAgKiAgICAgLy8gcm9vdCBjb250YWlucyB0aGUgbG9hZGVkIHNjZW5lXG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBJbiBjYXNlIHRoZSBgbG9hZEdsdGZFeHRlbnNpb25zYCBvcHRpb24gaXMgc2V0IHRvIHRydWUsIHRoZSByZXNwb25zZVxuICAgICAqIHdpbGwgYmUgYW4gb2JqZWN0IGNvbnRhaW5pbmcgYm90aCB0aGUgcm9vdCBvZiB0aGUgbG9hZGVkIHNjZW5lIGFuZFxuICAgICAqIGFueSBnbFRGIGV4dGVuc2lvbnMgZm91bmQgb24gbm9kZXMsIG1lc2hlcyBhbmQgdGhlIHJvb3Qgb2YgdGhlIGZpbGUuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIFdMLnNjZW5lLmFwcGVuZChmaWxlbmFtZSwgeyBsb2FkR2x0ZkV4dGVuc2lvbnM6IHRydWUgfSkudGhlbigoe3Jvb3QsIGV4dGVuc2lvbnN9KSA9PiB7XG4gICAgICogICAgIC8vIHJvb3QgY29udGFpbnMgdGhlIGxvYWRlZCBzY2VuZVxuICAgICAqICAgICAvLyBleHRlbnNpb25zLnJvb3QgY29udGFpbnMgYW55IGV4dGVuc2lvbnMgYXQgdGhlIHJvb3Qgb2YgZ2xURiBkb2N1bWVudFxuICAgICAqICAgICBjb25zdCByb290RXh0ZW5zaW9ucyA9IGV4dGVuc2lvbnMucm9vdDtcbiAgICAgKiAgICAgLy8gZXh0ZW5zaW9ucy5tZXNoIGFuZCBleHRlbnNpb25zLm5vZGUgY29udGFpbiBleHRlbnNpb25zIGluZGV4ZWQgYnkgT2JqZWN0IGlkXG4gICAgICogICAgIGNvbnN0IGNoaWxkT2JqZWN0ID0gcm9vdC5jaGlsZHJlblswXTtcbiAgICAgKiAgICAgY29uc3QgbWVzaEV4dGVuc2lvbnMgPSByb290Lm1lc2hFeHRlbnNpb25zW2NoaWxkT2JqZWN0Lm9iamVjdElkXTtcbiAgICAgKiAgICAgY29uc3Qgbm9kZUV4dGVuc2lvbnMgPSByb290Lm5vZGVFeHRlbnNpb25zW2NoaWxkT2JqZWN0Lm9iamVjdElkXTtcbiAgICAgKiAgICAgLy8gZXh0ZW5zaW9ucy5pZE1hcHBpbmcgY29udGFpbnMgYSBtYXBwaW5nIGZyb20gZ2xURiBub2RlIGluZGV4IHRvIE9iamVjdCBpZFxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogSWYgdGhlIGZpbGUgdG8gYmUgbG9hZGVkIGlzIGxvY2F0ZWQgaW4gYSBzdWJmb2xkZXIsIGl0IG1pZ2h0IGJlIHVzZWZ1bFxuICAgICAqIHRvIGRlZmluZSB0aGUgYGJhc2VVUkxgIG9wdGlvbi4gVGhpcyB3aWxsIGVuc3VyZSBhbnkgYmluIGZpbGVzXG4gICAgICogcmVmZXJlbmNlZCBieSB0aGUgbG9hZGVkIGJpbiBmaWxlIGFyZSBsb2FkZWQgYXQgdGhlIGNvcnJlY3QgcGF0aC5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogV0wuc2NlbmUuYXBwZW5kKGZpbGVuYW1lLCB7IGJhc2VVUkw6ICdzY2VuZXMnIH0pLnRoZW4oKHtyb290LCBleHRlbnNpb25zfSkgPT4ge1xuICAgICAqICAgICAvLyBkbyBzdHVmZlxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHRoZSBuZXcge0BsaW5rIFByZWZhYn0gYW5kIHtAbGluayBTY2VuZX0gQVBJLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpbGUgVGhlIC5iaW4sIC5nbHRmIG9yIC5nbGIgZmlsZSB0byBhcHBlbmQuIFNob3VsZCBiZSBhIFVSTCBvclxuICAgICAqICAgYW4gYEFycmF5QnVmZmVyYCB3aXRoIHRoZSBmaWxlIGNvbnRlbnQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgQWRkaXRpb25hbCBvcHRpb25zIGZvciBsb2FkaW5nLlxuICAgICAqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBzY2VuZSB3YXMgYXBwZW5kZWQuXG4gICAgICovXG4gICAgYXN5bmMgYXBwZW5kKGZpbGUsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICAvKiogQHRvZG8oMi4wLjApOiBSZW1vdmUgdGhpcyBtZXRob2QuICovXG4gICAgICAgIGNvbnN0IHsgYmFzZVVSTCA9IGlzU3RyaW5nKGZpbGUpID8gZ2V0QmFzZVVybChmaWxlKSA6IHRoaXMuYmFzZVVSTCB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3QgYnVmZmVyID0gaXNTdHJpbmcoZmlsZSkgPyBhd2FpdCBmZXRjaFdpdGhQcm9ncmVzcyhmaWxlKSA6IGZpbGU7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgVWludDhBcnJheShidWZmZXIpO1xuICAgICAgICBjb25zdCBpc0JpbkZpbGUgPSBkYXRhLmJ5dGVMZW5ndGggPiBNQUdJQ19CSU4ubGVuZ3RoICYmXG4gICAgICAgICAgICBkYXRhXG4gICAgICAgICAgICAgICAgLnN1YmFycmF5KDAsIE1BR0lDX0JJTi5sZW5ndGgpXG4gICAgICAgICAgICAgICAgLmV2ZXJ5KCh2YWx1ZSwgaSkgPT4gdmFsdWUgPT09IE1BR0lDX0JJTi5jaGFyQ29kZUF0KGkpKTtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBpc0JpbkZpbGVcbiAgICAgICAgICAgID8gdGhpcy5lbmdpbmUubG9hZFByZWZhYkZyb21CdWZmZXIoeyBidWZmZXIsIGJhc2VVUkwgfSlcbiAgICAgICAgICAgIDogdGhpcy5lbmdpbmUubG9hZEdMVEZGcm9tQnVmZmVyKHtcbiAgICAgICAgICAgICAgICBidWZmZXIsXG4gICAgICAgICAgICAgICAgYmFzZVVSTCxcbiAgICAgICAgICAgICAgICBleHRlbnNpb25zOiBvcHRpb25zLmxvYWRHbHRmRXh0ZW5zaW9ucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmluc3RhbnRpYXRlKHNjZW5lKTtcbiAgICAgICAgaWYgKHNjZW5lIGluc3RhbmNlb2YgUHJlZmFiR0xURikge1xuICAgICAgICAgICAgaWYgKCFzY2VuZS5leHRlbnNpb25zKVxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQucm9vdDtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcm9vdDogcmVzdWx0LnJvb3QsXG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uczoge1xuICAgICAgICAgICAgICAgICAgICAuLi5yZXN1bHQuZXh0ZW5zaW9ucyxcbiAgICAgICAgICAgICAgICAgICAgcm9vdDogc2NlbmUuZXh0ZW5zaW9ucy5yb290LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQucm9vdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBsb2FkaW5nIHNjcmVlbiBwcm9ncmVzcyBiYXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmFsdWUgQ3VycmVudCBsb2FkaW5nIHBlcmNlbnRhZ2UsIGluIHRoZSByYW5nZSBbMDsgMV0uXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUuc2V0TG9hZGluZ1Byb2dyZXNzfS5cbiAgICAgKi9cbiAgICBzZXRMb2FkaW5nUHJvZ3Jlc3MocGVyY2VudGFnZSkge1xuICAgICAgICB0aGlzLmVuZ2luZS5zZXRMb2FkaW5nUHJvZ3Jlc3MocGVyY2VudGFnZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpc3BhdGNoIGFuIGV2ZW50ICd3bGUtc2NlbmUtcmVhZHknIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgaXMgdXNlZCBmb3IgYXV0b21hdGljIHRlc3RpbmcuXG4gICAgICovXG4gICAgZGlzcGF0Y2hSZWFkeUV2ZW50KCkge1xuICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnd2xlLXNjZW5lLXJlYWR5Jywge1xuICAgICAgICAgICAgZGV0YWlsOiB7IGZpbGVuYW1lOiB0aGlzLmZpbGVuYW1lIH0sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjdXJyZW50IG1hdGVyaWFsIHRvIHJlbmRlciB0aGUgc2t5LlxuICAgICAqXG4gICAgICogQG5vdGUgVGhlIHNreSBuZWVkcyB0byBiZSBlbmFibGVkIGluIHRoZSBlZGl0b3Igd2hlbiBjcmVhdGluZyB0aGUgc2NlbmUuXG4gICAgICogRm9yIG1vcmUgaW5mb3JtYXRpb24sIHBsZWFzZSByZWZlciB0byB0aGUgYmFja2dyb3VuZCBbdHV0b3JpYWxdKGh0dHBzOi8vd29uZGVybGFuZGVuZ2luZS5jb20vdHV0b3JpYWxzL2JhY2tncm91bmQtZWZmZWN0LykuXG4gICAgICovXG4gICAgc2V0IHNreU1hdGVyaWFsKG1hdGVyaWFsKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3NjZW5lX3NldF9za3lfbWF0ZXJpYWwodGhpcy5faW5kZXgsIG1hdGVyaWFsPy5faWQgPz8gMCk7XG4gICAgfVxuICAgIC8qKiBDdXJyZW50IHNreSBtYXRlcmlhbCwgb3IgYG51bGxgIGlmIG5vIHNreSBpcyBzZXQuICovXG4gICAgZ2V0IHNreU1hdGVyaWFsKCkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZW5naW5lLndhc20uX3dsX3NjZW5lX2dldF9za3lfbWF0ZXJpYWwodGhpcy5faW5kZXgpO1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUubWF0ZXJpYWxzLndyYXAoaW5kZXgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldCB0aGUgc2NlbmUuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBkZWxldGVzIGFsbCB1c2VkIGFuZCBhbGxvY2F0ZWQgb2JqZWN0cywgYW5kIGNvbXBvbmVudHMuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBMb2FkIGEgbmV3IHNjZW5lIGFuZCBhY3RpdmF0ZSBpdCBpbnN0ZWFkLlxuICAgICAqL1xuICAgIHJlc2V0KCkge1xuICAgICAgICAvKiogQHRvZG8oMi4wLjApOiBSZW1vdmUgdGhpcyBtZXRob2QuICovXG4gICAgfVxuICAgIC8qKlxuICAgICAqIERvd25sb2FkIGFuZCBhcHBseSBxdWV1ZWQgZGVwZW5kZW5jeSBmaWxlcyAoLmJpbikuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgYXN5bmMgX2Rvd25sb2FkRGVwZW5kZW5jeSh1cmwpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IGZldGNoV2l0aFByb2dyZXNzKHVybCk7XG4gICAgICAgIC8qKiBAdG9kbyBSZW1vdmUgdmVyc2lvbiBjaGVjayBpbiAxLjMuMCAqL1xuICAgICAgICBjb25zdCBsb2FkQ2h1bmtlZCA9IHRoaXMuZW5naW5lLnJ1bnRpbWVWZXJzaW9uLm1pbm9yID4gMiB8fCB0aGlzLmVuZ2luZS5ydW50aW1lVmVyc2lvbi5wYXRjaCA+PSAxO1xuICAgICAgICBpZiAobG9hZENodW5rZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHNpbmsgPSBuZXcgQ2h1bmtlZFNjZW5lTG9hZFNpbmsodGhpcy5lbmdpbmUsIFNjZW5lVHlwZS5EZXBlbmRlbmN5LCB1cmwsIHRoaXMuX2luZGV4KTtcbiAgICAgICAgICAgIHNpbmsud3JpdGUobmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSk7XG4gICAgICAgICAgICBzaW5rLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBwdHIgPSB3YXNtLmNvcHlCdWZmZXJUb0hlYXAoYnVmZmVyKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgd2FzbS5fd2xfc2NlbmVfbG9hZF9xdWV1ZWRfYmluKHRoaXMuX2luZGV4LCBwdHIsIGJ1ZmZlci5ieXRlTGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIC8qIENhdGNoIGNhbGxzIHRvIGFib3J0KCksIGUuZy4gdmlhIGFzc2VydHMgKi9cbiAgICAgICAgICAgICAgICB3YXNtLl9mcmVlKHB0cik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgYW5kIGFwcGx5IHF1ZXVlZCBkZXBlbmRlbmN5IGZpbGVzICguYmluKS5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBhc3luYyBfZG93bmxvYWREZXBlbmRlbmNpZXMoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBjb3VudCA9IHdhc20uX3dsX3NjZW5lX3F1ZXVlZF9iaW5fY291bnQodGhpcy5faW5kZXgpO1xuICAgICAgICBpZiAoIWNvdW50KVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICBjb25zdCB1cmxzID0gbmV3IEFycmF5KGNvdW50KS5maWxsKDApLm1hcCgoXywgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfc2NlbmVfcXVldWVkX2Jpbl9wYXRoKHRoaXMuX2luZGV4LCBpKTtcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IHdhc20uVVRGOFRvU3RyaW5nKHB0cik7XG4gICAgICAgICAgICByZXR1cm4gdXJsO1xuICAgICAgICB9KTtcbiAgICAgICAgd2FzbS5fd2xfc2NlbmVfY2xlYXJfcXVldWVkX2Jpbl9saXN0KHRoaXMuX2luZGV4KTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHVybHMubWFwKCh1cmwpID0+IHRoaXMuX2Rvd25sb2FkRGVwZW5kZW5jeSh1cmwpKSk7XG4gICAgfVxufVxuIiwgIi8qKlxuICogQXNzZXJ0IHRoYXQgdGhlIGdpdmVuIGJpdCBpbmRleCBpcyBsZXNzIHRoYW4gMzIuXG4gKlxuICogQHBhcmFtIGJpdCBUaGUgYml0IHRvIHRlc3QuXG4gKi9cbmZ1bmN0aW9uIGFzc2VydChiaXQpIHtcbiAgICBpZiAoYml0ID49IDMyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQml0U2V0LmVuYWJsZSgpOiBWYWx1ZSAke2JpdH0gaXMgb3ZlciAzMWApO1xuICAgIH1cbn1cbi8qKlxuICogU3RvcmVzIGEgYml0IHBhdHRlcm4gdG8gcXVpY2tseSB0ZXN0IGlmIGFuIGluZGV4IGlzIGVuYWJsZWQgLyBkaXNhYmxlZC5cbiAqXG4gKiBUaGlzIGNsYXNzIGNhbiBzdG9yZSB1cCB0byAqKjMyKiogZGlmZmVyZW50IHZhbHVlcyBpbiB0aGUgcmFuZ2UgWzA7IDMxXS5cbiAqXG4gKiAjIyMjIFVzYWdlXG4gKlxuICogYGBganNcbiAqIGNvbnN0IGJpdHNldCA9IG5ldyBCaXRTZXQoKTtcbiAqIGJpdHNldC5lbmFibGUoMTApOyAvLyBFbmFibGUgYml0IGF0IGluZGV4IGAxMGAuXG4gKiBjb25zb2xlLmxvZyhiaXRzZXQuZW5hYmxlZCgxMCkpOyAvLyBQcmludHMgJ3RydWUnLlxuICogYGBgXG4gKlxuICogIyMjIyBUeXBlU2NyaXB0XG4gKlxuICogVGhlIHNldCBjYW4gYmUgdHlwZWQgb3ZlciBhbiBlbnVtOlxuICpcbiAqIGBgYHRzXG4gKiBlbnVtIFRhZyB7XG4gKiAgICAgRmlyc3QgPSAwLFxuICogICAgIFNlY29uZCA9IDEsXG4gKiB9XG4gKlxuICogY29uc3QgYml0c2V0ID0gbmV3IEJpdFNldDxUYWc+KCk7XG4gKiBiaXRzZXQuZW5hYmxlKFRhZy5GaXJzdCk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIEJpdFNldCB7XG4gICAgLyoqIEVuYWJsZWQgYml0cy4gQGhpZGRlbiAqL1xuICAgIF9iaXRzID0gMDtcbiAgICAvKipcbiAgICAgKiBFbmFibGUgdGhlIGJpdCBhdCB0aGUgZ2l2ZW4gaW5kZXguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYml0cyBBIHNwcmVhZCBvZiBhbGwgdGhlIGJpdHMgdG8gZW5hYmxlLlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICBlbmFibGUoLi4uYml0cykge1xuICAgICAgICBmb3IgKGNvbnN0IGJpdCBvZiBiaXRzKSB7XG4gICAgICAgICAgICBhc3NlcnQoYml0KTtcbiAgICAgICAgICAgIC8qIENhc3RzIHRoZSByZXN1bHQgdG8gYW4gdW5zaWduZWQgaW50ZWdlciAqL1xuICAgICAgICAgICAgdGhpcy5fYml0cyB8PSAoMSA8PCBiaXQpID4+PiAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbmFibGUgYWxsIGJpdHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgZW5hYmxlQWxsKCkge1xuICAgICAgICB0aGlzLl9iaXRzID0gfjA7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNhYmxlIHRoZSBiaXQgYXQgdGhlIGdpdmVuIGluZGV4LlxuICAgICAqXG4gICAgICogQHBhcmFtIGJpdHMgQSBzcHJlYWQgb2YgYWxsIHRoZSBiaXRzIHRvIGRpc2FibGUuXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIGRpc2FibGUoLi4uYml0cykge1xuICAgICAgICBmb3IgKGNvbnN0IGJpdCBvZiBiaXRzKSB7XG4gICAgICAgICAgICBhc3NlcnQoYml0KTtcbiAgICAgICAgICAgIC8qIENhc3RzIHRoZSByZXN1bHQgdG8gYW4gdW5zaWduZWQgaW50ZWdlciAqL1xuICAgICAgICAgICAgdGhpcy5fYml0cyAmPSB+KCgxIDw8IGJpdCkgPj4+IDApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNhYmxlIGFsbCBiaXRzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIGRpc2FibGVBbGwoKSB7XG4gICAgICAgIHRoaXMuX2JpdHMgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tlciB3aGV0aGVyIHRoZSBiaXQgaXMgc2V0IG9yIG5vdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiaXQgVGhlIGJpdCB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgaXQncyBlbmFibGVkLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBlbmFibGVkKGJpdCkge1xuICAgICAgICByZXR1cm4gISEodGhpcy5fYml0cyAmICgoMSA8PCBiaXQpID4+PiAwKSk7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IEJpdFNldCB9IGZyb20gJy4vYml0c2V0LmpzJztcbi8qKlxuICogTG9nZ2luZyBsZXZlbHMgc3VwcG9ydGVkIGJ5IHtAbGluayBMb2dnZXJ9LlxuICovXG5leHBvcnQgdmFyIExvZ0xldmVsO1xuKGZ1bmN0aW9uIChMb2dMZXZlbCkge1xuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiSW5mb1wiXSA9IDBdID0gXCJJbmZvXCI7XG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJXYXJuXCJdID0gMV0gPSBcIldhcm5cIjtcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIkVycm9yXCJdID0gMl0gPSBcIkVycm9yXCI7XG59KShMb2dMZXZlbCB8fCAoTG9nTGV2ZWwgPSB7fSkpO1xuLyoqXG4gKiBMb2dnaW5nIHdyYXBwZXIuXG4gKlxuICogVGhpcyBpcyB1c2VkIHRvIGFsbG93IHR1cm5pbmcgb24vb2ZmOlxuICogICAgIC0gYGNvbnNvbGUubG9nYFxuICogICAgIC0gYGNvbnNvbGUud2FybmBcbiAqICAgICAtIGBjb25zb2xlLmVycm9yYFxuICpcbiAqICMjIyMgVXNhZ2VcbiAqXG4gKiBgYGBqc1xuICogaW1wb3J0IHtMb2dnZXIsIExvZ0xldmVsLCBMb2dUYWd9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4gKlxuICogLy8gQ3JlYXRlIGEgbG9nZ2VyIHdpdGggb25seSB0aGUgXCJlcnJvclwiIGFuZCBcIndhcm5cIiBsZXZlbHMgYWN0aXZhdGVkXG4gKiBjb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKExvZ0xldmVsLldhcm4sIExvZ0xldmVsLkVycm9yKTtcbiAqXG4gKiAvLyBPbmx5IHRoZSBcImVycm9yXCIgYW5kIFwid2FyblwiIGxldmVscyBhcmUgYWN0aXZhdGVkLFxuICogLy8gdGhpcyBtZXNzYWdlIGlzbid0IGxvZ2dlZC5cbiAqIGxvZ2dlci5pbmZvKExvZ1RhZy5Db21wb25lbnQsICdUaGlzIG1lc3NhZ2UgaXMgc2h1c2hlZCcpXG4gKlxuICogLy8gUHJpbnRzICdIZWxsbyBFcnJvciEnXG4gKiBsb2dnZXIuZXJyb3IoTG9nVGFnLkNvbXBvbmVudCwgJ0hlbGxvIEVycm9yIScpO1xuICpcbiAqIC8vIFByaW50cyAnSGVsbG8gV2FybmluZyEnXG4gKiBsb2dnZXIud2FybihMb2dUYWcuQ29tcG9uZW50LCAnSGVsbG8gV2FybmluZyEnKTtcbiAqIGBgYFxuICpcbiAqIFRoZSBsb2cgbGV2ZWxzIGNhbiBiZSBjaGFuZ2VkIGF0IGFueXRpbWUgdXNpbmcgdGhlIHtAbGluayBCaXRTZXR9IGFwaTpcbiAqXG4gKiBgYGBqc1xuICogLy8gRW5hYmxlIHRoZSBcImluZm9cIiBsZXZlbFxuICogbG9nZ2VyLmxldmVscy5lbmFibGUoTG9nTGV2ZWwuSW5mbyk7XG4gKiAqIC8vIERpc2FibGUgdGhlIFwid2FyblwiIGxldmVsXG4gKiBsb2dnZXIubGV2ZWxzLmRpc2FibGUoTG9nTGV2ZWwuV2Fybik7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIFRhZ3NcbiAqXG4gKiBJbiBhZGRpdGlvbiwgdGhlIGxvZ2dlciBzdXBwb3J0cyB0YWdnaW5nIG1lc3NhZ2VzOlxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQge0xvZ2dlciwgTG9nTGV2ZWwsIExvZ1RhZ30gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbiAqXG4gKiBjb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKExvZ0xldmVsLkluZm8pO1xuICpcbiAqIGxvZ2dlci50YWdzLmRpc2FibGVBbGwoKTtcbiAqXG4gKiAvLyBBbGwgdGFncyBhcmUgb2ZmLCB0aGlzIG1lc3NhZ2UgaXNuJ3QgbG9nZ2VkXG4gKiBsb2dnZXIuaW5mbyhMb2dUYWcuQ29tcG9uZW50LCAnVGhpcyBtZXNzYWdlIGlzIHNodXNoZWQnKTtcbiAqXG4gKiBsb2dnZXIudGFncy5lbmFibGUoTG9nVGFnLkNvbXBvbmVudCk7XG4gKiBsb2dnZXIuaW5mbyhMb2dUYWcuQ29tcG9uZW50LCAnSGVsbG8gV29ybGQhJykgLy8gUHJpbnRzICdIZWxsbyBXb3JsZCEnXG4gKiBgYGBcbiAqXG4gKiBUaGUgdGFnZ2luZyBzeXN0ZW0gZ2l2ZXMgYW5vdGhlciBsYXllciBvZiBjb250cm9sIHRvIGVuYWJsZSAvIGRpc2FibGVcbiAqIHNvbWUgc3BlY2lmaWMgbG9ncy5cbiAqL1xuZXhwb3J0IGNsYXNzIExvZ2dlciB7XG4gICAgLyoqXG4gICAgICogQml0c2V0IG9mIGVuYWJsZWQgbGV2ZWxzLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGxldmVscyA9IG5ldyBCaXRTZXQoKTtcbiAgICAvKipcbiAgICAgKiBCaXRzZXQgb2YgZW5hYmxlZCB0YWdzLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHRhZ3MgPSBuZXcgQml0U2V0KCkuZW5hYmxlQWxsKCk7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IGxvZ2dlciBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBsZXZlbHMgRGVmYXVsdCBzZXQgb2YgbGV2ZWxzIHRvIGVuYWJsZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvciguLi5sZXZlbHMpIHtcbiAgICAgICAgdGhpcy5sZXZlbHMuZW5hYmxlKC4uLmxldmVscyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvZyB0aGUgbWVzc2FnZShzKSB1c2luZyBgY29uc29sZS5sb2dgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRhZyBUYWcgcmVwcmVzZW50ZWQgYnkgYSBwb3NpdGl2ZSBpbnRlZ2VyLlxuICAgICAqIEBwYXJhbSBtc2cgQSBzcHJlYWQgb2YgbWVzc2FnZSB0byBsb2cuXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIGluZm8odGFnLCAuLi5tc2cpIHtcbiAgICAgICAgaWYgKHRoaXMubGV2ZWxzLmVuYWJsZWQoTG9nTGV2ZWwuSW5mbykgJiYgdGhpcy50YWdzLmVuYWJsZWQodGFnKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coLi4ubXNnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9nIHRoZSBtZXNzYWdlKHMpIHVzaW5nIGBjb25zb2xlLndhcm5gLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRhZyBUYWcgcmVwcmVzZW50ZWQgYnkgYSBwb3NpdGl2ZSBpbnRlZ2VyLlxuICAgICAqIEBwYXJhbSBtc2cgQSBzcHJlYWQgb2YgbWVzc2FnZSB0byBsb2cuXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHdhcm4odGFnLCAuLi5tc2cpIHtcbiAgICAgICAgaWYgKHRoaXMubGV2ZWxzLmVuYWJsZWQoTG9nTGV2ZWwuV2FybikgJiYgdGhpcy50YWdzLmVuYWJsZWQodGFnKSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKC4uLm1zZyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvZyB0aGUgbWVzc2FnZShzKSB1c2luZyBgY29uc29sZS5lcnJvcmAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGFnIFRhZyByZXByZXNlbnRlZCBieSBhIHBvc2l0aXZlIGludGVnZXIuXG4gICAgICogQHBhcmFtIG1zZyBBIHNwcmVhZCBvZiBtZXNzYWdlIHRvIGxvZy5cbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgZXJyb3IodGFnLCAuLi5tc2cpIHtcbiAgICAgICAgaWYgKHRoaXMubGV2ZWxzLmVuYWJsZWQoTG9nTGV2ZWwuRXJyb3IpICYmIHRoaXMudGFncy5lbmFibGVkKHRhZykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoLi4ubXNnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG4iLCAiLypcbiAqIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAxNC0yMDE2IFBhdHJpY2sgR2Fuc3RlcmVyIDxwYXJvZ2FAcGFyb2dhLmNvbT5cbiAqIENvcHlyaWdodCAoYykgMjAyMC0yMDIzIEFhcm9uIEh1Z2dpbnMgPGFodWdnaW5zQGFhcm9uaHVnZ2lucy5jb20+XG4gKiBDb3B5cmlnaHQgKGMpIDIwMjQgV29uZGVybGFuZCBHbWJIIDxjb250YWN0QHdvbmRlcmxhbmRlbmdpbmUuY29tPlxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2ZcbiAqIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW5cbiAqIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG9cbiAqIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mXG4gKiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sXG4gKiBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcbiAqIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1NcbiAqIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUlxuICogQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSXG4gKiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTlxuICogQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuY29uc3Qga0Nib3JUYWdCaWdudW0gPSAyO1xuY29uc3Qga0Nib3JUYWdOZWdhdGl2ZUJpZ251bSA9IDM7XG4vKiBSRkMgODc0NiBUYWcgdmFsdWVzIGZvciB0eXBlZCBsaXR0bGUtZW5kaWFuIGFycmF5cyAqL1xuY29uc3Qga0Nib3JUYWdVaW50OCA9IDY0O1xuY29uc3Qga0Nib3JUYWdVaW50MTYgPSA2OTtcbmNvbnN0IGtDYm9yVGFnVWludDMyID0gNzA7XG5jb25zdCBrQ2JvclRhZ1VpbnQ2NCA9IDcxO1xuY29uc3Qga0Nib3JUYWdJbnQ4ID0gNzI7XG5jb25zdCBrQ2JvclRhZ0ludDE2ID0gNzc7XG5jb25zdCBrQ2JvclRhZ0ludDMyID0gNzg7XG5jb25zdCBrQ2JvclRhZ0ludDY0ID0gNzk7XG5jb25zdCBrQ2JvclRhZ0Zsb2F0MzIgPSA4NTtcbmNvbnN0IGtDYm9yVGFnRmxvYXQ2NCA9IDg2O1xuLyoqXG4gKiBDb252ZXJ0cyBhIENvbmNpc2UgQmluYXJ5IE9iamVjdCBSZXByZXNlbnRhdGlvbiAoQ0JPUikgYnVmZmVyIGludG8gYW4gb2JqZWN0LlxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBidWZmZXIgPSBuZXcgVWludDhBcnJheShbMHhhMiwgMHgwMSwgMHgwMiwgMHgwMywgMHgwNF0pLmJ1ZmZlcjtcbiAqIGNvbnN0IGRlY29kZWQgPSBkZWNvZGUoYnVmZmVyKTtcbiAqIGNvbnNvbGUubG9nKGRlY29kZWQpOyAvLyB7IFwiMVwiOiAyLCBcIjNcIjogNCB9XG4gKiBgYGBcbiAqXG4gKiBDQk9SIHZhbHVlcyBjYW4gYmUgd3JhcHBlZCBpbiBhIG51bWVyaWMgdGFnLiBUbyBoYW5kbGUgYW5kIHBvc3NpYmx5XG4gKiB0cmFuc2Zvcm0gdGFnZ2VkIHZhbHVlcywgcGFzcyBhIHRhZ2dlciBmdW5jdGlvbjpcbiAqXG4gKiBgYGBqc1xuICogY29uc3QgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoW1xuICogICAweGExLCAweDYzLCAweDc1LCAweDcyLCAweDZjLCAweGQ4LCAweDIwLCAweDcwLFxuICogICAweDY4LCAweDc0LCAweDc0LCAweDcwLCAweDNhLCAweDJmLCAweDJmLCAweDczLFxuICogICAweDY5LCAweDc0LCAweDY1LCAweDJlLCAweDYzLCAweDZmLCAweDZkLCAweDJmXG4gKiBdKTtcbiAqIGNvbnN0IGRlY29kZWQgPSBkZWNvZGUoYnVmZmVyLCAodGFnLCB2YWx1ZSkgPT4ge1xuICogICAgIGlmICh0YWcgPT09IDMyKSByZXR1cm4gbmV3IFVSTCh2YWx1ZSk7XG4gKiAgICAgcmV0dXJuIHZhbHVlO1xuICogfSk7XG4gKiBjb25zb2xlLmxvZyhkZWNvZGVkKTsgLy8geyB1cmw6IFVSTCB7IGhyZWY6IFwiaHR0cDovL3NpdGUuY29tL1wiIH0gfVxuICogYGBgXG4gKlxuICogRGVjb2RlZCBiYXNpYyB0eXBlcyBnZW5lcmFsbHkgbWF0Y2ggdGhlIGVxdWl2YWxlbnQgSmF2YVNjcmlwdCB0eXBlcy4gQnl0ZVxuICogc3RyaW5ncyBhcmUgZGVjb2RlZCB0byBVaW50OEFycmF5LlxuICpcbiAqIFRhZ2dlZCB2YWx1ZXMgYXJlIGxlZnQgYXMtaXMsIHdpdGggdGhlIGZvbGxvd2luZyBleGNlcHRpb25zOlxuICogLSBCaWdudW0gdmFsdWVzIChieXRlIHN0cmluZ3Mgd2l0aCB0YWcgMiBvciAzKSBhcmUgZGVjb2RlZCB0byBCaWdJbnRcbiAqIC0gTGl0dGxlLWVuZGlhbiB2ZXJzaW9ucyBvZiB0eXBlZCBhcnJheXMgYXMgZGVmaW5lZCBpbiBSRkMgODc0NiBhcmUgZGVjb2RlZFxuICogICB0byBKYXZhU2NyaXB0IHR5cGVkIGFycmF5c1xuICpcbiAqIEBwYXJhbSBkYXRhIEEgdmFsaWQgQ0JPUiBidWZmZXIuXG4gKiBAcGFyYW0gdGFnZ2VyIE9wdGlvbmFsIGNhbGxiYWNrIGZvciB0cmFuc2Zvcm1hdGlvbiBvZiB0YWdnZWQgdmFsdWVzLlxuICogQHBhcmFtIG9wdGlvbnMgT3B0aW9ucyBmb3IgZGVjb2RpbmcgYmVoYXZpb3IuXG4gKiBAcmV0dXJucyBUaGUgQ0JPUiBidWZmZXIgY29udmVydGVkIHRvIGEgSmF2YVNjcmlwdCB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gZGVjb2RlKGRhdGEsIHRhZ2dlciA9IChfLCB2YWx1ZSkgPT4gdmFsdWUsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHsgZGljdGlvbmFyeSA9ICdvYmplY3QnIH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IGRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KGRhdGEuYnVmZmVyLCBkYXRhLmJ5dGVPZmZzZXQsIGRhdGEuYnl0ZUxlbmd0aCk7XG4gICAgbGV0IG9mZnNldCA9IDA7XG4gICAgZnVuY3Rpb24gY29tbWl0UmVhZChsZW5ndGgsIHZhbHVlKSB7XG4gICAgICAgIG9mZnNldCArPSBsZW5ndGg7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVhZEFycmF5QnVmZmVyKGxlbmd0aCkge1xuICAgICAgICByZXR1cm4gY29tbWl0UmVhZChsZW5ndGgsIGRhdGEuc3ViYXJyYXkob2Zmc2V0LCBvZmZzZXQgKyBsZW5ndGgpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVhZEZsb2F0MTYoKSB7XG4gICAgICAgIGNvbnN0IFBPV18yXzI0ID0gNS45NjA0NjQ0Nzc1MzkwNjNlLTg7XG4gICAgICAgIGNvbnN0IHRlbXBBcnJheUJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcig0KTtcbiAgICAgICAgY29uc3QgdGVtcERhdGFWaWV3ID0gbmV3IERhdGFWaWV3KHRlbXBBcnJheUJ1ZmZlcik7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gcmVhZFVpbnQxNigpO1xuICAgICAgICBjb25zdCBzaWduID0gdmFsdWUgJiAweDgwMDA7XG4gICAgICAgIGxldCBleHBvbmVudCA9IHZhbHVlICYgMHg3YzAwO1xuICAgICAgICBjb25zdCBmcmFjdGlvbiA9IHZhbHVlICYgMHgwM2ZmO1xuICAgICAgICBpZiAoZXhwb25lbnQgPT09IDB4N2MwMClcbiAgICAgICAgICAgIGV4cG9uZW50ID0gMHhmZiA8PCAxMDtcbiAgICAgICAgZWxzZSBpZiAoZXhwb25lbnQgIT09IDApXG4gICAgICAgICAgICBleHBvbmVudCArPSAoMTI3IC0gMTUpIDw8IDEwO1xuICAgICAgICBlbHNlIGlmIChmcmFjdGlvbiAhPT0gMClcbiAgICAgICAgICAgIHJldHVybiAoc2lnbiA/IC0xIDogMSkgKiBmcmFjdGlvbiAqIFBPV18yXzI0O1xuICAgICAgICB0ZW1wRGF0YVZpZXcuc2V0VWludDMyKDAsIChzaWduIDw8IDE2KSB8IChleHBvbmVudCA8PCAxMykgfCAoZnJhY3Rpb24gPDwgMTMpKTtcbiAgICAgICAgcmV0dXJuIHRlbXBEYXRhVmlldy5nZXRGbG9hdDMyKDApO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZWFkRmxvYXQzMigpIHtcbiAgICAgICAgcmV0dXJuIGNvbW1pdFJlYWQoNCwgZGF0YVZpZXcuZ2V0RmxvYXQzMihvZmZzZXQpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVhZEZsb2F0NjQoKSB7XG4gICAgICAgIHJldHVybiBjb21taXRSZWFkKDgsIGRhdGFWaWV3LmdldEZsb2F0NjQob2Zmc2V0KSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlYWRVaW50OCgpIHtcbiAgICAgICAgcmV0dXJuIGNvbW1pdFJlYWQoMSwgZGF0YVtvZmZzZXRdKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVhZFVpbnQxNigpIHtcbiAgICAgICAgcmV0dXJuIGNvbW1pdFJlYWQoMiwgZGF0YVZpZXcuZ2V0VWludDE2KG9mZnNldCkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZWFkVWludDMyKCkge1xuICAgICAgICByZXR1cm4gY29tbWl0UmVhZCg0LCBkYXRhVmlldy5nZXRVaW50MzIob2Zmc2V0KSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlYWRVaW50NjQoKSB7XG4gICAgICAgIHJldHVybiBjb21taXRSZWFkKDgsIGRhdGFWaWV3LmdldEJpZ1VpbnQ2NChvZmZzZXQpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVhZEJyZWFrKCkge1xuICAgICAgICBpZiAoZGF0YVtvZmZzZXRdICE9PSAweGZmKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBvZmZzZXQgKz0gMTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlYWRMZW5ndGgoYWRkaXRpb25hbEluZm9ybWF0aW9uKSB7XG4gICAgICAgIGlmIChhZGRpdGlvbmFsSW5mb3JtYXRpb24gPCAyNClcbiAgICAgICAgICAgIHJldHVybiBhZGRpdGlvbmFsSW5mb3JtYXRpb247XG4gICAgICAgIGlmIChhZGRpdGlvbmFsSW5mb3JtYXRpb24gPT09IDI0KVxuICAgICAgICAgICAgcmV0dXJuIHJlYWRVaW50OCgpO1xuICAgICAgICBpZiAoYWRkaXRpb25hbEluZm9ybWF0aW9uID09PSAyNSlcbiAgICAgICAgICAgIHJldHVybiByZWFkVWludDE2KCk7XG4gICAgICAgIGlmIChhZGRpdGlvbmFsSW5mb3JtYXRpb24gPT09IDI2KVxuICAgICAgICAgICAgcmV0dXJuIHJlYWRVaW50MzIoKTtcbiAgICAgICAgaWYgKGFkZGl0aW9uYWxJbmZvcm1hdGlvbiA9PT0gMjcpIHtcbiAgICAgICAgICAgIGNvbnN0IGludGVnZXIgPSByZWFkVWludDY0KCk7XG4gICAgICAgICAgICBpZiAoaW50ZWdlciA8PSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUilcbiAgICAgICAgICAgICAgICByZXR1cm4gTnVtYmVyKGludGVnZXIpO1xuICAgICAgICAgICAgcmV0dXJuIGludGVnZXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFkZGl0aW9uYWxJbmZvcm1hdGlvbiA9PT0gMzEpXG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ0JPUkVycm9yOiBJbnZhbGlkIGxlbmd0aCBlbmNvZGluZycpO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZWFkSW5kZWZpbml0ZVN0cmluZ0xlbmd0aChtYWpvclR5cGUpIHtcbiAgICAgICAgY29uc3QgaW5pdGlhbEJ5dGUgPSByZWFkVWludDgoKTtcbiAgICAgICAgaWYgKGluaXRpYWxCeXRlID09PSAweGZmKVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICBjb25zdCBsZW5ndGggPSByZWFkTGVuZ3RoKGluaXRpYWxCeXRlICYgMHgxZik7XG4gICAgICAgIGlmIChsZW5ndGggPCAwIHx8IGluaXRpYWxCeXRlID4+IDUgIT09IG1ham9yVHlwZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDQk9SRXJyb3I6IEludmFsaWQgaW5kZWZpbml0ZSBsZW5ndGggZWxlbWVudCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOdW1iZXIobGVuZ3RoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYXBwZW5kVXRmMTZEYXRhKHV0ZjE2ZGF0YSwgbGVuZ3RoKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IHJlYWRVaW50OCgpO1xuICAgICAgICAgICAgaWYgKHZhbHVlICYgMHg4MCkge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4ZTApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAoKHZhbHVlICYgMHgxZikgPDwgNikgfCAocmVhZFVpbnQ4KCkgJiAweDNmKTtcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoIC09IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlIDwgMHhmMCkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAoKHZhbHVlICYgMHgwZikgPDwgMTIpIHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKHJlYWRVaW50OCgpICYgMHgzZikgPDwgNikgfFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyZWFkVWludDgoKSAmIDB4M2YpO1xuICAgICAgICAgICAgICAgICAgICBsZW5ndGggLT0gMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID1cbiAgICAgICAgICAgICAgICAgICAgICAgICgodmFsdWUgJiAweDA3KSA8PCAxOCkgfFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICgocmVhZFVpbnQ4KCkgJiAweDNmKSA8PCAxMikgfFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICgocmVhZFVpbnQ4KCkgJiAweDNmKSA8PCA2KSB8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHJlYWRVaW50OCgpICYgMHgzZik7XG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aCAtPSAzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4MTAwMDApIHtcbiAgICAgICAgICAgICAgICB1dGYxNmRhdGEucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSAtPSAweDEwMDAwO1xuICAgICAgICAgICAgICAgIHV0ZjE2ZGF0YS5wdXNoKDB4ZDgwMCB8ICh2YWx1ZSA+PiAxMCkpO1xuICAgICAgICAgICAgICAgIHV0ZjE2ZGF0YS5wdXNoKDB4ZGMwMCB8ICh2YWx1ZSAmIDB4M2ZmKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZGVjb2RlSXRlbSgpIHtcbiAgICAgICAgY29uc3QgaW5pdGlhbEJ5dGUgPSByZWFkVWludDgoKTtcbiAgICAgICAgY29uc3QgbWFqb3JUeXBlID0gaW5pdGlhbEJ5dGUgPj4gNTtcbiAgICAgICAgY29uc3QgYWRkaXRpb25hbEluZm9ybWF0aW9uID0gaW5pdGlhbEJ5dGUgJiAweDFmO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgbGV0IGxlbmd0aDtcbiAgICAgICAgaWYgKG1ham9yVHlwZSA9PT0gNykge1xuICAgICAgICAgICAgc3dpdGNoIChhZGRpdGlvbmFsSW5mb3JtYXRpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDI1OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZEZsb2F0MTYoKTtcbiAgICAgICAgICAgICAgICBjYXNlIDI2OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZEZsb2F0MzIoKTtcbiAgICAgICAgICAgICAgICBjYXNlIDI3OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZEZsb2F0NjQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZW5ndGggPSByZWFkTGVuZ3RoKGFkZGl0aW9uYWxJbmZvcm1hdGlvbik7XG4gICAgICAgIGlmIChsZW5ndGggPCAwICYmIChtYWpvclR5cGUgPCAyIHx8IDYgPCBtYWpvclR5cGUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NCT1JFcnJvcjogSW52YWxpZCBsZW5ndGgnKTtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKG1ham9yVHlwZSkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIHJldHVybiBsZW5ndGg7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBsZW5ndGggPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMSAtIGxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xbiAtIGxlbmd0aDtcbiAgICAgICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgICAgICAgIGlmIChsZW5ndGggPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGxldCBmdWxsQXJyYXlMZW5ndGggPSAwO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKGxlbmd0aCA9IHJlYWRJbmRlZmluaXRlU3RyaW5nTGVuZ3RoKG1ham9yVHlwZSkpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGxBcnJheUxlbmd0aCArPSBsZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50cy5wdXNoKHJlYWRBcnJheUJ1ZmZlcihsZW5ndGgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmdWxsQXJyYXkgPSBuZXcgVWludDhBcnJheShmdWxsQXJyYXlMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZnVsbEFycmF5T2Zmc2V0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmdWxsQXJyYXkuc2V0KGVsZW1lbnRzW2ldLCBmdWxsQXJyYXlPZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVsbEFycmF5T2Zmc2V0ICs9IGVsZW1lbnRzW2ldLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVsbEFycmF5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVhZEFycmF5QnVmZmVyKGxlbmd0aCkuc2xpY2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgMzoge1xuICAgICAgICAgICAgICAgIC8qIENhbid0IHVzZSBUZXh0RGVjb2Rlci5kZWNvZGUoKSBiZWNhdXNlIG5vdCBhbGwgYnJvd3NlcnNcbiAgICAgICAgICAgICAgICAgKiBzdXBwb3J0IGNhbGxpbmcgaXQgd2l0aCBhbiB1bmRlcmx5aW5nIFNoYXJlZEFycmF5QnVmZmVyIHlldC5cbiAgICAgICAgICAgICAgICAgKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3doYXR3Zy9lbmNvZGluZy9pc3N1ZXMvMTcyICovXG4gICAgICAgICAgICAgICAgLyoqIEB0b2RvIFJlLWV2YWx1YXRlIGJyb3dzZXIgc3VwcG9ydCAqL1xuICAgICAgICAgICAgICAgIGNvbnN0IHV0ZjE2ZGF0YSA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChsZW5ndGggPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICgobGVuZ3RoID0gcmVhZEluZGVmaW5pdGVTdHJpbmdMZW5ndGgobWFqb3JUeXBlKSkgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kVXRmMTZEYXRhKHV0ZjE2ZGF0YSwgbGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kVXRmMTZEYXRhKHV0ZjE2ZGF0YSwgbGVuZ3RoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHN0cmluZyA9ICcnO1xuICAgICAgICAgICAgICAgIGNvbnN0IERFQ09ERV9DSFVOS19TSVpFID0gODE5MjtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdXRmMTZkYXRhLmxlbmd0aDsgaSArPSBERUNPREVfQ0hVTktfU0laRSkge1xuICAgICAgICAgICAgICAgICAgICBzdHJpbmcgKz0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCB1dGYxNmRhdGEuc2xpY2UoaSwgaSArIERFQ09ERV9DSFVOS19TSVpFKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIDQ6IHtcbiAgICAgICAgICAgICAgICBsZXQgcmV0QXJyYXk7XG4gICAgICAgICAgICAgICAgaWYgKGxlbmd0aCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0QXJyYXkgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCFyZWFkQnJlYWsoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0QXJyYXkucHVzaChkZWNvZGVJdGVtKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXRBcnJheSA9IG5ldyBBcnJheShsZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldEFycmF5W2ldID0gZGVjb2RlSXRlbSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXRBcnJheTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgNToge1xuICAgICAgICAgICAgICAgIGlmIChkaWN0aW9uYXJ5ID09PSAnbWFwJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXRNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGggfHwgKGxlbmd0aCA8IDAgJiYgIXJlYWRCcmVhaygpKTsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBkZWNvZGVJdGVtKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmV0TWFwLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDQk9SRXJyb3I6IER1cGxpY2F0ZSBrZXkgZW5jb3VudGVyZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldE1hcC5zZXQoa2V5LCBkZWNvZGVJdGVtKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXRNYXA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJldE9iamVjdCA9IHt9O1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGggfHwgKGxlbmd0aCA8IDAgJiYgIXJlYWRCcmVhaygpKTsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGRlY29kZUl0ZW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyZXRPYmplY3QsIGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ0JPUkVycm9yOiBEdXBsaWNhdGUga2V5IGVuY291bnRlcmVkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0T2JqZWN0W2tleV0gPSBkZWNvZGVJdGVtKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXRPYmplY3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIDY6IHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGRlY29kZUl0ZW0oKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YWcgPSBsZW5ndGg7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBrQ2JvclRhZ0JpZ251bTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2Uga0Nib3JUYWdOZWdhdGl2ZUJpZ251bTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbnVtID0gdmFsdWUucmVkdWNlKChhY2MsIG4pID0+IChhY2MgPDwgOG4pICsgQmlnSW50KG4pLCAwbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhZyA9PSBrQ2JvclRhZ05lZ2F0aXZlQmlnbnVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bSA9IC0xbiAtIG51bTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIExpdHRsZS1lbmRpYW4gdHlwZWQgYXJyYXlzIChSRkMgODc0NikgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2Uga0Nib3JUYWdVaW50ODpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGtDYm9yVGFnSW50ODpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEludDhBcnJheSh2YWx1ZS5idWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBrQ2JvclRhZ1VpbnQxNjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQxNkFycmF5KHZhbHVlLmJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGtDYm9yVGFnSW50MTY6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnQxNkFycmF5KHZhbHVlLmJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGtDYm9yVGFnVWludDMyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVWludDMyQXJyYXkodmFsdWUuYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2Uga0Nib3JUYWdJbnQzMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEludDMyQXJyYXkodmFsdWUuYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2Uga0Nib3JUYWdVaW50NjQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBCaWdVaW50NjRBcnJheSh2YWx1ZS5idWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBrQ2JvclRhZ0ludDY0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQmlnSW50NjRBcnJheSh2YWx1ZS5idWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBrQ2JvclRhZ0Zsb2F0MzI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkodmFsdWUuYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2Uga0Nib3JUYWdGbG9hdDY0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRmxvYXQ2NEFycmF5KHZhbHVlLmJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhZ2dlcih0YWcsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDIwOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDIxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGVuZ3RoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZXQgPSBkZWNvZGVJdGVtKCk7XG4gICAgaWYgKG9mZnNldCAhPT0gZGF0YS5ieXRlTGVuZ3RoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ0JPUkVycm9yOiBSZW1haW5pbmcgYnl0ZXMnKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cbmV4cG9ydCBjb25zdCBDQk9SID0ge1xuICAgIGRlY29kZSxcbn07XG4iLCAiaW1wb3J0IHsgTG9nVGFnIH0gZnJvbSAnLi9pbmRleC5qcyc7XG5pbXBvcnQgeyBUeXBlLCBkZWZhdWx0UHJvcGVydHlDbG9uZXIgfSBmcm9tICcuL3Byb3BlcnR5LmpzJztcbmltcG9ydCB7IFJldGFpbkVtaXR0ZXIgfSBmcm9tICcuL3V0aWxzL2V2ZW50LmpzJztcbmltcG9ydCB7IENCT1IgfSBmcm9tICcuL3V0aWxzL2Nib3IuanMnO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnLi91dGlscy9sb2dnZXIuanMnO1xuaW1wb3J0IHsgaW5oZXJpdFByb3BlcnRpZXMsIENvbXBvbmVudCwgQnJva2VuQ29tcG9uZW50LCBYUiwgfSBmcm9tICcuL3dvbmRlcmxhbmQuanMnO1xuLyoqXG4gKiBEZWZhdWx0IGNvbXBvbmVudCBwYXJhbWV0ZXIgdmFsdWUgcGVyIHR5cGUuXG4gKi9cbmNvbnN0IF9jb21wb25lbnREZWZhdWx0cyA9IG5ldyBNYXAoW1xuICAgIFtUeXBlLkJvb2wsIGZhbHNlXSxcbiAgICBbVHlwZS5JbnQsIDBdLFxuICAgIFtUeXBlLkZsb2F0LCAwLjBdLFxuICAgIFtUeXBlLlN0cmluZywgJyddLFxuICAgIFtUeXBlLkVudW0sIHVuZGVmaW5lZF0sXG4gICAgW1R5cGUuT2JqZWN0LCBudWxsXSxcbiAgICBbVHlwZS5NZXNoLCBudWxsXSxcbiAgICBbVHlwZS5UZXh0dXJlLCBudWxsXSxcbiAgICBbVHlwZS5NYXRlcmlhbCwgbnVsbF0sXG4gICAgW1R5cGUuQW5pbWF0aW9uLCBudWxsXSxcbiAgICBbVHlwZS5Ta2luLCBudWxsXSxcbiAgICBbVHlwZS5Db2xvciwgRmxvYXQzMkFycmF5LmZyb20oWzAuMCwgMC4wLCAwLjAsIDEuMF0pXSxcbiAgICBbVHlwZS5WZWN0b3IyLCBGbG9hdDMyQXJyYXkuZnJvbShbMC4wLCAwLjBdKV0sXG4gICAgW1R5cGUuVmVjdG9yMywgRmxvYXQzMkFycmF5LmZyb20oWzAuMCwgMC4wLCAwLjBdKV0sXG4gICAgW1R5cGUuVmVjdG9yNCwgRmxvYXQzMkFycmF5LmZyb20oWzAuMCwgMC4wLCAwLjAsIDAuMF0pXSxcbl0pO1xuLyoqXG4gKiBTZXR1cCB0aGUgZGVmYXVsdHMgdmFsdWUgb2YgdGhlIHByb3BlcnRpZXMgb24gYSBnaXZlblxuICogY29tcG9uZW50IGNsYXNzLlxuICpcbiAqIEBwYXJhbSBjdG9yIFRoZSBjb21wb25lbnQgY2xhc3NcbiAqL1xuZnVuY3Rpb24gX3NldHVwRGVmYXVsdHMoY3Rvcikge1xuICAgIGZvciAoY29uc3QgbmFtZSBpbiBjdG9yLlByb3BlcnRpZXMpIHtcbiAgICAgICAgY29uc3QgcCA9IGN0b3IuUHJvcGVydGllc1tuYW1lXTtcbiAgICAgICAgaWYgKHAudHlwZSA9PT0gVHlwZS5FbnVtKSB7XG4gICAgICAgICAgICAvKiBFbnVtIGRlZmF1bHQgY2FuIGJlIGEgc3RyaW5nIG9yIGFuIGluZGV4LiBDb252ZXJ0IHRvIGFuZC9vclxuICAgICAgICAgICAgICogc2FuaXR5LWNoZWNrIHRoZSBpbmRleC4gKi9cbiAgICAgICAgICAgIGlmIChwLnZhbHVlcz8ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgLyogRG9uJ3QgdHJ5IHRvIGxvb2sgdXAgdGhlIGRlZmF1bHQgaWYgdGhlIHVzZXIgc3BlY2lmaWVkIGFcbiAgICAgICAgICAgICAgICAgKiBudW1iZXIgb3Igd2UgYWxyZWFkeSBjb252ZXJ0ZWQgdG8gb25lLiAqL1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcC5kZWZhdWx0ICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAvKiBJZiB1bmRlZmluZWQsIG1pc3NpbmcgZWxlbWVudCBvciB3cm9uZyB0eXBlIHRoaXMgcmV0dXJuc1xuICAgICAgICAgICAgICAgICAgICAgKiAtMSB3aGljaCBiZWNvbWVzIDAgYmVsb3cuIFRoaXMgbWF0Y2hlcyBlZGl0b3IgYmVoYXZpb3IuICovXG4gICAgICAgICAgICAgICAgICAgIHAuZGVmYXVsdCA9IHAudmFsdWVzLmluZGV4T2YocC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHAuZGVmYXVsdCA8IDAgfHwgcC5kZWZhdWx0ID49IHAudmFsdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBwLmRlZmF1bHQgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8qIFRoZXJlJ3Mgbm8gaW5kZXggdmFsdWUgdGhhdCBtYWtlcyBzZW5zZSAqL1xuICAgICAgICAgICAgICAgIHAuZGVmYXVsdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgocC50eXBlID09PSBUeXBlLkNvbG9yIHx8XG4gICAgICAgICAgICBwLnR5cGUgPT09IFR5cGUuVmVjdG9yMiB8fFxuICAgICAgICAgICAgcC50eXBlID09PSBUeXBlLlZlY3RvcjMgfHxcbiAgICAgICAgICAgIHAudHlwZSA9PT0gVHlwZS5WZWN0b3I0KSAmJlxuICAgICAgICAgICAgQXJyYXkuaXNBcnJheShwLmRlZmF1bHQpKSB7XG4gICAgICAgICAgICAvKiBEZWZhdWx0cyBwcm92aWRlZCBieSB1c2VyIGNvZGUgYXJlIGN1cnJlbnRseSBhbHdheXMgYSBzdGFuZGFyZFxuICAgICAgICAgICAgICogYXJyYXksIGJ1dCBiZWNvbWUgYSB0eXBlZCBhcnJheSBvbiB0aGUgcHJvcGVydHkgKi9cbiAgICAgICAgICAgIHAuZGVmYXVsdCA9IEZsb2F0MzJBcnJheS5mcm9tKHAuZGVmYXVsdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocC5kZWZhdWx0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsb25lciA9IHAuY2xvbmVyID8/IGRlZmF1bHRQcm9wZXJ0eUNsb25lcjtcbiAgICAgICAgICAgIHAuZGVmYXVsdCA9IGNsb25lci5jbG9uZShwLnR5cGUsIF9jb21wb25lbnREZWZhdWx0cy5nZXQocC50eXBlKSk7XG4gICAgICAgIH1cbiAgICAgICAgY3Rvci5wcm90b3R5cGVbbmFtZV0gPSBwLmRlZmF1bHQ7XG4gICAgfVxufVxuLyoqXG4gKiBEZXRlcm1pbmVzIGEgZml4ZWQgb3JkZXIgZm9yIHByb3BlcnR5IGF0dHJpYnV0ZXMgdXNlZCBmb3IgZGVzZXJpYWxpemF0aW9uLlxuICpcbiAqIEBwYXJhbSBjdG9yIFRoZSBjb21wb25lbnQgY2xhc3NcbiAqL1xuZnVuY3Rpb24gX3NldFByb3BlcnR5T3JkZXIoY3Rvcikge1xuICAgIGN0b3IuX3Byb3BlcnR5T3JkZXIgPSBjdG9yLmhhc093blByb3BlcnR5KCdQcm9wZXJ0aWVzJylcbiAgICAgICAgPyBPYmplY3Qua2V5cyhjdG9yLlByb3BlcnRpZXMpLnNvcnQoKVxuICAgICAgICA6IFtdO1xufVxuLyoqXG4gKiBMb3ctbGV2ZWwgd3JhcHBlciB0byBpbnRlcmFjdCB3aXRoIHRoZSBXZWJBc3NlbWJseSBjb2RlLlxuICpcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGNsYXNzIFdBU00ge1xuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gd29ya2VyIGZpZWxkLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqL1xuICAgIHdvcmtlciA9ICcnO1xuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gd2FzbSBmaWVsZC5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICB3YXNtID0gbnVsbDtcbiAgICAvKipcbiAgICAgKiBFbXNjcmlwdGVuIGNhbnZhcy5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICBjYW52YXMgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIFdlYkdQVSBkZXZpY2UuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgcHJlaW5pdGlhbGl6ZWRXZWJHUFVEZXZpY2UgPSBudWxsO1xuICAgIC8qKiBDdXJyZW50IFdlYlhSICAqL1xuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gV2ViWFIgc2Vzc2lvbi5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICB3ZWJ4cl9zZXNzaW9uID0gbnVsbDtcbiAgICAvKipcbiAgICAgKiBFbXNjcmlwdGVuIFdlYlhSIHJlcXVlc3Qgc2Vzc2lvbiBjYWxsYmFjay5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICB3ZWJ4cl9yZXF1ZXN0U2Vzc2lvbiA9IG51bGw7XG4gICAgLyoqXG4gICAgICogRW1zY3JpcHRlbiBXZWJYUiBvZmZlciBzZXNzaW9uIGNhbGxiYWNrLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqL1xuICAgIHdlYnhyX29mZmVyU2Vzc2lvbiA9IG51bGw7XG4gICAgLyoqXG4gICAgICogRW1zY3JpcHRlbiBXZWJYUiBmcmFtZS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICB3ZWJ4cl9mcmFtZSA9IG51bGw7XG4gICAgLyoqXG4gICAgICogRW1zY3JpcHRlbiBjdXJyZW50IFdlYlhSIHJlZmVyZW5jZSBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICB3ZWJ4cl9yZWZTcGFjZSA9IG51bGw7XG4gICAgLyoqXG4gICAgICogRW1zY3JpcHRlbiBXZWJYUiByZWZlcmVuY2Ugc3BhY2VzLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqL1xuICAgIHdlYnhyX3JlZlNwYWNlcyA9IG51bGw7XG4gICAgLyoqXG4gICAgICogRW1zY3JpcHRlbiBXZWJYUiBjdXJyZW50IHJlZmVyZW5jZSBzcGFjZSB0eXBlLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqL1xuICAgIHdlYnhyX3JlZlNwYWNlVHlwZSA9IG51bGw7XG4gICAgLyoqXG4gICAgICogRW1zY3JpcHRlbiBXZWJYUiBHTCBwcm9qZWN0aW9uIGxheWVyLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqL1xuICAgIHdlYnhyX2Jhc2VMYXllciA9IG51bGw7XG4gICAgLyoqXG4gICAgICogRW1zY3JpcHRlbiBXZWJYUiBmcmFtZWJ1ZmZlciBzY2FsZSBmYWN0b3IuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgd2VieHJfZnJhbWVidWZmZXJTY2FsZUZhY3RvciA9IDEuMDtcbiAgICAvKipcbiAgICAgKiBFbXNjcmlwdGVuIFdlYlhSIGZyYW1lYnVmZmVyKHMpLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqL1xuICAgIC8qIHdlYnhyX2ZibyB3aWxsIG5vdCBnZXQgb3ZlcndyaXR0ZW4gaWYgd2UgYXJlIHJlbmRlcmluZyB0byB0aGVcbiAgICAgKiBkZWZhdWx0IGZyYW1lYnVmZmVyLCBlLmcuLCB3aGVuIHVzaW5nIFdlYlhSIGVtdWxhdG9yLiAqL1xuICAgIHdlYnhyX2ZibyA9IDA7XG4gICAgLyoqXG4gICAgICogQ29udmVydCBhIFdBU00gbWVtb3J5IHZpZXcgdG8gYSBKYXZhU2NyaXB0IHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwdHIgUG9pbnRlciBzdGFydFxuICAgICAqIEBwYXJhbSBwdHJFbmQgUG9pbnRlciBlbmRcbiAgICAgKiBAcmV0dXJucyBKYXZhU2NyaXB0IHN0cmluZ1xuICAgICAqL1xuICAgIFVURjhWaWV3VG9TdHJpbmc7XG4gICAgLyoqIExvZ2dlciBpbnN0YW5jZS4gKi9cbiAgICBfbG9nID0gbmV3IExvZ2dlcigpO1xuICAgIC8qKiBJZiBgdHJ1ZWAsIGxvZ3Mgd2lsbCBub3Qgc3BhbSB0aGUgY29uc29sZSBvbiBlcnJvci4gKi9cbiAgICBfZGVhY3RpdmF0ZV9jb21wb25lbnRfb25fZXJyb3IgPSBmYWxzZTtcbiAgICAvKiogVGVtcG9yYXJ5IG1lbW9yeSBwb2ludGVyLiAqL1xuICAgIF90ZW1wTWVtID0gbnVsbDtcbiAgICAvKiogVGVtcG9yYXJ5IG1lbW9yeSBzaXplLiAqL1xuICAgIF90ZW1wTWVtU2l6ZSA9IDA7XG4gICAgLyoqIFRlbXBvcmFyeSBmbG9hdCBtZW1vcnkgdmlldy4gKi9cbiAgICBfdGVtcE1lbUZsb2F0ID0gbnVsbDtcbiAgICAvKiogVGVtcG9yYXJ5IGludCBtZW1vcnkgdmlldy4gKi9cbiAgICBfdGVtcE1lbUludCA9IG51bGw7XG4gICAgLyoqIFRlbXBvcmFyeSB1aW50OCBtZW1vcnkgdmlldy4gKi9cbiAgICBfdGVtcE1lbVVpbnQ4ID0gbnVsbDtcbiAgICAvKiogVGVtcG9yYXJ5IHVpbnQzMiBtZW1vcnkgdmlldy4gKi9cbiAgICBfdGVtcE1lbVVpbnQzMiA9IG51bGw7XG4gICAgLyoqIFRlbXBvcmFyeSB1aW50MTYgbWVtb3J5IHZpZXcuICovXG4gICAgX3RlbXBNZW1VaW50MTYgPSBudWxsO1xuICAgIC8qKiBMb2FkaW5nIHNjcmVlbiAuYmluIGZpbGUgZGF0YSAqL1xuICAgIF9sb2FkaW5nU2NyZWVuID0gbnVsbDtcbiAgICAvKiogTGlzdCBvZiBjYWxsYmFja3MgdHJpZ2dlcmVkIHdoZW4gdGhlIHNjZW5lIGlzIGxvYWRlZC4gKi9cbiAgICBfc2NlbmVMb2FkZWRDYWxsYmFjayA9IFtdO1xuICAgIC8qKiBJbWFnZSBjYWNoZS4gKi9cbiAgICBfaW1hZ2VzID0gW251bGxdO1xuICAgIC8qKiBDb21wb25lbnQgaW5zdGFuY2VzLiAqL1xuICAgIF9jb21wb25lbnRzID0gbnVsbDtcbiAgICAvKiogQ29tcG9uZW50IFR5cGUgaW5mby4gKi9cbiAgICBfY29tcG9uZW50VHlwZXMgPSBbXTtcbiAgICAvKiogSW5kZXggcGVyIGNvbXBvbmVudCB0eXBlIG5hbWUuICovXG4gICAgX2NvbXBvbmVudFR5cGVJbmRpY2VzID0ge307XG4gICAgLyoqIFdvbmRlcmxhbmQgZW5naW5lIGluc3RhbmNlLiAqL1xuICAgIF9lbmdpbmUgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIGB0cnVlYCBpZiB0aGlzIHJ1bnRpbWUgaXMgdXNpbmcgcGh5c3guXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgX3dpdGhQaHlzWCA9IGZhbHNlO1xuICAgIC8qKiBEZWNvZGVyIGZvciBVVEY4IGBBcnJheUJ1ZmZlcmAgdG8gSmF2YVNjcmlwdCBzdHJpbmcuICovXG4gICAgX3V0ZjhEZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCd1dGY4Jyk7XG4gICAgLyoqXG4gICAgICogUmVnaXN0cmF0aW9uIGluZGV4IG9mIHtAbGluayBCcm9rZW5Db21wb25lbnR9LlxuICAgICAqXG4gICAgICogVGhpcyBpcyB1c2VkIHRvIHJldHVybiBkdW1teSBpbnN0YW5jZXMgd2hlbiBhIGNvbXBvbmVudFxuICAgICAqIGlzbid0IHJlZ2lzdGVyZWQuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX2Jyb2tlbkNvbXBvbmVudEluZGV4ID0gMDtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFdlYkFzc2VtYmx5IDw+IEFQSSBicmlkZ2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGhyZWFkcyBgdHJ1ZWAgaWYgdGhlIHJ1bnRpbWUgdXNlZCBoYXMgdGhyZWFkcyBzdXBwb3J0XG4gICAgICovXG4gICAgY29uc3RydWN0b3IodGhyZWFkcykge1xuICAgICAgICBpZiAodGhyZWFkcykge1xuICAgICAgICAgICAgdGhpcy5VVEY4Vmlld1RvU3RyaW5nID0gKHMsIGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXMpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fdXRmOERlY29kZXIuZGVjb2RlKHRoaXMuSEVBUFU4LnNsaWNlKHMsIGUpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLlVURjhWaWV3VG9TdHJpbmcgPSAocywgZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghcylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl91dGY4RGVjb2Rlci5kZWNvZGUodGhpcy5IRUFQVTguc3ViYXJyYXkocywgZSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9icm9rZW5Db21wb25lbnRJbmRleCA9IHRoaXMuX3JlZ2lzdGVyQ29tcG9uZW50KEJyb2tlbkNvbXBvbmVudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0IHRoZSBjYWNoZSBvZiB0aGUgbGlicmFyeS5cbiAgICAgKlxuICAgICAqIEBub3RlIFNob3VsZCBvbmx5IGJlIGNhbGxlZCB3aGVuIHRlYXJpbmcgZG93biB0aGUgcnVudGltZS5cbiAgICAgKi9cbiAgICByZXNldCgpIHtcbiAgICAgICAgLyogQ2FsbGVkIGZpcnN0IHRvIHBlcmZvcm0gY2xlYW51cC4gKi9cbiAgICAgICAgdGhpcy5fd2xfcmVzZXQoKTtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50cyA9IG51bGw7XG4gICAgICAgIHRoaXMuX2ltYWdlcy5sZW5ndGggPSAxO1xuICAgICAgICB0aGlzLmFsbG9jYXRlVGVtcE1lbW9yeSgxMDI0KTtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50VHlwZXMgPSBbXTtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50VHlwZUluZGljZXMgPSB7fTtcbiAgICAgICAgdGhpcy5fYnJva2VuQ29tcG9uZW50SW5kZXggPSB0aGlzLl9yZWdpc3RlckNvbXBvbmVudChCcm9rZW5Db21wb25lbnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3Mgd2hldGhlciB0aGUgZ2l2ZW4gY29tcG9uZW50IGlzIHJlZ2lzdGVyZWQgb3Igbm90LlxuICAgICAqXG4gICAgICogQHBhcmFtIGN0b3IgIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgY29tcG9uZW50IHR5cGVuYW1lIChlLmcuLCBgJ2N1cnNvci1jb21wb25lbnQnYCkuXG4gICAgICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBjb21wb25lbnQgaXMgcmVnaXN0ZXJlZCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICovXG4gICAgaXNSZWdpc3RlcmVkKHR5cGUpIHtcbiAgICAgICAgcmV0dXJuIHR5cGUgaW4gdGhpcy5fY29tcG9uZW50VHlwZUluZGljZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVyIGEgbGVnYWN5IGNvbXBvbmVudCBpbiB0aGlzIEVtc2NyaXB0ZW4gaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHlwZU5hbWUgVGhlIG5hbWUgb2YgdGhlIGNvbXBvbmVudC5cbiAgICAgKiBAcGFyYW0gcGFyYW1zIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBwYXJhbWV0ZXJzIChwcm9wZXJ0aWVzKS5cbiAgICAgKiBAcGFyYW0gb2JqZWN0IFRoZSBvYmplY3QncyBwcm90b3R5cGUuXG4gICAgICogQHJldHVybnMgVGhlIHJlZ2lzdHJhdGlvbiBpbmRleFxuICAgICAqL1xuICAgIF9yZWdpc3RlckNvbXBvbmVudExlZ2FjeSh0eXBlTmFtZSwgcGFyYW1zLCBvYmplY3QpIHtcbiAgICAgICAgY29uc3QgY3RvciA9IGNsYXNzIEN1c3RvbUNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgICAgIH07XG4gICAgICAgIGN0b3IuVHlwZU5hbWUgPSB0eXBlTmFtZTtcbiAgICAgICAgY3Rvci5Qcm9wZXJ0aWVzID0gcGFyYW1zO1xuICAgICAgICBPYmplY3QuYXNzaWduKGN0b3IucHJvdG90eXBlLCBvYmplY3QpO1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVnaXN0ZXJDb21wb25lbnQoY3Rvcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVyIGEgY2xhc3MgY29tcG9uZW50IGluIHRoaXMgRW1zY3JpcHRlbiBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjdG9yIFRoZSBjbGFzcyB0byByZWdpc3Rlci5cbiAgICAgKiBAcmV0dXJucyBUaGUgcmVnaXN0cmF0aW9uIGluZGV4LlxuICAgICAqL1xuICAgIF9yZWdpc3RlckNvbXBvbmVudChjdG9yKSB7XG4gICAgICAgIGlmICghY3Rvci5UeXBlTmFtZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbm8gbmFtZSBwcm92aWRlZCBmb3IgY29tcG9uZW50LicpO1xuICAgICAgICBpZiAoIWN0b3IucHJvdG90eXBlLl90cmlnZ2VySW5pdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGByZWdpc3RlckNvbXBvbmVudCgpOiBDb21wb25lbnQgJHtjdG9yLlR5cGVOYW1lfSBtdXN0IGV4dGVuZCBDb21wb25lbnRgKTtcbiAgICAgICAgfVxuICAgICAgICBpbmhlcml0UHJvcGVydGllcyhjdG9yKTtcbiAgICAgICAgX3NldHVwRGVmYXVsdHMoY3Rvcik7XG4gICAgICAgIF9zZXRQcm9wZXJ0eU9yZGVyKGN0b3IpO1xuICAgICAgICBjb25zdCB0eXBlSW5kZXggPSBjdG9yLlR5cGVOYW1lIGluIHRoaXMuX2NvbXBvbmVudFR5cGVJbmRpY2VzXG4gICAgICAgICAgICA/IHRoaXMuX2NvbXBvbmVudFR5cGVJbmRpY2VzW2N0b3IuVHlwZU5hbWVdXG4gICAgICAgICAgICA6IHRoaXMuX2NvbXBvbmVudFR5cGVzLmxlbmd0aDtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50VHlwZXNbdHlwZUluZGV4XSA9IGN0b3I7XG4gICAgICAgIHRoaXMuX2NvbXBvbmVudFR5cGVJbmRpY2VzW2N0b3IuVHlwZU5hbWVdID0gdHlwZUluZGV4O1xuICAgICAgICBpZiAoY3RvciA9PT0gQnJva2VuQ29tcG9uZW50KVxuICAgICAgICAgICAgcmV0dXJuIHR5cGVJbmRleDtcbiAgICAgICAgdGhpcy5fbG9nLmluZm8oTG9nVGFnLkVuZ2luZSwgJ1JlZ2lzdGVyZWQgY29tcG9uZW50JywgY3Rvci5UeXBlTmFtZSwgYChjbGFzcyAke2N0b3IubmFtZX0pYCwgJ3dpdGggaW5kZXgnLCB0eXBlSW5kZXgpO1xuICAgICAgICBpZiAoY3Rvci5vblJlZ2lzdGVyKVxuICAgICAgICAgICAgY3Rvci5vblJlZ2lzdGVyKHRoaXMuX2VuZ2luZSk7XG4gICAgICAgIHJldHVybiB0eXBlSW5kZXg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFsbG9jYXRlIHRoZSByZXF1ZXN0ZWQgYW1vdW50IG9mIHRlbXBvcmFyeSBtZW1vcnlcbiAgICAgKiBpbiB0aGlzIFdBU00gaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2l6ZSBUaGUgbnVtYmVyIG9mIGJ5dGVzIHRvIGFsbG9jYXRlXG4gICAgICovXG4gICAgYWxsb2NhdGVUZW1wTWVtb3J5KHNpemUpIHtcbiAgICAgICAgdGhpcy5fbG9nLmluZm8oTG9nVGFnLkVuZ2luZSwgJ0FsbG9jYXRpbmcgdGVtcCBtZW06Jywgc2l6ZSk7XG4gICAgICAgIHRoaXMuX3RlbXBNZW1TaXplID0gc2l6ZTtcbiAgICAgICAgaWYgKHRoaXMuX3RlbXBNZW0pXG4gICAgICAgICAgICB0aGlzLl9mcmVlKHRoaXMuX3RlbXBNZW0pO1xuICAgICAgICB0aGlzLl90ZW1wTWVtID0gdGhpcy5fbWFsbG9jKHRoaXMuX3RlbXBNZW1TaXplKTtcbiAgICAgICAgdGhpcy51cGRhdGVUZW1wTWVtb3J5KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEB0b2RvOiBEZWxldGUgdGhpcyBhbmQgb25seSBrZWVwIGBhbGxvY2F0ZVRlbXBNZW1vcnlgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2l6ZSBOdW1iZXIgb2YgYnl0ZXMgdG8gYWxsb2NhdGVcbiAgICAgKi9cbiAgICByZXF1aXJlVGVtcE1lbShzaXplKSB7XG4gICAgICAgIGlmICh0aGlzLl90ZW1wTWVtU2l6ZSA+PSBzaXplKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAvKiBHcm93IGluIDFrYiBpbmNyZW1lbnRzICovXG4gICAgICAgIHRoaXMuYWxsb2NhdGVUZW1wTWVtb3J5KE1hdGguY2VpbChzaXplIC8gMTAyNCkgKiAxMDI0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSB0ZW1wb3JhcnkgbWVtb3J5IHZpZXdzLiBUaGlzIG11c3QgYmUgY2FsbGVkIHdoZW5ldmVyIHRoZVxuICAgICAqIHRlbXBvcmFyeSBtZW1vcnkgYWRkcmVzcyBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqL1xuICAgIHVwZGF0ZVRlbXBNZW1vcnkoKSB7XG4gICAgICAgIHRoaXMuX3RlbXBNZW1GbG9hdCA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5IRUFQOC5idWZmZXIsIHRoaXMuX3RlbXBNZW0sIHRoaXMuX3RlbXBNZW1TaXplID4+IDIpO1xuICAgICAgICB0aGlzLl90ZW1wTWVtSW50ID0gbmV3IEludDMyQXJyYXkodGhpcy5IRUFQOC5idWZmZXIsIHRoaXMuX3RlbXBNZW0sIHRoaXMuX3RlbXBNZW1TaXplID4+IDIpO1xuICAgICAgICB0aGlzLl90ZW1wTWVtVWludDMyID0gbmV3IFVpbnQzMkFycmF5KHRoaXMuSEVBUDguYnVmZmVyLCB0aGlzLl90ZW1wTWVtLCB0aGlzLl90ZW1wTWVtU2l6ZSA+PiAyKTtcbiAgICAgICAgdGhpcy5fdGVtcE1lbVVpbnQxNiA9IG5ldyBVaW50MTZBcnJheSh0aGlzLkhFQVA4LmJ1ZmZlciwgdGhpcy5fdGVtcE1lbSwgdGhpcy5fdGVtcE1lbVNpemUgPj4gMSk7XG4gICAgICAgIHRoaXMuX3RlbXBNZW1VaW50OCA9IG5ldyBVaW50OEFycmF5KHRoaXMuSEVBUDguYnVmZmVyLCB0aGlzLl90ZW1wTWVtLCB0aGlzLl90ZW1wTWVtU2l6ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSB1aW50OCBidWZmZXIgdmlldyBvbiB0ZW1wb3JhcnkgV0FTTSBtZW1vcnkuXG4gICAgICpcbiAgICAgKiAqKk5vdGUqKjogdGhpcyBtZXRob2QgbWlnaHQgYWxsb2NhdGUgaWYgdGhlIHJlcXVlc3RlZCBtZW1vcnkgaXMgYmlnZ2VyXG4gICAgICogdGhhbiB0aGUgY3VycmVudCB0ZW1wb3JhcnkgbWVtb3J5IGFsbG9jYXRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb3VudCBUaGUgbnVtYmVyIG9mICoqZWxlbWVudHMqKiByZXF1aXJlZFxuICAgICAqIEByZXR1cm5zIEEge0BsaW5rIFR5cGVkQXJyYXl9IG92ZXIgdGhlIFdBU00gbWVtb3J5XG4gICAgICovXG4gICAgZ2V0VGVtcEJ1ZmZlclU4KGNvdW50KSB7XG4gICAgICAgIHRoaXMucmVxdWlyZVRlbXBNZW0oY291bnQpO1xuICAgICAgICByZXR1cm4gdGhpcy5fdGVtcE1lbVVpbnQ4O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgdWludDE2IGJ1ZmZlciB2aWV3IG9uIHRlbXBvcmFyeSBXQVNNIG1lbW9yeS5cbiAgICAgKlxuICAgICAqICoqTm90ZSoqOiB0aGlzIG1ldGhvZCBtaWdodCBhbGxvY2F0ZSBpZiB0aGUgcmVxdWVzdGVkIG1lbW9yeSBpcyBiaWdnZXJcbiAgICAgKiB0aGFuIHRoZSBjdXJyZW50IHRlbXBvcmFyeSBtZW1vcnkgYWxsb2NhdGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvdW50IFRoZSBudW1iZXIgb2YgKiplbGVtZW50cyoqIHJlcXVpcmVkXG4gICAgICogQHJldHVybnMgQSB7QGxpbmsgVHlwZWRBcnJheX0gb3ZlciB0aGUgV0FTTSBtZW1vcnlcbiAgICAgKi9cbiAgICBnZXRUZW1wQnVmZmVyVTE2KGNvdW50KSB7XG4gICAgICAgIHRoaXMucmVxdWlyZVRlbXBNZW0oY291bnQgKiAyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RlbXBNZW1VaW50MTY7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSB1aW50MzIgYnVmZmVyIHZpZXcgb24gdGVtcG9yYXJ5IFdBU00gbWVtb3J5LlxuICAgICAqXG4gICAgICogKipOb3RlKio6IHRoaXMgbWV0aG9kIG1pZ2h0IGFsbG9jYXRlIGlmIHRoZSByZXF1ZXN0ZWQgbWVtb3J5IGlzIGJpZ2dlclxuICAgICAqIHRoYW4gdGhlIGN1cnJlbnQgdGVtcG9yYXJ5IG1lbW9yeSBhbGxvY2F0ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY291bnQgVGhlIG51bWJlciBvZiAqKmVsZW1lbnRzKiogcmVxdWlyZWQuXG4gICAgICogQHJldHVybnMgQSB7QGxpbmsgVHlwZWRBcnJheX0gb3ZlciB0aGUgV0FTTSBtZW1vcnkuXG4gICAgICovXG4gICAgZ2V0VGVtcEJ1ZmZlclUzMihjb3VudCkge1xuICAgICAgICB0aGlzLnJlcXVpcmVUZW1wTWVtKGNvdW50ICogNCk7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZW1wTWVtVWludDMyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgaW50MzIgYnVmZmVyIHZpZXcgb24gdGVtcG9yYXJ5IFdBU00gbWVtb3J5LlxuICAgICAqXG4gICAgICogKipOb3RlKio6IHRoaXMgbWV0aG9kIG1pZ2h0IGFsbG9jYXRlIGlmIHRoZSByZXF1ZXN0ZWQgbWVtb3J5IGlzIGJpZ2dlclxuICAgICAqIHRoYW4gdGhlIGN1cnJlbnQgdGVtcG9yYXJ5IG1lbW9yeSBhbGxvY2F0ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY291bnQgVGhlIG51bWJlciBvZiAqKmVsZW1lbnRzKiogcmVxdWlyZWQuXG4gICAgICogQHJldHVybnMgQSB7QGxpbmsgVHlwZWRBcnJheX0gb3ZlciB0aGUgV0FTTSBtZW1vcnkuXG4gICAgICovXG4gICAgZ2V0VGVtcEJ1ZmZlckkzMihjb3VudCkge1xuICAgICAgICB0aGlzLnJlcXVpcmVUZW1wTWVtKGNvdW50ICogNCk7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZW1wTWVtSW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgZmxvYXQzMiBidWZmZXIgdmlldyBvbiB0ZW1wb3JhcnkgV0FTTSBtZW1vcnkuXG4gICAgICpcbiAgICAgKiAqKk5vdGUqKjogdGhpcyBtZXRob2QgbWlnaHQgYWxsb2NhdGUgaWYgdGhlIHJlcXVlc3RlZCBtZW1vcnkgaXMgYmlnZ2VyXG4gICAgICogdGhhbiB0aGUgY3VycmVudCB0ZW1wb3JhcnkgbWVtb3J5IGFsbG9jYXRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb3VudCBUaGUgbnVtYmVyIG9mICoqZWxlbWVudHMqKiByZXF1aXJlZC5cbiAgICAgKiBAcmV0dXJucyBBIHtAbGluayBUeXBlZEFycmF5fSBvdmVyIHRoZSBXQVNNIG1lbW9yeS5cbiAgICAgKi9cbiAgICBnZXRUZW1wQnVmZmVyRjMyKGNvdW50KSB7XG4gICAgICAgIHRoaXMucmVxdWlyZVRlbXBNZW0oY291bnQgKiA0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RlbXBNZW1GbG9hdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29weSB0aGUgc3RyaW5nIGludG8gdGVtcG9yYXJ5IFdBU00gbWVtb3J5IGFuZCByZXRyaWV2ZSB0aGUgcG9pbnRlci5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgbWV0aG9kIHdpbGwgY29tcHV0ZSB0aGUgc3RybGVuIGFuZCBhcHBlbmQgYSBgXFwwYC5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoZSByZXN1bHQgc2hvdWxkIGJlIHVzZWQgKipkaXJlY3RseSoqIG90aGVyd2lzZSBpdCBtaWdodCBnZXRcbiAgICAgKiBvdmVycmlkZGVuIGJ5IGFueSBuZXh0IGNhbGwgbW9kaWZ5aW5nIHRoZSB0ZW1wb3JhcnkgbWVtb3J5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHN0ciBUaGUgc3RyaW5nIHRvIHdyaXRlIHRvIHRlbXBvcmFyeSBtZW1vcnlcbiAgICAgKiBAcGFyYW0gYnl0ZU9mZnNldCBUaGUgc3RhcnRpbmcgYnl0ZSBvZmZzZXQgaW4gdGhlIHRlbXBvcmFyeSBtZW1vcnkgYXQgd2hpY2hcbiAgICAgKiAgICAgdGhlIHN0cmluZyBzaG91bGQgYmUgd3JpdHRlbi4gVGhpcyBpcyB1c2VmdWwgd2hlbiB1c2luZyBtdWx0aXBsZSB0ZW1wb3Jhcmllcy5cbiAgICAgKiBAcmV0dXJuIFRoZSB0ZW1wb3JhcnkgcG9pbnRlciBvbnRvIHRoZSBXQVNNIG1lbW9yeVxuICAgICAqL1xuICAgIHRlbXBVVEY4KHN0ciwgYnl0ZU9mZnNldCA9IDApIHtcbiAgICAgICAgY29uc3Qgc3RyTGVuID0gdGhpcy5sZW5ndGhCeXRlc1VURjgoc3RyKSArIDE7XG4gICAgICAgIHRoaXMucmVxdWlyZVRlbXBNZW0oc3RyTGVuICsgYnl0ZU9mZnNldCk7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMuX3RlbXBNZW0gKyBieXRlT2Zmc2V0O1xuICAgICAgICB0aGlzLnN0cmluZ1RvVVRGOChzdHIsIHB0ciwgc3RyTGVuKTtcbiAgICAgICAgcmV0dXJuIHB0cjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29weSB0aGUgYnVmZmVyIGludG8gdGhlIFdBU00gaGVhcC5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoZSByZXR1cm5lZCBwb2ludGVyIG11c3QgYmUgZnJlZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYnVmZmVyIFRoZSBidWZmZXIgdG8gY29weSBpbnRvIHRoZSBoZWFwLlxuICAgICAqIEByZXR1cm5zIEFuIGFsbG9jYXRlZCBwb2ludGVyLCB0aGF0IG11c3QgYmUgZnJlZSBhZnRlciB1c2UuXG4gICAgICovXG4gICAgY29weUJ1ZmZlclRvSGVhcChidWZmZXIpIHtcbiAgICAgICAgY29uc3Qgc2l6ZSA9IGJ1ZmZlci5ieXRlTGVuZ3RoO1xuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLl9tYWxsb2Moc2l6ZSk7XG4gICAgICAgIHRoaXMuSEVBUFU4LnNldChuZXcgVWludDhBcnJheShidWZmZXIpLCBwdHIpO1xuICAgICAgICByZXR1cm4gcHRyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgcnVudGltZSBzdXBwb3J0cyBwaHlzeCBvciBub3QuXG4gICAgICovXG4gICAgZ2V0IHdpdGhQaHlzWCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dpdGhQaHlzWDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBlbmdpbmUgaW5zdGFuY2UgaG9sZGluZyB0aGlzIGJyaWRnZS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlbmdpbmUgVGhlIGVuZ2luZSBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBfc2V0RW5naW5lKGVuZ2luZSkge1xuICAgICAgICB0aGlzLl9lbmdpbmUgPSBlbmdpbmU7XG4gICAgfVxuICAgIC8qIFdlYkFzc2VtYmx5IHRvIEpTIGNhbGwgYnJpZGdlLiAqL1xuICAgIF93bGpzX3hyX3Nlc3Npb25fc3RhcnQobW9kZSkge1xuICAgICAgICBpZiAodGhpcy5fZW5naW5lLnhyID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9lbmdpbmUueHIgPSBuZXcgWFIodGhpcywgbW9kZSk7XG4gICAgICAgICAgICB0aGlzLl9lbmdpbmUub25YUlNlc3Npb25TdGFydC5ub3RpZnkodGhpcy53ZWJ4cl9zZXNzaW9uLCBtb2RlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfd2xqc194cl9zZXNzaW9uX2VuZCgpIHtcbiAgICAgICAgY29uc3Qgc3RhcnRFbWl0dGVyID0gdGhpcy5fZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQ7XG4gICAgICAgIGlmIChzdGFydEVtaXR0ZXIgaW5zdGFuY2VvZiBSZXRhaW5FbWl0dGVyKVxuICAgICAgICAgICAgc3RhcnRFbWl0dGVyLnJlc2V0KCk7XG4gICAgICAgIHRoaXMuX2VuZ2luZS5vblhSU2Vzc2lvbkVuZC5ub3RpZnkoKTtcbiAgICAgICAgdGhpcy5fZW5naW5lLnhyID0gbnVsbDtcbiAgICB9XG4gICAgX3dsanNfeHJfZGlzYWJsZSgpIHtcbiAgICAgICAgLyogQHRvZG8gVGhpcyBjb3VsZCBkaXJlY3RseSBiZSBmdWxseSBoYW5kbGVkIGluIEpTLiAqL1xuICAgICAgICB0aGlzLl9lbmdpbmUuYXJTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZW5naW5lLnZyU3VwcG9ydGVkID0gZmFsc2U7XG4gICAgfVxuICAgIF93bGpzX2luaXQod2l0aFBoeXNYKSB7XG4gICAgICAgIHRoaXMuX3dpdGhQaHlzWCA9IHdpdGhQaHlzWDtcbiAgICAgICAgLyogVGFyZ2V0IG1lbW9yeSBmb3IgSlMgQVBJIGZ1bmN0aW9ucyB0aGF0IHJldHVybiBhcnJheXMgKi9cbiAgICAgICAgdGhpcy5hbGxvY2F0ZVRlbXBNZW1vcnkoMTAyNCk7XG4gICAgfVxuICAgIF93bGpzX3NjZW5lX3N3aXRjaChpbmRleCkge1xuICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuX2VuZ2luZS5fc2NlbmVzW2luZGV4XTtcbiAgICAgICAgLyogU2NlbmUgY2FuIGJlIG51bGwgZHVyaW5nIHRlc3Rpbmcgd2l0aCBgZW5naW5lLnJlc2V0KClgICovXG4gICAgICAgIHRoaXMuX2NvbXBvbmVudHMgPSBzY2VuZT8uX2pzQ29tcG9uZW50cyA/PyBudWxsO1xuICAgIH1cbiAgICBfd2xqc19kZXN0cm95X2ltYWdlKGluZGV4KSB7XG4gICAgICAgIGNvbnN0IGltZyA9IHRoaXMuX2ltYWdlc1tpbmRleF07XG4gICAgICAgIGlmICghaW1nKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLl9pbWFnZXNbaW5kZXhdID0gbnVsbDtcbiAgICAgICAgaWYgKGltZy5zcmMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW1nLnNyYyA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbWcub25sb2FkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGltZy5vbmxvYWQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbWcub25lcnJvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbWcub25lcnJvciA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3dsanNfb2JqZWN0c19tYXJrRGVzdHJveWVkKHNjZW5lSW5kZXgsIGlkc1B0ciwgY291bnQpIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSB0aGlzLl9lbmdpbmUuX3NjZW5lc1tzY2VuZUluZGV4XTtcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBpZHNQdHIgPj4+IDE7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLkhFQVBVMTZbc3RhcnQgKyBpXTtcbiAgICAgICAgICAgIHNjZW5lLl9kZXN0cm95T2JqZWN0KGlkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfd2xqc19zY2VuZV9pbml0aWFsaXplKHNjZW5lSW5kZXgsIGlkc1B0ciwgaWRzRW5kLCBwYXJhbURhdGFQdHIsIHBhcmFtRGF0YUVuZFB0ciwgb2Zmc2V0c1B0ciwgb2Zmc2V0c0VuZFB0cikge1xuICAgICAgICBjb25zdCBjYm9yID0gdGhpcy5IRUFQVTguc3ViYXJyYXkocGFyYW1EYXRhUHRyLCBwYXJhbURhdGFFbmRQdHIpO1xuICAgICAgICBjb25zdCBvZmZzZXRzID0gdGhpcy5IRUFQVTMyLnN1YmFycmF5KG9mZnNldHNQdHIgPj4+IDIsIG9mZnNldHNFbmRQdHIgPj4+IDIpO1xuICAgICAgICBjb25zdCBpZHMgPSB0aGlzLkhFQVBVMTYuc3ViYXJyYXkoaWRzUHRyID4+PiAxLCBpZHNFbmQgPj4+IDEpO1xuICAgICAgICBjb25zdCBlbmdpbmUgPSB0aGlzLl9lbmdpbmU7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZW5naW5lLl9zY2VuZXNbc2NlbmVJbmRleF07XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudHMgPSBzY2VuZS5fanNDb21wb25lbnRzO1xuICAgICAgICBsZXQgZGVjb2RlZDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGRlY29kZWQgPSBDQk9SLmRlY29kZShjYm9yKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5fbG9nLmVycm9yKExvZ1RhZy5FbmdpbmUsICdFeGNlcHRpb24gZHVyaW5nIGNvbXBvbmVudCBwYXJhbWV0ZXIgZGVjb2RpbmcnKTtcbiAgICAgICAgICAgIHRoaXMuX2xvZy5lcnJvcihMb2dUYWcuQ29tcG9uZW50LCBlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZGVjb2RlZCkpIHtcbiAgICAgICAgICAgIHRoaXMuX2xvZy5lcnJvcihMb2dUYWcuRW5naW5lLCAnUGFyYW1ldGVyIGRhdGEgbXVzdCBiZSBhbiBhcnJheScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWNvZGVkLmxlbmd0aCAhPT0gaWRzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5fbG9nLmVycm9yKExvZ1RhZy5FbmdpbmUsIGBQYXJhbWV0ZXIgZGF0YSBoYXMgc2l6ZSAke2RlY29kZWQubGVuZ3RofSBidXQgZXhwZWN0ZWQgJHtpZHMubGVuZ3RofWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVjb2RlZC5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgaWQgPSBDb21wb25lbnQuX3BhY2soc2NlbmVJbmRleCwgaWRzW2ldKTtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fd2xfZ2V0X2pzX2NvbXBvbmVudF9pbmRleF9mb3JfaWQoaWQpO1xuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50ID0gY29tcG9uZW50c1tpbmRleF07XG4gICAgICAgICAgICBjb25zdCBjdG9yID0gY29tcG9uZW50LmNvbnN0cnVjdG9yO1xuICAgICAgICAgICAgaWYgKGN0b3IgPT0gQnJva2VuQ29tcG9uZW50KVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3QgcGFyYW1OYW1lcyA9IGN0b3IuX3Byb3BlcnR5T3JkZXI7XG4gICAgICAgICAgICBjb25zdCBwYXJhbVZhbHVlcyA9IGRlY29kZWRbaV07XG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocGFyYW1WYWx1ZXMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbG9nLmVycm9yKExvZ1RhZy5FbmdpbmUsICdDb21wb25lbnQgcGFyYW1ldGVyIGRhdGEgbXVzdCBiZSBhbiBhcnJheScpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhcmFtVmFsdWVzLmxlbmd0aCAhPT0gcGFyYW1OYW1lcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9sb2cuZXJyb3IoTG9nVGFnLkVuZ2luZSwgYENvbXBvbmVudCBwYXJhbWV0ZXIgZGF0YSBoYXMgc2l6ZSAke3BhcmFtVmFsdWVzLmxlbmd0aH0gYnV0IGV4cGVjdGVkICR7cGFyYW1OYW1lcy5sZW5ndGh9YCk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHBhcmFtVmFsdWVzLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IHBhcmFtTmFtZXNbal07XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvcGVydHkgPSBjdG9yLlByb3BlcnRpZXNbbmFtZV07XG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZSA9IHByb3BlcnR5LnR5cGU7XG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gcGFyYW1WYWx1ZXNbal07XG4gICAgICAgICAgICAgICAgLyogRGVmYXVsdCB2YWx1ZXMgYXJlIHNlbnQgYXMgdW5kZWZpbmVkIHRvIGF2b2lkIHdhc3Rpbmcgc3BhY2UgKi9cbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjbG9uZXIgPSBwcm9wZXJ0eS5jbG9uZXIgPz8gZGVmYXVsdFByb3BlcnR5Q2xvbmVyO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGNsb25lci5jbG9uZSh0eXBlLCBwcm9wZXJ0eS5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50W25hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvKiBUaGlzIHNraXBzIHVuc2V0IHJlc291cmNlIHBhcmFtZXRlcnMgYXMgdGhvc2UgYXJlIHNlbnRcbiAgICAgICAgICAgICAgICAgKiBkaXJlY3RseSB3aXRoIHR5cGUgbnVsbC4gT2Zmc2V0cyBmb3IgSW50IGFuZCBGbG9hdCB0eXBlc1xuICAgICAgICAgICAgICAgICAqIHNob3VsZCBhbHdheXMgYmUgMC4gKi9cbiAgICAgICAgICAgICAgICAvKiogQHRvZG8gQ0JPUiB0YWcgdG8gbWFyayByZXNvdXJjZXM/IFdhc3RlcyBhIGJ5dGUgdGhvdWdoLiAqL1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlICs9IG9mZnNldHNbdHlwZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGUuQm9vbDpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlLkludDpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlLkZsb2F0OlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGUuU3RyaW5nOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGUuRW51bTpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlLlZlY3RvcjI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZS5WZWN0b3IzOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGUuVmVjdG9yNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIE5vdGhpbmcgdG8gZG8gKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGUuT2JqZWN0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2NlbmUud3JhcCh0aGlzLl93bF9vYmplY3RfaWQoc2NlbmUuX2luZGV4LCB2YWx1ZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZS5NZXNoOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBlbmdpbmUubWVzaGVzLndyYXAodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZS5UZXh0dXJlOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBlbmdpbmUudGV4dHVyZXMud3JhcCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlLk1hdGVyaWFsOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBlbmdpbmUubWF0ZXJpYWxzLndyYXAodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZS5BbmltYXRpb246XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHNjZW5lLmFuaW1hdGlvbnMud3JhcCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlLlNraW46XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHNjZW5lLnNraW5zLndyYXAodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZS5Db2xvcjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIENvbG9ycyBhcmUgc2VudCBhcyBVaW50OEFycmF5LiBOb3JtYWxpemUgcG9zaXRpdmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIGludGVnZXIgdmFsdWVzIHRvIDAtMS4gRG9uJ3QgYXNzdW1lIGFueSBiaXQgc2l6ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICogaGVyZSwgY291bGQgYmVjb21lIFVpbnQxNkFycmF5IGFzIHdlbGwuICovXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXggPSAoMSA8PCAodmFsdWUuQllURVNfUEVSX0VMRU1FTlQgKiA4KSkgLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBGbG9hdDMyQXJyYXkuZnJvbSh2YWx1ZSwgKGYsIF8pID0+IGYgLyBtYXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbXBvbmVudFtuYW1lXSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIF93bGpzX3NldF9jb21wb25lbnRfcGFyYW1fdHJhbnNsYXRpb24oc2NlbmUsIGNvbXBvbmVudCwgcGFyYW0sIHZhbHVlUHRyLCB2YWx1ZUVuZFB0cikge1xuICAgICAgICBjb25zdCBjb21wb25lbnRzID0gdGhpcy5fZW5naW5lLl9zY2VuZXNbc2NlbmVdLl9qc0NvbXBvbmVudHM7XG4gICAgICAgIGNvbnN0IGNvbXAgPSBjb21wb25lbnRzW2NvbXBvbmVudF07XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5VVEY4Vmlld1RvU3RyaW5nKHZhbHVlUHRyLCB2YWx1ZUVuZFB0cik7XG4gICAgICAgIGNvbnN0IGN0b3IgPSBjb21wLmNvbnN0cnVjdG9yO1xuICAgICAgICBjb25zdCBwYXJhbU5hbWUgPSBjdG9yLl9wcm9wZXJ0eU9yZGVyW3BhcmFtXTtcbiAgICAgICAgY29tcFtwYXJhbU5hbWVdID0gdmFsdWU7XG4gICAgfVxuICAgIF93bGpzX2dldF9jb21wb25lbnRfdHlwZV9pbmRleChuYW1lUHRyLCBuYW1lRW5kUHRyKSB7XG4gICAgICAgIGNvbnN0IHR5cGVuYW1lID0gdGhpcy5VVEY4Vmlld1RvU3RyaW5nKG5hbWVQdHIsIG5hbWVFbmRQdHIpO1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuX2NvbXBvbmVudFR5cGVJbmRpY2VzW3R5cGVuYW1lXTtcbiAgICAgICAgaWYgKGluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9icm9rZW5Db21wb25lbnRJbmRleDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgfVxuICAgIF93bGpzX2NvbXBvbmVudF9jcmVhdGUoc2NlbmVJbmRleCwgaW5kZXgsIGlkLCB0eXBlLCBvYmplY3QpIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSB0aGlzLl9lbmdpbmUuX3NjZW5lc1tzY2VuZUluZGV4XTtcbiAgICAgICAgc2NlbmUuX2NvbXBvbmVudHMuY3JlYXRlSnMoaW5kZXgsIGlkLCB0eXBlLCBvYmplY3QpO1xuICAgIH1cbiAgICBfd2xqc19jb21wb25lbnRfaW5pdChzY2VuZSwgY29tcG9uZW50KSB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudHMgPSB0aGlzLl9lbmdpbmUuX3NjZW5lc1tzY2VuZV0uX2pzQ29tcG9uZW50cztcbiAgICAgICAgY29uc3QgYyA9IGNvbXBvbmVudHNbY29tcG9uZW50XTtcbiAgICAgICAgYy5fdHJpZ2dlckluaXQoKTtcbiAgICB9XG4gICAgX3dsanNfY29tcG9uZW50X3VwZGF0ZShjb21wb25lbnQsIGR0KSB7XG4gICAgICAgIGNvbnN0IGMgPSB0aGlzLl9jb21wb25lbnRzW2NvbXBvbmVudF07XG4gICAgICAgIGMuX3RyaWdnZXJVcGRhdGUoZHQpO1xuICAgIH1cbiAgICBfd2xqc19jb21wb25lbnRfb25BY3RpdmF0ZShjb21wb25lbnQpIHtcbiAgICAgICAgY29uc3QgYyA9IHRoaXMuX2NvbXBvbmVudHNbY29tcG9uZW50XTtcbiAgICAgICAgYy5fdHJpZ2dlck9uQWN0aXZhdGUoKTtcbiAgICB9XG4gICAgX3dsanNfY29tcG9uZW50X29uRGVhY3RpdmF0ZShjb21wb25lbnQpIHtcbiAgICAgICAgY29uc3QgYyA9IHRoaXMuX2NvbXBvbmVudHNbY29tcG9uZW50XTtcbiAgICAgICAgYy5fdHJpZ2dlck9uRGVhY3RpdmF0ZSgpO1xuICAgIH1cbiAgICBfd2xqc19jb21wb25lbnRfbWFya0Rlc3Ryb3llZChzY2VuZUluZGV4LCBtYW5hZ2VyLCBjb21wb25lbnRJZCkge1xuICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuX2VuZ2luZS5fc2NlbmVzW3NjZW5lSW5kZXhdO1xuICAgICAgICBjb25zdCBjb21wb25lbnQgPSBzY2VuZS5fY29tcG9uZW50cy5nZXQobWFuYWdlciwgY29tcG9uZW50SWQpO1xuICAgICAgICBjb21wb25lbnQ/Ll90cmlnZ2VyT25EZXN0cm95KCk7XG4gICAgfVxuICAgIF93bGpzX3N3YXAoc2NlbmUsIGEsIGIpIHtcbiAgICAgICAgY29uc3QgY29tcG9uZW50cyA9IHRoaXMuX2VuZ2luZS5fc2NlbmVzW3NjZW5lXS5fanNDb21wb25lbnRzO1xuICAgICAgICBjb25zdCBjb21wb25lbnRBID0gY29tcG9uZW50c1thXTtcbiAgICAgICAgY29tcG9uZW50c1thXSA9IGNvbXBvbmVudHNbYl07XG4gICAgICAgIGNvbXBvbmVudHNbYl0gPSBjb21wb25lbnRBO1xuICAgIH1cbiAgICBfd2xqc19jb3B5KHNyY1NjZW5lSW5kZXgsIHNyY0luZGV4LCBkc3RTY2VuZUluZGV4LCBkc3RJbmRleCwgb2Zmc2V0c1B0cikge1xuICAgICAgICBjb25zdCBzcmNTY2VuZSA9IHRoaXMuX2VuZ2luZS5fc2NlbmVzW3NyY1NjZW5lSW5kZXhdO1xuICAgICAgICBjb25zdCBkc3RTY2VuZSA9IHRoaXMuX2VuZ2luZS5fc2NlbmVzW2RzdFNjZW5lSW5kZXhdO1xuICAgICAgICBjb25zdCBkZXN0Q29tcCA9IGRzdFNjZW5lLl9qc0NvbXBvbmVudHNbZHN0SW5kZXhdO1xuICAgICAgICBjb25zdCBzcmNDb21wID0gc3JjU2NlbmUuX2pzQ29tcG9uZW50c1tzcmNJbmRleF07XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBkZXN0Q29tcC5fY29weShzcmNDb21wLCBvZmZzZXRzUHRyKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5fbG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGBFeGNlcHRpb24gZHVyaW5nICR7ZGVzdENvbXAudHlwZX0gY29weSgpIG9uIG9iamVjdCAke2Rlc3RDb21wLm9iamVjdC5uYW1lfWApO1xuICAgICAgICAgICAgdGhpcy5fbG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvcndhcmQgYW4gYW5pbWF0aW9uIGV2ZW50IHRvIGEgY29ycmVzcG9uZGluZ1xuICAgICAqIHtAbGluayBBbmltYXRpb25Db21wb25lbnR9XG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuIFBsZWFzZSBoYXZlIGEgbG9vayBhdFxuICAgICAqIHtAbGluayBBbmltYXRpb25Db21wb25lbnQub25FdmVudH0gaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb21wb25lbnRJZCBDb21wb25lbnQgaWQgaW4gdGhlIG1hbmFnZXJcbiAgICAgKiBAcGFyYW0gbmFtZVB0ciBQb2ludGVyIHRvIFVURjggZXZlbnQgbmFtZVxuICAgICAqIEBwYXJhbSBuYW1lRW5kUHRyIFBvaW50ZXIgdG8gZW5kIG9mIFVURjggZXZlbnQgbmFtZVxuICAgICAqL1xuICAgIF93bGpzX3RyaWdnZXJfYW5pbWF0aW9uRXZlbnQoY29tcG9uZW50SWQsIG5hbWVQdHIsIG5hbWVFbmRQdHIpIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSB0aGlzLl9lbmdpbmUuc2NlbmU7XG4gICAgICAgIGNvbnN0IGNvbXAgPSBzY2VuZS5fY29tcG9uZW50cy53cmFwQW5pbWF0aW9uKGNvbXBvbmVudElkKTtcbiAgICAgICAgY29uc3QgbmFtZVN0ciA9IHRoaXMuVVRGOFZpZXdUb1N0cmluZyhuYW1lUHRyLCBuYW1lRW5kUHRyKTtcbiAgICAgICAgY29tcC5vbkV2ZW50Lm5vdGlmeShuYW1lU3RyKTtcbiAgICB9XG59XG4vKlxuICogQXBpIDw+IFJ1bnRpbWUgY29tcGF0aWJpbGl0eS5cbiAqXG4gKiBTb21lIGZlYXR1cmVzIGV4cG9zZWQgaW4gdGhlIEFQSSBhcmUgb25seSBhdmFpbGFibGUgZnJvbSBhIHNwZWNpZmljXG4gKiBydW50aW1lIHZlcnNpb24uXG4gKlxuICogRXZlcnkgYWRkZWQgZmVhdHVyZSBtdXN0IHRocm93IGJ5IGRlZmF1bHQuIElmIHRoZSBydW50aW1lIGxvYWRlZFxuICogaGFzIHRoZSBzcGVjaWZpYyBmZWF0dXJlLCB0aGUgbWV0aG9kIHdpbGwgYmUgb3ZlcndyaXR0ZW4gYnkgRW1zY3JpcHRlblxuICogdXBvbiBsb2FkaW5nLlxuICovXG4vKipcbiAqIFRocm93aW5nIGZ1bmN0aW9uIHVzZWQgZm9yIGZlYXR1cmVzIGFkZGVkIGluIGEgcGF0Y2ggdmVyc2lvbi5cbiAqXG4gKiAjIyMjIFVzYWdlXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IHJlcXVpcmVSdW50aW1lMV8xXzEgPSB0aHJvd0ludmFsaWRSdW50aW1lKCcxLjEuMScpO1xuICogV0FTTS5wcm90b3R5cGUuX3dsX25ld19mdW5jdGlvbiA9IHJlcXVpcmVSdW50aW1lMV8xXzE7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gdmVyc2lvbiBUaGUgdmVyc2lvbiBpbiB3aGljaCB0aGUgZmVhdHVyZSB3YXMgYWRkZWQuXG4gKiBAcmV0dXJucyBBIGZ1bmN0aW9uIHRoYXQgd2lsbCB0aHJvdyB3aGVuIGNhbGxlZC5cbiAqL1xuZnVuY3Rpb24gdGhyb3dJbnZhbGlkUnVudGltZSh2ZXJzaW9uKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGZWF0dXJlIGFkZGVkIGluIHZlcnNpb24gJHt2ZXJzaW9ufS5gICtcbiAgICAgICAgICAgIGBcXG5cXHRcdTIxOTIgUGxlYXNlIHVzZSBhIFdvbmRlcmxhbmQgRW5naW5lIGVkaXRvciB2ZXJzaW9uID49ICR7dmVyc2lvbn1gKTtcbiAgICB9O1xufVxuLyoqIEB0b2RvIFJlbW92ZSBhdCAxLjMuMCAqL1xuY29uc3QgcmVxdWlyZVJ1bnRpbWUxXzJfMSA9IHRocm93SW52YWxpZFJ1bnRpbWUoJzEuMi4xJyk7XG5XQVNNLnByb3RvdHlwZS5fd2xfdGV4dF9jb21wb25lbnRfZ2V0X3dyYXBNb2RlID0gcmVxdWlyZVJ1bnRpbWUxXzJfMTtcbldBU00ucHJvdG90eXBlLl93bF90ZXh0X2NvbXBvbmVudF9zZXRfd3JhcE1vZGUgPSByZXF1aXJlUnVudGltZTFfMl8xO1xuV0FTTS5wcm90b3R5cGUuX3dsX3RleHRfY29tcG9uZW50X2dldF93cmFwV2lkdGggPSByZXF1aXJlUnVudGltZTFfMl8xO1xuV0FTTS5wcm90b3R5cGUuX3dsX3RleHRfY29tcG9uZW50X3NldF93cmFwV2lkdGggPSByZXF1aXJlUnVudGltZTFfMl8xO1xuV0FTTS5wcm90b3R5cGUuX3dsX2ZvbnRfZ2V0X291dGxpbmVTaXplID0gcmVxdWlyZVJ1bnRpbWUxXzJfMTtcbldBU00ucHJvdG90eXBlLl93bF9zY2VuZV9jcmVhdGVfY2h1bmtlZF9zdGFydCA9IHJlcXVpcmVSdW50aW1lMV8yXzE7XG5XQVNNLnByb3RvdHlwZS5fd2xfc2NlbmVfY3JlYXRlX2NodW5rZWRfYnVmZmVyX3NpemUgPSByZXF1aXJlUnVudGltZTFfMl8xO1xuV0FTTS5wcm90b3R5cGUuX3dsX3NjZW5lX2NyZWF0ZV9jaHVua2VkX25leHQgPSByZXF1aXJlUnVudGltZTFfMl8xO1xuV0FTTS5wcm90b3R5cGUuX3dsX3NjZW5lX2NyZWF0ZV9jaHVua2VkX2Fib3J0ID0gcmVxdWlyZVJ1bnRpbWUxXzJfMTtcbldBU00ucHJvdG90eXBlLl93bF9zY2VuZV9jcmVhdGVfY2h1bmtlZF9lbmRfcHJlZmFiID0gcmVxdWlyZVJ1bnRpbWUxXzJfMTtcbldBU00ucHJvdG90eXBlLl93bF9zY2VuZV9jcmVhdGVfY2h1bmtlZF9lbmRfbWFpbiA9IHJlcXVpcmVSdW50aW1lMV8yXzE7XG5XQVNNLnByb3RvdHlwZS5fd2xfc2NlbmVfY3JlYXRlX2NodW5rZWRfZW5kX3F1ZXVlZCA9IHJlcXVpcmVSdW50aW1lMV8yXzE7XG4iLCAiaW1wb3J0IHsgQ29tcG9uZW50LCBUeXBlIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbi8qKlxuICogOHRod2FsbCBjYW1lcmEgY29tcG9uZW50LlxuICpcbiAqIFNldHMgdXAgdGhlIDh0aHdhbGwgcGlwZWxpbmUgYW5kIHJldHJpZXZlcyB0cmFja2luZyBldmVudHMgdG8gcGxhY2UgYW5cbiAqIG9iamVjdCBhdCB0aGUgbG9jYXRpb24gb2YgdGhlIHRyYWNrZWQgQVIgY2FtZXJhIC8gbW9iaWxlIGRldmljZS5cbiAqXG4gKiBVc2UgdGhpcyBmb3IgU0xBTSB0cmFja2luZyBiYXNlZCBvbiA4dGh3YWxsLlxuICpcbiAqIE1ha2Ugc3VyZSB0byBlbmFibGUgOHRod2FsbCBpbiBcIlByb2plY3QgU2V0dGluZ3NcIiA+IFwiQVJcIi4gU2VlIGFsc28gdGhlXG4gKiBbQVIgR2V0dGluZyBTdGFydGVkIEd1aWRlXSgvZ2V0dGluZy1zdGFydGVkL3F1aWNrLXN0YXJ0LWFyKVxuICpcbiAqXG4gKiBDdXJyZW50bHkgb25seSBzdXBwb3J0cyB3b3JsZC10cmFja2luZyAoU0xBTSkgdXNpbmcgQkFDSyBjYW1lcmEuXG4gKlxuICogLSByZW1vdmUgYW55IG9jY3VycmVuY2VzIG9mIHRoZSBvbGQgOHRod2FsbC1jYW1lcmEgY29tcG9uZW50IGluIHRoZSBlZGl0b3JcbiAqIC0gQWRkIHRoaXMgY29tcG9uZW50IHRvIE5vblZyQ2FtZXJhXG4gKlxuICogSU1QT1JUQU5UIVxuICogLSB1bnRpbCBpdCBnZXQncyBmaXhlZCwgc2VsZWN0ICdjdXN0b21JbmRleEh0bWwnIGluIHRoZSBwcm9qZWN0IHNldHRpbmdzXG4gKiAtIG9wZW4gYSBnZW5lcmF0ZWQgaW5kZXguaHRtbCBhbmQgY3Jvc3NvcmlnaW49XCJhbm9ueW1vdXNcIiBhdHRyaWJ1dGUgdG8gdGhlIDxzY3JpcHQ+IHRhZyB3aGVyZSAvL2FwcHMuOHRod2FsbC5jb20veHJ3ZWIgaXMgbG9hZGVkXG4gKlxuICpcbiAqICMjIyMjIyMjIyBVc2luZyBVSSBvdmVybGF5cyAjIyMjIyMjIyMjIyMjXG4gKiBCeSBkZWZhdWx0LCB0aGlzIGNvbXBvbmVudCByZW5kZXJzIG93biBVSSB0byBnaXZlIHRoZSB1c2VyIGZlZWRiYWNrIGFib3V0IHJlamVjdGVkIHBlcm1pc3Npb25zIG9yIHRyYWNraW5nIGVycm9ycy5cbiAqIEl0IGNhbiBiZSBjaGFuZ2VkIGJ5IGVuYWJsaW5nIHVzZUN1c3RvbVVJT3ZlcmxheXMgZmxhZy5cbiAqXG4gKiBJZiB1c2VDdXN0b21VSU92ZXJsYXlzIGlzIGVuYWJsZWQsIHlvdSBhcmUgZXhwZWN0ZWQgaGFuZGxlIHRoZSBmb2xsb3dpbmcgZXZlbnRzIGRpc3BhdGNoZWQgYnkgdGhlIHdpbmRvdyBvYmplY3Q6XG4gKiAtIFwiOHRod2FsbC1yZXF1ZXN0LXVzZXItaW50ZXJhY3Rpb25cIiAtIHVzZWQgb25seSBvbiBpT1Mgc2FmYXJpLiBSZXF1ZXN0IGEgdXNlciB0byBwZXJmb3JtIGFuZCBpbnRlcmFjdGlvbiB3aXRoIHRoZSBwYWdlIHNvIHRoYXQgamF2YXNjcmlwdCBpcyBhbGxvd2VkIHRvIGFsbG93ZWQgdG8gcmVxdWVzdCBhIG1vdGlvbi9jYW1lcmEvbWljIHBlcm1pc3Npb25zLlxuICogIE1ha2Ugc3VyZSB0aGUgd2luZG93IG9iamVjdCBpcyBkaXNwYXRjaGluZyBhbiAnOHRod2FsbC1zYWZlLXRvLXJlcXVlc3QtcGVybWlzc2lvbnMnIGV2ZW50IGFmdGVyIGludGVyYWN0aW9uIGhhcyBoYXBwZW5lZC5cbiAqIGBgYFxuICogPGJ1dHRvbiBvbmNsaWNrPVwid2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCc4dGh3YWxsLXNhZmUtdG8tcmVxdWVzdC1wZXJtaXNzaW9ucycpKVwiPkFsbG93IFNlbnNvcnM8L2J1dHRvbj5cbiAqIGBgYFxuICpcbiAqIC0gXCI4dGh3YWxsLXBlcm1pc3Npb24tZmFpbFwiIC0gdXNlciByZWplY3RlZCBhbnkgb2YgdGhlIHBlcm1pc3Npb25zXG4gKlxuICogLSBcIjh0aHdhbGwtZXJyb3JcIiAtIHJ1bnRpbWUgOHRod2FsbCBlcnJvciBvY2N1cnJlZFxuICovXG5jbGFzcyBBUkNhbWVyYTh0aHdhbGwgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICc4dGh3YWxsLWNhbWVyYSc7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICAgIC8qKiBPdmVycmlkZSB0aGUgV0wgaHRtbCBvdmVybGF5cyBmb3IgaGFuZGxpbmcgY2FtZXJhL21vdGlvbiBwZXJtaXNzaW9ucyBhbmQgZXJyb3IgaGFuZGxpbmcgKi9cbiAgICAgICAgdXNlQ3VzdG9tVUlPdmVybGF5czogeyB0eXBlOiBUeXBlLkJvb2wsIGRlZmF1bHQ6IGZhbHNlIH0sXG4gICAgfTtcbiAgICAvKiA4dGh3YWxsIGNhbWVyYSBwaXBlbGluZSBtb2R1bGUgbmFtZSAqL1xuICAgIG5hbWUgPSAnd29uZGVybGFuZC1lbmdpbmUtOHRod2FsbC1jYW1lcmEnO1xuICAgIHN0YXJ0ZWQgPSBmYWxzZTtcbiAgICB2aWV3ID0gbnVsbDsgLy8gY2FjaGUgY2FtZXJhXG4gICAgcG9zaXRpb24gPSBbMCwgMCwgMF07IC8vIGNhY2hlIDh0aHdhbGwgY2FtIHBvc2l0aW9uXG4gICAgcm90YXRpb24gPSBbMCwgMCwgMCwgLTFdOyAvLyBjYWNoZSA4dGh3YWxsIGNhbSByb3RhdGlvblxuICAgIGdsVGV4dHVyZVJlbmRlcmVyID0gbnVsbDsgLy8gY2FjaGUgWFI4LkdsVGV4dHVyZVJlbmRlcmVyLnBpcGVsaW5lTW9kdWxlXG4gICAgcHJvbXB0Rm9yRGV2aWNlTW90aW9uKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgLy8gVGVsbCBhbnlvbmUgd2hvJ3MgaW50ZXJlc3RlZCB0aGF0IHdlIHdhbnQgdG8gZ2V0IHNvbWUgdXNlciBpbnRlcmFjdGlvblxuICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCc4dGh3YWxsLXJlcXVlc3QtdXNlci1pbnRlcmFjdGlvbicpKTtcbiAgICAgICAgICAgIC8vIFdhaXQgdW50aWwgc29tZW9uZSByZXNwb25zZSB0aGF0IHVzZXIgaW50ZXJhY3Rpb24gaGFwcGVuZWRcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCc4dGh3YWxsLXNhZmUtdG8tcmVxdWVzdC1wZXJtaXNzaW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtb3Rpb25FdmVudCA9IGF3YWl0IERldmljZU1vdGlvbkV2ZW50LnJlcXVlc3RQZXJtaXNzaW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUobW90aW9uRXZlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXhjZXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChleGNlcHRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0UGVybWlzc2lvbnMoKSB7XG4gICAgICAgIC8vIGlPUyBcImZlYXR1cmVcIi4gSWYgd2Ugd2FudCB0byByZXF1ZXN0IHRoZSBEZXZpY2VNb3Rpb24gcGVybWlzc2lvbiwgdXNlciBoYXMgdG8gaW50ZXJhY3Qgd2l0aCB0aGUgcGFnZSBhdCBmaXJzdCAodG91Y2ggaXQpLlxuICAgICAgICAvLyBJZiB0aGVyZSB3YXMgbm8gaW50ZXJhY3Rpb24gZG9uZSBzbyBmYXIsIHdlIHdpbGwgcmVuZGVyIGEgSFRNTCBvdmVybGF5IHdpdGggd291bGQgZ2V0IHRoZSB1c2VyIHRvIGludGVyYWN0IHdpdGggdGhlIHNjcmVlblxuICAgICAgICBpZiAoRGV2aWNlTW90aW9uRXZlbnQgJiYgRGV2aWNlTW90aW9uRXZlbnQucmVxdWVzdFBlcm1pc3Npb24pIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgRGV2aWNlTW90aW9uRXZlbnQucmVxdWVzdFBlcm1pc3Npb24oKTtcbiAgICAgICAgICAgICAgICAvLyBUaGUgdXNlciBtdXN0IGhhdmUgcmVqZWN0ZWQgdGhlIG1vdGlvbiBldmVudCBvbiBwcmV2aW91cyBwYWdlIGxvYWQuIChzYWZhcmkgcmVtZW1iZXJzIHRoaXMgY2hvaWNlKS5cbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9PSAnZ3JhbnRlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNb3Rpb25FdmVudCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChleGNlcHRpb24pIHtcbiAgICAgICAgICAgICAgICAvLyBVc2VyIGhhZCBubyBpbnRlcmFjdGlvbiB3aXRoIHRoZSBwYWdlIHNvIGZhclxuICAgICAgICAgICAgICAgIGlmIChleGNlcHRpb24ubmFtZSA9PT0gJ05vdEFsbG93ZWRFcnJvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW90aW9uRXZlbnQgPSBhd2FpdCB0aGlzLnByb21wdEZvckRldmljZU1vdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobW90aW9uRXZlbnQgIT09ICdncmFudGVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNb3Rpb25FdmVudCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01vdGlvbkV2ZW50Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBtYWtlIHN1cmUgd2UgZ2V0IHRoZSBjYW1lcmEgc3RyZWFtXG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7XG4gICAgICAgICAgICAgICAgdmlkZW86IHRydWUsXG4gICAgICAgICAgICAgICAgYXVkaW86IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIElmIHdlIHN1Y2Nlc3NmdWxseSBhY3F1aXJlZCB0aGUgY2FtZXJhIHN0cmVhbSAtIHdlIGNhbiBzdG9wIGl0IGFuZCB3YWl0IHVudGlsIDh0aHdhbGwgcmVxdWVzdHMgaXQgYWdhaW5cbiAgICAgICAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKCh0cmFjaykgPT4ge1xuICAgICAgICAgICAgICAgIHRyYWNrLnN0b3AoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChleGNlcHRpb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2FtZXJhJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdGhpcy5vYmplY3QuZ2V0Q29tcG9uZW50KCd2aWV3Jyk7XG4gICAgICAgIHRoaXMub25VcGRhdGUgPSB0aGlzLm9uVXBkYXRlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25BdHRhY2ggPSB0aGlzLm9uQXR0YWNoLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25FeGNlcHRpb24gPSB0aGlzLm9uRXhjZXB0aW9uLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25DYW1lcmFTdGF0dXNDaGFuZ2UgPSB0aGlzLm9uQ2FtZXJhU3RhdHVzQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLnZpZXcgPSB0aGlzLm9iamVjdC5nZXRDb21wb25lbnQoJ3ZpZXcnKTtcbiAgICAgICAgaWYgKCF0aGlzLnVzZUN1c3RvbVVJT3ZlcmxheXMpIHtcbiAgICAgICAgICAgIE92ZXJsYXlzSGFuZGxlci5pbml0KCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0UGVybWlzc2lvbnMoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIFVzZXIgZGlkIG5vdCBncmFudCB0aGUgY2FtZXJhIG9yIG1vdGlvbkV2ZW50IHBlcm1pc3Npb25zXG4gICAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJzh0aHdhbGwtcGVybWlzc2lvbi1mYWlsJywgeyBkZXRhaWw6IGVycm9yIH0pKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLndhaXRGb3JYUjgoKTtcbiAgICAgICAgWFI4LlhyQ29udHJvbGxlci5jb25maWd1cmUoe1xuICAgICAgICAgICAgZGlzYWJsZVdvcmxkVHJhY2tpbmc6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5nbFRleHR1cmVSZW5kZXJlciA9IFhSOC5HbFRleHR1cmVSZW5kZXJlci5waXBlbGluZU1vZHVsZSgpO1xuICAgICAgICBYUjguYWRkQ2FtZXJhUGlwZWxpbmVNb2R1bGVzKFtcbiAgICAgICAgICAgIHRoaXMuZ2xUZXh0dXJlUmVuZGVyZXIsXG4gICAgICAgICAgICBYUjguWHJDb250cm9sbGVyLnBpcGVsaW5lTW9kdWxlKCksXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICBdKTtcbiAgICAgICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgICAgICAgY2FtZXJhQ29uZmlnOiB7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBYUjguWHJDb25maWcuY2FtZXJhKCkuQkFDSyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYW52YXM6IE1vZHVsZS5jYW52YXMsXG4gICAgICAgICAgICBhbGxvd2VkRGV2aWNlczogWFI4LlhyQ29uZmlnLmRldmljZSgpLkFOWSxcbiAgICAgICAgICAgIG93blJ1bkxvb3A6IGZhbHNlLFxuICAgICAgICB9O1xuICAgICAgICBYUjgucnVuKGNvbmZpZyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogOHRod2FsbCBwaXBlbGluZSBmdW5jdGlvblxuICAgICAqL1xuICAgIG9uQXR0YWNoKHBhcmFtcykge1xuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmVuZ2luZS5zY2VuZS5jb2xvckNsZWFyRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICBjb25zdCBnbCA9IE1vZHVsZS5jdHg7XG4gICAgICAgIGNvbnN0IHJvdCA9IHRoaXMub2JqZWN0LnJvdGF0aW9uV29ybGQ7XG4gICAgICAgIGNvbnN0IHBvcyA9IHRoaXMub2JqZWN0LmdldFRyYW5zbGF0aW9uV29ybGQoW10pO1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gQXJyYXkuZnJvbShwb3MpO1xuICAgICAgICB0aGlzLnJvdGF0aW9uID0gQXJyYXkuZnJvbShyb3QpO1xuICAgICAgICBYUjguWHJDb250cm9sbGVyLnVwZGF0ZUNhbWVyYVByb2plY3Rpb25NYXRyaXgoe1xuICAgICAgICAgICAgb3JpZ2luOiB7IHg6IHBvc1swXSwgeTogcG9zWzFdLCB6OiBwb3NbMl0gfSxcbiAgICAgICAgICAgIGZhY2luZzogeyB4OiByb3RbMF0sIHk6IHJvdFsxXSwgejogcm90WzJdLCB3OiByb3RbM10gfSxcbiAgICAgICAgICAgIGNhbToge1xuICAgICAgICAgICAgICAgIHBpeGVsUmVjdFdpZHRoOiBNb2R1bGUuY2FudmFzLndpZHRoLFxuICAgICAgICAgICAgICAgIHBpeGVsUmVjdEhlaWdodDogTW9kdWxlLmNhbnZhcy5oZWlnaHQsXG4gICAgICAgICAgICAgICAgbmVhckNsaXBQbGFuZTogdGhpcy52aWV3Lm5lYXIsXG4gICAgICAgICAgICAgICAgZmFyQ2xpcFBsYW5lOiB0aGlzLnZpZXcuZmFyLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZW5naW5lLnNjZW5lLm9uUHJlUmVuZGVyLnB1c2goKCkgPT4ge1xuICAgICAgICAgICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkRSQVdfRlJBTUVCVUZGRVIsIG51bGwpO1xuICAgICAgICAgICAgWFI4LnJ1blByZVJlbmRlcihEYXRlLm5vdygpKTtcbiAgICAgICAgICAgIFhSOC5ydW5SZW5kZXIoKTsgLy8gPC0tLSB0ZWxsIDh0aHdhbGwgdG8gZG8gaXQncyB0aGluZyAoYWx0ZXJuYXRpdmVseSBjYWxsIHRoaXMuZ2xUZXh0dXJlUmVuZGVyZXIub25SZW5kZXIoKSBpZiB5b3Ugb25seSBjYXJlIGFib3V0IGNhbWVyYSBmZWVkIClcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZW5naW5lLnNjZW5lLm9uUG9zdFJlbmRlci5wdXNoKCgpID0+IHtcbiAgICAgICAgICAgIFhSOC5ydW5Qb3N0UmVuZGVyKERhdGUubm93KCkpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiA4dGh3YWxsIHBpcGVsaW5lIGZ1bmN0aW9uXG4gICAgICovXG4gICAgb25DYW1lcmFTdGF0dXNDaGFuZ2UoZSkge1xuICAgICAgICBpZiAoZSAmJiBlLnN0YXR1cyA9PT0gJ2ZhaWxlZCcpIHtcbiAgICAgICAgICAgIHRoaXMub25FeGNlcHRpb24obmV3IEVycm9yKGBDYW1lcmEgZmFpbGVkIHdpdGggc3RhdHVzOiAke2Uuc3RhdHVzfWApKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIDh0aHdhbGwgcGlwZWxpbmUgZnVuY3Rpb25cbiAgICAgKi9cbiAgICBvblVwZGF0ZShlKSB7XG4gICAgICAgIGlmICghZS5wcm9jZXNzQ3B1UmVzdWx0LnJlYWxpdHkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHsgcm90YXRpb24sIHBvc2l0aW9uLCBpbnRyaW5zaWNzIH0gPSBlLnByb2Nlc3NDcHVSZXN1bHQucmVhbGl0eTtcbiAgICAgICAgdGhpcy5yb3RhdGlvblswXSA9IHJvdGF0aW9uLng7XG4gICAgICAgIHRoaXMucm90YXRpb25bMV0gPSByb3RhdGlvbi55O1xuICAgICAgICB0aGlzLnJvdGF0aW9uWzJdID0gcm90YXRpb24uejtcbiAgICAgICAgdGhpcy5yb3RhdGlvblszXSA9IHJvdGF0aW9uLnc7XG4gICAgICAgIHRoaXMucG9zaXRpb25bMF0gPSBwb3NpdGlvbi54O1xuICAgICAgICB0aGlzLnBvc2l0aW9uWzFdID0gcG9zaXRpb24ueTtcbiAgICAgICAgdGhpcy5wb3NpdGlvblsyXSA9IHBvc2l0aW9uLno7XG4gICAgICAgIGlmIChpbnRyaW5zaWNzKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0aW9uTWF0cml4ID0gdGhpcy52aWV3LnByb2plY3Rpb25NYXRyaXg7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcbiAgICAgICAgICAgICAgICAvKiBTb21lIHByb2Nlc3NDcHVSZXN1bHQucmVhbGl0eS5pbnRyaW5zaWNzIGFyZSBzZXQgdG8gSW5maW5pdHksXG4gICAgICAgICAgICAgICAgICogd2hpY2ggYnJha2VzIG91ciBwcm9qZWN0aW9uTWF0cml4LiBTbyB3ZSBqdXN0IGZpbHRlciB0aG9zZSBlbGVtZW50cyBvdXQuICovXG4gICAgICAgICAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShpbnRyaW5zaWNzW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0aW9uTWF0cml4W2ldID0gaW50cmluc2ljc1tpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvc2l0aW9uICYmIHJvdGF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5yb3RhdGlvbldvcmxkID0gdGhpcy5yb3RhdGlvbjtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnNldFRyYW5zbGF0aW9uV29ybGQodGhpcy5wb3NpdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiA4dGh3YWxsIHBpcGVsaW5lIGZ1bmN0aW9uXG4gICAgICovXG4gICAgb25FeGNlcHRpb24oZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignOHRod2FsbCBleGNlcHRpb246JywgZXJyb3IpO1xuICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJzh0aHdhbGwtZXJyb3InLCB7IGRldGFpbDogZXJyb3IgfSkpO1xuICAgIH1cbiAgICB3YWl0Rm9yWFI4KCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIF9yZWopID0+IHtcbiAgICAgICAgICAgIGlmICh3aW5kb3cuWFI4KSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3hybG9hZGVkJywgKCkgPT4gcmVzb2x2ZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IHsgQVJDYW1lcmE4dGh3YWxsIH07XG5jb25zdCBPdmVybGF5c0hhbmRsZXIgPSB7XG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmhhbmRsZVJlcXVlc3RVc2VySW50ZXJhY3Rpb24gPSB0aGlzLmhhbmRsZVJlcXVlc3RVc2VySW50ZXJhY3Rpb24uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVQZXJtaXNzaW9uRmFpbCA9IHRoaXMuaGFuZGxlUGVybWlzc2lvbkZhaWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVFcnJvciA9IHRoaXMuaGFuZGxlRXJyb3IuYmluZCh0aGlzKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJzh0aHdhbGwtcmVxdWVzdC11c2VyLWludGVyYWN0aW9uJywgdGhpcy5oYW5kbGVSZXF1ZXN0VXNlckludGVyYWN0aW9uKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJzh0aHdhbGwtcGVybWlzc2lvbi1mYWlsJywgdGhpcy5oYW5kbGVQZXJtaXNzaW9uRmFpbCk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCc4dGh3YWxsLWVycm9yJywgdGhpcy5oYW5kbGVFcnJvcik7XG4gICAgfSxcbiAgICBoYW5kbGVSZXF1ZXN0VXNlckludGVyYWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IG92ZXJsYXkgPSB0aGlzLnNob3dPdmVybGF5KHJlcXVlc3RQZXJtaXNzaW9uT3ZlcmxheSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCc4dGh3YWxsLXNhZmUtdG8tcmVxdWVzdC1wZXJtaXNzaW9ucycsICgpID0+IHtcbiAgICAgICAgICAgIG92ZXJsYXkucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgaGFuZGxlUGVybWlzc2lvbkZhaWw6IGZ1bmN0aW9uIChfcmVhc29uKSB7XG4gICAgICAgIHRoaXMuc2hvd092ZXJsYXkoZmFpbGVkUGVybWlzc2lvbk92ZXJsYXkpO1xuICAgIH0sXG4gICAgaGFuZGxlRXJyb3I6IGZ1bmN0aW9uIChfZXJyb3IpIHtcbiAgICAgICAgdGhpcy5zaG93T3ZlcmxheShydW50aW1lRXJyb3JPdmVybGF5KTtcbiAgICB9LFxuICAgIHNob3dPdmVybGF5OiBmdW5jdGlvbiAoaHRtbENvbnRlbnQpIHtcbiAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBvdmVybGF5LmlubmVySFRNTCA9IGh0bWxDb250ZW50O1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG92ZXJsYXkpO1xuICAgICAgICByZXR1cm4gb3ZlcmxheTtcbiAgICB9LFxufTtcbmNvbnN0IHJlcXVlc3RQZXJtaXNzaW9uT3ZlcmxheSA9IGBcbjxzdHlsZT5cbiAgI3JlcXVlc3QtcGVybWlzc2lvbi1vdmVybGF5IHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIHotaW5kZXg6IDk5OTtcbiAgICBjb2xvcjogI2ZmZjtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNSk7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmO1xuICB9XG5cbiAgLnJlcXVlc3QtcGVybWlzc2lvbi1vdmVybGF5X3RpdGxlIHtcbiAgICBtYXJnaW46IDMwcHg7XG4gICAgZm9udC1zaXplOiAzMnB4O1xuICB9XG5cbiAgLnJlcXVlc3QtcGVybWlzc2lvbi1vdmVybGF5X2J1dHRvbiB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2U4MDA4NjtcbiAgICBmb250LXNpemU6IDIycHg7XG4gICAgcGFkZGluZzogMTBweCAzMHB4O1xuICAgIGNvbG9yOiAjZmZmO1xuICAgIGJvcmRlci1yYWRpdXM6IDE1cHg7XG4gICAgYm9yZGVyOiBub25lO1xuICB9XG48L3N0eWxlPlxuXG48ZGl2IGlkPVwicmVxdWVzdC1wZXJtaXNzaW9uLW92ZXJsYXlcIj5cbiAgPGRpdiBjbGFzcz1cInJlcXVlc3QtcGVybWlzc2lvbi1vdmVybGF5X3RpdGxlXCI+VGhpcyBhcHAgcmVxdWlyZXMgdG8gdXNlIHlvdXIgY2FtZXJhIGFuZCBtb3Rpb24gc2Vuc29yczwvZGl2PlxuXG4gIDxidXR0b24gY2xhc3M9XCJyZXF1ZXN0LXBlcm1pc3Npb24tb3ZlcmxheV9idXR0b25cIiBvbmNsaWNrPVwid2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCc4dGh3YWxsLXNhZmUtdG8tcmVxdWVzdC1wZXJtaXNzaW9ucycpKVwiPk9LPC9idXR0b24+XG48L2Rpdj5gO1xuY29uc3QgZmFpbGVkUGVybWlzc2lvbk92ZXJsYXkgPSBgXG48c3R5bGU+XG4gICNmYWlsZWQtcGVybWlzc2lvbi1vdmVybGF5IHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIHotaW5kZXg6IDk5OTtcbiAgICBjb2xvcjogI2ZmZjtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNSk7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmO1xuICB9XG5cbiAgLmZhaWxlZC1wZXJtaXNzaW9uLW92ZXJsYXlfdGl0bGUge1xuICAgIG1hcmdpbjogMzBweDtcbiAgICBmb250LXNpemU6IDMycHg7XG4gIH1cblxuICAuZmFpbGVkLXBlcm1pc3Npb24tb3ZlcmxheV9idXR0b24ge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNlODAwODY7XG4gICAgZm9udC1zaXplOiAyMnB4O1xuICAgIHBhZGRpbmc6IDEwcHggMzBweDtcbiAgICBjb2xvcjogI2ZmZjtcbiAgICBib3JkZXItcmFkaXVzOiAxNXB4O1xuICAgIGJvcmRlcjogbm9uZTtcbiAgfVxuPC9zdHlsZT5cblxuPGRpdiBpZD1cImZhaWxlZC1wZXJtaXNzaW9uLW92ZXJsYXlcIj5cbiAgPGRpdiBjbGFzcz1cImZhaWxlZC1wZXJtaXNzaW9uLW92ZXJsYXlfdGl0bGVcIj5GYWlsZWQgdG8gZ3JhbnQgcGVybWlzc2lvbnMuIFJlc2V0IHRoZSB0aGUgcGVybWlzc2lvbnMgYW5kIHJlZnJlc2ggdGhlIHBhZ2UuPC9kaXY+XG5cbiAgPGJ1dHRvbiBjbGFzcz1cImZhaWxlZC1wZXJtaXNzaW9uLW92ZXJsYXlfYnV0dG9uXCIgb25jbGljaz1cIndpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVwiPlJlZnJlc2ggdGhlIHBhZ2U8L2J1dHRvbj5cbjwvZGl2PmA7XG5jb25zdCBydW50aW1lRXJyb3JPdmVybGF5ID0gYFxuPHN0eWxlPlxuICAjd2FsbC1lcnJvci1vdmVybGF5IHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIHotaW5kZXg6IDk5OTtcbiAgICBjb2xvcjogI2ZmZjtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNSk7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmO1xuICB9XG5cbiAgLndhbGwtZXJyb3Itb3ZlcmxheV90aXRsZSB7XG4gICAgbWFyZ2luOiAzMHB4O1xuICAgIGZvbnQtc2l6ZTogMzJweDtcbiAgfVxuXG4gIC53YWxsLWVycm9yLW92ZXJsYXlfYnV0dG9uIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTgwMDg2O1xuICAgIGZvbnQtc2l6ZTogMjJweDtcbiAgICBwYWRkaW5nOiAxMHB4IDMwcHg7XG4gICAgY29sb3I6ICNmZmY7XG4gICAgYm9yZGVyLXJhZGl1czogMTVweDtcbiAgICBib3JkZXI6IG5vbmU7XG4gIH1cbjwvc3R5bGU+XG5cbjxkaXYgaWQ9XCJ3YWxsLWVycm9yLW92ZXJsYXlcIj5cbiAgPGRpdiBjbGFzcz1cIndhbGwtZXJyb3Itb3ZlcmxheV90aXRsZVwiPkVycm9yIGhhcyBvY2N1cnJlZC4gUGxlYXNlIHJlbG9hZCB0aGUgcGFnZTwvZGl2PlxuXG4gIDxidXR0b24gY2xhc3M9XCJ3YWxsLWVycm9yLW92ZXJsYXlfYnV0dG9uXCIgb25jbGljaz1cIndpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVwiPlJlbG9hZDwvYnV0dG9uPlxuPC9kaXY+YDtcbiIsICJjb25zdCB0ZW1wVmVjID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbmNvbnN0IHRlbXBRdWF0ID0gbmV3IEZsb2F0MzJBcnJheSg0KTtcbmV4cG9ydCBmdW5jdGlvbiBzZXRYUlJpZ2lkVHJhbnNmb3JtTG9jYWwobywgdHJhbnNmb3JtKSB7XG4gICAgY29uc3QgciA9IHRyYW5zZm9ybS5vcmllbnRhdGlvbjtcbiAgICB0ZW1wUXVhdFswXSA9IHIueDtcbiAgICB0ZW1wUXVhdFsxXSA9IHIueTtcbiAgICB0ZW1wUXVhdFsyXSA9IHIuejtcbiAgICB0ZW1wUXVhdFszXSA9IHIudztcbiAgICBjb25zdCB0ID0gdHJhbnNmb3JtLnBvc2l0aW9uO1xuICAgIHRlbXBWZWNbMF0gPSB0Lng7XG4gICAgdGVtcFZlY1sxXSA9IHQueTtcbiAgICB0ZW1wVmVjWzJdID0gdC56O1xuICAgIG8ucmVzZXRQb3NpdGlvblJvdGF0aW9uKCk7XG4gICAgby5zZXRSb3RhdGlvbkxvY2FsKHRlbXBRdWF0KTtcbiAgICBvLnRyYW5zbGF0ZUxvY2FsKHRlbXBWZWMpO1xufVxuIiwgInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IENvbXBvbmVudCwgRW1pdHRlciB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IHNldFhSUmlnaWRUcmFuc2Zvcm1Mb2NhbCB9IGZyb20gJy4vdXRpbHMvd2VieHIuanMnO1xudmFyIHRlbXBWZWMzID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbnZhciB0ZW1wUXVhdCA9IG5ldyBGbG9hdDMyQXJyYXkoNCk7XG4vKipcbiAqIFNldHMgdGhlIGxvY2F0aW9uIG9mIHRoZSBvYmplY3QgdG8gdGhlIGxvY2F0aW9uIG9mIGFuIFhSQW5jaG9yXG4gKlxuICogQ3JlYXRlIGFuY2hvcnMgdXNpbmcgdGhlIGBBbmNob3IuY3JlYXRlKClgIHN0YXRpYyBmdW5jdGlvbi5cbiAqXG4gKiBFeGFtcGxlIGZvciB1c2Ugd2l0aCBjdXJzb3I6XG4gKiBgYGBqc1xuICogY3Vyc29yVGFyZ2V0Lm9uQ2xpY2suYWRkKChvYmplY3QsIGN1cnNvciwgb3JpZ2luYWxFdmVudCkgPT4ge1xuICogICAgIC8qIE9ubHkgZXZlbnRzIGluIFhSIHdpbGwgaGF2ZSBhIGZyYW1lIGF0dGFjaGVkICpcXC9cbiAqICAgICBpZighb3JpZ2luYWxFdmVudC5mcmFtZSkgcmV0dXJuO1xuICogICAgIEFuY2hvci5jcmVhdGUoYW5jaG9yT2JqZWN0LCB7dXVpZDogaWQsIHBlcnNpc3Q6IHRydWV9LCBvcmlnaW5hbEV2ZW50LmZyYW1lKTtcbiAqIH0pO1xuICogYGBgXG4gKi9cbmNsYXNzIEFuY2hvciBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2FuY2hvcic7XG4gICAgLyogU3RhdGljIG1hbmFnZW1lbnQgb2YgYWxsIGFuY2hvcnMgKi9cbiAgICBzdGF0aWMgI2FuY2hvcnMgPSBbXTtcbiAgICBwZXJzaXN0ID0gZmFsc2U7XG4gICAgLyoqIFVuaXF1ZSBpZGVudGlmaWVyIHRvIGxvYWQgYSBwZXJzaXN0ZW50IGFuY2hvciBmcm9tLCBvciBlbXB0eS9udWxsIGlmIHVua25vd24gKi9cbiAgICB1dWlkID0gbnVsbDtcbiAgICAvKiogVGhlIHhyQW5jaG9yLCBpZiBjcmVhdGVkICovXG4gICAgeHJBbmNob3IgPSBudWxsO1xuICAgIC8qKiBFbWl0cyBldmVudHMgd2hlbiB0aGUgYW5jaG9yIGlzIGNyZWF0ZWQgZWl0aGVyIGJ5IGJlaW5nIHJlc3RvcmVkIG9yIG5ld2x5IGNyZWF0ZWQgKi9cbiAgICBvbkNyZWF0ZSA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqIFdoZXRoZXIgdGhlIGFuY2hvciBpcyBjdXJyZW50bHkgYmVpbmcgdHJhY2tlZCAqL1xuICAgIHZpc2libGUgPSBmYWxzZTtcbiAgICAvKiogRW1pdHMgYW4gZXZlbnQgd2hlbiB0aGlzIGFuY2hvciBzdGFydHMgdHJhY2tpbmcgKi9cbiAgICBvblRyYWNraW5nRm91bmQgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKiBFbWl0cyBhbiBldmVudCB3aGVuIHRoaXMgYW5jaG9yIHN0b3BzIHRyYWNraW5nICovXG4gICAgb25UcmFja2luZ0xvc3QgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKiBYUkZyYW1lIHRvIHVzZSBmb3IgY3JlYXRpbmcgdGhlIGFuY2hvciAqL1xuICAgIHhyRnJhbWUgPSBudWxsO1xuICAgIC8qKiBYUkhpdFRlc3RSZXN1bHQgdG8gdXNlIGZvciBjcmVhdGluZyB0aGUgYW5jaG9yICovXG4gICAgeHJIaXRSZXN1bHQgPSBudWxsO1xuICAgIC8qKiBSZXRyaWV2ZSBhbGwgYW5jaG9ycyBvZiB0aGUgY3VycmVudCBzY2VuZSAqL1xuICAgIHN0YXRpYyBnZXRBbGxBbmNob3JzKCkge1xuICAgICAgICByZXR1cm4gQW5jaG9yLiNhbmNob3JzO1xuICAgIH1cbiAgICBzdGF0aWMgI2FkZEFuY2hvcihhbmNob3IpIHtcbiAgICAgICAgQW5jaG9yLiNhbmNob3JzLnB1c2goYW5jaG9yKTtcbiAgICB9XG4gICAgc3RhdGljICNyZW1vdmVBbmNob3IoYW5jaG9yKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gQW5jaG9yLiNhbmNob3JzLmluZGV4T2YoYW5jaG9yKTtcbiAgICAgICAgaWYgKGluZGV4IDwgMClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgQW5jaG9yLiNhbmNob3JzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBhbmNob3JcbiAgICAgKlxuICAgICAqIEBwYXJhbSBvIE9iamVjdCB0byBhdHRhY2ggdGhlIGNvbXBvbmVudCB0b1xuICAgICAqIEBwYXJhbSBwYXJhbXMgUGFyYW1ldGVycyBmb3IgdGhlIGFuY2hvciBjb21wb25lbnRcbiAgICAgKiBAcGFyYW0gZnJhbWUgWFJGcmFtZSB0byB1c2UgZm9yIGFuY2hvciBjcmF0aW9uLCBpZiBudWxsLCB3aWxsIHVzZSB0aGUgY3VycmVudCBmcmFtZSBpZiBhdmFpbGFibGVcbiAgICAgKiBAcGFyYW0gaGl0UmVzdWx0IE9wdGlvbmFsIGhpdC10ZXN0IHJlc3VsdCB0byBjcmVhdGUgdGhlIGFuY2hvciB3aXRoXG4gICAgICogQHJldHVybnMgUHJvbWlzZSBmb3IgdGhlIG5ld2x5IGNyZWF0ZWQgYW5jaG9yIGNvbXBvbmVudFxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUobywgcGFyYW1zLCBmcmFtZSwgaGl0UmVzdWx0KSB7XG4gICAgICAgIGNvbnN0IGEgPSBvLmFkZENvbXBvbmVudChBbmNob3IsIHsgLi4ucGFyYW1zLCBhY3RpdmU6IGZhbHNlIH0pO1xuICAgICAgICBpZiAoYSA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBhLnhySGl0UmVzdWx0ID0gaGl0UmVzdWx0ID8/IG51bGw7XG4gICAgICAgIGEueHJGcmFtZSA9IGZyYW1lID8/IG51bGw7XG4gICAgICAgIGEub25DcmVhdGUub25jZSgoKSA9PiAoKGEueHJGcmFtZSA9IG51bGwpLCAoYS54ckhpdFJlc3VsdCA9IG51bGwpKSk7XG4gICAgICAgIGEuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGEub25DcmVhdGUucHJvbWlzZSgpO1xuICAgIH1cbiAgICAjZ2V0RnJhbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnhyRnJhbWUgfHwgdGhpcy5lbmdpbmUueHIuZnJhbWU7XG4gICAgfVxuICAgIGFzeW5jICNjcmVhdGVBbmNob3IoKSB7XG4gICAgICAgIGlmICghdGhpcy4jZ2V0RnJhbWUoKS5jcmVhdGVBbmNob3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBjcmVhdGUgYW5jaG9yIC0gYW5jaG9ycyBub3Qgc3VwcG9ydGVkLCBkaWQgeW91IGVuYWJsZSB0aGUgJ2FuY2hvcnMnIFdlYlhSIGZlYXR1cmU/XCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnhySGl0UmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy54ckhpdFJlc3VsdC5jcmVhdGVBbmNob3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWVzdGVkIGFuY2hvciBvbiBYUkhpdFRlc3RSZXN1bHQsIGJ1dCBXZWJYUiBoaXQtdGVzdCBmZWF0dXJlIGlzIG5vdCBhdmFpbGFibGUuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ckhpdFJlc3VsdC5jcmVhdGVBbmNob3IoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LmdldFRyYW5zbGF0aW9uV29ybGQodGVtcFZlYzMpO1xuICAgICAgICAgICAgdGVtcFF1YXQuc2V0KHRoaXMub2JqZWN0LnJvdGF0aW9uV29ybGQpO1xuICAgICAgICAgICAgY29uc3Qgcm90YXRpb24gPSB0ZW1wUXVhdDtcbiAgICAgICAgICAgIGNvbnN0IGFuY2hvclBvc2UgPSBuZXcgWFJSaWdpZFRyYW5zZm9ybSh7IHg6IHRlbXBWZWMzWzBdLCB5OiB0ZW1wVmVjM1sxXSwgejogdGVtcFZlYzNbMl0gfSwgeyB4OiByb3RhdGlvblswXSwgeTogcm90YXRpb25bMV0sIHo6IHJvdGF0aW9uWzJdLCB3OiByb3RhdGlvblszXSB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiNnZXRGcmFtZSgpPy5jcmVhdGVBbmNob3IoYW5jaG9yUG9zZSwgdGhpcy5lbmdpbmUueHIuY3VycmVudFJlZmVyZW5jZVNwYWNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAjb25BZGRBbmNob3IoYW5jaG9yKSB7XG4gICAgICAgIGlmICghYW5jaG9yKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAodGhpcy5wZXJzaXN0KSB7XG4gICAgICAgICAgICBpZiAoYW5jaG9yLnJlcXVlc3RQZXJzaXN0ZW50SGFuZGxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBhbmNob3IucmVxdWVzdFBlcnNpc3RlbnRIYW5kbGUoKS50aGVuKCh1dWlkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXVpZCA9IHV1aWQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI29uQ3JlYXRlKGFuY2hvcik7XG4gICAgICAgICAgICAgICAgICAgIEFuY2hvci4jYWRkQW5jaG9yKHRoaXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignYW5jaG9yOiBQZXJzaXN0ZW50IGFuY2hvcnMgYXJlIG5vdCBzdXBwb3J0ZWQgYnkgeW91ciBjbGllbnQuIElnbm9yaW5nIHBlcnNpc3QgcHJvcGVydHkuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jb25DcmVhdGUoYW5jaG9yKTtcbiAgICB9XG4gICAgI29uUmVzdG9yZUFuY2hvcihhbmNob3IpIHtcbiAgICAgICAgdGhpcy4jb25DcmVhdGUoYW5jaG9yKTtcbiAgICB9XG4gICAgI29uQ3JlYXRlKGFuY2hvcikge1xuICAgICAgICB0aGlzLnhyQW5jaG9yID0gYW5jaG9yO1xuICAgICAgICB0aGlzLm9uQ3JlYXRlLm5vdGlmeSh0aGlzKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnV1aWQgJiYgdGhpcy5lbmdpbmUueHIpIHtcbiAgICAgICAgICAgIHRoaXMucGVyc2lzdCA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmdpbmUueHIuc2Vzc2lvbi5yZXN0b3JlUGVyc2lzdGVudEFuY2hvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdhbmNob3I6IFBlcnNpc3RlbnQgYW5jaG9ycyBhcmUgbm90IHN1cHBvcnRlZCBieSB5b3VyIGNsaWVudC4gSWdub3JpbmcgcGVyc2lzdCBwcm9wZXJ0eS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW5naW5lLnhyLnNlc3Npb24ucmVzdG9yZVBlcnNpc3RlbnRBbmNob3IodGhpcy51dWlkKS50aGVuKHRoaXMuI29uUmVzdG9yZUFuY2hvci5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLiNnZXRGcmFtZSgpKSB7XG4gICAgICAgICAgICB0aGlzLiNjcmVhdGVBbmNob3IoKS50aGVuKHRoaXMuI29uQWRkQW5jaG9yLmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBbmNob3JzIGNhbiBvbmx5IGJlIGNyZWF0ZWQgZHVyaW5nIHRoZSBYUiBmcmFtZSBpbiBhbiBhY3RpdmUgWFIgc2Vzc2lvbicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnhyQW5jaG9yIHx8ICF0aGlzLmVuZ2luZS54cilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgLyogV2UgbmVlZCB0byB1c2UgdGhlIGFjdHVhbCBmcmFtZSBmcm9tIHRoZSBkcmF3IGNhbGxiYWNrIGhlcmUgKi9cbiAgICAgICAgY29uc3QgcG9zZSA9IHRoaXMuZW5naW5lLnhyLmZyYW1lLmdldFBvc2UodGhpcy54ckFuY2hvci5hbmNob3JTcGFjZSwgdGhpcy5lbmdpbmUueHIuY3VycmVudFJlZmVyZW5jZVNwYWNlKTtcbiAgICAgICAgY29uc3QgdmlzaWJsZSA9ICEhcG9zZTtcbiAgICAgICAgaWYgKHZpc2libGUgIT0gdGhpcy52aXNpYmxlKSB7XG4gICAgICAgICAgICB0aGlzLnZpc2libGUgPSB2aXNpYmxlO1xuICAgICAgICAgICAgKHZpc2libGUgPyB0aGlzLm9uVHJhY2tpbmdGb3VuZCA6IHRoaXMub25UcmFja2luZ0xvc3QpLm5vdGlmeSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocG9zZSkge1xuICAgICAgICAgICAgc2V0WFJSaWdpZFRyYW5zZm9ybUxvY2FsKHRoaXMub2JqZWN0LCBwb3NlLnRyYW5zZm9ybSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25EZXN0cm95KCkge1xuICAgICAgICBBbmNob3IuI3JlbW92ZUFuY2hvcih0aGlzKTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5ib29sKGZhbHNlKVxuXSwgQW5jaG9yLnByb3RvdHlwZSwgXCJwZXJzaXN0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5zdHJpbmcoKVxuXSwgQW5jaG9yLnByb3RvdHlwZSwgXCJ1dWlkXCIsIHZvaWQgMCk7XG5leHBvcnQgeyBBbmNob3IgfTtcbiIsICJpbXBvcnQgeyBDb21wb25lbnQsIEVtaXR0ZXIgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuLyoqXG4gKiBDbGljay9ob3Zlci9tb3ZlL2J1dHRvbiB0YXJnZXQgZm9yIFtjdXJzb3JdKCNjdXJzb3IpLlxuICpcbiAqIFRvIHRyaWdnZXIgY29kZSB3aGVuIGNsaWNraW5nLCBob3ZlcmluZywgdW5ob3ZlcmluZywgbW92aW5nIGN1cnNvciwgcHJlc3NpbmdcbiAqIGN1cnNvciBidXR0b24gb3IgcmVsZWFzaW5nIGN1cnNvciBidXR0b24sIHVzZSBgLmFkZENsaWNrRnVuY3Rpb24oZilgLFxuICogYC5hZGRIb3ZlckZ1bmN0aW9uKGYpYCwgYC5hZGRVbkhvdmVyRnVuY3Rpb24oZilgLFxuICogYC5hZGRNb3ZlRnVuY3Rpb24oZilgLCBgLmFkZERvd25GdW5jdGlvbihmKWAgYW5kXG4gKiBgLmFkZFVwRnVuY3Rpb24oZilgIHJlc3BlY3RpdmVseSB3aXRoIGFueSBgZnVuY3Rpb24gZigpIHt9YC5cbiAqXG4gKiBUbyBjYWxsIG1lbWJlcnMgb24gYSBkaWZmZXJlbnQgY29tcG9uZW50LCB5b3UgY2FuIHNldCB1cCBhIGN1cnNvciB0YXJnZXQgbGlrZVxuICogc286XG4gKlxuICogYGBganNcbiAqIHN0YXJ0OiBmdW5jdGlvbigpIHtcbiAqICAgbGV0IHRhcmdldCA9IHRoaXMub2JqZWN0LmFkZENvbXBvbmVudCgnY3Vyc29yLXRhcmdldCcpO1xuICogICB0YXJnZXQub25DbGljay5hZGQodGhpcy5vbkNsaWNrLmJpbmQodGhpcykpO1xuICogfSxcbiAqIG9uQ2xpY2s6IGZ1bmN0aW9uKCkge1xuICogICBjb25zb2xlLmxvZyh0aGlzLm9iamVjdC5uYW1lLCBcIndhcyBjbGlja2VkIVwiKTtcbiAqIH1cbiAqIGBgYFxuICogKipGdW5jdGlvbnM6KipcbiAqXG4gKiBgYGBqc1xuICogY29uc3QgdGFyZ2V0ID0gdGhpcy5vYmplY3QuZ2V0Q29tcG9uZW50KEN1cnNvclRhcmdldCk7XG4gKiBjb25zdCBjYWxsYmFjayA9IGZ1bmN0aW9uKG9iamVjdCwgY3Vyc29yQ29tcG9uZW50KSB7fTtcbiAqXG4gKiB0YXJnZXQub25Ib3Zlci5hZGQoY2FsbGJhY2spO1xuICogdGFyZ2V0Lm9uSG92ZXIucmVtb3ZlKGNhbGxiYWNrKTtcbiAqXG4gKiB0YXJnZXQub25VbkhvdmVyLmFkZChjYWxsYmFjayk7XG4gKiB0YXJnZXQub25VbkhvdmVyLnJlbW92ZShjYWxsYmFjayk7XG4gKlxuICogdGFyZ2V0Lm9uQ2xpY2suYWRkKGNhbGxiYWNrKTtcbiAqIHRhcmdldC5vbkNsaWNrLnJlbW92ZShjYWxsYmFjayk7XG4gKlxuICogdGFyZ2V0Lm9uTW92ZS5hZGQoY2FsbGJhY2spO1xuICogdGFyZ2V0Lm9uTW92ZS5yZW1vdmUoY2FsbGJhY2spO1xuICpcbiAqIHRhcmdldC5vbkRvd24uYWRkKGNhbGxiYWNrKTtcbiAqIHRhcmdldC5vbkRvd24ucmVtb3ZlKGNhbGxiYWNrKTtcbiAqXG4gKiB0YXJnZXQub25VcC5hZGQoY2FsbGJhY2spO1xuICogdGFyZ2V0Lm9uVXAucmVtb3ZlKGNhbGxiYWNrKTtcbiAqIGBgYFxuICpcbiAqICoqUmVxdWlyZW1lbnRzOioqXG4gKiAtIGEgYGNvbGxpc2lvbmAgY29tcG9uZW50IHRvIGJlIGF0dGFjaGVkIHRvIHRoZSBzYW1lIG9iamVjdC5cbiAqXG4gKiBTZWUgW0FuaW1hdGlvbiBFeGFtcGxlXSgvc2hvd2Nhc2UvYW5pbWF0aW9uKS5cbiAqL1xuY2xhc3MgQ3Vyc29yVGFyZ2V0IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnY3Vyc29yLXRhcmdldCc7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7fTtcbiAgICAvKiogRW1pdHRlciBmb3IgZXZlbnRzIHdoZW4gdGhlIHRhcmdldCBpcyBob3ZlcmVkICovXG4gICAgb25Ib3ZlciA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqIEVtaXR0ZXIgZm9yIGV2ZW50cyB3aGVuIHRoZSB0YXJnZXQgaXMgdW5ob3ZlcmVkICovXG4gICAgb25VbmhvdmVyID0gbmV3IEVtaXR0ZXIoKTtcbiAgICAvKiogRW1pdHRlciBmb3IgZXZlbnRzIHdoZW4gdGhlIHRhcmdldCBpcyBjbGlja2VkICovXG4gICAgb25DbGljayA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqIEVtaXR0ZXIgZm9yIGV2ZW50cyB3aGVuIHRoZSBjdXJzb3IgbW92ZXMgb24gdGhlIHRhcmdldCAqL1xuICAgIG9uTW92ZSA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqIEVtaXR0ZXIgZm9yIGV2ZW50cyB3aGVuIHRoZSB1c2VyIHByZXNzZWQgdGhlIHNlbGVjdCBidXR0b24gb24gdGhlIHRhcmdldCAqL1xuICAgIG9uRG93biA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqIEVtaXR0ZXIgZm9yIGV2ZW50cyB3aGVuIHRoZSB1c2VyIHVucHJlc3NlZCB0aGUgc2VsZWN0IGJ1dHRvbiBvbiB0aGUgdGFyZ2V0ICovXG4gICAgb25VcCA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHRoZSBlbWl0dGVyIGluc3RlYWQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqICAgIHRoaXMub25Ib3Zlci5hZGQoZik7XG4gICAgICovXG4gICAgYWRkSG92ZXJGdW5jdGlvbihmKSB7XG4gICAgICAgIHRoaXMub25Ib3Zlci5hZGQoZik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSB0aGUgZW1pdHRlciBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAgICB0aGlzLm9uSG92ZXIucmVtb3ZlKGYpO1xuICAgICAqL1xuICAgIHJlbW92ZUhvdmVyRnVuY3Rpb24oZikge1xuICAgICAgICB0aGlzLm9uSG92ZXIucmVtb3ZlKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgdGhpcy5vblVuaG92ZXIuYWRkKGYpO1xuICAgICAqL1xuICAgIGFkZFVuSG92ZXJGdW5jdGlvbihmKSB7XG4gICAgICAgIHRoaXMub25VbmhvdmVyLmFkZChmKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHRoZSBlbWl0dGVyIGluc3RlYWQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqICAgIHRoaXMub25VbmhvdmVyLnJlbW92ZShmKTtcbiAgICAgKi9cbiAgICByZW1vdmVVbkhvdmVyRnVuY3Rpb24oZikge1xuICAgICAgICB0aGlzLm9uVW5ob3Zlci5yZW1vdmUoZik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSB0aGUgZW1pdHRlciBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAgICB0aGlzLm9uQ2xpY2suYWRkKGYpO1xuICAgICAqL1xuICAgIGFkZENsaWNrRnVuY3Rpb24oZikge1xuICAgICAgICB0aGlzLm9uQ2xpY2suYWRkKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgY29tcG9uZW50Lm9uQ2xpY2sucmVtb3ZlKGYpO1xuICAgICAqL1xuICAgIHJlbW92ZUNsaWNrRnVuY3Rpb24oZikge1xuICAgICAgICB0aGlzLm9uQ2xpY2sucmVtb3ZlKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgY29tcG9uZW50Lm9uTW92ZS5hZGQoZik7XG4gICAgICovXG4gICAgYWRkTW92ZUZ1bmN0aW9uKGYpIHtcbiAgICAgICAgdGhpcy5vbk1vdmUuYWRkKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgY29tcG9uZW50Lm9uTW92ZS5yZW1vdmUoZik7XG4gICAgICovXG4gICAgcmVtb3ZlTW92ZUZ1bmN0aW9uKGYpIHtcbiAgICAgICAgdGhpcy5vbk1vdmUucmVtb3ZlKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgY29tcG9uZW50Lm9uRG93bi5hZGQoZik7XG4gICAgICovXG4gICAgYWRkRG93bkZ1bmN0aW9uKGYpIHtcbiAgICAgICAgdGhpcy5vbkRvd24uYWRkKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgY29tcG9uZW50Lm9uRG93bi5yZW1vdmUoZik7XG4gICAgICovXG4gICAgcmVtb3ZlRG93bkZ1bmN0aW9uKGYpIHtcbiAgICAgICAgdGhpcy5vbkRvd24ucmVtb3ZlKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgY29tcG9uZW50Lm9uVXAuYWRkKGYpO1xuICAgICAqL1xuICAgIGFkZFVwRnVuY3Rpb24oZikge1xuICAgICAgICB0aGlzLm9uVXAuYWRkKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgY29tcG9uZW50Lm9uVXAucmVtb3ZlKGYpO1xuICAgICAqL1xuICAgIHJlbW92ZVVwRnVuY3Rpb24oZikge1xuICAgICAgICB0aGlzLm9uVXAucmVtb3ZlKGYpO1xuICAgIH1cbn1cbmV4cG9ydCB7IEN1cnNvclRhcmdldCB9O1xuIiwgIi8qKlxuICogQ29tbW9uIHV0aWxpdGllc1xuICogQG1vZHVsZSBnbE1hdHJpeFxuICovXG4vLyBDb25maWd1cmF0aW9uIENvbnN0YW50c1xuZXhwb3J0IHZhciBFUFNJTE9OID0gMC4wMDAwMDE7XG5leHBvcnQgdmFyIEFSUkFZX1RZUEUgPSB0eXBlb2YgRmxvYXQzMkFycmF5ICE9PSAndW5kZWZpbmVkJyA/IEZsb2F0MzJBcnJheSA6IEFycmF5O1xuZXhwb3J0IHZhciBSQU5ET00gPSBNYXRoLnJhbmRvbTtcbi8qKlxuICogU2V0cyB0aGUgdHlwZSBvZiBhcnJheSB1c2VkIHdoZW4gY3JlYXRpbmcgbmV3IHZlY3RvcnMgYW5kIG1hdHJpY2VzXG4gKlxuICogQHBhcmFtIHtGbG9hdDMyQXJyYXlDb25zdHJ1Y3RvciB8IEFycmF5Q29uc3RydWN0b3J9IHR5cGUgQXJyYXkgdHlwZSwgc3VjaCBhcyBGbG9hdDMyQXJyYXkgb3IgQXJyYXlcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0TWF0cml4QXJyYXlUeXBlKHR5cGUpIHtcbiAgQVJSQVlfVFlQRSA9IHR5cGU7XG59XG52YXIgZGVncmVlID0gTWF0aC5QSSAvIDE4MDtcbi8qKlxuICogQ29udmVydCBEZWdyZWUgVG8gUmFkaWFuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGEgQW5nbGUgaW4gRGVncmVlc1xuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0b1JhZGlhbihhKSB7XG4gIHJldHVybiBhICogZGVncmVlO1xufVxuLyoqXG4gKiBUZXN0cyB3aGV0aGVyIG9yIG5vdCB0aGUgYXJndW1lbnRzIGhhdmUgYXBwcm94aW1hdGVseSB0aGUgc2FtZSB2YWx1ZSwgd2l0aGluIGFuIGFic29sdXRlXG4gKiBvciByZWxhdGl2ZSB0b2xlcmFuY2Ugb2YgZ2xNYXRyaXguRVBTSUxPTiAoYW4gYWJzb2x1dGUgdG9sZXJhbmNlIGlzIHVzZWQgZm9yIHZhbHVlcyBsZXNzXG4gKiB0aGFuIG9yIGVxdWFsIHRvIDEuMCwgYW5kIGEgcmVsYXRpdmUgdG9sZXJhbmNlIGlzIHVzZWQgZm9yIGxhcmdlciB2YWx1ZXMpXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGEgVGhlIGZpcnN0IG51bWJlciB0byB0ZXN0LlxuICogQHBhcmFtIHtOdW1iZXJ9IGIgVGhlIHNlY29uZCBudW1iZXIgdG8gdGVzdC5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSBudW1iZXJzIGFyZSBhcHByb3hpbWF0ZWx5IGVxdWFsLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhhLCBiKSB7XG4gIHJldHVybiBNYXRoLmFicyhhIC0gYikgPD0gRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYSksIE1hdGguYWJzKGIpKTtcbn1cbmlmICghTWF0aC5oeXBvdCkgTWF0aC5oeXBvdCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHkgPSAwLFxuICAgICAgaSA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cbiAgd2hpbGUgKGktLSkge1xuICAgIHkgKz0gYXJndW1lbnRzW2ldICogYXJndW1lbnRzW2ldO1xuICB9XG5cbiAgcmV0dXJuIE1hdGguc3FydCh5KTtcbn07IiwgImltcG9ydCAqIGFzIGdsTWF0cml4IGZyb20gXCIuL2NvbW1vbi5qc1wiO1xuLyoqXG4gKiAzeDMgTWF0cml4XG4gKiBAbW9kdWxlIG1hdDNcbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgaWRlbnRpdHkgbWF0M1xuICpcbiAqIEByZXR1cm5zIHttYXQzfSBhIG5ldyAzeDMgbWF0cml4XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDkpO1xuXG4gIGlmIChnbE1hdHJpeC5BUlJBWV9UWVBFICE9IEZsb2F0MzJBcnJheSkge1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgICBvdXRbM10gPSAwO1xuICAgIG91dFs1XSA9IDA7XG4gICAgb3V0WzZdID0gMDtcbiAgICBvdXRbN10gPSAwO1xuICB9XG5cbiAgb3V0WzBdID0gMTtcbiAgb3V0WzRdID0gMTtcbiAgb3V0WzhdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ29waWVzIHRoZSB1cHBlci1sZWZ0IDN4MyB2YWx1ZXMgaW50byB0aGUgZ2l2ZW4gbWF0My5cbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIDN4MyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhICAgdGhlIHNvdXJjZSA0eDQgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21NYXQ0KG91dCwgYSkge1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSBhWzJdO1xuICBvdXRbM10gPSBhWzRdO1xuICBvdXRbNF0gPSBhWzVdO1xuICBvdXRbNV0gPSBhWzZdO1xuICBvdXRbNl0gPSBhWzhdO1xuICBvdXRbN10gPSBhWzldO1xuICBvdXRbOF0gPSBhWzEwXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBtYXQzIGluaXRpYWxpemVkIHdpdGggdmFsdWVzIGZyb20gYW4gZXhpc3RpbmcgbWF0cml4XG4gKlxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgbWF0cml4IHRvIGNsb25lXG4gKiBAcmV0dXJucyB7bWF0M30gYSBuZXcgM3gzIG1hdHJpeFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZShhKSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSg5KTtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgb3V0WzNdID0gYVszXTtcbiAgb3V0WzRdID0gYVs0XTtcbiAgb3V0WzVdID0gYVs1XTtcbiAgb3V0WzZdID0gYVs2XTtcbiAgb3V0WzddID0gYVs3XTtcbiAgb3V0WzhdID0gYVs4XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ29weSB0aGUgdmFsdWVzIGZyb20gb25lIG1hdDMgdG8gYW5vdGhlclxuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjb3B5KG91dCwgYSkge1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSBhWzJdO1xuICBvdXRbM10gPSBhWzNdO1xuICBvdXRbNF0gPSBhWzRdO1xuICBvdXRbNV0gPSBhWzVdO1xuICBvdXRbNl0gPSBhWzZdO1xuICBvdXRbN10gPSBhWzddO1xuICBvdXRbOF0gPSBhWzhdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgbWF0MyB3aXRoIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbTAwIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDAgcG9zaXRpb24gKGluZGV4IDApXG4gKiBAcGFyYW0ge051bWJlcn0gbTAxIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDEgcG9zaXRpb24gKGluZGV4IDEpXG4gKiBAcGFyYW0ge051bWJlcn0gbTAyIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDIgcG9zaXRpb24gKGluZGV4IDIpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEwIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDAgcG9zaXRpb24gKGluZGV4IDMpXG4gKiBAcGFyYW0ge051bWJlcn0gbTExIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDEgcG9zaXRpb24gKGluZGV4IDQpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEyIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDIgcG9zaXRpb24gKGluZGV4IDUpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIwIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDAgcG9zaXRpb24gKGluZGV4IDYpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIxIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDEgcG9zaXRpb24gKGluZGV4IDcpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIyIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDIgcG9zaXRpb24gKGluZGV4IDgpXG4gKiBAcmV0dXJucyB7bWF0M30gQSBuZXcgbWF0M1xuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVmFsdWVzKG0wMCwgbTAxLCBtMDIsIG0xMCwgbTExLCBtMTIsIG0yMCwgbTIxLCBtMjIpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDkpO1xuICBvdXRbMF0gPSBtMDA7XG4gIG91dFsxXSA9IG0wMTtcbiAgb3V0WzJdID0gbTAyO1xuICBvdXRbM10gPSBtMTA7XG4gIG91dFs0XSA9IG0xMTtcbiAgb3V0WzVdID0gbTEyO1xuICBvdXRbNl0gPSBtMjA7XG4gIG91dFs3XSA9IG0yMTtcbiAgb3V0WzhdID0gbTIyO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXQgdGhlIGNvbXBvbmVudHMgb2YgYSBtYXQzIHRvIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMCBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAwIHBvc2l0aW9uIChpbmRleCAwKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMSBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAxIHBvc2l0aW9uIChpbmRleCAxKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMiBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAyIHBvc2l0aW9uIChpbmRleCAyKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMCBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAwIHBvc2l0aW9uIChpbmRleCAzKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMSBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAxIHBvc2l0aW9uIChpbmRleCA0KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMiBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAyIHBvc2l0aW9uIChpbmRleCA1KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMCBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAwIHBvc2l0aW9uIChpbmRleCA2KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMSBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAxIHBvc2l0aW9uIChpbmRleCA3KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMiBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAyIHBvc2l0aW9uIChpbmRleCA4KVxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXQob3V0LCBtMDAsIG0wMSwgbTAyLCBtMTAsIG0xMSwgbTEyLCBtMjAsIG0yMSwgbTIyKSB7XG4gIG91dFswXSA9IG0wMDtcbiAgb3V0WzFdID0gbTAxO1xuICBvdXRbMl0gPSBtMDI7XG4gIG91dFszXSA9IG0xMDtcbiAgb3V0WzRdID0gbTExO1xuICBvdXRbNV0gPSBtMTI7XG4gIG91dFs2XSA9IG0yMDtcbiAgb3V0WzddID0gbTIxO1xuICBvdXRbOF0gPSBtMjI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNldCBhIG1hdDMgdG8gdGhlIGlkZW50aXR5IG1hdHJpeFxuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGlkZW50aXR5KG91dCkge1xuICBvdXRbMF0gPSAxO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAxO1xuICBvdXRbNV0gPSAwO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBUcmFuc3Bvc2UgdGhlIHZhbHVlcyBvZiBhIG1hdDNcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNwb3NlKG91dCwgYSkge1xuICAvLyBJZiB3ZSBhcmUgdHJhbnNwb3Npbmcgb3Vyc2VsdmVzIHdlIGNhbiBza2lwIGEgZmV3IHN0ZXBzIGJ1dCBoYXZlIHRvIGNhY2hlIHNvbWUgdmFsdWVzXG4gIGlmIChvdXQgPT09IGEpIHtcbiAgICB2YXIgYTAxID0gYVsxXSxcbiAgICAgICAgYTAyID0gYVsyXSxcbiAgICAgICAgYTEyID0gYVs1XTtcbiAgICBvdXRbMV0gPSBhWzNdO1xuICAgIG91dFsyXSA9IGFbNl07XG4gICAgb3V0WzNdID0gYTAxO1xuICAgIG91dFs1XSA9IGFbN107XG4gICAgb3V0WzZdID0gYTAyO1xuICAgIG91dFs3XSA9IGExMjtcbiAgfSBlbHNlIHtcbiAgICBvdXRbMF0gPSBhWzBdO1xuICAgIG91dFsxXSA9IGFbM107XG4gICAgb3V0WzJdID0gYVs2XTtcbiAgICBvdXRbM10gPSBhWzFdO1xuICAgIG91dFs0XSA9IGFbNF07XG4gICAgb3V0WzVdID0gYVs3XTtcbiAgICBvdXRbNl0gPSBhWzJdO1xuICAgIG91dFs3XSA9IGFbNV07XG4gICAgb3V0WzhdID0gYVs4XTtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEludmVydHMgYSBtYXQzXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGludmVydChvdXQsIGEpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXTtcbiAgdmFyIGExMCA9IGFbM10sXG4gICAgICBhMTEgPSBhWzRdLFxuICAgICAgYTEyID0gYVs1XTtcbiAgdmFyIGEyMCA9IGFbNl0sXG4gICAgICBhMjEgPSBhWzddLFxuICAgICAgYTIyID0gYVs4XTtcbiAgdmFyIGIwMSA9IGEyMiAqIGExMSAtIGExMiAqIGEyMTtcbiAgdmFyIGIxMSA9IC1hMjIgKiBhMTAgKyBhMTIgKiBhMjA7XG4gIHZhciBiMjEgPSBhMjEgKiBhMTAgLSBhMTEgKiBhMjA7IC8vIENhbGN1bGF0ZSB0aGUgZGV0ZXJtaW5hbnRcblxuICB2YXIgZGV0ID0gYTAwICogYjAxICsgYTAxICogYjExICsgYTAyICogYjIxO1xuXG4gIGlmICghZGV0KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBkZXQgPSAxLjAgLyBkZXQ7XG4gIG91dFswXSA9IGIwMSAqIGRldDtcbiAgb3V0WzFdID0gKC1hMjIgKiBhMDEgKyBhMDIgKiBhMjEpICogZGV0O1xuICBvdXRbMl0gPSAoYTEyICogYTAxIC0gYTAyICogYTExKSAqIGRldDtcbiAgb3V0WzNdID0gYjExICogZGV0O1xuICBvdXRbNF0gPSAoYTIyICogYTAwIC0gYTAyICogYTIwKSAqIGRldDtcbiAgb3V0WzVdID0gKC1hMTIgKiBhMDAgKyBhMDIgKiBhMTApICogZGV0O1xuICBvdXRbNl0gPSBiMjEgKiBkZXQ7XG4gIG91dFs3XSA9ICgtYTIxICogYTAwICsgYTAxICogYTIwKSAqIGRldDtcbiAgb3V0WzhdID0gKGExMSAqIGEwMCAtIGEwMSAqIGExMCkgKiBkZXQ7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGFkanVnYXRlIG9mIGEgbWF0M1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGpvaW50KG91dCwgYSkge1xuICB2YXIgYTAwID0gYVswXSxcbiAgICAgIGEwMSA9IGFbMV0sXG4gICAgICBhMDIgPSBhWzJdO1xuICB2YXIgYTEwID0gYVszXSxcbiAgICAgIGExMSA9IGFbNF0sXG4gICAgICBhMTIgPSBhWzVdO1xuICB2YXIgYTIwID0gYVs2XSxcbiAgICAgIGEyMSA9IGFbN10sXG4gICAgICBhMjIgPSBhWzhdO1xuICBvdXRbMF0gPSBhMTEgKiBhMjIgLSBhMTIgKiBhMjE7XG4gIG91dFsxXSA9IGEwMiAqIGEyMSAtIGEwMSAqIGEyMjtcbiAgb3V0WzJdID0gYTAxICogYTEyIC0gYTAyICogYTExO1xuICBvdXRbM10gPSBhMTIgKiBhMjAgLSBhMTAgKiBhMjI7XG4gIG91dFs0XSA9IGEwMCAqIGEyMiAtIGEwMiAqIGEyMDtcbiAgb3V0WzVdID0gYTAyICogYTEwIC0gYTAwICogYTEyO1xuICBvdXRbNl0gPSBhMTAgKiBhMjEgLSBhMTEgKiBhMjA7XG4gIG91dFs3XSA9IGEwMSAqIGEyMCAtIGEwMCAqIGEyMTtcbiAgb3V0WzhdID0gYTAwICogYTExIC0gYTAxICogYTEwO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkZXRlcm1pbmFudCBvZiBhIG1hdDNcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge051bWJlcn0gZGV0ZXJtaW5hbnQgb2YgYVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBkZXRlcm1pbmFudChhKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl07XG4gIHZhciBhMTAgPSBhWzNdLFxuICAgICAgYTExID0gYVs0XSxcbiAgICAgIGExMiA9IGFbNV07XG4gIHZhciBhMjAgPSBhWzZdLFxuICAgICAgYTIxID0gYVs3XSxcbiAgICAgIGEyMiA9IGFbOF07XG4gIHJldHVybiBhMDAgKiAoYTIyICogYTExIC0gYTEyICogYTIxKSArIGEwMSAqICgtYTIyICogYTEwICsgYTEyICogYTIwKSArIGEwMiAqIChhMjEgKiBhMTAgLSBhMTEgKiBhMjApO1xufVxuLyoqXG4gKiBNdWx0aXBsaWVzIHR3byBtYXQzJ3NcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aXBseShvdXQsIGEsIGIpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXTtcbiAgdmFyIGExMCA9IGFbM10sXG4gICAgICBhMTEgPSBhWzRdLFxuICAgICAgYTEyID0gYVs1XTtcbiAgdmFyIGEyMCA9IGFbNl0sXG4gICAgICBhMjEgPSBhWzddLFxuICAgICAgYTIyID0gYVs4XTtcbiAgdmFyIGIwMCA9IGJbMF0sXG4gICAgICBiMDEgPSBiWzFdLFxuICAgICAgYjAyID0gYlsyXTtcbiAgdmFyIGIxMCA9IGJbM10sXG4gICAgICBiMTEgPSBiWzRdLFxuICAgICAgYjEyID0gYls1XTtcbiAgdmFyIGIyMCA9IGJbNl0sXG4gICAgICBiMjEgPSBiWzddLFxuICAgICAgYjIyID0gYls4XTtcbiAgb3V0WzBdID0gYjAwICogYTAwICsgYjAxICogYTEwICsgYjAyICogYTIwO1xuICBvdXRbMV0gPSBiMDAgKiBhMDEgKyBiMDEgKiBhMTEgKyBiMDIgKiBhMjE7XG4gIG91dFsyXSA9IGIwMCAqIGEwMiArIGIwMSAqIGExMiArIGIwMiAqIGEyMjtcbiAgb3V0WzNdID0gYjEwICogYTAwICsgYjExICogYTEwICsgYjEyICogYTIwO1xuICBvdXRbNF0gPSBiMTAgKiBhMDEgKyBiMTEgKiBhMTEgKyBiMTIgKiBhMjE7XG4gIG91dFs1XSA9IGIxMCAqIGEwMiArIGIxMSAqIGExMiArIGIxMiAqIGEyMjtcbiAgb3V0WzZdID0gYjIwICogYTAwICsgYjIxICogYTEwICsgYjIyICogYTIwO1xuICBvdXRbN10gPSBiMjAgKiBhMDEgKyBiMjEgKiBhMTEgKyBiMjIgKiBhMjE7XG4gIG91dFs4XSA9IGIyMCAqIGEwMiArIGIyMSAqIGExMiArIGIyMiAqIGEyMjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogVHJhbnNsYXRlIGEgbWF0MyBieSB0aGUgZ2l2ZW4gdmVjdG9yXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBtYXRyaXggdG8gdHJhbnNsYXRlXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gdiB2ZWN0b3IgdG8gdHJhbnNsYXRlIGJ5XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zbGF0ZShvdXQsIGEsIHYpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXSxcbiAgICAgIGExMCA9IGFbM10sXG4gICAgICBhMTEgPSBhWzRdLFxuICAgICAgYTEyID0gYVs1XSxcbiAgICAgIGEyMCA9IGFbNl0sXG4gICAgICBhMjEgPSBhWzddLFxuICAgICAgYTIyID0gYVs4XSxcbiAgICAgIHggPSB2WzBdLFxuICAgICAgeSA9IHZbMV07XG4gIG91dFswXSA9IGEwMDtcbiAgb3V0WzFdID0gYTAxO1xuICBvdXRbMl0gPSBhMDI7XG4gIG91dFszXSA9IGExMDtcbiAgb3V0WzRdID0gYTExO1xuICBvdXRbNV0gPSBhMTI7XG4gIG91dFs2XSA9IHggKiBhMDAgKyB5ICogYTEwICsgYTIwO1xuICBvdXRbN10gPSB4ICogYTAxICsgeSAqIGExMSArIGEyMTtcbiAgb3V0WzhdID0geCAqIGEwMiArIHkgKiBhMTIgKyBhMjI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZXMgYSBtYXQzIGJ5IHRoZSBnaXZlbiBhbmdsZVxuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgbWF0cml4IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgdG8gcm90YXRlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlKG91dCwgYSwgcmFkKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl0sXG4gICAgICBhMTAgPSBhWzNdLFxuICAgICAgYTExID0gYVs0XSxcbiAgICAgIGExMiA9IGFbNV0sXG4gICAgICBhMjAgPSBhWzZdLFxuICAgICAgYTIxID0gYVs3XSxcbiAgICAgIGEyMiA9IGFbOF0sXG4gICAgICBzID0gTWF0aC5zaW4ocmFkKSxcbiAgICAgIGMgPSBNYXRoLmNvcyhyYWQpO1xuICBvdXRbMF0gPSBjICogYTAwICsgcyAqIGExMDtcbiAgb3V0WzFdID0gYyAqIGEwMSArIHMgKiBhMTE7XG4gIG91dFsyXSA9IGMgKiBhMDIgKyBzICogYTEyO1xuICBvdXRbM10gPSBjICogYTEwIC0gcyAqIGEwMDtcbiAgb3V0WzRdID0gYyAqIGExMSAtIHMgKiBhMDE7XG4gIG91dFs1XSA9IGMgKiBhMTIgLSBzICogYTAyO1xuICBvdXRbNl0gPSBhMjA7XG4gIG91dFs3XSA9IGEyMTtcbiAgb3V0WzhdID0gYTIyO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTY2FsZXMgdGhlIG1hdDMgYnkgdGhlIGRpbWVuc2lvbnMgaW4gdGhlIGdpdmVuIHZlYzJcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIG1hdHJpeCB0byByb3RhdGVcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSB2IHRoZSB2ZWMyIHRvIHNjYWxlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKG91dCwgYSwgdikge1xuICB2YXIgeCA9IHZbMF0sXG4gICAgICB5ID0gdlsxXTtcbiAgb3V0WzBdID0geCAqIGFbMF07XG4gIG91dFsxXSA9IHggKiBhWzFdO1xuICBvdXRbMl0gPSB4ICogYVsyXTtcbiAgb3V0WzNdID0geSAqIGFbM107XG4gIG91dFs0XSA9IHkgKiBhWzRdO1xuICBvdXRbNV0gPSB5ICogYVs1XTtcbiAgb3V0WzZdID0gYVs2XTtcbiAgb3V0WzddID0gYVs3XTtcbiAgb3V0WzhdID0gYVs4XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIGEgdmVjdG9yIHRyYW5zbGF0aW9uXG4gKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gKGJ1dCBtdWNoIGZhc3RlciB0aGFuKTpcbiAqXG4gKiAgICAgbWF0My5pZGVudGl0eShkZXN0KTtcbiAqICAgICBtYXQzLnRyYW5zbGF0ZShkZXN0LCBkZXN0LCB2ZWMpO1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IG1hdDMgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSB2IFRyYW5zbGF0aW9uIHZlY3RvclxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVHJhbnNsYXRpb24ob3V0LCB2KSB7XG4gIG91dFswXSA9IDE7XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IDE7XG4gIG91dFs1XSA9IDA7XG4gIG91dFs2XSA9IHZbMF07XG4gIG91dFs3XSA9IHZbMV07XG4gIG91dFs4XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSBhIGdpdmVuIGFuZ2xlXG4gKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gKGJ1dCBtdWNoIGZhc3RlciB0aGFuKTpcbiAqXG4gKiAgICAgbWF0My5pZGVudGl0eShkZXN0KTtcbiAqICAgICBtYXQzLnJvdGF0ZShkZXN0LCBkZXN0LCByYWQpO1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IG1hdDMgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21Sb3RhdGlvbihvdXQsIHJhZCkge1xuICB2YXIgcyA9IE1hdGguc2luKHJhZCksXG4gICAgICBjID0gTWF0aC5jb3MocmFkKTtcbiAgb3V0WzBdID0gYztcbiAgb3V0WzFdID0gcztcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gLXM7XG4gIG91dFs0XSA9IGM7XG4gIG91dFs1XSA9IDA7XG4gIG91dFs2XSA9IDA7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSBhIHZlY3RvciBzY2FsaW5nXG4gKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gKGJ1dCBtdWNoIGZhc3RlciB0aGFuKTpcbiAqXG4gKiAgICAgbWF0My5pZGVudGl0eShkZXN0KTtcbiAqICAgICBtYXQzLnNjYWxlKGRlc3QsIGRlc3QsIHZlYyk7XG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgbWF0MyByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IHYgU2NhbGluZyB2ZWN0b3JcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVNjYWxpbmcob3V0LCB2KSB7XG4gIG91dFswXSA9IHZbMF07XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IHZbMV07XG4gIG91dFs1XSA9IDA7XG4gIG91dFs2XSA9IDA7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENvcGllcyB0aGUgdmFsdWVzIGZyb20gYSBtYXQyZCBpbnRvIGEgbWF0M1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0MmR9IGEgdGhlIG1hdHJpeCB0byBjb3B5XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKiovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tTWF0MmQob3V0LCBhKSB7XG4gIG91dFswXSA9IGFbMF07XG4gIG91dFsxXSA9IGFbMV07XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IGFbMl07XG4gIG91dFs0XSA9IGFbM107XG4gIG91dFs1XSA9IDA7XG4gIG91dFs2XSA9IGFbNF07XG4gIG91dFs3XSA9IGFbNV07XG4gIG91dFs4XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgYSAzeDMgbWF0cml4IGZyb20gdGhlIGdpdmVuIHF1YXRlcm5pb25cbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCBtYXQzIHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gcSBRdWF0ZXJuaW9uIHRvIGNyZWF0ZSBtYXRyaXggZnJvbVxuICpcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVF1YXQob3V0LCBxKSB7XG4gIHZhciB4ID0gcVswXSxcbiAgICAgIHkgPSBxWzFdLFxuICAgICAgeiA9IHFbMl0sXG4gICAgICB3ID0gcVszXTtcbiAgdmFyIHgyID0geCArIHg7XG4gIHZhciB5MiA9IHkgKyB5O1xuICB2YXIgejIgPSB6ICsgejtcbiAgdmFyIHh4ID0geCAqIHgyO1xuICB2YXIgeXggPSB5ICogeDI7XG4gIHZhciB5eSA9IHkgKiB5MjtcbiAgdmFyIHp4ID0geiAqIHgyO1xuICB2YXIgenkgPSB6ICogeTI7XG4gIHZhciB6eiA9IHogKiB6MjtcbiAgdmFyIHd4ID0gdyAqIHgyO1xuICB2YXIgd3kgPSB3ICogeTI7XG4gIHZhciB3eiA9IHcgKiB6MjtcbiAgb3V0WzBdID0gMSAtIHl5IC0geno7XG4gIG91dFszXSA9IHl4IC0gd3o7XG4gIG91dFs2XSA9IHp4ICsgd3k7XG4gIG91dFsxXSA9IHl4ICsgd3o7XG4gIG91dFs0XSA9IDEgLSB4eCAtIHp6O1xuICBvdXRbN10gPSB6eSAtIHd4O1xuICBvdXRbMl0gPSB6eCAtIHd5O1xuICBvdXRbNV0gPSB6eSArIHd4O1xuICBvdXRbOF0gPSAxIC0geHggLSB5eTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyBhIDN4MyBub3JtYWwgbWF0cml4ICh0cmFuc3Bvc2UgaW52ZXJzZSkgZnJvbSB0aGUgNHg0IG1hdHJpeFxuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IG1hdDMgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIE1hdDQgdG8gZGVyaXZlIHRoZSBub3JtYWwgbWF0cml4IGZyb21cbiAqXG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbEZyb21NYXQ0KG91dCwgYSkge1xuICB2YXIgYTAwID0gYVswXSxcbiAgICAgIGEwMSA9IGFbMV0sXG4gICAgICBhMDIgPSBhWzJdLFxuICAgICAgYTAzID0gYVszXTtcbiAgdmFyIGExMCA9IGFbNF0sXG4gICAgICBhMTEgPSBhWzVdLFxuICAgICAgYTEyID0gYVs2XSxcbiAgICAgIGExMyA9IGFbN107XG4gIHZhciBhMjAgPSBhWzhdLFxuICAgICAgYTIxID0gYVs5XSxcbiAgICAgIGEyMiA9IGFbMTBdLFxuICAgICAgYTIzID0gYVsxMV07XG4gIHZhciBhMzAgPSBhWzEyXSxcbiAgICAgIGEzMSA9IGFbMTNdLFxuICAgICAgYTMyID0gYVsxNF0sXG4gICAgICBhMzMgPSBhWzE1XTtcbiAgdmFyIGIwMCA9IGEwMCAqIGExMSAtIGEwMSAqIGExMDtcbiAgdmFyIGIwMSA9IGEwMCAqIGExMiAtIGEwMiAqIGExMDtcbiAgdmFyIGIwMiA9IGEwMCAqIGExMyAtIGEwMyAqIGExMDtcbiAgdmFyIGIwMyA9IGEwMSAqIGExMiAtIGEwMiAqIGExMTtcbiAgdmFyIGIwNCA9IGEwMSAqIGExMyAtIGEwMyAqIGExMTtcbiAgdmFyIGIwNSA9IGEwMiAqIGExMyAtIGEwMyAqIGExMjtcbiAgdmFyIGIwNiA9IGEyMCAqIGEzMSAtIGEyMSAqIGEzMDtcbiAgdmFyIGIwNyA9IGEyMCAqIGEzMiAtIGEyMiAqIGEzMDtcbiAgdmFyIGIwOCA9IGEyMCAqIGEzMyAtIGEyMyAqIGEzMDtcbiAgdmFyIGIwOSA9IGEyMSAqIGEzMiAtIGEyMiAqIGEzMTtcbiAgdmFyIGIxMCA9IGEyMSAqIGEzMyAtIGEyMyAqIGEzMTtcbiAgdmFyIGIxMSA9IGEyMiAqIGEzMyAtIGEyMyAqIGEzMjsgLy8gQ2FsY3VsYXRlIHRoZSBkZXRlcm1pbmFudFxuXG4gIHZhciBkZXQgPSBiMDAgKiBiMTEgLSBiMDEgKiBiMTAgKyBiMDIgKiBiMDkgKyBiMDMgKiBiMDggLSBiMDQgKiBiMDcgKyBiMDUgKiBiMDY7XG5cbiAgaWYgKCFkZXQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGRldCA9IDEuMCAvIGRldDtcbiAgb3V0WzBdID0gKGExMSAqIGIxMSAtIGExMiAqIGIxMCArIGExMyAqIGIwOSkgKiBkZXQ7XG4gIG91dFsxXSA9IChhMTIgKiBiMDggLSBhMTAgKiBiMTEgLSBhMTMgKiBiMDcpICogZGV0O1xuICBvdXRbMl0gPSAoYTEwICogYjEwIC0gYTExICogYjA4ICsgYTEzICogYjA2KSAqIGRldDtcbiAgb3V0WzNdID0gKGEwMiAqIGIxMCAtIGEwMSAqIGIxMSAtIGEwMyAqIGIwOSkgKiBkZXQ7XG4gIG91dFs0XSA9IChhMDAgKiBiMTEgLSBhMDIgKiBiMDggKyBhMDMgKiBiMDcpICogZGV0O1xuICBvdXRbNV0gPSAoYTAxICogYjA4IC0gYTAwICogYjEwIC0gYTAzICogYjA2KSAqIGRldDtcbiAgb3V0WzZdID0gKGEzMSAqIGIwNSAtIGEzMiAqIGIwNCArIGEzMyAqIGIwMykgKiBkZXQ7XG4gIG91dFs3XSA9IChhMzIgKiBiMDIgLSBhMzAgKiBiMDUgLSBhMzMgKiBiMDEpICogZGV0O1xuICBvdXRbOF0gPSAoYTMwICogYjA0IC0gYTMxICogYjAyICsgYTMzICogYjAwKSAqIGRldDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgMkQgcHJvamVjdGlvbiBtYXRyaXggd2l0aCB0aGUgZ2l2ZW4gYm91bmRzXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgbWF0MyBmcnVzdHVtIG1hdHJpeCB3aWxsIGJlIHdyaXR0ZW4gaW50b1xuICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIFdpZHRoIG9mIHlvdXIgZ2wgY29udGV4dFxuICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCBIZWlnaHQgb2YgZ2wgY29udGV4dFxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9qZWN0aW9uKG91dCwgd2lkdGgsIGhlaWdodCkge1xuICBvdXRbMF0gPSAyIC8gd2lkdGg7XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IC0yIC8gaGVpZ2h0O1xuICBvdXRbNV0gPSAwO1xuICBvdXRbNl0gPSAtMTtcbiAgb3V0WzddID0gMTtcbiAgb3V0WzhdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIG1hdDNcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSBtYXRyaXggdG8gcmVwcmVzZW50IGFzIGEgc3RyaW5nXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIG1hdHJpeFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdHIoYSkge1xuICByZXR1cm4gXCJtYXQzKFwiICsgYVswXSArIFwiLCBcIiArIGFbMV0gKyBcIiwgXCIgKyBhWzJdICsgXCIsIFwiICsgYVszXSArIFwiLCBcIiArIGFbNF0gKyBcIiwgXCIgKyBhWzVdICsgXCIsIFwiICsgYVs2XSArIFwiLCBcIiArIGFbN10gKyBcIiwgXCIgKyBhWzhdICsgXCIpXCI7XG59XG4vKipcbiAqIFJldHVybnMgRnJvYmVuaXVzIG5vcm0gb2YgYSBtYXQzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIG1hdHJpeCB0byBjYWxjdWxhdGUgRnJvYmVuaXVzIG5vcm0gb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IEZyb2Jlbml1cyBub3JtXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb2IoYSkge1xuICByZXR1cm4gTWF0aC5oeXBvdChhWzBdLCBhWzFdLCBhWzJdLCBhWzNdLCBhWzRdLCBhWzVdLCBhWzZdLCBhWzddLCBhWzhdKTtcbn1cbi8qKlxuICogQWRkcyB0d28gbWF0MydzXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICsgYlswXTtcbiAgb3V0WzFdID0gYVsxXSArIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gKyBiWzJdO1xuICBvdXRbM10gPSBhWzNdICsgYlszXTtcbiAgb3V0WzRdID0gYVs0XSArIGJbNF07XG4gIG91dFs1XSA9IGFbNV0gKyBiWzVdO1xuICBvdXRbNl0gPSBhWzZdICsgYls2XTtcbiAgb3V0WzddID0gYVs3XSArIGJbN107XG4gIG91dFs4XSA9IGFbOF0gKyBiWzhdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTdWJ0cmFjdHMgbWF0cml4IGIgZnJvbSBtYXRyaXggYVxuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN1YnRyYWN0KG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdIC0gYlswXTtcbiAgb3V0WzFdID0gYVsxXSAtIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gLSBiWzJdO1xuICBvdXRbM10gPSBhWzNdIC0gYlszXTtcbiAgb3V0WzRdID0gYVs0XSAtIGJbNF07XG4gIG91dFs1XSA9IGFbNV0gLSBiWzVdO1xuICBvdXRbNl0gPSBhWzZdIC0gYls2XTtcbiAgb3V0WzddID0gYVs3XSAtIGJbN107XG4gIG91dFs4XSA9IGFbOF0gLSBiWzhdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBNdWx0aXBseSBlYWNoIGVsZW1lbnQgb2YgdGhlIG1hdHJpeCBieSBhIHNjYWxhci5cbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIG1hdHJpeCB0byBzY2FsZVxuICogQHBhcmFtIHtOdW1iZXJ9IGIgYW1vdW50IHRvIHNjYWxlIHRoZSBtYXRyaXgncyBlbGVtZW50cyBieVxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aXBseVNjYWxhcihvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAqIGI7XG4gIG91dFsxXSA9IGFbMV0gKiBiO1xuICBvdXRbMl0gPSBhWzJdICogYjtcbiAgb3V0WzNdID0gYVszXSAqIGI7XG4gIG91dFs0XSA9IGFbNF0gKiBiO1xuICBvdXRbNV0gPSBhWzVdICogYjtcbiAgb3V0WzZdID0gYVs2XSAqIGI7XG4gIG91dFs3XSA9IGFbN10gKiBiO1xuICBvdXRbOF0gPSBhWzhdICogYjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQWRkcyB0d28gbWF0MydzIGFmdGVyIG11bHRpcGx5aW5nIGVhY2ggZWxlbWVudCBvZiB0aGUgc2Vjb25kIG9wZXJhbmQgYnkgYSBzY2FsYXIgdmFsdWUuXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSBzY2FsZSB0aGUgYW1vdW50IHRvIHNjYWxlIGIncyBlbGVtZW50cyBieSBiZWZvcmUgYWRkaW5nXG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5U2NhbGFyQW5kQWRkKG91dCwgYSwgYiwgc2NhbGUpIHtcbiAgb3V0WzBdID0gYVswXSArIGJbMF0gKiBzY2FsZTtcbiAgb3V0WzFdID0gYVsxXSArIGJbMV0gKiBzY2FsZTtcbiAgb3V0WzJdID0gYVsyXSArIGJbMl0gKiBzY2FsZTtcbiAgb3V0WzNdID0gYVszXSArIGJbM10gKiBzY2FsZTtcbiAgb3V0WzRdID0gYVs0XSArIGJbNF0gKiBzY2FsZTtcbiAgb3V0WzVdID0gYVs1XSArIGJbNV0gKiBzY2FsZTtcbiAgb3V0WzZdID0gYVs2XSArIGJbNl0gKiBzY2FsZTtcbiAgb3V0WzddID0gYVs3XSArIGJbN10gKiBzY2FsZTtcbiAgb3V0WzhdID0gYVs4XSArIGJbOF0gKiBzY2FsZTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgbWF0cmljZXMgaGF2ZSBleGFjdGx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uICh3aGVuIGNvbXBhcmVkIHdpdGggPT09KVxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIFRoZSBmaXJzdCBtYXRyaXguXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYiBUaGUgc2Vjb25kIG1hdHJpeC5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSBtYXRyaWNlcyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXhhY3RFcXVhbHMoYSwgYikge1xuICByZXR1cm4gYVswXSA9PT0gYlswXSAmJiBhWzFdID09PSBiWzFdICYmIGFbMl0gPT09IGJbMl0gJiYgYVszXSA9PT0gYlszXSAmJiBhWzRdID09PSBiWzRdICYmIGFbNV0gPT09IGJbNV0gJiYgYVs2XSA9PT0gYls2XSAmJiBhWzddID09PSBiWzddICYmIGFbOF0gPT09IGJbOF07XG59XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIG1hdHJpY2VzIGhhdmUgYXBwcm94aW1hdGVseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSBUaGUgZmlyc3QgbWF0cml4LlxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGIgVGhlIHNlY29uZCBtYXRyaXguXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgbWF0cmljZXMgYXJlIGVxdWFsLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhhLCBiKSB7XG4gIHZhciBhMCA9IGFbMF0sXG4gICAgICBhMSA9IGFbMV0sXG4gICAgICBhMiA9IGFbMl0sXG4gICAgICBhMyA9IGFbM10sXG4gICAgICBhNCA9IGFbNF0sXG4gICAgICBhNSA9IGFbNV0sXG4gICAgICBhNiA9IGFbNl0sXG4gICAgICBhNyA9IGFbN10sXG4gICAgICBhOCA9IGFbOF07XG4gIHZhciBiMCA9IGJbMF0sXG4gICAgICBiMSA9IGJbMV0sXG4gICAgICBiMiA9IGJbMl0sXG4gICAgICBiMyA9IGJbM10sXG4gICAgICBiNCA9IGJbNF0sXG4gICAgICBiNSA9IGJbNV0sXG4gICAgICBiNiA9IGJbNl0sXG4gICAgICBiNyA9IGJbN10sXG4gICAgICBiOCA9IGJbOF07XG4gIHJldHVybiBNYXRoLmFicyhhMCAtIGIwKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMCksIE1hdGguYWJzKGIwKSkgJiYgTWF0aC5hYnMoYTEgLSBiMSkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTEpLCBNYXRoLmFicyhiMSkpICYmIE1hdGguYWJzKGEyIC0gYjIpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEyKSwgTWF0aC5hYnMoYjIpKSAmJiBNYXRoLmFicyhhMyAtIGIzKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMyksIE1hdGguYWJzKGIzKSkgJiYgTWF0aC5hYnMoYTQgLSBiNCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTQpLCBNYXRoLmFicyhiNCkpICYmIE1hdGguYWJzKGE1IC0gYjUpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE1KSwgTWF0aC5hYnMoYjUpKSAmJiBNYXRoLmFicyhhNiAtIGI2KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhNiksIE1hdGguYWJzKGI2KSkgJiYgTWF0aC5hYnMoYTcgLSBiNykgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTcpLCBNYXRoLmFicyhiNykpICYmIE1hdGguYWJzKGE4IC0gYjgpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE4KSwgTWF0aC5hYnMoYjgpKTtcbn1cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBtYXQzLm11bHRpcGx5fVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBtdWwgPSBtdWx0aXBseTtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBtYXQzLnN1YnRyYWN0fVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzdWIgPSBzdWJ0cmFjdDsiLCAiaW1wb3J0ICogYXMgZ2xNYXRyaXggZnJvbSBcIi4vY29tbW9uLmpzXCI7XG4vKipcbiAqIDR4NCBNYXRyaXg8YnI+Rm9ybWF0OiBjb2x1bW4tbWFqb3IsIHdoZW4gdHlwZWQgb3V0IGl0IGxvb2tzIGxpa2Ugcm93LW1ham9yPGJyPlRoZSBtYXRyaWNlcyBhcmUgYmVpbmcgcG9zdCBtdWx0aXBsaWVkLlxuICogQG1vZHVsZSBtYXQ0XG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGlkZW50aXR5IG1hdDRcbiAqXG4gKiBAcmV0dXJucyB7bWF0NH0gYSBuZXcgNHg0IG1hdHJpeFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSgxNik7XG5cbiAgaWYgKGdsTWF0cml4LkFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICAgIG91dFszXSA9IDA7XG4gICAgb3V0WzRdID0gMDtcbiAgICBvdXRbNl0gPSAwO1xuICAgIG91dFs3XSA9IDA7XG4gICAgb3V0WzhdID0gMDtcbiAgICBvdXRbOV0gPSAwO1xuICAgIG91dFsxMV0gPSAwO1xuICAgIG91dFsxMl0gPSAwO1xuICAgIG91dFsxM10gPSAwO1xuICAgIG91dFsxNF0gPSAwO1xuICB9XG5cbiAgb3V0WzBdID0gMTtcbiAgb3V0WzVdID0gMTtcbiAgb3V0WzEwXSA9IDE7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IG1hdDQgaW5pdGlhbGl6ZWQgd2l0aCB2YWx1ZXMgZnJvbSBhbiBleGlzdGluZyBtYXRyaXhcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSBtYXRyaXggdG8gY2xvbmVcbiAqIEByZXR1cm5zIHttYXQ0fSBhIG5ldyA0eDQgbWF0cml4XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lKGEpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDE2KTtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgb3V0WzNdID0gYVszXTtcbiAgb3V0WzRdID0gYVs0XTtcbiAgb3V0WzVdID0gYVs1XTtcbiAgb3V0WzZdID0gYVs2XTtcbiAgb3V0WzddID0gYVs3XTtcbiAgb3V0WzhdID0gYVs4XTtcbiAgb3V0WzldID0gYVs5XTtcbiAgb3V0WzEwXSA9IGFbMTBdO1xuICBvdXRbMTFdID0gYVsxMV07XG4gIG91dFsxMl0gPSBhWzEyXTtcbiAgb3V0WzEzXSA9IGFbMTNdO1xuICBvdXRbMTRdID0gYVsxNF07XG4gIG91dFsxNV0gPSBhWzE1XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ29weSB0aGUgdmFsdWVzIGZyb20gb25lIG1hdDQgdG8gYW5vdGhlclxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjb3B5KG91dCwgYSkge1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSBhWzJdO1xuICBvdXRbM10gPSBhWzNdO1xuICBvdXRbNF0gPSBhWzRdO1xuICBvdXRbNV0gPSBhWzVdO1xuICBvdXRbNl0gPSBhWzZdO1xuICBvdXRbN10gPSBhWzddO1xuICBvdXRbOF0gPSBhWzhdO1xuICBvdXRbOV0gPSBhWzldO1xuICBvdXRbMTBdID0gYVsxMF07XG4gIG91dFsxMV0gPSBhWzExXTtcbiAgb3V0WzEyXSA9IGFbMTJdO1xuICBvdXRbMTNdID0gYVsxM107XG4gIG91dFsxNF0gPSBhWzE0XTtcbiAgb3V0WzE1XSA9IGFbMTVdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgbWF0NCB3aXRoIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbTAwIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDAgcG9zaXRpb24gKGluZGV4IDApXG4gKiBAcGFyYW0ge051bWJlcn0gbTAxIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDEgcG9zaXRpb24gKGluZGV4IDEpXG4gKiBAcGFyYW0ge051bWJlcn0gbTAyIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDIgcG9zaXRpb24gKGluZGV4IDIpXG4gKiBAcGFyYW0ge051bWJlcn0gbTAzIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDMgcG9zaXRpb24gKGluZGV4IDMpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEwIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDAgcG9zaXRpb24gKGluZGV4IDQpXG4gKiBAcGFyYW0ge051bWJlcn0gbTExIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDEgcG9zaXRpb24gKGluZGV4IDUpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEyIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDIgcG9zaXRpb24gKGluZGV4IDYpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEzIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDMgcG9zaXRpb24gKGluZGV4IDcpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIwIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDAgcG9zaXRpb24gKGluZGV4IDgpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIxIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDEgcG9zaXRpb24gKGluZGV4IDkpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIyIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDIgcG9zaXRpb24gKGluZGV4IDEwKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMyBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAzIHBvc2l0aW9uIChpbmRleCAxMSlcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzAgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggMTIpXG4gKiBAcGFyYW0ge051bWJlcn0gbTMxIENvbXBvbmVudCBpbiBjb2x1bW4gMywgcm93IDEgcG9zaXRpb24gKGluZGV4IDEzKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0zMiBDb21wb25lbnQgaW4gY29sdW1uIDMsIHJvdyAyIHBvc2l0aW9uIChpbmRleCAxNClcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzMgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMyBwb3NpdGlvbiAoaW5kZXggMTUpXG4gKiBAcmV0dXJucyB7bWF0NH0gQSBuZXcgbWF0NFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVmFsdWVzKG0wMCwgbTAxLCBtMDIsIG0wMywgbTEwLCBtMTEsIG0xMiwgbTEzLCBtMjAsIG0yMSwgbTIyLCBtMjMsIG0zMCwgbTMxLCBtMzIsIG0zMykge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMTYpO1xuICBvdXRbMF0gPSBtMDA7XG4gIG91dFsxXSA9IG0wMTtcbiAgb3V0WzJdID0gbTAyO1xuICBvdXRbM10gPSBtMDM7XG4gIG91dFs0XSA9IG0xMDtcbiAgb3V0WzVdID0gbTExO1xuICBvdXRbNl0gPSBtMTI7XG4gIG91dFs3XSA9IG0xMztcbiAgb3V0WzhdID0gbTIwO1xuICBvdXRbOV0gPSBtMjE7XG4gIG91dFsxMF0gPSBtMjI7XG4gIG91dFsxMV0gPSBtMjM7XG4gIG91dFsxMl0gPSBtMzA7XG4gIG91dFsxM10gPSBtMzE7XG4gIG91dFsxNF0gPSBtMzI7XG4gIG91dFsxNV0gPSBtMzM7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNldCB0aGUgY29tcG9uZW50cyBvZiBhIG1hdDQgdG8gdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge051bWJlcn0gbTAwIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDAgcG9zaXRpb24gKGluZGV4IDApXG4gKiBAcGFyYW0ge051bWJlcn0gbTAxIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDEgcG9zaXRpb24gKGluZGV4IDEpXG4gKiBAcGFyYW0ge051bWJlcn0gbTAyIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDIgcG9zaXRpb24gKGluZGV4IDIpXG4gKiBAcGFyYW0ge051bWJlcn0gbTAzIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDMgcG9zaXRpb24gKGluZGV4IDMpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEwIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDAgcG9zaXRpb24gKGluZGV4IDQpXG4gKiBAcGFyYW0ge051bWJlcn0gbTExIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDEgcG9zaXRpb24gKGluZGV4IDUpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEyIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDIgcG9zaXRpb24gKGluZGV4IDYpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEzIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDMgcG9zaXRpb24gKGluZGV4IDcpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIwIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDAgcG9zaXRpb24gKGluZGV4IDgpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIxIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDEgcG9zaXRpb24gKGluZGV4IDkpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIyIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDIgcG9zaXRpb24gKGluZGV4IDEwKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMyBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAzIHBvc2l0aW9uIChpbmRleCAxMSlcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzAgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggMTIpXG4gKiBAcGFyYW0ge051bWJlcn0gbTMxIENvbXBvbmVudCBpbiBjb2x1bW4gMywgcm93IDEgcG9zaXRpb24gKGluZGV4IDEzKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0zMiBDb21wb25lbnQgaW4gY29sdW1uIDMsIHJvdyAyIHBvc2l0aW9uIChpbmRleCAxNClcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzMgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMyBwb3NpdGlvbiAoaW5kZXggMTUpXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNldChvdXQsIG0wMCwgbTAxLCBtMDIsIG0wMywgbTEwLCBtMTEsIG0xMiwgbTEzLCBtMjAsIG0yMSwgbTIyLCBtMjMsIG0zMCwgbTMxLCBtMzIsIG0zMykge1xuICBvdXRbMF0gPSBtMDA7XG4gIG91dFsxXSA9IG0wMTtcbiAgb3V0WzJdID0gbTAyO1xuICBvdXRbM10gPSBtMDM7XG4gIG91dFs0XSA9IG0xMDtcbiAgb3V0WzVdID0gbTExO1xuICBvdXRbNl0gPSBtMTI7XG4gIG91dFs3XSA9IG0xMztcbiAgb3V0WzhdID0gbTIwO1xuICBvdXRbOV0gPSBtMjE7XG4gIG91dFsxMF0gPSBtMjI7XG4gIG91dFsxMV0gPSBtMjM7XG4gIG91dFsxMl0gPSBtMzA7XG4gIG91dFsxM10gPSBtMzE7XG4gIG91dFsxNF0gPSBtMzI7XG4gIG91dFsxNV0gPSBtMzM7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNldCBhIG1hdDQgdG8gdGhlIGlkZW50aXR5IG1hdHJpeFxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGlkZW50aXR5KG91dCkge1xuICBvdXRbMF0gPSAxO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAwO1xuICBvdXRbNV0gPSAxO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAwO1xuICBvdXRbOV0gPSAwO1xuICBvdXRbMTBdID0gMTtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE0XSA9IDA7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBUcmFuc3Bvc2UgdGhlIHZhbHVlcyBvZiBhIG1hdDRcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNwb3NlKG91dCwgYSkge1xuICAvLyBJZiB3ZSBhcmUgdHJhbnNwb3Npbmcgb3Vyc2VsdmVzIHdlIGNhbiBza2lwIGEgZmV3IHN0ZXBzIGJ1dCBoYXZlIHRvIGNhY2hlIHNvbWUgdmFsdWVzXG4gIGlmIChvdXQgPT09IGEpIHtcbiAgICB2YXIgYTAxID0gYVsxXSxcbiAgICAgICAgYTAyID0gYVsyXSxcbiAgICAgICAgYTAzID0gYVszXTtcbiAgICB2YXIgYTEyID0gYVs2XSxcbiAgICAgICAgYTEzID0gYVs3XTtcbiAgICB2YXIgYTIzID0gYVsxMV07XG4gICAgb3V0WzFdID0gYVs0XTtcbiAgICBvdXRbMl0gPSBhWzhdO1xuICAgIG91dFszXSA9IGFbMTJdO1xuICAgIG91dFs0XSA9IGEwMTtcbiAgICBvdXRbNl0gPSBhWzldO1xuICAgIG91dFs3XSA9IGFbMTNdO1xuICAgIG91dFs4XSA9IGEwMjtcbiAgICBvdXRbOV0gPSBhMTI7XG4gICAgb3V0WzExXSA9IGFbMTRdO1xuICAgIG91dFsxMl0gPSBhMDM7XG4gICAgb3V0WzEzXSA9IGExMztcbiAgICBvdXRbMTRdID0gYTIzO1xuICB9IGVsc2Uge1xuICAgIG91dFswXSA9IGFbMF07XG4gICAgb3V0WzFdID0gYVs0XTtcbiAgICBvdXRbMl0gPSBhWzhdO1xuICAgIG91dFszXSA9IGFbMTJdO1xuICAgIG91dFs0XSA9IGFbMV07XG4gICAgb3V0WzVdID0gYVs1XTtcbiAgICBvdXRbNl0gPSBhWzldO1xuICAgIG91dFs3XSA9IGFbMTNdO1xuICAgIG91dFs4XSA9IGFbMl07XG4gICAgb3V0WzldID0gYVs2XTtcbiAgICBvdXRbMTBdID0gYVsxMF07XG4gICAgb3V0WzExXSA9IGFbMTRdO1xuICAgIG91dFsxMl0gPSBhWzNdO1xuICAgIG91dFsxM10gPSBhWzddO1xuICAgIG91dFsxNF0gPSBhWzExXTtcbiAgICBvdXRbMTVdID0gYVsxNV07XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBJbnZlcnRzIGEgbWF0NFxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpbnZlcnQob3V0LCBhKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl0sXG4gICAgICBhMDMgPSBhWzNdO1xuICB2YXIgYTEwID0gYVs0XSxcbiAgICAgIGExMSA9IGFbNV0sXG4gICAgICBhMTIgPSBhWzZdLFxuICAgICAgYTEzID0gYVs3XTtcbiAgdmFyIGEyMCA9IGFbOF0sXG4gICAgICBhMjEgPSBhWzldLFxuICAgICAgYTIyID0gYVsxMF0sXG4gICAgICBhMjMgPSBhWzExXTtcbiAgdmFyIGEzMCA9IGFbMTJdLFxuICAgICAgYTMxID0gYVsxM10sXG4gICAgICBhMzIgPSBhWzE0XSxcbiAgICAgIGEzMyA9IGFbMTVdO1xuICB2YXIgYjAwID0gYTAwICogYTExIC0gYTAxICogYTEwO1xuICB2YXIgYjAxID0gYTAwICogYTEyIC0gYTAyICogYTEwO1xuICB2YXIgYjAyID0gYTAwICogYTEzIC0gYTAzICogYTEwO1xuICB2YXIgYjAzID0gYTAxICogYTEyIC0gYTAyICogYTExO1xuICB2YXIgYjA0ID0gYTAxICogYTEzIC0gYTAzICogYTExO1xuICB2YXIgYjA1ID0gYTAyICogYTEzIC0gYTAzICogYTEyO1xuICB2YXIgYjA2ID0gYTIwICogYTMxIC0gYTIxICogYTMwO1xuICB2YXIgYjA3ID0gYTIwICogYTMyIC0gYTIyICogYTMwO1xuICB2YXIgYjA4ID0gYTIwICogYTMzIC0gYTIzICogYTMwO1xuICB2YXIgYjA5ID0gYTIxICogYTMyIC0gYTIyICogYTMxO1xuICB2YXIgYjEwID0gYTIxICogYTMzIC0gYTIzICogYTMxO1xuICB2YXIgYjExID0gYTIyICogYTMzIC0gYTIzICogYTMyOyAvLyBDYWxjdWxhdGUgdGhlIGRldGVybWluYW50XG5cbiAgdmFyIGRldCA9IGIwMCAqIGIxMSAtIGIwMSAqIGIxMCArIGIwMiAqIGIwOSArIGIwMyAqIGIwOCAtIGIwNCAqIGIwNyArIGIwNSAqIGIwNjtcblxuICBpZiAoIWRldCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZGV0ID0gMS4wIC8gZGV0O1xuICBvdXRbMF0gPSAoYTExICogYjExIC0gYTEyICogYjEwICsgYTEzICogYjA5KSAqIGRldDtcbiAgb3V0WzFdID0gKGEwMiAqIGIxMCAtIGEwMSAqIGIxMSAtIGEwMyAqIGIwOSkgKiBkZXQ7XG4gIG91dFsyXSA9IChhMzEgKiBiMDUgLSBhMzIgKiBiMDQgKyBhMzMgKiBiMDMpICogZGV0O1xuICBvdXRbM10gPSAoYTIyICogYjA0IC0gYTIxICogYjA1IC0gYTIzICogYjAzKSAqIGRldDtcbiAgb3V0WzRdID0gKGExMiAqIGIwOCAtIGExMCAqIGIxMSAtIGExMyAqIGIwNykgKiBkZXQ7XG4gIG91dFs1XSA9IChhMDAgKiBiMTEgLSBhMDIgKiBiMDggKyBhMDMgKiBiMDcpICogZGV0O1xuICBvdXRbNl0gPSAoYTMyICogYjAyIC0gYTMwICogYjA1IC0gYTMzICogYjAxKSAqIGRldDtcbiAgb3V0WzddID0gKGEyMCAqIGIwNSAtIGEyMiAqIGIwMiArIGEyMyAqIGIwMSkgKiBkZXQ7XG4gIG91dFs4XSA9IChhMTAgKiBiMTAgLSBhMTEgKiBiMDggKyBhMTMgKiBiMDYpICogZGV0O1xuICBvdXRbOV0gPSAoYTAxICogYjA4IC0gYTAwICogYjEwIC0gYTAzICogYjA2KSAqIGRldDtcbiAgb3V0WzEwXSA9IChhMzAgKiBiMDQgLSBhMzEgKiBiMDIgKyBhMzMgKiBiMDApICogZGV0O1xuICBvdXRbMTFdID0gKGEyMSAqIGIwMiAtIGEyMCAqIGIwNCAtIGEyMyAqIGIwMCkgKiBkZXQ7XG4gIG91dFsxMl0gPSAoYTExICogYjA3IC0gYTEwICogYjA5IC0gYTEyICogYjA2KSAqIGRldDtcbiAgb3V0WzEzXSA9IChhMDAgKiBiMDkgLSBhMDEgKiBiMDcgKyBhMDIgKiBiMDYpICogZGV0O1xuICBvdXRbMTRdID0gKGEzMSAqIGIwMSAtIGEzMCAqIGIwMyAtIGEzMiAqIGIwMCkgKiBkZXQ7XG4gIG91dFsxNV0gPSAoYTIwICogYjAzIC0gYTIxICogYjAxICsgYTIyICogYjAwKSAqIGRldDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgYWRqdWdhdGUgb2YgYSBtYXQ0XG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGFkam9pbnQob3V0LCBhKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl0sXG4gICAgICBhMDMgPSBhWzNdO1xuICB2YXIgYTEwID0gYVs0XSxcbiAgICAgIGExMSA9IGFbNV0sXG4gICAgICBhMTIgPSBhWzZdLFxuICAgICAgYTEzID0gYVs3XTtcbiAgdmFyIGEyMCA9IGFbOF0sXG4gICAgICBhMjEgPSBhWzldLFxuICAgICAgYTIyID0gYVsxMF0sXG4gICAgICBhMjMgPSBhWzExXTtcbiAgdmFyIGEzMCA9IGFbMTJdLFxuICAgICAgYTMxID0gYVsxM10sXG4gICAgICBhMzIgPSBhWzE0XSxcbiAgICAgIGEzMyA9IGFbMTVdO1xuICBvdXRbMF0gPSBhMTEgKiAoYTIyICogYTMzIC0gYTIzICogYTMyKSAtIGEyMSAqIChhMTIgKiBhMzMgLSBhMTMgKiBhMzIpICsgYTMxICogKGExMiAqIGEyMyAtIGExMyAqIGEyMik7XG4gIG91dFsxXSA9IC0oYTAxICogKGEyMiAqIGEzMyAtIGEyMyAqIGEzMikgLSBhMjEgKiAoYTAyICogYTMzIC0gYTAzICogYTMyKSArIGEzMSAqIChhMDIgKiBhMjMgLSBhMDMgKiBhMjIpKTtcbiAgb3V0WzJdID0gYTAxICogKGExMiAqIGEzMyAtIGExMyAqIGEzMikgLSBhMTEgKiAoYTAyICogYTMzIC0gYTAzICogYTMyKSArIGEzMSAqIChhMDIgKiBhMTMgLSBhMDMgKiBhMTIpO1xuICBvdXRbM10gPSAtKGEwMSAqIChhMTIgKiBhMjMgLSBhMTMgKiBhMjIpIC0gYTExICogKGEwMiAqIGEyMyAtIGEwMyAqIGEyMikgKyBhMjEgKiAoYTAyICogYTEzIC0gYTAzICogYTEyKSk7XG4gIG91dFs0XSA9IC0oYTEwICogKGEyMiAqIGEzMyAtIGEyMyAqIGEzMikgLSBhMjAgKiAoYTEyICogYTMzIC0gYTEzICogYTMyKSArIGEzMCAqIChhMTIgKiBhMjMgLSBhMTMgKiBhMjIpKTtcbiAgb3V0WzVdID0gYTAwICogKGEyMiAqIGEzMyAtIGEyMyAqIGEzMikgLSBhMjAgKiAoYTAyICogYTMzIC0gYTAzICogYTMyKSArIGEzMCAqIChhMDIgKiBhMjMgLSBhMDMgKiBhMjIpO1xuICBvdXRbNl0gPSAtKGEwMCAqIChhMTIgKiBhMzMgLSBhMTMgKiBhMzIpIC0gYTEwICogKGEwMiAqIGEzMyAtIGEwMyAqIGEzMikgKyBhMzAgKiAoYTAyICogYTEzIC0gYTAzICogYTEyKSk7XG4gIG91dFs3XSA9IGEwMCAqIChhMTIgKiBhMjMgLSBhMTMgKiBhMjIpIC0gYTEwICogKGEwMiAqIGEyMyAtIGEwMyAqIGEyMikgKyBhMjAgKiAoYTAyICogYTEzIC0gYTAzICogYTEyKTtcbiAgb3V0WzhdID0gYTEwICogKGEyMSAqIGEzMyAtIGEyMyAqIGEzMSkgLSBhMjAgKiAoYTExICogYTMzIC0gYTEzICogYTMxKSArIGEzMCAqIChhMTEgKiBhMjMgLSBhMTMgKiBhMjEpO1xuICBvdXRbOV0gPSAtKGEwMCAqIChhMjEgKiBhMzMgLSBhMjMgKiBhMzEpIC0gYTIwICogKGEwMSAqIGEzMyAtIGEwMyAqIGEzMSkgKyBhMzAgKiAoYTAxICogYTIzIC0gYTAzICogYTIxKSk7XG4gIG91dFsxMF0gPSBhMDAgKiAoYTExICogYTMzIC0gYTEzICogYTMxKSAtIGExMCAqIChhMDEgKiBhMzMgLSBhMDMgKiBhMzEpICsgYTMwICogKGEwMSAqIGExMyAtIGEwMyAqIGExMSk7XG4gIG91dFsxMV0gPSAtKGEwMCAqIChhMTEgKiBhMjMgLSBhMTMgKiBhMjEpIC0gYTEwICogKGEwMSAqIGEyMyAtIGEwMyAqIGEyMSkgKyBhMjAgKiAoYTAxICogYTEzIC0gYTAzICogYTExKSk7XG4gIG91dFsxMl0gPSAtKGExMCAqIChhMjEgKiBhMzIgLSBhMjIgKiBhMzEpIC0gYTIwICogKGExMSAqIGEzMiAtIGExMiAqIGEzMSkgKyBhMzAgKiAoYTExICogYTIyIC0gYTEyICogYTIxKSk7XG4gIG91dFsxM10gPSBhMDAgKiAoYTIxICogYTMyIC0gYTIyICogYTMxKSAtIGEyMCAqIChhMDEgKiBhMzIgLSBhMDIgKiBhMzEpICsgYTMwICogKGEwMSAqIGEyMiAtIGEwMiAqIGEyMSk7XG4gIG91dFsxNF0gPSAtKGEwMCAqIChhMTEgKiBhMzIgLSBhMTIgKiBhMzEpIC0gYTEwICogKGEwMSAqIGEzMiAtIGEwMiAqIGEzMSkgKyBhMzAgKiAoYTAxICogYTEyIC0gYTAyICogYTExKSk7XG4gIG91dFsxNV0gPSBhMDAgKiAoYTExICogYTIyIC0gYTEyICogYTIxKSAtIGExMCAqIChhMDEgKiBhMjIgLSBhMDIgKiBhMjEpICsgYTIwICogKGEwMSAqIGExMiAtIGEwMiAqIGExMSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRldGVybWluYW50IG9mIGEgbWF0NFxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkZXRlcm1pbmFudCBvZiBhXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRldGVybWluYW50KGEpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXSxcbiAgICAgIGEwMyA9IGFbM107XG4gIHZhciBhMTAgPSBhWzRdLFxuICAgICAgYTExID0gYVs1XSxcbiAgICAgIGExMiA9IGFbNl0sXG4gICAgICBhMTMgPSBhWzddO1xuICB2YXIgYTIwID0gYVs4XSxcbiAgICAgIGEyMSA9IGFbOV0sXG4gICAgICBhMjIgPSBhWzEwXSxcbiAgICAgIGEyMyA9IGFbMTFdO1xuICB2YXIgYTMwID0gYVsxMl0sXG4gICAgICBhMzEgPSBhWzEzXSxcbiAgICAgIGEzMiA9IGFbMTRdLFxuICAgICAgYTMzID0gYVsxNV07XG4gIHZhciBiMDAgPSBhMDAgKiBhMTEgLSBhMDEgKiBhMTA7XG4gIHZhciBiMDEgPSBhMDAgKiBhMTIgLSBhMDIgKiBhMTA7XG4gIHZhciBiMDIgPSBhMDAgKiBhMTMgLSBhMDMgKiBhMTA7XG4gIHZhciBiMDMgPSBhMDEgKiBhMTIgLSBhMDIgKiBhMTE7XG4gIHZhciBiMDQgPSBhMDEgKiBhMTMgLSBhMDMgKiBhMTE7XG4gIHZhciBiMDUgPSBhMDIgKiBhMTMgLSBhMDMgKiBhMTI7XG4gIHZhciBiMDYgPSBhMjAgKiBhMzEgLSBhMjEgKiBhMzA7XG4gIHZhciBiMDcgPSBhMjAgKiBhMzIgLSBhMjIgKiBhMzA7XG4gIHZhciBiMDggPSBhMjAgKiBhMzMgLSBhMjMgKiBhMzA7XG4gIHZhciBiMDkgPSBhMjEgKiBhMzIgLSBhMjIgKiBhMzE7XG4gIHZhciBiMTAgPSBhMjEgKiBhMzMgLSBhMjMgKiBhMzE7XG4gIHZhciBiMTEgPSBhMjIgKiBhMzMgLSBhMjMgKiBhMzI7IC8vIENhbGN1bGF0ZSB0aGUgZGV0ZXJtaW5hbnRcblxuICByZXR1cm4gYjAwICogYjExIC0gYjAxICogYjEwICsgYjAyICogYjA5ICsgYjAzICogYjA4IC0gYjA0ICogYjA3ICsgYjA1ICogYjA2O1xufVxuLyoqXG4gKiBNdWx0aXBsaWVzIHR3byBtYXQ0c1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5KG91dCwgYSwgYikge1xuICB2YXIgYTAwID0gYVswXSxcbiAgICAgIGEwMSA9IGFbMV0sXG4gICAgICBhMDIgPSBhWzJdLFxuICAgICAgYTAzID0gYVszXTtcbiAgdmFyIGExMCA9IGFbNF0sXG4gICAgICBhMTEgPSBhWzVdLFxuICAgICAgYTEyID0gYVs2XSxcbiAgICAgIGExMyA9IGFbN107XG4gIHZhciBhMjAgPSBhWzhdLFxuICAgICAgYTIxID0gYVs5XSxcbiAgICAgIGEyMiA9IGFbMTBdLFxuICAgICAgYTIzID0gYVsxMV07XG4gIHZhciBhMzAgPSBhWzEyXSxcbiAgICAgIGEzMSA9IGFbMTNdLFxuICAgICAgYTMyID0gYVsxNF0sXG4gICAgICBhMzMgPSBhWzE1XTsgLy8gQ2FjaGUgb25seSB0aGUgY3VycmVudCBsaW5lIG9mIHRoZSBzZWNvbmQgbWF0cml4XG5cbiAgdmFyIGIwID0gYlswXSxcbiAgICAgIGIxID0gYlsxXSxcbiAgICAgIGIyID0gYlsyXSxcbiAgICAgIGIzID0gYlszXTtcbiAgb3V0WzBdID0gYjAgKiBhMDAgKyBiMSAqIGExMCArIGIyICogYTIwICsgYjMgKiBhMzA7XG4gIG91dFsxXSA9IGIwICogYTAxICsgYjEgKiBhMTEgKyBiMiAqIGEyMSArIGIzICogYTMxO1xuICBvdXRbMl0gPSBiMCAqIGEwMiArIGIxICogYTEyICsgYjIgKiBhMjIgKyBiMyAqIGEzMjtcbiAgb3V0WzNdID0gYjAgKiBhMDMgKyBiMSAqIGExMyArIGIyICogYTIzICsgYjMgKiBhMzM7XG4gIGIwID0gYls0XTtcbiAgYjEgPSBiWzVdO1xuICBiMiA9IGJbNl07XG4gIGIzID0gYls3XTtcbiAgb3V0WzRdID0gYjAgKiBhMDAgKyBiMSAqIGExMCArIGIyICogYTIwICsgYjMgKiBhMzA7XG4gIG91dFs1XSA9IGIwICogYTAxICsgYjEgKiBhMTEgKyBiMiAqIGEyMSArIGIzICogYTMxO1xuICBvdXRbNl0gPSBiMCAqIGEwMiArIGIxICogYTEyICsgYjIgKiBhMjIgKyBiMyAqIGEzMjtcbiAgb3V0WzddID0gYjAgKiBhMDMgKyBiMSAqIGExMyArIGIyICogYTIzICsgYjMgKiBhMzM7XG4gIGIwID0gYls4XTtcbiAgYjEgPSBiWzldO1xuICBiMiA9IGJbMTBdO1xuICBiMyA9IGJbMTFdO1xuICBvdXRbOF0gPSBiMCAqIGEwMCArIGIxICogYTEwICsgYjIgKiBhMjAgKyBiMyAqIGEzMDtcbiAgb3V0WzldID0gYjAgKiBhMDEgKyBiMSAqIGExMSArIGIyICogYTIxICsgYjMgKiBhMzE7XG4gIG91dFsxMF0gPSBiMCAqIGEwMiArIGIxICogYTEyICsgYjIgKiBhMjIgKyBiMyAqIGEzMjtcbiAgb3V0WzExXSA9IGIwICogYTAzICsgYjEgKiBhMTMgKyBiMiAqIGEyMyArIGIzICogYTMzO1xuICBiMCA9IGJbMTJdO1xuICBiMSA9IGJbMTNdO1xuICBiMiA9IGJbMTRdO1xuICBiMyA9IGJbMTVdO1xuICBvdXRbMTJdID0gYjAgKiBhMDAgKyBiMSAqIGExMCArIGIyICogYTIwICsgYjMgKiBhMzA7XG4gIG91dFsxM10gPSBiMCAqIGEwMSArIGIxICogYTExICsgYjIgKiBhMjEgKyBiMyAqIGEzMTtcbiAgb3V0WzE0XSA9IGIwICogYTAyICsgYjEgKiBhMTIgKyBiMiAqIGEyMiArIGIzICogYTMyO1xuICBvdXRbMTVdID0gYjAgKiBhMDMgKyBiMSAqIGExMyArIGIyICogYTIzICsgYjMgKiBhMzM7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFRyYW5zbGF0ZSBhIG1hdDQgYnkgdGhlIGdpdmVuIHZlY3RvclxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgbWF0cml4IHRvIHRyYW5zbGF0ZVxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHYgdmVjdG9yIHRvIHRyYW5zbGF0ZSBieVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2xhdGUob3V0LCBhLCB2KSB7XG4gIHZhciB4ID0gdlswXSxcbiAgICAgIHkgPSB2WzFdLFxuICAgICAgeiA9IHZbMl07XG4gIHZhciBhMDAsIGEwMSwgYTAyLCBhMDM7XG4gIHZhciBhMTAsIGExMSwgYTEyLCBhMTM7XG4gIHZhciBhMjAsIGEyMSwgYTIyLCBhMjM7XG5cbiAgaWYgKGEgPT09IG91dCkge1xuICAgIG91dFsxMl0gPSBhWzBdICogeCArIGFbNF0gKiB5ICsgYVs4XSAqIHogKyBhWzEyXTtcbiAgICBvdXRbMTNdID0gYVsxXSAqIHggKyBhWzVdICogeSArIGFbOV0gKiB6ICsgYVsxM107XG4gICAgb3V0WzE0XSA9IGFbMl0gKiB4ICsgYVs2XSAqIHkgKyBhWzEwXSAqIHogKyBhWzE0XTtcbiAgICBvdXRbMTVdID0gYVszXSAqIHggKyBhWzddICogeSArIGFbMTFdICogeiArIGFbMTVdO1xuICB9IGVsc2Uge1xuICAgIGEwMCA9IGFbMF07XG4gICAgYTAxID0gYVsxXTtcbiAgICBhMDIgPSBhWzJdO1xuICAgIGEwMyA9IGFbM107XG4gICAgYTEwID0gYVs0XTtcbiAgICBhMTEgPSBhWzVdO1xuICAgIGExMiA9IGFbNl07XG4gICAgYTEzID0gYVs3XTtcbiAgICBhMjAgPSBhWzhdO1xuICAgIGEyMSA9IGFbOV07XG4gICAgYTIyID0gYVsxMF07XG4gICAgYTIzID0gYVsxMV07XG4gICAgb3V0WzBdID0gYTAwO1xuICAgIG91dFsxXSA9IGEwMTtcbiAgICBvdXRbMl0gPSBhMDI7XG4gICAgb3V0WzNdID0gYTAzO1xuICAgIG91dFs0XSA9IGExMDtcbiAgICBvdXRbNV0gPSBhMTE7XG4gICAgb3V0WzZdID0gYTEyO1xuICAgIG91dFs3XSA9IGExMztcbiAgICBvdXRbOF0gPSBhMjA7XG4gICAgb3V0WzldID0gYTIxO1xuICAgIG91dFsxMF0gPSBhMjI7XG4gICAgb3V0WzExXSA9IGEyMztcbiAgICBvdXRbMTJdID0gYTAwICogeCArIGExMCAqIHkgKyBhMjAgKiB6ICsgYVsxMl07XG4gICAgb3V0WzEzXSA9IGEwMSAqIHggKyBhMTEgKiB5ICsgYTIxICogeiArIGFbMTNdO1xuICAgIG91dFsxNF0gPSBhMDIgKiB4ICsgYTEyICogeSArIGEyMiAqIHogKyBhWzE0XTtcbiAgICBvdXRbMTVdID0gYTAzICogeCArIGExMyAqIHkgKyBhMjMgKiB6ICsgYVsxNV07XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTY2FsZXMgdGhlIG1hdDQgYnkgdGhlIGRpbWVuc2lvbnMgaW4gdGhlIGdpdmVuIHZlYzMgbm90IHVzaW5nIHZlY3Rvcml6YXRpb25cbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIG1hdHJpeCB0byBzY2FsZVxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHYgdGhlIHZlYzMgdG8gc2NhbGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDR9IG91dFxuICoqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUob3V0LCBhLCB2KSB7XG4gIHZhciB4ID0gdlswXSxcbiAgICAgIHkgPSB2WzFdLFxuICAgICAgeiA9IHZbMl07XG4gIG91dFswXSA9IGFbMF0gKiB4O1xuICBvdXRbMV0gPSBhWzFdICogeDtcbiAgb3V0WzJdID0gYVsyXSAqIHg7XG4gIG91dFszXSA9IGFbM10gKiB4O1xuICBvdXRbNF0gPSBhWzRdICogeTtcbiAgb3V0WzVdID0gYVs1XSAqIHk7XG4gIG91dFs2XSA9IGFbNl0gKiB5O1xuICBvdXRbN10gPSBhWzddICogeTtcbiAgb3V0WzhdID0gYVs4XSAqIHo7XG4gIG91dFs5XSA9IGFbOV0gKiB6O1xuICBvdXRbMTBdID0gYVsxMF0gKiB6O1xuICBvdXRbMTFdID0gYVsxMV0gKiB6O1xuICBvdXRbMTJdID0gYVsxMl07XG4gIG91dFsxM10gPSBhWzEzXTtcbiAgb3V0WzE0XSA9IGFbMTRdO1xuICBvdXRbMTVdID0gYVsxNV07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZXMgYSBtYXQ0IGJ5IHRoZSBnaXZlbiBhbmdsZSBhcm91bmQgdGhlIGdpdmVuIGF4aXNcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIG1hdHJpeCB0byByb3RhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYXhpcyB0aGUgYXhpcyB0byByb3RhdGUgYXJvdW5kXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZShvdXQsIGEsIHJhZCwgYXhpcykge1xuICB2YXIgeCA9IGF4aXNbMF0sXG4gICAgICB5ID0gYXhpc1sxXSxcbiAgICAgIHogPSBheGlzWzJdO1xuICB2YXIgbGVuID0gTWF0aC5oeXBvdCh4LCB5LCB6KTtcbiAgdmFyIHMsIGMsIHQ7XG4gIHZhciBhMDAsIGEwMSwgYTAyLCBhMDM7XG4gIHZhciBhMTAsIGExMSwgYTEyLCBhMTM7XG4gIHZhciBhMjAsIGEyMSwgYTIyLCBhMjM7XG4gIHZhciBiMDAsIGIwMSwgYjAyO1xuICB2YXIgYjEwLCBiMTEsIGIxMjtcbiAgdmFyIGIyMCwgYjIxLCBiMjI7XG5cbiAgaWYgKGxlbiA8IGdsTWF0cml4LkVQU0lMT04pIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGxlbiA9IDEgLyBsZW47XG4gIHggKj0gbGVuO1xuICB5ICo9IGxlbjtcbiAgeiAqPSBsZW47XG4gIHMgPSBNYXRoLnNpbihyYWQpO1xuICBjID0gTWF0aC5jb3MocmFkKTtcbiAgdCA9IDEgLSBjO1xuICBhMDAgPSBhWzBdO1xuICBhMDEgPSBhWzFdO1xuICBhMDIgPSBhWzJdO1xuICBhMDMgPSBhWzNdO1xuICBhMTAgPSBhWzRdO1xuICBhMTEgPSBhWzVdO1xuICBhMTIgPSBhWzZdO1xuICBhMTMgPSBhWzddO1xuICBhMjAgPSBhWzhdO1xuICBhMjEgPSBhWzldO1xuICBhMjIgPSBhWzEwXTtcbiAgYTIzID0gYVsxMV07IC8vIENvbnN0cnVjdCB0aGUgZWxlbWVudHMgb2YgdGhlIHJvdGF0aW9uIG1hdHJpeFxuXG4gIGIwMCA9IHggKiB4ICogdCArIGM7XG4gIGIwMSA9IHkgKiB4ICogdCArIHogKiBzO1xuICBiMDIgPSB6ICogeCAqIHQgLSB5ICogcztcbiAgYjEwID0geCAqIHkgKiB0IC0geiAqIHM7XG4gIGIxMSA9IHkgKiB5ICogdCArIGM7XG4gIGIxMiA9IHogKiB5ICogdCArIHggKiBzO1xuICBiMjAgPSB4ICogeiAqIHQgKyB5ICogcztcbiAgYjIxID0geSAqIHogKiB0IC0geCAqIHM7XG4gIGIyMiA9IHogKiB6ICogdCArIGM7IC8vIFBlcmZvcm0gcm90YXRpb24tc3BlY2lmaWMgbWF0cml4IG11bHRpcGxpY2F0aW9uXG5cbiAgb3V0WzBdID0gYTAwICogYjAwICsgYTEwICogYjAxICsgYTIwICogYjAyO1xuICBvdXRbMV0gPSBhMDEgKiBiMDAgKyBhMTEgKiBiMDEgKyBhMjEgKiBiMDI7XG4gIG91dFsyXSA9IGEwMiAqIGIwMCArIGExMiAqIGIwMSArIGEyMiAqIGIwMjtcbiAgb3V0WzNdID0gYTAzICogYjAwICsgYTEzICogYjAxICsgYTIzICogYjAyO1xuICBvdXRbNF0gPSBhMDAgKiBiMTAgKyBhMTAgKiBiMTEgKyBhMjAgKiBiMTI7XG4gIG91dFs1XSA9IGEwMSAqIGIxMCArIGExMSAqIGIxMSArIGEyMSAqIGIxMjtcbiAgb3V0WzZdID0gYTAyICogYjEwICsgYTEyICogYjExICsgYTIyICogYjEyO1xuICBvdXRbN10gPSBhMDMgKiBiMTAgKyBhMTMgKiBiMTEgKyBhMjMgKiBiMTI7XG4gIG91dFs4XSA9IGEwMCAqIGIyMCArIGExMCAqIGIyMSArIGEyMCAqIGIyMjtcbiAgb3V0WzldID0gYTAxICogYjIwICsgYTExICogYjIxICsgYTIxICogYjIyO1xuICBvdXRbMTBdID0gYTAyICogYjIwICsgYTEyICogYjIxICsgYTIyICogYjIyO1xuICBvdXRbMTFdID0gYTAzICogYjIwICsgYTEzICogYjIxICsgYTIzICogYjIyO1xuXG4gIGlmIChhICE9PSBvdXQpIHtcbiAgICAvLyBJZiB0aGUgc291cmNlIGFuZCBkZXN0aW5hdGlvbiBkaWZmZXIsIGNvcHkgdGhlIHVuY2hhbmdlZCBsYXN0IHJvd1xuICAgIG91dFsxMl0gPSBhWzEyXTtcbiAgICBvdXRbMTNdID0gYVsxM107XG4gICAgb3V0WzE0XSA9IGFbMTRdO1xuICAgIG91dFsxNV0gPSBhWzE1XTtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZXMgYSBtYXRyaXggYnkgdGhlIGdpdmVuIGFuZ2xlIGFyb3VuZCB0aGUgWCBheGlzXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBtYXRyaXggdG8gcm90YXRlXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVYKG91dCwgYSwgcmFkKSB7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKTtcbiAgdmFyIGMgPSBNYXRoLmNvcyhyYWQpO1xuICB2YXIgYTEwID0gYVs0XTtcbiAgdmFyIGExMSA9IGFbNV07XG4gIHZhciBhMTIgPSBhWzZdO1xuICB2YXIgYTEzID0gYVs3XTtcbiAgdmFyIGEyMCA9IGFbOF07XG4gIHZhciBhMjEgPSBhWzldO1xuICB2YXIgYTIyID0gYVsxMF07XG4gIHZhciBhMjMgPSBhWzExXTtcblxuICBpZiAoYSAhPT0gb3V0KSB7XG4gICAgLy8gSWYgdGhlIHNvdXJjZSBhbmQgZGVzdGluYXRpb24gZGlmZmVyLCBjb3B5IHRoZSB1bmNoYW5nZWQgcm93c1xuICAgIG91dFswXSA9IGFbMF07XG4gICAgb3V0WzFdID0gYVsxXTtcbiAgICBvdXRbMl0gPSBhWzJdO1xuICAgIG91dFszXSA9IGFbM107XG4gICAgb3V0WzEyXSA9IGFbMTJdO1xuICAgIG91dFsxM10gPSBhWzEzXTtcbiAgICBvdXRbMTRdID0gYVsxNF07XG4gICAgb3V0WzE1XSA9IGFbMTVdO1xuICB9IC8vIFBlcmZvcm0gYXhpcy1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb25cblxuXG4gIG91dFs0XSA9IGExMCAqIGMgKyBhMjAgKiBzO1xuICBvdXRbNV0gPSBhMTEgKiBjICsgYTIxICogcztcbiAgb3V0WzZdID0gYTEyICogYyArIGEyMiAqIHM7XG4gIG91dFs3XSA9IGExMyAqIGMgKyBhMjMgKiBzO1xuICBvdXRbOF0gPSBhMjAgKiBjIC0gYTEwICogcztcbiAgb3V0WzldID0gYTIxICogYyAtIGExMSAqIHM7XG4gIG91dFsxMF0gPSBhMjIgKiBjIC0gYTEyICogcztcbiAgb3V0WzExXSA9IGEyMyAqIGMgLSBhMTMgKiBzO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGVzIGEgbWF0cml4IGJ5IHRoZSBnaXZlbiBhbmdsZSBhcm91bmQgdGhlIFkgYXhpc1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgbWF0cml4IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgdG8gcm90YXRlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlWShvdXQsIGEsIHJhZCkge1xuICB2YXIgcyA9IE1hdGguc2luKHJhZCk7XG4gIHZhciBjID0gTWF0aC5jb3MocmFkKTtcbiAgdmFyIGEwMCA9IGFbMF07XG4gIHZhciBhMDEgPSBhWzFdO1xuICB2YXIgYTAyID0gYVsyXTtcbiAgdmFyIGEwMyA9IGFbM107XG4gIHZhciBhMjAgPSBhWzhdO1xuICB2YXIgYTIxID0gYVs5XTtcbiAgdmFyIGEyMiA9IGFbMTBdO1xuICB2YXIgYTIzID0gYVsxMV07XG5cbiAgaWYgKGEgIT09IG91dCkge1xuICAgIC8vIElmIHRoZSBzb3VyY2UgYW5kIGRlc3RpbmF0aW9uIGRpZmZlciwgY29weSB0aGUgdW5jaGFuZ2VkIHJvd3NcbiAgICBvdXRbNF0gPSBhWzRdO1xuICAgIG91dFs1XSA9IGFbNV07XG4gICAgb3V0WzZdID0gYVs2XTtcbiAgICBvdXRbN10gPSBhWzddO1xuICAgIG91dFsxMl0gPSBhWzEyXTtcbiAgICBvdXRbMTNdID0gYVsxM107XG4gICAgb3V0WzE0XSA9IGFbMTRdO1xuICAgIG91dFsxNV0gPSBhWzE1XTtcbiAgfSAvLyBQZXJmb3JtIGF4aXMtc3BlY2lmaWMgbWF0cml4IG11bHRpcGxpY2F0aW9uXG5cblxuICBvdXRbMF0gPSBhMDAgKiBjIC0gYTIwICogcztcbiAgb3V0WzFdID0gYTAxICogYyAtIGEyMSAqIHM7XG4gIG91dFsyXSA9IGEwMiAqIGMgLSBhMjIgKiBzO1xuICBvdXRbM10gPSBhMDMgKiBjIC0gYTIzICogcztcbiAgb3V0WzhdID0gYTAwICogcyArIGEyMCAqIGM7XG4gIG91dFs5XSA9IGEwMSAqIHMgKyBhMjEgKiBjO1xuICBvdXRbMTBdID0gYTAyICogcyArIGEyMiAqIGM7XG4gIG91dFsxMV0gPSBhMDMgKiBzICsgYTIzICogYztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlcyBhIG1hdHJpeCBieSB0aGUgZ2l2ZW4gYW5nbGUgYXJvdW5kIHRoZSBaIGF4aXNcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIG1hdHJpeCB0byByb3RhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVoob3V0LCBhLCByYWQpIHtcbiAgdmFyIHMgPSBNYXRoLnNpbihyYWQpO1xuICB2YXIgYyA9IE1hdGguY29zKHJhZCk7XG4gIHZhciBhMDAgPSBhWzBdO1xuICB2YXIgYTAxID0gYVsxXTtcbiAgdmFyIGEwMiA9IGFbMl07XG4gIHZhciBhMDMgPSBhWzNdO1xuICB2YXIgYTEwID0gYVs0XTtcbiAgdmFyIGExMSA9IGFbNV07XG4gIHZhciBhMTIgPSBhWzZdO1xuICB2YXIgYTEzID0gYVs3XTtcblxuICBpZiAoYSAhPT0gb3V0KSB7XG4gICAgLy8gSWYgdGhlIHNvdXJjZSBhbmQgZGVzdGluYXRpb24gZGlmZmVyLCBjb3B5IHRoZSB1bmNoYW5nZWQgbGFzdCByb3dcbiAgICBvdXRbOF0gPSBhWzhdO1xuICAgIG91dFs5XSA9IGFbOV07XG4gICAgb3V0WzEwXSA9IGFbMTBdO1xuICAgIG91dFsxMV0gPSBhWzExXTtcbiAgICBvdXRbMTJdID0gYVsxMl07XG4gICAgb3V0WzEzXSA9IGFbMTNdO1xuICAgIG91dFsxNF0gPSBhWzE0XTtcbiAgICBvdXRbMTVdID0gYVsxNV07XG4gIH0gLy8gUGVyZm9ybSBheGlzLXNwZWNpZmljIG1hdHJpeCBtdWx0aXBsaWNhdGlvblxuXG5cbiAgb3V0WzBdID0gYTAwICogYyArIGExMCAqIHM7XG4gIG91dFsxXSA9IGEwMSAqIGMgKyBhMTEgKiBzO1xuICBvdXRbMl0gPSBhMDIgKiBjICsgYTEyICogcztcbiAgb3V0WzNdID0gYTAzICogYyArIGExMyAqIHM7XG4gIG91dFs0XSA9IGExMCAqIGMgLSBhMDAgKiBzO1xuICBvdXRbNV0gPSBhMTEgKiBjIC0gYTAxICogcztcbiAgb3V0WzZdID0gYTEyICogYyAtIGEwMiAqIHM7XG4gIG91dFs3XSA9IGExMyAqIGMgLSBhMDMgKiBzO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSB2ZWN0b3IgdHJhbnNsYXRpb25cbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDQudHJhbnNsYXRlKGRlc3QsIGRlc3QsIHZlYyk7XG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHYgVHJhbnNsYXRpb24gdmVjdG9yXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21UcmFuc2xhdGlvbihvdXQsIHYpIHtcbiAgb3V0WzBdID0gMTtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gMTtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gMDtcbiAgb3V0WzEwXSA9IDE7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gdlswXTtcbiAgb3V0WzEzXSA9IHZbMV07XG4gIG91dFsxNF0gPSB2WzJdO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIGEgdmVjdG9yIHNjYWxpbmdcbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDQuc2NhbGUoZGVzdCwgZGVzdCwgdmVjKTtcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdiBTY2FsaW5nIHZlY3RvclxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tU2NhbGluZyhvdXQsIHYpIHtcbiAgb3V0WzBdID0gdlswXTtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gdlsxXTtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gMDtcbiAgb3V0WzEwXSA9IHZbMl07XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNF0gPSAwO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIGEgZ2l2ZW4gYW5nbGUgYXJvdW5kIGEgZ2l2ZW4gYXhpc1xuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDQuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0NC5yb3RhdGUoZGVzdCwgZGVzdCwgcmFkLCBheGlzKTtcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGF4aXMgdGhlIGF4aXMgdG8gcm90YXRlIGFyb3VuZFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUm90YXRpb24ob3V0LCByYWQsIGF4aXMpIHtcbiAgdmFyIHggPSBheGlzWzBdLFxuICAgICAgeSA9IGF4aXNbMV0sXG4gICAgICB6ID0gYXhpc1syXTtcbiAgdmFyIGxlbiA9IE1hdGguaHlwb3QoeCwgeSwgeik7XG4gIHZhciBzLCBjLCB0O1xuXG4gIGlmIChsZW4gPCBnbE1hdHJpeC5FUFNJTE9OKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBsZW4gPSAxIC8gbGVuO1xuICB4ICo9IGxlbjtcbiAgeSAqPSBsZW47XG4gIHogKj0gbGVuO1xuICBzID0gTWF0aC5zaW4ocmFkKTtcbiAgYyA9IE1hdGguY29zKHJhZCk7XG4gIHQgPSAxIC0gYzsgLy8gUGVyZm9ybSByb3RhdGlvbi1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb25cblxuICBvdXRbMF0gPSB4ICogeCAqIHQgKyBjO1xuICBvdXRbMV0gPSB5ICogeCAqIHQgKyB6ICogcztcbiAgb3V0WzJdID0geiAqIHggKiB0IC0geSAqIHM7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IHggKiB5ICogdCAtIHogKiBzO1xuICBvdXRbNV0gPSB5ICogeSAqIHQgKyBjO1xuICBvdXRbNl0gPSB6ICogeSAqIHQgKyB4ICogcztcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0geCAqIHogKiB0ICsgeSAqIHM7XG4gIG91dFs5XSA9IHkgKiB6ICogdCAtIHggKiBzO1xuICBvdXRbMTBdID0geiAqIHogKiB0ICsgYztcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE0XSA9IDA7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gdGhlIGdpdmVuIGFuZ2xlIGFyb3VuZCB0aGUgWCBheGlzXG4gKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gKGJ1dCBtdWNoIGZhc3RlciB0aGFuKTpcbiAqXG4gKiAgICAgbWF0NC5pZGVudGl0eShkZXN0KTtcbiAqICAgICBtYXQ0LnJvdGF0ZVgoZGVzdCwgZGVzdCwgcmFkKTtcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tWFJvdGF0aW9uKG91dCwgcmFkKSB7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKTtcbiAgdmFyIGMgPSBNYXRoLmNvcyhyYWQpOyAvLyBQZXJmb3JtIGF4aXMtc3BlY2lmaWMgbWF0cml4IG11bHRpcGxpY2F0aW9uXG5cbiAgb3V0WzBdID0gMTtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gYztcbiAgb3V0WzZdID0gcztcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gLXM7XG4gIG91dFsxMF0gPSBjO1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IDA7XG4gIG91dFsxM10gPSAwO1xuICBvdXRbMTRdID0gMDtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSB0aGUgZ2l2ZW4gYW5nbGUgYXJvdW5kIHRoZSBZIGF4aXNcbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDQucm90YXRlWShkZXN0LCBkZXN0LCByYWQpO1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21ZUm90YXRpb24ob3V0LCByYWQpIHtcbiAgdmFyIHMgPSBNYXRoLnNpbihyYWQpO1xuICB2YXIgYyA9IE1hdGguY29zKHJhZCk7IC8vIFBlcmZvcm0gYXhpcy1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb25cblxuICBvdXRbMF0gPSBjO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAtcztcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gMTtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gcztcbiAgb3V0WzldID0gMDtcbiAgb3V0WzEwXSA9IGM7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNF0gPSAwO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIHRoZSBnaXZlbiBhbmdsZSBhcm91bmQgdGhlIFogYXhpc1xuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDQuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0NC5yb3RhdGVaKGRlc3QsIGRlc3QsIHJhZCk7XG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgdG8gcm90YXRlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVpSb3RhdGlvbihvdXQsIHJhZCkge1xuICB2YXIgcyA9IE1hdGguc2luKHJhZCk7XG4gIHZhciBjID0gTWF0aC5jb3MocmFkKTsgLy8gUGVyZm9ybSBheGlzLXNwZWNpZmljIG1hdHJpeCBtdWx0aXBsaWNhdGlvblxuXG4gIG91dFswXSA9IGM7XG4gIG91dFsxXSA9IHM7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IC1zO1xuICBvdXRbNV0gPSBjO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAwO1xuICBvdXRbOV0gPSAwO1xuICBvdXRbMTBdID0gMTtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE0XSA9IDA7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSBxdWF0ZXJuaW9uIHJvdGF0aW9uIGFuZCB2ZWN0b3IgdHJhbnNsYXRpb25cbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDQudHJhbnNsYXRlKGRlc3QsIHZlYyk7XG4gKiAgICAgbGV0IHF1YXRNYXQgPSBtYXQ0LmNyZWF0ZSgpO1xuICogICAgIHF1YXQ0LnRvTWF0NChxdWF0LCBxdWF0TWF0KTtcbiAqICAgICBtYXQ0Lm11bHRpcGx5KGRlc3QsIHF1YXRNYXQpO1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7cXVhdDR9IHEgUm90YXRpb24gcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHYgVHJhbnNsYXRpb24gdmVjdG9yXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21Sb3RhdGlvblRyYW5zbGF0aW9uKG91dCwgcSwgdikge1xuICAvLyBRdWF0ZXJuaW9uIG1hdGhcbiAgdmFyIHggPSBxWzBdLFxuICAgICAgeSA9IHFbMV0sXG4gICAgICB6ID0gcVsyXSxcbiAgICAgIHcgPSBxWzNdO1xuICB2YXIgeDIgPSB4ICsgeDtcbiAgdmFyIHkyID0geSArIHk7XG4gIHZhciB6MiA9IHogKyB6O1xuICB2YXIgeHggPSB4ICogeDI7XG4gIHZhciB4eSA9IHggKiB5MjtcbiAgdmFyIHh6ID0geCAqIHoyO1xuICB2YXIgeXkgPSB5ICogeTI7XG4gIHZhciB5eiA9IHkgKiB6MjtcbiAgdmFyIHp6ID0geiAqIHoyO1xuICB2YXIgd3ggPSB3ICogeDI7XG4gIHZhciB3eSA9IHcgKiB5MjtcbiAgdmFyIHd6ID0gdyAqIHoyO1xuICBvdXRbMF0gPSAxIC0gKHl5ICsgenopO1xuICBvdXRbMV0gPSB4eSArIHd6O1xuICBvdXRbMl0gPSB4eiAtIHd5O1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSB4eSAtIHd6O1xuICBvdXRbNV0gPSAxIC0gKHh4ICsgenopO1xuICBvdXRbNl0gPSB5eiArIHd4O1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSB4eiArIHd5O1xuICBvdXRbOV0gPSB5eiAtIHd4O1xuICBvdXRbMTBdID0gMSAtICh4eCArIHl5KTtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSB2WzBdO1xuICBvdXRbMTNdID0gdlsxXTtcbiAgb3V0WzE0XSA9IHZbMl07XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IG1hdDQgZnJvbSBhIGR1YWwgcXVhdC5cbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBNYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSBEdWFsIFF1YXRlcm5pb25cbiAqIEByZXR1cm5zIHttYXQ0fSBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21RdWF0MihvdXQsIGEpIHtcbiAgdmFyIHRyYW5zbGF0aW9uID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMyk7XG4gIHZhciBieCA9IC1hWzBdLFxuICAgICAgYnkgPSAtYVsxXSxcbiAgICAgIGJ6ID0gLWFbMl0sXG4gICAgICBidyA9IGFbM10sXG4gICAgICBheCA9IGFbNF0sXG4gICAgICBheSA9IGFbNV0sXG4gICAgICBheiA9IGFbNl0sXG4gICAgICBhdyA9IGFbN107XG4gIHZhciBtYWduaXR1ZGUgPSBieCAqIGJ4ICsgYnkgKiBieSArIGJ6ICogYnogKyBidyAqIGJ3OyAvL09ubHkgc2NhbGUgaWYgaXQgbWFrZXMgc2Vuc2VcblxuICBpZiAobWFnbml0dWRlID4gMCkge1xuICAgIHRyYW5zbGF0aW9uWzBdID0gKGF4ICogYncgKyBhdyAqIGJ4ICsgYXkgKiBieiAtIGF6ICogYnkpICogMiAvIG1hZ25pdHVkZTtcbiAgICB0cmFuc2xhdGlvblsxXSA9IChheSAqIGJ3ICsgYXcgKiBieSArIGF6ICogYnggLSBheCAqIGJ6KSAqIDIgLyBtYWduaXR1ZGU7XG4gICAgdHJhbnNsYXRpb25bMl0gPSAoYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieCkgKiAyIC8gbWFnbml0dWRlO1xuICB9IGVsc2Uge1xuICAgIHRyYW5zbGF0aW9uWzBdID0gKGF4ICogYncgKyBhdyAqIGJ4ICsgYXkgKiBieiAtIGF6ICogYnkpICogMjtcbiAgICB0cmFuc2xhdGlvblsxXSA9IChheSAqIGJ3ICsgYXcgKiBieSArIGF6ICogYnggLSBheCAqIGJ6KSAqIDI7XG4gICAgdHJhbnNsYXRpb25bMl0gPSAoYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieCkgKiAyO1xuICB9XG5cbiAgZnJvbVJvdGF0aW9uVHJhbnNsYXRpb24ob3V0LCBhLCB0cmFuc2xhdGlvbik7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHRyYW5zbGF0aW9uIHZlY3RvciBjb21wb25lbnQgb2YgYSB0cmFuc2Zvcm1hdGlvblxuICogIG1hdHJpeC4gSWYgYSBtYXRyaXggaXMgYnVpbHQgd2l0aCBmcm9tUm90YXRpb25UcmFuc2xhdGlvbixcbiAqICB0aGUgcmV0dXJuZWQgdmVjdG9yIHdpbGwgYmUgdGhlIHNhbWUgYXMgdGhlIHRyYW5zbGF0aW9uIHZlY3RvclxuICogIG9yaWdpbmFsbHkgc3VwcGxpZWQuXG4gKiBAcGFyYW0gIHt2ZWMzfSBvdXQgVmVjdG9yIHRvIHJlY2VpdmUgdHJhbnNsYXRpb24gY29tcG9uZW50XG4gKiBAcGFyYW0gIHtSZWFkb25seU1hdDR9IG1hdCBNYXRyaXggdG8gYmUgZGVjb21wb3NlZCAoaW5wdXQpXG4gKiBAcmV0dXJuIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNsYXRpb24ob3V0LCBtYXQpIHtcbiAgb3V0WzBdID0gbWF0WzEyXTtcbiAgb3V0WzFdID0gbWF0WzEzXTtcbiAgb3V0WzJdID0gbWF0WzE0XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgc2NhbGluZyBmYWN0b3IgY29tcG9uZW50IG9mIGEgdHJhbnNmb3JtYXRpb25cbiAqICBtYXRyaXguIElmIGEgbWF0cml4IGlzIGJ1aWx0IHdpdGggZnJvbVJvdGF0aW9uVHJhbnNsYXRpb25TY2FsZVxuICogIHdpdGggYSBub3JtYWxpemVkIFF1YXRlcm5pb24gcGFyYW10ZXIsIHRoZSByZXR1cm5lZCB2ZWN0b3Igd2lsbCBiZVxuICogIHRoZSBzYW1lIGFzIHRoZSBzY2FsaW5nIHZlY3RvclxuICogIG9yaWdpbmFsbHkgc3VwcGxpZWQuXG4gKiBAcGFyYW0gIHt2ZWMzfSBvdXQgVmVjdG9yIHRvIHJlY2VpdmUgc2NhbGluZyBmYWN0b3IgY29tcG9uZW50XG4gKiBAcGFyYW0gIHtSZWFkb25seU1hdDR9IG1hdCBNYXRyaXggdG8gYmUgZGVjb21wb3NlZCAoaW5wdXQpXG4gKiBAcmV0dXJuIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2NhbGluZyhvdXQsIG1hdCkge1xuICB2YXIgbTExID0gbWF0WzBdO1xuICB2YXIgbTEyID0gbWF0WzFdO1xuICB2YXIgbTEzID0gbWF0WzJdO1xuICB2YXIgbTIxID0gbWF0WzRdO1xuICB2YXIgbTIyID0gbWF0WzVdO1xuICB2YXIgbTIzID0gbWF0WzZdO1xuICB2YXIgbTMxID0gbWF0WzhdO1xuICB2YXIgbTMyID0gbWF0WzldO1xuICB2YXIgbTMzID0gbWF0WzEwXTtcbiAgb3V0WzBdID0gTWF0aC5oeXBvdChtMTEsIG0xMiwgbTEzKTtcbiAgb3V0WzFdID0gTWF0aC5oeXBvdChtMjEsIG0yMiwgbTIzKTtcbiAgb3V0WzJdID0gTWF0aC5oeXBvdChtMzEsIG0zMiwgbTMzKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyBhIHF1YXRlcm5pb24gcmVwcmVzZW50aW5nIHRoZSByb3RhdGlvbmFsIGNvbXBvbmVudFxuICogIG9mIGEgdHJhbnNmb3JtYXRpb24gbWF0cml4LiBJZiBhIG1hdHJpeCBpcyBidWlsdCB3aXRoXG4gKiAgZnJvbVJvdGF0aW9uVHJhbnNsYXRpb24sIHRoZSByZXR1cm5lZCBxdWF0ZXJuaW9uIHdpbGwgYmUgdGhlXG4gKiAgc2FtZSBhcyB0aGUgcXVhdGVybmlvbiBvcmlnaW5hbGx5IHN1cHBsaWVkLlxuICogQHBhcmFtIHtxdWF0fSBvdXQgUXVhdGVybmlvbiB0byByZWNlaXZlIHRoZSByb3RhdGlvbiBjb21wb25lbnRcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBtYXQgTWF0cml4IHRvIGJlIGRlY29tcG9zZWQgKGlucHV0KVxuICogQHJldHVybiB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJvdGF0aW9uKG91dCwgbWF0KSB7XG4gIHZhciBzY2FsaW5nID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMyk7XG4gIGdldFNjYWxpbmcoc2NhbGluZywgbWF0KTtcbiAgdmFyIGlzMSA9IDEgLyBzY2FsaW5nWzBdO1xuICB2YXIgaXMyID0gMSAvIHNjYWxpbmdbMV07XG4gIHZhciBpczMgPSAxIC8gc2NhbGluZ1syXTtcbiAgdmFyIHNtMTEgPSBtYXRbMF0gKiBpczE7XG4gIHZhciBzbTEyID0gbWF0WzFdICogaXMyO1xuICB2YXIgc20xMyA9IG1hdFsyXSAqIGlzMztcbiAgdmFyIHNtMjEgPSBtYXRbNF0gKiBpczE7XG4gIHZhciBzbTIyID0gbWF0WzVdICogaXMyO1xuICB2YXIgc20yMyA9IG1hdFs2XSAqIGlzMztcbiAgdmFyIHNtMzEgPSBtYXRbOF0gKiBpczE7XG4gIHZhciBzbTMyID0gbWF0WzldICogaXMyO1xuICB2YXIgc20zMyA9IG1hdFsxMF0gKiBpczM7XG4gIHZhciB0cmFjZSA9IHNtMTEgKyBzbTIyICsgc20zMztcbiAgdmFyIFMgPSAwO1xuXG4gIGlmICh0cmFjZSA+IDApIHtcbiAgICBTID0gTWF0aC5zcXJ0KHRyYWNlICsgMS4wKSAqIDI7XG4gICAgb3V0WzNdID0gMC4yNSAqIFM7XG4gICAgb3V0WzBdID0gKHNtMjMgLSBzbTMyKSAvIFM7XG4gICAgb3V0WzFdID0gKHNtMzEgLSBzbTEzKSAvIFM7XG4gICAgb3V0WzJdID0gKHNtMTIgLSBzbTIxKSAvIFM7XG4gIH0gZWxzZSBpZiAoc20xMSA+IHNtMjIgJiYgc20xMSA+IHNtMzMpIHtcbiAgICBTID0gTWF0aC5zcXJ0KDEuMCArIHNtMTEgLSBzbTIyIC0gc20zMykgKiAyO1xuICAgIG91dFszXSA9IChzbTIzIC0gc20zMikgLyBTO1xuICAgIG91dFswXSA9IDAuMjUgKiBTO1xuICAgIG91dFsxXSA9IChzbTEyICsgc20yMSkgLyBTO1xuICAgIG91dFsyXSA9IChzbTMxICsgc20xMykgLyBTO1xuICB9IGVsc2UgaWYgKHNtMjIgPiBzbTMzKSB7XG4gICAgUyA9IE1hdGguc3FydCgxLjAgKyBzbTIyIC0gc20xMSAtIHNtMzMpICogMjtcbiAgICBvdXRbM10gPSAoc20zMSAtIHNtMTMpIC8gUztcbiAgICBvdXRbMF0gPSAoc20xMiArIHNtMjEpIC8gUztcbiAgICBvdXRbMV0gPSAwLjI1ICogUztcbiAgICBvdXRbMl0gPSAoc20yMyArIHNtMzIpIC8gUztcbiAgfSBlbHNlIHtcbiAgICBTID0gTWF0aC5zcXJ0KDEuMCArIHNtMzMgLSBzbTExIC0gc20yMikgKiAyO1xuICAgIG91dFszXSA9IChzbTEyIC0gc20yMSkgLyBTO1xuICAgIG91dFswXSA9IChzbTMxICsgc20xMykgLyBTO1xuICAgIG91dFsxXSA9IChzbTIzICsgc20zMikgLyBTO1xuICAgIG91dFsyXSA9IDAuMjUgKiBTO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIGEgcXVhdGVybmlvbiByb3RhdGlvbiwgdmVjdG9yIHRyYW5zbGF0aW9uIGFuZCB2ZWN0b3Igc2NhbGVcbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDQudHJhbnNsYXRlKGRlc3QsIHZlYyk7XG4gKiAgICAgbGV0IHF1YXRNYXQgPSBtYXQ0LmNyZWF0ZSgpO1xuICogICAgIHF1YXQ0LnRvTWF0NChxdWF0LCBxdWF0TWF0KTtcbiAqICAgICBtYXQ0Lm11bHRpcGx5KGRlc3QsIHF1YXRNYXQpO1xuICogICAgIG1hdDQuc2NhbGUoZGVzdCwgc2NhbGUpXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtxdWF0NH0gcSBSb3RhdGlvbiBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdiBUcmFuc2xhdGlvbiB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBzIFNjYWxpbmcgdmVjdG9yXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21Sb3RhdGlvblRyYW5zbGF0aW9uU2NhbGUob3V0LCBxLCB2LCBzKSB7XG4gIC8vIFF1YXRlcm5pb24gbWF0aFxuICB2YXIgeCA9IHFbMF0sXG4gICAgICB5ID0gcVsxXSxcbiAgICAgIHogPSBxWzJdLFxuICAgICAgdyA9IHFbM107XG4gIHZhciB4MiA9IHggKyB4O1xuICB2YXIgeTIgPSB5ICsgeTtcbiAgdmFyIHoyID0geiArIHo7XG4gIHZhciB4eCA9IHggKiB4MjtcbiAgdmFyIHh5ID0geCAqIHkyO1xuICB2YXIgeHogPSB4ICogejI7XG4gIHZhciB5eSA9IHkgKiB5MjtcbiAgdmFyIHl6ID0geSAqIHoyO1xuICB2YXIgenogPSB6ICogejI7XG4gIHZhciB3eCA9IHcgKiB4MjtcbiAgdmFyIHd5ID0gdyAqIHkyO1xuICB2YXIgd3ogPSB3ICogejI7XG4gIHZhciBzeCA9IHNbMF07XG4gIHZhciBzeSA9IHNbMV07XG4gIHZhciBzeiA9IHNbMl07XG4gIG91dFswXSA9ICgxIC0gKHl5ICsgenopKSAqIHN4O1xuICBvdXRbMV0gPSAoeHkgKyB3eikgKiBzeDtcbiAgb3V0WzJdID0gKHh6IC0gd3kpICogc3g7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9ICh4eSAtIHd6KSAqIHN5O1xuICBvdXRbNV0gPSAoMSAtICh4eCArIHp6KSkgKiBzeTtcbiAgb3V0WzZdID0gKHl6ICsgd3gpICogc3k7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9ICh4eiArIHd5KSAqIHN6O1xuICBvdXRbOV0gPSAoeXogLSB3eCkgKiBzejtcbiAgb3V0WzEwXSA9ICgxIC0gKHh4ICsgeXkpKSAqIHN6O1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IHZbMF07XG4gIG91dFsxM10gPSB2WzFdO1xuICBvdXRbMTRdID0gdlsyXTtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSBhIHF1YXRlcm5pb24gcm90YXRpb24sIHZlY3RvciB0cmFuc2xhdGlvbiBhbmQgdmVjdG9yIHNjYWxlLCByb3RhdGluZyBhbmQgc2NhbGluZyBhcm91bmQgdGhlIGdpdmVuIG9yaWdpblxuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDQuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0NC50cmFuc2xhdGUoZGVzdCwgdmVjKTtcbiAqICAgICBtYXQ0LnRyYW5zbGF0ZShkZXN0LCBvcmlnaW4pO1xuICogICAgIGxldCBxdWF0TWF0ID0gbWF0NC5jcmVhdGUoKTtcbiAqICAgICBxdWF0NC50b01hdDQocXVhdCwgcXVhdE1hdCk7XG4gKiAgICAgbWF0NC5tdWx0aXBseShkZXN0LCBxdWF0TWF0KTtcbiAqICAgICBtYXQ0LnNjYWxlKGRlc3QsIHNjYWxlKVxuICogICAgIG1hdDQudHJhbnNsYXRlKGRlc3QsIG5lZ2F0aXZlT3JpZ2luKTtcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge3F1YXQ0fSBxIFJvdGF0aW9uIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSB2IFRyYW5zbGF0aW9uIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHMgU2NhbGluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBvIFRoZSBvcmlnaW4gdmVjdG9yIGFyb3VuZCB3aGljaCB0byBzY2FsZSBhbmQgcm90YXRlXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21Sb3RhdGlvblRyYW5zbGF0aW9uU2NhbGVPcmlnaW4ob3V0LCBxLCB2LCBzLCBvKSB7XG4gIC8vIFF1YXRlcm5pb24gbWF0aFxuICB2YXIgeCA9IHFbMF0sXG4gICAgICB5ID0gcVsxXSxcbiAgICAgIHogPSBxWzJdLFxuICAgICAgdyA9IHFbM107XG4gIHZhciB4MiA9IHggKyB4O1xuICB2YXIgeTIgPSB5ICsgeTtcbiAgdmFyIHoyID0geiArIHo7XG4gIHZhciB4eCA9IHggKiB4MjtcbiAgdmFyIHh5ID0geCAqIHkyO1xuICB2YXIgeHogPSB4ICogejI7XG4gIHZhciB5eSA9IHkgKiB5MjtcbiAgdmFyIHl6ID0geSAqIHoyO1xuICB2YXIgenogPSB6ICogejI7XG4gIHZhciB3eCA9IHcgKiB4MjtcbiAgdmFyIHd5ID0gdyAqIHkyO1xuICB2YXIgd3ogPSB3ICogejI7XG4gIHZhciBzeCA9IHNbMF07XG4gIHZhciBzeSA9IHNbMV07XG4gIHZhciBzeiA9IHNbMl07XG4gIHZhciBveCA9IG9bMF07XG4gIHZhciBveSA9IG9bMV07XG4gIHZhciBveiA9IG9bMl07XG4gIHZhciBvdXQwID0gKDEgLSAoeXkgKyB6eikpICogc3g7XG4gIHZhciBvdXQxID0gKHh5ICsgd3opICogc3g7XG4gIHZhciBvdXQyID0gKHh6IC0gd3kpICogc3g7XG4gIHZhciBvdXQ0ID0gKHh5IC0gd3opICogc3k7XG4gIHZhciBvdXQ1ID0gKDEgLSAoeHggKyB6eikpICogc3k7XG4gIHZhciBvdXQ2ID0gKHl6ICsgd3gpICogc3k7XG4gIHZhciBvdXQ4ID0gKHh6ICsgd3kpICogc3o7XG4gIHZhciBvdXQ5ID0gKHl6IC0gd3gpICogc3o7XG4gIHZhciBvdXQxMCA9ICgxIC0gKHh4ICsgeXkpKSAqIHN6O1xuICBvdXRbMF0gPSBvdXQwO1xuICBvdXRbMV0gPSBvdXQxO1xuICBvdXRbMl0gPSBvdXQyO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSBvdXQ0O1xuICBvdXRbNV0gPSBvdXQ1O1xuICBvdXRbNl0gPSBvdXQ2O1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSBvdXQ4O1xuICBvdXRbOV0gPSBvdXQ5O1xuICBvdXRbMTBdID0gb3V0MTA7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gdlswXSArIG94IC0gKG91dDAgKiBveCArIG91dDQgKiBveSArIG91dDggKiBveik7XG4gIG91dFsxM10gPSB2WzFdICsgb3kgLSAob3V0MSAqIG94ICsgb3V0NSAqIG95ICsgb3V0OSAqIG96KTtcbiAgb3V0WzE0XSA9IHZbMl0gKyBveiAtIChvdXQyICogb3ggKyBvdXQ2ICogb3kgKyBvdXQxMCAqIG96KTtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgYSA0eDQgbWF0cml4IGZyb20gdGhlIGdpdmVuIHF1YXRlcm5pb25cbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gcSBRdWF0ZXJuaW9uIHRvIGNyZWF0ZSBtYXRyaXggZnJvbVxuICpcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVF1YXQob3V0LCBxKSB7XG4gIHZhciB4ID0gcVswXSxcbiAgICAgIHkgPSBxWzFdLFxuICAgICAgeiA9IHFbMl0sXG4gICAgICB3ID0gcVszXTtcbiAgdmFyIHgyID0geCArIHg7XG4gIHZhciB5MiA9IHkgKyB5O1xuICB2YXIgejIgPSB6ICsgejtcbiAgdmFyIHh4ID0geCAqIHgyO1xuICB2YXIgeXggPSB5ICogeDI7XG4gIHZhciB5eSA9IHkgKiB5MjtcbiAgdmFyIHp4ID0geiAqIHgyO1xuICB2YXIgenkgPSB6ICogeTI7XG4gIHZhciB6eiA9IHogKiB6MjtcbiAgdmFyIHd4ID0gdyAqIHgyO1xuICB2YXIgd3kgPSB3ICogeTI7XG4gIHZhciB3eiA9IHcgKiB6MjtcbiAgb3V0WzBdID0gMSAtIHl5IC0geno7XG4gIG91dFsxXSA9IHl4ICsgd3o7XG4gIG91dFsyXSA9IHp4IC0gd3k7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IHl4IC0gd3o7XG4gIG91dFs1XSA9IDEgLSB4eCAtIHp6O1xuICBvdXRbNl0gPSB6eSArIHd4O1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSB6eCArIHd5O1xuICBvdXRbOV0gPSB6eSAtIHd4O1xuICBvdXRbMTBdID0gMSAtIHh4IC0geXk7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNF0gPSAwO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgZnJ1c3R1bSBtYXRyaXggd2l0aCB0aGUgZ2l2ZW4gYm91bmRzXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCBmcnVzdHVtIG1hdHJpeCB3aWxsIGJlIHdyaXR0ZW4gaW50b1xuICogQHBhcmFtIHtOdW1iZXJ9IGxlZnQgTGVmdCBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtOdW1iZXJ9IHJpZ2h0IFJpZ2h0IGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge051bWJlcn0gYm90dG9tIEJvdHRvbSBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtOdW1iZXJ9IHRvcCBUb3AgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7TnVtYmVyfSBuZWFyIE5lYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7TnVtYmVyfSBmYXIgRmFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZydXN0dW0ob3V0LCBsZWZ0LCByaWdodCwgYm90dG9tLCB0b3AsIG5lYXIsIGZhcikge1xuICB2YXIgcmwgPSAxIC8gKHJpZ2h0IC0gbGVmdCk7XG4gIHZhciB0YiA9IDEgLyAodG9wIC0gYm90dG9tKTtcbiAgdmFyIG5mID0gMSAvIChuZWFyIC0gZmFyKTtcbiAgb3V0WzBdID0gbmVhciAqIDIgKiBybDtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gbmVhciAqIDIgKiB0YjtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gKHJpZ2h0ICsgbGVmdCkgKiBybDtcbiAgb3V0WzldID0gKHRvcCArIGJvdHRvbSkgKiB0YjtcbiAgb3V0WzEwXSA9IChmYXIgKyBuZWFyKSAqIG5mO1xuICBvdXRbMTFdID0gLTE7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE0XSA9IGZhciAqIG5lYXIgKiAyICogbmY7XG4gIG91dFsxNV0gPSAwO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBwZXJzcGVjdGl2ZSBwcm9qZWN0aW9uIG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBib3VuZHMuXG4gKiBUaGUgbmVhci9mYXIgY2xpcCBwbGFuZXMgY29ycmVzcG9uZCB0byBhIG5vcm1hbGl6ZWQgZGV2aWNlIGNvb3JkaW5hdGUgWiByYW5nZSBvZiBbLTEsIDFdLFxuICogd2hpY2ggbWF0Y2hlcyBXZWJHTC9PcGVuR0wncyBjbGlwIHZvbHVtZS5cbiAqIFBhc3NpbmcgbnVsbC91bmRlZmluZWQvbm8gdmFsdWUgZm9yIGZhciB3aWxsIGdlbmVyYXRlIGluZmluaXRlIHByb2plY3Rpb24gbWF0cml4LlxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7bnVtYmVyfSBmb3Z5IFZlcnRpY2FsIGZpZWxkIG9mIHZpZXcgaW4gcmFkaWFuc1xuICogQHBhcmFtIHtudW1iZXJ9IGFzcGVjdCBBc3BlY3QgcmF0aW8uIHR5cGljYWxseSB2aWV3cG9ydCB3aWR0aC9oZWlnaHRcbiAqIEBwYXJhbSB7bnVtYmVyfSBuZWFyIE5lYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSBmYXIgRmFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtLCBjYW4gYmUgbnVsbCBvciBJbmZpbml0eVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwZXJzcGVjdGl2ZU5PKG91dCwgZm92eSwgYXNwZWN0LCBuZWFyLCBmYXIpIHtcbiAgdmFyIGYgPSAxLjAgLyBNYXRoLnRhbihmb3Z5IC8gMiksXG4gICAgICBuZjtcbiAgb3V0WzBdID0gZiAvIGFzcGVjdDtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gZjtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gMDtcbiAgb3V0WzExXSA9IC0xO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNV0gPSAwO1xuXG4gIGlmIChmYXIgIT0gbnVsbCAmJiBmYXIgIT09IEluZmluaXR5KSB7XG4gICAgbmYgPSAxIC8gKG5lYXIgLSBmYXIpO1xuICAgIG91dFsxMF0gPSAoZmFyICsgbmVhcikgKiBuZjtcbiAgICBvdXRbMTRdID0gMiAqIGZhciAqIG5lYXIgKiBuZjtcbiAgfSBlbHNlIHtcbiAgICBvdXRbMTBdID0gLTE7XG4gICAgb3V0WzE0XSA9IC0yICogbmVhcjtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgbWF0NC5wZXJzcGVjdGl2ZU5PfVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBwZXJzcGVjdGl2ZSA9IHBlcnNwZWN0aXZlTk87XG4vKipcbiAqIEdlbmVyYXRlcyBhIHBlcnNwZWN0aXZlIHByb2plY3Rpb24gbWF0cml4IHN1aXRhYmxlIGZvciBXZWJHUFUgd2l0aCB0aGUgZ2l2ZW4gYm91bmRzLlxuICogVGhlIG5lYXIvZmFyIGNsaXAgcGxhbmVzIGNvcnJlc3BvbmQgdG8gYSBub3JtYWxpemVkIGRldmljZSBjb29yZGluYXRlIFogcmFuZ2Ugb2YgWzAsIDFdLFxuICogd2hpY2ggbWF0Y2hlcyBXZWJHUFUvVnVsa2FuL0RpcmVjdFgvTWV0YWwncyBjbGlwIHZvbHVtZS5cbiAqIFBhc3NpbmcgbnVsbC91bmRlZmluZWQvbm8gdmFsdWUgZm9yIGZhciB3aWxsIGdlbmVyYXRlIGluZmluaXRlIHByb2plY3Rpb24gbWF0cml4LlxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7bnVtYmVyfSBmb3Z5IFZlcnRpY2FsIGZpZWxkIG9mIHZpZXcgaW4gcmFkaWFuc1xuICogQHBhcmFtIHtudW1iZXJ9IGFzcGVjdCBBc3BlY3QgcmF0aW8uIHR5cGljYWxseSB2aWV3cG9ydCB3aWR0aC9oZWlnaHRcbiAqIEBwYXJhbSB7bnVtYmVyfSBuZWFyIE5lYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSBmYXIgRmFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtLCBjYW4gYmUgbnVsbCBvciBJbmZpbml0eVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwZXJzcGVjdGl2ZVpPKG91dCwgZm92eSwgYXNwZWN0LCBuZWFyLCBmYXIpIHtcbiAgdmFyIGYgPSAxLjAgLyBNYXRoLnRhbihmb3Z5IC8gMiksXG4gICAgICBuZjtcbiAgb3V0WzBdID0gZiAvIGFzcGVjdDtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gZjtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gMDtcbiAgb3V0WzExXSA9IC0xO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNV0gPSAwO1xuXG4gIGlmIChmYXIgIT0gbnVsbCAmJiBmYXIgIT09IEluZmluaXR5KSB7XG4gICAgbmYgPSAxIC8gKG5lYXIgLSBmYXIpO1xuICAgIG91dFsxMF0gPSBmYXIgKiBuZjtcbiAgICBvdXRbMTRdID0gZmFyICogbmVhciAqIG5mO1xuICB9IGVsc2Uge1xuICAgIG91dFsxMF0gPSAtMTtcbiAgICBvdXRbMTRdID0gLW5lYXI7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBwZXJzcGVjdGl2ZSBwcm9qZWN0aW9uIG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBmaWVsZCBvZiB2aWV3LlxuICogVGhpcyBpcyBwcmltYXJpbHkgdXNlZnVsIGZvciBnZW5lcmF0aW5nIHByb2plY3Rpb24gbWF0cmljZXMgdG8gYmUgdXNlZFxuICogd2l0aCB0aGUgc3RpbGwgZXhwZXJpZW1lbnRhbCBXZWJWUiBBUEkuXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCBmcnVzdHVtIG1hdHJpeCB3aWxsIGJlIHdyaXR0ZW4gaW50b1xuICogQHBhcmFtIHtPYmplY3R9IGZvdiBPYmplY3QgY29udGFpbmluZyB0aGUgZm9sbG93aW5nIHZhbHVlczogdXBEZWdyZWVzLCBkb3duRGVncmVlcywgbGVmdERlZ3JlZXMsIHJpZ2h0RGVncmVlc1xuICogQHBhcmFtIHtudW1iZXJ9IG5lYXIgTmVhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IGZhciBGYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcGVyc3BlY3RpdmVGcm9tRmllbGRPZlZpZXcob3V0LCBmb3YsIG5lYXIsIGZhcikge1xuICB2YXIgdXBUYW4gPSBNYXRoLnRhbihmb3YudXBEZWdyZWVzICogTWF0aC5QSSAvIDE4MC4wKTtcbiAgdmFyIGRvd25UYW4gPSBNYXRoLnRhbihmb3YuZG93bkRlZ3JlZXMgKiBNYXRoLlBJIC8gMTgwLjApO1xuICB2YXIgbGVmdFRhbiA9IE1hdGgudGFuKGZvdi5sZWZ0RGVncmVlcyAqIE1hdGguUEkgLyAxODAuMCk7XG4gIHZhciByaWdodFRhbiA9IE1hdGgudGFuKGZvdi5yaWdodERlZ3JlZXMgKiBNYXRoLlBJIC8gMTgwLjApO1xuICB2YXIgeFNjYWxlID0gMi4wIC8gKGxlZnRUYW4gKyByaWdodFRhbik7XG4gIHZhciB5U2NhbGUgPSAyLjAgLyAodXBUYW4gKyBkb3duVGFuKTtcbiAgb3V0WzBdID0geFNjYWxlO1xuICBvdXRbMV0gPSAwLjA7XG4gIG91dFsyXSA9IDAuMDtcbiAgb3V0WzNdID0gMC4wO1xuICBvdXRbNF0gPSAwLjA7XG4gIG91dFs1XSA9IHlTY2FsZTtcbiAgb3V0WzZdID0gMC4wO1xuICBvdXRbN10gPSAwLjA7XG4gIG91dFs4XSA9IC0oKGxlZnRUYW4gLSByaWdodFRhbikgKiB4U2NhbGUgKiAwLjUpO1xuICBvdXRbOV0gPSAodXBUYW4gLSBkb3duVGFuKSAqIHlTY2FsZSAqIDAuNTtcbiAgb3V0WzEwXSA9IGZhciAvIChuZWFyIC0gZmFyKTtcbiAgb3V0WzExXSA9IC0xLjA7XG4gIG91dFsxMl0gPSAwLjA7XG4gIG91dFsxM10gPSAwLjA7XG4gIG91dFsxNF0gPSBmYXIgKiBuZWFyIC8gKG5lYXIgLSBmYXIpO1xuICBvdXRbMTVdID0gMC4wO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBvcnRob2dvbmFsIHByb2plY3Rpb24gbWF0cml4IHdpdGggdGhlIGdpdmVuIGJvdW5kcy5cbiAqIFRoZSBuZWFyL2ZhciBjbGlwIHBsYW5lcyBjb3JyZXNwb25kIHRvIGEgbm9ybWFsaXplZCBkZXZpY2UgY29vcmRpbmF0ZSBaIHJhbmdlIG9mIFstMSwgMV0sXG4gKiB3aGljaCBtYXRjaGVzIFdlYkdML09wZW5HTCdzIGNsaXAgdm9sdW1lLlxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7bnVtYmVyfSBsZWZ0IExlZnQgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSByaWdodCBSaWdodCBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IGJvdHRvbSBCb3R0b20gYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b3AgVG9wIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gbmVhciBOZWFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gZmFyIEZhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBvcnRob05PKG91dCwgbGVmdCwgcmlnaHQsIGJvdHRvbSwgdG9wLCBuZWFyLCBmYXIpIHtcbiAgdmFyIGxyID0gMSAvIChsZWZ0IC0gcmlnaHQpO1xuICB2YXIgYnQgPSAxIC8gKGJvdHRvbSAtIHRvcCk7XG4gIHZhciBuZiA9IDEgLyAobmVhciAtIGZhcik7XG4gIG91dFswXSA9IC0yICogbHI7XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IDA7XG4gIG91dFs1XSA9IC0yICogYnQ7XG4gIG91dFs2XSA9IDA7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IDA7XG4gIG91dFs5XSA9IDA7XG4gIG91dFsxMF0gPSAyICogbmY7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gKGxlZnQgKyByaWdodCkgKiBscjtcbiAgb3V0WzEzXSA9ICh0b3AgKyBib3R0b20pICogYnQ7XG4gIG91dFsxNF0gPSAoZmFyICsgbmVhcikgKiBuZjtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgbWF0NC5vcnRob05PfVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBvcnRobyA9IG9ydGhvTk87XG4vKipcbiAqIEdlbmVyYXRlcyBhIG9ydGhvZ29uYWwgcHJvamVjdGlvbiBtYXRyaXggd2l0aCB0aGUgZ2l2ZW4gYm91bmRzLlxuICogVGhlIG5lYXIvZmFyIGNsaXAgcGxhbmVzIGNvcnJlc3BvbmQgdG8gYSBub3JtYWxpemVkIGRldmljZSBjb29yZGluYXRlIFogcmFuZ2Ugb2YgWzAsIDFdLFxuICogd2hpY2ggbWF0Y2hlcyBXZWJHUFUvVnVsa2FuL0RpcmVjdFgvTWV0YWwncyBjbGlwIHZvbHVtZS5cbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IGZydXN0dW0gbWF0cml4IHdpbGwgYmUgd3JpdHRlbiBpbnRvXG4gKiBAcGFyYW0ge251bWJlcn0gbGVmdCBMZWZ0IGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gcmlnaHQgUmlnaHQgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSBib3R0b20gQm90dG9tIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gdG9wIFRvcCBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IG5lYXIgTmVhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IGZhciBGYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gb3J0aG9aTyhvdXQsIGxlZnQsIHJpZ2h0LCBib3R0b20sIHRvcCwgbmVhciwgZmFyKSB7XG4gIHZhciBsciA9IDEgLyAobGVmdCAtIHJpZ2h0KTtcbiAgdmFyIGJ0ID0gMSAvIChib3R0b20gLSB0b3ApO1xuICB2YXIgbmYgPSAxIC8gKG5lYXIgLSBmYXIpO1xuICBvdXRbMF0gPSAtMiAqIGxyO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAwO1xuICBvdXRbNV0gPSAtMiAqIGJ0O1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAwO1xuICBvdXRbOV0gPSAwO1xuICBvdXRbMTBdID0gbmY7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gKGxlZnQgKyByaWdodCkgKiBscjtcbiAgb3V0WzEzXSA9ICh0b3AgKyBib3R0b20pICogYnQ7XG4gIG91dFsxNF0gPSBuZWFyICogbmY7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBsb29rLWF0IG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBleWUgcG9zaXRpb24sIGZvY2FsIHBvaW50LCBhbmQgdXAgYXhpcy5cbiAqIElmIHlvdSB3YW50IGEgbWF0cml4IHRoYXQgYWN0dWFsbHkgbWFrZXMgYW4gb2JqZWN0IGxvb2sgYXQgYW5vdGhlciBvYmplY3QsIHlvdSBzaG91bGQgdXNlIHRhcmdldFRvIGluc3RlYWQuXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCBmcnVzdHVtIG1hdHJpeCB3aWxsIGJlIHdyaXR0ZW4gaW50b1xuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGV5ZSBQb3NpdGlvbiBvZiB0aGUgdmlld2VyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gY2VudGVyIFBvaW50IHRoZSB2aWV3ZXIgaXMgbG9va2luZyBhdFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHVwIHZlYzMgcG9pbnRpbmcgdXBcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbG9va0F0KG91dCwgZXllLCBjZW50ZXIsIHVwKSB7XG4gIHZhciB4MCwgeDEsIHgyLCB5MCwgeTEsIHkyLCB6MCwgejEsIHoyLCBsZW47XG4gIHZhciBleWV4ID0gZXllWzBdO1xuICB2YXIgZXlleSA9IGV5ZVsxXTtcbiAgdmFyIGV5ZXogPSBleWVbMl07XG4gIHZhciB1cHggPSB1cFswXTtcbiAgdmFyIHVweSA9IHVwWzFdO1xuICB2YXIgdXB6ID0gdXBbMl07XG4gIHZhciBjZW50ZXJ4ID0gY2VudGVyWzBdO1xuICB2YXIgY2VudGVyeSA9IGNlbnRlclsxXTtcbiAgdmFyIGNlbnRlcnogPSBjZW50ZXJbMl07XG5cbiAgaWYgKE1hdGguYWJzKGV5ZXggLSBjZW50ZXJ4KSA8IGdsTWF0cml4LkVQU0lMT04gJiYgTWF0aC5hYnMoZXlleSAtIGNlbnRlcnkpIDwgZ2xNYXRyaXguRVBTSUxPTiAmJiBNYXRoLmFicyhleWV6IC0gY2VudGVyeikgPCBnbE1hdHJpeC5FUFNJTE9OKSB7XG4gICAgcmV0dXJuIGlkZW50aXR5KG91dCk7XG4gIH1cblxuICB6MCA9IGV5ZXggLSBjZW50ZXJ4O1xuICB6MSA9IGV5ZXkgLSBjZW50ZXJ5O1xuICB6MiA9IGV5ZXogLSBjZW50ZXJ6O1xuICBsZW4gPSAxIC8gTWF0aC5oeXBvdCh6MCwgejEsIHoyKTtcbiAgejAgKj0gbGVuO1xuICB6MSAqPSBsZW47XG4gIHoyICo9IGxlbjtcbiAgeDAgPSB1cHkgKiB6MiAtIHVweiAqIHoxO1xuICB4MSA9IHVweiAqIHowIC0gdXB4ICogejI7XG4gIHgyID0gdXB4ICogejEgLSB1cHkgKiB6MDtcbiAgbGVuID0gTWF0aC5oeXBvdCh4MCwgeDEsIHgyKTtcblxuICBpZiAoIWxlbikge1xuICAgIHgwID0gMDtcbiAgICB4MSA9IDA7XG4gICAgeDIgPSAwO1xuICB9IGVsc2Uge1xuICAgIGxlbiA9IDEgLyBsZW47XG4gICAgeDAgKj0gbGVuO1xuICAgIHgxICo9IGxlbjtcbiAgICB4MiAqPSBsZW47XG4gIH1cblxuICB5MCA9IHoxICogeDIgLSB6MiAqIHgxO1xuICB5MSA9IHoyICogeDAgLSB6MCAqIHgyO1xuICB5MiA9IHowICogeDEgLSB6MSAqIHgwO1xuICBsZW4gPSBNYXRoLmh5cG90KHkwLCB5MSwgeTIpO1xuXG4gIGlmICghbGVuKSB7XG4gICAgeTAgPSAwO1xuICAgIHkxID0gMDtcbiAgICB5MiA9IDA7XG4gIH0gZWxzZSB7XG4gICAgbGVuID0gMSAvIGxlbjtcbiAgICB5MCAqPSBsZW47XG4gICAgeTEgKj0gbGVuO1xuICAgIHkyICo9IGxlbjtcbiAgfVxuXG4gIG91dFswXSA9IHgwO1xuICBvdXRbMV0gPSB5MDtcbiAgb3V0WzJdID0gejA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IHgxO1xuICBvdXRbNV0gPSB5MTtcbiAgb3V0WzZdID0gejE7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IHgyO1xuICBvdXRbOV0gPSB5MjtcbiAgb3V0WzEwXSA9IHoyO1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IC0oeDAgKiBleWV4ICsgeDEgKiBleWV5ICsgeDIgKiBleWV6KTtcbiAgb3V0WzEzXSA9IC0oeTAgKiBleWV4ICsgeTEgKiBleWV5ICsgeTIgKiBleWV6KTtcbiAgb3V0WzE0XSA9IC0oejAgKiBleWV4ICsgejEgKiBleWV5ICsgejIgKiBleWV6KTtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhIG1hdHJpeCB0aGF0IG1ha2VzIHNvbWV0aGluZyBsb29rIGF0IHNvbWV0aGluZyBlbHNlLlxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBleWUgUG9zaXRpb24gb2YgdGhlIHZpZXdlclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGNlbnRlciBQb2ludCB0aGUgdmlld2VyIGlzIGxvb2tpbmcgYXRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSB1cCB2ZWMzIHBvaW50aW5nIHVwXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRhcmdldFRvKG91dCwgZXllLCB0YXJnZXQsIHVwKSB7XG4gIHZhciBleWV4ID0gZXllWzBdLFxuICAgICAgZXlleSA9IGV5ZVsxXSxcbiAgICAgIGV5ZXogPSBleWVbMl0sXG4gICAgICB1cHggPSB1cFswXSxcbiAgICAgIHVweSA9IHVwWzFdLFxuICAgICAgdXB6ID0gdXBbMl07XG4gIHZhciB6MCA9IGV5ZXggLSB0YXJnZXRbMF0sXG4gICAgICB6MSA9IGV5ZXkgLSB0YXJnZXRbMV0sXG4gICAgICB6MiA9IGV5ZXogLSB0YXJnZXRbMl07XG4gIHZhciBsZW4gPSB6MCAqIHowICsgejEgKiB6MSArIHoyICogejI7XG5cbiAgaWYgKGxlbiA+IDApIHtcbiAgICBsZW4gPSAxIC8gTWF0aC5zcXJ0KGxlbik7XG4gICAgejAgKj0gbGVuO1xuICAgIHoxICo9IGxlbjtcbiAgICB6MiAqPSBsZW47XG4gIH1cblxuICB2YXIgeDAgPSB1cHkgKiB6MiAtIHVweiAqIHoxLFxuICAgICAgeDEgPSB1cHogKiB6MCAtIHVweCAqIHoyLFxuICAgICAgeDIgPSB1cHggKiB6MSAtIHVweSAqIHowO1xuICBsZW4gPSB4MCAqIHgwICsgeDEgKiB4MSArIHgyICogeDI7XG5cbiAgaWYgKGxlbiA+IDApIHtcbiAgICBsZW4gPSAxIC8gTWF0aC5zcXJ0KGxlbik7XG4gICAgeDAgKj0gbGVuO1xuICAgIHgxICo9IGxlbjtcbiAgICB4MiAqPSBsZW47XG4gIH1cblxuICBvdXRbMF0gPSB4MDtcbiAgb3V0WzFdID0geDE7XG4gIG91dFsyXSA9IHgyO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSB6MSAqIHgyIC0gejIgKiB4MTtcbiAgb3V0WzVdID0gejIgKiB4MCAtIHowICogeDI7XG4gIG91dFs2XSA9IHowICogeDEgLSB6MSAqIHgwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSB6MDtcbiAgb3V0WzldID0gejE7XG4gIG91dFsxMF0gPSB6MjtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSBleWV4O1xuICBvdXRbMTNdID0gZXlleTtcbiAgb3V0WzE0XSA9IGV5ZXo7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgbWF0NFxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIG1hdHJpeCB0byByZXByZXNlbnQgYXMgYSBzdHJpbmdcbiAqIEByZXR1cm5zIHtTdHJpbmd9IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgbWF0cml4XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cihhKSB7XG4gIHJldHVybiBcIm1hdDQoXCIgKyBhWzBdICsgXCIsIFwiICsgYVsxXSArIFwiLCBcIiArIGFbMl0gKyBcIiwgXCIgKyBhWzNdICsgXCIsIFwiICsgYVs0XSArIFwiLCBcIiArIGFbNV0gKyBcIiwgXCIgKyBhWzZdICsgXCIsIFwiICsgYVs3XSArIFwiLCBcIiArIGFbOF0gKyBcIiwgXCIgKyBhWzldICsgXCIsIFwiICsgYVsxMF0gKyBcIiwgXCIgKyBhWzExXSArIFwiLCBcIiArIGFbMTJdICsgXCIsIFwiICsgYVsxM10gKyBcIiwgXCIgKyBhWzE0XSArIFwiLCBcIiArIGFbMTVdICsgXCIpXCI7XG59XG4vKipcbiAqIFJldHVybnMgRnJvYmVuaXVzIG5vcm0gb2YgYSBtYXQ0XG4gKlxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIG1hdHJpeCB0byBjYWxjdWxhdGUgRnJvYmVuaXVzIG5vcm0gb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IEZyb2Jlbml1cyBub3JtXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb2IoYSkge1xuICByZXR1cm4gTWF0aC5oeXBvdChhWzBdLCBhWzFdLCBhWzJdLCBhWzNdLCBhWzRdLCBhWzVdLCBhWzZdLCBhWzddLCBhWzhdLCBhWzldLCBhWzEwXSwgYVsxMV0sIGFbMTJdLCBhWzEzXSwgYVsxNF0sIGFbMTVdKTtcbn1cbi8qKlxuICogQWRkcyB0d28gbWF0NCdzXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICsgYlswXTtcbiAgb3V0WzFdID0gYVsxXSArIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gKyBiWzJdO1xuICBvdXRbM10gPSBhWzNdICsgYlszXTtcbiAgb3V0WzRdID0gYVs0XSArIGJbNF07XG4gIG91dFs1XSA9IGFbNV0gKyBiWzVdO1xuICBvdXRbNl0gPSBhWzZdICsgYls2XTtcbiAgb3V0WzddID0gYVs3XSArIGJbN107XG4gIG91dFs4XSA9IGFbOF0gKyBiWzhdO1xuICBvdXRbOV0gPSBhWzldICsgYls5XTtcbiAgb3V0WzEwXSA9IGFbMTBdICsgYlsxMF07XG4gIG91dFsxMV0gPSBhWzExXSArIGJbMTFdO1xuICBvdXRbMTJdID0gYVsxMl0gKyBiWzEyXTtcbiAgb3V0WzEzXSA9IGFbMTNdICsgYlsxM107XG4gIG91dFsxNF0gPSBhWzE0XSArIGJbMTRdO1xuICBvdXRbMTVdID0gYVsxNV0gKyBiWzE1XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU3VidHJhY3RzIG1hdHJpeCBiIGZyb20gbWF0cml4IGFcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdWJ0cmFjdChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAtIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gLSBiWzFdO1xuICBvdXRbMl0gPSBhWzJdIC0gYlsyXTtcbiAgb3V0WzNdID0gYVszXSAtIGJbM107XG4gIG91dFs0XSA9IGFbNF0gLSBiWzRdO1xuICBvdXRbNV0gPSBhWzVdIC0gYls1XTtcbiAgb3V0WzZdID0gYVs2XSAtIGJbNl07XG4gIG91dFs3XSA9IGFbN10gLSBiWzddO1xuICBvdXRbOF0gPSBhWzhdIC0gYls4XTtcbiAgb3V0WzldID0gYVs5XSAtIGJbOV07XG4gIG91dFsxMF0gPSBhWzEwXSAtIGJbMTBdO1xuICBvdXRbMTFdID0gYVsxMV0gLSBiWzExXTtcbiAgb3V0WzEyXSA9IGFbMTJdIC0gYlsxMl07XG4gIG91dFsxM10gPSBhWzEzXSAtIGJbMTNdO1xuICBvdXRbMTRdID0gYVsxNF0gLSBiWzE0XTtcbiAgb3V0WzE1XSA9IGFbMTVdIC0gYlsxNV07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE11bHRpcGx5IGVhY2ggZWxlbWVudCBvZiB0aGUgbWF0cml4IGJ5IGEgc2NhbGFyLlxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgbWF0cml4IHRvIHNjYWxlXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIG1hdHJpeCdzIGVsZW1lbnRzIGJ5XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5U2NhbGFyKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICogYjtcbiAgb3V0WzFdID0gYVsxXSAqIGI7XG4gIG91dFsyXSA9IGFbMl0gKiBiO1xuICBvdXRbM10gPSBhWzNdICogYjtcbiAgb3V0WzRdID0gYVs0XSAqIGI7XG4gIG91dFs1XSA9IGFbNV0gKiBiO1xuICBvdXRbNl0gPSBhWzZdICogYjtcbiAgb3V0WzddID0gYVs3XSAqIGI7XG4gIG91dFs4XSA9IGFbOF0gKiBiO1xuICBvdXRbOV0gPSBhWzldICogYjtcbiAgb3V0WzEwXSA9IGFbMTBdICogYjtcbiAgb3V0WzExXSA9IGFbMTFdICogYjtcbiAgb3V0WzEyXSA9IGFbMTJdICogYjtcbiAgb3V0WzEzXSA9IGFbMTNdICogYjtcbiAgb3V0WzE0XSA9IGFbMTRdICogYjtcbiAgb3V0WzE1XSA9IGFbMTVdICogYjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQWRkcyB0d28gbWF0NCdzIGFmdGVyIG11bHRpcGx5aW5nIGVhY2ggZWxlbWVudCBvZiB0aGUgc2Vjb25kIG9wZXJhbmQgYnkgYSBzY2FsYXIgdmFsdWUuXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSBzY2FsZSB0aGUgYW1vdW50IHRvIHNjYWxlIGIncyBlbGVtZW50cyBieSBiZWZvcmUgYWRkaW5nXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5U2NhbGFyQW5kQWRkKG91dCwgYSwgYiwgc2NhbGUpIHtcbiAgb3V0WzBdID0gYVswXSArIGJbMF0gKiBzY2FsZTtcbiAgb3V0WzFdID0gYVsxXSArIGJbMV0gKiBzY2FsZTtcbiAgb3V0WzJdID0gYVsyXSArIGJbMl0gKiBzY2FsZTtcbiAgb3V0WzNdID0gYVszXSArIGJbM10gKiBzY2FsZTtcbiAgb3V0WzRdID0gYVs0XSArIGJbNF0gKiBzY2FsZTtcbiAgb3V0WzVdID0gYVs1XSArIGJbNV0gKiBzY2FsZTtcbiAgb3V0WzZdID0gYVs2XSArIGJbNl0gKiBzY2FsZTtcbiAgb3V0WzddID0gYVs3XSArIGJbN10gKiBzY2FsZTtcbiAgb3V0WzhdID0gYVs4XSArIGJbOF0gKiBzY2FsZTtcbiAgb3V0WzldID0gYVs5XSArIGJbOV0gKiBzY2FsZTtcbiAgb3V0WzEwXSA9IGFbMTBdICsgYlsxMF0gKiBzY2FsZTtcbiAgb3V0WzExXSA9IGFbMTFdICsgYlsxMV0gKiBzY2FsZTtcbiAgb3V0WzEyXSA9IGFbMTJdICsgYlsxMl0gKiBzY2FsZTtcbiAgb3V0WzEzXSA9IGFbMTNdICsgYlsxM10gKiBzY2FsZTtcbiAgb3V0WzE0XSA9IGFbMTRdICsgYlsxNF0gKiBzY2FsZTtcbiAgb3V0WzE1XSA9IGFbMTVdICsgYlsxNV0gKiBzY2FsZTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgbWF0cmljZXMgaGF2ZSBleGFjdGx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uICh3aGVuIGNvbXBhcmVkIHdpdGggPT09KVxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIFRoZSBmaXJzdCBtYXRyaXguXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYiBUaGUgc2Vjb25kIG1hdHJpeC5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSBtYXRyaWNlcyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXhhY3RFcXVhbHMoYSwgYikge1xuICByZXR1cm4gYVswXSA9PT0gYlswXSAmJiBhWzFdID09PSBiWzFdICYmIGFbMl0gPT09IGJbMl0gJiYgYVszXSA9PT0gYlszXSAmJiBhWzRdID09PSBiWzRdICYmIGFbNV0gPT09IGJbNV0gJiYgYVs2XSA9PT0gYls2XSAmJiBhWzddID09PSBiWzddICYmIGFbOF0gPT09IGJbOF0gJiYgYVs5XSA9PT0gYls5XSAmJiBhWzEwXSA9PT0gYlsxMF0gJiYgYVsxMV0gPT09IGJbMTFdICYmIGFbMTJdID09PSBiWzEyXSAmJiBhWzEzXSA9PT0gYlsxM10gJiYgYVsxNF0gPT09IGJbMTRdICYmIGFbMTVdID09PSBiWzE1XTtcbn1cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgbWF0cmljZXMgaGF2ZSBhcHByb3hpbWF0ZWx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIFRoZSBmaXJzdCBtYXRyaXguXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYiBUaGUgc2Vjb25kIG1hdHJpeC5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSBtYXRyaWNlcyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGEsIGIpIHtcbiAgdmFyIGEwID0gYVswXSxcbiAgICAgIGExID0gYVsxXSxcbiAgICAgIGEyID0gYVsyXSxcbiAgICAgIGEzID0gYVszXTtcbiAgdmFyIGE0ID0gYVs0XSxcbiAgICAgIGE1ID0gYVs1XSxcbiAgICAgIGE2ID0gYVs2XSxcbiAgICAgIGE3ID0gYVs3XTtcbiAgdmFyIGE4ID0gYVs4XSxcbiAgICAgIGE5ID0gYVs5XSxcbiAgICAgIGExMCA9IGFbMTBdLFxuICAgICAgYTExID0gYVsxMV07XG4gIHZhciBhMTIgPSBhWzEyXSxcbiAgICAgIGExMyA9IGFbMTNdLFxuICAgICAgYTE0ID0gYVsxNF0sXG4gICAgICBhMTUgPSBhWzE1XTtcbiAgdmFyIGIwID0gYlswXSxcbiAgICAgIGIxID0gYlsxXSxcbiAgICAgIGIyID0gYlsyXSxcbiAgICAgIGIzID0gYlszXTtcbiAgdmFyIGI0ID0gYls0XSxcbiAgICAgIGI1ID0gYls1XSxcbiAgICAgIGI2ID0gYls2XSxcbiAgICAgIGI3ID0gYls3XTtcbiAgdmFyIGI4ID0gYls4XSxcbiAgICAgIGI5ID0gYls5XSxcbiAgICAgIGIxMCA9IGJbMTBdLFxuICAgICAgYjExID0gYlsxMV07XG4gIHZhciBiMTIgPSBiWzEyXSxcbiAgICAgIGIxMyA9IGJbMTNdLFxuICAgICAgYjE0ID0gYlsxNF0sXG4gICAgICBiMTUgPSBiWzE1XTtcbiAgcmV0dXJuIE1hdGguYWJzKGEwIC0gYjApIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEwKSwgTWF0aC5hYnMoYjApKSAmJiBNYXRoLmFicyhhMSAtIGIxKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMSksIE1hdGguYWJzKGIxKSkgJiYgTWF0aC5hYnMoYTIgLSBiMikgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTIpLCBNYXRoLmFicyhiMikpICYmIE1hdGguYWJzKGEzIC0gYjMpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEzKSwgTWF0aC5hYnMoYjMpKSAmJiBNYXRoLmFicyhhNCAtIGI0KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhNCksIE1hdGguYWJzKGI0KSkgJiYgTWF0aC5hYnMoYTUgLSBiNSkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTUpLCBNYXRoLmFicyhiNSkpICYmIE1hdGguYWJzKGE2IC0gYjYpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE2KSwgTWF0aC5hYnMoYjYpKSAmJiBNYXRoLmFicyhhNyAtIGI3KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhNyksIE1hdGguYWJzKGI3KSkgJiYgTWF0aC5hYnMoYTggLSBiOCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTgpLCBNYXRoLmFicyhiOCkpICYmIE1hdGguYWJzKGE5IC0gYjkpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE5KSwgTWF0aC5hYnMoYjkpKSAmJiBNYXRoLmFicyhhMTAgLSBiMTApIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExMCksIE1hdGguYWJzKGIxMCkpICYmIE1hdGguYWJzKGExMSAtIGIxMSkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTExKSwgTWF0aC5hYnMoYjExKSkgJiYgTWF0aC5hYnMoYTEyIC0gYjEyKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMTIpLCBNYXRoLmFicyhiMTIpKSAmJiBNYXRoLmFicyhhMTMgLSBiMTMpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExMyksIE1hdGguYWJzKGIxMykpICYmIE1hdGguYWJzKGExNCAtIGIxNCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTE0KSwgTWF0aC5hYnMoYjE0KSkgJiYgTWF0aC5hYnMoYTE1IC0gYjE1KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMTUpLCBNYXRoLmFicyhiMTUpKTtcbn1cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBtYXQ0Lm11bHRpcGx5fVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBtdWwgPSBtdWx0aXBseTtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBtYXQ0LnN1YnRyYWN0fVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzdWIgPSBzdWJ0cmFjdDsiLCAiaW1wb3J0ICogYXMgZ2xNYXRyaXggZnJvbSBcIi4vY29tbW9uLmpzXCI7XG5pbXBvcnQgKiBhcyBtYXQzIGZyb20gXCIuL21hdDMuanNcIjtcbmltcG9ydCAqIGFzIHZlYzMgZnJvbSBcIi4vdmVjMy5qc1wiO1xuaW1wb3J0ICogYXMgdmVjNCBmcm9tIFwiLi92ZWM0LmpzXCI7XG4vKipcbiAqIFF1YXRlcm5pb25cbiAqIEBtb2R1bGUgcXVhdFxuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBpZGVudGl0eSBxdWF0XG4gKlxuICogQHJldHVybnMge3F1YXR9IGEgbmV3IHF1YXRlcm5pb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKCkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoNCk7XG5cbiAgaWYgKGdsTWF0cml4LkFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzBdID0gMDtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gIH1cblxuICBvdXRbM10gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXQgYSBxdWF0IHRvIHRoZSBpZGVudGl0eSBxdWF0ZXJuaW9uXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGlkZW50aXR5KG91dCkge1xuICBvdXRbMF0gPSAwO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXRzIGEgcXVhdCBmcm9tIHRoZSBnaXZlbiBhbmdsZSBhbmQgcm90YXRpb24gYXhpcyxcbiAqIHRoZW4gcmV0dXJucyBpdC5cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBheGlzIHRoZSBheGlzIGFyb3VuZCB3aGljaCB0byByb3RhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIGluIHJhZGlhbnNcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEF4aXNBbmdsZShvdXQsIGF4aXMsIHJhZCkge1xuICByYWQgPSByYWQgKiAwLjU7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKTtcbiAgb3V0WzBdID0gcyAqIGF4aXNbMF07XG4gIG91dFsxXSA9IHMgKiBheGlzWzFdO1xuICBvdXRbMl0gPSBzICogYXhpc1syXTtcbiAgb3V0WzNdID0gTWF0aC5jb3MocmFkKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogR2V0cyB0aGUgcm90YXRpb24gYXhpcyBhbmQgYW5nbGUgZm9yIGEgZ2l2ZW5cbiAqICBxdWF0ZXJuaW9uLiBJZiBhIHF1YXRlcm5pb24gaXMgY3JlYXRlZCB3aXRoXG4gKiAgc2V0QXhpc0FuZ2xlLCB0aGlzIG1ldGhvZCB3aWxsIHJldHVybiB0aGUgc2FtZVxuICogIHZhbHVlcyBhcyBwcm92aWRpZWQgaW4gdGhlIG9yaWdpbmFsIHBhcmFtZXRlciBsaXN0XG4gKiAgT1IgZnVuY3Rpb25hbGx5IGVxdWl2YWxlbnQgdmFsdWVzLlxuICogRXhhbXBsZTogVGhlIHF1YXRlcm5pb24gZm9ybWVkIGJ5IGF4aXMgWzAsIDAsIDFdIGFuZFxuICogIGFuZ2xlIC05MCBpcyB0aGUgc2FtZSBhcyB0aGUgcXVhdGVybmlvbiBmb3JtZWQgYnlcbiAqICBbMCwgMCwgMV0gYW5kIDI3MC4gVGhpcyBtZXRob2QgZmF2b3JzIHRoZSBsYXR0ZXIuXG4gKiBAcGFyYW0gIHt2ZWMzfSBvdXRfYXhpcyAgVmVjdG9yIHJlY2VpdmluZyB0aGUgYXhpcyBvZiByb3RhdGlvblxuICogQHBhcmFtICB7UmVhZG9ubHlRdWF0fSBxICAgICBRdWF0ZXJuaW9uIHRvIGJlIGRlY29tcG9zZWRcbiAqIEByZXR1cm4ge051bWJlcn0gICAgIEFuZ2xlLCBpbiByYWRpYW5zLCBvZiB0aGUgcm90YXRpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXhpc0FuZ2xlKG91dF9heGlzLCBxKSB7XG4gIHZhciByYWQgPSBNYXRoLmFjb3MocVszXSkgKiAyLjA7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkIC8gMi4wKTtcblxuICBpZiAocyA+IGdsTWF0cml4LkVQU0lMT04pIHtcbiAgICBvdXRfYXhpc1swXSA9IHFbMF0gLyBzO1xuICAgIG91dF9heGlzWzFdID0gcVsxXSAvIHM7XG4gICAgb3V0X2F4aXNbMl0gPSBxWzJdIC8gcztcbiAgfSBlbHNlIHtcbiAgICAvLyBJZiBzIGlzIHplcm8sIHJldHVybiBhbnkgYXhpcyAobm8gcm90YXRpb24gLSBheGlzIGRvZXMgbm90IG1hdHRlcilcbiAgICBvdXRfYXhpc1swXSA9IDE7XG4gICAgb3V0X2F4aXNbMV0gPSAwO1xuICAgIG91dF9heGlzWzJdID0gMDtcbiAgfVxuXG4gIHJldHVybiByYWQ7XG59XG4vKipcbiAqIEdldHMgdGhlIGFuZ3VsYXIgZGlzdGFuY2UgYmV0d2VlbiB0d28gdW5pdCBxdWF0ZXJuaW9uc1xuICpcbiAqIEBwYXJhbSAge1JlYWRvbmx5UXVhdH0gYSAgICAgT3JpZ2luIHVuaXQgcXVhdGVybmlvblxuICogQHBhcmFtICB7UmVhZG9ubHlRdWF0fSBiICAgICBEZXN0aW5hdGlvbiB1bml0IHF1YXRlcm5pb25cbiAqIEByZXR1cm4ge051bWJlcn0gICAgIEFuZ2xlLCBpbiByYWRpYW5zLCBiZXR3ZWVuIHRoZSB0d28gcXVhdGVybmlvbnNcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QW5nbGUoYSwgYikge1xuICB2YXIgZG90cHJvZHVjdCA9IGRvdChhLCBiKTtcbiAgcmV0dXJuIE1hdGguYWNvcygyICogZG90cHJvZHVjdCAqIGRvdHByb2R1Y3QgLSAxKTtcbn1cbi8qKlxuICogTXVsdGlwbGllcyB0d28gcXVhdCdzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5KG91dCwgYSwgYikge1xuICB2YXIgYXggPSBhWzBdLFxuICAgICAgYXkgPSBhWzFdLFxuICAgICAgYXogPSBhWzJdLFxuICAgICAgYXcgPSBhWzNdO1xuICB2YXIgYnggPSBiWzBdLFxuICAgICAgYnkgPSBiWzFdLFxuICAgICAgYnogPSBiWzJdLFxuICAgICAgYncgPSBiWzNdO1xuICBvdXRbMF0gPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5O1xuICBvdXRbMV0gPSBheSAqIGJ3ICsgYXcgKiBieSArIGF6ICogYnggLSBheCAqIGJ6O1xuICBvdXRbMl0gPSBheiAqIGJ3ICsgYXcgKiBieiArIGF4ICogYnkgLSBheSAqIGJ4O1xuICBvdXRbM10gPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGVzIGEgcXVhdGVybmlvbiBieSB0aGUgZ2l2ZW4gYW5nbGUgYWJvdXQgdGhlIFggYXhpc1xuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHF1YXQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXQgdG8gcm90YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkIGFuZ2xlIChpbiByYWRpYW5zKSB0byByb3RhdGVcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlWChvdXQsIGEsIHJhZCkge1xuICByYWQgKj0gMC41O1xuICB2YXIgYXggPSBhWzBdLFxuICAgICAgYXkgPSBhWzFdLFxuICAgICAgYXogPSBhWzJdLFxuICAgICAgYXcgPSBhWzNdO1xuICB2YXIgYnggPSBNYXRoLnNpbihyYWQpLFxuICAgICAgYncgPSBNYXRoLmNvcyhyYWQpO1xuICBvdXRbMF0gPSBheCAqIGJ3ICsgYXcgKiBieDtcbiAgb3V0WzFdID0gYXkgKiBidyArIGF6ICogYng7XG4gIG91dFsyXSA9IGF6ICogYncgLSBheSAqIGJ4O1xuICBvdXRbM10gPSBhdyAqIGJ3IC0gYXggKiBieDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlcyBhIHF1YXRlcm5pb24gYnkgdGhlIGdpdmVuIGFuZ2xlIGFib3V0IHRoZSBZIGF4aXNcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCBxdWF0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBxdWF0IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IHJhZCBhbmdsZSAoaW4gcmFkaWFucykgdG8gcm90YXRlXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVkob3V0LCBhLCByYWQpIHtcbiAgcmFkICo9IDAuNTtcbiAgdmFyIGF4ID0gYVswXSxcbiAgICAgIGF5ID0gYVsxXSxcbiAgICAgIGF6ID0gYVsyXSxcbiAgICAgIGF3ID0gYVszXTtcbiAgdmFyIGJ5ID0gTWF0aC5zaW4ocmFkKSxcbiAgICAgIGJ3ID0gTWF0aC5jb3MocmFkKTtcbiAgb3V0WzBdID0gYXggKiBidyAtIGF6ICogYnk7XG4gIG91dFsxXSA9IGF5ICogYncgKyBhdyAqIGJ5O1xuICBvdXRbMl0gPSBheiAqIGJ3ICsgYXggKiBieTtcbiAgb3V0WzNdID0gYXcgKiBidyAtIGF5ICogYnk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZXMgYSBxdWF0ZXJuaW9uIGJ5IHRoZSBnaXZlbiBhbmdsZSBhYm91dCB0aGUgWiBheGlzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgcXVhdCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdCB0byByb3RhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWQgYW5nbGUgKGluIHJhZGlhbnMpIHRvIHJvdGF0ZVxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVaKG91dCwgYSwgcmFkKSB7XG4gIHJhZCAqPSAwLjU7XG4gIHZhciBheCA9IGFbMF0sXG4gICAgICBheSA9IGFbMV0sXG4gICAgICBheiA9IGFbMl0sXG4gICAgICBhdyA9IGFbM107XG4gIHZhciBieiA9IE1hdGguc2luKHJhZCksXG4gICAgICBidyA9IE1hdGguY29zKHJhZCk7XG4gIG91dFswXSA9IGF4ICogYncgKyBheSAqIGJ6O1xuICBvdXRbMV0gPSBheSAqIGJ3IC0gYXggKiBiejtcbiAgb3V0WzJdID0gYXogKiBidyArIGF3ICogYno7XG4gIG91dFszXSA9IGF3ICogYncgLSBheiAqIGJ6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBXIGNvbXBvbmVudCBvZiBhIHF1YXQgZnJvbSB0aGUgWCwgWSwgYW5kIFogY29tcG9uZW50cy5cbiAqIEFzc3VtZXMgdGhhdCBxdWF0ZXJuaW9uIGlzIDEgdW5pdCBpbiBsZW5ndGguXG4gKiBBbnkgZXhpc3RpbmcgVyBjb21wb25lbnQgd2lsbCBiZSBpZ25vcmVkLlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdCB0byBjYWxjdWxhdGUgVyBjb21wb25lbnQgb2ZcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlVyhvdXQsIGEpIHtcbiAgdmFyIHggPSBhWzBdLFxuICAgICAgeSA9IGFbMV0sXG4gICAgICB6ID0gYVsyXTtcbiAgb3V0WzBdID0geDtcbiAgb3V0WzFdID0geTtcbiAgb3V0WzJdID0gejtcbiAgb3V0WzNdID0gTWF0aC5zcXJ0KE1hdGguYWJzKDEuMCAtIHggKiB4IC0geSAqIHkgLSB6ICogeikpO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGUgdGhlIGV4cG9uZW50aWFsIG9mIGEgdW5pdCBxdWF0ZXJuaW9uLlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdCB0byBjYWxjdWxhdGUgdGhlIGV4cG9uZW50aWFsIG9mXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGV4cChvdXQsIGEpIHtcbiAgdmFyIHggPSBhWzBdLFxuICAgICAgeSA9IGFbMV0sXG4gICAgICB6ID0gYVsyXSxcbiAgICAgIHcgPSBhWzNdO1xuICB2YXIgciA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5ICsgeiAqIHopO1xuICB2YXIgZXQgPSBNYXRoLmV4cCh3KTtcbiAgdmFyIHMgPSByID4gMCA/IGV0ICogTWF0aC5zaW4ocikgLyByIDogMDtcbiAgb3V0WzBdID0geCAqIHM7XG4gIG91dFsxXSA9IHkgKiBzO1xuICBvdXRbMl0gPSB6ICogcztcbiAgb3V0WzNdID0gZXQgKiBNYXRoLmNvcyhyKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlIHRoZSBuYXR1cmFsIGxvZ2FyaXRobSBvZiBhIHVuaXQgcXVhdGVybmlvbi5cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXQgdG8gY2FsY3VsYXRlIHRoZSBleHBvbmVudGlhbCBvZlxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsbihvdXQsIGEpIHtcbiAgdmFyIHggPSBhWzBdLFxuICAgICAgeSA9IGFbMV0sXG4gICAgICB6ID0gYVsyXSxcbiAgICAgIHcgPSBhWzNdO1xuICB2YXIgciA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5ICsgeiAqIHopO1xuICB2YXIgdCA9IHIgPiAwID8gTWF0aC5hdGFuMihyLCB3KSAvIHIgOiAwO1xuICBvdXRbMF0gPSB4ICogdDtcbiAgb3V0WzFdID0geSAqIHQ7XG4gIG91dFsyXSA9IHogKiB0O1xuICBvdXRbM10gPSAwLjUgKiBNYXRoLmxvZyh4ICogeCArIHkgKiB5ICsgeiAqIHogKyB3ICogdyk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZSB0aGUgc2NhbGFyIHBvd2VyIG9mIGEgdW5pdCBxdWF0ZXJuaW9uLlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdCB0byBjYWxjdWxhdGUgdGhlIGV4cG9uZW50aWFsIG9mXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIHF1YXRlcm5pb24gYnlcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcG93KG91dCwgYSwgYikge1xuICBsbihvdXQsIGEpO1xuICBzY2FsZShvdXQsIG91dCwgYik7XG4gIGV4cChvdXQsIG91dCk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFBlcmZvcm1zIGEgc3BoZXJpY2FsIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHF1YXRcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50LCBpbiB0aGUgcmFuZ2UgWzAtMV0sIGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2xlcnAob3V0LCBhLCBiLCB0KSB7XG4gIC8vIGJlbmNobWFya3M6XG4gIC8vICAgIGh0dHA6Ly9qc3BlcmYuY29tL3F1YXRlcm5pb24tc2xlcnAtaW1wbGVtZW50YXRpb25zXG4gIHZhciBheCA9IGFbMF0sXG4gICAgICBheSA9IGFbMV0sXG4gICAgICBheiA9IGFbMl0sXG4gICAgICBhdyA9IGFbM107XG4gIHZhciBieCA9IGJbMF0sXG4gICAgICBieSA9IGJbMV0sXG4gICAgICBieiA9IGJbMl0sXG4gICAgICBidyA9IGJbM107XG4gIHZhciBvbWVnYSwgY29zb20sIHNpbm9tLCBzY2FsZTAsIHNjYWxlMTsgLy8gY2FsYyBjb3NpbmVcblxuICBjb3NvbSA9IGF4ICogYnggKyBheSAqIGJ5ICsgYXogKiBieiArIGF3ICogYnc7IC8vIGFkanVzdCBzaWducyAoaWYgbmVjZXNzYXJ5KVxuXG4gIGlmIChjb3NvbSA8IDAuMCkge1xuICAgIGNvc29tID0gLWNvc29tO1xuICAgIGJ4ID0gLWJ4O1xuICAgIGJ5ID0gLWJ5O1xuICAgIGJ6ID0gLWJ6O1xuICAgIGJ3ID0gLWJ3O1xuICB9IC8vIGNhbGN1bGF0ZSBjb2VmZmljaWVudHNcblxuXG4gIGlmICgxLjAgLSBjb3NvbSA+IGdsTWF0cml4LkVQU0lMT04pIHtcbiAgICAvLyBzdGFuZGFyZCBjYXNlIChzbGVycClcbiAgICBvbWVnYSA9IE1hdGguYWNvcyhjb3NvbSk7XG4gICAgc2lub20gPSBNYXRoLnNpbihvbWVnYSk7XG4gICAgc2NhbGUwID0gTWF0aC5zaW4oKDEuMCAtIHQpICogb21lZ2EpIC8gc2lub207XG4gICAgc2NhbGUxID0gTWF0aC5zaW4odCAqIG9tZWdhKSAvIHNpbm9tO1xuICB9IGVsc2Uge1xuICAgIC8vIFwiZnJvbVwiIGFuZCBcInRvXCIgcXVhdGVybmlvbnMgYXJlIHZlcnkgY2xvc2VcbiAgICAvLyAgLi4uIHNvIHdlIGNhbiBkbyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uXG4gICAgc2NhbGUwID0gMS4wIC0gdDtcbiAgICBzY2FsZTEgPSB0O1xuICB9IC8vIGNhbGN1bGF0ZSBmaW5hbCB2YWx1ZXNcblxuXG4gIG91dFswXSA9IHNjYWxlMCAqIGF4ICsgc2NhbGUxICogYng7XG4gIG91dFsxXSA9IHNjYWxlMCAqIGF5ICsgc2NhbGUxICogYnk7XG4gIG91dFsyXSA9IHNjYWxlMCAqIGF6ICsgc2NhbGUxICogYno7XG4gIG91dFszXSA9IHNjYWxlMCAqIGF3ICsgc2NhbGUxICogYnc7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhIHJhbmRvbSB1bml0IHF1YXRlcm5pb25cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tKG91dCkge1xuICAvLyBJbXBsZW1lbnRhdGlvbiBvZiBodHRwOi8vcGxhbm5pbmcuY3MudWl1Yy5lZHUvbm9kZTE5OC5odG1sXG4gIC8vIFRPRE86IENhbGxpbmcgcmFuZG9tIDMgdGltZXMgaXMgcHJvYmFibHkgbm90IHRoZSBmYXN0ZXN0IHNvbHV0aW9uXG4gIHZhciB1MSA9IGdsTWF0cml4LlJBTkRPTSgpO1xuICB2YXIgdTIgPSBnbE1hdHJpeC5SQU5ET00oKTtcbiAgdmFyIHUzID0gZ2xNYXRyaXguUkFORE9NKCk7XG4gIHZhciBzcXJ0MU1pbnVzVTEgPSBNYXRoLnNxcnQoMSAtIHUxKTtcbiAgdmFyIHNxcnRVMSA9IE1hdGguc3FydCh1MSk7XG4gIG91dFswXSA9IHNxcnQxTWludXNVMSAqIE1hdGguc2luKDIuMCAqIE1hdGguUEkgKiB1Mik7XG4gIG91dFsxXSA9IHNxcnQxTWludXNVMSAqIE1hdGguY29zKDIuMCAqIE1hdGguUEkgKiB1Mik7XG4gIG91dFsyXSA9IHNxcnRVMSAqIE1hdGguc2luKDIuMCAqIE1hdGguUEkgKiB1Myk7XG4gIG91dFszXSA9IHNxcnRVMSAqIE1hdGguY29zKDIuMCAqIE1hdGguUEkgKiB1Myk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGludmVyc2Ugb2YgYSBxdWF0XG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBxdWF0IHRvIGNhbGN1bGF0ZSBpbnZlcnNlIG9mXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGludmVydChvdXQsIGEpIHtcbiAgdmFyIGEwID0gYVswXSxcbiAgICAgIGExID0gYVsxXSxcbiAgICAgIGEyID0gYVsyXSxcbiAgICAgIGEzID0gYVszXTtcbiAgdmFyIGRvdCA9IGEwICogYTAgKyBhMSAqIGExICsgYTIgKiBhMiArIGEzICogYTM7XG4gIHZhciBpbnZEb3QgPSBkb3QgPyAxLjAgLyBkb3QgOiAwOyAvLyBUT0RPOiBXb3VsZCBiZSBmYXN0ZXIgdG8gcmV0dXJuIFswLDAsMCwwXSBpbW1lZGlhdGVseSBpZiBkb3QgPT0gMFxuXG4gIG91dFswXSA9IC1hMCAqIGludkRvdDtcbiAgb3V0WzFdID0gLWExICogaW52RG90O1xuICBvdXRbMl0gPSAtYTIgKiBpbnZEb3Q7XG4gIG91dFszXSA9IGEzICogaW52RG90O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBjb25qdWdhdGUgb2YgYSBxdWF0XG4gKiBJZiB0aGUgcXVhdGVybmlvbiBpcyBub3JtYWxpemVkLCB0aGlzIGZ1bmN0aW9uIGlzIGZhc3RlciB0aGFuIHF1YXQuaW52ZXJzZSBhbmQgcHJvZHVjZXMgdGhlIHNhbWUgcmVzdWx0LlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdCB0byBjYWxjdWxhdGUgY29uanVnYXRlIG9mXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbmp1Z2F0ZShvdXQsIGEpIHtcbiAgb3V0WzBdID0gLWFbMF07XG4gIG91dFsxXSA9IC1hWzFdO1xuICBvdXRbMl0gPSAtYVsyXTtcbiAgb3V0WzNdID0gYVszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIHF1YXRlcm5pb24gZnJvbSB0aGUgZ2l2ZW4gM3gzIHJvdGF0aW9uIG1hdHJpeC5cbiAqXG4gKiBOT1RFOiBUaGUgcmVzdWx0YW50IHF1YXRlcm5pb24gaXMgbm90IG5vcm1hbGl6ZWQsIHNvIHlvdSBzaG91bGQgYmUgc3VyZVxuICogdG8gcmVub3JtYWxpemUgdGhlIHF1YXRlcm5pb24geW91cnNlbGYgd2hlcmUgbmVjZXNzYXJ5LlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IG0gcm90YXRpb24gbWF0cml4XG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbU1hdDMob3V0LCBtKSB7XG4gIC8vIEFsZ29yaXRobSBpbiBLZW4gU2hvZW1ha2UncyBhcnRpY2xlIGluIDE5ODcgU0lHR1JBUEggY291cnNlIG5vdGVzXG4gIC8vIGFydGljbGUgXCJRdWF0ZXJuaW9uIENhbGN1bHVzIGFuZCBGYXN0IEFuaW1hdGlvblwiLlxuICB2YXIgZlRyYWNlID0gbVswXSArIG1bNF0gKyBtWzhdO1xuICB2YXIgZlJvb3Q7XG5cbiAgaWYgKGZUcmFjZSA+IDAuMCkge1xuICAgIC8vIHx3fCA+IDEvMiwgbWF5IGFzIHdlbGwgY2hvb3NlIHcgPiAxLzJcbiAgICBmUm9vdCA9IE1hdGguc3FydChmVHJhY2UgKyAxLjApOyAvLyAyd1xuXG4gICAgb3V0WzNdID0gMC41ICogZlJvb3Q7XG4gICAgZlJvb3QgPSAwLjUgLyBmUm9vdDsgLy8gMS8oNHcpXG5cbiAgICBvdXRbMF0gPSAobVs1XSAtIG1bN10pICogZlJvb3Q7XG4gICAgb3V0WzFdID0gKG1bNl0gLSBtWzJdKSAqIGZSb290O1xuICAgIG91dFsyXSA9IChtWzFdIC0gbVszXSkgKiBmUm9vdDtcbiAgfSBlbHNlIHtcbiAgICAvLyB8d3wgPD0gMS8yXG4gICAgdmFyIGkgPSAwO1xuICAgIGlmIChtWzRdID4gbVswXSkgaSA9IDE7XG4gICAgaWYgKG1bOF0gPiBtW2kgKiAzICsgaV0pIGkgPSAyO1xuICAgIHZhciBqID0gKGkgKyAxKSAlIDM7XG4gICAgdmFyIGsgPSAoaSArIDIpICUgMztcbiAgICBmUm9vdCA9IE1hdGguc3FydChtW2kgKiAzICsgaV0gLSBtW2ogKiAzICsgal0gLSBtW2sgKiAzICsga10gKyAxLjApO1xuICAgIG91dFtpXSA9IDAuNSAqIGZSb290O1xuICAgIGZSb290ID0gMC41IC8gZlJvb3Q7XG4gICAgb3V0WzNdID0gKG1baiAqIDMgKyBrXSAtIG1bayAqIDMgKyBqXSkgKiBmUm9vdDtcbiAgICBvdXRbal0gPSAobVtqICogMyArIGldICsgbVtpICogMyArIGpdKSAqIGZSb290O1xuICAgIG91dFtrXSA9IChtW2sgKiAzICsgaV0gKyBtW2kgKiAzICsga10pICogZlJvb3Q7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgcXVhdGVybmlvbiBmcm9tIHRoZSBnaXZlbiBldWxlciBhbmdsZSB4LCB5LCB6LlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHt4fSBBbmdsZSB0byByb3RhdGUgYXJvdW5kIFggYXhpcyBpbiBkZWdyZWVzLlxuICogQHBhcmFtIHt5fSBBbmdsZSB0byByb3RhdGUgYXJvdW5kIFkgYXhpcyBpbiBkZWdyZWVzLlxuICogQHBhcmFtIHt6fSBBbmdsZSB0byByb3RhdGUgYXJvdW5kIFogYXhpcyBpbiBkZWdyZWVzLlxuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21FdWxlcihvdXQsIHgsIHksIHopIHtcbiAgdmFyIGhhbGZUb1JhZCA9IDAuNSAqIE1hdGguUEkgLyAxODAuMDtcbiAgeCAqPSBoYWxmVG9SYWQ7XG4gIHkgKj0gaGFsZlRvUmFkO1xuICB6ICo9IGhhbGZUb1JhZDtcbiAgdmFyIHN4ID0gTWF0aC5zaW4oeCk7XG4gIHZhciBjeCA9IE1hdGguY29zKHgpO1xuICB2YXIgc3kgPSBNYXRoLnNpbih5KTtcbiAgdmFyIGN5ID0gTWF0aC5jb3MoeSk7XG4gIHZhciBzeiA9IE1hdGguc2luKHopO1xuICB2YXIgY3ogPSBNYXRoLmNvcyh6KTtcbiAgb3V0WzBdID0gc3ggKiBjeSAqIGN6IC0gY3ggKiBzeSAqIHN6O1xuICBvdXRbMV0gPSBjeCAqIHN5ICogY3ogKyBzeCAqIGN5ICogc3o7XG4gIG91dFsyXSA9IGN4ICogY3kgKiBzeiAtIHN4ICogc3kgKiBjejtcbiAgb3V0WzNdID0gY3ggKiBjeSAqIGN6ICsgc3ggKiBzeSAqIHN6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgcXVhdGVuaW9uXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdmVjdG9yIHRvIHJlcHJlc2VudCBhcyBhIHN0cmluZ1xuICogQHJldHVybnMge1N0cmluZ30gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB2ZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3RyKGEpIHtcbiAgcmV0dXJuIFwicXVhdChcIiArIGFbMF0gKyBcIiwgXCIgKyBhWzFdICsgXCIsIFwiICsgYVsyXSArIFwiLCBcIiArIGFbM10gKyBcIilcIjtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBxdWF0IGluaXRpYWxpemVkIHdpdGggdmFsdWVzIGZyb20gYW4gZXhpc3RpbmcgcXVhdGVybmlvblxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXRlcm5pb24gdG8gY2xvbmVcbiAqIEByZXR1cm5zIHtxdWF0fSBhIG5ldyBxdWF0ZXJuaW9uXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGNsb25lID0gdmVjNC5jbG9uZTtcbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBxdWF0IGluaXRpYWxpemVkIHdpdGggdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHogWiBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB3IFcgY29tcG9uZW50XG4gKiBAcmV0dXJucyB7cXVhdH0gYSBuZXcgcXVhdGVybmlvblxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBmcm9tVmFsdWVzID0gdmVjNC5mcm9tVmFsdWVzO1xuLyoqXG4gKiBDb3B5IHRoZSB2YWx1ZXMgZnJvbSBvbmUgcXVhdCB0byBhbm90aGVyXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgc291cmNlIHF1YXRlcm5pb25cbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgY29weSA9IHZlYzQuY29weTtcbi8qKlxuICogU2V0IHRoZSBjb21wb25lbnRzIG9mIGEgcXVhdCB0byB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkgWSBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB6IFogY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gdyBXIGNvbXBvbmVudFxuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzZXQgPSB2ZWM0LnNldDtcbi8qKlxuICogQWRkcyB0d28gcXVhdCdzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGFkZCA9IHZlYzQuYWRkO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHF1YXQubXVsdGlwbHl9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIG11bCA9IG11bHRpcGx5O1xuLyoqXG4gKiBTY2FsZXMgYSBxdWF0IGJ5IGEgc2NhbGFyIG51bWJlclxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgdmVjdG9yIHRvIHNjYWxlXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIHZlY3RvciBieVxuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzY2FsZSA9IHZlYzQuc2NhbGU7XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRvdCBwcm9kdWN0IG9mIHR3byBxdWF0J3NcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkb3QgcHJvZHVjdCBvZiBhIGFuZCBiXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGRvdCA9IHZlYzQuZG90O1xuLyoqXG4gKiBQZXJmb3JtcyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHF1YXQnc1xuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHQgaW50ZXJwb2xhdGlvbiBhbW91bnQsIGluIHRoZSByYW5nZSBbMC0xXSwgYmV0d2VlbiB0aGUgdHdvIGlucHV0c1xuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBsZXJwID0gdmVjNC5sZXJwO1xuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBsZW5ndGggb2YgYSBxdWF0XG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdmVjdG9yIHRvIGNhbGN1bGF0ZSBsZW5ndGggb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGxlbmd0aCBvZiBhXG4gKi9cblxuZXhwb3J0IHZhciBsZW5ndGggPSB2ZWM0Lmxlbmd0aDtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBxdWF0Lmxlbmd0aH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbGVuID0gbGVuZ3RoO1xuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBzcXVhcmVkIGxlbmd0aCBvZiBhIHF1YXRcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB2ZWN0b3IgdG8gY2FsY3VsYXRlIHNxdWFyZWQgbGVuZ3RoIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBzcXVhcmVkIGxlbmd0aCBvZiBhXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHNxdWFyZWRMZW5ndGggPSB2ZWM0LnNxdWFyZWRMZW5ndGg7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgcXVhdC5zcXVhcmVkTGVuZ3RofVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzcXJMZW4gPSBzcXVhcmVkTGVuZ3RoO1xuLyoqXG4gKiBOb3JtYWxpemUgYSBxdWF0XG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBxdWF0ZXJuaW9uIHRvIG5vcm1hbGl6ZVxuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBub3JtYWxpemUgPSB2ZWM0Lm5vcm1hbGl6ZTtcbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgcXVhdGVybmlvbnMgaGF2ZSBleGFjdGx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uICh3aGVuIGNvbXBhcmVkIHdpdGggPT09KVxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIFRoZSBmaXJzdCBxdWF0ZXJuaW9uLlxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgVGhlIHNlY29uZCBxdWF0ZXJuaW9uLlxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIHZlY3RvcnMgYXJlIGVxdWFsLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cblxuZXhwb3J0IHZhciBleGFjdEVxdWFscyA9IHZlYzQuZXhhY3RFcXVhbHM7XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHF1YXRlcm5pb25zIGhhdmUgYXBwcm94aW1hdGVseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBUaGUgZmlyc3QgdmVjdG9yLlxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgVGhlIHNlY29uZCB2ZWN0b3IuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmVjdG9ycyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgdmFyIGVxdWFscyA9IHZlYzQuZXF1YWxzO1xuLyoqXG4gKiBTZXRzIGEgcXVhdGVybmlvbiB0byByZXByZXNlbnQgdGhlIHNob3J0ZXN0IHJvdGF0aW9uIGZyb20gb25lXG4gKiB2ZWN0b3IgdG8gYW5vdGhlci5cbiAqXG4gKiBCb3RoIHZlY3RvcnMgYXJlIGFzc3VtZWQgdG8gYmUgdW5pdCBsZW5ndGguXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uLlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGluaXRpYWwgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgZGVzdGluYXRpb24gdmVjdG9yXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IHZhciByb3RhdGlvblRvID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdG1wdmVjMyA9IHZlYzMuY3JlYXRlKCk7XG4gIHZhciB4VW5pdFZlYzMgPSB2ZWMzLmZyb21WYWx1ZXMoMSwgMCwgMCk7XG4gIHZhciB5VW5pdFZlYzMgPSB2ZWMzLmZyb21WYWx1ZXMoMCwgMSwgMCk7XG4gIHJldHVybiBmdW5jdGlvbiAob3V0LCBhLCBiKSB7XG4gICAgdmFyIGRvdCA9IHZlYzMuZG90KGEsIGIpO1xuXG4gICAgaWYgKGRvdCA8IC0wLjk5OTk5OSkge1xuICAgICAgdmVjMy5jcm9zcyh0bXB2ZWMzLCB4VW5pdFZlYzMsIGEpO1xuICAgICAgaWYgKHZlYzMubGVuKHRtcHZlYzMpIDwgMC4wMDAwMDEpIHZlYzMuY3Jvc3ModG1wdmVjMywgeVVuaXRWZWMzLCBhKTtcbiAgICAgIHZlYzMubm9ybWFsaXplKHRtcHZlYzMsIHRtcHZlYzMpO1xuICAgICAgc2V0QXhpc0FuZ2xlKG91dCwgdG1wdmVjMywgTWF0aC5QSSk7XG4gICAgICByZXR1cm4gb3V0O1xuICAgIH0gZWxzZSBpZiAoZG90ID4gMC45OTk5OTkpIHtcbiAgICAgIG91dFswXSA9IDA7XG4gICAgICBvdXRbMV0gPSAwO1xuICAgICAgb3V0WzJdID0gMDtcbiAgICAgIG91dFszXSA9IDE7XG4gICAgICByZXR1cm4gb3V0O1xuICAgIH0gZWxzZSB7XG4gICAgICB2ZWMzLmNyb3NzKHRtcHZlYzMsIGEsIGIpO1xuICAgICAgb3V0WzBdID0gdG1wdmVjM1swXTtcbiAgICAgIG91dFsxXSA9IHRtcHZlYzNbMV07XG4gICAgICBvdXRbMl0gPSB0bXB2ZWMzWzJdO1xuICAgICAgb3V0WzNdID0gMSArIGRvdDtcbiAgICAgIHJldHVybiBub3JtYWxpemUob3V0LCBvdXQpO1xuICAgIH1cbiAgfTtcbn0oKTtcbi8qKlxuICogUGVyZm9ybXMgYSBzcGhlcmljYWwgbGluZWFyIGludGVycG9sYXRpb24gd2l0aCB0d28gY29udHJvbCBwb2ludHNcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBjIHRoZSB0aGlyZCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gZCB0aGUgZm91cnRoIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50LCBpbiB0aGUgcmFuZ2UgWzAtMV0sIGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgdmFyIHNxbGVycCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHRlbXAxID0gY3JlYXRlKCk7XG4gIHZhciB0ZW1wMiA9IGNyZWF0ZSgpO1xuICByZXR1cm4gZnVuY3Rpb24gKG91dCwgYSwgYiwgYywgZCwgdCkge1xuICAgIHNsZXJwKHRlbXAxLCBhLCBkLCB0KTtcbiAgICBzbGVycCh0ZW1wMiwgYiwgYywgdCk7XG4gICAgc2xlcnAob3V0LCB0ZW1wMSwgdGVtcDIsIDIgKiB0ICogKDEgLSB0KSk7XG4gICAgcmV0dXJuIG91dDtcbiAgfTtcbn0oKTtcbi8qKlxuICogU2V0cyB0aGUgc3BlY2lmaWVkIHF1YXRlcm5pb24gd2l0aCB2YWx1ZXMgY29ycmVzcG9uZGluZyB0byB0aGUgZ2l2ZW5cbiAqIGF4ZXMuIEVhY2ggYXhpcyBpcyBhIHZlYzMgYW5kIGlzIGV4cGVjdGVkIHRvIGJlIHVuaXQgbGVuZ3RoIGFuZFxuICogcGVycGVuZGljdWxhciB0byBhbGwgb3RoZXIgc3BlY2lmaWVkIGF4ZXMuXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHZpZXcgIHRoZSB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSB2aWV3aW5nIGRpcmVjdGlvblxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHJpZ2h0IHRoZSB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSBsb2NhbCBcInJpZ2h0XCIgZGlyZWN0aW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdXAgICAgdGhlIHZlY3RvciByZXByZXNlbnRpbmcgdGhlIGxvY2FsIFwidXBcIiBkaXJlY3Rpb25cbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgdmFyIHNldEF4ZXMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBtYXRyID0gbWF0My5jcmVhdGUoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChvdXQsIHZpZXcsIHJpZ2h0LCB1cCkge1xuICAgIG1hdHJbMF0gPSByaWdodFswXTtcbiAgICBtYXRyWzNdID0gcmlnaHRbMV07XG4gICAgbWF0cls2XSA9IHJpZ2h0WzJdO1xuICAgIG1hdHJbMV0gPSB1cFswXTtcbiAgICBtYXRyWzRdID0gdXBbMV07XG4gICAgbWF0cls3XSA9IHVwWzJdO1xuICAgIG1hdHJbMl0gPSAtdmlld1swXTtcbiAgICBtYXRyWzVdID0gLXZpZXdbMV07XG4gICAgbWF0cls4XSA9IC12aWV3WzJdO1xuICAgIHJldHVybiBub3JtYWxpemUob3V0LCBmcm9tTWF0MyhvdXQsIG1hdHIpKTtcbiAgfTtcbn0oKTsiLCAiaW1wb3J0ICogYXMgZ2xNYXRyaXggZnJvbSBcIi4vY29tbW9uLmpzXCI7XG4vKipcbiAqIDMgRGltZW5zaW9uYWwgVmVjdG9yXG4gKiBAbW9kdWxlIHZlYzNcbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcsIGVtcHR5IHZlYzNcbiAqXG4gKiBAcmV0dXJucyB7dmVjM30gYSBuZXcgM0QgdmVjdG9yXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDMpO1xuXG4gIGlmIChnbE1hdHJpeC5BUlJBWV9UWVBFICE9IEZsb2F0MzJBcnJheSkge1xuICAgIG91dFswXSA9IDA7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB2ZWMzIGluaXRpYWxpemVkIHdpdGggdmFsdWVzIGZyb20gYW4gZXhpc3RpbmcgdmVjdG9yXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIGNsb25lXG4gKiBAcmV0dXJucyB7dmVjM30gYSBuZXcgM0QgdmVjdG9yXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lKGEpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDMpO1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSBhWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBsZW5ndGggb2YgYSB2ZWMzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIGNhbGN1bGF0ZSBsZW5ndGggb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGxlbmd0aCBvZiBhXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxlbmd0aChhKSB7XG4gIHZhciB4ID0gYVswXTtcbiAgdmFyIHkgPSBhWzFdO1xuICB2YXIgeiA9IGFbMl07XG4gIHJldHVybiBNYXRoLmh5cG90KHgsIHksIHopO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHZlYzMgaW5pdGlhbGl6ZWQgd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHggWCBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFkgY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geiBaIGNvbXBvbmVudFxuICogQHJldHVybnMge3ZlYzN9IGEgbmV3IDNEIHZlY3RvclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVmFsdWVzKHgsIHksIHopIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDMpO1xuICBvdXRbMF0gPSB4O1xuICBvdXRbMV0gPSB5O1xuICBvdXRbMl0gPSB6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDb3B5IHRoZSB2YWx1ZXMgZnJvbSBvbmUgdmVjMyB0byBhbm90aGVyXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBzb3VyY2UgdmVjdG9yXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNvcHkob3V0LCBhKSB7XG4gIG91dFswXSA9IGFbMF07XG4gIG91dFsxXSA9IGFbMV07XG4gIG91dFsyXSA9IGFbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNldCB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzMgdG8gdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkgWSBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB6IFogY29tcG9uZW50XG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNldChvdXQsIHgsIHksIHopIHtcbiAgb3V0WzBdID0geDtcbiAgb3V0WzFdID0geTtcbiAgb3V0WzJdID0gejtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQWRkcyB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICsgYlswXTtcbiAgb3V0WzFdID0gYVsxXSArIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gKyBiWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTdWJ0cmFjdHMgdmVjdG9yIGIgZnJvbSB2ZWN0b3IgYVxuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN1YnRyYWN0KG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdIC0gYlswXTtcbiAgb3V0WzFdID0gYVsxXSAtIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gLSBiWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBNdWx0aXBsaWVzIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aXBseShvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAqIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gKiBiWzFdO1xuICBvdXRbMl0gPSBhWzJdICogYlsyXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogRGl2aWRlcyB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZGl2aWRlKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdIC8gYlswXTtcbiAgb3V0WzFdID0gYVsxXSAvIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gLyBiWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBNYXRoLmNlaWwgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWMzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHZlY3RvciB0byBjZWlsXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNlaWwob3V0LCBhKSB7XG4gIG91dFswXSA9IE1hdGguY2VpbChhWzBdKTtcbiAgb3V0WzFdID0gTWF0aC5jZWlsKGFbMV0pO1xuICBvdXRbMl0gPSBNYXRoLmNlaWwoYVsyXSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE1hdGguZmxvb3IgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWMzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHZlY3RvciB0byBmbG9vclxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmbG9vcihvdXQsIGEpIHtcbiAgb3V0WzBdID0gTWF0aC5mbG9vcihhWzBdKTtcbiAgb3V0WzFdID0gTWF0aC5mbG9vcihhWzFdKTtcbiAgb3V0WzJdID0gTWF0aC5mbG9vcihhWzJdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgbWluaW11bSBvZiB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbWluKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBNYXRoLm1pbihhWzBdLCBiWzBdKTtcbiAgb3V0WzFdID0gTWF0aC5taW4oYVsxXSwgYlsxXSk7XG4gIG91dFsyXSA9IE1hdGgubWluKGFbMl0sIGJbMl0pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtYXhpbXVtIG9mIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtYXgob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IE1hdGgubWF4KGFbMF0sIGJbMF0pO1xuICBvdXRbMV0gPSBNYXRoLm1heChhWzFdLCBiWzFdKTtcbiAgb3V0WzJdID0gTWF0aC5tYXgoYVsyXSwgYlsyXSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE1hdGgucm91bmQgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWMzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHZlY3RvciB0byByb3VuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3VuZChvdXQsIGEpIHtcbiAgb3V0WzBdID0gTWF0aC5yb3VuZChhWzBdKTtcbiAgb3V0WzFdID0gTWF0aC5yb3VuZChhWzFdKTtcbiAgb3V0WzJdID0gTWF0aC5yb3VuZChhWzJdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2NhbGVzIGEgdmVjMyBieSBhIHNjYWxhciBudW1iZXJcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIHZlY3RvciB0byBzY2FsZVxuICogQHBhcmFtIHtOdW1iZXJ9IGIgYW1vdW50IHRvIHNjYWxlIHRoZSB2ZWN0b3IgYnlcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gKiBiO1xuICBvdXRbMV0gPSBhWzFdICogYjtcbiAgb3V0WzJdID0gYVsyXSAqIGI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFkZHMgdHdvIHZlYzMncyBhZnRlciBzY2FsaW5nIHRoZSBzZWNvbmQgb3BlcmFuZCBieSBhIHNjYWxhciB2YWx1ZVxuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gc2NhbGUgdGhlIGFtb3VudCB0byBzY2FsZSBiIGJ5IGJlZm9yZSBhZGRpbmdcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2NhbGVBbmRBZGQob3V0LCBhLCBiLCBzY2FsZSkge1xuICBvdXRbMF0gPSBhWzBdICsgYlswXSAqIHNjYWxlO1xuICBvdXRbMV0gPSBhWzFdICsgYlsxXSAqIHNjYWxlO1xuICBvdXRbMl0gPSBhWzJdICsgYlsyXSAqIHNjYWxlO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBldWNsaWRpYW4gZGlzdGFuY2UgYmV0d2VlbiB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gZGlzdGFuY2UgYmV0d2VlbiBhIGFuZCBiXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3RhbmNlKGEsIGIpIHtcbiAgdmFyIHggPSBiWzBdIC0gYVswXTtcbiAgdmFyIHkgPSBiWzFdIC0gYVsxXTtcbiAgdmFyIHogPSBiWzJdIC0gYVsyXTtcbiAgcmV0dXJuIE1hdGguaHlwb3QoeCwgeSwgeik7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHNxdWFyZWQgZXVjbGlkaWFuIGRpc3RhbmNlIGJldHdlZW4gdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHNxdWFyZWQgZGlzdGFuY2UgYmV0d2VlbiBhIGFuZCBiXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWREaXN0YW5jZShhLCBiKSB7XG4gIHZhciB4ID0gYlswXSAtIGFbMF07XG4gIHZhciB5ID0gYlsxXSAtIGFbMV07XG4gIHZhciB6ID0gYlsyXSAtIGFbMl07XG4gIHJldHVybiB4ICogeCArIHkgKiB5ICsgeiAqIHo7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHNxdWFyZWQgbGVuZ3RoIG9mIGEgdmVjM1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHZlY3RvciB0byBjYWxjdWxhdGUgc3F1YXJlZCBsZW5ndGggb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHNxdWFyZWQgbGVuZ3RoIG9mIGFcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZExlbmd0aChhKSB7XG4gIHZhciB4ID0gYVswXTtcbiAgdmFyIHkgPSBhWzFdO1xuICB2YXIgeiA9IGFbMl07XG4gIHJldHVybiB4ICogeCArIHkgKiB5ICsgeiAqIHo7XG59XG4vKipcbiAqIE5lZ2F0ZXMgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWMzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHZlY3RvciB0byBuZWdhdGVcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbmVnYXRlKG91dCwgYSkge1xuICBvdXRbMF0gPSAtYVswXTtcbiAgb3V0WzFdID0gLWFbMV07XG4gIG91dFsyXSA9IC1hWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbnZlcnNlIG9mIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjM1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB2ZWN0b3IgdG8gaW52ZXJ0XG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGludmVyc2Uob3V0LCBhKSB7XG4gIG91dFswXSA9IDEuMCAvIGFbMF07XG4gIG91dFsxXSA9IDEuMCAvIGFbMV07XG4gIG91dFsyXSA9IDEuMCAvIGFbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE5vcm1hbGl6ZSBhIHZlYzNcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIG5vcm1hbGl6ZVxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemUob3V0LCBhKSB7XG4gIHZhciB4ID0gYVswXTtcbiAgdmFyIHkgPSBhWzFdO1xuICB2YXIgeiA9IGFbMl07XG4gIHZhciBsZW4gPSB4ICogeCArIHkgKiB5ICsgeiAqIHo7XG5cbiAgaWYgKGxlbiA+IDApIHtcbiAgICAvL1RPRE86IGV2YWx1YXRlIHVzZSBvZiBnbG1faW52c3FydCBoZXJlP1xuICAgIGxlbiA9IDEgLyBNYXRoLnNxcnQobGVuKTtcbiAgfVxuXG4gIG91dFswXSA9IGFbMF0gKiBsZW47XG4gIG91dFsxXSA9IGFbMV0gKiBsZW47XG4gIG91dFsyXSA9IGFbMl0gKiBsZW47XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRvdCBwcm9kdWN0IG9mIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkb3QgcHJvZHVjdCBvZiBhIGFuZCBiXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRvdChhLCBiKSB7XG4gIHJldHVybiBhWzBdICogYlswXSArIGFbMV0gKiBiWzFdICsgYVsyXSAqIGJbMl07XG59XG4vKipcbiAqIENvbXB1dGVzIHRoZSBjcm9zcyBwcm9kdWN0IG9mIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjcm9zcyhvdXQsIGEsIGIpIHtcbiAgdmFyIGF4ID0gYVswXSxcbiAgICAgIGF5ID0gYVsxXSxcbiAgICAgIGF6ID0gYVsyXTtcbiAgdmFyIGJ4ID0gYlswXSxcbiAgICAgIGJ5ID0gYlsxXSxcbiAgICAgIGJ6ID0gYlsyXTtcbiAgb3V0WzBdID0gYXkgKiBieiAtIGF6ICogYnk7XG4gIG91dFsxXSA9IGF6ICogYnggLSBheCAqIGJ6O1xuICBvdXRbMl0gPSBheCAqIGJ5IC0gYXkgKiBieDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUGVyZm9ybXMgYSBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHQgaW50ZXJwb2xhdGlvbiBhbW91bnQsIGluIHRoZSByYW5nZSBbMC0xXSwgYmV0d2VlbiB0aGUgdHdvIGlucHV0c1xuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsZXJwKG91dCwgYSwgYiwgdCkge1xuICB2YXIgYXggPSBhWzBdO1xuICB2YXIgYXkgPSBhWzFdO1xuICB2YXIgYXogPSBhWzJdO1xuICBvdXRbMF0gPSBheCArIHQgKiAoYlswXSAtIGF4KTtcbiAgb3V0WzFdID0gYXkgKyB0ICogKGJbMV0gLSBheSk7XG4gIG91dFsyXSA9IGF6ICsgdCAqIChiWzJdIC0gYXopO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBQZXJmb3JtcyBhIGhlcm1pdGUgaW50ZXJwb2xhdGlvbiB3aXRoIHR3byBjb250cm9sIHBvaW50c1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYyB0aGUgdGhpcmQgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGQgdGhlIGZvdXJ0aCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCwgaW4gdGhlIHJhbmdlIFswLTFdLCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGhlcm1pdGUob3V0LCBhLCBiLCBjLCBkLCB0KSB7XG4gIHZhciBmYWN0b3JUaW1lczIgPSB0ICogdDtcbiAgdmFyIGZhY3RvcjEgPSBmYWN0b3JUaW1lczIgKiAoMiAqIHQgLSAzKSArIDE7XG4gIHZhciBmYWN0b3IyID0gZmFjdG9yVGltZXMyICogKHQgLSAyKSArIHQ7XG4gIHZhciBmYWN0b3IzID0gZmFjdG9yVGltZXMyICogKHQgLSAxKTtcbiAgdmFyIGZhY3RvcjQgPSBmYWN0b3JUaW1lczIgKiAoMyAtIDIgKiB0KTtcbiAgb3V0WzBdID0gYVswXSAqIGZhY3RvcjEgKyBiWzBdICogZmFjdG9yMiArIGNbMF0gKiBmYWN0b3IzICsgZFswXSAqIGZhY3RvcjQ7XG4gIG91dFsxXSA9IGFbMV0gKiBmYWN0b3IxICsgYlsxXSAqIGZhY3RvcjIgKyBjWzFdICogZmFjdG9yMyArIGRbMV0gKiBmYWN0b3I0O1xuICBvdXRbMl0gPSBhWzJdICogZmFjdG9yMSArIGJbMl0gKiBmYWN0b3IyICsgY1syXSAqIGZhY3RvcjMgKyBkWzJdICogZmFjdG9yNDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUGVyZm9ybXMgYSBiZXppZXIgaW50ZXJwb2xhdGlvbiB3aXRoIHR3byBjb250cm9sIHBvaW50c1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYyB0aGUgdGhpcmQgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGQgdGhlIGZvdXJ0aCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCwgaW4gdGhlIHJhbmdlIFswLTFdLCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGJlemllcihvdXQsIGEsIGIsIGMsIGQsIHQpIHtcbiAgdmFyIGludmVyc2VGYWN0b3IgPSAxIC0gdDtcbiAgdmFyIGludmVyc2VGYWN0b3JUaW1lc1R3byA9IGludmVyc2VGYWN0b3IgKiBpbnZlcnNlRmFjdG9yO1xuICB2YXIgZmFjdG9yVGltZXMyID0gdCAqIHQ7XG4gIHZhciBmYWN0b3IxID0gaW52ZXJzZUZhY3RvclRpbWVzVHdvICogaW52ZXJzZUZhY3RvcjtcbiAgdmFyIGZhY3RvcjIgPSAzICogdCAqIGludmVyc2VGYWN0b3JUaW1lc1R3bztcbiAgdmFyIGZhY3RvcjMgPSAzICogZmFjdG9yVGltZXMyICogaW52ZXJzZUZhY3RvcjtcbiAgdmFyIGZhY3RvcjQgPSBmYWN0b3JUaW1lczIgKiB0O1xuICBvdXRbMF0gPSBhWzBdICogZmFjdG9yMSArIGJbMF0gKiBmYWN0b3IyICsgY1swXSAqIGZhY3RvcjMgKyBkWzBdICogZmFjdG9yNDtcbiAgb3V0WzFdID0gYVsxXSAqIGZhY3RvcjEgKyBiWzFdICogZmFjdG9yMiArIGNbMV0gKiBmYWN0b3IzICsgZFsxXSAqIGZhY3RvcjQ7XG4gIG91dFsyXSA9IGFbMl0gKiBmYWN0b3IxICsgYlsyXSAqIGZhY3RvcjIgKyBjWzJdICogZmFjdG9yMyArIGRbMl0gKiBmYWN0b3I0O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSByYW5kb20gdmVjdG9yIHdpdGggdGhlIGdpdmVuIHNjYWxlXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7TnVtYmVyfSBbc2NhbGVdIExlbmd0aCBvZiB0aGUgcmVzdWx0aW5nIHZlY3Rvci4gSWYgb21taXR0ZWQsIGEgdW5pdCB2ZWN0b3Igd2lsbCBiZSByZXR1cm5lZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByYW5kb20ob3V0LCBzY2FsZSkge1xuICBzY2FsZSA9IHNjYWxlIHx8IDEuMDtcbiAgdmFyIHIgPSBnbE1hdHJpeC5SQU5ET00oKSAqIDIuMCAqIE1hdGguUEk7XG4gIHZhciB6ID0gZ2xNYXRyaXguUkFORE9NKCkgKiAyLjAgLSAxLjA7XG4gIHZhciB6U2NhbGUgPSBNYXRoLnNxcnQoMS4wIC0geiAqIHopICogc2NhbGU7XG4gIG91dFswXSA9IE1hdGguY29zKHIpICogelNjYWxlO1xuICBvdXRbMV0gPSBNYXRoLnNpbihyKSAqIHpTY2FsZTtcbiAgb3V0WzJdID0geiAqIHNjYWxlO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSB2ZWMzIHdpdGggYSBtYXQ0LlxuICogNHRoIHZlY3RvciBjb21wb25lbnQgaXMgaW1wbGljaXRseSAnMSdcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIHZlY3RvciB0byB0cmFuc2Zvcm1cbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBtIG1hdHJpeCB0byB0cmFuc2Zvcm0gd2l0aFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1NYXQ0KG91dCwgYSwgbSkge1xuICB2YXIgeCA9IGFbMF0sXG4gICAgICB5ID0gYVsxXSxcbiAgICAgIHogPSBhWzJdO1xuICB2YXIgdyA9IG1bM10gKiB4ICsgbVs3XSAqIHkgKyBtWzExXSAqIHogKyBtWzE1XTtcbiAgdyA9IHcgfHwgMS4wO1xuICBvdXRbMF0gPSAobVswXSAqIHggKyBtWzRdICogeSArIG1bOF0gKiB6ICsgbVsxMl0pIC8gdztcbiAgb3V0WzFdID0gKG1bMV0gKiB4ICsgbVs1XSAqIHkgKyBtWzldICogeiArIG1bMTNdKSAvIHc7XG4gIG91dFsyXSA9IChtWzJdICogeCArIG1bNl0gKiB5ICsgbVsxMF0gKiB6ICsgbVsxNF0pIC8gdztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgdmVjMyB3aXRoIGEgbWF0My5cbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIHZlY3RvciB0byB0cmFuc2Zvcm1cbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBtIHRoZSAzeDMgbWF0cml4IHRvIHRyYW5zZm9ybSB3aXRoXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybU1hdDMob3V0LCBhLCBtKSB7XG4gIHZhciB4ID0gYVswXSxcbiAgICAgIHkgPSBhWzFdLFxuICAgICAgeiA9IGFbMl07XG4gIG91dFswXSA9IHggKiBtWzBdICsgeSAqIG1bM10gKyB6ICogbVs2XTtcbiAgb3V0WzFdID0geCAqIG1bMV0gKyB5ICogbVs0XSArIHogKiBtWzddO1xuICBvdXRbMl0gPSB4ICogbVsyXSArIHkgKiBtWzVdICsgeiAqIG1bOF07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIHZlYzMgd2l0aCBhIHF1YXRcbiAqIENhbiBhbHNvIGJlIHVzZWQgZm9yIGR1YWwgcXVhdGVybmlvbnMuIChNdWx0aXBseSBpdCB3aXRoIHRoZSByZWFsIHBhcnQpXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSB2ZWN0b3IgdG8gdHJhbnNmb3JtXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gcSBxdWF0ZXJuaW9uIHRvIHRyYW5zZm9ybSB3aXRoXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybVF1YXQob3V0LCBhLCBxKSB7XG4gIC8vIGJlbmNobWFya3M6IGh0dHBzOi8vanNwZXJmLmNvbS9xdWF0ZXJuaW9uLXRyYW5zZm9ybS12ZWMzLWltcGxlbWVudGF0aW9ucy1maXhlZFxuICB2YXIgcXggPSBxWzBdLFxuICAgICAgcXkgPSBxWzFdLFxuICAgICAgcXogPSBxWzJdLFxuICAgICAgcXcgPSBxWzNdO1xuICB2YXIgeCA9IGFbMF0sXG4gICAgICB5ID0gYVsxXSxcbiAgICAgIHogPSBhWzJdOyAvLyB2YXIgcXZlYyA9IFtxeCwgcXksIHF6XTtcbiAgLy8gdmFyIHV2ID0gdmVjMy5jcm9zcyhbXSwgcXZlYywgYSk7XG5cbiAgdmFyIHV2eCA9IHF5ICogeiAtIHF6ICogeSxcbiAgICAgIHV2eSA9IHF6ICogeCAtIHF4ICogeixcbiAgICAgIHV2eiA9IHF4ICogeSAtIHF5ICogeDsgLy8gdmFyIHV1diA9IHZlYzMuY3Jvc3MoW10sIHF2ZWMsIHV2KTtcblxuICB2YXIgdXV2eCA9IHF5ICogdXZ6IC0gcXogKiB1dnksXG4gICAgICB1dXZ5ID0gcXogKiB1dnggLSBxeCAqIHV2eixcbiAgICAgIHV1dnogPSBxeCAqIHV2eSAtIHF5ICogdXZ4OyAvLyB2ZWMzLnNjYWxlKHV2LCB1diwgMiAqIHcpO1xuXG4gIHZhciB3MiA9IHF3ICogMjtcbiAgdXZ4ICo9IHcyO1xuICB1dnkgKj0gdzI7XG4gIHV2eiAqPSB3MjsgLy8gdmVjMy5zY2FsZSh1dXYsIHV1diwgMik7XG5cbiAgdXV2eCAqPSAyO1xuICB1dXZ5ICo9IDI7XG4gIHV1dnogKj0gMjsgLy8gcmV0dXJuIHZlYzMuYWRkKG91dCwgYSwgdmVjMy5hZGQob3V0LCB1diwgdXV2KSk7XG5cbiAgb3V0WzBdID0geCArIHV2eCArIHV1dng7XG4gIG91dFsxXSA9IHkgKyB1dnkgKyB1dXZ5O1xuICBvdXRbMl0gPSB6ICsgdXZ6ICsgdXV2ejtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlIGEgM0QgdmVjdG9yIGFyb3VuZCB0aGUgeC1heGlzXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCBUaGUgcmVjZWl2aW5nIHZlYzNcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIFRoZSB2ZWMzIHBvaW50IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgVGhlIG9yaWdpbiBvZiB0aGUgcm90YXRpb25cbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgVGhlIGFuZ2xlIG9mIHJvdGF0aW9uIGluIHJhZGlhbnNcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlWChvdXQsIGEsIGIsIHJhZCkge1xuICB2YXIgcCA9IFtdLFxuICAgICAgciA9IFtdOyAvL1RyYW5zbGF0ZSBwb2ludCB0byB0aGUgb3JpZ2luXG5cbiAgcFswXSA9IGFbMF0gLSBiWzBdO1xuICBwWzFdID0gYVsxXSAtIGJbMV07XG4gIHBbMl0gPSBhWzJdIC0gYlsyXTsgLy9wZXJmb3JtIHJvdGF0aW9uXG5cbiAgclswXSA9IHBbMF07XG4gIHJbMV0gPSBwWzFdICogTWF0aC5jb3MocmFkKSAtIHBbMl0gKiBNYXRoLnNpbihyYWQpO1xuICByWzJdID0gcFsxXSAqIE1hdGguc2luKHJhZCkgKyBwWzJdICogTWF0aC5jb3MocmFkKTsgLy90cmFuc2xhdGUgdG8gY29ycmVjdCBwb3NpdGlvblxuXG4gIG91dFswXSA9IHJbMF0gKyBiWzBdO1xuICBvdXRbMV0gPSByWzFdICsgYlsxXTtcbiAgb3V0WzJdID0gclsyXSArIGJbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZSBhIDNEIHZlY3RvciBhcm91bmQgdGhlIHktYXhpc1xuICogQHBhcmFtIHt2ZWMzfSBvdXQgVGhlIHJlY2VpdmluZyB2ZWMzXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSBUaGUgdmVjMyBwb2ludCB0byByb3RhdGVcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIFRoZSBvcmlnaW4gb2YgdGhlIHJvdGF0aW9uXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIFRoZSBhbmdsZSBvZiByb3RhdGlvbiBpbiByYWRpYW5zXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVkob3V0LCBhLCBiLCByYWQpIHtcbiAgdmFyIHAgPSBbXSxcbiAgICAgIHIgPSBbXTsgLy9UcmFuc2xhdGUgcG9pbnQgdG8gdGhlIG9yaWdpblxuXG4gIHBbMF0gPSBhWzBdIC0gYlswXTtcbiAgcFsxXSA9IGFbMV0gLSBiWzFdO1xuICBwWzJdID0gYVsyXSAtIGJbMl07IC8vcGVyZm9ybSByb3RhdGlvblxuXG4gIHJbMF0gPSBwWzJdICogTWF0aC5zaW4ocmFkKSArIHBbMF0gKiBNYXRoLmNvcyhyYWQpO1xuICByWzFdID0gcFsxXTtcbiAgclsyXSA9IHBbMl0gKiBNYXRoLmNvcyhyYWQpIC0gcFswXSAqIE1hdGguc2luKHJhZCk7IC8vdHJhbnNsYXRlIHRvIGNvcnJlY3QgcG9zaXRpb25cblxuICBvdXRbMF0gPSByWzBdICsgYlswXTtcbiAgb3V0WzFdID0gclsxXSArIGJbMV07XG4gIG91dFsyXSA9IHJbMl0gKyBiWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGUgYSAzRCB2ZWN0b3IgYXJvdW5kIHRoZSB6LWF4aXNcbiAqIEBwYXJhbSB7dmVjM30gb3V0IFRoZSByZWNlaXZpbmcgdmVjM1xuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgVGhlIHZlYzMgcG9pbnQgdG8gcm90YXRlXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiBUaGUgb3JpZ2luIG9mIHRoZSByb3RhdGlvblxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCBUaGUgYW5nbGUgb2Ygcm90YXRpb24gaW4gcmFkaWFuc1xuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVaKG91dCwgYSwgYiwgcmFkKSB7XG4gIHZhciBwID0gW10sXG4gICAgICByID0gW107IC8vVHJhbnNsYXRlIHBvaW50IHRvIHRoZSBvcmlnaW5cblxuICBwWzBdID0gYVswXSAtIGJbMF07XG4gIHBbMV0gPSBhWzFdIC0gYlsxXTtcbiAgcFsyXSA9IGFbMl0gLSBiWzJdOyAvL3BlcmZvcm0gcm90YXRpb25cblxuICByWzBdID0gcFswXSAqIE1hdGguY29zKHJhZCkgLSBwWzFdICogTWF0aC5zaW4ocmFkKTtcbiAgclsxXSA9IHBbMF0gKiBNYXRoLnNpbihyYWQpICsgcFsxXSAqIE1hdGguY29zKHJhZCk7XG4gIHJbMl0gPSBwWzJdOyAvL3RyYW5zbGF0ZSB0byBjb3JyZWN0IHBvc2l0aW9uXG5cbiAgb3V0WzBdID0gclswXSArIGJbMF07XG4gIG91dFsxXSA9IHJbMV0gKyBiWzFdO1xuICBvdXRbMl0gPSByWzJdICsgYlsyXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogR2V0IHRoZSBhbmdsZSBiZXR3ZWVuIHR3byAzRCB2ZWN0b3JzXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSBUaGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgVGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgYW5nbGUgaW4gcmFkaWFuc1xuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBhbmdsZShhLCBiKSB7XG4gIHZhciBheCA9IGFbMF0sXG4gICAgICBheSA9IGFbMV0sXG4gICAgICBheiA9IGFbMl0sXG4gICAgICBieCA9IGJbMF0sXG4gICAgICBieSA9IGJbMV0sXG4gICAgICBieiA9IGJbMl0sXG4gICAgICBtYWcxID0gTWF0aC5zcXJ0KGF4ICogYXggKyBheSAqIGF5ICsgYXogKiBheiksXG4gICAgICBtYWcyID0gTWF0aC5zcXJ0KGJ4ICogYnggKyBieSAqIGJ5ICsgYnogKiBieiksXG4gICAgICBtYWcgPSBtYWcxICogbWFnMixcbiAgICAgIGNvc2luZSA9IG1hZyAmJiBkb3QoYSwgYikgLyBtYWc7XG4gIHJldHVybiBNYXRoLmFjb3MoTWF0aC5taW4oTWF0aC5tYXgoY29zaW5lLCAtMSksIDEpKTtcbn1cbi8qKlxuICogU2V0IHRoZSBjb21wb25lbnRzIG9mIGEgdmVjMyB0byB6ZXJvXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gemVybyhvdXQpIHtcbiAgb3V0WzBdID0gMC4wO1xuICBvdXRbMV0gPSAwLjA7XG4gIG91dFsyXSA9IDAuMDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIHZlY3RvclxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHZlY3RvciB0byByZXByZXNlbnQgYXMgYSBzdHJpbmdcbiAqIEByZXR1cm5zIHtTdHJpbmd9IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgdmVjdG9yXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cihhKSB7XG4gIHJldHVybiBcInZlYzMoXCIgKyBhWzBdICsgXCIsIFwiICsgYVsxXSArIFwiLCBcIiArIGFbMl0gKyBcIilcIjtcbn1cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgdmVjdG9ycyBoYXZlIGV4YWN0bHkgdGhlIHNhbWUgZWxlbWVudHMgaW4gdGhlIHNhbWUgcG9zaXRpb24gKHdoZW4gY29tcGFyZWQgd2l0aCA9PT0pXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgVGhlIGZpcnN0IHZlY3Rvci5cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIFRoZSBzZWNvbmQgdmVjdG9yLlxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIHZlY3RvcnMgYXJlIGVxdWFsLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGV4YWN0RXF1YWxzKGEsIGIpIHtcbiAgcmV0dXJuIGFbMF0gPT09IGJbMF0gJiYgYVsxXSA9PT0gYlsxXSAmJiBhWzJdID09PSBiWzJdO1xufVxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSB2ZWN0b3JzIGhhdmUgYXBwcm94aW1hdGVseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSBUaGUgZmlyc3QgdmVjdG9yLlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgVGhlIHNlY29uZCB2ZWN0b3IuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmVjdG9ycyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGEsIGIpIHtcbiAgdmFyIGEwID0gYVswXSxcbiAgICAgIGExID0gYVsxXSxcbiAgICAgIGEyID0gYVsyXTtcbiAgdmFyIGIwID0gYlswXSxcbiAgICAgIGIxID0gYlsxXSxcbiAgICAgIGIyID0gYlsyXTtcbiAgcmV0dXJuIE1hdGguYWJzKGEwIC0gYjApIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEwKSwgTWF0aC5hYnMoYjApKSAmJiBNYXRoLmFicyhhMSAtIGIxKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMSksIE1hdGguYWJzKGIxKSkgJiYgTWF0aC5hYnMoYTIgLSBiMikgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTIpLCBNYXRoLmFicyhiMikpO1xufVxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzMuc3VidHJhY3R9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHN1YiA9IHN1YnRyYWN0O1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzMubXVsdGlwbHl9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIG11bCA9IG11bHRpcGx5O1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzMuZGl2aWRlfVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBkaXYgPSBkaXZpZGU7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMy5kaXN0YW5jZX1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgZGlzdCA9IGRpc3RhbmNlO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzMuc3F1YXJlZERpc3RhbmNlfVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzcXJEaXN0ID0gc3F1YXJlZERpc3RhbmNlO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzMubGVuZ3RofVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBsZW4gPSBsZW5ndGg7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMy5zcXVhcmVkTGVuZ3RofVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzcXJMZW4gPSBzcXVhcmVkTGVuZ3RoO1xuLyoqXG4gKiBQZXJmb3JtIHNvbWUgb3BlcmF0aW9uIG92ZXIgYW4gYXJyYXkgb2YgdmVjM3MuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYSB0aGUgYXJyYXkgb2YgdmVjdG9ycyB0byBpdGVyYXRlIG92ZXJcbiAqIEBwYXJhbSB7TnVtYmVyfSBzdHJpZGUgTnVtYmVyIG9mIGVsZW1lbnRzIGJldHdlZW4gdGhlIHN0YXJ0IG9mIGVhY2ggdmVjMy4gSWYgMCBhc3N1bWVzIHRpZ2h0bHkgcGFja2VkXG4gKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IE51bWJlciBvZiBlbGVtZW50cyB0byBza2lwIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFycmF5XG4gKiBAcGFyYW0ge051bWJlcn0gY291bnQgTnVtYmVyIG9mIHZlYzNzIHRvIGl0ZXJhdGUgb3Zlci4gSWYgMCBpdGVyYXRlcyBvdmVyIGVudGlyZSBhcnJheVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gRnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCB2ZWN0b3IgaW4gdGhlIGFycmF5XG4gKiBAcGFyYW0ge09iamVjdH0gW2FyZ10gYWRkaXRpb25hbCBhcmd1bWVudCB0byBwYXNzIHRvIGZuXG4gKiBAcmV0dXJucyB7QXJyYXl9IGFcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgZm9yRWFjaCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHZlYyA9IGNyZWF0ZSgpO1xuICByZXR1cm4gZnVuY3Rpb24gKGEsIHN0cmlkZSwgb2Zmc2V0LCBjb3VudCwgZm4sIGFyZykge1xuICAgIHZhciBpLCBsO1xuXG4gICAgaWYgKCFzdHJpZGUpIHtcbiAgICAgIHN0cmlkZSA9IDM7XG4gICAgfVxuXG4gICAgaWYgKCFvZmZzZXQpIHtcbiAgICAgIG9mZnNldCA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGNvdW50KSB7XG4gICAgICBsID0gTWF0aC5taW4oY291bnQgKiBzdHJpZGUgKyBvZmZzZXQsIGEubGVuZ3RoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbCA9IGEubGVuZ3RoO1xuICAgIH1cblxuICAgIGZvciAoaSA9IG9mZnNldDsgaSA8IGw7IGkgKz0gc3RyaWRlKSB7XG4gICAgICB2ZWNbMF0gPSBhW2ldO1xuICAgICAgdmVjWzFdID0gYVtpICsgMV07XG4gICAgICB2ZWNbMl0gPSBhW2kgKyAyXTtcbiAgICAgIGZuKHZlYywgdmVjLCBhcmcpO1xuICAgICAgYVtpXSA9IHZlY1swXTtcbiAgICAgIGFbaSArIDFdID0gdmVjWzFdO1xuICAgICAgYVtpICsgMl0gPSB2ZWNbMl07XG4gICAgfVxuXG4gICAgcmV0dXJuIGE7XG4gIH07XG59KCk7IiwgImltcG9ydCAqIGFzIGdsTWF0cml4IGZyb20gXCIuL2NvbW1vbi5qc1wiO1xuLyoqXG4gKiA0IERpbWVuc2lvbmFsIFZlY3RvclxuICogQG1vZHVsZSB2ZWM0XG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3LCBlbXB0eSB2ZWM0XG4gKlxuICogQHJldHVybnMge3ZlYzR9IGEgbmV3IDREIHZlY3RvclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSg0KTtcblxuICBpZiAoZ2xNYXRyaXguQVJSQVlfVFlQRSAhPSBGbG9hdDMyQXJyYXkpIHtcbiAgICBvdXRbMF0gPSAwO1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgICBvdXRbM10gPSAwO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB2ZWM0IGluaXRpYWxpemVkIHdpdGggdmFsdWVzIGZyb20gYW4gZXhpc3RpbmcgdmVjdG9yXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdmVjdG9yIHRvIGNsb25lXG4gKiBAcmV0dXJucyB7dmVjNH0gYSBuZXcgNEQgdmVjdG9yXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lKGEpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDQpO1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSBhWzJdO1xuICBvdXRbM10gPSBhWzNdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHZlYzQgaW5pdGlhbGl6ZWQgd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHggWCBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFkgY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geiBaIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHcgVyBjb21wb25lbnRcbiAqIEByZXR1cm5zIHt2ZWM0fSBhIG5ldyA0RCB2ZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVZhbHVlcyh4LCB5LCB6LCB3KSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSg0KTtcbiAgb3V0WzBdID0geDtcbiAgb3V0WzFdID0geTtcbiAgb3V0WzJdID0gejtcbiAgb3V0WzNdID0gdztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ29weSB0aGUgdmFsdWVzIGZyb20gb25lIHZlYzQgdG8gYW5vdGhlclxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgc291cmNlIHZlY3RvclxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjb3B5KG91dCwgYSkge1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSBhWzJdO1xuICBvdXRbM10gPSBhWzNdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXQgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWM0IHRvIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtOdW1iZXJ9IHggWCBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFkgY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geiBaIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHcgVyBjb21wb25lbnRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0KG91dCwgeCwgeSwgeiwgdykge1xuICBvdXRbMF0gPSB4O1xuICBvdXRbMV0gPSB5O1xuICBvdXRbMl0gPSB6O1xuICBvdXRbM10gPSB3O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBBZGRzIHR3byB2ZWM0J3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGQob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gKyBiWzBdO1xuICBvdXRbMV0gPSBhWzFdICsgYlsxXTtcbiAgb3V0WzJdID0gYVsyXSArIGJbMl07XG4gIG91dFszXSA9IGFbM10gKyBiWzNdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTdWJ0cmFjdHMgdmVjdG9yIGIgZnJvbSB2ZWN0b3IgYVxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN1YnRyYWN0KG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdIC0gYlswXTtcbiAgb3V0WzFdID0gYVsxXSAtIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gLSBiWzJdO1xuICBvdXRbM10gPSBhWzNdIC0gYlszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTXVsdGlwbGllcyB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHkob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gKiBiWzBdO1xuICBvdXRbMV0gPSBhWzFdICogYlsxXTtcbiAgb3V0WzJdID0gYVsyXSAqIGJbMl07XG4gIG91dFszXSA9IGFbM10gKiBiWzNdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBEaXZpZGVzIHR3byB2ZWM0J3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBkaXZpZGUob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gLyBiWzBdO1xuICBvdXRbMV0gPSBhWzFdIC8gYlsxXTtcbiAgb3V0WzJdID0gYVsyXSAvIGJbMl07XG4gIG91dFszXSA9IGFbM10gLyBiWzNdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBNYXRoLmNlaWwgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWM0XG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHZlY3RvciB0byBjZWlsXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNlaWwob3V0LCBhKSB7XG4gIG91dFswXSA9IE1hdGguY2VpbChhWzBdKTtcbiAgb3V0WzFdID0gTWF0aC5jZWlsKGFbMV0pO1xuICBvdXRbMl0gPSBNYXRoLmNlaWwoYVsyXSk7XG4gIG91dFszXSA9IE1hdGguY2VpbChhWzNdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTWF0aC5mbG9vciB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzRcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdmVjdG9yIHRvIGZsb29yXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZsb29yKG91dCwgYSkge1xuICBvdXRbMF0gPSBNYXRoLmZsb29yKGFbMF0pO1xuICBvdXRbMV0gPSBNYXRoLmZsb29yKGFbMV0pO1xuICBvdXRbMl0gPSBNYXRoLmZsb29yKGFbMl0pO1xuICBvdXRbM10gPSBNYXRoLmZsb29yKGFbM10pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtaW5pbXVtIG9mIHR3byB2ZWM0J3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtaW4ob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IE1hdGgubWluKGFbMF0sIGJbMF0pO1xuICBvdXRbMV0gPSBNYXRoLm1pbihhWzFdLCBiWzFdKTtcbiAgb3V0WzJdID0gTWF0aC5taW4oYVsyXSwgYlsyXSk7XG4gIG91dFszXSA9IE1hdGgubWluKGFbM10sIGJbM10pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtYXhpbXVtIG9mIHR3byB2ZWM0J3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtYXgob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IE1hdGgubWF4KGFbMF0sIGJbMF0pO1xuICBvdXRbMV0gPSBNYXRoLm1heChhWzFdLCBiWzFdKTtcbiAgb3V0WzJdID0gTWF0aC5tYXgoYVsyXSwgYlsyXSk7XG4gIG91dFszXSA9IE1hdGgubWF4KGFbM10sIGJbM10pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBNYXRoLnJvdW5kIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjNFxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB2ZWN0b3IgdG8gcm91bmRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm91bmQob3V0LCBhKSB7XG4gIG91dFswXSA9IE1hdGgucm91bmQoYVswXSk7XG4gIG91dFsxXSA9IE1hdGgucm91bmQoYVsxXSk7XG4gIG91dFsyXSA9IE1hdGgucm91bmQoYVsyXSk7XG4gIG91dFszXSA9IE1hdGgucm91bmQoYVszXSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNjYWxlcyBhIHZlYzQgYnkgYSBzY2FsYXIgbnVtYmVyXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSB2ZWN0b3IgdG8gc2NhbGVcbiAqIEBwYXJhbSB7TnVtYmVyfSBiIGFtb3VudCB0byBzY2FsZSB0aGUgdmVjdG9yIGJ5XG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICogYjtcbiAgb3V0WzFdID0gYVsxXSAqIGI7XG4gIG91dFsyXSA9IGFbMl0gKiBiO1xuICBvdXRbM10gPSBhWzNdICogYjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQWRkcyB0d28gdmVjNCdzIGFmdGVyIHNjYWxpbmcgdGhlIHNlY29uZCBvcGVyYW5kIGJ5IGEgc2NhbGFyIHZhbHVlXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSBzY2FsZSB0aGUgYW1vdW50IHRvIHNjYWxlIGIgYnkgYmVmb3JlIGFkZGluZ1xuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZUFuZEFkZChvdXQsIGEsIGIsIHNjYWxlKSB7XG4gIG91dFswXSA9IGFbMF0gKyBiWzBdICogc2NhbGU7XG4gIG91dFsxXSA9IGFbMV0gKyBiWzFdICogc2NhbGU7XG4gIG91dFsyXSA9IGFbMl0gKyBiWzJdICogc2NhbGU7XG4gIG91dFszXSA9IGFbM10gKyBiWzNdICogc2NhbGU7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGV1Y2xpZGlhbiBkaXN0YW5jZSBiZXR3ZWVuIHR3byB2ZWM0J3NcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZGlzdGFuY2UoYSwgYikge1xuICB2YXIgeCA9IGJbMF0gLSBhWzBdO1xuICB2YXIgeSA9IGJbMV0gLSBhWzFdO1xuICB2YXIgeiA9IGJbMl0gLSBhWzJdO1xuICB2YXIgdyA9IGJbM10gLSBhWzNdO1xuICByZXR1cm4gTWF0aC5oeXBvdCh4LCB5LCB6LCB3KTtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgc3F1YXJlZCBldWNsaWRpYW4gZGlzdGFuY2UgYmV0d2VlbiB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gc3F1YXJlZCBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZERpc3RhbmNlKGEsIGIpIHtcbiAgdmFyIHggPSBiWzBdIC0gYVswXTtcbiAgdmFyIHkgPSBiWzFdIC0gYVsxXTtcbiAgdmFyIHogPSBiWzJdIC0gYVsyXTtcbiAgdmFyIHcgPSBiWzNdIC0gYVszXTtcbiAgcmV0dXJuIHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBsZW5ndGggb2YgYSB2ZWM0XG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdmVjdG9yIHRvIGNhbGN1bGF0ZSBsZW5ndGggb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGxlbmd0aCBvZiBhXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxlbmd0aChhKSB7XG4gIHZhciB4ID0gYVswXTtcbiAgdmFyIHkgPSBhWzFdO1xuICB2YXIgeiA9IGFbMl07XG4gIHZhciB3ID0gYVszXTtcbiAgcmV0dXJuIE1hdGguaHlwb3QoeCwgeSwgeiwgdyk7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHNxdWFyZWQgbGVuZ3RoIG9mIGEgdmVjNFxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHZlY3RvciB0byBjYWxjdWxhdGUgc3F1YXJlZCBsZW5ndGggb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHNxdWFyZWQgbGVuZ3RoIG9mIGFcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZExlbmd0aChhKSB7XG4gIHZhciB4ID0gYVswXTtcbiAgdmFyIHkgPSBhWzFdO1xuICB2YXIgeiA9IGFbMl07XG4gIHZhciB3ID0gYVszXTtcbiAgcmV0dXJuIHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3O1xufVxuLyoqXG4gKiBOZWdhdGVzIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjNFxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB2ZWN0b3IgdG8gbmVnYXRlXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG5lZ2F0ZShvdXQsIGEpIHtcbiAgb3V0WzBdID0gLWFbMF07XG4gIG91dFsxXSA9IC1hWzFdO1xuICBvdXRbMl0gPSAtYVsyXTtcbiAgb3V0WzNdID0gLWFbM107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGludmVyc2Ugb2YgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWM0XG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHZlY3RvciB0byBpbnZlcnRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaW52ZXJzZShvdXQsIGEpIHtcbiAgb3V0WzBdID0gMS4wIC8gYVswXTtcbiAgb3V0WzFdID0gMS4wIC8gYVsxXTtcbiAgb3V0WzJdID0gMS4wIC8gYVsyXTtcbiAgb3V0WzNdID0gMS4wIC8gYVszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTm9ybWFsaXplIGEgdmVjNFxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB2ZWN0b3IgdG8gbm9ybWFsaXplXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZShvdXQsIGEpIHtcbiAgdmFyIHggPSBhWzBdO1xuICB2YXIgeSA9IGFbMV07XG4gIHZhciB6ID0gYVsyXTtcbiAgdmFyIHcgPSBhWzNdO1xuICB2YXIgbGVuID0geCAqIHggKyB5ICogeSArIHogKiB6ICsgdyAqIHc7XG5cbiAgaWYgKGxlbiA+IDApIHtcbiAgICBsZW4gPSAxIC8gTWF0aC5zcXJ0KGxlbik7XG4gIH1cblxuICBvdXRbMF0gPSB4ICogbGVuO1xuICBvdXRbMV0gPSB5ICogbGVuO1xuICBvdXRbMl0gPSB6ICogbGVuO1xuICBvdXRbM10gPSB3ICogbGVuO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkb3QgcHJvZHVjdCBvZiB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gZG90IHByb2R1Y3Qgb2YgYSBhbmQgYlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBkb3QoYSwgYikge1xuICByZXR1cm4gYVswXSAqIGJbMF0gKyBhWzFdICogYlsxXSArIGFbMl0gKiBiWzJdICsgYVszXSAqIGJbM107XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGNyb3NzLXByb2R1Y3Qgb2YgdGhyZWUgdmVjdG9ycyBpbiBhIDQtZGltZW5zaW9uYWwgc3BhY2VcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gcmVzdWx0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gVSB0aGUgZmlyc3QgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gViB0aGUgc2Vjb25kIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IFcgdGhlIHRoaXJkIHZlY3RvclxuICogQHJldHVybnMge3ZlYzR9IHJlc3VsdFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjcm9zcyhvdXQsIHUsIHYsIHcpIHtcbiAgdmFyIEEgPSB2WzBdICogd1sxXSAtIHZbMV0gKiB3WzBdLFxuICAgICAgQiA9IHZbMF0gKiB3WzJdIC0gdlsyXSAqIHdbMF0sXG4gICAgICBDID0gdlswXSAqIHdbM10gLSB2WzNdICogd1swXSxcbiAgICAgIEQgPSB2WzFdICogd1syXSAtIHZbMl0gKiB3WzFdLFxuICAgICAgRSA9IHZbMV0gKiB3WzNdIC0gdlszXSAqIHdbMV0sXG4gICAgICBGID0gdlsyXSAqIHdbM10gLSB2WzNdICogd1syXTtcbiAgdmFyIEcgPSB1WzBdO1xuICB2YXIgSCA9IHVbMV07XG4gIHZhciBJID0gdVsyXTtcbiAgdmFyIEogPSB1WzNdO1xuICBvdXRbMF0gPSBIICogRiAtIEkgKiBFICsgSiAqIEQ7XG4gIG91dFsxXSA9IC0oRyAqIEYpICsgSSAqIEMgLSBKICogQjtcbiAgb3V0WzJdID0gRyAqIEUgLSBIICogQyArIEogKiBBO1xuICBvdXRbM10gPSAtKEcgKiBEKSArIEggKiBCIC0gSSAqIEE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFBlcmZvcm1zIGEgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50LCBpbiB0aGUgcmFuZ2UgWzAtMV0sIGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGVycChvdXQsIGEsIGIsIHQpIHtcbiAgdmFyIGF4ID0gYVswXTtcbiAgdmFyIGF5ID0gYVsxXTtcbiAgdmFyIGF6ID0gYVsyXTtcbiAgdmFyIGF3ID0gYVszXTtcbiAgb3V0WzBdID0gYXggKyB0ICogKGJbMF0gLSBheCk7XG4gIG91dFsxXSA9IGF5ICsgdCAqIChiWzFdIC0gYXkpO1xuICBvdXRbMl0gPSBheiArIHQgKiAoYlsyXSAtIGF6KTtcbiAgb3V0WzNdID0gYXcgKyB0ICogKGJbM10gLSBhdyk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhIHJhbmRvbSB2ZWN0b3Igd2l0aCB0aGUgZ2l2ZW4gc2NhbGVcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtOdW1iZXJ9IFtzY2FsZV0gTGVuZ3RoIG9mIHRoZSByZXN1bHRpbmcgdmVjdG9yLiBJZiBvbW1pdHRlZCwgYSB1bml0IHZlY3RvciB3aWxsIGJlIHJldHVybmVkXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJhbmRvbShvdXQsIHNjYWxlKSB7XG4gIHNjYWxlID0gc2NhbGUgfHwgMS4wOyAvLyBNYXJzYWdsaWEsIEdlb3JnZS4gQ2hvb3NpbmcgYSBQb2ludCBmcm9tIHRoZSBTdXJmYWNlIG9mIGFcbiAgLy8gU3BoZXJlLiBBbm4uIE1hdGguIFN0YXRpc3QuIDQzICgxOTcyKSwgbm8uIDIsIDY0NS0tNjQ2LlxuICAvLyBodHRwOi8vcHJvamVjdGV1Y2xpZC5vcmcvZXVjbGlkLmFvbXMvMTE3NzY5MjY0NDtcblxuICB2YXIgdjEsIHYyLCB2MywgdjQ7XG4gIHZhciBzMSwgczI7XG5cbiAgZG8ge1xuICAgIHYxID0gZ2xNYXRyaXguUkFORE9NKCkgKiAyIC0gMTtcbiAgICB2MiA9IGdsTWF0cml4LlJBTkRPTSgpICogMiAtIDE7XG4gICAgczEgPSB2MSAqIHYxICsgdjIgKiB2MjtcbiAgfSB3aGlsZSAoczEgPj0gMSk7XG5cbiAgZG8ge1xuICAgIHYzID0gZ2xNYXRyaXguUkFORE9NKCkgKiAyIC0gMTtcbiAgICB2NCA9IGdsTWF0cml4LlJBTkRPTSgpICogMiAtIDE7XG4gICAgczIgPSB2MyAqIHYzICsgdjQgKiB2NDtcbiAgfSB3aGlsZSAoczIgPj0gMSk7XG5cbiAgdmFyIGQgPSBNYXRoLnNxcnQoKDEgLSBzMSkgLyBzMik7XG4gIG91dFswXSA9IHNjYWxlICogdjE7XG4gIG91dFsxXSA9IHNjYWxlICogdjI7XG4gIG91dFsyXSA9IHNjYWxlICogdjMgKiBkO1xuICBvdXRbM10gPSBzY2FsZSAqIHY0ICogZDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgdmVjNCB3aXRoIGEgbWF0NC5cbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIHZlY3RvciB0byB0cmFuc2Zvcm1cbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBtIG1hdHJpeCB0byB0cmFuc2Zvcm0gd2l0aFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1NYXQ0KG91dCwgYSwgbSkge1xuICB2YXIgeCA9IGFbMF0sXG4gICAgICB5ID0gYVsxXSxcbiAgICAgIHogPSBhWzJdLFxuICAgICAgdyA9IGFbM107XG4gIG91dFswXSA9IG1bMF0gKiB4ICsgbVs0XSAqIHkgKyBtWzhdICogeiArIG1bMTJdICogdztcbiAgb3V0WzFdID0gbVsxXSAqIHggKyBtWzVdICogeSArIG1bOV0gKiB6ICsgbVsxM10gKiB3O1xuICBvdXRbMl0gPSBtWzJdICogeCArIG1bNl0gKiB5ICsgbVsxMF0gKiB6ICsgbVsxNF0gKiB3O1xuICBvdXRbM10gPSBtWzNdICogeCArIG1bN10gKiB5ICsgbVsxMV0gKiB6ICsgbVsxNV0gKiB3O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSB2ZWM0IHdpdGggYSBxdWF0XG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSB2ZWN0b3IgdG8gdHJhbnNmb3JtXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gcSBxdWF0ZXJuaW9uIHRvIHRyYW5zZm9ybSB3aXRoXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybVF1YXQob3V0LCBhLCBxKSB7XG4gIHZhciB4ID0gYVswXSxcbiAgICAgIHkgPSBhWzFdLFxuICAgICAgeiA9IGFbMl07XG4gIHZhciBxeCA9IHFbMF0sXG4gICAgICBxeSA9IHFbMV0sXG4gICAgICBxeiA9IHFbMl0sXG4gICAgICBxdyA9IHFbM107IC8vIGNhbGN1bGF0ZSBxdWF0ICogdmVjXG5cbiAgdmFyIGl4ID0gcXcgKiB4ICsgcXkgKiB6IC0gcXogKiB5O1xuICB2YXIgaXkgPSBxdyAqIHkgKyBxeiAqIHggLSBxeCAqIHo7XG4gIHZhciBpeiA9IHF3ICogeiArIHF4ICogeSAtIHF5ICogeDtcbiAgdmFyIGl3ID0gLXF4ICogeCAtIHF5ICogeSAtIHF6ICogejsgLy8gY2FsY3VsYXRlIHJlc3VsdCAqIGludmVyc2UgcXVhdFxuXG4gIG91dFswXSA9IGl4ICogcXcgKyBpdyAqIC1xeCArIGl5ICogLXF6IC0gaXogKiAtcXk7XG4gIG91dFsxXSA9IGl5ICogcXcgKyBpdyAqIC1xeSArIGl6ICogLXF4IC0gaXggKiAtcXo7XG4gIG91dFsyXSA9IGl6ICogcXcgKyBpdyAqIC1xeiArIGl4ICogLXF5IC0gaXkgKiAtcXg7XG4gIG91dFszXSA9IGFbM107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNldCB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzQgdG8gemVyb1xuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHplcm8ob3V0KSB7XG4gIG91dFswXSA9IDAuMDtcbiAgb3V0WzFdID0gMC4wO1xuICBvdXRbMl0gPSAwLjA7XG4gIG91dFszXSA9IDAuMDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIHZlY3RvclxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHZlY3RvciB0byByZXByZXNlbnQgYXMgYSBzdHJpbmdcbiAqIEByZXR1cm5zIHtTdHJpbmd9IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgdmVjdG9yXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cihhKSB7XG4gIHJldHVybiBcInZlYzQoXCIgKyBhWzBdICsgXCIsIFwiICsgYVsxXSArIFwiLCBcIiArIGFbMl0gKyBcIiwgXCIgKyBhWzNdICsgXCIpXCI7XG59XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHZlY3RvcnMgaGF2ZSBleGFjdGx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uICh3aGVuIGNvbXBhcmVkIHdpdGggPT09KVxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIFRoZSBmaXJzdCB2ZWN0b3IuXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiBUaGUgc2Vjb25kIHZlY3Rvci5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSB2ZWN0b3JzIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBleGFjdEVxdWFscyhhLCBiKSB7XG4gIHJldHVybiBhWzBdID09PSBiWzBdICYmIGFbMV0gPT09IGJbMV0gJiYgYVsyXSA9PT0gYlsyXSAmJiBhWzNdID09PSBiWzNdO1xufVxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSB2ZWN0b3JzIGhhdmUgYXBwcm94aW1hdGVseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSBUaGUgZmlyc3QgdmVjdG9yLlxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgVGhlIHNlY29uZCB2ZWN0b3IuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmVjdG9ycyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGEsIGIpIHtcbiAgdmFyIGEwID0gYVswXSxcbiAgICAgIGExID0gYVsxXSxcbiAgICAgIGEyID0gYVsyXSxcbiAgICAgIGEzID0gYVszXTtcbiAgdmFyIGIwID0gYlswXSxcbiAgICAgIGIxID0gYlsxXSxcbiAgICAgIGIyID0gYlsyXSxcbiAgICAgIGIzID0gYlszXTtcbiAgcmV0dXJuIE1hdGguYWJzKGEwIC0gYjApIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEwKSwgTWF0aC5hYnMoYjApKSAmJiBNYXRoLmFicyhhMSAtIGIxKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMSksIE1hdGguYWJzKGIxKSkgJiYgTWF0aC5hYnMoYTIgLSBiMikgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTIpLCBNYXRoLmFicyhiMikpICYmIE1hdGguYWJzKGEzIC0gYjMpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEzKSwgTWF0aC5hYnMoYjMpKTtcbn1cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0LnN1YnRyYWN0fVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzdWIgPSBzdWJ0cmFjdDtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0Lm11bHRpcGx5fVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBtdWwgPSBtdWx0aXBseTtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0LmRpdmlkZX1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgZGl2ID0gZGl2aWRlO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzQuZGlzdGFuY2V9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGRpc3QgPSBkaXN0YW5jZTtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0LnNxdWFyZWREaXN0YW5jZX1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc3FyRGlzdCA9IHNxdWFyZWREaXN0YW5jZTtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0Lmxlbmd0aH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbGVuID0gbGVuZ3RoO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzQuc3F1YXJlZExlbmd0aH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc3FyTGVuID0gc3F1YXJlZExlbmd0aDtcbi8qKlxuICogUGVyZm9ybSBzb21lIG9wZXJhdGlvbiBvdmVyIGFuIGFycmF5IG9mIHZlYzRzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGEgdGhlIGFycmF5IG9mIHZlY3RvcnMgdG8gaXRlcmF0ZSBvdmVyXG4gKiBAcGFyYW0ge051bWJlcn0gc3RyaWRlIE51bWJlciBvZiBlbGVtZW50cyBiZXR3ZWVuIHRoZSBzdGFydCBvZiBlYWNoIHZlYzQuIElmIDAgYXNzdW1lcyB0aWdodGx5IHBhY2tlZFxuICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCBOdW1iZXIgb2YgZWxlbWVudHMgdG8gc2tpcCBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcnJheVxuICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IE51bWJlciBvZiB2ZWM0cyB0byBpdGVyYXRlIG92ZXIuIElmIDAgaXRlcmF0ZXMgb3ZlciBlbnRpcmUgYXJyYXlcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggdmVjdG9yIGluIHRoZSBhcnJheVxuICogQHBhcmFtIHtPYmplY3R9IFthcmddIGFkZGl0aW9uYWwgYXJndW1lbnQgdG8gcGFzcyB0byBmblxuICogQHJldHVybnMge0FycmF5fSBhXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGZvckVhY2ggPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB2ZWMgPSBjcmVhdGUoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChhLCBzdHJpZGUsIG9mZnNldCwgY291bnQsIGZuLCBhcmcpIHtcbiAgICB2YXIgaSwgbDtcblxuICAgIGlmICghc3RyaWRlKSB7XG4gICAgICBzdHJpZGUgPSA0O1xuICAgIH1cblxuICAgIGlmICghb2Zmc2V0KSB7XG4gICAgICBvZmZzZXQgPSAwO1xuICAgIH1cblxuICAgIGlmIChjb3VudCkge1xuICAgICAgbCA9IE1hdGgubWluKGNvdW50ICogc3RyaWRlICsgb2Zmc2V0LCBhLmxlbmd0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGwgPSBhLmxlbmd0aDtcbiAgICB9XG5cbiAgICBmb3IgKGkgPSBvZmZzZXQ7IGkgPCBsOyBpICs9IHN0cmlkZSkge1xuICAgICAgdmVjWzBdID0gYVtpXTtcbiAgICAgIHZlY1sxXSA9IGFbaSArIDFdO1xuICAgICAgdmVjWzJdID0gYVtpICsgMl07XG4gICAgICB2ZWNbM10gPSBhW2kgKyAzXTtcbiAgICAgIGZuKHZlYywgdmVjLCBhcmcpO1xuICAgICAgYVtpXSA9IHZlY1swXTtcbiAgICAgIGFbaSArIDFdID0gdmVjWzFdO1xuICAgICAgYVtpICsgMl0gPSB2ZWNbMl07XG4gICAgICBhW2kgKyAzXSA9IHZlY1szXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYTtcbiAgfTtcbn0oKTsiLCAiaW1wb3J0ICogYXMgZ2xNYXRyaXggZnJvbSBcIi4vY29tbW9uLmpzXCI7XG5pbXBvcnQgKiBhcyBxdWF0IGZyb20gXCIuL3F1YXQuanNcIjtcbmltcG9ydCAqIGFzIG1hdDQgZnJvbSBcIi4vbWF0NC5qc1wiO1xuLyoqXG4gKiBEdWFsIFF1YXRlcm5pb248YnI+XG4gKiBGb3JtYXQ6IFtyZWFsLCBkdWFsXTxicj5cbiAqIFF1YXRlcm5pb24gZm9ybWF0OiBYWVpXPGJyPlxuICogTWFrZSBzdXJlIHRvIGhhdmUgbm9ybWFsaXplZCBkdWFsIHF1YXRlcm5pb25zLCBvdGhlcndpc2UgdGhlIGZ1bmN0aW9ucyBtYXkgbm90IHdvcmsgYXMgaW50ZW5kZWQuPGJyPlxuICogQG1vZHVsZSBxdWF0MlxuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBpZGVudGl0eSBkdWFsIHF1YXRcbiAqXG4gKiBAcmV0dXJucyB7cXVhdDJ9IGEgbmV3IGR1YWwgcXVhdGVybmlvbiBbcmVhbCAtPiByb3RhdGlvbiwgZHVhbCAtPiB0cmFuc2xhdGlvbl1cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKCkge1xuICB2YXIgZHEgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSg4KTtcblxuICBpZiAoZ2xNYXRyaXguQVJSQVlfVFlQRSAhPSBGbG9hdDMyQXJyYXkpIHtcbiAgICBkcVswXSA9IDA7XG4gICAgZHFbMV0gPSAwO1xuICAgIGRxWzJdID0gMDtcbiAgICBkcVs0XSA9IDA7XG4gICAgZHFbNV0gPSAwO1xuICAgIGRxWzZdID0gMDtcbiAgICBkcVs3XSA9IDA7XG4gIH1cblxuICBkcVszXSA9IDE7XG4gIHJldHVybiBkcTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBxdWF0IGluaXRpYWxpemVkIHdpdGggdmFsdWVzIGZyb20gYW4gZXhpc3RpbmcgcXVhdGVybmlvblxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSBkdWFsIHF1YXRlcm5pb24gdG8gY2xvbmVcbiAqIEByZXR1cm5zIHtxdWF0Mn0gbmV3IGR1YWwgcXVhdGVybmlvblxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lKGEpIHtcbiAgdmFyIGRxID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoOCk7XG4gIGRxWzBdID0gYVswXTtcbiAgZHFbMV0gPSBhWzFdO1xuICBkcVsyXSA9IGFbMl07XG4gIGRxWzNdID0gYVszXTtcbiAgZHFbNF0gPSBhWzRdO1xuICBkcVs1XSA9IGFbNV07XG4gIGRxWzZdID0gYVs2XTtcbiAgZHFbN10gPSBhWzddO1xuICByZXR1cm4gZHE7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgZHVhbCBxdWF0IGluaXRpYWxpemVkIHdpdGggdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB4MSBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkxIFkgY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gejEgWiBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB3MSBXIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHgyIFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geTIgWSBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB6MiBaIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHcyIFcgY29tcG9uZW50XG4gKiBAcmV0dXJucyB7cXVhdDJ9IG5ldyBkdWFsIHF1YXRlcm5pb25cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVmFsdWVzKHgxLCB5MSwgejEsIHcxLCB4MiwgeTIsIHoyLCB3Mikge1xuICB2YXIgZHEgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSg4KTtcbiAgZHFbMF0gPSB4MTtcbiAgZHFbMV0gPSB5MTtcbiAgZHFbMl0gPSB6MTtcbiAgZHFbM10gPSB3MTtcbiAgZHFbNF0gPSB4MjtcbiAgZHFbNV0gPSB5MjtcbiAgZHFbNl0gPSB6MjtcbiAgZHFbN10gPSB3MjtcbiAgcmV0dXJuIGRxO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGR1YWwgcXVhdCBmcm9tIHRoZSBnaXZlbiB2YWx1ZXMgKHF1YXQgYW5kIHRyYW5zbGF0aW9uKVxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB4MSBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkxIFkgY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gejEgWiBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB3MSBXIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHgyIFggY29tcG9uZW50ICh0cmFuc2xhdGlvbilcbiAqIEBwYXJhbSB7TnVtYmVyfSB5MiBZIGNvbXBvbmVudCAodHJhbnNsYXRpb24pXG4gKiBAcGFyYW0ge051bWJlcn0gejIgWiBjb21wb25lbnQgKHRyYW5zbGF0aW9uKVxuICogQHJldHVybnMge3F1YXQyfSBuZXcgZHVhbCBxdWF0ZXJuaW9uXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVJvdGF0aW9uVHJhbnNsYXRpb25WYWx1ZXMoeDEsIHkxLCB6MSwgdzEsIHgyLCB5MiwgejIpIHtcbiAgdmFyIGRxID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoOCk7XG4gIGRxWzBdID0geDE7XG4gIGRxWzFdID0geTE7XG4gIGRxWzJdID0gejE7XG4gIGRxWzNdID0gdzE7XG4gIHZhciBheCA9IHgyICogMC41LFxuICAgICAgYXkgPSB5MiAqIDAuNSxcbiAgICAgIGF6ID0gejIgKiAwLjU7XG4gIGRxWzRdID0gYXggKiB3MSArIGF5ICogejEgLSBheiAqIHkxO1xuICBkcVs1XSA9IGF5ICogdzEgKyBheiAqIHgxIC0gYXggKiB6MTtcbiAgZHFbNl0gPSBheiAqIHcxICsgYXggKiB5MSAtIGF5ICogeDE7XG4gIGRxWzddID0gLWF4ICogeDEgLSBheSAqIHkxIC0gYXogKiB6MTtcbiAgcmV0dXJuIGRxO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgZHVhbCBxdWF0IGZyb20gYSBxdWF0ZXJuaW9uIGFuZCBhIHRyYW5zbGF0aW9uXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBkdWFsIHF1YXRlcm5pb24gcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBxIGEgbm9ybWFsaXplZCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdCB0cmFubGF0aW9uIHZlY3RvclxuICogQHJldHVybnMge3F1YXQyfSBkdWFsIHF1YXRlcm5pb24gcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUm90YXRpb25UcmFuc2xhdGlvbihvdXQsIHEsIHQpIHtcbiAgdmFyIGF4ID0gdFswXSAqIDAuNSxcbiAgICAgIGF5ID0gdFsxXSAqIDAuNSxcbiAgICAgIGF6ID0gdFsyXSAqIDAuNSxcbiAgICAgIGJ4ID0gcVswXSxcbiAgICAgIGJ5ID0gcVsxXSxcbiAgICAgIGJ6ID0gcVsyXSxcbiAgICAgIGJ3ID0gcVszXTtcbiAgb3V0WzBdID0gYng7XG4gIG91dFsxXSA9IGJ5O1xuICBvdXRbMl0gPSBiejtcbiAgb3V0WzNdID0gYnc7XG4gIG91dFs0XSA9IGF4ICogYncgKyBheSAqIGJ6IC0gYXogKiBieTtcbiAgb3V0WzVdID0gYXkgKiBidyArIGF6ICogYnggLSBheCAqIGJ6O1xuICBvdXRbNl0gPSBheiAqIGJ3ICsgYXggKiBieSAtIGF5ICogYng7XG4gIG91dFs3XSA9IC1heCAqIGJ4IC0gYXkgKiBieSAtIGF6ICogYno7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBkdWFsIHF1YXQgZnJvbSBhIHRyYW5zbGF0aW9uXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBkdWFsIHF1YXRlcm5pb24gcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSB0IHRyYW5zbGF0aW9uIHZlY3RvclxuICogQHJldHVybnMge3F1YXQyfSBkdWFsIHF1YXRlcm5pb24gcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVHJhbnNsYXRpb24ob3V0LCB0KSB7XG4gIG91dFswXSA9IDA7XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDE7XG4gIG91dFs0XSA9IHRbMF0gKiAwLjU7XG4gIG91dFs1XSA9IHRbMV0gKiAwLjU7XG4gIG91dFs2XSA9IHRbMl0gKiAwLjU7XG4gIG91dFs3XSA9IDA7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBkdWFsIHF1YXQgZnJvbSBhIHF1YXRlcm5pb25cbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGR1YWwgcXVhdGVybmlvbiByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IHEgdGhlIHF1YXRlcm5pb25cbiAqIEByZXR1cm5zIHtxdWF0Mn0gZHVhbCBxdWF0ZXJuaW9uIHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVJvdGF0aW9uKG91dCwgcSkge1xuICBvdXRbMF0gPSBxWzBdO1xuICBvdXRbMV0gPSBxWzFdO1xuICBvdXRbMl0gPSBxWzJdO1xuICBvdXRbM10gPSBxWzNdO1xuICBvdXRbNF0gPSAwO1xuICBvdXRbNV0gPSAwO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGR1YWwgcXVhdCBmcm9tIGEgbWF0cml4ICg0eDQpXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSBkdWFsIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBtYXRyaXhcbiAqIEByZXR1cm5zIHtxdWF0Mn0gZHVhbCBxdWF0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbU1hdDQob3V0LCBhKSB7XG4gIC8vVE9ETyBPcHRpbWl6ZSB0aGlzXG4gIHZhciBvdXRlciA9IHF1YXQuY3JlYXRlKCk7XG4gIG1hdDQuZ2V0Um90YXRpb24ob3V0ZXIsIGEpO1xuICB2YXIgdCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDMpO1xuICBtYXQ0LmdldFRyYW5zbGF0aW9uKHQsIGEpO1xuICBmcm9tUm90YXRpb25UcmFuc2xhdGlvbihvdXQsIG91dGVyLCB0KTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ29weSB0aGUgdmFsdWVzIGZyb20gb25lIGR1YWwgcXVhdCB0byBhbm90aGVyXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgZHVhbCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgdGhlIHNvdXJjZSBkdWFsIHF1YXRlcm5pb25cbiAqIEByZXR1cm5zIHtxdWF0Mn0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY29weShvdXQsIGEpIHtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgb3V0WzNdID0gYVszXTtcbiAgb3V0WzRdID0gYVs0XTtcbiAgb3V0WzVdID0gYVs1XTtcbiAgb3V0WzZdID0gYVs2XTtcbiAgb3V0WzddID0gYVs3XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2V0IGEgZHVhbCBxdWF0IHRvIHRoZSBpZGVudGl0eSBkdWFsIHF1YXRlcm5pb25cbiAqXG4gKiBAcGFyYW0ge3F1YXQyfSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpZGVudGl0eShvdXQpIHtcbiAgb3V0WzBdID0gMDtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMTtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gMDtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2V0IHRoZSBjb21wb25lbnRzIG9mIGEgZHVhbCBxdWF0IHRvIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge3F1YXQyfSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge051bWJlcn0geDEgWCBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB5MSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHoxIFogY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gdzEgVyBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB4MiBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkyIFkgY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gejIgWiBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB3MiBXIGNvbXBvbmVudFxuICogQHJldHVybnMge3F1YXQyfSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXQob3V0LCB4MSwgeTEsIHoxLCB3MSwgeDIsIHkyLCB6MiwgdzIpIHtcbiAgb3V0WzBdID0geDE7XG4gIG91dFsxXSA9IHkxO1xuICBvdXRbMl0gPSB6MTtcbiAgb3V0WzNdID0gdzE7XG4gIG91dFs0XSA9IHgyO1xuICBvdXRbNV0gPSB5MjtcbiAgb3V0WzZdID0gejI7XG4gIG91dFs3XSA9IHcyO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZXRzIHRoZSByZWFsIHBhcnQgb2YgYSBkdWFsIHF1YXRcbiAqIEBwYXJhbSAge3F1YXR9IG91dCByZWFsIHBhcnRcbiAqIEBwYXJhbSAge1JlYWRvbmx5UXVhdDJ9IGEgRHVhbCBRdWF0ZXJuaW9uXG4gKiBAcmV0dXJuIHtxdWF0fSByZWFsIHBhcnRcbiAqL1xuXG5leHBvcnQgdmFyIGdldFJlYWwgPSBxdWF0LmNvcHk7XG4vKipcbiAqIEdldHMgdGhlIGR1YWwgcGFydCBvZiBhIGR1YWwgcXVhdFxuICogQHBhcmFtICB7cXVhdH0gb3V0IGR1YWwgcGFydFxuICogQHBhcmFtICB7UmVhZG9ubHlRdWF0Mn0gYSBEdWFsIFF1YXRlcm5pb25cbiAqIEByZXR1cm4ge3F1YXR9IGR1YWwgcGFydFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREdWFsKG91dCwgYSkge1xuICBvdXRbMF0gPSBhWzRdO1xuICBvdXRbMV0gPSBhWzVdO1xuICBvdXRbMl0gPSBhWzZdO1xuICBvdXRbM10gPSBhWzddO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXQgdGhlIHJlYWwgY29tcG9uZW50IG9mIGEgZHVhbCBxdWF0IHRvIHRoZSBnaXZlbiBxdWF0ZXJuaW9uXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IHEgYSBxdWF0ZXJuaW9uIHJlcHJlc2VudGluZyB0aGUgcmVhbCBwYXJ0XG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzZXRSZWFsID0gcXVhdC5jb3B5O1xuLyoqXG4gKiBTZXQgdGhlIGR1YWwgY29tcG9uZW50IG9mIGEgZHVhbCBxdWF0IHRvIHRoZSBnaXZlbiBxdWF0ZXJuaW9uXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IHEgYSBxdWF0ZXJuaW9uIHJlcHJlc2VudGluZyB0aGUgZHVhbCBwYXJ0XG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNldER1YWwob3V0LCBxKSB7XG4gIG91dFs0XSA9IHFbMF07XG4gIG91dFs1XSA9IHFbMV07XG4gIG91dFs2XSA9IHFbMl07XG4gIG91dFs3XSA9IHFbM107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdldHMgdGhlIHRyYW5zbGF0aW9uIG9mIGEgbm9ybWFsaXplZCBkdWFsIHF1YXRcbiAqIEBwYXJhbSAge3ZlYzN9IG91dCB0cmFuc2xhdGlvblxuICogQHBhcmFtICB7UmVhZG9ubHlRdWF0Mn0gYSBEdWFsIFF1YXRlcm5pb24gdG8gYmUgZGVjb21wb3NlZFxuICogQHJldHVybiB7dmVjM30gdHJhbnNsYXRpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNsYXRpb24ob3V0LCBhKSB7XG4gIHZhciBheCA9IGFbNF0sXG4gICAgICBheSA9IGFbNV0sXG4gICAgICBheiA9IGFbNl0sXG4gICAgICBhdyA9IGFbN10sXG4gICAgICBieCA9IC1hWzBdLFxuICAgICAgYnkgPSAtYVsxXSxcbiAgICAgIGJ6ID0gLWFbMl0sXG4gICAgICBidyA9IGFbM107XG4gIG91dFswXSA9IChheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5KSAqIDI7XG4gIG91dFsxXSA9IChheSAqIGJ3ICsgYXcgKiBieSArIGF6ICogYnggLSBheCAqIGJ6KSAqIDI7XG4gIG91dFsyXSA9IChheiAqIGJ3ICsgYXcgKiBieiArIGF4ICogYnkgLSBheSAqIGJ4KSAqIDI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFRyYW5zbGF0ZXMgYSBkdWFsIHF1YXQgYnkgdGhlIGdpdmVuIHZlY3RvclxuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIGR1YWwgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIHRoZSBkdWFsIHF1YXRlcm5pb24gdG8gdHJhbnNsYXRlXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdiB2ZWN0b3IgdG8gdHJhbnNsYXRlIGJ5XG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2xhdGUob3V0LCBhLCB2KSB7XG4gIHZhciBheDEgPSBhWzBdLFxuICAgICAgYXkxID0gYVsxXSxcbiAgICAgIGF6MSA9IGFbMl0sXG4gICAgICBhdzEgPSBhWzNdLFxuICAgICAgYngxID0gdlswXSAqIDAuNSxcbiAgICAgIGJ5MSA9IHZbMV0gKiAwLjUsXG4gICAgICBiejEgPSB2WzJdICogMC41LFxuICAgICAgYXgyID0gYVs0XSxcbiAgICAgIGF5MiA9IGFbNV0sXG4gICAgICBhejIgPSBhWzZdLFxuICAgICAgYXcyID0gYVs3XTtcbiAgb3V0WzBdID0gYXgxO1xuICBvdXRbMV0gPSBheTE7XG4gIG91dFsyXSA9IGF6MTtcbiAgb3V0WzNdID0gYXcxO1xuICBvdXRbNF0gPSBhdzEgKiBieDEgKyBheTEgKiBiejEgLSBhejEgKiBieTEgKyBheDI7XG4gIG91dFs1XSA9IGF3MSAqIGJ5MSArIGF6MSAqIGJ4MSAtIGF4MSAqIGJ6MSArIGF5MjtcbiAgb3V0WzZdID0gYXcxICogYnoxICsgYXgxICogYnkxIC0gYXkxICogYngxICsgYXoyO1xuICBvdXRbN10gPSAtYXgxICogYngxIC0gYXkxICogYnkxIC0gYXoxICogYnoxICsgYXcyO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGVzIGEgZHVhbCBxdWF0IGFyb3VuZCB0aGUgWCBheGlzXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgZHVhbCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgdGhlIGR1YWwgcXVhdGVybmlvbiB0byByb3RhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWQgaG93IGZhciBzaG91bGQgdGhlIHJvdGF0aW9uIGJlXG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVYKG91dCwgYSwgcmFkKSB7XG4gIHZhciBieCA9IC1hWzBdLFxuICAgICAgYnkgPSAtYVsxXSxcbiAgICAgIGJ6ID0gLWFbMl0sXG4gICAgICBidyA9IGFbM10sXG4gICAgICBheCA9IGFbNF0sXG4gICAgICBheSA9IGFbNV0sXG4gICAgICBheiA9IGFbNl0sXG4gICAgICBhdyA9IGFbN10sXG4gICAgICBheDEgPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5LFxuICAgICAgYXkxID0gYXkgKiBidyArIGF3ICogYnkgKyBheiAqIGJ4IC0gYXggKiBieixcbiAgICAgIGF6MSA9IGF6ICogYncgKyBhdyAqIGJ6ICsgYXggKiBieSAtIGF5ICogYngsXG4gICAgICBhdzEgPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6O1xuICBxdWF0LnJvdGF0ZVgob3V0LCBhLCByYWQpO1xuICBieCA9IG91dFswXTtcbiAgYnkgPSBvdXRbMV07XG4gIGJ6ID0gb3V0WzJdO1xuICBidyA9IG91dFszXTtcbiAgb3V0WzRdID0gYXgxICogYncgKyBhdzEgKiBieCArIGF5MSAqIGJ6IC0gYXoxICogYnk7XG4gIG91dFs1XSA9IGF5MSAqIGJ3ICsgYXcxICogYnkgKyBhejEgKiBieCAtIGF4MSAqIGJ6O1xuICBvdXRbNl0gPSBhejEgKiBidyArIGF3MSAqIGJ6ICsgYXgxICogYnkgLSBheTEgKiBieDtcbiAgb3V0WzddID0gYXcxICogYncgLSBheDEgKiBieCAtIGF5MSAqIGJ5IC0gYXoxICogYno7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZXMgYSBkdWFsIHF1YXQgYXJvdW5kIHRoZSBZIGF4aXNcbiAqXG4gKiBAcGFyYW0ge3F1YXQyfSBvdXQgdGhlIHJlY2VpdmluZyBkdWFsIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSB0aGUgZHVhbCBxdWF0ZXJuaW9uIHRvIHJvdGF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IHJhZCBob3cgZmFyIHNob3VsZCB0aGUgcm90YXRpb24gYmVcbiAqIEByZXR1cm5zIHtxdWF0Mn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVkob3V0LCBhLCByYWQpIHtcbiAgdmFyIGJ4ID0gLWFbMF0sXG4gICAgICBieSA9IC1hWzFdLFxuICAgICAgYnogPSAtYVsyXSxcbiAgICAgIGJ3ID0gYVszXSxcbiAgICAgIGF4ID0gYVs0XSxcbiAgICAgIGF5ID0gYVs1XSxcbiAgICAgIGF6ID0gYVs2XSxcbiAgICAgIGF3ID0gYVs3XSxcbiAgICAgIGF4MSA9IGF4ICogYncgKyBhdyAqIGJ4ICsgYXkgKiBieiAtIGF6ICogYnksXG4gICAgICBheTEgPSBheSAqIGJ3ICsgYXcgKiBieSArIGF6ICogYnggLSBheCAqIGJ6LFxuICAgICAgYXoxID0gYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieCxcbiAgICAgIGF3MSA9IGF3ICogYncgLSBheCAqIGJ4IC0gYXkgKiBieSAtIGF6ICogYno7XG4gIHF1YXQucm90YXRlWShvdXQsIGEsIHJhZCk7XG4gIGJ4ID0gb3V0WzBdO1xuICBieSA9IG91dFsxXTtcbiAgYnogPSBvdXRbMl07XG4gIGJ3ID0gb3V0WzNdO1xuICBvdXRbNF0gPSBheDEgKiBidyArIGF3MSAqIGJ4ICsgYXkxICogYnogLSBhejEgKiBieTtcbiAgb3V0WzVdID0gYXkxICogYncgKyBhdzEgKiBieSArIGF6MSAqIGJ4IC0gYXgxICogYno7XG4gIG91dFs2XSA9IGF6MSAqIGJ3ICsgYXcxICogYnogKyBheDEgKiBieSAtIGF5MSAqIGJ4O1xuICBvdXRbN10gPSBhdzEgKiBidyAtIGF4MSAqIGJ4IC0gYXkxICogYnkgLSBhejEgKiBiejtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlcyBhIGR1YWwgcXVhdCBhcm91bmQgdGhlIFogYXhpc1xuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIGR1YWwgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIHRoZSBkdWFsIHF1YXRlcm5pb24gdG8gcm90YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkIGhvdyBmYXIgc2hvdWxkIHRoZSByb3RhdGlvbiBiZVxuICogQHJldHVybnMge3F1YXQyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlWihvdXQsIGEsIHJhZCkge1xuICB2YXIgYnggPSAtYVswXSxcbiAgICAgIGJ5ID0gLWFbMV0sXG4gICAgICBieiA9IC1hWzJdLFxuICAgICAgYncgPSBhWzNdLFxuICAgICAgYXggPSBhWzRdLFxuICAgICAgYXkgPSBhWzVdLFxuICAgICAgYXogPSBhWzZdLFxuICAgICAgYXcgPSBhWzddLFxuICAgICAgYXgxID0gYXggKiBidyArIGF3ICogYnggKyBheSAqIGJ6IC0gYXogKiBieSxcbiAgICAgIGF5MSA9IGF5ICogYncgKyBhdyAqIGJ5ICsgYXogKiBieCAtIGF4ICogYnosXG4gICAgICBhejEgPSBheiAqIGJ3ICsgYXcgKiBieiArIGF4ICogYnkgLSBheSAqIGJ4LFxuICAgICAgYXcxID0gYXcgKiBidyAtIGF4ICogYnggLSBheSAqIGJ5IC0gYXogKiBiejtcbiAgcXVhdC5yb3RhdGVaKG91dCwgYSwgcmFkKTtcbiAgYnggPSBvdXRbMF07XG4gIGJ5ID0gb3V0WzFdO1xuICBieiA9IG91dFsyXTtcbiAgYncgPSBvdXRbM107XG4gIG91dFs0XSA9IGF4MSAqIGJ3ICsgYXcxICogYnggKyBheTEgKiBieiAtIGF6MSAqIGJ5O1xuICBvdXRbNV0gPSBheTEgKiBidyArIGF3MSAqIGJ5ICsgYXoxICogYnggLSBheDEgKiBiejtcbiAgb3V0WzZdID0gYXoxICogYncgKyBhdzEgKiBieiArIGF4MSAqIGJ5IC0gYXkxICogYng7XG4gIG91dFs3XSA9IGF3MSAqIGJ3IC0gYXgxICogYnggLSBheTEgKiBieSAtIGF6MSAqIGJ6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGVzIGEgZHVhbCBxdWF0IGJ5IGEgZ2l2ZW4gcXVhdGVybmlvbiAoYSAqIHEpXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgZHVhbCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgdGhlIGR1YWwgcXVhdGVybmlvbiB0byByb3RhdGVcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBxIHF1YXRlcm5pb24gdG8gcm90YXRlIGJ5XG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVCeVF1YXRBcHBlbmQob3V0LCBhLCBxKSB7XG4gIHZhciBxeCA9IHFbMF0sXG4gICAgICBxeSA9IHFbMV0sXG4gICAgICBxeiA9IHFbMl0sXG4gICAgICBxdyA9IHFbM10sXG4gICAgICBheCA9IGFbMF0sXG4gICAgICBheSA9IGFbMV0sXG4gICAgICBheiA9IGFbMl0sXG4gICAgICBhdyA9IGFbM107XG4gIG91dFswXSA9IGF4ICogcXcgKyBhdyAqIHF4ICsgYXkgKiBxeiAtIGF6ICogcXk7XG4gIG91dFsxXSA9IGF5ICogcXcgKyBhdyAqIHF5ICsgYXogKiBxeCAtIGF4ICogcXo7XG4gIG91dFsyXSA9IGF6ICogcXcgKyBhdyAqIHF6ICsgYXggKiBxeSAtIGF5ICogcXg7XG4gIG91dFszXSA9IGF3ICogcXcgLSBheCAqIHF4IC0gYXkgKiBxeSAtIGF6ICogcXo7XG4gIGF4ID0gYVs0XTtcbiAgYXkgPSBhWzVdO1xuICBheiA9IGFbNl07XG4gIGF3ID0gYVs3XTtcbiAgb3V0WzRdID0gYXggKiBxdyArIGF3ICogcXggKyBheSAqIHF6IC0gYXogKiBxeTtcbiAgb3V0WzVdID0gYXkgKiBxdyArIGF3ICogcXkgKyBheiAqIHF4IC0gYXggKiBxejtcbiAgb3V0WzZdID0gYXogKiBxdyArIGF3ICogcXogKyBheCAqIHF5IC0gYXkgKiBxeDtcbiAgb3V0WzddID0gYXcgKiBxdyAtIGF4ICogcXggLSBheSAqIHF5IC0gYXogKiBxejtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlcyBhIGR1YWwgcXVhdCBieSBhIGdpdmVuIHF1YXRlcm5pb24gKHEgKiBhKVxuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIGR1YWwgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IHEgcXVhdGVybmlvbiB0byByb3RhdGUgYnlcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSB0aGUgZHVhbCBxdWF0ZXJuaW9uIHRvIHJvdGF0ZVxuICogQHJldHVybnMge3F1YXQyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlQnlRdWF0UHJlcGVuZChvdXQsIHEsIGEpIHtcbiAgdmFyIHF4ID0gcVswXSxcbiAgICAgIHF5ID0gcVsxXSxcbiAgICAgIHF6ID0gcVsyXSxcbiAgICAgIHF3ID0gcVszXSxcbiAgICAgIGJ4ID0gYVswXSxcbiAgICAgIGJ5ID0gYVsxXSxcbiAgICAgIGJ6ID0gYVsyXSxcbiAgICAgIGJ3ID0gYVszXTtcbiAgb3V0WzBdID0gcXggKiBidyArIHF3ICogYnggKyBxeSAqIGJ6IC0gcXogKiBieTtcbiAgb3V0WzFdID0gcXkgKiBidyArIHF3ICogYnkgKyBxeiAqIGJ4IC0gcXggKiBiejtcbiAgb3V0WzJdID0gcXogKiBidyArIHF3ICogYnogKyBxeCAqIGJ5IC0gcXkgKiBieDtcbiAgb3V0WzNdID0gcXcgKiBidyAtIHF4ICogYnggLSBxeSAqIGJ5IC0gcXogKiBiejtcbiAgYnggPSBhWzRdO1xuICBieSA9IGFbNV07XG4gIGJ6ID0gYVs2XTtcbiAgYncgPSBhWzddO1xuICBvdXRbNF0gPSBxeCAqIGJ3ICsgcXcgKiBieCArIHF5ICogYnogLSBxeiAqIGJ5O1xuICBvdXRbNV0gPSBxeSAqIGJ3ICsgcXcgKiBieSArIHF6ICogYnggLSBxeCAqIGJ6O1xuICBvdXRbNl0gPSBxeiAqIGJ3ICsgcXcgKiBieiArIHF4ICogYnkgLSBxeSAqIGJ4O1xuICBvdXRbN10gPSBxdyAqIGJ3IC0gcXggKiBieCAtIHF5ICogYnkgLSBxeiAqIGJ6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGVzIGEgZHVhbCBxdWF0IGFyb3VuZCBhIGdpdmVuIGF4aXMuIERvZXMgdGhlIG5vcm1hbGlzYXRpb24gYXV0b21hdGljYWxseVxuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIGR1YWwgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIHRoZSBkdWFsIHF1YXRlcm5pb24gdG8gcm90YXRlXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYXhpcyB0aGUgYXhpcyB0byByb3RhdGUgYXJvdW5kXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIGhvdyBmYXIgdGhlIHJvdGF0aW9uIHNob3VsZCBiZVxuICogQHJldHVybnMge3F1YXQyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlQXJvdW5kQXhpcyhvdXQsIGEsIGF4aXMsIHJhZCkge1xuICAvL1NwZWNpYWwgY2FzZSBmb3IgcmFkID0gMFxuICBpZiAoTWF0aC5hYnMocmFkKSA8IGdsTWF0cml4LkVQU0lMT04pIHtcbiAgICByZXR1cm4gY29weShvdXQsIGEpO1xuICB9XG5cbiAgdmFyIGF4aXNMZW5ndGggPSBNYXRoLmh5cG90KGF4aXNbMF0sIGF4aXNbMV0sIGF4aXNbMl0pO1xuICByYWQgPSByYWQgKiAwLjU7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKTtcbiAgdmFyIGJ4ID0gcyAqIGF4aXNbMF0gLyBheGlzTGVuZ3RoO1xuICB2YXIgYnkgPSBzICogYXhpc1sxXSAvIGF4aXNMZW5ndGg7XG4gIHZhciBieiA9IHMgKiBheGlzWzJdIC8gYXhpc0xlbmd0aDtcbiAgdmFyIGJ3ID0gTWF0aC5jb3MocmFkKTtcbiAgdmFyIGF4MSA9IGFbMF0sXG4gICAgICBheTEgPSBhWzFdLFxuICAgICAgYXoxID0gYVsyXSxcbiAgICAgIGF3MSA9IGFbM107XG4gIG91dFswXSA9IGF4MSAqIGJ3ICsgYXcxICogYnggKyBheTEgKiBieiAtIGF6MSAqIGJ5O1xuICBvdXRbMV0gPSBheTEgKiBidyArIGF3MSAqIGJ5ICsgYXoxICogYnggLSBheDEgKiBiejtcbiAgb3V0WzJdID0gYXoxICogYncgKyBhdzEgKiBieiArIGF4MSAqIGJ5IC0gYXkxICogYng7XG4gIG91dFszXSA9IGF3MSAqIGJ3IC0gYXgxICogYnggLSBheTEgKiBieSAtIGF6MSAqIGJ6O1xuICB2YXIgYXggPSBhWzRdLFxuICAgICAgYXkgPSBhWzVdLFxuICAgICAgYXogPSBhWzZdLFxuICAgICAgYXcgPSBhWzddO1xuICBvdXRbNF0gPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5O1xuICBvdXRbNV0gPSBheSAqIGJ3ICsgYXcgKiBieSArIGF6ICogYnggLSBheCAqIGJ6O1xuICBvdXRbNl0gPSBheiAqIGJ3ICsgYXcgKiBieiArIGF4ICogYnkgLSBheSAqIGJ4O1xuICBvdXRbN10gPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBBZGRzIHR3byBkdWFsIHF1YXQnc1xuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIGR1YWwgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSArIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gKyBiWzFdO1xuICBvdXRbMl0gPSBhWzJdICsgYlsyXTtcbiAgb3V0WzNdID0gYVszXSArIGJbM107XG4gIG91dFs0XSA9IGFbNF0gKyBiWzRdO1xuICBvdXRbNV0gPSBhWzVdICsgYls1XTtcbiAgb3V0WzZdID0gYVs2XSArIGJbNl07XG4gIG91dFs3XSA9IGFbN10gKyBiWzddO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBNdWx0aXBsaWVzIHR3byBkdWFsIHF1YXQnc1xuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIGR1YWwgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aXBseShvdXQsIGEsIGIpIHtcbiAgdmFyIGF4MCA9IGFbMF0sXG4gICAgICBheTAgPSBhWzFdLFxuICAgICAgYXowID0gYVsyXSxcbiAgICAgIGF3MCA9IGFbM10sXG4gICAgICBieDEgPSBiWzRdLFxuICAgICAgYnkxID0gYls1XSxcbiAgICAgIGJ6MSA9IGJbNl0sXG4gICAgICBidzEgPSBiWzddLFxuICAgICAgYXgxID0gYVs0XSxcbiAgICAgIGF5MSA9IGFbNV0sXG4gICAgICBhejEgPSBhWzZdLFxuICAgICAgYXcxID0gYVs3XSxcbiAgICAgIGJ4MCA9IGJbMF0sXG4gICAgICBieTAgPSBiWzFdLFxuICAgICAgYnowID0gYlsyXSxcbiAgICAgIGJ3MCA9IGJbM107XG4gIG91dFswXSA9IGF4MCAqIGJ3MCArIGF3MCAqIGJ4MCArIGF5MCAqIGJ6MCAtIGF6MCAqIGJ5MDtcbiAgb3V0WzFdID0gYXkwICogYncwICsgYXcwICogYnkwICsgYXowICogYngwIC0gYXgwICogYnowO1xuICBvdXRbMl0gPSBhejAgKiBidzAgKyBhdzAgKiBiejAgKyBheDAgKiBieTAgLSBheTAgKiBieDA7XG4gIG91dFszXSA9IGF3MCAqIGJ3MCAtIGF4MCAqIGJ4MCAtIGF5MCAqIGJ5MCAtIGF6MCAqIGJ6MDtcbiAgb3V0WzRdID0gYXgwICogYncxICsgYXcwICogYngxICsgYXkwICogYnoxIC0gYXowICogYnkxICsgYXgxICogYncwICsgYXcxICogYngwICsgYXkxICogYnowIC0gYXoxICogYnkwO1xuICBvdXRbNV0gPSBheTAgKiBidzEgKyBhdzAgKiBieTEgKyBhejAgKiBieDEgLSBheDAgKiBiejEgKyBheTEgKiBidzAgKyBhdzEgKiBieTAgKyBhejEgKiBieDAgLSBheDEgKiBiejA7XG4gIG91dFs2XSA9IGF6MCAqIGJ3MSArIGF3MCAqIGJ6MSArIGF4MCAqIGJ5MSAtIGF5MCAqIGJ4MSArIGF6MSAqIGJ3MCArIGF3MSAqIGJ6MCArIGF4MSAqIGJ5MCAtIGF5MSAqIGJ4MDtcbiAgb3V0WzddID0gYXcwICogYncxIC0gYXgwICogYngxIC0gYXkwICogYnkxIC0gYXowICogYnoxICsgYXcxICogYncwIC0gYXgxICogYngwIC0gYXkxICogYnkwIC0gYXoxICogYnowO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHF1YXQyLm11bHRpcGx5fVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBtdWwgPSBtdWx0aXBseTtcbi8qKlxuICogU2NhbGVzIGEgZHVhbCBxdWF0IGJ5IGEgc2NhbGFyIG51bWJlclxuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIGR1YWwgcXVhdFxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIHRoZSBkdWFsIHF1YXQgdG8gc2NhbGVcbiAqIEBwYXJhbSB7TnVtYmVyfSBiIGFtb3VudCB0byBzY2FsZSB0aGUgZHVhbCBxdWF0IGJ5XG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICogYjtcbiAgb3V0WzFdID0gYVsxXSAqIGI7XG4gIG91dFsyXSA9IGFbMl0gKiBiO1xuICBvdXRbM10gPSBhWzNdICogYjtcbiAgb3V0WzRdID0gYVs0XSAqIGI7XG4gIG91dFs1XSA9IGFbNV0gKiBiO1xuICBvdXRbNl0gPSBhWzZdICogYjtcbiAgb3V0WzddID0gYVs3XSAqIGI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRvdCBwcm9kdWN0IG9mIHR3byBkdWFsIHF1YXQncyAoVGhlIGRvdCBwcm9kdWN0IG9mIHRoZSByZWFsIHBhcnRzKVxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gZG90IHByb2R1Y3Qgb2YgYSBhbmQgYlxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBkb3QgPSBxdWF0LmRvdDtcbi8qKlxuICogUGVyZm9ybXMgYSBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byBkdWFsIHF1YXRzJ3NcbiAqIE5PVEU6IFRoZSByZXN1bHRpbmcgZHVhbCBxdWF0ZXJuaW9ucyB3b24ndCBhbHdheXMgYmUgbm9ybWFsaXplZCAoVGhlIGVycm9yIGlzIG1vc3Qgbm90aWNlYWJsZSB3aGVuIHQgPSAwLjUpXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgZHVhbCBxdWF0XG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50LCBpbiB0aGUgcmFuZ2UgWzAtMV0sIGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHtxdWF0Mn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxlcnAob3V0LCBhLCBiLCB0KSB7XG4gIHZhciBtdCA9IDEgLSB0O1xuICBpZiAoZG90KGEsIGIpIDwgMCkgdCA9IC10O1xuICBvdXRbMF0gPSBhWzBdICogbXQgKyBiWzBdICogdDtcbiAgb3V0WzFdID0gYVsxXSAqIG10ICsgYlsxXSAqIHQ7XG4gIG91dFsyXSA9IGFbMl0gKiBtdCArIGJbMl0gKiB0O1xuICBvdXRbM10gPSBhWzNdICogbXQgKyBiWzNdICogdDtcbiAgb3V0WzRdID0gYVs0XSAqIG10ICsgYls0XSAqIHQ7XG4gIG91dFs1XSA9IGFbNV0gKiBtdCArIGJbNV0gKiB0O1xuICBvdXRbNl0gPSBhWzZdICogbXQgKyBiWzZdICogdDtcbiAgb3V0WzddID0gYVs3XSAqIG10ICsgYls3XSAqIHQ7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGludmVyc2Ugb2YgYSBkdWFsIHF1YXQuIElmIHRoZXkgYXJlIG5vcm1hbGl6ZWQsIGNvbmp1Z2F0ZSBpcyBjaGVhcGVyXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgZHVhbCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgZHVhbCBxdWF0IHRvIGNhbGN1bGF0ZSBpbnZlcnNlIG9mXG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpbnZlcnQob3V0LCBhKSB7XG4gIHZhciBzcWxlbiA9IHNxdWFyZWRMZW5ndGgoYSk7XG4gIG91dFswXSA9IC1hWzBdIC8gc3FsZW47XG4gIG91dFsxXSA9IC1hWzFdIC8gc3FsZW47XG4gIG91dFsyXSA9IC1hWzJdIC8gc3FsZW47XG4gIG91dFszXSA9IGFbM10gLyBzcWxlbjtcbiAgb3V0WzRdID0gLWFbNF0gLyBzcWxlbjtcbiAgb3V0WzVdID0gLWFbNV0gLyBzcWxlbjtcbiAgb3V0WzZdID0gLWFbNl0gLyBzcWxlbjtcbiAgb3V0WzddID0gYVs3XSAvIHNxbGVuO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBjb25qdWdhdGUgb2YgYSBkdWFsIHF1YXRcbiAqIElmIHRoZSBkdWFsIHF1YXRlcm5pb24gaXMgbm9ybWFsaXplZCwgdGhpcyBmdW5jdGlvbiBpcyBmYXN0ZXIgdGhhbiBxdWF0Mi5pbnZlcnNlIGFuZCBwcm9kdWNlcyB0aGUgc2FtZSByZXN1bHQuXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIHF1YXQgdG8gY2FsY3VsYXRlIGNvbmp1Z2F0ZSBvZlxuICogQHJldHVybnMge3F1YXQyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY29uanVnYXRlKG91dCwgYSkge1xuICBvdXRbMF0gPSAtYVswXTtcbiAgb3V0WzFdID0gLWFbMV07XG4gIG91dFsyXSA9IC1hWzJdO1xuICBvdXRbM10gPSBhWzNdO1xuICBvdXRbNF0gPSAtYVs0XTtcbiAgb3V0WzVdID0gLWFbNV07XG4gIG91dFs2XSA9IC1hWzZdO1xuICBvdXRbN10gPSBhWzddO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBsZW5ndGggb2YgYSBkdWFsIHF1YXRcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgZHVhbCBxdWF0IHRvIGNhbGN1bGF0ZSBsZW5ndGggb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGxlbmd0aCBvZiBhXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGxlbmd0aCA9IHF1YXQubGVuZ3RoO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHF1YXQyLmxlbmd0aH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbGVuID0gbGVuZ3RoO1xuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBzcXVhcmVkIGxlbmd0aCBvZiBhIGR1YWwgcXVhdFxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSBkdWFsIHF1YXQgdG8gY2FsY3VsYXRlIHNxdWFyZWQgbGVuZ3RoIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBzcXVhcmVkIGxlbmd0aCBvZiBhXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHNxdWFyZWRMZW5ndGggPSBxdWF0LnNxdWFyZWRMZW5ndGg7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgcXVhdDIuc3F1YXJlZExlbmd0aH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc3FyTGVuID0gc3F1YXJlZExlbmd0aDtcbi8qKlxuICogTm9ybWFsaXplIGEgZHVhbCBxdWF0XG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgZHVhbCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgZHVhbCBxdWF0ZXJuaW9uIHRvIG5vcm1hbGl6ZVxuICogQHJldHVybnMge3F1YXQyfSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemUob3V0LCBhKSB7XG4gIHZhciBtYWduaXR1ZGUgPSBzcXVhcmVkTGVuZ3RoKGEpO1xuXG4gIGlmIChtYWduaXR1ZGUgPiAwKSB7XG4gICAgbWFnbml0dWRlID0gTWF0aC5zcXJ0KG1hZ25pdHVkZSk7XG4gICAgdmFyIGEwID0gYVswXSAvIG1hZ25pdHVkZTtcbiAgICB2YXIgYTEgPSBhWzFdIC8gbWFnbml0dWRlO1xuICAgIHZhciBhMiA9IGFbMl0gLyBtYWduaXR1ZGU7XG4gICAgdmFyIGEzID0gYVszXSAvIG1hZ25pdHVkZTtcbiAgICB2YXIgYjAgPSBhWzRdO1xuICAgIHZhciBiMSA9IGFbNV07XG4gICAgdmFyIGIyID0gYVs2XTtcbiAgICB2YXIgYjMgPSBhWzddO1xuICAgIHZhciBhX2RvdF9iID0gYTAgKiBiMCArIGExICogYjEgKyBhMiAqIGIyICsgYTMgKiBiMztcbiAgICBvdXRbMF0gPSBhMDtcbiAgICBvdXRbMV0gPSBhMTtcbiAgICBvdXRbMl0gPSBhMjtcbiAgICBvdXRbM10gPSBhMztcbiAgICBvdXRbNF0gPSAoYjAgLSBhMCAqIGFfZG90X2IpIC8gbWFnbml0dWRlO1xuICAgIG91dFs1XSA9IChiMSAtIGExICogYV9kb3RfYikgLyBtYWduaXR1ZGU7XG4gICAgb3V0WzZdID0gKGIyIC0gYTIgKiBhX2RvdF9iKSAvIG1hZ25pdHVkZTtcbiAgICBvdXRbN10gPSAoYjMgLSBhMyAqIGFfZG90X2IpIC8gbWFnbml0dWRlO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIGR1YWwgcXVhdGVuaW9uXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIGR1YWwgcXVhdGVybmlvbiB0byByZXByZXNlbnQgYXMgYSBzdHJpbmdcbiAqIEByZXR1cm5zIHtTdHJpbmd9IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgZHVhbCBxdWF0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cihhKSB7XG4gIHJldHVybiBcInF1YXQyKFwiICsgYVswXSArIFwiLCBcIiArIGFbMV0gKyBcIiwgXCIgKyBhWzJdICsgXCIsIFwiICsgYVszXSArIFwiLCBcIiArIGFbNF0gKyBcIiwgXCIgKyBhWzVdICsgXCIsIFwiICsgYVs2XSArIFwiLCBcIiArIGFbN10gKyBcIilcIjtcbn1cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgZHVhbCBxdWF0ZXJuaW9ucyBoYXZlIGV4YWN0bHkgdGhlIHNhbWUgZWxlbWVudHMgaW4gdGhlIHNhbWUgcG9zaXRpb24gKHdoZW4gY29tcGFyZWQgd2l0aCA9PT0pXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIHRoZSBmaXJzdCBkdWFsIHF1YXRlcm5pb24uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGIgdGhlIHNlY29uZCBkdWFsIHF1YXRlcm5pb24uXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdHJ1ZSBpZiB0aGUgZHVhbCBxdWF0ZXJuaW9ucyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXhhY3RFcXVhbHMoYSwgYikge1xuICByZXR1cm4gYVswXSA9PT0gYlswXSAmJiBhWzFdID09PSBiWzFdICYmIGFbMl0gPT09IGJbMl0gJiYgYVszXSA9PT0gYlszXSAmJiBhWzRdID09PSBiWzRdICYmIGFbNV0gPT09IGJbNV0gJiYgYVs2XSA9PT0gYls2XSAmJiBhWzddID09PSBiWzddO1xufVxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBkdWFsIHF1YXRlcm5pb25zIGhhdmUgYXBwcm94aW1hdGVseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgdGhlIGZpcnN0IGR1YWwgcXVhdC5cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYiB0aGUgc2Vjb25kIGR1YWwgcXVhdC5cbiAqIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIHRoZSBkdWFsIHF1YXRzIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoYSwgYikge1xuICB2YXIgYTAgPSBhWzBdLFxuICAgICAgYTEgPSBhWzFdLFxuICAgICAgYTIgPSBhWzJdLFxuICAgICAgYTMgPSBhWzNdLFxuICAgICAgYTQgPSBhWzRdLFxuICAgICAgYTUgPSBhWzVdLFxuICAgICAgYTYgPSBhWzZdLFxuICAgICAgYTcgPSBhWzddO1xuICB2YXIgYjAgPSBiWzBdLFxuICAgICAgYjEgPSBiWzFdLFxuICAgICAgYjIgPSBiWzJdLFxuICAgICAgYjMgPSBiWzNdLFxuICAgICAgYjQgPSBiWzRdLFxuICAgICAgYjUgPSBiWzVdLFxuICAgICAgYjYgPSBiWzZdLFxuICAgICAgYjcgPSBiWzddO1xuICByZXR1cm4gTWF0aC5hYnMoYTAgLSBiMCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTApLCBNYXRoLmFicyhiMCkpICYmIE1hdGguYWJzKGExIC0gYjEpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExKSwgTWF0aC5hYnMoYjEpKSAmJiBNYXRoLmFicyhhMiAtIGIyKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMiksIE1hdGguYWJzKGIyKSkgJiYgTWF0aC5hYnMoYTMgLSBiMykgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTMpLCBNYXRoLmFicyhiMykpICYmIE1hdGguYWJzKGE0IC0gYjQpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE0KSwgTWF0aC5hYnMoYjQpKSAmJiBNYXRoLmFicyhhNSAtIGI1KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhNSksIE1hdGguYWJzKGI1KSkgJiYgTWF0aC5hYnMoYTYgLSBiNikgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTYpLCBNYXRoLmFicyhiNikpICYmIE1hdGguYWJzKGE3IC0gYjcpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE3KSwgTWF0aC5hYnMoYjcpKTtcbn0iLCAidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgQ29tcG9uZW50LCBFbWl0dGVyIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbmltcG9ydCB7IHByb3BlcnR5IH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpL2RlY29yYXRvcnMuanMnO1xuaW1wb3J0IHsgc2V0WFJSaWdpZFRyYW5zZm9ybUxvY2FsIH0gZnJvbSAnLi91dGlscy93ZWJ4ci5qcyc7XG4vKipcbiAqIFNldHMgdXAgYSBbV2ViWFIgRGV2aWNlIEFQSSBcIkhpdCBUZXN0XCJdKGh0dHBzOi8vaW1tZXJzaXZlLXdlYi5naXRodWIuaW8vaGl0LXRlc3QvKVxuICogYW5kIHBsYWNlcyB0aGUgb2JqZWN0IHRvIHRoZSBoaXQgbG9jYXRpb24uXG4gKlxuICogKipSZXF1aXJlbWVudHM6KipcbiAqICAtIFNwZWNpZnkgYCdoaXQtdGVzdCdgIGluIHRoZSByZXF1aXJlZCBvciBvcHRpb25hbCBmZWF0dXJlcyBvbiB0aGUgQVIgYnV0dG9uIGluIHlvdXIgaHRtbCBmaWxlLlxuICogICAgU2VlIFtXYXN0ZXBhcGVyYmluIEFSXSgvc2hvd2Nhc2Uvd3BiLWFyKSBhcyBhbiBleGFtcGxlLlxuICovXG5jbGFzcyBIaXRUZXN0TG9jYXRpb24gZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdoaXQtdGVzdC1sb2NhdGlvbic7XG4gICAgdGVtcFNjYWxpbmcgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgIHZpc2libGUgPSBmYWxzZTtcbiAgICB4ckhpdFRlc3RTb3VyY2UgPSBudWxsO1xuICAgIC8qKiBSZWZlcmVuY2Ugc3BhY2UgZm9yIGNyZWF0aW5nIHRoZSBoaXQgdGVzdCB3aGVuIHRoZSBzZXNzaW9uIHN0YXJ0cyAqL1xuICAgIHhyUmVmZXJlbmNlU3BhY2UgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIEZvciBtYWludGFpbmluZyBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eTogV2hldGhlciB0byBzY2FsZSB0aGUgb2JqZWN0IHRvIDAgYW5kIGJhY2suXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIG9uSGl0TG9zdCBhbmQgb25IaXRGb3VuZCBpbnN0ZWFkLlxuICAgICAqL1xuICAgIHNjYWxlT2JqZWN0ID0gdHJ1ZTtcbiAgICAvKiogRW1pdHMgYW4gZXZlbnQgd2hlbiB0aGUgaGl0IHRlc3Qgc3dpdGNoZXMgZnJvbSB2aXNpYmxlIHRvIGludmlzaWJsZSAqL1xuICAgIG9uSGl0TG9zdCA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqIEVtaXRzIGFuIGV2ZW50IHdoZW4gdGhlIGhpdCB0ZXN0IHN3aXRjaGVzIGZyb20gaW52aXNpYmxlIHRvIHZpc2libGUgKi9cbiAgICBvbkhpdEZvdW5kID0gbmV3IEVtaXR0ZXIoKTtcbiAgICBvblNlc3Npb25TdGFydENhbGxiYWNrID0gbnVsbDtcbiAgICBvblNlc3Npb25FbmRDYWxsYmFjayA9IG51bGw7XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMub25TZXNzaW9uU3RhcnRDYWxsYmFjayA9IHRoaXMub25YUlNlc3Npb25TdGFydC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uU2Vzc2lvbkVuZENhbGxiYWNrID0gdGhpcy5vblhSU2Vzc2lvbkVuZC5iaW5kKHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5zY2FsZU9iamVjdCkge1xuICAgICAgICAgICAgdGhpcy50ZW1wU2NhbGluZy5zZXQodGhpcy5vYmplY3Quc2NhbGluZ0xvY2FsKTtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnNjYWxlKFswLCAwLCAwXSk7XG4gICAgICAgICAgICB0aGlzLm9uSGl0TG9zdC5hZGQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudGVtcFNjYWxpbmcuc2V0KHRoaXMub2JqZWN0LnNjYWxpbmdMb2NhbCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3Quc2NhbGUoWzAsIDAsIDBdKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5vbkhpdEZvdW5kLmFkZCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3Quc2NhbGluZ0xvY2FsLnNldCh0aGlzLnRlbXBTY2FsaW5nKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9iamVjdC5zZXREaXJ0eSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25BY3RpdmF0ZSgpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUub25YUlNlc3Npb25TdGFydC5hZGQodGhpcy5vblNlc3Npb25TdGFydENhbGxiYWNrKTtcbiAgICAgICAgdGhpcy5lbmdpbmUub25YUlNlc3Npb25FbmQuYWRkKHRoaXMub25TZXNzaW9uRW5kQ2FsbGJhY2spO1xuICAgIH1cbiAgICBvbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQucmVtb3ZlKHRoaXMub25TZXNzaW9uU3RhcnRDYWxsYmFjayk7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uRW5kLnJlbW92ZSh0aGlzLm9uU2Vzc2lvbkVuZENhbGxiYWNrKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICBjb25zdCB3YXNWaXNpYmxlID0gdGhpcy52aXNpYmxlO1xuICAgICAgICBpZiAodGhpcy54ckhpdFRlc3RTb3VyY2UpIHtcbiAgICAgICAgICAgIGNvbnN0IGZyYW1lID0gdGhpcy5lbmdpbmUueHJGcmFtZTtcbiAgICAgICAgICAgIGlmICghZnJhbWUpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgbGV0IGhpdFRlc3RSZXN1bHRzID0gZnJhbWUuZ2V0SGl0VGVzdFJlc3VsdHModGhpcy54ckhpdFRlc3RTb3VyY2UpO1xuICAgICAgICAgICAgaWYgKGhpdFRlc3RSZXN1bHRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBsZXQgcG9zZSA9IGhpdFRlc3RSZXN1bHRzWzBdLmdldFBvc2UodGhpcy5lbmdpbmUueHIuY3VycmVudFJlZmVyZW5jZVNwYWNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnZpc2libGUgPSAhIXBvc2U7XG4gICAgICAgICAgICAgICAgaWYgKHBvc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0WFJSaWdpZFRyYW5zZm9ybUxvY2FsKHRoaXMub2JqZWN0LCBwb3NlLnRyYW5zZm9ybSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyogRW1pdCBldmVudHMgZm9yIHZpc2libGUgc3RhdGUgY2hhbmdlICovXG4gICAgICAgIGlmICh0aGlzLnZpc2libGUgIT0gd2FzVmlzaWJsZSkge1xuICAgICAgICAgICAgKHRoaXMudmlzaWJsZSA/IHRoaXMub25IaXRGb3VuZCA6IHRoaXMub25IaXRMb3N0KS5ub3RpZnkodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0SGl0VGVzdFJlc3VsdHMoZnJhbWUgPSB0aGlzLmVuZ2luZS54cj8uZnJhbWUgPz8gbnVsbCkge1xuICAgICAgICBpZiAoIWZyYW1lKVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAvKiBNYXkgaGFwcGVuIGlmIHRoZSBoaXQgdGVzdCBzb3VyY2UgY291bGRuJ3QgYmUgY3JlYXRlZCAqL1xuICAgICAgICBpZiAoIXRoaXMueHJIaXRUZXN0U291cmNlKVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICByZXR1cm4gZnJhbWUuZ2V0SGl0VGVzdFJlc3VsdHModGhpcy54ckhpdFRlc3RTb3VyY2UpO1xuICAgIH1cbiAgICBvblhSU2Vzc2lvblN0YXJ0KHNlc3Npb24pIHtcbiAgICAgICAgaWYgKHNlc3Npb24ucmVxdWVzdEhpdFRlc3RTb3VyY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignaGl0LXRlc3QtbG9jYXRpb246IGhpdCB0ZXN0IGZlYXR1cmUgbm90IGF2YWlsYWJsZS4gRGVhY3RpdmF0aW5nIGNvbXBvbmVudC4nKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2Vzc2lvblxuICAgICAgICAgICAgLnJlcXVlc3RIaXRUZXN0U291cmNlKHtcbiAgICAgICAgICAgIHNwYWNlOiB0aGlzLnhyUmVmZXJlbmNlU3BhY2UgPz9cbiAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZS54ci5yZWZlcmVuY2VTcGFjZUZvclR5cGUoJ3ZpZXdlcicpLFxuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKGhpdFRlc3RTb3VyY2UpID0+IHtcbiAgICAgICAgICAgIHRoaXMueHJIaXRUZXN0U291cmNlID0gaGl0VGVzdFNvdXJjZTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICB9XG4gICAgb25YUlNlc3Npb25FbmQoKSB7XG4gICAgICAgIGlmICghdGhpcy54ckhpdFRlc3RTb3VyY2UpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMueHJIaXRUZXN0U291cmNlLmNhbmNlbCgpO1xuICAgICAgICB0aGlzLnhySGl0VGVzdFNvdXJjZSA9IG51bGw7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuYm9vbCh0cnVlKVxuXSwgSGl0VGVzdExvY2F0aW9uLnByb3RvdHlwZSwgXCJzY2FsZU9iamVjdFwiLCB2b2lkIDApO1xuZXhwb3J0IHsgSGl0VGVzdExvY2F0aW9uIH07XG4iLCAidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgQ29tcG9uZW50LCBWaWV3Q29tcG9uZW50LCBFbWl0dGVyLCB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IHZlYzMsIG1hdDQgfSBmcm9tICdnbC1tYXRyaXgnO1xuaW1wb3J0IHsgQ3Vyc29yVGFyZ2V0IH0gZnJvbSAnLi9jdXJzb3ItdGFyZ2V0LmpzJztcbmltcG9ydCB7IEhpdFRlc3RMb2NhdGlvbiB9IGZyb20gJy4vaGl0LXRlc3QtbG9jYXRpb24uanMnO1xuY29uc3QgdGVtcFZlYyA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG5jb25zdCBaRVJPID0gWzAsIDAsIDBdO1xuLyoqIEdsb2JhbCB0YXJnZXQgZm9yIHtAbGluayBDdXJzb3J9ICovXG5jbGFzcyBDdXJzb3JUYXJnZXRFbWl0dGVycyB7XG4gICAgLyoqIEVtaXR0ZXIgZm9yIGV2ZW50cyB3aGVuIHRoZSB0YXJnZXQgaXMgaG92ZXJlZCAqL1xuICAgIG9uSG92ZXIgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKiBFbWl0dGVyIGZvciBldmVudHMgd2hlbiB0aGUgdGFyZ2V0IGlzIHVuaG92ZXJlZCAqL1xuICAgIG9uVW5ob3ZlciA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqIEVtaXR0ZXIgZm9yIGV2ZW50cyB3aGVuIHRoZSB0YXJnZXQgaXMgY2xpY2tlZCAqL1xuICAgIG9uQ2xpY2sgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKiBFbWl0dGVyIGZvciBldmVudHMgd2hlbiB0aGUgY3Vyc29yIG1vdmVzIG9uIHRoZSB0YXJnZXQgKi9cbiAgICBvbk1vdmUgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKiBFbWl0dGVyIGZvciBldmVudHMgd2hlbiB0aGUgdXNlciBwcmVzc2VkIHRoZSBzZWxlY3QgYnV0dG9uIG9uIHRoZSB0YXJnZXQgKi9cbiAgICBvbkRvd24gPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKiBFbWl0dGVyIGZvciBldmVudHMgd2hlbiB0aGUgdXNlciB1bnByZXNzZWQgdGhlIHNlbGVjdCBidXR0b24gb24gdGhlIHRhcmdldCAqL1xuICAgIG9uVXAgPSBuZXcgRW1pdHRlcigpO1xufVxuLyoqXG4gKiAzRCBjdXJzb3IgZm9yIGRlc2t0b3AvbW9iaWxlL1ZSLlxuICpcbiAqIEltcGxlbWVudHMgYSByYXktY2FzdGluZyBjdXJzb3IgaW50byB0aGUgc2NlbmUuIFRvIHJlYWN0IHRvXG4gKiBjbGlja2luZy9ob3Zlci91bmhvdmVyL2N1cnNvciBkb3duL2N1cnNvciB1cC9tb3ZlIHVzZSBhXG4gKiBbY3Vyc29yLXRhcmdldF0oI2N1cnNvci10YXJnZXQpLlxuICpcbiAqIEZvciBWUiwgdGhlIHJheSBpcyBjYXN0IGluIGRpcmVjdGlvbiBvZlxuICogW3RoaXMub2JqZWN0LmdldEZvcndhcmQoKV0oL2pzYXBpL29iamVjdC8jZ2V0Zm9yd2FyZCkuIEZvciBkZXNrdG9wIGFuZCBtb2JpbGUsIHRoZVxuICogZm9yd2FyZCB2ZWN0b3IgaXMgaW52ZXJzZS1wcm9qZWN0ZWQgdG8gYWNjb3VudCBmb3Igd2hlcmUgb24gc2NyZWVuIHRoZSB1c2VyIGNsaWNrZWQuXG4gKlxuICogYC5nbG9iYWxUYXJnZXRgIGNhbiBiZSB1c2VkIHRvIGNhbGwgY2FsbGJhY2tzIGZvciBhbGwgb2JqZWN0cywgZXZlbiB0aG9zZSB0aGF0XG4gKiBkbyBub3QgaGF2ZSBhIGN1cnNvciB0YXJnZXQgYXR0YWNoZWQsIGJ1dCBtYXRjaCB0aGUgY29sbGlzaW9uIGdyb3VwLlxuICpcbiAqIGAuaGl0VGVzdFRhcmdldGAgY2FuIGJlIHVzZWQgdG8gY2FsbCBjYWxsYmFja3MgV2ViWFIgaGl0IHRlc3QgcmVzdWx0cyxcbiAqXG4gKiBTZWUgW0FuaW1hdGlvbiBFeGFtcGxlXSgvc2hvd2Nhc2UvYW5pbWF0aW9uKS5cbiAqL1xuY2xhc3MgQ3Vyc29yIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnY3Vyc29yJztcbiAgICAvKiBEZXBlbmRlbmNpZXMgaXMgZGVwcmVjYXRlZCwgYnV0IHdlIGtlZXAgaXQgaGVyZSBmb3IgY29tcGF0aWJpbGl0eVxuICAgICAqIHdpdGggMS4wLjAtcmMyIHVudGlsIDEuMC4wIGlzIHJlbGVhc2VkICovXG4gICAgc3RhdGljIERlcGVuZGVuY2llcyA9IFtIaXRUZXN0TG9jYXRpb25dO1xuICAgIHN0YXRpYyBvblJlZ2lzdGVyKGVuZ2luZSkge1xuICAgICAgICBlbmdpbmUucmVnaXN0ZXJDb21wb25lbnQoSGl0VGVzdExvY2F0aW9uKTtcbiAgICB9XG4gICAgX2NvbGxpc2lvbk1hc2sgPSAwO1xuICAgIF9vbkRlYWN0aXZhdGVDYWxsYmFja3MgPSBbXTtcbiAgICBfaW5wdXQgPSBudWxsO1xuICAgIF9vcmlnaW4gPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgIF9jdXJzb3JPYmpTY2FsZSA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgX2RpcmVjdGlvbiA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgX3Byb2plY3Rpb25NYXRyaXggPSBuZXcgRmxvYXQzMkFycmF5KDE2KTtcbiAgICBfdmlld0NvbXBvbmVudCA9IG51bGw7XG4gICAgX2lzRG93biA9IGZhbHNlO1xuICAgIF9sYXN0SXNEb3duID0gZmFsc2U7XG4gICAgX2FyVG91Y2hEb3duID0gZmFsc2U7XG4gICAgX2xhc3RQb2ludGVyUG9zID0gbmV3IEZsb2F0MzJBcnJheSgyKTtcbiAgICBfbGFzdEN1cnNvclBvc09uVGFyZ2V0ID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICBfaGl0VGVzdExvY2F0aW9uID0gbnVsbDtcbiAgICBfaGl0VGVzdE9iamVjdCA9IG51bGw7XG4gICAgX29uU2Vzc2lvblN0YXJ0Q2FsbGJhY2sgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIGN1cnNvciAoYW5kIGN1cnNvck9iamVjdCkgaXMgdmlzaWJsZSwgaS5lLiBwb2ludGluZyBhdCBhbiBvYmplY3RcbiAgICAgKiB0aGF0IG1hdGNoZXMgdGhlIGNvbGxpc2lvbiBncm91cFxuICAgICAqL1xuICAgIHZpc2libGUgPSB0cnVlO1xuICAgIC8qKiBDdXJyZW50bHkgaG92ZXJlZCBvYmplY3QgKi9cbiAgICBob3ZlcmluZ09iamVjdCA9IG51bGw7XG4gICAgLyoqIEN1cnNvclRhcmdldCBjb21wb25lbnQgb2YgdGhlIGN1cnJlbnRseSBob3ZlcmVkIG9iamVjdCAqL1xuICAgIGhvdmVyaW5nT2JqZWN0VGFyZ2V0ID0gbnVsbDtcbiAgICAvKiogV2hldGhlciB0aGUgY3Vyc29yIGlzIGhvdmVyaW5nIHJlYWxpdHkgdmlhIGhpdC10ZXN0ICovXG4gICAgaG92ZXJpbmdSZWFsaXR5ID0gZmFsc2U7XG4gICAgLyoqXG4gICAgICogR2xvYmFsIHRhcmdldCBsZXRzIHlvdSByZWNlaXZlIGdsb2JhbCBjdXJzb3IgZXZlbnRzIG9uIGFueSBvYmplY3QuXG4gICAgICovXG4gICAgZ2xvYmFsVGFyZ2V0ID0gbmV3IEN1cnNvclRhcmdldEVtaXR0ZXJzKCk7XG4gICAgLyoqXG4gICAgICogSGl0IHRlc3QgdGFyZ2V0IGxldHMgeW91IHJlY2VpdmUgY3Vyc29yIGV2ZW50cyBmb3IgXCJyZWFsaXR5XCIsIGlmXG4gICAgICogYHVzZVdlYlhSSGl0VGVzdGAgaXMgc2V0IHRvIGB0cnVlYC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBganNcbiAgICAgKiBjdXJzb3IuaGl0VGVzdFRhcmdldC5vbkNsaWNrLmFkZCgoaGl0LCBjdXJzb3IpID0+IHtcbiAgICAgKiAgICAgLy8gVXNlciBjbGlja2VkIG9uIHJlYWxpdHlcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBoaXRUZXN0VGFyZ2V0ID0gbmV3IEN1cnNvclRhcmdldEVtaXR0ZXJzKCk7XG4gICAgLyoqIFdvcmxkIHBvc2l0aW9uIG9mIHRoZSBjdXJzb3IgKi9cbiAgICBjdXJzb3JQb3MgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgIC8qKiBDb2xsaXNpb24gZ3JvdXAgZm9yIHRoZSByYXkgY2FzdC4gT25seSBvYmplY3RzIGluIHRoaXMgZ3JvdXAgd2lsbCBiZSBhZmZlY3RlZCBieSB0aGlzIGN1cnNvci4gKi9cbiAgICBjb2xsaXNpb25Hcm91cCA9IDE7XG4gICAgLyoqIChvcHRpb25hbCkgT2JqZWN0IHRoYXQgdmlzdWFsaXplcyB0aGUgY3Vyc29yJ3MgcmF5LiAqL1xuICAgIGN1cnNvclJheU9iamVjdCA9IG51bGw7XG4gICAgLyoqIEF4aXMgYWxvbmcgd2hpY2ggdG8gc2NhbGUgdGhlIGBjdXJzb3JSYXlPYmplY3RgLiAqL1xuICAgIGN1cnNvclJheVNjYWxpbmdBeGlzID0gMjtcbiAgICAvKiogKG9wdGlvbmFsKSBPYmplY3QgdGhhdCB2aXN1YWxpemVzIHRoZSBjdXJzb3IncyBoaXQgbG9jYXRpb24uICovXG4gICAgY3Vyc29yT2JqZWN0ID0gbnVsbDtcbiAgICAvKiogSGFuZGVkbmVzcyBmb3IgVlIgY3Vyc29ycyB0byBhY2NlcHQgdHJpZ2dlciBldmVudHMgb25seSBmcm9tIHJlc3BlY3RpdmUgY29udHJvbGxlci4gKi9cbiAgICBoYW5kZWRuZXNzID0gMDtcbiAgICAvKiogTW9kZSBmb3IgcmF5Y2FzdGluZywgd2hldGhlciB0byB1c2UgUGh5c1ggb3Igc2ltcGxlIGNvbGxpc2lvbiBjb21wb25lbnRzICovXG4gICAgcmF5Q2FzdE1vZGUgPSAwO1xuICAgIC8qKiBNYXhpbXVtIGRpc3RhbmNlIGZvciB0aGUgY3Vyc29yJ3MgcmF5IGNhc3QuICovXG4gICAgbWF4RGlzdGFuY2UgPSAxMDA7XG4gICAgLyoqIFdoZXRoZXIgdG8gc2V0IHRoZSBDU1Mgc3R5bGUgb2YgdGhlIG1vdXNlIGN1cnNvciBvbiBkZXNrdG9wICovXG4gICAgc3R5bGVDdXJzb3IgPSB0cnVlO1xuICAgIC8qKlxuICAgICAqIFVzZSBXZWJYUiBoaXQtdGVzdCBpZiBhdmFpbGFibGUuXG4gICAgICpcbiAgICAgKiBBdHRhY2hlcyBhIGhpdC10ZXN0LWxvY2F0aW9uIGNvbXBvbmVudCB0byB0aGUgY3Vyc29yT2JqZWN0LCB3aGljaCB3aWxsIGJlIHVzZWRcbiAgICAgKiBieSB0aGUgY3Vyc29yIHRvIHNlbmQgZXZlbnRzIHRvIHRoZSBoaXRUZXN0VGFyZ2V0IHdpdGggSGl0VGVzdFJlc3VsdC5cbiAgICAgKi9cbiAgICB1c2VXZWJYUkhpdFRlc3QgPSBmYWxzZTtcbiAgICBfb25WaWV3cG9ydFJlc2l6ZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLl92aWV3Q29tcG9uZW50KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAvKiBQcm9qZWN0aW9uIG1hdHJpeCB3aWxsIGNoYW5nZSBpZiB0aGUgdmlld3BvcnQgaXMgcmVzaXplZCwgd2hpY2ggd2lsbCBhZmZlY3QgdGhlXG4gICAgICAgICAqIHByb2plY3Rpb24gbWF0cml4IGJlY2F1c2Ugb2YgdGhlIGFzcGVjdCByYXRpby4gKi9cbiAgICAgICAgbWF0NC5pbnZlcnQodGhpcy5fcHJvamVjdGlvbk1hdHJpeCwgdGhpcy5fdmlld0NvbXBvbmVudC5wcm9qZWN0aW9uTWF0cml4KTtcbiAgICB9O1xuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLl9jb2xsaXNpb25NYXNrID0gMSA8PCB0aGlzLmNvbGxpc2lvbkdyb3VwO1xuICAgICAgICBpZiAodGhpcy5oYW5kZWRuZXNzID09IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0Q29tcCA9IHRoaXMub2JqZWN0LmdldENvbXBvbmVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgIGlmICghaW5wdXRDb21wKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdjdXJzb3IgY29tcG9uZW50IG9uIG9iamVjdCcsIHRoaXMub2JqZWN0Lm5hbWUsICd3YXMgY29uZmlndXJlZCB3aXRoIGhhbmRlZG5lc3MgXCJpbnB1dCBjb21wb25lbnRcIiwgJyArXG4gICAgICAgICAgICAgICAgICAgICdidXQgb2JqZWN0IGhhcyBubyBpbnB1dCBjb21wb25lbnQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRlZG5lc3MgPSBpbnB1dENvbXAuaGFuZGVkbmVzcyB8fCAnbm9uZSc7XG4gICAgICAgICAgICAgICAgdGhpcy5faW5wdXQgPSBpbnB1dENvbXA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRlZG5lc3MgPSBbJ2xlZnQnLCAncmlnaHQnLCAnbm9uZSddW3RoaXMuaGFuZGVkbmVzcyAtIDFdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3ZpZXdDb21wb25lbnQgPSB0aGlzLm9iamVjdC5nZXRDb21wb25lbnQoVmlld0NvbXBvbmVudCk7XG4gICAgICAgIGlmICh0aGlzLnVzZVdlYlhSSGl0VGVzdCkge1xuICAgICAgICAgICAgdGhpcy5faGl0VGVzdE9iamVjdCA9IHRoaXMuZW5naW5lLnNjZW5lLmFkZE9iamVjdCh0aGlzLm9iamVjdCk7XG4gICAgICAgICAgICB0aGlzLl9oaXRUZXN0TG9jYXRpb24gPVxuICAgICAgICAgICAgICAgIHRoaXMuX2hpdFRlc3RPYmplY3QuYWRkQ29tcG9uZW50KEhpdFRlc3RMb2NhdGlvbiwge1xuICAgICAgICAgICAgICAgICAgICBzY2FsZU9iamVjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSkgPz8gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9vblNlc3Npb25TdGFydENhbGxiYWNrID0gdGhpcy5zZXR1cFZSRXZlbnRzLmJpbmQodGhpcyk7XG4gICAgfVxuICAgIG9uQWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQuYWRkKHRoaXMuX29uU2Vzc2lvblN0YXJ0Q2FsbGJhY2spO1xuICAgICAgICB0aGlzLmVuZ2luZS5vblJlc2l6ZS5hZGQodGhpcy5fb25WaWV3cG9ydFJlc2l6ZSk7XG4gICAgICAgIHRoaXMuX3NldEN1cnNvclZpc2liaWxpdHkodHJ1ZSk7XG4gICAgICAgIC8qIElmIHRoaXMgb2JqZWN0IGFsc28gaGFzIGEgdmlldyBjb21wb25lbnQsIHdlIHdpbGwgZW5hYmxlIGludmVyc2UtcHJvamVjdGVkIG1vdXNlIGNsaWNrcyxcbiAgICAgICAgICogb3RoZXJ3aXNlIGp1c3QgdXNlIHRoZSBvYmplY3RzIHRyYW5zZm9ybWF0aW9uICovXG4gICAgICAgIGlmICh0aGlzLl92aWV3Q29tcG9uZW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuZW5naW5lLmNhbnZhcztcbiAgICAgICAgICAgIGNvbnN0IG9uQ2xpY2sgPSB0aGlzLm9uQ2xpY2suYmluZCh0aGlzKTtcbiAgICAgICAgICAgIGNvbnN0IG9uUG9pbnRlck1vdmUgPSB0aGlzLm9uUG9pbnRlck1vdmUuYmluZCh0aGlzKTtcbiAgICAgICAgICAgIGNvbnN0IG9uUG9pbnRlckRvd24gPSB0aGlzLm9uUG9pbnRlckRvd24uYmluZCh0aGlzKTtcbiAgICAgICAgICAgIGNvbnN0IG9uUG9pbnRlclVwID0gdGhpcy5vblBvaW50ZXJVcC5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGljayk7XG4gICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCBvblBvaW50ZXJNb3ZlKTtcbiAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIG9uUG9pbnRlckRvd24pO1xuICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIG9uUG9pbnRlclVwKTtcbiAgICAgICAgICAgIHRoaXMuX29uRGVhY3RpdmF0ZUNhbGxiYWNrcy5wdXNoKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrKTtcbiAgICAgICAgICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCBvblBvaW50ZXJNb3ZlKTtcbiAgICAgICAgICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCBvblBvaW50ZXJEb3duKTtcbiAgICAgICAgICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcnVwJywgb25Qb2ludGVyVXApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fb25WaWV3cG9ydFJlc2l6ZSgpO1xuICAgIH1cbiAgICBfc2V0Q3Vyc29yUmF5VHJhbnNmb3JtKGhpdFBvc2l0aW9uKSB7XG4gICAgICAgIGlmICghdGhpcy5jdXJzb3JSYXlPYmplY3QpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGRpc3QgPSB2ZWMzLmRpc3QodGhpcy5fb3JpZ2luLCBoaXRQb3NpdGlvbik7XG4gICAgICAgIHRoaXMuY3Vyc29yUmF5T2JqZWN0LnNldFBvc2l0aW9uTG9jYWwoWzAuMCwgMC4wLCAtZGlzdCAvIDJdKTtcbiAgICAgICAgaWYgKHRoaXMuY3Vyc29yUmF5U2NhbGluZ0F4aXMgIT0gNCkge1xuICAgICAgICAgICAgLyogU2NhbGUgb25seSB0aGUgcmVxdWVzdGVkIGF4aXMsIHJlbGF0aXZlIHRvIHRoZSBvcmlnaW5hbCBzY2FsaW5nICovXG4gICAgICAgICAgICB0ZW1wVmVjLmZpbGwoMSk7XG4gICAgICAgICAgICB0ZW1wVmVjW3RoaXMuY3Vyc29yUmF5U2NhbGluZ0F4aXNdID0gZGlzdCAvIDI7XG4gICAgICAgICAgICB0aGlzLmN1cnNvclJheU9iamVjdC5zZXRTY2FsaW5nTG9jYWwodGVtcFZlYyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3NldEN1cnNvclZpc2liaWxpdHkodmlzaWJsZSkge1xuICAgICAgICBpZiAodGhpcy52aXNpYmxlID09IHZpc2libGUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMudmlzaWJsZSA9IHZpc2libGU7XG4gICAgICAgIGlmICghdGhpcy5jdXJzb3JPYmplY3QpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh2aXNpYmxlKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnNvck9iamVjdC5zZXRTY2FsaW5nV29ybGQodGhpcy5fY3Vyc29yT2JqU2NhbGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jdXJzb3JPYmplY3QuZ2V0U2NhbGluZ1dvcmxkKHRoaXMuX2N1cnNvck9ialNjYWxlKTtcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yT2JqZWN0LnNjYWxlTG9jYWwoWzAsIDAsIDBdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIC8qIElmIGluIFZSLCBzZXQgdGhlIGN1cnNvciByYXkgYmFzZWQgb24gb2JqZWN0IHRyYW5zZm9ybSAqL1xuICAgICAgICAvKiBTaW5jZSBHb29nbGUgQ2FyZGJvYXJkIHRhcCBpcyByZWdpc3RlcmVkIGFzIGFyVG91Y2hEb3duIHdpdGhvdXQgYSBnYW1lcGFkLCB3ZSBuZWVkIHRvIGNoZWNrIGZvciBnYW1lcGFkIHByZXNlbmNlICovXG4gICAgICAgIGlmICh0aGlzLmVuZ2luZS54ciAmJlxuICAgICAgICAgICAgdGhpcy5fYXJUb3VjaERvd24gJiZcbiAgICAgICAgICAgIHRoaXMuX2lucHV0ICYmXG4gICAgICAgICAgICB0aGlzLmVuZ2luZS54ci5zZXNzaW9uLmlucHV0U291cmNlc1swXS5oYW5kZWRuZXNzID09PSAnbm9uZScgJiZcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLnhyLnNlc3Npb24uaW5wdXRTb3VyY2VzWzBdLmdhbWVwYWQpIHtcbiAgICAgICAgICAgIC8qIFdlYlhSIEFSIGlucHV0ICovXG4gICAgICAgICAgICBjb25zdCBwID0gdGhpcy5lbmdpbmUueHIuc2Vzc2lvbi5pbnB1dFNvdXJjZXNbMF0uZ2FtZXBhZC5heGVzO1xuICAgICAgICAgICAgLyogU2NyZWVuc3BhY2UgWSBpcyBpbnZlcnRlZCAqL1xuICAgICAgICAgICAgdGhpcy5fZGlyZWN0aW9uWzBdID0gcFswXTtcbiAgICAgICAgICAgIHRoaXMuX2RpcmVjdGlvblsxXSA9IC1wWzFdO1xuICAgICAgICAgICAgdGhpcy5fZGlyZWN0aW9uWzJdID0gLTEuMDtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlUcmFuc2Zvcm1BbmRQcm9qZWN0RGlyZWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5lbmdpbmUueHIgJiYgdGhpcy5faW5wdXQgJiYgdGhpcy5faW5wdXQueHJJbnB1dFNvdXJjZSkge1xuICAgICAgICAgICAgLyogV2ViWFIgVlIgaW5wdXQgKi9cbiAgICAgICAgICAgIHRoaXMuX2RpcmVjdGlvblswXSA9IDA7XG4gICAgICAgICAgICB0aGlzLl9kaXJlY3Rpb25bMV0gPSAwO1xuICAgICAgICAgICAgdGhpcy5fZGlyZWN0aW9uWzJdID0gLTEuMDtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlUcmFuc2Zvcm1Ub0RpcmVjdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX3ZpZXdDb21wb25lbnQpIHtcbiAgICAgICAgICAgIC8qIEFwcGx5IHBvdGVudGlhbGx5IGNoYW5nZWQgdHJhbnNmb3JtIHRvIGxhc3Qgc3RvcmVkIHBvaW50ZXJcbiAgICAgICAgICAgICAqIHBvc2l0aW9uICovXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZURpcmVjdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmF5Q2FzdChudWxsLCB0aGlzLmVuZ2luZS54cj8uZnJhbWUpO1xuICAgICAgICBpZiAodGhpcy5jdXJzb3JPYmplY3QpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmhvdmVyaW5nT2JqZWN0ICYmXG4gICAgICAgICAgICAgICAgKHRoaXMuY3Vyc29yUG9zWzBdICE9IDAgfHwgdGhpcy5jdXJzb3JQb3NbMV0gIT0gMCB8fCB0aGlzLmN1cnNvclBvc1syXSAhPSAwKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3NldEN1cnNvclZpc2liaWxpdHkodHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJzb3JPYmplY3Quc2V0UG9zaXRpb25Xb3JsZCh0aGlzLmN1cnNvclBvcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0Q3Vyc29yUmF5VHJhbnNmb3JtKHRoaXMuY3Vyc29yUG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX3NldEN1cnNvclZpc2liaWxpdHkoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qIFJldHVybnMgdGhlIGhvdmVyZWQgY3Vyc29yIHRhcmdldCwgaWYgYXZhaWxhYmxlICovXG4gICAgbm90aWZ5KGV2ZW50LCBvcmlnaW5hbEV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMuaG92ZXJpbmdPYmplY3Q7XG4gICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnNvclRhcmdldCA9IHRoaXMuaG92ZXJpbmdPYmplY3RUYXJnZXQ7XG4gICAgICAgICAgICBpZiAoY3Vyc29yVGFyZ2V0KVxuICAgICAgICAgICAgICAgIGN1cnNvclRhcmdldFtldmVudF0ubm90aWZ5KHRhcmdldCwgdGhpcywgb3JpZ2luYWxFdmVudCA/PyB1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy5nbG9iYWxUYXJnZXRbZXZlbnRdLm5vdGlmeSh0YXJnZXQsIHRoaXMsIG9yaWdpbmFsRXZlbnQgPz8gdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBob3ZlckJlaGF2aW91cihyYXlIaXQsIGhpdFRlc3RSZXN1bHQsIGRvQ2xpY2ssIG9yaWdpbmFsRXZlbnQpIHtcbiAgICAgICAgLyogT2xkIEFQSSB2ZXJzaW9uIGRvZXMgbm90IHJldHVybiBudWxsIGZvciBvYmplY3RzWzBdIGlmIG5vIGhpdCAqL1xuICAgICAgICBjb25zdCBoaXQgPSAhdGhpcy5ob3ZlcmluZ1JlYWxpdHkgJiYgcmF5SGl0LmhpdENvdW50ID4gMCA/IHJheUhpdC5vYmplY3RzWzBdIDogbnVsbDtcbiAgICAgICAgaWYgKGhpdCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmhvdmVyaW5nT2JqZWN0IHx8ICF0aGlzLmhvdmVyaW5nT2JqZWN0LmVxdWFscyhoaXQpKSB7XG4gICAgICAgICAgICAgICAgLyogVW5ob3ZlciBwcmV2aW91cywgaWYgZXhpc3RzICovXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaG92ZXJpbmdPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoJ29uVW5ob3ZlcicsIG9yaWdpbmFsRXZlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvKiBIb3ZlciBuZXcgb2JqZWN0ICovXG4gICAgICAgICAgICAgICAgdGhpcy5ob3ZlcmluZ09iamVjdCA9IGhpdDtcbiAgICAgICAgICAgICAgICB0aGlzLmhvdmVyaW5nT2JqZWN0VGFyZ2V0ID0gdGhpcy5ob3ZlcmluZ09iamVjdC5nZXRDb21wb25lbnQoQ3Vyc29yVGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdHlsZUN1cnNvcilcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmdpbmUuY2FudmFzLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeSgnb25Ib3ZlcicsIG9yaWdpbmFsRXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaG92ZXJpbmdPYmplY3QpIHtcbiAgICAgICAgICAgIC8qIFByZXZpb3VzbHkgaG92ZXJpbmcgb2JqZWN0LCBub3cgaG92ZXJpbmcgbm90aGluZyAqL1xuICAgICAgICAgICAgdGhpcy5ub3RpZnkoJ29uVW5ob3ZlcicsIG9yaWdpbmFsRXZlbnQpO1xuICAgICAgICAgICAgdGhpcy5ob3ZlcmluZ09iamVjdCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmhvdmVyaW5nT2JqZWN0VGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0eWxlQ3Vyc29yKVxuICAgICAgICAgICAgICAgIHRoaXMuZW5naW5lLmNhbnZhcy5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaG92ZXJpbmdPYmplY3QpIHtcbiAgICAgICAgICAgIC8qIG9uRG93bi9vblVwIGZvciBvYmplY3QgKi9cbiAgICAgICAgICAgIGlmICh0aGlzLl9pc0Rvd24gIT09IHRoaXMuX2xhc3RJc0Rvd24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeSh0aGlzLl9pc0Rvd24gPyAnb25Eb3duJyA6ICdvblVwJywgb3JpZ2luYWxFdmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKiBvbkNsaWNrIGZvciBvYmplY3QgKi9cbiAgICAgICAgICAgIGlmIChkb0NsaWNrKVxuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KCdvbkNsaWNrJywgb3JpZ2luYWxFdmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5ob3ZlcmluZ1JlYWxpdHkpIHtcbiAgICAgICAgICAgIC8qIG9uRG93bi9vblVwIGZvciBoaXQgdGVzdCAqL1xuICAgICAgICAgICAgaWYgKHRoaXMuX2lzRG93biAhPT0gdGhpcy5fbGFzdElzRG93bikge1xuICAgICAgICAgICAgICAgICh0aGlzLl9pc0Rvd24gPyB0aGlzLmhpdFRlc3RUYXJnZXQub25Eb3duIDogdGhpcy5oaXRUZXN0VGFyZ2V0Lm9uVXApLm5vdGlmeShoaXRUZXN0UmVzdWx0LCB0aGlzLCBvcmlnaW5hbEV2ZW50ID8/IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKiBvbkNsaWNrIGZvciBoaXQgdGVzdCAqL1xuICAgICAgICAgICAgaWYgKGRvQ2xpY2spXG4gICAgICAgICAgICAgICAgdGhpcy5oaXRUZXN0VGFyZ2V0Lm9uQ2xpY2subm90aWZ5KGhpdFRlc3RSZXN1bHQsIHRoaXMsIG9yaWdpbmFsRXZlbnQgPz8gdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICAvKiBvbk1vdmUgKi9cbiAgICAgICAgaWYgKGhpdCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaG92ZXJpbmdPYmplY3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhvdmVyaW5nT2JqZWN0LnRyYW5zZm9ybVBvaW50SW52ZXJzZVdvcmxkKHRlbXBWZWMsIHRoaXMuY3Vyc29yUG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRlbXBWZWMuc2V0KHRoaXMuY3Vyc29yUG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdmVjMy5lcXVhbHModGhpcy5fbGFzdEN1cnNvclBvc09uVGFyZ2V0LCB0ZW1wVmVjKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KCdvbk1vdmUnLCBvcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLl9sYXN0Q3Vyc29yUG9zT25UYXJnZXQuc2V0KHRlbXBWZWMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaG92ZXJpbmdSZWFsaXR5KSB7XG4gICAgICAgICAgICBpZiAoIXZlYzMuZXF1YWxzKHRoaXMuX2xhc3RDdXJzb3JQb3NPblRhcmdldCwgdGhpcy5jdXJzb3JQb3MpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaXRUZXN0VGFyZ2V0Lm9uTW92ZS5ub3RpZnkoaGl0VGVzdFJlc3VsdCwgdGhpcywgb3JpZ2luYWxFdmVudCA/PyB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2xhc3RDdXJzb3JQb3NPblRhcmdldC5zZXQodGhpcy5jdXJzb3JQb3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fbGFzdEN1cnNvclBvc09uVGFyZ2V0LnNldCh0aGlzLmN1cnNvclBvcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbGFzdElzRG93biA9IHRoaXMuX2lzRG93bjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0dXAgZXZlbnQgbGlzdGVuZXJzIG9uIHNlc3Npb24gb2JqZWN0XG4gICAgICogQHBhcmFtIHMgV2ViWFIgc2Vzc2lvblxuICAgICAqXG4gICAgICogU2V0cyB1cCAnc2VsZWN0JyBhbmQgJ2VuZCcgZXZlbnRzLlxuICAgICAqL1xuICAgIHNldHVwVlJFdmVudHMocykge1xuICAgICAgICBpZiAoIXMpXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdzZXR1cFZSRXZlbnRzIGNhbGxlZCB3aXRob3V0IGEgdmFsaWQgc2Vzc2lvbicpO1xuICAgICAgICAvKiBCZWNhdXNlIHdlIHJlbW92ZSB0aGUgY2FsbGJhY2sgaW4gLmFjdGl2ZSBhbmQgYW5vdGhlciBjb21wb25lbnQgbWlnaHRcbiAgICAgICAgICogZGVhY3RpdmF0ZSB0aGUgY3Vyc29yIGR1cmluZyBvblhSU2Vzc2lvblN0YXJ0LCB3ZSBtYWtlIHN1cmUgdGhlIGN1cnNvclxuICAgICAgICAgKiByZWFsbHkgaXMgYWN0aXZlIHdoZW4gd2UgcnVuIHRoaXMgKi9cbiAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgLyogSWYgaW4gVlIsIG9uZS10aW1lIGJpbmQgdGhlIGxpc3RlbmVyICovXG4gICAgICAgIGNvbnN0IG9uU2VsZWN0ID0gdGhpcy5vblNlbGVjdC5iaW5kKHRoaXMpO1xuICAgICAgICBzLmFkZEV2ZW50TGlzdGVuZXIoJ3NlbGVjdCcsIG9uU2VsZWN0KTtcbiAgICAgICAgY29uc3Qgb25TZWxlY3RTdGFydCA9IHRoaXMub25TZWxlY3RTdGFydC5iaW5kKHRoaXMpO1xuICAgICAgICBzLmFkZEV2ZW50TGlzdGVuZXIoJ3NlbGVjdHN0YXJ0Jywgb25TZWxlY3RTdGFydCk7XG4gICAgICAgIGNvbnN0IG9uU2VsZWN0RW5kID0gdGhpcy5vblNlbGVjdEVuZC5iaW5kKHRoaXMpO1xuICAgICAgICBzLmFkZEV2ZW50TGlzdGVuZXIoJ3NlbGVjdGVuZCcsIG9uU2VsZWN0RW5kKTtcbiAgICAgICAgdGhpcy5fb25EZWFjdGl2YXRlQ2FsbGJhY2tzLnB1c2goKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmVuZ2luZS54cilcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3NlbGVjdCcsIG9uU2VsZWN0KTtcbiAgICAgICAgICAgIHMucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2VsZWN0c3RhcnQnLCBvblNlbGVjdFN0YXJ0KTtcbiAgICAgICAgICAgIHMucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2VsZWN0ZW5kJywgb25TZWxlY3RFbmQpO1xuICAgICAgICB9KTtcbiAgICAgICAgLyogQWZ0ZXIgQVIgc2Vzc2lvbiB3YXMgZW50ZXJlZCwgdGhlIHByb2plY3Rpb24gbWF0cml4IGNoYW5nZWQgKi9cbiAgICAgICAgdGhpcy5fb25WaWV3cG9ydFJlc2l6ZSgpO1xuICAgIH1cbiAgICBvbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQucmVtb3ZlKHRoaXMuX29uU2Vzc2lvblN0YXJ0Q2FsbGJhY2spO1xuICAgICAgICB0aGlzLmVuZ2luZS5vblJlc2l6ZS5yZW1vdmUodGhpcy5fb25WaWV3cG9ydFJlc2l6ZSk7XG4gICAgICAgIHRoaXMuX3NldEN1cnNvclZpc2liaWxpdHkoZmFsc2UpO1xuICAgICAgICBpZiAodGhpcy5ob3ZlcmluZ09iamVjdClcbiAgICAgICAgICAgIHRoaXMubm90aWZ5KCdvblVuaG92ZXInLCBudWxsKTtcbiAgICAgICAgaWYgKHRoaXMuY3Vyc29yUmF5T2JqZWN0KVxuICAgICAgICAgICAgdGhpcy5jdXJzb3JSYXlPYmplY3Quc2V0U2NhbGluZ0xvY2FsKFpFUk8pO1xuICAgICAgICAvKiBFbnN1cmUgYWxsIGV2ZW50IGxpc3RlbmVycyBhcmUgcmVtb3ZlZCAqL1xuICAgICAgICBmb3IgKGNvbnN0IGYgb2YgdGhpcy5fb25EZWFjdGl2YXRlQ2FsbGJhY2tzKVxuICAgICAgICAgICAgZigpO1xuICAgICAgICB0aGlzLl9vbkRlYWN0aXZhdGVDYWxsYmFja3MubGVuZ3RoID0gMDtcbiAgICB9XG4gICAgb25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLl9oaXRUZXN0T2JqZWN0Py5kZXN0cm95KCk7XG4gICAgfVxuICAgIC8qKiAnc2VsZWN0JyBldmVudCBsaXN0ZW5lciAqL1xuICAgIG9uU2VsZWN0KGUpIHtcbiAgICAgICAgaWYgKGUuaW5wdXRTb3VyY2UuaGFuZGVkbmVzcyAhPSB0aGlzLmhhbmRlZG5lc3MpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMucmF5Q2FzdChlLCBlLmZyYW1lLCB0cnVlKTtcbiAgICB9XG4gICAgLyoqICdzZWxlY3RzdGFydCcgZXZlbnQgbGlzdGVuZXIgKi9cbiAgICBvblNlbGVjdFN0YXJ0KGUpIHtcbiAgICAgICAgdGhpcy5fYXJUb3VjaERvd24gPSB0cnVlO1xuICAgICAgICBpZiAoZS5pbnB1dFNvdXJjZS5oYW5kZWRuZXNzID09IHRoaXMuaGFuZGVkbmVzcykge1xuICAgICAgICAgICAgdGhpcy5faXNEb3duID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmF5Q2FzdChlLCBlLmZyYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogJ3NlbGVjdGVuZCcgZXZlbnQgbGlzdGVuZXIgKi9cbiAgICBvblNlbGVjdEVuZChlKSB7XG4gICAgICAgIHRoaXMuX2FyVG91Y2hEb3duID0gZmFsc2U7XG4gICAgICAgIGlmIChlLmlucHV0U291cmNlLmhhbmRlZG5lc3MgPT0gdGhpcy5oYW5kZWRuZXNzKSB7XG4gICAgICAgICAgICB0aGlzLl9pc0Rvd24gPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucmF5Q2FzdChlLCBlLmZyYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogJ3BvaW50ZXJtb3ZlJyBldmVudCBsaXN0ZW5lciAqL1xuICAgIG9uUG9pbnRlck1vdmUoZSkge1xuICAgICAgICAvKiBEb24ndCBjYXJlIGFib3V0IHNlY29uZGFyeSBwb2ludGVycyAqL1xuICAgICAgICBpZiAoIWUuaXNQcmltYXJ5KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnVwZGF0ZU1vdXNlUG9zKGUpO1xuICAgICAgICB0aGlzLnJheUNhc3QoZSwgbnVsbCk7XG4gICAgfVxuICAgIC8qKiAnY2xpY2snIGV2ZW50IGxpc3RlbmVyICovXG4gICAgb25DbGljayhlKSB7XG4gICAgICAgIHRoaXMudXBkYXRlTW91c2VQb3MoZSk7XG4gICAgICAgIHRoaXMucmF5Q2FzdChlLCBudWxsLCB0cnVlKTtcbiAgICB9XG4gICAgLyoqICdwb2ludGVyZG93bicgZXZlbnQgbGlzdGVuZXIgKi9cbiAgICBvblBvaW50ZXJEb3duKGUpIHtcbiAgICAgICAgLyogRG9uJ3QgY2FyZSBhYm91dCBzZWNvbmRhcnkgcG9pbnRlcnMgb3Igbm9uLWxlZnQgY2xpY2tzICovXG4gICAgICAgIGlmICghZS5pc1ByaW1hcnkgfHwgZS5idXR0b24gIT09IDApXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMudXBkYXRlTW91c2VQb3MoZSk7XG4gICAgICAgIHRoaXMuX2lzRG93biA9IHRydWU7XG4gICAgICAgIHRoaXMucmF5Q2FzdChlKTtcbiAgICB9XG4gICAgLyoqICdwb2ludGVydXAnIGV2ZW50IGxpc3RlbmVyICovXG4gICAgb25Qb2ludGVyVXAoZSkge1xuICAgICAgICAvKiBEb24ndCBjYXJlIGFib3V0IHNlY29uZGFyeSBwb2ludGVycyBvciBub24tbGVmdCBjbGlja3MgKi9cbiAgICAgICAgaWYgKCFlLmlzUHJpbWFyeSB8fCBlLmJ1dHRvbiAhPT0gMClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy51cGRhdGVNb3VzZVBvcyhlKTtcbiAgICAgICAgdGhpcy5faXNEb3duID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmF5Q2FzdChlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIG1vdXNlIHBvc2l0aW9uIGluIG5vbi1WUiBtb2RlIGFuZCByYXljYXN0IGZvciBuZXcgcG9zaXRpb25cbiAgICAgKiBAcmV0dXJucyBAcmVmIFJheUhpdCBmb3IgbmV3IHBvc2l0aW9uLlxuICAgICAqL1xuICAgIHVwZGF0ZU1vdXNlUG9zKGUpIHtcbiAgICAgICAgdGhpcy5fbGFzdFBvaW50ZXJQb3NbMF0gPSBlLmNsaWVudFg7XG4gICAgICAgIHRoaXMuX2xhc3RQb2ludGVyUG9zWzFdID0gZS5jbGllbnRZO1xuICAgICAgICB0aGlzLnVwZGF0ZURpcmVjdGlvbigpO1xuICAgIH1cbiAgICB1cGRhdGVEaXJlY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuZW5naW5lLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgLyogR2V0IGRpcmVjdGlvbiBpbiBub3JtYWxpemVkIGRldmljZSBjb29yZGluYXRlIHNwYWNlIGZyb20gbW91c2UgcG9zaXRpb24gKi9cbiAgICAgICAgY29uc3QgbGVmdCA9IHRoaXMuX2xhc3RQb2ludGVyUG9zWzBdIC8gYm91bmRzLndpZHRoO1xuICAgICAgICBjb25zdCB0b3AgPSB0aGlzLl9sYXN0UG9pbnRlclBvc1sxXSAvIGJvdW5kcy5oZWlnaHQ7XG4gICAgICAgIHRoaXMuX2RpcmVjdGlvblswXSA9IGxlZnQgKiAyIC0gMTtcbiAgICAgICAgdGhpcy5fZGlyZWN0aW9uWzFdID0gLXRvcCAqIDIgKyAxO1xuICAgICAgICB0aGlzLl9kaXJlY3Rpb25bMl0gPSAtMS4wO1xuICAgICAgICB0aGlzLmFwcGx5VHJhbnNmb3JtQW5kUHJvamVjdERpcmVjdGlvbigpO1xuICAgIH1cbiAgICBhcHBseVRyYW5zZm9ybUFuZFByb2plY3REaXJlY3Rpb24oKSB7XG4gICAgICAgIC8qIFJldmVyc2UtcHJvamVjdCB0aGUgZGlyZWN0aW9uIGludG8gdmlldyBzcGFjZSAqL1xuICAgICAgICB2ZWMzLnRyYW5zZm9ybU1hdDQodGhpcy5fZGlyZWN0aW9uLCB0aGlzLl9kaXJlY3Rpb24sIHRoaXMuX3Byb2plY3Rpb25NYXRyaXgpO1xuICAgICAgICB2ZWMzLm5vcm1hbGl6ZSh0aGlzLl9kaXJlY3Rpb24sIHRoaXMuX2RpcmVjdGlvbik7XG4gICAgICAgIHRoaXMuYXBwbHlUcmFuc2Zvcm1Ub0RpcmVjdGlvbigpO1xuICAgIH1cbiAgICBhcHBseVRyYW5zZm9ybVRvRGlyZWN0aW9uKCkge1xuICAgICAgICB0aGlzLm9iamVjdC50cmFuc2Zvcm1WZWN0b3JXb3JsZCh0aGlzLl9kaXJlY3Rpb24sIHRoaXMuX2RpcmVjdGlvbik7XG4gICAgICAgIHRoaXMub2JqZWN0LmdldFBvc2l0aW9uV29ybGQodGhpcy5fb3JpZ2luKTtcbiAgICB9XG4gICAgcmF5Q2FzdChvcmlnaW5hbEV2ZW50LCBmcmFtZSA9IG51bGwsIGRvQ2xpY2sgPSBmYWxzZSkge1xuICAgICAgICBjb25zdCByYXlIaXQgPSB0aGlzLnJheUNhc3RNb2RlID09IDBcbiAgICAgICAgICAgID8gdGhpcy5lbmdpbmUuc2NlbmUucmF5Q2FzdCh0aGlzLl9vcmlnaW4sIHRoaXMuX2RpcmVjdGlvbiwgdGhpcy5fY29sbGlzaW9uTWFzaylcbiAgICAgICAgICAgIDogdGhpcy5lbmdpbmUucGh5c2ljcy5yYXlDYXN0KHRoaXMuX29yaWdpbiwgdGhpcy5fZGlyZWN0aW9uLCB0aGlzLl9jb2xsaXNpb25NYXNrLCB0aGlzLm1heERpc3RhbmNlKTtcbiAgICAgICAgbGV0IGhpdFJlc3VsdERpc3RhbmNlID0gSW5maW5pdHk7XG4gICAgICAgIGxldCBoaXRUZXN0UmVzdWx0ID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuX2hpdFRlc3RMb2NhdGlvbj8udmlzaWJsZSkge1xuICAgICAgICAgICAgdGhpcy5faGl0VGVzdE9iamVjdC5nZXRQb3NpdGlvbldvcmxkKHRoaXMuY3Vyc29yUG9zKTtcbiAgICAgICAgICAgIGhpdFJlc3VsdERpc3RhbmNlID0gdmVjMy5kaXN0YW5jZSh0aGlzLm9iamVjdC5nZXRQb3NpdGlvbldvcmxkKHRlbXBWZWMpLCB0aGlzLmN1cnNvclBvcyk7XG4gICAgICAgICAgICBoaXRUZXN0UmVzdWx0ID0gdGhpcy5faGl0VGVzdExvY2F0aW9uPy5nZXRIaXRUZXN0UmVzdWx0cyhmcmFtZSlbMF07XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGhvdmVyaW5nUmVhbGl0eSA9IGZhbHNlO1xuICAgICAgICBpZiAocmF5SGl0LmhpdENvdW50ID4gMCkge1xuICAgICAgICAgICAgY29uc3QgZCA9IHJheUhpdC5kaXN0YW5jZXNbMF07XG4gICAgICAgICAgICBpZiAoaGl0UmVzdWx0RGlzdGFuY2UgPj0gZCkge1xuICAgICAgICAgICAgICAgIC8qIE92ZXJyaWRlIGN1cnNvclBvcyBzZXQgYnkgaGl0IHRlc3QgbG9jYXRpb24gKi9cbiAgICAgICAgICAgICAgICB0aGlzLmN1cnNvclBvcy5zZXQocmF5SGl0LmxvY2F0aW9uc1swXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBob3ZlcmluZ1JlYWxpdHkgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGhpdFJlc3VsdERpc3RhbmNlIDwgSW5maW5pdHkpIHtcbiAgICAgICAgICAgIC8qIGN1cnNvclBvcyBhbHJlYWR5IHNldCAqL1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jdXJzb3JQb3MuZmlsbCgwKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaG92ZXJpbmdSZWFsaXR5ICYmICF0aGlzLmhvdmVyaW5nUmVhbGl0eSkge1xuICAgICAgICAgICAgdGhpcy5oaXRUZXN0VGFyZ2V0Lm9uSG92ZXIubm90aWZ5KGhpdFRlc3RSZXN1bHQsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFob3ZlcmluZ1JlYWxpdHkgJiYgdGhpcy5ob3ZlcmluZ1JlYWxpdHkpIHtcbiAgICAgICAgICAgIHRoaXMuaGl0VGVzdFRhcmdldC5vblVuaG92ZXIubm90aWZ5KGhpdFRlc3RSZXN1bHQsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaG92ZXJpbmdSZWFsaXR5ID0gaG92ZXJpbmdSZWFsaXR5O1xuICAgICAgICB0aGlzLmhvdmVyQmVoYXZpb3VyKHJheUhpdCwgaGl0VGVzdFJlc3VsdCwgZG9DbGljaywgb3JpZ2luYWxFdmVudCk7XG4gICAgICAgIHJldHVybiByYXlIaXQ7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuaW50KDEpXG5dLCBDdXJzb3IucHJvdG90eXBlLCBcImNvbGxpc2lvbkdyb3VwXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5vYmplY3QoKVxuXSwgQ3Vyc29yLnByb3RvdHlwZSwgXCJjdXJzb3JSYXlPYmplY3RcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmVudW0oWyd4JywgJ3knLCAneicsICdub25lJ10sICd6Jylcbl0sIEN1cnNvci5wcm90b3R5cGUsIFwiY3Vyc29yUmF5U2NhbGluZ0F4aXNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5Lm9iamVjdCgpXG5dLCBDdXJzb3IucHJvdG90eXBlLCBcImN1cnNvck9iamVjdFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZW51bShbJ2lucHV0IGNvbXBvbmVudCcsICdsZWZ0JywgJ3JpZ2h0JywgJ25vbmUnXSwgJ2lucHV0IGNvbXBvbmVudCcpXG5dLCBDdXJzb3IucHJvdG90eXBlLCBcImhhbmRlZG5lc3NcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmVudW0oWydjb2xsaXNpb24nLCAncGh5c3gnXSwgJ2NvbGxpc2lvbicpXG5dLCBDdXJzb3IucHJvdG90eXBlLCBcInJheUNhc3RNb2RlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5mbG9hdCgxMDApXG5dLCBDdXJzb3IucHJvdG90eXBlLCBcIm1heERpc3RhbmNlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5ib29sKHRydWUpXG5dLCBDdXJzb3IucHJvdG90eXBlLCBcInN0eWxlQ3Vyc29yXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5ib29sKGZhbHNlKVxuXSwgQ3Vyc29yLnByb3RvdHlwZSwgXCJ1c2VXZWJYUkhpdFRlc3RcIiwgdm9pZCAwKTtcbmV4cG9ydCB7IEN1cnNvciB9O1xuIiwgInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IHF1YXQyIH0gZnJvbSAnZ2wtbWF0cml4Jztcbi8qKlxuICogUHJpbnRzIHNvbWUgbGltaXRlZCBkZWJ1ZyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgb2JqZWN0LlxuICpcbiAqIEluZm9ybWF0aW9uIGNvbnNpc3RzIG9mOiBUaGlzIG9iamVjdCdzIG5hbWUsIGFuIG9iamVjdCBwYXJhbWV0ZXIncyBuYW1lLFxuICogdGhlIG9iamVjdCdzIHdvcmxkIHRyYW5zbGF0aW9uLCB3b3JsZCB0cmFuc2Zvcm0gYW5kIGxvY2FsIHRyYW5zZm9ybS5cbiAqXG4gKiBNYWlubHkgdXNlZCBieSBlbmdpbmUgZGV2ZWxvcGVycyBmb3IgZGVidWcgcHVycG9zZXMgb3IgYXMgZXhhbXBsZSBjb2RlLlxuICovXG5jbGFzcyBEZWJ1Z09iamVjdCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2RlYnVnLW9iamVjdCc7XG4gICAgLyoqIEEgc2Vjb25kIG9iamVjdCB0byBwcmludCB0aGUgbmFtZSBvZiAqL1xuICAgIG9iaiA9IG51bGw7XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGxldCBvcmlnaW4gPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgICAgICBxdWF0Mi5nZXRUcmFuc2xhdGlvbihvcmlnaW4sIHRoaXMub2JqZWN0LnRyYW5zZm9ybVdvcmxkKTtcbiAgICAgICAgY29uc29sZS5sb2coJ0RlYnVnIG9iamVjdDonLCB0aGlzLm9iamVjdC5uYW1lKTtcbiAgICAgICAgY29uc29sZS5sb2coJ090aGVyIG9iamVjdDonLCB0aGlzLm9iaj8ubmFtZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdcXHR0cmFuc2xhdGlvbicsIG9yaWdpbik7XG4gICAgICAgIGNvbnNvbGUubG9nKCdcXHR0cmFuc2Zvcm1Xb3JsZCcsIHRoaXMub2JqZWN0LnRyYW5zZm9ybVdvcmxkKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1xcdHRyYW5zZm9ybUxvY2FsJywgdGhpcy5vYmplY3QudHJhbnNmb3JtTG9jYWwpO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5Lm9iamVjdCgpXG5dLCBEZWJ1Z09iamVjdC5wcm90b3R5cGUsIFwib2JqXCIsIHZvaWQgMCk7XG5leHBvcnQgeyBEZWJ1Z09iamVjdCB9O1xuIiwgImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4vKipcbiAqIEZ1bmN0aW9uIHRvIGNvbnZlcnQgYSBFdWxlciBpbiBZWFogb3JkZXIgdG8gYSBxdWF0ZXJuaW9uXG4gKi9cbmZ1bmN0aW9uIHF1YXRGcm9tRXVsZXJZWFoob3V0LCB4LCB5LCB6KSB7XG4gICAgY29uc3QgYzEgPSBNYXRoLmNvcyh4IC8gMik7XG4gICAgY29uc3QgYzIgPSBNYXRoLmNvcyh5IC8gMik7XG4gICAgY29uc3QgYzMgPSBNYXRoLmNvcyh6IC8gMik7XG4gICAgY29uc3QgczEgPSBNYXRoLnNpbih4IC8gMik7XG4gICAgY29uc3QgczIgPSBNYXRoLnNpbih5IC8gMik7XG4gICAgY29uc3QgczMgPSBNYXRoLnNpbih6IC8gMik7XG4gICAgb3V0WzBdID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzO1xuICAgIG91dFsxXSA9IGMxICogczIgKiBjMyAtIHMxICogYzIgKiBzMztcbiAgICBvdXRbMl0gPSBjMSAqIGMyICogczMgLSBzMSAqIHMyICogYzM7XG4gICAgb3V0WzNdID0gYzEgKiBjMiAqIGMzICsgczEgKiBzMiAqIHMzO1xufVxuLyoqXG4gKiBSZXRyaWV2ZSBkZXZpY2Ugb3JpZW50YXRpb24gZnJvbSBhIG1vYmlsZSBkZXZpY2UgYW5kIHNldCB0aGUgb2JqZWN0J3NcbiAqIG9yaWVudGF0aW9uIGFjY29yZGluZ2x5LlxuICpcbiAqIFVzZWZ1bCBmb3IgbWFnaWMgd2luZG93IGV4cGVyaWVuY2VzLlxuICovXG5jbGFzcyBEZXZpY2VPcmllbnRhdGlvbkxvb2sgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdkZXZpY2Utb3JpZW50YXRpb24tbG9vayc7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7fTtcbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5yb3RhdGlvblggPSAwO1xuICAgICAgICB0aGlzLnJvdGF0aW9uWSA9IDA7XG4gICAgICAgIHRoaXMubGFzdENsaWVudFggPSAtMTtcbiAgICAgICAgdGhpcy5sYXN0Q2xpZW50WSA9IC0xO1xuICAgIH1cbiAgICBpbml0KCkge1xuICAgICAgICAvKiBJbml0aWFsaXplIGRldmljZSBvcmllbnRhdGlvbiB3aXRoIElkZW50aXR5IFF1YXRlcm5pb24gKi9cbiAgICAgICAgdGhpcy5kZXZpY2VPcmllbnRhdGlvbiA9IFswLCAwLCAwLCAxXTtcbiAgICAgICAgdGhpcy5zY3JlZW5PcmllbnRhdGlvbiA9IHdpbmRvdy5pbm5lckhlaWdodCA+IHdpbmRvdy5pbm5lcldpZHRoID8gMCA6IDkwO1xuICAgICAgICB0aGlzLl9vcmlnaW4gPSBbMCwgMCwgMF07XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkZXZpY2VvcmllbnRhdGlvbicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBsZXQgYWxwaGEgPSBlLmFscGhhIHx8IDA7XG4gICAgICAgICAgICBsZXQgYmV0YSA9IGUuYmV0YSB8fCAwO1xuICAgICAgICAgICAgbGV0IGdhbW1hID0gZS5nYW1tYSB8fCAwO1xuICAgICAgICAgICAgY29uc3QgdG9SYWQgPSBNYXRoLlBJIC8gMTgwO1xuICAgICAgICAgICAgcXVhdEZyb21FdWxlcllYWih0aGlzLmRldmljZU9yaWVudGF0aW9uLCBiZXRhICogdG9SYWQsIGFscGhhICogdG9SYWQsIC1nYW1tYSAqIHRvUmFkKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29yaWVudGF0aW9uY2hhbmdlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2NyZWVuT3JpZW50YXRpb24gPSB3aW5kb3cub3JpZW50YXRpb24gfHwgMDtcbiAgICAgICAgfS5iaW5kKHRoaXMpLCBmYWxzZSk7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgLyogRG9uJ3QgdXNlIGRldmljZSBvcmllbnRhdGlvbiBpbiBWUiAqL1xuICAgICAgICBpZiAodGhpcy5lbmdpbmUueHIpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMub2JqZWN0LmdldFRyYW5zbGF0aW9uTG9jYWwodGhpcy5fb3JpZ2luKTtcbiAgICAgICAgdGhpcy5vYmplY3QucmVzZXRUcmFuc2Zvcm0oKTtcbiAgICAgICAgaWYgKHRoaXMuc2NyZWVuT3JpZW50YXRpb24gIT0gMCkge1xuICAgICAgICAgICAgdGhpcy5vYmplY3Qucm90YXRlQXhpc0FuZ2xlRGVnKFswLCAwLCAtMV0sIHRoaXMuc2NyZWVuT3JpZW50YXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2JqZWN0LnJvdGF0ZShbLU1hdGguc3FydCgwLjUpLCAwLCAwLCBNYXRoLnNxcnQoMC41KV0pO1xuICAgICAgICB0aGlzLm9iamVjdC5yb3RhdGUodGhpcy5kZXZpY2VPcmllbnRhdGlvbik7XG4gICAgICAgIHRoaXMub2JqZWN0LnRyYW5zbGF0ZSh0aGlzLl9vcmlnaW4pO1xuICAgIH1cbn1cbmV4cG9ydCB7IERldmljZU9yaWVudGF0aW9uTG9vayB9O1xuIiwgImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4vKipcbiAqIEVuYWJsZXMgaW50ZXJhY3Rpb24gd2l0aCBjdXJzb3ItdGFyZ2V0cyB0aHJvdWdoIGNvbGxpc2lvbiBvdmVybGFwcyxcbiAqIGUuZy4gb24gdGhlIHRpcCBvZiBhIGZpbmdlciBvbiBhIHRyYWNrZWQgaGFuZC5cbiAqXG4gKiAqKlJlcXVpcmVtZW50czoqKlxuICogIC0gQSBjb2xsaXNpb24gY29tcG9uZW50ICh1c3VhbGx5IGEgc3BoZXJlIHdpdGggYDAuMDVgIHJhZGl1cykgb24gdGhlIHNhbWUgb2JqZWN0XG4gKlxuICogQHNpbmNlIDAuOC41XG4gKi9cbmNsYXNzIEZpbmdlckN1cnNvciBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2Zpbmdlci1jdXJzb3InO1xuICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge307XG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5sYXN0VGFyZ2V0ID0gbnVsbDtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMudGlwID0gdGhpcy5vYmplY3QuZ2V0Q29tcG9uZW50KCdjb2xsaXNpb24nKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICBjb25zdCBvdmVybGFwcyA9IHRoaXMudGlwLnF1ZXJ5T3ZlcmxhcHMoKTtcbiAgICAgICAgbGV0IG92ZXJsYXBGb3VuZCA9IG51bGw7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3ZlcmxhcHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBvdmVybGFwc1tpXS5vYmplY3Q7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBvLmdldENvbXBvbmVudCgnY3Vyc29yLXRhcmdldCcpO1xuICAgICAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0LmVxdWFscyh0aGlzLmxhc3RUYXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC5vbkhvdmVyKG8sIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQub25DbGljayhvLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb3ZlcmxhcEZvdW5kID0gdGFyZ2V0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghb3ZlcmxhcEZvdW5kKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5sYXN0VGFyZ2V0KVxuICAgICAgICAgICAgICAgIHRoaXMubGFzdFRhcmdldC5vblVuaG92ZXIodGhpcy5sYXN0VGFyZ2V0Lm9iamVjdCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLmxhc3RUYXJnZXQgPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sYXN0VGFyZ2V0ID0gb3ZlcmxhcEZvdW5kO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IHsgRmluZ2VyQ3Vyc29yIH07XG4iLCAiaW1wb3J0IHsgQ29tcG9uZW50LCBUeXBlIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbi8qKlxuICogQXBwbGllcyBbZml4ZWQgZm92ZWF0aW9uXShodHRwczovL3d3dy53My5vcmcvVFIvd2VieHJsYXllcnMtMS8jZG9tLXhyY29tcG9zaXRpb25sYXllci1maXhlZGZvdmVhdGlvbilcbiAqIG9uY2UgYSBXZWJYUiBzZXNzaW9uIGlzIHN0YXJ0ZWRcbiAqXG4gKiBGaXhlZCBmb3ZlYXRpb24gcmVkdWNlcyBzaGFkaW5nIGNvc3QgYXQgdGhlIHBlcmlwaGVyeSBieSByZW5kZXJpbmcgYXQgbG93ZXIgcmVzb2x1dGlvbnMgYXQgdGhlXG4gKiBlZGdlcyBvZiB0aGUgdXNlcnMgdmlzaW9uLlxuICovXG5jbGFzcyBGaXhlZEZvdmVhdGlvbiBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2ZpeGVkLWZvdmVhdGlvbic7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICAgIC8qKiBBbW91bnQgdG8gYXBwbHkgZnJvbSAwIChub25lKSB0byAxIChmdWxsKSAqL1xuICAgICAgICBmaXhlZEZvdmVhdGlvbjogeyB0eXBlOiBUeXBlLkZsb2F0LCBkZWZhdWx0OiAwLjUgfSxcbiAgICB9O1xuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2sgPSB0aGlzLnNldEZpeGVkRm92ZWF0aW9uLmJpbmQodGhpcyk7XG4gICAgfVxuICAgIG9uQWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQuYWRkKHRoaXMub25TZXNzaW9uU3RhcnRDYWxsYmFjayk7XG4gICAgfVxuICAgIG9uRGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUub25YUlNlc3Npb25TdGFydC5yZW1vdmUodGhpcy5vblNlc3Npb25TdGFydENhbGxiYWNrKTtcbiAgICB9XG4gICAgc2V0Rml4ZWRGb3ZlYXRpb24oKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLnhyLmJhc2VMYXllci5maXhlZEZvdmVhdGlvbiA9IHRoaXMuZml4ZWRGb3ZlYXRpb247XG4gICAgfVxufVxuZXhwb3J0IHsgRml4ZWRGb3ZlYXRpb24gfTtcbiIsICJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBDb21wb25lbnQsIE1lc2hDb21wb25lbnQsIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbmltcG9ydCB7IHByb3BlcnR5IH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpL2RlY29yYXRvcnMuanMnO1xuaW1wb3J0IHsgdmVjMywgcXVhdCB9IGZyb20gJ2dsLW1hdHJpeCc7XG5pbXBvcnQgeyBzZXRYUlJpZ2lkVHJhbnNmb3JtTG9jYWwgfSBmcm9tICcuL3V0aWxzL3dlYnhyLmpzJztcbmNvbnN0IE9SREVSRURfSk9JTlRTID0gW1xuICAgICd3cmlzdCcsXG4gICAgJ3RodW1iLW1ldGFjYXJwYWwnLFxuICAgICd0aHVtYi1waGFsYW54LXByb3hpbWFsJyxcbiAgICAndGh1bWItcGhhbGFueC1kaXN0YWwnLFxuICAgICd0aHVtYi10aXAnLFxuICAgICdpbmRleC1maW5nZXItbWV0YWNhcnBhbCcsXG4gICAgJ2luZGV4LWZpbmdlci1waGFsYW54LXByb3hpbWFsJyxcbiAgICAnaW5kZXgtZmluZ2VyLXBoYWxhbngtaW50ZXJtZWRpYXRlJyxcbiAgICAnaW5kZXgtZmluZ2VyLXBoYWxhbngtZGlzdGFsJyxcbiAgICAnaW5kZXgtZmluZ2VyLXRpcCcsXG4gICAgJ21pZGRsZS1maW5nZXItbWV0YWNhcnBhbCcsXG4gICAgJ21pZGRsZS1maW5nZXItcGhhbGFueC1wcm94aW1hbCcsXG4gICAgJ21pZGRsZS1maW5nZXItcGhhbGFueC1pbnRlcm1lZGlhdGUnLFxuICAgICdtaWRkbGUtZmluZ2VyLXBoYWxhbngtZGlzdGFsJyxcbiAgICAnbWlkZGxlLWZpbmdlci10aXAnLFxuICAgICdyaW5nLWZpbmdlci1tZXRhY2FycGFsJyxcbiAgICAncmluZy1maW5nZXItcGhhbGFueC1wcm94aW1hbCcsXG4gICAgJ3JpbmctZmluZ2VyLXBoYWxhbngtaW50ZXJtZWRpYXRlJyxcbiAgICAncmluZy1maW5nZXItcGhhbGFueC1kaXN0YWwnLFxuICAgICdyaW5nLWZpbmdlci10aXAnLFxuICAgICdwaW5reS1maW5nZXItbWV0YWNhcnBhbCcsXG4gICAgJ3Bpbmt5LWZpbmdlci1waGFsYW54LXByb3hpbWFsJyxcbiAgICAncGlua3ktZmluZ2VyLXBoYWxhbngtaW50ZXJtZWRpYXRlJyxcbiAgICAncGlua3ktZmluZ2VyLXBoYWxhbngtZGlzdGFsJyxcbiAgICAncGlua3ktZmluZ2VyLXRpcCcsXG5dO1xuY29uc3QgaW52VHJhbnNsYXRpb24gPSB2ZWMzLmNyZWF0ZSgpO1xuY29uc3QgaW52Um90YXRpb24gPSBxdWF0LmNyZWF0ZSgpO1xuY29uc3QgdGVtcFZlYzAgPSB2ZWMzLmNyZWF0ZSgpO1xuY29uc3QgdGVtcFZlYzEgPSB2ZWMzLmNyZWF0ZSgpO1xuLyoqXG4gKiBFYXN5IGhhbmQgdHJhY2tpbmcgdGhyb3VnaCB0aGUgV2ViWFIgRGV2aWNlIEFQSVxuICogW1wiSGFuZCBJbnB1dFwiIEFQSV0oaHR0cHM6Ly9pbW1lcnNpdmUtd2ViLmdpdGh1Yi5pby93ZWJ4ci1oYW5kLWlucHV0LykuXG4gKlxuICogQWxsb3dzIGRpc3BsYXlpbmcgaGFuZHMgZWl0aGVyIGFzIHNwaGVyZS1qb2ludHMgb3Igc2tpbm5lZCBtZXNoLlxuICpcbiAqIFRvIHJlYWN0IHRvIGdyYWJiaW5nLCB1c2UgYHRoaXMuaXNHcmFiYmluZygpYC4gRm9yIG90aGVyIGdlc3R1cmVzLCByZWZlclxuICogdG8gYHRoaXMuam9pbnRzYCAtIGFuIGFycmF5IG9mIFtPYmplY3QzRF0oL2pzYXBpL29iamVjdDNkKSBhbmQgdXNlIHRoZSBqb2ludFxuICogaW5kaWNlcyBsaXN0ZWQgW2luIHRoZSBXZWJYUiBIYW5kIElucHV0IHNwZWNpZmljYXRpb25dKGh0dHBzOi8vaW1tZXJzaXZlLXdlYi5naXRodWIuaW8vd2VieHItaGFuZC1pbnB1dC8jc2tlbGV0b24tam9pbnRzLXNlY3Rpb24pLlxuICpcbiAqIEl0IGlzIG9mdGVuIGRlc2lyZWQgdG8gdXNlIGVpdGhlciBoYW5kIHRyYWNraW5nIG9yIGNvbnRyb2xsZXJzLCBub3QgYm90aC5cbiAqIFRoaXMgY29tcG9uZW50IHByb3ZpZGVzIGBkZWFjdGl2YXRlQ2hpbGRyZW5XaXRob3V0UG9zZWAgdG8gaGlkZSB0aGUgaGFuZFxuICogdHJhY2tpbmcgdmlzdWFsaXphdGlvbiBpZiBubyBwb3NlIGlzIGF2YWlsYWJsZSBhbmQgYGNvbnRyb2xsZXJUb0RlYWN0aXZhdGVgXG4gKiBmb3IgZGlzYWJsaW5nIGFub3RoZXIgb2JqZWN0IG9uY2UgYSBoYW5kIHRyYWNraW5nIHBvc2UgKmlzKiBhdmFpbGFibGUuXG4gKiBPdXRzaWRlIG9mIFhSIHNlc3Npb25zLCB0cmFja2luZyBvciBjb250cm9sbGVycyBhcmUgbmVpdGhlciBlbmFibGVkIG5vciBkaXNhYmxlZFxuICogdG8gcGxheSB3ZWxsIHdpdGggdGhlIFt2ci1tb2RlLWFjdGl2ZS1zd2l0Y2hdKCN2ci1tb2RlLWFjdGl2ZS1zd2l0Y2gpIGNvbXBvbmVudC5cbiAqXG4gKiAqKlJlcXVpcmVtZW50czoqKlxuICogIC0gVG8gdXNlIGhhbmQtdHJhY2tpbmcsIGVuYWJsZSBcImpvaW50IHRyYWNraW5nXCIgaW4gYGNocm9tZTovL2ZsYWdzYCBvblxuICogICAgT2N1bHVzIEJyb3dzZXIgZm9yIE9jdWx1cyBRdWVzdC9PY3VsdXMgUXVlc3QgMi5cbiAqXG4gKiBTZWUgW0hhbmQgVHJhY2tpbmcgRXhhbXBsZV0oL3Nob3djYXNlL2hhbmQtdHJhY2tpbmcpLlxuICovXG5jbGFzcyBIYW5kVHJhY2tpbmcgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdoYW5kLXRyYWNraW5nJztcbiAgICAvKiogSGFuZGVkbmVzcyBkZXRlcm1pbmluZyB3aGV0aGVyIHRvIHJlY2VpdmUgdHJhY2tpbmcgaW5wdXQgZnJvbSByaWdodCBvciBsZWZ0IGhhbmQgKi9cbiAgICBoYW5kZWRuZXNzID0gMDtcbiAgICAvKiogKG9wdGlvbmFsKSBNZXNoIHRvIHVzZSB0byB2aXN1YWxpemUgam9pbnRzICovXG4gICAgam9pbnRNZXNoID0gbnVsbDtcbiAgICAvKiogTWF0ZXJpYWwgdG8gdXNlIGZvciBkaXNwbGF5LiBBcHBsaWVkIHRvIGVpdGhlciB0aGUgc3Bhd25lZCBza2lubmVkIG1lc2ggb3IgdGhlIGpvaW50IHNwaGVyZXMuICovXG4gICAgam9pbnRNYXRlcmlhbCA9IG51bGw7XG4gICAgLyoqIChvcHRpb25hbCkgU2tpbiB0byBhcHBseSB0cmFja2VkIGpvaW50IHBvc2VzIHRvLiBJZiBub3QgcHJlc2VudCxcbiAgICAgKiBqb2ludCBzcGhlcmVzIHdpbGwgYmUgdXNlZCBmb3IgZGlzcGxheSBpbnN0ZWFkLiAqL1xuICAgIGhhbmRTa2luID0gbnVsbDtcbiAgICAvKiogRGVhY3RpdmF0ZSBjaGlsZHJlbiBpZiBubyBwb3NlIHdhcyB0cmFja2VkICovXG4gICAgZGVhY3RpdmF0ZUNoaWxkcmVuV2l0aG91dFBvc2UgPSB0cnVlO1xuICAgIC8qKiBDb250cm9sbGVyIG9iamVjdHMgdG8gYWN0aXZhdGUgaW5jbHVkaW5nIGNoaWxkcmVuIGlmIG5vIHBvc2UgaXMgYXZhaWxhYmxlICovXG4gICAgY29udHJvbGxlclRvRGVhY3RpdmF0ZSA9IG51bGw7XG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5oYW5kZWRuZXNzID0gWydsZWZ0JywgJ3JpZ2h0J11bdGhpcy5oYW5kZWRuZXNzXTtcbiAgICB9XG4gICAgam9pbnRzID0ge307XG4gICAgc2Vzc2lvbiA9IG51bGw7XG4gICAgLyogV2hldGhlciBsYXN0IHVwZGF0ZSBoYWQgYSBoYW5kIHBvc2UgKi9cbiAgICBoYXNQb3NlID0gZmFsc2U7XG4gICAgX2NoaWxkcmVuQWN0aXZlID0gdHJ1ZTtcbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKCEoJ1hSSGFuZCcgaW4gd2luZG93KSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdXZWJYUiBIYW5kIFRyYWNraW5nIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBicm93c2VyLicpO1xuICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5oYW5kU2tpbikge1xuICAgICAgICAgICAgY29uc3Qgc2tpbiA9IHRoaXMuaGFuZFNraW47XG4gICAgICAgICAgICBjb25zdCBqb2ludElkcyA9IHNraW4uam9pbnRJZHM7XG4gICAgICAgICAgICAvKiBNYXAgdGhlIHdyaXN0ICovXG4gICAgICAgICAgICB0aGlzLmpvaW50c1tPUkRFUkVEX0pPSU5UU1swXV0gPSB0aGlzLmVuZ2luZS53cmFwT2JqZWN0KGpvaW50SWRzWzBdKTtcbiAgICAgICAgICAgIC8qIEluZGV4IGluIE9SREVSRURfSk9JTlRTIHRoYXQgd2UgYXJlIG1hcHBpbmcgdG8gb3VyIGpvaW50cyAqL1xuICAgICAgICAgICAgLyogU2tpcCB0aHVtYjAgam9pbnQsIHN0YXJ0IGF0IHRodW1iMSAqL1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBqb2ludElkcy5sZW5ndGg7ICsraikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGpvaW50ID0gdGhpcy5lbmdpbmUud3JhcE9iamVjdChqb2ludElkc1tqXSk7XG4gICAgICAgICAgICAgICAgLyogdGlwIGpvaW50cyBhcmUgb25seSBuZWVkZWQgZm9yIGpvaW50IHJlbmRlcmluZywgc28gd2Ugc2tpcCB0aG9zZSB3aGlsZSBtYXBwaW5nICovXG4gICAgICAgICAgICAgICAgdGhpcy5qb2ludHNbam9pbnQubmFtZV0gPSBqb2ludDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qIElmIHdlIGhhdmUgYSBoYW5kIHNraW4sIG5vIG5lZWQgdG8gc3Bhd24gdGhlIGpvaW50cy1iYXNlZCBvbmUgKi9cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvKiBTcGF3biBqb2ludHMgKi9cbiAgICAgICAgY29uc3Qgam9pbnRPYmplY3RzID0gdGhpcy5lbmdpbmUuc2NlbmUuYWRkT2JqZWN0cyhPUkRFUkVEX0pPSU5UUy5sZW5ndGgsIHRoaXMub2JqZWN0LCBPUkRFUkVEX0pPSU5UUy5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IE9SREVSRURfSk9JTlRTLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgICBjb25zdCBqb2ludCA9IGpvaW50T2JqZWN0c1tqXTtcbiAgICAgICAgICAgIGpvaW50LmFkZENvbXBvbmVudChNZXNoQ29tcG9uZW50LCB7XG4gICAgICAgICAgICAgICAgbWVzaDogdGhpcy5qb2ludE1lc2gsXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWw6IHRoaXMuam9pbnRNYXRlcmlhbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5qb2ludHNbT1JERVJFRF9KT0lOVFNbal1dID0gam9pbnQ7XG4gICAgICAgICAgICBqb2ludC5uYW1lID0gT1JERVJFRF9KT0lOVFNbal07XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIGlmICghdGhpcy5lbmdpbmUueHIpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuaGFzUG9zZSA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5lbmdpbmUueHIuc2Vzc2lvbi5pbnB1dFNvdXJjZXMpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5lbmdpbmUueHIuc2Vzc2lvbi5pbnB1dFNvdXJjZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dFNvdXJjZSA9IHRoaXMuZW5naW5lLnhyLnNlc3Npb24uaW5wdXRTb3VyY2VzW2ldO1xuICAgICAgICAgICAgICAgIGlmICghaW5wdXRTb3VyY2U/LmhhbmQgfHwgaW5wdXRTb3VyY2U/LmhhbmRlZG5lc3MgIT0gdGhpcy5oYW5kZWRuZXNzKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjb25zdCB3cmlzdFNwYWNlID0gaW5wdXRTb3VyY2UuaGFuZC5nZXQoJ3dyaXN0Jyk7XG4gICAgICAgICAgICAgICAgaWYgKHdyaXN0U3BhY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcCA9IHRoaXMuZW5naW5lLnhyLmZyYW1lLmdldEpvaW50UG9zZSh3cmlzdFNwYWNlLCB0aGlzLmVuZ2luZS54ci5jdXJyZW50UmVmZXJlbmNlU3BhY2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0WFJSaWdpZFRyYW5zZm9ybUxvY2FsKHRoaXMub2JqZWN0LCBwLnRyYW5zZm9ybSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3QuZ2V0Um90YXRpb25Mb2NhbChpbnZSb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgcXVhdC5jb25qdWdhdGUoaW52Um90YXRpb24sIGludlJvdGF0aW9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9iamVjdC5nZXRQb3NpdGlvbkxvY2FsKGludlRyYW5zbGF0aW9uKTtcbiAgICAgICAgICAgICAgICAvKiBUaGVyZSBpcyBhIGJvbmUgJ3dyaXN0JywgYnV0IGl0IGp1c3Qgc2l0cyBvbiB0aGUgcm9vdFxuICAgICAgICAgICAgICAgICAqIG9iamVjdC4gSXQgY291bGQgaGF2ZSBhbiBpbml0aWFsIHRyYW5zZm9ybSB3ZSB3YW50IHRvXG4gICAgICAgICAgICAgICAgICogY2xlYXIgZm9yIHNraW5uaW5nLCB0aG91Z2guICovXG4gICAgICAgICAgICAgICAgdGhpcy5qb2ludHNbJ3dyaXN0J10ucmVzZXRUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgICAgICAvKiBXcmlzdCBpcyBhbHJlYWR5IGhhbmRsZWQsIHNvIHN0YXJ0IGF0IDEgKi9cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IE9SREVSRURfSk9JTlRTLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGpvaW50TmFtZSA9IE9SREVSRURfSk9JTlRTW2pdO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBqb2ludCA9IHRoaXMuam9pbnRzW2pvaW50TmFtZV07XG4gICAgICAgICAgICAgICAgICAgIGlmICgham9pbnQpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGpvaW50UG9zZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGpvaW50U3BhY2UgPSBpbnB1dFNvdXJjZS5oYW5kLmdldChqb2ludE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoam9pbnRTcGFjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgam9pbnRQb3NlID0gdGhpcy5lbmdpbmUueHIuZnJhbWUuZ2V0Sm9pbnRQb3NlKGpvaW50U3BhY2UsIHRoaXMuZW5naW5lLnhyLmN1cnJlbnRSZWZlcmVuY2VTcGFjZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGpvaW50UG9zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYXNQb3NlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50LnJlc2V0UG9zaXRpb25Sb3RhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgam9pbnQudHJhbnNsYXRlTG9jYWwoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50UG9zZS50cmFuc2Zvcm0ucG9zaXRpb24ueCAtIGludlRyYW5zbGF0aW9uWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50UG9zZS50cmFuc2Zvcm0ucG9zaXRpb24ueSAtIGludlRyYW5zbGF0aW9uWzFdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50UG9zZS50cmFuc2Zvcm0ucG9zaXRpb24ueiAtIGludlRyYW5zbGF0aW9uWzJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBqb2ludC5yb3RhdGVMb2NhbChpbnZSb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBqb2ludC5yb3RhdGVPYmplY3QoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50UG9zZS50cmFuc2Zvcm0ub3JpZW50YXRpb24ueCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqb2ludFBvc2UudHJhbnNmb3JtLm9yaWVudGF0aW9uLnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgam9pbnRQb3NlLnRyYW5zZm9ybS5vcmllbnRhdGlvbi56LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50UG9zZS50cmFuc2Zvcm0ub3JpZW50YXRpb24udyxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmhhbmRTa2luKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogTGFzdCBqb2ludCByYWRpdXMgb2YgZWFjaCBmaW5nZXIgaXMgbnVsbCAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBqb2ludFBvc2UucmFkaXVzIHx8IDAuMDA3O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50LnNldFNjYWxpbmdMb2NhbChbciwgciwgcl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5oYXNQb3NlICYmIHRoaXMuX2NoaWxkcmVuQWN0aXZlKSB7XG4gICAgICAgICAgICB0aGlzLl9jaGlsZHJlbkFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGVhY3RpdmF0ZUNoaWxkcmVuV2l0aG91dFBvc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENoaWxkcmVuQWN0aXZlKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRyb2xsZXJUb0RlYWN0aXZhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXJUb0RlYWN0aXZhdGUuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENoaWxkcmVuQWN0aXZlKHRydWUsIHRoaXMuY29udHJvbGxlclRvRGVhY3RpdmF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5oYXNQb3NlICYmICF0aGlzLl9jaGlsZHJlbkFjdGl2ZSkge1xuICAgICAgICAgICAgdGhpcy5fY2hpbGRyZW5BY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGVhY3RpdmF0ZUNoaWxkcmVuV2l0aG91dFBvc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENoaWxkcmVuQWN0aXZlKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29udHJvbGxlclRvRGVhY3RpdmF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbGxlclRvRGVhY3RpdmF0ZS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENoaWxkcmVuQWN0aXZlKGZhbHNlLCB0aGlzLmNvbnRyb2xsZXJUb0RlYWN0aXZhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHNldENoaWxkcmVuQWN0aXZlKGFjdGl2ZSwgb2JqZWN0KSB7XG4gICAgICAgIG9iamVjdCA9IG9iamVjdCB8fCB0aGlzLm9iamVjdDtcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBvYmplY3QuY2hpbGRyZW47XG4gICAgICAgIGZvciAoY29uc3QgbyBvZiBjaGlsZHJlbikge1xuICAgICAgICAgICAgby5hY3RpdmUgPSBhY3RpdmU7XG4gICAgICAgICAgICB0aGlzLnNldENoaWxkcmVuQWN0aXZlKGFjdGl2ZSwgbyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNHcmFiYmluZygpIHtcbiAgICAgICAgdGhpcy5qb2ludHNbJ2luZGV4LWZpbmdlci10aXAnXS5nZXRQb3NpdGlvbkxvY2FsKHRlbXBWZWMwKTtcbiAgICAgICAgdGhpcy5qb2ludHNbJ3RodW1iLXRpcCddLmdldFBvc2l0aW9uTG9jYWwodGVtcFZlYzEpO1xuICAgICAgICByZXR1cm4gdmVjMy5zcXJEaXN0KHRlbXBWZWMwLCB0ZW1wVmVjMSkgPCAwLjAwMTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5lbnVtKFsnbGVmdCcsICdyaWdodCddKVxuXSwgSGFuZFRyYWNraW5nLnByb3RvdHlwZSwgXCJoYW5kZWRuZXNzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5tZXNoKClcbl0sIEhhbmRUcmFja2luZy5wcm90b3R5cGUsIFwiam9pbnRNZXNoXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5tYXRlcmlhbCgpXG5dLCBIYW5kVHJhY2tpbmcucHJvdG90eXBlLCBcImpvaW50TWF0ZXJpYWxcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LnNraW4oKVxuXSwgSGFuZFRyYWNraW5nLnByb3RvdHlwZSwgXCJoYW5kU2tpblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuYm9vbCh0cnVlKVxuXSwgSGFuZFRyYWNraW5nLnByb3RvdHlwZSwgXCJkZWFjdGl2YXRlQ2hpbGRyZW5XaXRob3V0UG9zZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkub2JqZWN0KClcbl0sIEhhbmRUcmFja2luZy5wcm90b3R5cGUsIFwiY29udHJvbGxlclRvRGVhY3RpdmF0ZVwiLCB2b2lkIDApO1xuZXhwb3J0IHsgSGFuZFRyYWNraW5nIH07XG4iLCAiaW1wb3J0IHsgQ29tcG9uZW50LCBUeXBlIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbmltcG9ydCAnaG93bGVyJztcbi8qKlxuICogKFNwYXRpYWwpIGF1ZGlvIGxpc3RlbmVyIGJhc2VkIG9uIFtIb3dsZXIuanNdKGh0dHBzOi8vaG93bGVyanMuY29tLykuXG4gKlxuICogUmV0cmlldmVzIHRoZSBsb2NhdGlvbiBhbmQgb3JpZW50YXRpb24gb2YgdGhlIG9iamVjdCBhbmQgcGFzc2VzIGl0XG4gKiB0byBbSG93bGVyLnBvcygpXShodHRwczovL2dpdGh1Yi5jb20vZ29sZGZpcmUvaG93bGVyLmpzI3Bvc3gteS16LWlkKVxuICogYW5kIFtIb3dsZXIub3JpZW50YXRpb24oKV0oaHR0cHM6Ly9naXRodWIuY29tL2dvbGRmaXJlL2hvd2xlci5qcyNvcmllbnRhdGlvbngteS16LWlkKS5cbiAqL1xuY2xhc3MgSG93bGVyQXVkaW9MaXN0ZW5lciBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2hvd2xlci1hdWRpby1saXN0ZW5lcic7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICAgIC8qKiBXaGV0aGVyIGF1ZGlvIHNob3VsZCBiZSBzcGF0aWFsaXplZC9wb3NpdGlvbmFsLiAqL1xuICAgICAgICBzcGF0aWFsOiB7IHR5cGU6IFR5cGUuQm9vbCwgZGVmYXVsdDogdHJ1ZSB9LFxuICAgIH07XG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5vcmlnaW4gPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgICAgICB0aGlzLmZ3ZCA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgICAgIHRoaXMudXAgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5zcGF0aWFsKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLm9iamVjdC5nZXRUcmFuc2xhdGlvbldvcmxkKHRoaXMub3JpZ2luKTtcbiAgICAgICAgdGhpcy5vYmplY3QuZ2V0Rm9yd2FyZCh0aGlzLmZ3ZCk7XG4gICAgICAgIHRoaXMub2JqZWN0LmdldFVwKHRoaXMudXApO1xuICAgICAgICBIb3dsZXIucG9zKHRoaXMub3JpZ2luWzBdLCB0aGlzLm9yaWdpblsxXSwgdGhpcy5vcmlnaW5bMl0pO1xuICAgICAgICBIb3dsZXIub3JpZW50YXRpb24odGhpcy5md2RbMF0sIHRoaXMuZndkWzFdLCB0aGlzLmZ3ZFsyXSwgdGhpcy51cFswXSwgdGhpcy51cFsxXSwgdGhpcy51cFsyXSk7XG4gICAgfVxufVxuZXhwb3J0IHsgSG93bGVyQXVkaW9MaXN0ZW5lciB9O1xuIiwgImltcG9ydCB7IENvbXBvbmVudCwgVHlwZSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgJ2hvd2xlcic7XG4vKipcbiAqIChTcGF0aWFsKSBhdWRpbyBzb3VyY2UgYmFzZWQgb24gW0hvd2xlci5qc10oaHR0cHM6Ly9ob3dsZXJqcy5jb20vKS5cbiAqXG4gKiBDcmVhdGVzIGEgSG93bGVyIGF1ZGlvIHNvdXJjZSwgcGxheXMgYW4gYXVkaW8gZmlsZSBvbiBpdCBhbmQgdXBkYXRlc1xuICogaXRzIHBvc2l0aW9uLlxuICpcbiAqIE9wdGltaXplcyB0aGUgcG9zaXRpb24gdXBkYXRlIHRvIG9ubHkgdXBkYXRlIGlmIHRoZSBkaWZmZXJlbmNlIHRvIGxhc3RcbiAqIHBvc2l0aW9uIGlzIGxhcmdlciB0aGFuIGhhbGYgYSBjZW50aW1ldGVyLiBUbyBmb3JjZSB1cGRhdGVzIChlLmcuIGlmXG4gKiB0aGUgc291bmQgc291cmNlIGlzIF92ZXJ5XyBjbG9zZSB0byB0aGUgbGlzdGVuZXIpLFxuICogdXNlIGAudXBkYXRlUG9zaXRpb24oKWAuXG4gKi9cbmNsYXNzIEhvd2xlckF1ZGlvU291cmNlIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnaG93bGVyLWF1ZGlvLXNvdXJjZSc7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICAgIC8qKiBWb2x1bWUgKi9cbiAgICAgICAgdm9sdW1lOiB7IHR5cGU6IFR5cGUuRmxvYXQsIGRlZmF1bHQ6IDEuMCB9LFxuICAgICAgICAvKiogV2hldGhlciBhdWRpbyBzaG91bGQgYmUgc3BhdGlhbGl6ZWQvcG9zaXRpb25hbCAqL1xuICAgICAgICBzcGF0aWFsOiB7IHR5cGU6IFR5cGUuQm9vbCwgZGVmYXVsdDogdHJ1ZSB9LFxuICAgICAgICAvKiogV2hldGhlciB0byBsb29wIHRoZSBzb3VuZCAqL1xuICAgICAgICBsb29wOiB7IHR5cGU6IFR5cGUuQm9vbCwgZGVmYXVsdDogZmFsc2UgfSxcbiAgICAgICAgLyoqIFdoZXRoZXIgdG8gc3RhcnQgcGxheWluZyBhdXRvbWF0aWNhbGx5ICovXG4gICAgICAgIGF1dG9wbGF5OiB7IHR5cGU6IFR5cGUuQm9vbCwgZGVmYXVsdDogZmFsc2UgfSxcbiAgICAgICAgLyoqIFVSTCB0byBhIHNvdW5kIGZpbGUgdG8gcGxheSAqL1xuICAgICAgICBzcmM6IHsgdHlwZTogVHlwZS5TdHJpbmcsIGRlZmF1bHQ6ICcnIH0sXG4gICAgfTtcbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5hdWRpbyA9IG5ldyBIb3dsKHtcbiAgICAgICAgICAgIHNyYzogW3RoaXMuc3JjXSxcbiAgICAgICAgICAgIGxvb3A6IHRoaXMubG9vcCxcbiAgICAgICAgICAgIHZvbHVtZTogdGhpcy52b2x1bWUsXG4gICAgICAgICAgICBhdXRvcGxheTogdGhpcy5hdXRvcGxheSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGFzdFBsYXllZEF1ZGlvSWQgPSBudWxsO1xuICAgICAgICB0aGlzLm9yaWdpbiA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgICAgIHRoaXMubGFzdE9yaWdpbiA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgICAgIGlmICh0aGlzLnNwYXRpYWwgJiYgdGhpcy5hdXRvcGxheSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVQb3NpdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5wbGF5KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICBpZiAoIXRoaXMuc3BhdGlhbCB8fCAhdGhpcy5sYXN0UGxheWVkQXVkaW9JZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5vYmplY3QuZ2V0VHJhbnNsYXRpb25Xb3JsZCh0aGlzLm9yaWdpbik7XG4gICAgICAgIC8qIE9ubHkgY2FsbCBwb3MoKSBpZiB0aGUgcG9zaXRpb24gbW92ZWQgbW9yZSB0aGFuIGhhbGYgYSBjZW50aW1ldGVyXG4gICAgICAgICAqIG90aGVyd2lzZSB0aGlzIGdldHMgdmVyeSBwZXJmb3JtYW5jZSBoZWF2eS5cbiAgICAgICAgICogU21hbGxlciBtb3ZlbWVudCBzaG91bGQgb25seSBiZSBwZXJjZWl2YWJsZSBpZiBjbG9zZSB0byB0aGVcbiAgICAgICAgICogZWFyIGFueXdheS4gKi9cbiAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMubGFzdE9yaWdpblswXSAtIHRoaXMub3JpZ2luWzBdKSA+IDAuMDA1IHx8XG4gICAgICAgICAgICBNYXRoLmFicyh0aGlzLmxhc3RPcmlnaW5bMV0gLSB0aGlzLm9yaWdpblsxXSkgPiAwLjAwNSB8fFxuICAgICAgICAgICAgTWF0aC5hYnModGhpcy5sYXN0T3JpZ2luWzJdIC0gdGhpcy5vcmlnaW5bMl0pID4gMC4wMDUpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUG9zaXRpb24oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVQb3NpdGlvbigpIHtcbiAgICAgICAgdGhpcy5hdWRpby5wb3ModGhpcy5vcmlnaW5bMF0sIHRoaXMub3JpZ2luWzFdLCB0aGlzLm9yaWdpblsyXSwgdGhpcy5sYXN0UGxheWVkQXVkaW9JZCk7XG4gICAgICAgIHRoaXMubGFzdE9yaWdpbi5zZXQodGhpcy5vcmlnaW4pO1xuICAgIH1cbiAgICBwbGF5KCkge1xuICAgICAgICBpZiAodGhpcy5sYXN0UGxheWVkQXVkaW9JZClcbiAgICAgICAgICAgIHRoaXMuYXVkaW8uc3RvcCh0aGlzLmxhc3RQbGF5ZWRBdWRpb0lkKTtcbiAgICAgICAgdGhpcy5sYXN0UGxheWVkQXVkaW9JZCA9IHRoaXMuYXVkaW8ucGxheSgpO1xuICAgICAgICBpZiAodGhpcy5zcGF0aWFsKVxuICAgICAgICAgICAgdGhpcy51cGRhdGVQb3NpdGlvbigpO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICBpZiAoIXRoaXMubGFzdFBsYXllZEF1ZGlvSWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuYXVkaW8uc3RvcCh0aGlzLmxhc3RQbGF5ZWRBdWRpb0lkKTtcbiAgICAgICAgdGhpcy5sYXN0UGxheWVkQXVkaW9JZCA9IG51bGw7XG4gICAgfVxuICAgIG9uRGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgLyogU3RvcCBzb3VuZCB3aGVuIGNvbXBvbmVudCBpcyBkZWFjdGl2YXRlZCBvciBkZXN0cm95ZWQsIGUuZy5cbiAgICAgICAgICogd2hlbiBzd2l0Y2hpbmcgc2NlbmVzICovXG4gICAgICAgIHRoaXMuc3RvcCgpO1xuICAgIH1cbn1cbmV4cG9ydCB7IEhvd2xlckF1ZGlvU291cmNlIH07XG4iLCAiLyoqXG4gKiBTZXQgdGhlIGRpZmZ1c2UvZmxhdCB0ZXh0dXJlIG9mIGtub3duIHBpcGVsaW5lcy5cbiAqXG4gKiBAcGFyYW0gbWF0IE1hdGVyaWFsIHRvIHNldCB0aGUgdGV4dHVyZSBvblxuICogQHBhcmFtIHRleHR1cmUgVGV4dHVyZSB0byBzZXRcbiAqIEBwYXJhbSBjdXN0b21UZXh0dXJlUHJvcGVydHkgVGV4dHVyZSBwcm9wZXJ0eSB0byBzZXQgb3IgYCdhdXRvJ2AgdG8gYXV0b21hdGljYWxseVxuICogICAgICBkZXRlY3QgdGhlIHJpZ2h0IHRleHR1cmUgcHJvcGVydHkgYmFzZWQgb24ga25vd24gcGlwZWxpbmUuXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHByb3BlcnR5IHdhcyBzZXQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0Rmlyc3RNYXRlcmlhbFRleHR1cmUobWF0LCB0ZXh0dXJlLCBjdXN0b21UZXh0dXJlUHJvcGVydHkpIHtcbiAgICBpZiAoY3VzdG9tVGV4dHVyZVByb3BlcnR5ICE9PSAnYXV0bycpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBtYXRbY3VzdG9tVGV4dHVyZVByb3BlcnR5XSA9IHRleHR1cmU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb25zdCBzaGFkZXIgPSBtYXQuc2hhZGVyO1xuICAgIGlmIChzaGFkZXIgPT09ICdGbGF0IE9wYXF1ZSBUZXh0dXJlZCcpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBtYXQuZmxhdFRleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2hhZGVyID09PSAnUGhvbmcgT3BhcXVlIFRleHR1cmVkJyB8fFxuICAgICAgICBzaGFkZXIgPT09ICdGb2xpYWdlJyB8fFxuICAgICAgICBzaGFkZXIgPT09ICdQaG9uZyBOb3JtYWxtYXBwZWQnIHx8XG4gICAgICAgIHNoYWRlciA9PT0gJ1Bob25nIExpZ2h0bWFwcGVkJykge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIG1hdC5kaWZmdXNlVGV4dHVyZSA9IHRleHR1cmU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIGlmIChzaGFkZXIgPT09ICdQYXJ0aWNsZScpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBtYXQubWFpblRleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2hhZGVyID09PSAnRGlzdGFuY2VGaWVsZFZlY3RvcicpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBtYXQudmVjdG9yVGV4dHVyZSA9IHRleHR1cmU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIGlmIChzaGFkZXIgPT09ICdCYWNrZ3JvdW5kJyB8fCBzaGFkZXIgPT09ICdTa3knKSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgbWF0LnRleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2hhZGVyID09PSAnUGh5c2ljYWwgT3BhcXVlIFRleHR1cmVkJykge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIG1hdC5hbGJlZG9UZXh0dXJlID0gdGV4dHVyZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWcycmFkKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICogTWF0aC5QSSAvIDE4MC4wO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJhZDJkZWcodmFsdWUpIHtcbiAgICByZXR1cm4gKHZhbHVlICogMTgwLjApIC8gTWF0aC5QSTtcbn1cbiIsICJpbXBvcnQgeyBDb21wb25lbnQsIFByb3BlcnR5IH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbmltcG9ydCB7IHNldEZpcnN0TWF0ZXJpYWxUZXh0dXJlIH0gZnJvbSAnLi91dGlscy91dGlscy5qcyc7XG4vKipcbiAqIERvd25sb2FkcyBhbiBpbWFnZSBmcm9tIFVSTCBhbmQgYXBwbGllcyBpdCBhcyBgZGlmZnVzZVRleHR1cmVgIG9yIGBmbGF0VGV4dHVyZWBcbiAqIHRvIGFuIGF0dGFjaGVkIG1lc2ggY29tcG9uZW50LlxuICpcbiAqIE1hdGVyaWFscyBmcm9tIHRoZSBmb2xsb3dpbmcgc2hhZGVycyBhcmUgc3VwcG9ydGVkOlxuICogIC0gXCJQaG9uZyBPcGFxdWUgVGV4dHVyZWRcIlxuICogIC0gXCJGbGF0IE9wYXF1ZSBUZXh0dXJlZFwiXG4gKiAgLSBcIkJhY2tncm91bmRcIlxuICogIC0gXCJQaHlzaWNhbCBPcGFxdWUgVGV4dHVyZWRcIlxuICogIC0gXCJGb2xpYWdlXCJcbiAqL1xuY2xhc3MgSW1hZ2VUZXh0dXJlIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnaW1hZ2UtdGV4dHVyZSc7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICAgIC8qKiBVUkwgdG8gZG93bmxvYWQgdGhlIGltYWdlIGZyb20gKi9cbiAgICAgICAgdXJsOiBQcm9wZXJ0eS5zdHJpbmcoKSxcbiAgICAgICAgLyoqIE1hdGVyaWFsIHRvIGFwcGx5IHRoZSB2aWRlbyB0ZXh0dXJlIHRvICovXG4gICAgICAgIG1hdGVyaWFsOiBQcm9wZXJ0eS5tYXRlcmlhbCgpLFxuICAgICAgICAvKiogTmFtZSBvZiB0aGUgdGV4dHVyZSBwcm9wZXJ0eSB0byBzZXQgKi9cbiAgICAgICAgdGV4dHVyZVByb3BlcnR5OiBQcm9wZXJ0eS5zdHJpbmcoJ2F1dG8nKSxcbiAgICB9O1xuICAgIHN0YXJ0KCkge1xuICAgICAgICBpZiAoIXRoaXMubWF0ZXJpYWwpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdpbWFnZS10ZXh0dXJlOiBtYXRlcmlhbCBwcm9wZXJ0eSBub3Qgc2V0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbmdpbmUudGV4dHVyZXNcbiAgICAgICAgICAgIC5sb2FkKHRoaXMudXJsLCAnYW5vbnltb3VzJylcbiAgICAgICAgICAgIC50aGVuKCh0ZXh0dXJlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtYXQgPSB0aGlzLm1hdGVyaWFsO1xuICAgICAgICAgICAgaWYgKCFzZXRGaXJzdE1hdGVyaWFsVGV4dHVyZShtYXQsIHRleHR1cmUsIHRoaXMudGV4dHVyZVByb3BlcnR5KSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NoYWRlcicsIG1hdC5zaGFkZXIsICdub3Qgc3VwcG9ydGVkIGJ5IGltYWdlLXRleHR1cmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChjb25zb2xlLmVycik7XG4gICAgfVxufVxuZXhwb3J0IHsgSW1hZ2VUZXh0dXJlIH07XG4iLCAidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbmltcG9ydCB7IHByb3BlcnR5IH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpL2RlY29yYXRvcnMuanMnO1xuaW1wb3J0IHsgdmVjMyB9IGZyb20gJ2dsLW1hdHJpeCc7XG5jb25zdCBwcmV2ZW50RGVmYXVsdCA9IChlKSA9PiB7IGUucHJldmVudERlZmF1bHQoKTsgfTtcbi8qKlxuICogQ29udHJvbHMgdGhlIGNhbWVyYSBvcmllbnRhdGlvbiB0aHJvdWdoIG1vdXNlIG1vdmVtZW50LlxuICpcbiAqIEVmZmljaWVudGx5IGltcGxlbWVudGVkIHRvIGFmZmVjdCBvYmplY3Qgb3JpZW50YXRpb24gb25seVxuICogd2hlbiB0aGUgbW91c2UgbW92ZXMuXG4gKi9cbmNsYXNzIE1vdXNlTG9va0NvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ21vdXNlLWxvb2snO1xuICAgIC8qKiBNb3VzZSBsb29rIHNlbnNpdGl2aXR5ICovXG4gICAgc2Vuc2l0aXR5ID0gMC4yNTtcbiAgICAvKiogUmVxdWlyZSBhIG1vdXNlIGJ1dHRvbiB0byBiZSBwcmVzc2VkIHRvIGNvbnRyb2wgdmlldy5cbiAgICAgKiBPdGhlcndpc2UgdmlldyB3aWxsIGFsbHdheXMgZm9sbG93IG1vdXNlIG1vdmVtZW50ICovXG4gICAgcmVxdWlyZU1vdXNlRG93biA9IHRydWU7XG4gICAgLyoqIElmIFwibW92ZU9uQ2xpY2tcIiBpcyBlbmFibGVkLCBtb3VzZSBidXR0b24gd2hpY2ggc2hvdWxkXG4gICAgICogYmUgaGVsZCBkb3duIHRvIGNvbnRyb2wgdmlldyAqL1xuICAgIG1vdXNlQnV0dG9uSW5kZXggPSAwO1xuICAgIC8qKiBFbmFibGVzIHBvaW50ZXIgbG9jayBvbiBcIm1vdXNlZG93blwiIGV2ZW50IG9uIGNhbnZhcyAqL1xuICAgIHBvaW50ZXJMb2NrT25DbGljayA9IGZhbHNlO1xuICAgIGN1cnJlbnRSb3RhdGlvblkgPSAwO1xuICAgIGN1cnJlbnRSb3RhdGlvblggPSAwO1xuICAgIG9yaWdpbiA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgcGFyZW50T3JpZ2luID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICByb3RhdGlvblggPSAwO1xuICAgIHJvdGF0aW9uWSA9IDA7XG4gICAgbW91c2VEb3duID0gZmFsc2U7XG4gICAgb25BY3RpdmF0ZSgpIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZSk7XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuZW5naW5lLmNhbnZhcztcbiAgICAgICAgaWYgKHRoaXMucG9pbnRlckxvY2tPbkNsaWNrKSB7XG4gICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5yZXF1ZXN0UG9pbnRlckxvY2spO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJlcXVpcmVNb3VzZURvd24pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1vdXNlQnV0dG9uSW5kZXggPT09IDIpIHtcbiAgICAgICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBwcmV2ZW50RGVmYXVsdCwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd24pO1xuICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25EZWFjdGl2YXRlKCkge1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uTW91c2VNb3ZlKTtcbiAgICAgICAgY29uc3QgY2FudmFzID0gdGhpcy5lbmdpbmUuY2FudmFzO1xuICAgICAgICBpZiAodGhpcy5wb2ludGVyTG9ja09uQ2xpY2spIHtcbiAgICAgICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLnJlcXVlc3RQb2ludGVyTG9jayk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucmVxdWlyZU1vdXNlRG93bikge1xuICAgICAgICAgICAgaWYgKHRoaXMubW91c2VCdXR0b25JbmRleCA9PT0gMikge1xuICAgICAgICAgICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIHByZXZlbnREZWZhdWx0LCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93bik7XG4gICAgICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXF1ZXN0UG9pbnRlckxvY2sgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuZW5naW5lLmNhbnZhcztcbiAgICAgICAgY2FudmFzLnJlcXVlc3RQb2ludGVyTG9jayA9XG4gICAgICAgICAgICBjYW52YXMucmVxdWVzdFBvaW50ZXJMb2NrIHx8XG4gICAgICAgICAgICAgICAgY2FudmFzLm1velJlcXVlc3RQb2ludGVyTG9jayB8fFxuICAgICAgICAgICAgICAgIGNhbnZhcy53ZWJraXRSZXF1ZXN0UG9pbnRlckxvY2s7XG4gICAgICAgIGNhbnZhcy5yZXF1ZXN0UG9pbnRlckxvY2soKTtcbiAgICB9O1xuICAgIG9uTW91c2VEb3duID0gKGUpID0+IHtcbiAgICAgICAgaWYgKGUuYnV0dG9uID09PSB0aGlzLm1vdXNlQnV0dG9uSW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMubW91c2VEb3duID0gdHJ1ZTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJ2dyYWJiaW5nJztcbiAgICAgICAgICAgIGlmIChlLmJ1dHRvbiA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAvKiBQcmV2ZW50IHNjcm9sbGluZyAqL1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgb25Nb3VzZVVwID0gKGUpID0+IHtcbiAgICAgICAgaWYgKGUuYnV0dG9uID09PSB0aGlzLm1vdXNlQnV0dG9uSW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMubW91c2VEb3duID0gZmFsc2U7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICdpbml0aWFsJztcbiAgICAgICAgfVxuICAgIH07XG4gICAgb25Nb3VzZU1vdmUgPSAoZSkgPT4ge1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUgJiYgKHRoaXMubW91c2VEb3duIHx8ICF0aGlzLnJlcXVpcmVNb3VzZURvd24pKSB7XG4gICAgICAgICAgICB0aGlzLnJvdGF0aW9uWSA9ICgtdGhpcy5zZW5zaXRpdHkgKiBlLm1vdmVtZW50WCkgLyAxMDA7XG4gICAgICAgICAgICB0aGlzLnJvdGF0aW9uWCA9ICgtdGhpcy5zZW5zaXRpdHkgKiBlLm1vdmVtZW50WSkgLyAxMDA7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRSb3RhdGlvblggKz0gdGhpcy5yb3RhdGlvblg7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRSb3RhdGlvblkgKz0gdGhpcy5yb3RhdGlvblk7XG4gICAgICAgICAgICAvKiAxLjUwNyA9IFBJLzIgPSA5MFx1MDBCMCAqL1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50Um90YXRpb25YID0gTWF0aC5taW4oMS41MDcsIHRoaXMuY3VycmVudFJvdGF0aW9uWCk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRSb3RhdGlvblggPSBNYXRoLm1heCgtMS41MDcsIHRoaXMuY3VycmVudFJvdGF0aW9uWCk7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5nZXRQb3NpdGlvbldvcmxkKHRoaXMub3JpZ2luKTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMub2JqZWN0LnBhcmVudDtcbiAgICAgICAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnQuZ2V0UG9zaXRpb25Xb3JsZCh0aGlzLnBhcmVudE9yaWdpbik7XG4gICAgICAgICAgICAgICAgdmVjMy5zdWIodGhpcy5vcmlnaW4sIHRoaXMub3JpZ2luLCB0aGlzLnBhcmVudE9yaWdpbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5yZXNldFBvc2l0aW9uUm90YXRpb24oKTtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnJvdGF0ZUF4aXNBbmdsZVJhZExvY2FsKFsxLCAwLCAwXSwgdGhpcy5jdXJyZW50Um90YXRpb25YKTtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnJvdGF0ZUF4aXNBbmdsZVJhZExvY2FsKFswLCAxLCAwXSwgdGhpcy5jdXJyZW50Um90YXRpb25ZKTtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnRyYW5zbGF0ZUxvY2FsKHRoaXMub3JpZ2luKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5mbG9hdCgwLjI1KVxuXSwgTW91c2VMb29rQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZW5zaXRpdHlcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmJvb2wodHJ1ZSlcbl0sIE1vdXNlTG9va0NvbXBvbmVudC5wcm90b3R5cGUsIFwicmVxdWlyZU1vdXNlRG93blwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuaW50KClcbl0sIE1vdXNlTG9va0NvbXBvbmVudC5wcm90b3R5cGUsIFwibW91c2VCdXR0b25JbmRleFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuYm9vbChmYWxzZSlcbl0sIE1vdXNlTG9va0NvbXBvbmVudC5wcm90b3R5cGUsIFwicG9pbnRlckxvY2tPbkNsaWNrXCIsIHZvaWQgMCk7XG5leHBvcnQgeyBNb3VzZUxvb2tDb21wb25lbnQgfTtcbiIsICJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuaW1wb3J0IHsgcHJvcGVydHkgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGkvZGVjb3JhdG9ycy5qcyc7XG4vKipcbiAqIFNldCBwbGF5ZXIgaGVpZ2h0IGZvciBhIFktb2Zmc2V0IGFib3ZlIHRoZSBncm91bmQgZm9yXG4gKiAnbG9jYWwnIGFuZCAndmlld2VyJyByZWZlcmVuY2Ugc3BhY2VzLlxuICovXG5jbGFzcyBQbGF5ZXJIZWlnaHQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdwbGF5ZXItaGVpZ2h0JztcbiAgICBoZWlnaHQgPSAxLjc1O1xuICAgIG9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2s7XG4gICAgb25TZXNzaW9uRW5kQ2FsbGJhY2s7XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnJlc2V0UG9zaXRpb25Sb3RhdGlvbigpO1xuICAgICAgICB0aGlzLm9iamVjdC50cmFuc2xhdGVMb2NhbChbMC4wLCB0aGlzLmhlaWdodCwgMC4wXSk7XG4gICAgICAgIHRoaXMub25TZXNzaW9uU3RhcnRDYWxsYmFjayA9IHRoaXMub25YUlNlc3Npb25TdGFydC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uU2Vzc2lvbkVuZENhbGxiYWNrID0gdGhpcy5vblhSU2Vzc2lvbkVuZC5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICBvbkFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LmFkZCh0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2spO1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvbkVuZC5hZGQodGhpcy5vblNlc3Npb25FbmRDYWxsYmFjayk7XG4gICAgfVxuICAgIG9uRGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUub25YUlNlc3Npb25TdGFydC5yZW1vdmUodGhpcy5vblNlc3Npb25TdGFydENhbGxiYWNrKTtcbiAgICAgICAgdGhpcy5lbmdpbmUub25YUlNlc3Npb25FbmQucmVtb3ZlKHRoaXMub25TZXNzaW9uRW5kQ2FsbGJhY2spO1xuICAgIH1cbiAgICBvblhSU2Vzc2lvblN0YXJ0KCkge1xuICAgICAgICBjb25zdCB0eXBlID0gdGhpcy5lbmdpbmUueHI/LmN1cnJlbnRSZWZlcmVuY2VTcGFjZVR5cGU7XG4gICAgICAgIGlmICh0eXBlICE9PSAnbG9jYWwnICYmIHR5cGUgIT09ICd2aWV3ZXInKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5yZXNldFBvc2l0aW9uUm90YXRpb24oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvblhSU2Vzc2lvbkVuZCgpIHtcbiAgICAgICAgY29uc3QgdHlwZSA9IHRoaXMuZW5naW5lLnhyPy5jdXJyZW50UmVmZXJlbmNlU3BhY2VUeXBlO1xuICAgICAgICBpZiAodHlwZSAhPT0gJ2xvY2FsJyAmJiB0eXBlICE9PSAndmlld2VyJykge1xuICAgICAgICAgICAgdGhpcy5vYmplY3QucmVzZXRQb3NpdGlvblJvdGF0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC50cmFuc2xhdGVMb2NhbChbMC4wLCB0aGlzLmhlaWdodCwgMC4wXSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5mbG9hdCgxLjc1KVxuXSwgUGxheWVySGVpZ2h0LnByb3RvdHlwZSwgXCJoZWlnaHRcIiwgdm9pZCAwKTtcbmV4cG9ydCB7IFBsYXllckhlaWdodCB9O1xuIiwgImltcG9ydCB7IENvbXBvbmVudCwgVHlwZSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4vKipcbiAqIFNldHMgdGhlIHRhcmdldCBmcmFtZXJhdGVcbiAqXG4gKiBbVXBkYXRlcyB0aGUgdGFyZ2V0IGZyYW1lcmF0ZV0oaHR0cHM6Ly9pbW1lcnNpdmUtd2ViLmdpdGh1Yi5pby93ZWJ4ci8jZG9tLXhyc2Vzc2lvbi11cGRhdGV0YXJnZXRmcmFtZXJhdGUpXG4gKiB0byB0aGUgY2xvc2VzdCBbc3VwcG9ydGVkIHRhcmdldCBmcmFtZXJhdGVdKGh0dHBzOi8vaW1tZXJzaXZlLXdlYi5naXRodWIuaW8vd2VieHIvI2RvbS14cnNlc3Npb24tc3VwcG9ydGVkRnJhbWVSYXRlcylcbiAqIHRvIHRoZSBnaXZlbiBgZnJhbWVyYXRlYC5cbiAqXG4gKiBUaGUgdGFyZ2V0IGZyYW1lcmF0ZSBpcyB1c2VkIGZvciB0aGUgZGV2aWNlJ3MgVlIgY29tcG9zaXRvciBhcyBhbiBpbmRpY2F0aW9uIG9mIGhvdyBvZnRlbiB0byByZWZyZXNoIHRoZVxuICogc2NyZWVuIHdpdGggbmV3IGltYWdlcy4gVGhpcyBtZWFucyB0aGUgYXBwIHdpbGwgYmUgYXNrZWQgdG8gcHJvZHVjZSBmcmFtZXMgaW4gbW9yZSByZWd1bGFyIGludGVydmFscyxcbiAqIHBvdGVudGlhbGx5IHNwZW5kaW5nIGxlc3MgdGltZSBvbiBmcmFtZXMgdGhhdCBhcmUgbGlrZWx5IHRvIGJlIGRyb3BwZWQuXG4gKlxuICogRm9yIGFwcHMgd2l0aCBoZWF2eSBsb2FkLCBzZXR0aW5nIGEgd2VsbCBtYXRjaGluZyB0YXJnZXQgZnJhbWVyYXRlIGNhbiBpbXByb3ZlIHRoZSBhcHBzIHJlbmRlcmluZyBzdGFiaWxpdHlcbiAqIGFuZCByZWR1Y2Ugc3R1dHRlci5cbiAqXG4gKiBMaWtld2lzZSwgdGhlIHRhcmdldCBmcmFtZXJhdGUgY2FuIGJlIHVzZWQgdG8gZW5hYmxlIDEyMEh6IHJlZnJlc2ggcmF0ZXMgb24gT2N1bHVzIFF1ZXN0IDIgb24gc2ltcGxlciBhcHBzLlxuICovXG5jbGFzcyBUYXJnZXRGcmFtZXJhdGUgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICd0YXJnZXQtZnJhbWVyYXRlJztcbiAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtcbiAgICAgICAgZnJhbWVyYXRlOiB7IHR5cGU6IFR5cGUuRmxvYXQsIGRlZmF1bHQ6IDkwLjAgfSxcbiAgICB9O1xuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2sgPSB0aGlzLnNldFRhcmdldEZyYW1lcmF0ZS5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICBvbkFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LmFkZCh0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2spO1xuICAgIH1cbiAgICBvbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQucmVtb3ZlKHRoaXMub25TZXNzaW9uU3RhcnRDYWxsYmFjayk7XG4gICAgfVxuICAgIHNldFRhcmdldEZyYW1lcmF0ZShzKSB7XG4gICAgICAgIGlmIChzLnN1cHBvcnRlZEZyYW1lUmF0ZXMgJiYgcy51cGRhdGVUYXJnZXRGcmFtZVJhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGEgPSB0aGlzLmVuZ2luZS54ci5zZXNzaW9uLnN1cHBvcnRlZEZyYW1lUmF0ZXM7XG4gICAgICAgICAgICBhLnNvcnQoKGEsIGIpID0+IE1hdGguYWJzKGEgLSB0aGlzLmZyYW1lcmF0ZSkgLSBNYXRoLmFicyhiIC0gdGhpcy5mcmFtZXJhdGUpKTtcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLnhyLnNlc3Npb24udXBkYXRlVGFyZ2V0RnJhbWVSYXRlKGFbMF0pO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IHsgVGFyZ2V0RnJhbWVyYXRlIH07XG4iLCAiaW1wb3J0IHsgdmVjMywgcXVhdDIgfSBmcm9tICdnbC1tYXRyaXgnO1xuaW1wb3J0IHsgQ29tcG9uZW50LCBUeXBlIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbi8qKlxuICogVGVsZXBvcnQgVlIgbG9jb21vdGlvbi5cbiAqXG4gKiBTZWUgW1RlbGVwb3J0IEV4YW1wbGVdKC9zaG93Y2FzZS90ZWxlcG9ydCkuXG4gKi9cbmNsYXNzIFRlbGVwb3J0Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAndGVsZXBvcnQnO1xuICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge1xuICAgICAgICAvKiogT2JqZWN0IHRoYXQgd2lsbCBiZSBwbGFjZWQgYXMgaW5kaWNpYXRpb24gZm9yd2hlcmUgdGhlIHBsYXllciB3aWxsIHRlbGVwb3J0IHRvLiAqL1xuICAgICAgICB0ZWxlcG9ydEluZGljYXRvck1lc2hPYmplY3Q6IHsgdHlwZTogVHlwZS5PYmplY3QgfSxcbiAgICAgICAgLyoqIFJvb3Qgb2YgdGhlIHBsYXllciwgdGhlIG9iamVjdCB0aGF0IHdpbGwgYmUgcG9zaXRpb25lZCBvbiB0ZWxlcG9ydGF0aW9uLiAqL1xuICAgICAgICBjYW1Sb290OiB7IHR5cGU6IFR5cGUuT2JqZWN0IH0sXG4gICAgICAgIC8qKiBOb24tdnIgY2FtZXJhIGZvciB1c2Ugb3V0c2lkZSBvZiBWUiAqL1xuICAgICAgICBjYW06IHsgdHlwZTogVHlwZS5PYmplY3QgfSxcbiAgICAgICAgLyoqIExlZnQgZXllIGZvciB1c2UgaW4gVlIqL1xuICAgICAgICBleWVMZWZ0OiB7IHR5cGU6IFR5cGUuT2JqZWN0IH0sXG4gICAgICAgIC8qKiBSaWdodCBleWUgZm9yIHVzZSBpbiBWUiovXG4gICAgICAgIGV5ZVJpZ2h0OiB7IHR5cGU6IFR5cGUuT2JqZWN0IH0sXG4gICAgICAgIC8qKiBIYW5kZWRuZXNzIGZvciBWUiBjdXJzb3JzIHRvIGFjY2VwdCB0cmlnZ2VyIGV2ZW50cyBvbmx5IGZyb20gcmVzcGVjdGl2ZSBjb250cm9sbGVyLiAqL1xuICAgICAgICBoYW5kZWRuZXNzOiB7XG4gICAgICAgICAgICB0eXBlOiBUeXBlLkVudW0sXG4gICAgICAgICAgICB2YWx1ZXM6IFsnaW5wdXQgY29tcG9uZW50JywgJ2xlZnQnLCAncmlnaHQnLCAnbm9uZSddLFxuICAgICAgICAgICAgZGVmYXVsdDogJ2lucHV0IGNvbXBvbmVudCcsXG4gICAgICAgIH0sXG4gICAgICAgIC8qKiBDb2xsaXNpb24gZ3JvdXAgb2YgdmFsaWQgXCJmbG9vclwiIG9iamVjdHMgdGhhdCBjYW4gYmUgdGVsZXBvcnRlZCBvbiAqL1xuICAgICAgICBmbG9vckdyb3VwOiB7IHR5cGU6IFR5cGUuSW50LCBkZWZhdWx0OiAxIH0sXG4gICAgICAgIC8qKiBIb3cgZmFyIHRoZSB0aHVtYnN0aWNrIG5lZWRzIHRvIGJlIHB1c2hlZCB0byBoYXZlIHRoZSB0ZWxlcG9ydCB0YXJnZXQgaW5kaWNhdG9yIHNob3cgdXAgKi9cbiAgICAgICAgdGh1bWJzdGlja0FjdGl2YXRpb25UaHJlc2hob2xkOiB7IHR5cGU6IFR5cGUuRmxvYXQsIGRlZmF1bHQ6IC0wLjcgfSxcbiAgICAgICAgLyoqIEhvdyBmYXIgdGhlIHRodW1ic3RpY2sgbmVlZHMgdG8gYmUgcmVsZWFzZWQgdG8gZXhlY3V0ZSB0aGUgdGVsZXBvcnQgKi9cbiAgICAgICAgdGh1bWJzdGlja0RlYWN0aXZhdGlvblRocmVzaGhvbGQ6IHsgdHlwZTogVHlwZS5GbG9hdCwgZGVmYXVsdDogMC4zIH0sXG4gICAgICAgIC8qKiBPZmZzZXQgdG8gYXBwbHkgdG8gdGhlIGluZGljYXRvciBvYmplY3QsIGUuZy4gdG8gYXZvaWQgaXQgZnJvbSBaLWZpZ2h0aW5nIHdpdGggdGhlIGZsb29yICovXG4gICAgICAgIGluZGljYXRvcllPZmZzZXQ6IHsgdHlwZTogVHlwZS5GbG9hdCwgZGVmYXVsdDogMC4wMSB9LFxuICAgICAgICAvKiogTW9kZSBmb3IgcmF5Y2FzdGluZywgd2hldGhlciB0byB1c2UgUGh5c1ggb3Igc2ltcGxlIGNvbGxpc2lvbiBjb21wb25lbnRzICovXG4gICAgICAgIHJheUNhc3RNb2RlOiB7XG4gICAgICAgICAgICB0eXBlOiBUeXBlLkVudW0sXG4gICAgICAgICAgICB2YWx1ZXM6IFsnY29sbGlzaW9uJywgJ3BoeXN4J10sXG4gICAgICAgICAgICBkZWZhdWx0OiAnY29sbGlzaW9uJyxcbiAgICAgICAgfSxcbiAgICAgICAgLyoqIE1heCBkaXN0YW5jZSBmb3IgUGh5c1ggcmF5Y2FzdCAqL1xuICAgICAgICBtYXhEaXN0YW5jZTogeyB0eXBlOiBUeXBlLkZsb2F0LCBkZWZhdWx0OiAxMDAuMCB9LFxuICAgIH07XG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5fcHJldlRodW1ic3RpY2tBeGlzID0gbmV3IEZsb2F0MzJBcnJheSgyKTtcbiAgICAgICAgdGhpcy5fdGVtcFZlYyA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgICAgIHRoaXMuX3RlbXBWZWMwID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICAgICAgdGhpcy5fY3VycmVudEluZGljYXRvclJvdGF0aW9uID0gMDtcbiAgICAgICAgdGhpcy5pbnB1dCA9IHRoaXMub2JqZWN0LmdldENvbXBvbmVudCgnaW5wdXQnKTtcbiAgICAgICAgaWYgKCF0aGlzLmlucHV0KSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMub2JqZWN0Lm5hbWUsICdnZW5lcmljLXRlbGVwb3J0LWNvbXBvbmVudC5qczogaW5wdXQgY29tcG9uZW50IGlzIHJlcXVpcmVkIG9uIHRoZSBvYmplY3QnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMub2JqZWN0Lm5hbWUsICdnZW5lcmljLXRlbGVwb3J0LWNvbXBvbmVudC5qczogVGVsZXBvcnQgaW5kaWNhdG9yIG1lc2ggaXMgbWlzc2luZycpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5jYW1Sb290KSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMub2JqZWN0Lm5hbWUsICdnZW5lcmljLXRlbGVwb3J0LWNvbXBvbmVudC5qczogY2FtUm9vdCBub3Qgc2V0Jyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0luZGljYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pbmRpY2F0b3JIaWRkZW4gPSB0cnVlO1xuICAgICAgICB0aGlzLmhpdFNwb3QgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgICAgICB0aGlzLl9oYXNIaXQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZXh0cmFSb3RhdGlvbiA9IDA7XG4gICAgICAgIHRoaXMuX2N1cnJlbnRTdGlja0F4ZXMgPSBuZXcgRmxvYXQzMkFycmF5KDIpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2FtKSB7XG4gICAgICAgICAgICB0aGlzLmlzTW91c2VJbmRpY2F0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93bi5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5vbk1vdXNlVXAuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaGFuZGVkbmVzcyA9PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dENvbXAgPSB0aGlzLm9iamVjdC5nZXRDb21wb25lbnQoJ2lucHV0Jyk7XG4gICAgICAgICAgICBpZiAoIWlucHV0Q29tcCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybigndGVsZXBvcnQgY29tcG9uZW50IG9uIG9iamVjdCcsIHRoaXMub2JqZWN0Lm5hbWUsICd3YXMgY29uZmlndXJlZCB3aXRoIGhhbmRlZG5lc3MgXCJpbnB1dCBjb21wb25lbnRcIiwgJyArXG4gICAgICAgICAgICAgICAgICAgICdidXQgb2JqZWN0IGhhcyBubyBpbnB1dCBjb21wb25lbnQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRlZG5lc3MgPSBpbnB1dENvbXAuaGFuZGVkbmVzcztcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0ID0gaW5wdXRDb21wO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5oYW5kZWRuZXNzID0gWydsZWZ0JywgJ3JpZ2h0J11bdGhpcy5oYW5kZWRuZXNzIC0gMV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vblNlc3Npb25TdGFydENhbGxiYWNrID0gdGhpcy5zZXR1cFZSRXZlbnRzLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0LmFjdGl2ZSA9IGZhbHNlO1xuICAgIH1cbiAgICBvbkFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LmFkZCh0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2spO1xuICAgIH1cbiAgICBvbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQucmVtb3ZlKHRoaXMub25TZXNzaW9uU3RhcnRDYWxsYmFjayk7XG4gICAgfVxuICAgIC8qIEdldCBjdXJyZW50IGNhbWVyYSBZIHJvdGF0aW9uICovXG4gICAgX2dldENhbVJvdGF0aW9uKCkge1xuICAgICAgICB0aGlzLmV5ZUxlZnQuZ2V0Rm9yd2FyZCh0aGlzLl90ZW1wVmVjKTtcbiAgICAgICAgdGhpcy5fdGVtcFZlY1sxXSA9IDA7XG4gICAgICAgIHZlYzMubm9ybWFsaXplKHRoaXMuX3RlbXBWZWMsIHRoaXMuX3RlbXBWZWMpO1xuICAgICAgICByZXR1cm4gTWF0aC5hdGFuMih0aGlzLl90ZW1wVmVjWzBdLCB0aGlzLl90ZW1wVmVjWzJdKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICBsZXQgaW5wdXRMZW5ndGggPSAwO1xuICAgICAgICBpZiAodGhpcy5nYW1lcGFkICYmIHRoaXMuZ2FtZXBhZC5heGVzKSB7XG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50U3RpY2tBeGVzWzBdID0gdGhpcy5nYW1lcGFkLmF4ZXNbMl07XG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50U3RpY2tBeGVzWzFdID0gdGhpcy5nYW1lcGFkLmF4ZXNbM107XG4gICAgICAgICAgICBpbnB1dExlbmd0aCA9XG4gICAgICAgICAgICAgICAgTWF0aC5hYnModGhpcy5fY3VycmVudFN0aWNrQXhlc1swXSkgKyBNYXRoLmFicyh0aGlzLl9jdXJyZW50U3RpY2tBeGVzWzFdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaXNJbmRpY2F0aW5nICYmXG4gICAgICAgICAgICB0aGlzLl9wcmV2VGh1bWJzdGlja0F4aXNbMV0gPj0gdGhpcy50aHVtYnN0aWNrQWN0aXZhdGlvblRocmVzaGhvbGQgJiZcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRTdGlja0F4ZXNbMV0gPCB0aGlzLnRodW1ic3RpY2tBY3RpdmF0aW9uVGhyZXNoaG9sZCkge1xuICAgICAgICAgICAgdGhpcy5pc0luZGljYXRpbmcgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaXNJbmRpY2F0aW5nICYmXG4gICAgICAgICAgICBpbnB1dExlbmd0aCA8IHRoaXMudGh1bWJzdGlja0RlYWN0aXZhdGlvblRocmVzaGhvbGQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNJbmRpY2F0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnRlbGVwb3J0SW5kaWNhdG9yTWVzaE9iamVjdC5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9oYXNIaXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90ZWxlcG9ydFBsYXllcih0aGlzLmhpdFNwb3QsIHRoaXMuX2V4dHJhUm90YXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzSW5kaWNhdGluZyAmJiB0aGlzLnRlbGVwb3J0SW5kaWNhdG9yTWVzaE9iamVjdCAmJiB0aGlzLmlucHV0KSB7XG4gICAgICAgICAgICBjb25zdCBvcmlnaW4gPSB0aGlzLl90ZW1wVmVjMDtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LmdldFBvc2l0aW9uV29ybGQob3JpZ2luKTtcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMub2JqZWN0LmdldEZvcndhcmRXb3JsZCh0aGlzLl90ZW1wVmVjKTtcbiAgICAgICAgICAgIGxldCByYXlIaXQgPSAodGhpcy5yYXlIaXQgPVxuICAgICAgICAgICAgICAgIHRoaXMucmF5Q2FzdE1vZGUgPT0gMFxuICAgICAgICAgICAgICAgICAgICA/IHRoaXMuZW5naW5lLnNjZW5lLnJheUNhc3Qob3JpZ2luLCBkaXJlY3Rpb24sIDEgPDwgdGhpcy5mbG9vckdyb3VwKVxuICAgICAgICAgICAgICAgICAgICA6IHRoaXMuZW5naW5lLnBoeXNpY3MucmF5Q2FzdChvcmlnaW4sIGRpcmVjdGlvbiwgMSA8PCB0aGlzLmZsb29yR3JvdXAsIHRoaXMubWF4RGlzdGFuY2UpKTtcbiAgICAgICAgICAgIGlmIChyYXlIaXQuaGl0Q291bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3JIaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLl9leHRyYVJvdGF0aW9uID1cbiAgICAgICAgICAgICAgICAgICAgTWF0aC5QSSArXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmF0YW4yKHRoaXMuX2N1cnJlbnRTdGlja0F4ZXNbMF0sIHRoaXMuX2N1cnJlbnRTdGlja0F4ZXNbMV0pO1xuICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRJbmRpY2F0b3JSb3RhdGlvbiA9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2dldENhbVJvdGF0aW9uKCkgKyAodGhpcy5fZXh0cmFSb3RhdGlvbiAtIE1hdGguUEkpO1xuICAgICAgICAgICAgICAgIHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0LnJlc2V0UG9zaXRpb25Sb3RhdGlvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0LnJvdGF0ZUF4aXNBbmdsZVJhZChbMCwgMSwgMF0sIHRoaXMuX2N1cnJlbnRJbmRpY2F0b3JSb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgdGhpcy50ZWxlcG9ydEluZGljYXRvck1lc2hPYmplY3QudHJhbnNsYXRlKHJheUhpdC5sb2NhdGlvbnNbMF0pO1xuICAgICAgICAgICAgICAgIHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0LnRyYW5zbGF0ZShbXG4gICAgICAgICAgICAgICAgICAgIDAuMCxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3JZT2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICAwLjAsXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgdGhpcy50ZWxlcG9ydEluZGljYXRvck1lc2hPYmplY3QuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmhpdFNwb3Quc2V0KHJheUhpdC5sb2NhdGlvbnNbMF0pO1xuICAgICAgICAgICAgICAgIHRoaXMuX2hhc0hpdCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaW5kaWNhdG9ySGlkZGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0LmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGljYXRvckhpZGRlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuX2hhc0hpdCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0ICYmIHRoaXMuaXNNb3VzZUluZGljYXRpbmcpIHtcbiAgICAgICAgICAgIHRoaXMub25Nb3VzZVByZXNzZWQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9wcmV2VGh1bWJzdGlja0F4aXMuc2V0KHRoaXMuX2N1cnJlbnRTdGlja0F4ZXMpO1xuICAgIH1cbiAgICBzZXR1cFZSRXZlbnRzKHMpIHtcbiAgICAgICAgLyogSWYgaW4gVlIsIG9uZS10aW1lIGJpbmQgdGhlIGxpc3RlbmVyICovXG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IHM7XG4gICAgICAgIHMuYWRkRXZlbnRMaXN0ZW5lcignZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLyogUmVzZXQgY2FjaGUgb25jZSB0aGUgc2Vzc2lvbiBlbmRzIHRvIHJlYmluZCBzZWxlY3QgZXRjLCBpbiBjYXNlXG4gICAgICAgICAgICAgKiBpdCBzdGFydHMgYWdhaW4gKi9cbiAgICAgICAgICAgIHRoaXMuZ2FtZXBhZCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb24gPSBudWxsO1xuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICBpZiAocy5pbnB1dFNvdXJjZXMgJiYgcy5pbnB1dFNvdXJjZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHMuaW5wdXRTb3VyY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGlucHV0U291cmNlID0gcy5pbnB1dFNvdXJjZXNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0U291cmNlLmhhbmRlZG5lc3MgPT0gdGhpcy5oYW5kZWRuZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZXBhZCA9IGlucHV0U291cmNlLmdhbWVwYWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHMuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXRzb3VyY2VzY2hhbmdlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmFkZGVkICYmIGUuYWRkZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlLmFkZGVkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnB1dFNvdXJjZSA9IGUuYWRkZWRbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dFNvdXJjZS5oYW5kZWRuZXNzID09IHRoaXMuaGFuZGVkbmVzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lcGFkID0gaW5wdXRTb3VyY2UuZ2FtZXBhZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICB9XG4gICAgb25Nb3VzZURvd24oKSB7XG4gICAgICAgIHRoaXMuaXNNb3VzZUluZGljYXRpbmcgPSB0cnVlO1xuICAgIH1cbiAgICBvbk1vdXNlVXAoKSB7XG4gICAgICAgIHRoaXMuaXNNb3VzZUluZGljYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50ZWxlcG9ydEluZGljYXRvck1lc2hPYmplY3QuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLl9oYXNIaXQpIHtcbiAgICAgICAgICAgIHRoaXMuX3RlbGVwb3J0UGxheWVyKHRoaXMuaGl0U3BvdCwgMC4wKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvbk1vdXNlUHJlc3NlZCgpIHtcbiAgICAgICAgbGV0IG9yaWdpbiA9IFswLCAwLCAwXTtcbiAgICAgICAgdGhpcy5jYW0uZ2V0UG9zaXRpb25Xb3JsZChvcmlnaW4pO1xuICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLmNhbS5nZXRGb3J3YXJkKHRoaXMuX3RlbXBWZWMpO1xuICAgICAgICBsZXQgcmF5SGl0ID0gKHRoaXMucmF5SGl0ID1cbiAgICAgICAgICAgIHRoaXMucmF5Q2FzdE1vZGUgPT0gMFxuICAgICAgICAgICAgICAgID8gdGhpcy5lbmdpbmUuc2NlbmUucmF5Q2FzdChvcmlnaW4sIGRpcmVjdGlvbiwgMSA8PCB0aGlzLmZsb29yR3JvdXApXG4gICAgICAgICAgICAgICAgOiB0aGlzLmVuZ2luZS5waHlzaWNzLnJheUNhc3Qob3JpZ2luLCBkaXJlY3Rpb24sIDEgPDwgdGhpcy5mbG9vckdyb3VwLCB0aGlzLm1heERpc3RhbmNlKSk7XG4gICAgICAgIGlmIChyYXlIaXQuaGl0Q291bnQgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLmluZGljYXRvckhpZGRlbiA9IGZhbHNlO1xuICAgICAgICAgICAgZGlyZWN0aW9uWzFdID0gMDtcbiAgICAgICAgICAgIHZlYzMubm9ybWFsaXplKGRpcmVjdGlvbiwgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRJbmRpY2F0b3JSb3RhdGlvbiA9XG4gICAgICAgICAgICAgICAgLU1hdGguc2lnbihkaXJlY3Rpb25bMl0pICogTWF0aC5hY29zKGRpcmVjdGlvblswXSkgLSBNYXRoLlBJICogMC41O1xuICAgICAgICAgICAgdGhpcy50ZWxlcG9ydEluZGljYXRvck1lc2hPYmplY3QucmVzZXRQb3NpdGlvblJvdGF0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLnRlbGVwb3J0SW5kaWNhdG9yTWVzaE9iamVjdC5yb3RhdGVBeGlzQW5nbGVSYWQoWzAsIDEsIDBdLCB0aGlzLl9jdXJyZW50SW5kaWNhdG9yUm90YXRpb24pO1xuICAgICAgICAgICAgdGhpcy50ZWxlcG9ydEluZGljYXRvck1lc2hPYmplY3QudHJhbnNsYXRlKHJheUhpdC5sb2NhdGlvbnNbMF0pO1xuICAgICAgICAgICAgdGhpcy50ZWxlcG9ydEluZGljYXRvck1lc2hPYmplY3QuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaGl0U3BvdCA9IHJheUhpdC5sb2NhdGlvbnNbMF07XG4gICAgICAgICAgICB0aGlzLl9oYXNIaXQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmluZGljYXRvckhpZGRlbikge1xuICAgICAgICAgICAgICAgIHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0LmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5kaWNhdG9ySGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2hhc0hpdCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIF90ZWxlcG9ydFBsYXllcihuZXdQb3NpdGlvbiwgcm90YXRpb25Ub0FkZCkge1xuICAgICAgICB0aGlzLmNhbVJvb3Qucm90YXRlQXhpc0FuZ2xlUmFkKFswLCAxLCAwXSwgcm90YXRpb25Ub0FkZCk7XG4gICAgICAgIGNvbnN0IHAgPSB0aGlzLl90ZW1wVmVjO1xuICAgICAgICBjb25zdCBwMSA9IHRoaXMuX3RlbXBWZWMwO1xuICAgICAgICBpZiAodGhpcy5zZXNzaW9uKSB7XG4gICAgICAgICAgICB0aGlzLmV5ZUxlZnQuZ2V0UG9zaXRpb25Xb3JsZChwKTtcbiAgICAgICAgICAgIHRoaXMuZXllUmlnaHQuZ2V0UG9zaXRpb25Xb3JsZChwMSk7XG4gICAgICAgICAgICB2ZWMzLmFkZChwLCBwLCBwMSk7XG4gICAgICAgICAgICB2ZWMzLnNjYWxlKHAsIHAsIDAuNSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNhbS5nZXRQb3NpdGlvbldvcmxkKHApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2FtUm9vdC5nZXRQb3NpdGlvbldvcmxkKHAxKTtcbiAgICAgICAgdmVjMy5zdWIocCwgcDEsIHApO1xuICAgICAgICBwWzBdICs9IG5ld1Bvc2l0aW9uWzBdO1xuICAgICAgICBwWzFdID0gbmV3UG9zaXRpb25bMV07XG4gICAgICAgIHBbMl0gKz0gbmV3UG9zaXRpb25bMl07XG4gICAgICAgIHRoaXMuY2FtUm9vdC5zZXRQb3NpdGlvbldvcmxkKHApO1xuICAgIH1cbn1cbmV4cG9ydCB7IFRlbGVwb3J0Q29tcG9uZW50IH07XG4iLCAidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgQ29tcG9uZW50LCBNZXNoLCBNZXNoSW5kZXhUeXBlLCBNZXNoQXR0cmlidXRlLCB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IHZlYzMgfSBmcm9tICdnbC1tYXRyaXgnO1xuY29uc3QgZGlyZWN0aW9uID0gdmVjMy5jcmVhdGUoKTtcbmNvbnN0IG9mZnNldCA9IHZlYzMuY3JlYXRlKCk7XG5jb25zdCBub3JtYWwgPSB2ZWMzLmNyZWF0ZSgpO1xuY29uc3QgVVAgPSB2ZWMzLmZyb21WYWx1ZXMoMCwgMSwgMCk7XG4vKipcbiAqIER5bmFtaWMgbWVzaC1iYXNlZCB0cmFpbFxuICpcbiAqIFRoaXMgY29tcG9uZW50IGtlZXBzIHRyYWNrIG9mIHRoZSB3b3JsZCBwb3NpdGlvbiBvZiB0aGUgb2JqZWN0IGl0J3MgYWRkZWQgdG8uXG4gKiBBdCBhIGZpeGVkIGludGVydmFsIHRoZSB3b3JsZCBwb3NpdGlvbiBpcyBzdG9yZWQgYXMgc3RhcnQgYW5kIGVuZCBwb2ludHMgb2YgdGhlIHRyYWlsIHNlZ21lbnRzLlxuICpcbiAqIFRoZSB0cmFpbCB0YXBlcnMgb2ZmIGFsb25nIGl0cyBsZW5ndGguIFVWIHRleHR1cmUgY29vcmRpbmF0ZXMgYXJlIHNldHVwIHN1Y2ggdGhhdCB0aGVcbiAqIFUtYXhpcyBjb3ZlcnMgdGhlIHdpZHRoIG9mIHRoZSB0cmFpbCBhbmQgdGhlIFYtYXhpcyBjb3ZlcnMgdGhlIGxlbmd0aCBvZiB0aGUgdHJhaWwuXG4gKiBUaGlzIGFsbG93cyB0aGUgdHJhaWwncyBhcHBlYXJhbmNlIHRvIGJlIGRlZmluZWQgdXNpbmcgYSB0ZXh0dXJlLlxuICovXG5jbGFzcyBUcmFpbCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ3RyYWlsJztcbiAgICAvKiogVGhlIG1hdGVyaWFsIHRvIGFwcGx5IHRvIHRoZSB0cmFpbCBtZXNoICovXG4gICAgbWF0ZXJpYWwgPSBudWxsO1xuICAgIC8qKiBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIGluIHRoZSB0cmFpbCBtZXNoICovXG4gICAgc2VnbWVudHMgPSA1MDtcbiAgICAvKiogVGhlIHRpbWUgaW50ZXJ2YWwgYmVmb3JlIHJlY29yZGluZyBhIG5ldyBwb2ludCAqL1xuICAgIGludGVydmFsID0gMC4xO1xuICAgIC8qKiBUaGUgd2lkdGggb2YgdGhlIHRyYWlsIChpbiB3b3JsZCBzcGFjZSkgKi9cbiAgICB3aWR0aCA9IDEuMDtcbiAgICAvKiogV2hldGhlciBvciBub3QgdGhlIHRyYWlsIHNob3VsZCB0YXBlciBvZmYgKi9cbiAgICB0YXBlciA9IHRydWU7XG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gZGVsdGEgdGltZSBpbiBzZWNvbmRzLCBhYm92ZSB3aGljaCB0aGUgdHJhaWwgcmVzZXRzLlxuICAgICAqIFRoaXMgcHJldmVudHMgdGhlIHRyYWlsIGZyb20ganVtcGluZyBhcm91bmQgd2hlbiB1cGRhdGVzIGhhcHBlblxuICAgICAqIGluZnJlcXVlbnRseSAoZS5nLiB3aGVuIHRoZSB0YWIgZG9lc24ndCBoYXZlIGZvY3VzKS5cbiAgICAgKi9cbiAgICByZXNldFRocmVzaG9sZCA9IDAuNTtcbiAgICBfY3VycmVudFBvaW50SW5kZXggPSAwO1xuICAgIF90aW1lVGlsbE5leHQgPSAwO1xuICAgIF9wb2ludHMgPSBbXTtcbiAgICBfdHJhaWxDb250YWluZXIgPSBudWxsO1xuICAgIF9tZXNoQ29tcCA9IG51bGw7XG4gICAgX21lc2ggPSBudWxsO1xuICAgIF9pbmRleERhdGEgPSBudWxsO1xuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLl9wb2ludHMgPSBuZXcgQXJyYXkodGhpcy5zZWdtZW50cyArIDEpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3BvaW50cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5fcG9pbnRzW2ldID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICAvKiBUaGUgcG9pbnRzIGFycmF5IGlzIGNpcmN1bGFyLCBzbyBrZWVwIHRyYWNrIG9mIGl0cyBoZWFkICovXG4gICAgICAgIHRoaXMuX3RpbWVUaWxsTmV4dCA9IHRoaXMuaW50ZXJ2YWw7XG4gICAgICAgIHRoaXMuX3RyYWlsQ29udGFpbmVyID0gdGhpcy5lbmdpbmUuc2NlbmUuYWRkT2JqZWN0KCk7XG4gICAgICAgIHRoaXMuX21lc2hDb21wID0gdGhpcy5fdHJhaWxDb250YWluZXIuYWRkQ29tcG9uZW50KCdtZXNoJyk7XG4gICAgICAgIHRoaXMuX21lc2hDb21wLm1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbDtcbiAgICAgICAgLyogRWFjaCBwb2ludCB3aWxsIGhhdmUgdHdvIHZlcnRpY2VzOyBvbmUgb24gZWl0aGVyIHNpZGUgKi9cbiAgICAgICAgY29uc3QgdmVydGV4Q291bnQgPSAyICogdGhpcy5fcG9pbnRzLmxlbmd0aDtcbiAgICAgICAgLyogRWFjaCBzZWdtZW50IGNvbnNpc3RzIG9mIHR3byB0cmlhbmdsZXMgKi9cbiAgICAgICAgdGhpcy5faW5kZXhEYXRhID0gbmV3IFVpbnQzMkFycmF5KDYgKiB0aGlzLnNlZ21lbnRzKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIHYgPSAwOyBpIDwgdmVydGV4Q291bnQgLSAyOyBpICs9IDIsIHYgKz0gNikge1xuICAgICAgICAgICAgdGhpcy5faW5kZXhEYXRhXG4gICAgICAgICAgICAgICAgLnN1YmFycmF5KHYsIHYgKyA2KVxuICAgICAgICAgICAgICAgIC5zZXQoW2kgKyAxLCBpICsgMCwgaSArIDIsIGkgKyAyLCBpICsgMywgaSArIDFdKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9tZXNoID0gbmV3IE1lc2godGhpcy5lbmdpbmUsIHtcbiAgICAgICAgICAgIHZlcnRleENvdW50OiB2ZXJ0ZXhDb3VudCxcbiAgICAgICAgICAgIGluZGV4RGF0YTogdGhpcy5faW5kZXhEYXRhLFxuICAgICAgICAgICAgaW5kZXhUeXBlOiBNZXNoSW5kZXhUeXBlLlVuc2lnbmVkSW50LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fbWVzaENvbXAubWVzaCA9IHRoaXMuX21lc2g7XG4gICAgfVxuICAgIHVwZGF0ZVZlcnRpY2VzKCkge1xuICAgICAgICBpZiAoIXRoaXMuX21lc2gpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHBvc2l0aW9ucyA9IHRoaXMuX21lc2guYXR0cmlidXRlKE1lc2hBdHRyaWJ1dGUuUG9zaXRpb24pO1xuICAgICAgICBjb25zdCB0ZXhDb29yZHMgPSB0aGlzLl9tZXNoLmF0dHJpYnV0ZShNZXNoQXR0cmlidXRlLlRleHR1cmVDb29yZGluYXRlKTtcbiAgICAgICAgY29uc3Qgbm9ybWFscyA9IHRoaXMuX21lc2guYXR0cmlidXRlKE1lc2hBdHRyaWJ1dGUuTm9ybWFsKTtcbiAgICAgICAgdmVjMy5zZXQoZGlyZWN0aW9uLCAwLCAwLCAwKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9wb2ludHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnIgPSB0aGlzLl9wb2ludHNbKHRoaXMuX2N1cnJlbnRQb2ludEluZGV4ICsgaSArIDEpICUgdGhpcy5fcG9pbnRzLmxlbmd0aF07XG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gdGhpcy5fcG9pbnRzWyh0aGlzLl9jdXJyZW50UG9pbnRJbmRleCArIGkgKyAyKSAlIHRoaXMuX3BvaW50cy5sZW5ndGhdO1xuICAgICAgICAgICAgLyogVGhlIGxhc3QgcG9pbnQgaGFzIG5vIG5leHQsIHNvIHJlLXVzZSB0aGUgZGlyZWN0aW9uIG9mIHRoZSBwcmV2aW91cyBzZWdtZW50ICovXG4gICAgICAgICAgICBpZiAoaSAhPT0gdGhpcy5fcG9pbnRzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICB2ZWMzLnN1YihkaXJlY3Rpb24sIG5leHQsIGN1cnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmVjMy5jcm9zcyhvZmZzZXQsIFVQLCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUob2Zmc2V0LCBvZmZzZXQpO1xuICAgICAgICAgICAgY29uc3QgdGltZUZyYWN0aW9uID0gMS4wIC0gdGhpcy5fdGltZVRpbGxOZXh0IC8gdGhpcy5pbnRlcnZhbDtcbiAgICAgICAgICAgIGNvbnN0IGZyYWN0aW9uID0gKGkgLSB0aW1lRnJhY3Rpb24pIC8gdGhpcy5zZWdtZW50cztcbiAgICAgICAgICAgIHZlYzMuc2NhbGUob2Zmc2V0LCBvZmZzZXQsICgodGhpcy50YXBlciA/IGZyYWN0aW9uIDogMS4wKSAqIHRoaXMud2lkdGgpIC8gMi4wKTtcbiAgICAgICAgICAgIHBvc2l0aW9ucy5zZXQoaSAqIDIsIFtcbiAgICAgICAgICAgICAgICBjdXJyWzBdIC0gb2Zmc2V0WzBdLFxuICAgICAgICAgICAgICAgIGN1cnJbMV0gLSBvZmZzZXRbMV0sXG4gICAgICAgICAgICAgICAgY3VyclsyXSAtIG9mZnNldFsyXSxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgcG9zaXRpb25zLnNldChpICogMiArIDEsIFtcbiAgICAgICAgICAgICAgICBjdXJyWzBdICsgb2Zmc2V0WzBdLFxuICAgICAgICAgICAgICAgIGN1cnJbMV0gKyBvZmZzZXRbMV0sXG4gICAgICAgICAgICAgICAgY3VyclsyXSArIG9mZnNldFsyXSxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgaWYgKG5vcm1hbHMpIHtcbiAgICAgICAgICAgICAgICB2ZWMzLmNyb3NzKG5vcm1hbCwgZGlyZWN0aW9uLCBvZmZzZXQpO1xuICAgICAgICAgICAgICAgIHZlYzMubm9ybWFsaXplKG5vcm1hbCwgbm9ybWFsKTtcbiAgICAgICAgICAgICAgICBub3JtYWxzLnNldChpICogMiwgbm9ybWFsKTtcbiAgICAgICAgICAgICAgICBub3JtYWxzLnNldChpICogMiArIDEsIG5vcm1hbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGV4Q29vcmRzKSB7XG4gICAgICAgICAgICAgICAgdGV4Q29vcmRzLnNldChpICogMiwgWzAsIGZyYWN0aW9uXSk7XG4gICAgICAgICAgICAgICAgdGV4Q29vcmRzLnNldChpICogMiArIDEsIFsxLCBmcmFjdGlvbl0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qIE5vdGlmeSBXTEUgdGhhdCB0aGUgbWVzaCBoYXMgY2hhbmdlZCAqL1xuICAgICAgICB0aGlzLl9tZXNoLnVwZGF0ZSgpO1xuICAgIH1cbiAgICByZXNldFRyYWlsKCkge1xuICAgICAgICB0aGlzLm9iamVjdC5nZXRQb3NpdGlvbldvcmxkKHRoaXMuX3BvaW50c1swXSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5fcG9pbnRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2ZWMzLmNvcHkodGhpcy5fcG9pbnRzW2ldLCB0aGlzLl9wb2ludHNbMF0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2N1cnJlbnRQb2ludEluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5fdGltZVRpbGxOZXh0ID0gdGhpcy5pbnRlcnZhbDtcbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIHRoaXMuX3RpbWVUaWxsTmV4dCAtPSBkdDtcbiAgICAgICAgaWYgKGR0ID4gdGhpcy5yZXNldFRocmVzaG9sZCkge1xuICAgICAgICAgICAgdGhpcy5yZXNldFRyYWlsKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX3RpbWVUaWxsTmV4dCA8IDApIHtcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRQb2ludEluZGV4ID0gKHRoaXMuX2N1cnJlbnRQb2ludEluZGV4ICsgMSkgJSB0aGlzLl9wb2ludHMubGVuZ3RoO1xuICAgICAgICAgICAgdGhpcy5fdGltZVRpbGxOZXh0ID0gKHRoaXMuX3RpbWVUaWxsTmV4dCAlIHRoaXMuaW50ZXJ2YWwpICsgdGhpcy5pbnRlcnZhbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9iamVjdC5nZXRQb3NpdGlvbldvcmxkKHRoaXMuX3BvaW50c1t0aGlzLl9jdXJyZW50UG9pbnRJbmRleF0pO1xuICAgICAgICB0aGlzLnVwZGF0ZVZlcnRpY2VzKCk7XG4gICAgfVxuICAgIG9uQWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMucmVzZXRUcmFpbCgpO1xuICAgICAgICBpZiAodGhpcy5fbWVzaENvbXApXG4gICAgICAgICAgICB0aGlzLl9tZXNoQ29tcC5hY3RpdmUgPSB0cnVlO1xuICAgIH1cbiAgICBvbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLl9tZXNoQ29tcClcbiAgICAgICAgICAgIHRoaXMuX21lc2hDb21wLmFjdGl2ZSA9IGZhbHNlO1xuICAgIH1cbiAgICBvbkRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLl90cmFpbENvbnRhaW5lcilcbiAgICAgICAgICAgIHRoaXMuX3RyYWlsQ29udGFpbmVyLmRlc3Ryb3koKTtcbiAgICAgICAgaWYgKHRoaXMuX21lc2hDb21wKVxuICAgICAgICAgICAgdGhpcy5fbWVzaENvbXAuZGVzdHJveSgpO1xuICAgICAgICBpZiAodGhpcy5fbWVzaClcbiAgICAgICAgICAgIHRoaXMuX21lc2guZGVzdHJveSgpO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5Lm1hdGVyaWFsKClcbl0sIFRyYWlsLnByb3RvdHlwZSwgXCJtYXRlcmlhbFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuaW50KDUwKVxuXSwgVHJhaWwucHJvdG90eXBlLCBcInNlZ21lbnRzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5mbG9hdCg1MClcbl0sIFRyYWlsLnByb3RvdHlwZSwgXCJpbnRlcnZhbFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoMS4wKVxuXSwgVHJhaWwucHJvdG90eXBlLCBcIndpZHRoXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5ib29sKHRydWUpXG5dLCBUcmFpbC5wcm90b3R5cGUsIFwidGFwZXJcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmZsb2F0KDEuMClcbl0sIFRyYWlsLnByb3RvdHlwZSwgXCJyZXNldFRocmVzaG9sZFwiLCB2b2lkIDApO1xuZXhwb3J0IHsgVHJhaWwgfTtcbiIsICJpbXBvcnQgeyBDb21wb25lbnQsIFByb3BlcnR5IH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbmltcG9ydCB7IHZlYzMgfSBmcm9tICdnbC1tYXRyaXgnO1xuZnVuY3Rpb24gY2xhbXAodiwgYSwgYikge1xuICAgIHJldHVybiBNYXRoLm1heChhLCBNYXRoLm1pbih2LCBiKSk7XG59XG5jb25zdCByb290U2NhbGluZyA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG5jb25zdCB0ZW1wUXVhdCA9IG5ldyBGbG9hdDMyQXJyYXkoNCk7XG5jb25zdCBtaWRkbGVQb3MgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuY29uc3QgZW5kUG9zID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbmNvbnN0IHRhcmdldFBvcyA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG5jb25zdCBoZWxwZXJQb3MgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuY29uc3Qgcm9vdFRyYW5zZm9ybSA9IG5ldyBGbG9hdDMyQXJyYXkoOCk7XG5jb25zdCBtaWRkbGVUcmFuc2Zvcm0gPSBuZXcgRmxvYXQzMkFycmF5KDgpO1xuY29uc3QgZW5kVHJhbnNmb3JtID0gbmV3IEZsb2F0MzJBcnJheSg4KTtcbi8qKlxuICogU29sdmUgaW52ZXJzZSBraW5lbWF0aWNzIGZvciBhIHR3byBqb2ludCBjaGFpbnNcbiAqXG4gKiBJbnNwaXJlZCBieSBodHRwOi8vdGhlb3JhbmdlZHVjay5jb20vcGFnZS9zaW1wbGUtdHdvLWpvaW50XG4gKi9cbmNvbnN0IHR3b0pvaW50SUsgPSAoZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHRhID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICBjb25zdCBjYSA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgY29uc3QgYmEgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgIGNvbnN0IGFiID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICBjb25zdCBjYiA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgY29uc3QgYXhpczAgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgIGNvbnN0IGF4aXMxID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICBjb25zdCB0ZW1wID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHJvb3QsIG1pZGRsZSwgYiwgYywgdGFyZ2V0UG9zLCBlcHMsIGhlbHBlcikge1xuICAgICAgICAvKiBhID0gWzAsIDAsIDBdLCBzaW5jZSBldmVyeXRoaW5nIGlzIGNvbXB1dGVkIGluIHJvb3Qtc3BhY2UgKi9cbiAgICAgICAgYmEuc2V0KGIpO1xuICAgICAgICBjb25zdCBsYWIgPSB2ZWMzLmxlbmd0aChiYSk7XG4gICAgICAgIHZlYzMuc3ViKHRhLCBiLCBjKTtcbiAgICAgICAgY29uc3QgbGNiID0gdmVjMy5sZW5ndGgodGEpO1xuICAgICAgICB0YS5zZXQodGFyZ2V0UG9zKTtcbiAgICAgICAgY29uc3QgbGF0ID0gY2xhbXAodmVjMy5sZW5ndGgodGEpLCBlcHMsIGxhYiArIGxjYiAtIGVwcyk7XG4gICAgICAgIGNhLnNldChjKTtcbiAgICAgICAgdmVjMy5zY2FsZShhYiwgYiwgLTEpO1xuICAgICAgICB2ZWMzLnN1YihjYiwgYywgYik7XG4gICAgICAgIHZlYzMubm9ybWFsaXplKGNhLCBjYSk7XG4gICAgICAgIHZlYzMubm9ybWFsaXplKGJhLCBiYSk7XG4gICAgICAgIHZlYzMubm9ybWFsaXplKGFiLCBhYik7XG4gICAgICAgIHZlYzMubm9ybWFsaXplKGNiLCBjYik7XG4gICAgICAgIHZlYzMubm9ybWFsaXplKHRhLCB0YSk7XG4gICAgICAgIC8qIFN1cHBvc2VkbHkgbnVtZXJpY2FsIGVycm9ycyBjYW4gY2F1c2UgdGhlIGRvdCB0byBnbyBvdXQgb2YgLTEsIDEgcmFuZ2UgKi9cbiAgICAgICAgY29uc3QgYWNfYWJfMCA9IE1hdGguYWNvcyhjbGFtcCh2ZWMzLmRvdChjYSwgYmEpLCAtMSwgMSkpO1xuICAgICAgICBjb25zdCBiYV9iY18wID0gTWF0aC5hY29zKGNsYW1wKHZlYzMuZG90KGFiLCBjYiksIC0xLCAxKSk7XG4gICAgICAgIGNvbnN0IGFjX2F0XzAgPSBNYXRoLmFjb3MoY2xhbXAodmVjMy5kb3QoY2EsIHRhKSwgLTEsIDEpKTtcbiAgICAgICAgY29uc3QgYWNfYWJfMSA9IE1hdGguYWNvcyhjbGFtcCgobGNiICogbGNiIC0gbGFiICogbGFiIC0gbGF0ICogbGF0KSAvICgtMiAqIGxhYiAqIGxhdCksIC0xLCAxKSk7XG4gICAgICAgIGNvbnN0IGJhX2JjXzEgPSBNYXRoLmFjb3MoY2xhbXAoKGxhdCAqIGxhdCAtIGxhYiAqIGxhYiAtIGxjYiAqIGxjYikgLyAoLTIgKiBsYWIgKiBsY2IpLCAtMSwgMSkpO1xuICAgICAgICBpZiAoaGVscGVyKSB7XG4gICAgICAgICAgICB2ZWMzLnN1YihiYSwgaGVscGVyLCBiKTtcbiAgICAgICAgICAgIHZlYzMubm9ybWFsaXplKGJhLCBiYSk7XG4gICAgICAgIH1cbiAgICAgICAgdmVjMy5jcm9zcyhheGlzMCwgY2EsIGJhKTtcbiAgICAgICAgdmVjMy5ub3JtYWxpemUoYXhpczAsIGF4aXMwKTtcbiAgICAgICAgdmVjMy5jcm9zcyhheGlzMSwgYywgdGFyZ2V0UG9zKTtcbiAgICAgICAgdmVjMy5ub3JtYWxpemUoYXhpczEsIGF4aXMxKTtcbiAgICAgICAgbWlkZGxlLnRyYW5zZm9ybVZlY3RvckludmVyc2VMb2NhbCh0ZW1wLCBheGlzMCk7XG4gICAgICAgIHJvb3Qucm90YXRlQXhpc0FuZ2xlUmFkT2JqZWN0KGF4aXMxLCBhY19hdF8wKTtcbiAgICAgICAgcm9vdC5yb3RhdGVBeGlzQW5nbGVSYWRPYmplY3QoYXhpczAsIGFjX2FiXzEgLSBhY19hYl8wKTtcbiAgICAgICAgbWlkZGxlLnJvdGF0ZUF4aXNBbmdsZVJhZE9iamVjdChheGlzMCwgYmFfYmNfMSAtIGJhX2JjXzApO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBJbnZlcnNlIGtpbmVtYXRpY3MgZm9yIHR3by1qb2ludCBjaGFpbnMgKGUuZy4ga25lZXMgb3IgZWxib3dzKVxuICovXG5jbGFzcyBUd29Kb2ludElrU29sdmVyIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAndHdvLWpvaW50LWlrLXNvbHZlcic7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICAgIC8qKiBSb290IGJvbmUsIG5ldmVyIG1vdmVzICovXG4gICAgICAgIHJvb3Q6IFByb3BlcnR5Lm9iamVjdCgpLFxuICAgICAgICAvKiogQm9uZSBhdHRhY2hlZCB0byB0aGUgcm9vdCAqL1xuICAgICAgICBtaWRkbGU6IFByb3BlcnR5Lm9iamVjdCgpLFxuICAgICAgICAvKiogQm9uZSBhdHRhY2hlZCB0byB0aGUgbWlkZGxlICovXG4gICAgICAgIGVuZDogUHJvcGVydHkub2JqZWN0KCksXG4gICAgICAgIC8qKiBUYXJnZXQgdGhlIGpvaW5zIHNob3VsZCByZWFjaCBmb3IgKi9cbiAgICAgICAgdGFyZ2V0OiBQcm9wZXJ0eS5vYmplY3QoKSxcbiAgICAgICAgLyoqIEZsYWcgZm9yIGNvcHlpbmcgcm90YXRpb24gZnJvbSB0YXJnZXQgdG8gZW5kICovXG4gICAgICAgIGNvcHlUYXJnZXRSb3RhdGlvbjogUHJvcGVydHkuYm9vbCh0cnVlKSxcbiAgICAgICAgLyoqIEhlbHBlciBvYmplY3QgdG8gdXNlIHRvIGRldGVybWluZSBqb2ludCByb3RhdGlvbiBheGlzICovXG4gICAgICAgIGhlbHBlcjogUHJvcGVydHkub2JqZWN0KCksXG4gICAgfTtcbiAgICB0aW1lID0gMDtcbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5yb290LmdldFRyYW5zZm9ybUxvY2FsKHJvb3RUcmFuc2Zvcm0pO1xuICAgICAgICB0aGlzLm1pZGRsZS5nZXRUcmFuc2Zvcm1Mb2NhbChtaWRkbGVUcmFuc2Zvcm0pO1xuICAgICAgICB0aGlzLmVuZC5nZXRUcmFuc2Zvcm1Mb2NhbChlbmRUcmFuc2Zvcm0pO1xuICAgIH1cbiAgICB1cGRhdGUoZHQpIHtcbiAgICAgICAgdGhpcy50aW1lICs9IGR0O1xuICAgICAgICAvKiBSZXNldCB0byBvcmlnaW5hbCBwb3NlIGZvciBzdGFiaWxpdHkgKi9cbiAgICAgICAgdGhpcy5yb290LnNldFRyYW5zZm9ybUxvY2FsKHJvb3RUcmFuc2Zvcm0pO1xuICAgICAgICB0aGlzLm1pZGRsZS5zZXRUcmFuc2Zvcm1Mb2NhbChtaWRkbGVUcmFuc2Zvcm0pO1xuICAgICAgICB0aGlzLmVuZC5zZXRUcmFuc2Zvcm1Mb2NhbChlbmRUcmFuc2Zvcm0pO1xuICAgICAgICB0aGlzLnJvb3QuZ2V0U2NhbGluZ1dvcmxkKHJvb3RTY2FsaW5nKTtcbiAgICAgICAgLyogR2V0IGpvaW50IHBvc2l0aW9ucyBpbiByb290LXNwYWNlICovXG4gICAgICAgIHRoaXMubWlkZGxlLmdldFBvc2l0aW9uTG9jYWwobWlkZGxlUG9zKTtcbiAgICAgICAgdGhpcy5lbmQuZ2V0UG9zaXRpb25Mb2NhbChlbmRQb3MpO1xuICAgICAgICB0aGlzLm1pZGRsZS50cmFuc2Zvcm1Qb2ludExvY2FsKGVuZFBvcywgZW5kUG9zKTtcbiAgICAgICAgaWYgKHRoaXMuaGVscGVyKSB7XG4gICAgICAgICAgICAvKiBHZXQgaGVscGVyIHBvc2l0aW9uIGluIHJvb3Qgc3BhY2UgKi9cbiAgICAgICAgICAgIHRoaXMuaGVscGVyLmdldFBvc2l0aW9uV29ybGQoaGVscGVyUG9zKTtcbiAgICAgICAgICAgIHRoaXMucm9vdC50cmFuc2Zvcm1Qb2ludEludmVyc2VXb3JsZChoZWxwZXJQb3MsIGhlbHBlclBvcyk7XG4gICAgICAgICAgICB2ZWMzLmRpdihoZWxwZXJQb3MsIGhlbHBlclBvcywgcm9vdFNjYWxpbmcpO1xuICAgICAgICB9XG4gICAgICAgIC8qIEdldCB0YXJnZXQgcG9zaXRpb24gaW4gcm9vdCBzcGFjZSAqL1xuICAgICAgICB0aGlzLnRhcmdldC5nZXRQb3NpdGlvbldvcmxkKHRhcmdldFBvcyk7XG4gICAgICAgIHRoaXMucm9vdC50cmFuc2Zvcm1Qb2ludEludmVyc2VXb3JsZCh0YXJnZXRQb3MsIHRhcmdldFBvcyk7XG4gICAgICAgIHZlYzMuZGl2KHRhcmdldFBvcywgdGFyZ2V0UG9zLCByb290U2NhbGluZyk7XG4gICAgICAgIHR3b0pvaW50SUsodGhpcy5yb290LCB0aGlzLm1pZGRsZSwgbWlkZGxlUG9zLCBlbmRQb3MsIHRhcmdldFBvcywgMC4wMSwgdGhpcy5oZWxwZXIgPyBoZWxwZXJQb3MgOiBudWxsLCB0aGlzLnRpbWUpO1xuICAgICAgICBpZiAodGhpcy5jb3B5VGFyZ2V0Um90YXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuZW5kLnNldFJvdGF0aW9uV29ybGQodGhpcy50YXJnZXQuZ2V0Um90YXRpb25Xb3JsZCh0ZW1wUXVhdCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IHsgVHdvSm9pbnRJa1NvbHZlciB9O1xuIiwgImltcG9ydCB7IENvbXBvbmVudCwgVGV4dHVyZSwgUHJvcGVydHkgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuaW1wb3J0IHsgc2V0Rmlyc3RNYXRlcmlhbFRleHR1cmUgfSBmcm9tICcuL3V0aWxzL3V0aWxzLmpzJztcbi8qKlxuICogRG93bmxvYWRzIGEgdmlkZW8gZnJvbSBVUkwgYW5kIGFwcGxpZXMgaXQgYXMgYGRpZmZ1c2VUZXh0dXJlYCBvciBgZmxhdFRleHR1cmVgXG4gKiBvbiBnaXZlbiBtYXRlcmlhbC5cbiAqXG4gKiBWaWRlbyB0ZXh0dXJlcyBuZWVkIHRvIGJlIHVwZGF0ZWQgcmVndWxhcmx5IHdoZW5ldmVyXG4gKiBhIG5ldyBmcmFtZSBpcyBhdmFpbGFibGUuIFRoaXMgY29tcG9uZW50IGhhbmRsZXMgdGhlXG4gKiBkZXRlY3Rpb24gb2YgYSBuZXcgZnJhbWUgYW5kIHVwZGF0ZXMgdGhlIHRleHR1cmUgdG9cbiAqIHJlZmxlY3QgdGhlIHZpZGVvJ3MgY3VycmVudCBmcmFtZS5cbiAqXG4gKiBNYXRlcmlhbHMgZnJvbSB0aGUgZm9sbG93aW5nIHNoYWRlcnMgYXJlIHN1cHBvcnRlZDpcbiAqICAtIFwiUGhvbmcgT3BhcXVlIFRleHR1cmVkXCJcbiAqICAtIFwiRmxhdCBPcGFxdWUgVGV4dHVyZWRcIlxuICogIC0gXCJCYWNrZ3JvdW5kXCJcbiAqICAtIFwiUGh5c2ljYWwgT3BhcXVlIFRleHR1cmVkXCJcbiAqICAtIFwiRm9saWFnZVwiXG4gKlxuICogVGhlIHZpZGVvIGNhbiBiZSBhY2Nlc3NlZCB0aHJvdWdoIGB0aGlzLnZpZGVvYDpcbiAqXG4gKiBgYGBqc1xuICogICBsZXQgdmlkZW9UZXh0dXJlID0gdGhpcy5vYmplY3QuZ2V0Q29tcG9uZW50KCd2aWRlby10ZXh0dXJlJyk7XG4gKiAgIHZpZGVvVGV4dHVyZS52aWRlby5wbGF5KCk7XG4gKiAgIHZpZGVvVGV4dHVyZS52aWRlby5wYXVzZSgpO1xuICogYGBgXG4gKlxuICogU2VlIFtWaWRlbyBFeGFtcGxlXSgvc2hvd2Nhc2UvdmlkZW8pLlxuICovXG5jbGFzcyBWaWRlb1RleHR1cmUgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICd2aWRlby10ZXh0dXJlJztcbiAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtcbiAgICAgICAgLyoqIFVSTCB0byBkb3dubG9hZCB2aWRlbyBmcm9tICovXG4gICAgICAgIHVybDogUHJvcGVydHkuc3RyaW5nKCksXG4gICAgICAgIC8qKiBNYXRlcmlhbCB0byBhcHBseSB0aGUgdmlkZW8gdGV4dHVyZSB0byAqL1xuICAgICAgICBtYXRlcmlhbDogUHJvcGVydHkubWF0ZXJpYWwoKSxcbiAgICAgICAgLyoqIFdoZXRoZXIgdG8gbG9vcCB0aGUgdmlkZW8gKi9cbiAgICAgICAgbG9vcDogUHJvcGVydHkuYm9vbCh0cnVlKSxcbiAgICAgICAgLyoqIFdoZXRoZXIgdG8gYXV0b21hdGljYWxseSBzdGFydCBwbGF5aW5nIHRoZSB2aWRlbyAqL1xuICAgICAgICBhdXRvcGxheTogUHJvcGVydHkuYm9vbCh0cnVlKSxcbiAgICAgICAgLyoqIFdoZXRoZXIgdG8gbXV0ZSBzb3VuZCAqL1xuICAgICAgICBtdXRlZDogUHJvcGVydHkuYm9vbCh0cnVlKSxcbiAgICAgICAgLyoqIE5hbWUgb2YgdGhlIHRleHR1cmUgcHJvcGVydHkgdG8gc2V0ICovXG4gICAgICAgIHRleHR1cmVQcm9wZXJ0eTogUHJvcGVydHkuc3RyaW5nKCdhdXRvJyksXG4gICAgfTtcbiAgICBpbml0KCkge1xuICAgICAgICBpZiAoIXRoaXMubWF0ZXJpYWwpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKCd2aWRlby10ZXh0dXJlOiBtYXRlcmlhbCBwcm9wZXJ0eSBub3Qgc2V0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2FkZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5mcmFtZVVwZGF0ZVJlcXVlc3RlZCA9IHRydWU7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLnZpZGVvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcbiAgICAgICAgdGhpcy52aWRlby5zcmMgPSB0aGlzLnVybDtcbiAgICAgICAgdGhpcy52aWRlby5jcm9zc09yaWdpbiA9ICdhbm9ueW1vdXMnO1xuICAgICAgICB0aGlzLnZpZGVvLnBsYXlzSW5saW5lID0gdHJ1ZTtcbiAgICAgICAgdGhpcy52aWRlby5sb29wID0gdGhpcy5sb29wO1xuICAgICAgICB0aGlzLnZpZGVvLm11dGVkID0gdGhpcy5tdXRlZDtcbiAgICAgICAgdGhpcy52aWRlby5hZGRFdmVudExpc3RlbmVyKCdwbGF5aW5nJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2FkZWQgPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRoaXMuYXV0b3BsYXkpIHtcbiAgICAgICAgICAgIGNvbnN0IHBsYXlBZnRlclVzZXJHZXN0dXJlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudmlkZW8ucGxheSgpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHBsYXlBZnRlclVzZXJHZXN0dXJlKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHBsYXlBZnRlclVzZXJHZXN0dXJlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBwbGF5QWZ0ZXJVc2VyR2VzdHVyZSk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHBsYXlBZnRlclVzZXJHZXN0dXJlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhcHBseVRleHR1cmUoKSB7XG4gICAgICAgIGNvbnN0IG1hdCA9IHRoaXMubWF0ZXJpYWw7XG4gICAgICAgIGNvbnN0IHNoYWRlciA9IG1hdC5zaGFkZXI7XG4gICAgICAgIGNvbnN0IHRleHR1cmUgPSAodGhpcy50ZXh0dXJlID0gbmV3IFRleHR1cmUodGhpcy5lbmdpbmUsIHRoaXMudmlkZW8pKTtcbiAgICAgICAgaWYgKCFzZXRGaXJzdE1hdGVyaWFsVGV4dHVyZShtYXQsIHRleHR1cmUsIHRoaXMudGV4dHVyZVByb3BlcnR5KSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignU2hhZGVyJywgc2hhZGVyLCAnbm90IHN1cHBvcnRlZCBieSB2aWRlby10ZXh0dXJlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCdyZXF1ZXN0VmlkZW9GcmFtZUNhbGxiYWNrJyBpbiB0aGlzLnZpZGVvKSB7XG4gICAgICAgICAgICB0aGlzLnZpZGVvLnJlcXVlc3RWaWRlb0ZyYW1lQ2FsbGJhY2sodGhpcy51cGRhdGVWaWRlby5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigndGltZXVwZGF0ZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmZyYW1lVXBkYXRlUmVxdWVzdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZShkdCkge1xuICAgICAgICBpZiAodGhpcy5sb2FkZWQgJiYgdGhpcy5mcmFtZVVwZGF0ZVJlcXVlc3RlZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudGV4dHVyZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGV4dHVyZS51cGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8qIEFwcGx5IHRleHR1cmUgb24gZmlyc3QgZnJhbWUgdXBkYXRlIHJlcXVlc3QgKi9cbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5VGV4dHVyZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5mcmFtZVVwZGF0ZVJlcXVlc3RlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZVZpZGVvKCkge1xuICAgICAgICB0aGlzLmZyYW1lVXBkYXRlUmVxdWVzdGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy52aWRlby5yZXF1ZXN0VmlkZW9GcmFtZUNhbGxiYWNrKHRoaXMudXBkYXRlVmlkZW8uYmluZCh0aGlzKSk7XG4gICAgfVxufVxuZXhwb3J0IHsgVmlkZW9UZXh0dXJlIH07XG4iLCAiaW1wb3J0IHsgQ29tcG9uZW50LCBUeXBlIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbi8qKlxuICogQWxsb3dzIHN3aXRjaGluZyBhbGwgb3RoZXIgY29tcG9uZW50cyBvbiBhbiBvYmplY3QgdG8gYWN0aXZlL2luYWN0aXZlXG4gKiBkZXBlbmRpbmcgb24gd2hldGhlciBhIFZSL0FSIHNlc3Npb24gaXMgYWN0aXZlLlxuICpcbiAqIFVzZWZ1bCBmb3IgaGlkaW5nIGNvbnRyb2xsZXJzIHVudGlsIHRoZSB1c2VyIGVudGVycyBWUiBmb3IgZXhhbXBsZS5cbiAqL1xuY2xhc3MgVnJNb2RlQWN0aXZlU3dpdGNoIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAndnItbW9kZS1hY3RpdmUtc3dpdGNoJztcbiAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtcbiAgICAgICAgLyoqIFdoZW4gY29tcG9uZW50cyBzaG91bGQgYmUgYWN0aXZlOiBJbiBWUiBvciB3aGVuIG5vdCBpbiBWUiAqL1xuICAgICAgICBhY3RpdmF0ZUNvbXBvbmVudHM6IHtcbiAgICAgICAgICAgIHR5cGU6IFR5cGUuRW51bSxcbiAgICAgICAgICAgIHZhbHVlczogWydpbiBWUicsICdpbiBub24tVlInXSxcbiAgICAgICAgICAgIGRlZmF1bHQ6ICdpbiBWUicsXG4gICAgICAgIH0sXG4gICAgICAgIC8qKiBXaGV0aGVyIGNoaWxkIG9iamVjdCdzIGNvbXBvbmVudHMgc2hvdWxkIGJlIGFmZmVjdGVkICovXG4gICAgICAgIGFmZmVjdENoaWxkcmVuOiB7IHR5cGU6IFR5cGUuQm9vbCwgZGVmYXVsdDogdHJ1ZSB9LFxuICAgIH07XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuY29tcG9uZW50cyA9IFtdO1xuICAgICAgICB0aGlzLmdldENvbXBvbmVudHModGhpcy5vYmplY3QpO1xuICAgICAgICAvKiBJbml0aWFsIGFjdGl2YXRpb24vZGVhY3RpdmF0aW9uICovXG4gICAgICAgIHRoaXMub25YUlNlc3Npb25FbmQoKTtcbiAgICAgICAgdGhpcy5vblNlc3Npb25TdGFydENhbGxiYWNrID0gdGhpcy5vblhSU2Vzc2lvblN0YXJ0LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25TZXNzaW9uRW5kQ2FsbGJhY2sgPSB0aGlzLm9uWFJTZXNzaW9uRW5kLmJpbmQodGhpcyk7XG4gICAgfVxuICAgIG9uQWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQuYWRkKHRoaXMub25TZXNzaW9uU3RhcnRDYWxsYmFjayk7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uRW5kLmFkZCh0aGlzLm9uU2Vzc2lvbkVuZENhbGxiYWNrKTtcbiAgICB9XG4gICAgb25EZWFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LnJlbW92ZSh0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2spO1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvbkVuZC5yZW1vdmUodGhpcy5vblNlc3Npb25FbmRDYWxsYmFjayk7XG4gICAgfVxuICAgIGdldENvbXBvbmVudHMob2JqKSB7XG4gICAgICAgIGNvbnN0IGNvbXBzID0gb2JqLmdldENvbXBvbmVudHMoKS5maWx0ZXIoKGMpID0+IGMudHlwZSAhPT0gJ3ZyLW1vZGUtYWN0aXZlLXN3aXRjaCcpO1xuICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSB0aGlzLmNvbXBvbmVudHMuY29uY2F0KGNvbXBzKTtcbiAgICAgICAgaWYgKHRoaXMuYWZmZWN0Q2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGxldCBjaGlsZHJlbiA9IG9iai5jaGlsZHJlbjtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdldENvbXBvbmVudHMoY2hpbGRyZW5baV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHNldENvbXBvbmVudHNBY3RpdmUoYWN0aXZlKSB7XG4gICAgICAgIGNvbnN0IGNvbXBzID0gdGhpcy5jb21wb25lbnRzO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbXBzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBjb21wc1tpXS5hY3RpdmUgPSBhY3RpdmU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25YUlNlc3Npb25TdGFydCgpIHtcbiAgICAgICAgdGhpcy5zZXRDb21wb25lbnRzQWN0aXZlKHRoaXMuYWN0aXZhdGVDb21wb25lbnRzID09IDApO1xuICAgIH1cbiAgICBvblhSU2Vzc2lvbkVuZCgpIHtcbiAgICAgICAgdGhpcy5zZXRDb21wb25lbnRzQWN0aXZlKHRoaXMuYWN0aXZhdGVDb21wb25lbnRzICE9IDApO1xuICAgIH1cbn1cbmV4cG9ydCB7IFZyTW9kZUFjdGl2ZVN3aXRjaCB9O1xuIiwgInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IENvbGxpZGVyLCBDb2xsaXNpb25Db21wb25lbnQsIENvbXBvbmVudCwgRW1pdHRlciwgTWVzaCwgTWVzaEF0dHJpYnV0ZSwgTWVzaENvbXBvbmVudCwgTWVzaEluZGV4VHlwZSwgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuaW1wb3J0IHsgcHJvcGVydHkgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGkvZGVjb3JhdG9ycy5qcyc7XG5pbXBvcnQgeyBzZXRYUlJpZ2lkVHJhbnNmb3JtTG9jYWwgfSBmcm9tICcuL3V0aWxzL3dlYnhyLmpzJztcbi8vIEZJWE1FOiBlYXJjdXQgb3ZlcnJpZGVzIGRlZmF1bHQgZXhwb3J0LCBicmVha2luZyBvdXIgdGVzdHNcbmltcG9ydCBlYXJjdXQgZnJvbSAnZWFyY3V0JztcbmNvbnN0IHRlbXBWZWMzID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbi8qKiBDb21wdXRlIG1pbmltdW0gYW5kIG1heGl1bSBleHRlbnRzIG9mIGdpdmVuIGxpc3Qgb2YgY29udG91ciBwb2ludHMgKi9cbmZ1bmN0aW9uIGV4dGVudHNGcm9tQ29udG91cihvdXQsIHBvaW50cykge1xuICAgIGlmIChwb2ludHMubGVuZ3RoID09IDApXG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgbGV0IGFic01heFggPSBNYXRoLmFicyhwb2ludHNbMF0ueCk7XG4gICAgbGV0IGFic01heFogPSBNYXRoLmFicyhwb2ludHNbMF0ueik7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBwb2ludHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgYWJzTWF4WCA9IE1hdGgubWF4KGFic01heFgsIE1hdGguYWJzKHBvaW50c1tpXS54KSk7XG4gICAgICAgIGFic01heFogPSBNYXRoLm1heChhYnNNYXhaLCBNYXRoLmFicyhwb2ludHNbaV0ueikpO1xuICAgIH1cbiAgICBvdXRbMF0gPSBhYnNNYXhYO1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gYWJzTWF4Wjtcbn1cbi8qKiBDaGVjayB3aGV0aGVyIHggbGllcyBiZXR3ZWVuIGEgYW5kIGIgKi9cbmZ1bmN0aW9uIHdpdGhpbih4LCBhLCBiKSB7XG4gICAgaWYgKGEgPiBiKVxuICAgICAgICByZXR1cm4geCA8IGEgJiYgeCA+IGI7XG4gICAgcmV0dXJuIHggPiBhICYmIHggPCBiO1xufVxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIGdpdmVuIHBvaW50IG9uIHBsYW5lJ3MgYm91bmRpbmcgYm94IGlzIGluc2lkZSBwbGFuZSdzIHBvbHlnb25cbiAqXG4gKiBAcGFyYW0gcCAzRCBwb2ludCBpbiBwbGFuZSdzIGxvY2FsIHNwYWNlLCBZIHZhbHVlIGlzIGlnbm9yZWQsIHNpbmNlIGl0IGlzIGFzc3VtZWRcbiAqICAgICB0aGF0IHRoZSBwb2ludCB3YXMgY2hlY2tlZCBhZ2FpbnN0IHRoZSBwbGFuZSdzIGJvdW5kaW5nIGJveC5cbiAqIEBwYXJhbSBwbGFuZSBYUlBsYW5lIHRoYXQgaGFzIGBYUlBsYW5lLnBvbHlnb25gXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHBvaW50IGxpZXMgb24gdGhlIHBsYW5lXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1BvaW50TG9jYWxPblhSUGxhbmVQb2x5Z29uKHAsIHBsYW5lKSB7XG4gICAgY29uc3QgcG9pbnRzID0gcGxhbmUucG9seWdvbjtcbiAgICBpZiAocG9pbnRzLmxlbmd0aCA8IDMpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAvKiBDb3VudCByYXkgaW50ZXJzZWN0aW9uczogZXZlbiA9PSBpbnNpZGUsIG9kZCA9PSBvdXRzaWRlICovXG4gICAgY29uc3QgcFggPSBwWzBdO1xuICAgIGNvbnN0IHBaID0gcFsyXTtcbiAgICBsZXQgaW50ZXJzZWN0aW9ucyA9IDA7XG4gICAgZm9yIChsZXQgbiA9IDAsIGwgPSBwb2ludHMubGVuZ3RoIC0gMTsgbiA8IHBvaW50cy5sZW5ndGg7ICsrbikge1xuICAgICAgICBjb25zdCBhWCA9IHBvaW50c1tsXS54O1xuICAgICAgICBjb25zdCBhWiA9IHBvaW50c1tsXS56O1xuICAgICAgICBjb25zdCBzID0gKHBvaW50c1tuXS56IC0gYVopIC8gKHBvaW50c1tuXS54IC0gYVgpO1xuICAgICAgICBjb25zdCB4ID0gTWF0aC5hYnMoKHBaIC0gYVopIC8gcyk7XG4gICAgICAgIGlmICh4ID49IDAuMCAmJiB4IDw9IDEuMCAmJiB3aXRoaW4oeCArIHBYLCBhWCwgcG9pbnRzW25dLngpKVxuICAgICAgICAgICAgKytpbnRlcnNlY3Rpb25zO1xuICAgICAgICBsID0gbjtcbiAgICB9XG4gICAgcmV0dXJuIChpbnRlcnNlY3Rpb25zICYgMSkgPT0gMDtcbn1cbi8qKlxuICogQ2hlY2sgd2hldGhlciBnaXZlbiBwb2ludCBvbiBwbGFuZSdzIGJvdW5kaW5nIGJveCBpcyBpbnNpZGUgcGxhbmUncyBwb2x5Z29uXG4gKlxuICogQHBhcmFtIHAgM0QgcG9pbnQgdG8gdGVzdC4gSXQgaXMgYXNzdW1lZCB0aGF0IHRoZSBwb2ludCB3YXMgY2hlY2tlZCBhZ2FpbnN0XG4gKiAgICAgdGhlIHBsYW5lJ3MgYm91bmRpbmcgYm94IGJlZm9yZWhhbmQuXG4gKiBAcGFyYW0gcGxhbmUgWFJQbGFuZSB0aGF0IGhhcyBgWFJQbGFuZS5wb2x5Z29uYFxuICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBwb2ludCBsaWVzIG9uIHRoZSBwbGFuZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNQb2ludFdvcmxkT25YUlBsYW5lUG9seWdvbihvYmplY3QsIHAsIHBsYW5lKSB7XG4gICAgaWYgKHBsYW5lLnBvbHlnb24ubGVuZ3RoIDwgMylcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlzUG9pbnRMb2NhbE9uWFJQbGFuZVBvbHlnb24ob2JqZWN0LnRyYW5zZm9ybVBvaW50SW52ZXJzZVdvcmxkKHRlbXBWZWMzLCBwKSwgcGxhbmUpO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBwbGFuZSBtZXNoIGZyb20gYSBsaXN0IG9mIGNvbnRvdXIgcG9pbnRzXG4gKlxuICogQHBhcmFtIGVuZ2luZSBFbmdpbmUgdG8gY3JlYXRlIHRoZSBtZXNoIHdpdGhcbiAqIEBwYXJhbSBwb2ludHMgQ29udG91ciBwb2ludHNcbiAqIEBwYXJhbSBtZXNoVG9VcGRhdGUgT3B0aW9uYWwgbWVzaCB0byB1cGRhdGUgaW5zdGVhZCBvZiBjcmVhdGluZyBhIG5ldyBvbmUuXG4gKi9cbmZ1bmN0aW9uIHBsYW5lTWVzaEZyb21Db250b3VyKGVuZ2luZSwgcG9pbnRzLCBtZXNoVG9VcGRhdGUgPSBudWxsKSB7XG4gICAgY29uc3QgdmVydGV4Q291bnQgPSBwb2ludHMubGVuZ3RoO1xuICAgIGNvbnN0IHZlcnRpY2VzID0gbmV3IEZsb2F0MzJBcnJheSh2ZXJ0ZXhDb3VudCAqIDIpO1xuICAgIGZvciAobGV0IGkgPSAwLCBkID0gMDsgaSA8IHZlcnRleENvdW50OyArK2ksIGQgKz0gMikge1xuICAgICAgICB2ZXJ0aWNlc1tkXSA9IHBvaW50c1tpXS54O1xuICAgICAgICB2ZXJ0aWNlc1tkICsgMV0gPSBwb2ludHNbaV0uejtcbiAgICB9XG4gICAgY29uc3QgdHJpYW5nbGVzID0gZWFyY3V0KHZlcnRpY2VzKTtcbiAgICBjb25zdCBtZXNoID0gbWVzaFRvVXBkYXRlIHx8XG4gICAgICAgIG5ldyBNZXNoKGVuZ2luZSwge1xuICAgICAgICAgICAgdmVydGV4Q291bnQsXG4gICAgICAgICAgICAvKiBBc3N1bXB0aW9uIGhlcmUgdGhhdCB3ZSB3aWxsIG5ldmVyIGhhdmUgbW9yZSB0aGFuIDI1NiBwb2ludHNcbiAgICAgICAgICAgICAqIGluIHRoZSBkZXRlY3RlZCBwbGFuZSBtZXNoZXMhICovXG4gICAgICAgICAgICBpbmRleFR5cGU6IE1lc2hJbmRleFR5cGUuVW5zaWduZWRCeXRlLFxuICAgICAgICAgICAgaW5kZXhEYXRhOiB0cmlhbmdsZXMsXG4gICAgICAgIH0pO1xuICAgIGlmIChtZXNoLnZlcnRleENvdW50ICE9PSB2ZXJ0ZXhDb3VudCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ3ZlcnRleENvdW50IG9mIG1lc2hUb1VwZGF0ZSBkaWQgbm90IG1hdGNoIHJlcXVpcmVkIHZlcnRleENvdW50Jyk7XG4gICAgICAgIHJldHVybiBtZXNoO1xuICAgIH1cbiAgICBjb25zdCBwb3NpdGlvbnMgPSBtZXNoLmF0dHJpYnV0ZShNZXNoQXR0cmlidXRlLlBvc2l0aW9uKTtcbiAgICBjb25zdCB0ZXh0dXJlQ29vcmRzID0gbWVzaC5hdHRyaWJ1dGUoTWVzaEF0dHJpYnV0ZS5UZXh0dXJlQ29vcmRpbmF0ZSk7XG4gICAgY29uc3Qgbm9ybWFscyA9IG1lc2guYXR0cmlidXRlKE1lc2hBdHRyaWJ1dGUuTm9ybWFsKTtcbiAgICB0ZW1wVmVjM1sxXSA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDAsIHMgPSAwOyBpIDwgdmVydGV4Q291bnQ7ICsraSwgcyArPSAyKSB7XG4gICAgICAgIHRlbXBWZWMzWzBdID0gdmVydGljZXNbc107XG4gICAgICAgIHRlbXBWZWMzWzJdID0gdmVydGljZXNbcyArIDFdO1xuICAgICAgICBwb3NpdGlvbnMuc2V0KGksIHRlbXBWZWMzKTtcbiAgICB9XG4gICAgdGV4dHVyZUNvb3Jkcz8uc2V0KDAsIHZlcnRpY2VzKTtcbiAgICBpZiAobm9ybWFscykge1xuICAgICAgICB0ZW1wVmVjM1swXSA9IDA7XG4gICAgICAgIHRlbXBWZWMzWzFdID0gMTtcbiAgICAgICAgdGVtcFZlYzNbMl0gPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZlcnRleENvdW50OyArK2kpIHtcbiAgICAgICAgICAgIG5vcm1hbHMuc2V0KGksIHRlbXBWZWMzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAobWVzaFRvVXBkYXRlKVxuICAgICAgICBtZXNoLnVwZGF0ZSgpO1xuICAgIHJldHVybiBtZXNoO1xufVxuLyoqXG4gKiBHZW5lcmF0ZSBtZXNoZXMgYW5kIGNvbGxpc2lvbnMgZm9yIFhSUGxhbmVzIHVzaW5nIFtXZWJYUiBEZXZpY2UgQVBJIC0gUGxhbmUgRGV0ZWN0aW9uXShodHRwczovL2ltbWVyc2l2ZS13ZWIuZ2l0aHViLmlvL3JlYWwtd29ybGQtZ2VvbWV0cnkvcGxhbmUtZGV0ZWN0aW9uLmh0bWwpLlxuICovXG5jbGFzcyBQbGFuZURldGVjdGlvbiBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ3BsYW5lLWRldGVjdGlvbic7XG4gICAgLyoqXG4gICAgICogTWF0ZXJpYWwgdG8gYXNzaWduIHRvIGNyZWF0ZWQgcGxhbmUgbWVzaGVzIG9yIGBudWxsYCBpZiBtZXNoZXMgc2hvdWxkIG5vdCBiZSBjcmVhdGVkLlxuICAgICAqL1xuICAgIHBsYW5lTWF0ZXJpYWwgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIENvbGxpc2lvbiBtYXNrIHRvIGFzc2lnbiB0byBuZXdseSBjcmVhdGVkIGNvbGxpc2lvbiBjb21wb25lbnRzIG9yIGEgbmVnYXRpdmUgdmFsdWUgaWZcbiAgICAgKiBjb2xsaXNpb24gY29tcG9uZW50cyBzaG91bGQgbm90IGJlIGNyZWF0ZWQuXG4gICAgICovXG4gICAgY29sbGlzaW9uTWFzayA9IC0xO1xuICAgIC8qKiBNYXAgb2YgYWxsIHBsYW5lcyBhbmQgdGhlaXIgbGFzdCB1cGRhdGVkIHRpbWVzdGFtcHMgKi9cbiAgICBwbGFuZXMgPSBuZXcgTWFwKCk7XG4gICAgLyoqIE9iamVjdHMgZ2VuZXJhdGVkIGZvciBlYWNoIFhSUGxhbmUgKi9cbiAgICBwbGFuZU9iamVjdHMgPSBuZXcgTWFwKCk7XG4gICAgLyoqIENhbGxlZCB3aGVuIGEgcGxhbmUgc3RhcnRzIHRyYWNraW5nICovXG4gICAgb25QbGFuZUZvdW5kID0gbmV3IEVtaXR0ZXIoKTtcbiAgICAvKiogQ2FsbGVkIHdoZW4gYSBwbGFuZSBzdG9wcyB0cmFja2luZyAqL1xuICAgIG9uUGxhbmVMb3N0ID0gbmV3IEVtaXR0ZXIoKTtcbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5lbmdpbmUueHI/LmZyYW1lKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGlmICh0aGlzLmVuZ2luZS54ci5mcmFtZS5kZXRlY3RlZFBsYW5lcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdwbGFuZS1kZXRlY3Rpb246IFdlYlhSIGZlYXR1cmUgbm90IGF2YWlsYWJsZS4nKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBjb25zdCBkZXRlY3RlZFBsYW5lcyA9IHRoaXMuZW5naW5lLnhyLmZyYW1lLmRldGVjdGVkUGxhbmVzO1xuICAgICAgICBmb3IgKGNvbnN0IFtwbGFuZSwgX10gb2YgdGhpcy5wbGFuZXMpIHtcbiAgICAgICAgICAgIGlmICghZGV0ZWN0ZWRQbGFuZXMuaGFzKHBsYW5lKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuI3BsYW5lTG9zdChwbGFuZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZGV0ZWN0ZWRQbGFuZXMuZm9yRWFjaCgocGxhbmUpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBsYW5lcy5oYXMocGxhbmUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBsYW5lLmxhc3RDaGFuZ2VkVGltZSA+IHRoaXMucGxhbmVzLmdldChwbGFuZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jcGxhbmVVcGRhdGUocGxhbmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuI3BsYW5lRm91bmQocGxhbmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4jcGxhbmVVcGRhdGVQb3NlKHBsYW5lKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgICNwbGFuZUxvc3QocGxhbmUpIHtcbiAgICAgICAgdGhpcy5wbGFuZXMuZGVsZXRlKHBsYW5lKTtcbiAgICAgICAgY29uc3QgbyA9IHRoaXMucGxhbmVPYmplY3RzLmdldChwbGFuZSk7XG4gICAgICAgIHRoaXMub25QbGFuZUxvc3Qubm90aWZ5KHBsYW5lLCBvKTtcbiAgICAgICAgLyogVXNlciBtaWdodCBkZXN0cm95IHRoZSBvYmplY3QgKi9cbiAgICAgICAgaWYgKG8ub2JqZWN0SWQgPiAwKVxuICAgICAgICAgICAgby5kZXN0cm95KCk7XG4gICAgfVxuICAgICNwbGFuZUZvdW5kKHBsYW5lKSB7XG4gICAgICAgIHRoaXMucGxhbmVzLnNldChwbGFuZSwgcGxhbmUubGFzdENoYW5nZWRUaW1lKTtcbiAgICAgICAgY29uc3QgbyA9IHRoaXMuZW5naW5lLnNjZW5lLmFkZE9iamVjdCh0aGlzLm9iamVjdCk7XG4gICAgICAgIHRoaXMucGxhbmVPYmplY3RzLnNldChwbGFuZSwgbyk7XG4gICAgICAgIGlmICh0aGlzLnBsYW5lTWF0ZXJpYWwpIHtcbiAgICAgICAgICAgIG8uYWRkQ29tcG9uZW50KE1lc2hDb21wb25lbnQsIHtcbiAgICAgICAgICAgICAgICBtZXNoOiBwbGFuZU1lc2hGcm9tQ29udG91cih0aGlzLmVuZ2luZSwgcGxhbmUucG9seWdvbiksXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWw6IHRoaXMucGxhbmVNYXRlcmlhbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNvbGxpc2lvbk1hc2sgPj0gMCkge1xuICAgICAgICAgICAgZXh0ZW50c0Zyb21Db250b3VyKHRlbXBWZWMzLCBwbGFuZS5wb2x5Z29uKTtcbiAgICAgICAgICAgIHRlbXBWZWMzWzFdID0gMC4wMjU7XG4gICAgICAgICAgICBvLmFkZENvbXBvbmVudChDb2xsaXNpb25Db21wb25lbnQsIHtcbiAgICAgICAgICAgICAgICBncm91cDogdGhpcy5jb2xsaXNpb25NYXNrLFxuICAgICAgICAgICAgICAgIGNvbGxpZGVyOiBDb2xsaWRlci5Cb3gsXG4gICAgICAgICAgICAgICAgZXh0ZW50czogdGVtcFZlYzMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9uUGxhbmVGb3VuZC5ub3RpZnkocGxhbmUsIG8pO1xuICAgIH1cbiAgICAjcGxhbmVVcGRhdGUocGxhbmUpIHtcbiAgICAgICAgdGhpcy5wbGFuZXMuc2V0KHBsYW5lLCBwbGFuZS5sYXN0Q2hhbmdlZFRpbWUpO1xuICAgICAgICBjb25zdCBwbGFuZU1lc2ggPSB0aGlzLnBsYW5lT2JqZWN0cy5nZXQocGxhbmUpLmdldENvbXBvbmVudChNZXNoQ29tcG9uZW50KTtcbiAgICAgICAgaWYgKCFwbGFuZU1lc2gpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHBsYW5lTWVzaEZyb21Db250b3VyKHRoaXMuZW5naW5lLCBwbGFuZS5wb2x5Z29uLCBwbGFuZU1lc2gubWVzaCk7XG4gICAgfVxuICAgICNwbGFuZVVwZGF0ZVBvc2UocGxhbmUpIHtcbiAgICAgICAgY29uc3QgbyA9IHRoaXMucGxhbmVPYmplY3RzLmdldChwbGFuZSk7XG4gICAgICAgIGNvbnN0IHBvc2UgPSB0aGlzLmVuZ2luZS54ci5mcmFtZS5nZXRQb3NlKHBsYW5lLnBsYW5lU3BhY2UsIHRoaXMuZW5naW5lLnhyLmN1cnJlbnRSZWZlcmVuY2VTcGFjZSk7XG4gICAgICAgIGlmICghcG9zZSkge1xuICAgICAgICAgICAgby5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzZXRYUlJpZ2lkVHJhbnNmb3JtTG9jYWwobywgcG9zZS50cmFuc2Zvcm0pO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5Lm1hdGVyaWFsKClcbl0sIFBsYW5lRGV0ZWN0aW9uLnByb3RvdHlwZSwgXCJwbGFuZU1hdGVyaWFsXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5pbnQoKVxuXSwgUGxhbmVEZXRlY3Rpb24ucHJvdG90eXBlLCBcImNvbGxpc2lvbk1hc2tcIiwgdm9pZCAwKTtcbmV4cG9ydCB7IFBsYW5lRGV0ZWN0aW9uIH07XG4iLCAiaW1wb3J0IHsgQ29tcG9uZW50LCBUeXBlIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbmltcG9ydCB7IHZlYzMsIG1hdDQsIHF1YXQsIHF1YXQyIH0gZnJvbSAnZ2wtbWF0cml4JztcbmNvbnN0IFZSTV9ST0xMX0FYRVMgPSB7XG4gICAgWDogWzEuMCwgMC4wLCAwLjBdLFxuICAgIFk6IFswLjAsIDEuMCwgMC4wXSxcbiAgICBaOiBbMC4wLCAwLjAsIDEuMF0sXG59O1xuY29uc3QgVlJNX0FJTV9BWEVTID0ge1xuICAgIFBvc2l0aXZlWDogWzEuMCwgMC4wLCAwLjBdLFxuICAgIE5lZ2F0aXZlWDogWy0xLjAsIDAuMCwgMC4wXSxcbiAgICBQb3NpdGl2ZVk6IFswLjAsIDEuMCwgMC4wXSxcbiAgICBOZWdhdGl2ZVk6IFswLjAsIC0xLjAsIDAuMF0sXG4gICAgUG9zaXRpdmVaOiBbMC4wLCAwLjAsIDEuMF0sXG4gICAgTmVnYXRpdmVaOiBbMC4wLCAwLjAsIC0xLjBdLFxufTtcbi8qKlxuICogQ29tcG9uZW50IGZvciBsb2FkaW5nIGFuZCBoYW5kbGluZyBWUk0gMS4wIG1vZGVscy5cbiAqXG4gKiBQb3Npbmcgb2YgdGhlIG1vZGVsIHNob3VsZCBiZSBkb25lIGV4Y2x1c2l2ZWx5IGJ5IHJvdGF0aW5nIHRoZSBib25lcy4gVGhlc2UgY2FuIGJlXG4gKiBhY2Nlc3NlZCB1c2luZyB0aGUgYC5ib25lc2AgcHJvcGVydHkgYW5kIGZvbGxvdyB0aGUgVlJNIGJvbmUgbmFtaW5nLiBOb3RlIHRoYXQgbm90XG4gKiBhbGwgVlJNIG1vZGVscyB3aWxsIGhhdmUgYWxsIHBvc3NpYmxlIGJvbmVzLiBUaGUgcmVzdCBwb3NlIChULXBvc2UpIGlzIGNhcHR1cmVkIGluXG4gKiB0aGUgYC5yZXN0UG9zZWAgcHJvcGVydHkuIFJlc2V0dGluZyBhIGJvbmUgdG8gaXRzIHJlc3QgcG9zZSBjYW4gYmUgZG9uZSBhcyBmb2xsb3dzOlxuICogYGBganNcbiAqIHZybUNvbXBvbmVudC5ib25lc1t2cm1Cb25lTmFtZV0ucm90YXRpb25Mb2NhbCA9IHZybUNvbXBvbmVudC5yZXN0UG9zZVt2cm1Cb25lTmFtZV07XG4gKiBgYGBcbiAqXG4gKiBNb3ZpbmcgdGhlIG1vZGVsIHRocm91Z2ggdGhlIHdvcmxkIHNob3VsZCBiZSBkb25lIGJ5IG1vdmluZyB0aGUgb2JqZWN0IHRoaXMgY29tcG9uZW50XG4gKiBpcyBhdHRhY2hlZCB0by4gSW4gb3RoZXIgd29yZHMsIGJ5IG1vdmluZyB0aGUgcm9vdCBvZiB0aGUgVlJNIG1vZGVsLiBUaGUgYm9uZXMgYW5kIGFueVxuICogZGVzY2VuZGFudCBvYmplY3RzIHNob3VsZCAqbm90KiBiZSB1c2VkIHRvIG1vdmUgdGhlIFZSTSBtb2RlbC5cbiAqXG4gKiBUaGUgY29yZSBleHRlbnNpb24gYFZSTUNfdnJtYCBhcyB3ZWxsIGFzIHRoZWBWUk1DX3NwcmluZ0JvbmVgIGFuZCBgVlJNQ19ub2RlX2NvbnN0cmFpbnRgXG4gKiBleHRlbnNpb25zIGFyZSBzdXBwb3J0ZWQuXG4gKlxuICogKipMaW1pdGF0aW9uczoqKlxuICogLSBObyBzdXBwb3J0IGZvciBgVlJNQ19tYXRlcmlhbF9tdG9vbmBcbiAqIC0gRXhwcmVzc2lvbnMgYXJlbid0IHN1cHBvcnRlZFxuICogLSBFeHByZXNzaW9uIGJhc2VkIGxvb2tBdCBpc24ndCBzdXBwb3J0ZWRcbiAqIC0gTWVzaCBhbm5vdGF0aW9uIG1vZGUgYGF1dG9gIGlzIG5vdCBzdXBwb3J0ZWQgKGZpcnN0IHBlcnNvbiBtb2RlKVxuICovXG5jbGFzcyBWcm0gZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICd2cm0nO1xuICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge1xuICAgICAgICAvKiogVVJMIHRvIGEgVlJNIGZpbGUgdG8gbG9hZCAqL1xuICAgICAgICBzcmM6IHsgdHlwZTogVHlwZS5TdHJpbmcgfSxcbiAgICAgICAgLyoqIE9iamVjdCB0aGUgVlJNIGlzIGxvb2tpbmcgYXQgKi9cbiAgICAgICAgbG9va0F0VGFyZ2V0OiB7IHR5cGU6IFR5cGUuT2JqZWN0IH0sXG4gICAgfTtcbiAgICAvKiogTWV0YSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgVlJNIG1vZGVsICovXG4gICAgbWV0YSA9IG51bGw7XG4gICAgLyoqIFRoZSBodW1hbm9pZCBib25lcyBvZiB0aGUgVlJNIG1vZGVsICovXG4gICAgYm9uZXMgPSB7XG4gICAgICAgIC8qIFRvcnNvICovXG4gICAgICAgIGhpcHM6IG51bGwsXG4gICAgICAgIHNwaW5lOiBudWxsLFxuICAgICAgICBjaGVzdDogbnVsbCxcbiAgICAgICAgdXBwZXJDaGVzdDogbnVsbCxcbiAgICAgICAgbmVjazogbnVsbCxcbiAgICAgICAgLyogSGVhZCAqL1xuICAgICAgICBoZWFkOiBudWxsLFxuICAgICAgICBsZWZ0RXllOiBudWxsLFxuICAgICAgICByaWdodEV5ZTogbnVsbCxcbiAgICAgICAgamF3OiBudWxsLFxuICAgICAgICAvKiBMZWdzICovXG4gICAgICAgIGxlZnRVcHBlckxlZzogbnVsbCxcbiAgICAgICAgbGVmdExvd2VyTGVnOiBudWxsLFxuICAgICAgICBsZWZ0Rm9vdDogbnVsbCxcbiAgICAgICAgbGVmdFRvZXM6IG51bGwsXG4gICAgICAgIHJpZ2h0VXBwZXJMZWc6IG51bGwsXG4gICAgICAgIHJpZ2h0TG93ZXJMZWc6IG51bGwsXG4gICAgICAgIHJpZ2h0Rm9vdDogbnVsbCxcbiAgICAgICAgcmlnaHRUb2VzOiBudWxsLFxuICAgICAgICAvKiBBcm1zICovXG4gICAgICAgIGxlZnRTaG91bGRlcjogbnVsbCxcbiAgICAgICAgbGVmdFVwcGVyQXJtOiBudWxsLFxuICAgICAgICBsZWZ0TG93ZXJBcm06IG51bGwsXG4gICAgICAgIGxlZnRIYW5kOiBudWxsLFxuICAgICAgICByaWdodFNob3VsZGVyOiBudWxsLFxuICAgICAgICByaWdodFVwcGVyQXJtOiBudWxsLFxuICAgICAgICByaWdodExvd2VyQXJtOiBudWxsLFxuICAgICAgICByaWdodEhhbmQ6IG51bGwsXG4gICAgICAgIC8qIEZpbmdlcnMgKi9cbiAgICAgICAgbGVmdFRodW1iTWV0YWNhcnBhbDogbnVsbCxcbiAgICAgICAgbGVmdFRodW1iUHJveGltYWw6IG51bGwsXG4gICAgICAgIGxlZnRUaHVtYkRpc3RhbDogbnVsbCxcbiAgICAgICAgbGVmdEluZGV4UHJveGltYWw6IG51bGwsXG4gICAgICAgIGxlZnRJbmRleEludGVybWVkaWF0ZTogbnVsbCxcbiAgICAgICAgbGVmdEluZGV4RGlzdGFsOiBudWxsLFxuICAgICAgICBsZWZ0TWlkZGxlUHJveGltYWw6IG51bGwsXG4gICAgICAgIGxlZnRNaWRkbGVJbnRlcm1lZGlhdGU6IG51bGwsXG4gICAgICAgIGxlZnRNaWRkbGVEaXN0YWw6IG51bGwsXG4gICAgICAgIGxlZnRSaW5nUHJveGltYWw6IG51bGwsXG4gICAgICAgIGxlZnRSaW5nSW50ZXJtZWRpYXRlOiBudWxsLFxuICAgICAgICBsZWZ0UmluZ0Rpc3RhbDogbnVsbCxcbiAgICAgICAgbGVmdExpdHRsZVByb3hpbWFsOiBudWxsLFxuICAgICAgICBsZWZ0TGl0dGxlSW50ZXJtZWRpYXRlOiBudWxsLFxuICAgICAgICBsZWZ0TGl0dGxlRGlzdGFsOiBudWxsLFxuICAgICAgICByaWdodFRodW1iTWV0YWNhcnBhbDogbnVsbCxcbiAgICAgICAgcmlnaHRUaHVtYlByb3hpbWFsOiBudWxsLFxuICAgICAgICByaWdodFRodW1iRGlzdGFsOiBudWxsLFxuICAgICAgICByaWdodEluZGV4UHJveGltYWw6IG51bGwsXG4gICAgICAgIHJpZ2h0SW5kZXhJbnRlcm1lZGlhdGU6IG51bGwsXG4gICAgICAgIHJpZ2h0SW5kZXhEaXN0YWw6IG51bGwsXG4gICAgICAgIHJpZ2h0TWlkZGxlUHJveGltYWw6IG51bGwsXG4gICAgICAgIHJpZ2h0TWlkZGxlSW50ZXJtZWRpYXRlOiBudWxsLFxuICAgICAgICByaWdodE1pZGRsZURpc3RhbDogbnVsbCxcbiAgICAgICAgcmlnaHRSaW5nUHJveGltYWw6IG51bGwsXG4gICAgICAgIHJpZ2h0UmluZ0ludGVybWVkaWF0ZTogbnVsbCxcbiAgICAgICAgcmlnaHRSaW5nRGlzdGFsOiBudWxsLFxuICAgICAgICByaWdodExpdHRsZVByb3hpbWFsOiBudWxsLFxuICAgICAgICByaWdodExpdHRsZUludGVybWVkaWF0ZTogbnVsbCxcbiAgICAgICAgcmlnaHRMaXR0bGVEaXN0YWw6IG51bGwsXG4gICAgfTtcbiAgICAvKiogUm90YXRpb25zIG9mIHRoZSBib25lcyBpbiB0aGUgcmVzdCBwb3NlIChULXBvc2UpICovXG4gICAgcmVzdFBvc2UgPSB7fTtcbiAgICAvKiBBbGwgbm9kZSBjb25zdHJhaW50cywgb3JkZXJlZCB0byBkZWFsIHdpdGggZGVwZW5kZW5jaWVzICovXG4gICAgX25vZGVDb25zdHJhaW50cyA9IFtdO1xuICAgIC8qIFZSTUNfc3ByaW5nQm9uZSBjaGFpbnMgKi9cbiAgICBfc3ByaW5nQ2hhaW5zID0gW107XG4gICAgLyogU3BoZXJpY2FsIGNvbGxpZGVycyBmb3Igc3ByaW5nIGJvbmVzICovXG4gICAgX3NwaGVyZUNvbGxpZGVycyA9IFtdO1xuICAgIC8qIENhcHN1bGUgc2hhcGVkIGNvbGxpZGVycyBmb3Igc3ByaW5nIGJvbmVzICovXG4gICAgX2NhcHN1bGVDb2xsaWRlcnMgPSBbXTtcbiAgICAvKiBJbmRpY2F0ZXMgd2hpY2ggbWVzaGVzIGFyZSByZW5kZXJlZCBpbiBmaXJzdC90aGlyZCBwZXJzb24gdmlld3MgKi9cbiAgICBfZmlyc3RQZXJzb25Bbm5vdGF0aW9ucyA9IFtdO1xuICAgIC8qIENvbnRhaW5zIGRldGFpbHMgZm9yIChib25lIHR5cGUpIGxvb2tBdCBiZWhhdmlvdXIgKi9cbiAgICBfbG9va0F0ID0gbnVsbDtcbiAgICAvKiBXaGV0aGVyIG9yIG5vdCB0aGUgVlJNIGNvbXBvbmVudCBoYXMgYmVlbiBpbml0aWFsaXplZCB3aXRoIGBpbml0aWFsaXplVnJtYCAqL1xuICAgIF9pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMuX3RlbXBWMyA9IHZlYzMuY3JlYXRlKCk7XG4gICAgICAgIHRoaXMuX3RlbXBWM0EgPSB2ZWMzLmNyZWF0ZSgpO1xuICAgICAgICB0aGlzLl90ZW1wVjNCID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgdGhpcy5fdGVtcFF1YXQgPSBxdWF0LmNyZWF0ZSgpO1xuICAgICAgICB0aGlzLl90ZW1wUXVhdEEgPSBxdWF0LmNyZWF0ZSgpO1xuICAgICAgICB0aGlzLl90ZW1wUXVhdEIgPSBxdWF0LmNyZWF0ZSgpO1xuICAgICAgICB0aGlzLl90ZW1wTWF0NEEgPSBtYXQ0LmNyZWF0ZSgpO1xuICAgICAgICB0aGlzLl90ZW1wUXVhdDIgPSBxdWF0Mi5jcmVhdGUoKTtcbiAgICAgICAgdGhpcy5fdGFpbFRvU2hhcGUgPSB2ZWMzLmNyZWF0ZSgpO1xuICAgICAgICB0aGlzLl9oZWFkVG9UYWlsID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgdGhpcy5faW5lcnRpYSA9IHZlYzMuY3JlYXRlKCk7XG4gICAgICAgIHRoaXMuX3N0aWZmbmVzcyA9IHZlYzMuY3JlYXRlKCk7XG4gICAgICAgIHRoaXMuX2V4dGVybmFsID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgdGhpcy5fcmlnaHRWZWN0b3IgPSB2ZWMzLnNldCh2ZWMzLmNyZWF0ZSgpLCAxLCAwLCAwKTtcbiAgICAgICAgdGhpcy5fdXBWZWN0b3IgPSB2ZWMzLnNldCh2ZWMzLmNyZWF0ZSgpLCAwLCAxLCAwKTtcbiAgICAgICAgdGhpcy5fZm9yd2FyZFZlY3RvciA9IHZlYzMuc2V0KHZlYzMuY3JlYXRlKCksIDAsIDAsIDEpO1xuICAgICAgICB0aGlzLl9pZGVudGl0eVF1YXQgPSBxdWF0LmlkZW50aXR5KHF1YXQuY3JlYXRlKCkpO1xuICAgICAgICB0aGlzLl9yYWQyZGVnID0gMTgwLjAgLyBNYXRoLlBJO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNyYykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcigndnJtOiBzcmMgcHJvcGVydHkgbm90IHNldCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW5naW5lLnNjZW5lXG4gICAgICAgICAgICAuYXBwZW5kKHRoaXMuc3JjLCB7IGxvYWRHbHRmRXh0ZW5zaW9uczogdHJ1ZSB9KVxuICAgICAgICAgICAgLnRoZW4oKHsgcm9vdCwgZXh0ZW5zaW9ucyB9KSA9PiB7XG4gICAgICAgICAgICByb290LmNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiAoY2hpbGQucGFyZW50ID0gdGhpcy5vYmplY3QpKTtcbiAgICAgICAgICAgIHRoaXMuX2luaXRpYWxpemVWcm0oZXh0ZW5zaW9ucyk7XG4gICAgICAgICAgICByb290LmRlc3Ryb3koKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyB0aGUgVlJNIGdsVEYgZXh0ZW5zaW9ucyBhbmQgaW5pdGlhbGl6ZXMgdGhlIHZybSBjb21wb25lbnQuXG4gICAgICogQHBhcmFtIHtHTFRGRXh0ZW5zaW9uc30gZXh0ZW5zaW9ucyBUaGUgZ2xURiBleHRlbnNpb25zIGZvciB0aGUgVlJNIG1vZGVsXG4gICAgICovXG4gICAgX2luaXRpYWxpemVWcm0oZXh0ZW5zaW9ucykge1xuICAgICAgICBpZiAodGhpcy5faW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdWUk0gY29tcG9uZW50IGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBWUk1DX3ZybSA9IGV4dGVuc2lvbnMucm9vdFsnVlJNQ192cm0nXTtcbiAgICAgICAgaWYgKCFWUk1DX3ZybSkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ01pc3NpbmcgVlJNIGV4dGVuc2lvbnMnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoVlJNQ192cm0uc3BlY1ZlcnNpb24gIT09ICcxLjAnKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgVW5zdXBwb3J0ZWQgVlJNIHZlcnNpb24sIG9ubHkgMS4wIGlzIHN1cHBvcnRlZCwgYnV0IGVuY291bnRlcmVkICcke1ZSTUNfdnJtLnNwZWNWZXJzaW9ufSdgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1ldGEgPSBWUk1DX3ZybS5tZXRhO1xuICAgICAgICB0aGlzLl9wYXJzZUh1bWFub2lkKFZSTUNfdnJtLmh1bWFub2lkLCBleHRlbnNpb25zKTtcbiAgICAgICAgaWYgKFZSTUNfdnJtLmZpcnN0UGVyc29uKSB7XG4gICAgICAgICAgICB0aGlzLl9wYXJzZUZpcnN0UGVyc29uKFZSTUNfdnJtLmZpcnN0UGVyc29uLCBleHRlbnNpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoVlJNQ192cm0ubG9va0F0KSB7XG4gICAgICAgICAgICB0aGlzLl9wYXJzZUxvb2tBdChWUk1DX3ZybS5sb29rQXQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2ZpbmRBbmRQYXJzZU5vZGVDb25zdHJhaW50cyhleHRlbnNpb25zKTtcbiAgICAgICAgY29uc3Qgc3ByaW5nQm9uZSA9IGV4dGVuc2lvbnMucm9vdFsnVlJNQ19zcHJpbmdCb25lJ107XG4gICAgICAgIGlmIChzcHJpbmdCb25lKSB7XG4gICAgICAgICAgICB0aGlzLl9wYXJzZUFuZEluaXRpYWxpemVTcHJpbmdCb25lcyhzcHJpbmdCb25lLCBleHRlbnNpb25zKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9pbml0aWFsaXplZCA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZUh1bWFub2lkKGh1bWFub2lkLCBleHRlbnNpb25zKSB7XG4gICAgICAgIGZvciAoY29uc3QgYm9uZU5hbWUgaW4gaHVtYW5vaWQuaHVtYW5Cb25lcykge1xuICAgICAgICAgICAgaWYgKCEoYm9uZU5hbWUgaW4gdGhpcy5ib25lcykpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFVucmVjb2duaXplZCBib25lICcke2JvbmVOYW1lfSdgKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBodW1hbm9pZC5odW1hbkJvbmVzW2JvbmVOYW1lXS5ub2RlO1xuICAgICAgICAgICAgY29uc3Qgb2JqZWN0SWQgPSBleHRlbnNpb25zLmlkTWFwcGluZ1tub2RlXTtcbiAgICAgICAgICAgIHRoaXMuYm9uZXNbYm9uZU5hbWVdID0gdGhpcy5lbmdpbmUud3JhcE9iamVjdChvYmplY3RJZCk7XG4gICAgICAgICAgICB0aGlzLnJlc3RQb3NlW2JvbmVOYW1lXSA9IHF1YXQuY29weShxdWF0LmNyZWF0ZSgpLCB0aGlzLmJvbmVzW2JvbmVOYW1lXS5yb3RhdGlvbkxvY2FsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfcGFyc2VGaXJzdFBlcnNvbihmaXJzdFBlcnNvbiwgZXh0ZW5zaW9ucykge1xuICAgICAgICBmb3IgKGNvbnN0IG1lc2hBbm5vdGF0aW9uIG9mIGZpcnN0UGVyc29uLm1lc2hBbm5vdGF0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgYW5ub3RhdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBub2RlOiB0aGlzLmVuZ2luZS53cmFwT2JqZWN0KGV4dGVuc2lvbnMuaWRNYXBwaW5nW21lc2hBbm5vdGF0aW9uLm5vZGVdKSxcbiAgICAgICAgICAgICAgICBmaXJzdFBlcnNvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICB0aGlyZFBlcnNvbjogdHJ1ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzd2l0Y2ggKG1lc2hBbm5vdGF0aW9uLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdmaXJzdFBlcnNvbk9ubHknOlxuICAgICAgICAgICAgICAgICAgICBhbm5vdGF0aW9uLnRoaXJkUGVyc29uID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RoaXJkUGVyc29uT25seSc6XG4gICAgICAgICAgICAgICAgICAgIGFubm90YXRpb24uZmlyc3RQZXJzb24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYm90aCc6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2F1dG8nOlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJGaXJzdCBwZXJzb24gbWVzaCBhbm5vdGF0aW9uIHR5cGUgJ2F1dG8nIGlzIG5vdCBzdXBwb3J0ZWQsIHRyZWF0aW5nIGFzICdib3RoJyFcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEludmFsaWQgbWVzaCBhbm5vdGF0aW9uIHR5cGUgJyR7bWVzaEFubm90YXRpb24udHlwZX0nYCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fZmlyc3RQZXJzb25Bbm5vdGF0aW9ucy5wdXNoKGFubm90YXRpb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9wYXJzZUxvb2tBdChsb29rQXQpIHtcbiAgICAgICAgaWYgKGxvb2tBdC50eXBlICE9PSAnYm9uZScpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgVW5zdXBwb3J0ZWQgbG9va0F0IHR5cGUgJyR7bG9va0F0LnR5cGV9Jywgb25seSAnYm9uZScgaXMgc3VwcG9ydGVkYCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VSYW5nZU1hcCA9IChyYW5nZU1hcCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpbnB1dE1heFZhbHVlOiByYW5nZU1hcC5pbnB1dE1heFZhbHVlLFxuICAgICAgICAgICAgICAgIG91dHB1dFNjYWxlOiByYW5nZU1hcC5vdXRwdXRTY2FsZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX2xvb2tBdCA9IHtcbiAgICAgICAgICAgIG9mZnNldEZyb21IZWFkQm9uZTogbG9va0F0Lm9mZnNldEZyb21IZWFkQm9uZSB8fCBbMCwgMCwgMF0sXG4gICAgICAgICAgICBob3Jpem9udGFsSW5uZXI6IHBhcnNlUmFuZ2VNYXAobG9va0F0LnJhbmdlTWFwSG9yaXpvbnRhbElubmVyKSxcbiAgICAgICAgICAgIGhvcml6b250YWxPdXRlcjogcGFyc2VSYW5nZU1hcChsb29rQXQucmFuZ2VNYXBIb3Jpem9udGFsT3V0ZXIpLFxuICAgICAgICAgICAgdmVydGljYWxEb3duOiBwYXJzZVJhbmdlTWFwKGxvb2tBdC5yYW5nZU1hcFZlcnRpY2FsRG93biksXG4gICAgICAgICAgICB2ZXJ0aWNhbFVwOiBwYXJzZVJhbmdlTWFwKGxvb2tBdC5yYW5nZU1hcFZlcnRpY2FsVXApLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBfZmluZEFuZFBhcnNlTm9kZUNvbnN0cmFpbnRzKGV4dGVuc2lvbnMpIHtcbiAgICAgICAgY29uc3QgdHJhdmVyc2UgPSAob2JqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub2RlRXh0ZW5zaW9ucyA9IGV4dGVuc2lvbnMubm9kZVtvYmplY3Qub2JqZWN0SWRdO1xuICAgICAgICAgICAgaWYgKG5vZGVFeHRlbnNpb25zICYmICdWUk1DX25vZGVfY29uc3RyYWludCcgaW4gbm9kZUV4dGVuc2lvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlQ29uc3RyYWludEV4dGVuc2lvbiA9IG5vZGVFeHRlbnNpb25zWydWUk1DX25vZGVfY29uc3RyYWludCddO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnN0cmFpbnQgPSBub2RlQ29uc3RyYWludEV4dGVuc2lvbi5jb25zdHJhaW50O1xuICAgICAgICAgICAgICAgIGxldCB0eXBlLCBheGlzO1xuICAgICAgICAgICAgICAgIGlmICgncm9sbCcgaW4gY29uc3RyYWludCkge1xuICAgICAgICAgICAgICAgICAgICB0eXBlID0gJ3JvbGwnO1xuICAgICAgICAgICAgICAgICAgICBheGlzID0gVlJNX1JPTExfQVhFU1tjb25zdHJhaW50LnJvbGwucm9sbEF4aXNdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgnYWltJyBpbiBjb25zdHJhaW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAnYWltJztcbiAgICAgICAgICAgICAgICAgICAgYXhpcyA9IFZSTV9BSU1fQVhFU1tjb25zdHJhaW50LmFpbS5haW1BeGlzXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoJ3JvdGF0aW9uJyBpbiBjb25zdHJhaW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAncm90YXRpb24nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2UgPSB0aGlzLmVuZ2luZS53cmFwT2JqZWN0KGV4dGVuc2lvbnMuaWRNYXBwaW5nW2NvbnN0cmFpbnRbdHlwZV0uc291cmNlXSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX25vZGVDb25zdHJhaW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjogb2JqZWN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgYXhpczogYXhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodDogY29uc3RyYWludFt0eXBlXS53ZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBSZXN0IHBvc2UgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uUmVzdExvY2FsUm90YXRpb246IHF1YXQuY29weShxdWF0LmNyZWF0ZSgpLCBvYmplY3Qucm90YXRpb25Mb2NhbCksXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VSZXN0TG9jYWxSb3RhdGlvbjogcXVhdC5jb3B5KHF1YXQuY3JlYXRlKCksIHNvdXJjZS5yb3RhdGlvbkxvY2FsKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZVJlc3RMb2NhbFJvdGF0aW9uSW52OiBxdWF0LmludmVydChxdWF0LmNyZWF0ZSgpLCBzb3VyY2Uucm90YXRpb25Mb2NhbCksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdVbnJlY29nbml6ZWQgb3IgaW52YWxpZCBWUk1DX25vZGVfY29uc3RyYWludCwgaWdub3JpbmcgaXQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIG9iamVjdC5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIHRyYXZlcnNlKGNoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdHJhdmVyc2UodGhpcy5vYmplY3QpO1xuICAgIH1cbiAgICBfcGFyc2VBbmRJbml0aWFsaXplU3ByaW5nQm9uZXMoc3ByaW5nQm9uZSwgZXh0ZW5zaW9ucykge1xuICAgICAgICBjb25zdCBjb2xsaWRlcnMgPSAoc3ByaW5nQm9uZS5jb2xsaWRlcnMgfHwgW10pLm1hcCgoY29sbGlkZXIsIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNoYXBlVHlwZSA9ICdjYXBzdWxlJyBpbiBjb2xsaWRlci5zaGFwZSA/ICdjYXBzdWxlJyA6ICdzcGhlcmUnO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpZDogaSxcbiAgICAgICAgICAgICAgICBvYmplY3Q6IHRoaXMuZW5naW5lLndyYXBPYmplY3QoZXh0ZW5zaW9ucy5pZE1hcHBpbmdbY29sbGlkZXIubm9kZV0pLFxuICAgICAgICAgICAgICAgIHNoYXBlOiB7XG4gICAgICAgICAgICAgICAgICAgIGlzQ2Fwc3VsZTogc2hhcGVUeXBlID09PSAnY2Fwc3VsZScsXG4gICAgICAgICAgICAgICAgICAgIHJhZGl1czogY29sbGlkZXIuc2hhcGVbc2hhcGVUeXBlXS5yYWRpdXMsXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldDogY29sbGlkZXIuc2hhcGVbc2hhcGVUeXBlXS5vZmZzZXQsXG4gICAgICAgICAgICAgICAgICAgIHRhaWw6IGNvbGxpZGVyLnNoYXBlW3NoYXBlVHlwZV0udGFpbCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNhY2hlOiB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWQ6IHZlYzMuY3JlYXRlKCksXG4gICAgICAgICAgICAgICAgICAgIHRhaWw6IHZlYzMuY3JlYXRlKCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9zcGhlcmVDb2xsaWRlcnMgPSBjb2xsaWRlcnMuZmlsdGVyKChjKSA9PiAhYy5zaGFwZS5pc0NhcHN1bGUpO1xuICAgICAgICB0aGlzLl9jYXBzdWxlQ29sbGlkZXJzID0gY29sbGlkZXJzLmZpbHRlcigoYykgPT4gYy5zaGFwZS5pc0NhcHN1bGUpO1xuICAgICAgICBjb25zdCBjb2xsaWRlckdyb3VwcyA9IChzcHJpbmdCb25lLmNvbGxpZGVyR3JvdXBzIHx8IFtdKS5tYXAoKGdyb3VwKSA9PiAoe1xuICAgICAgICAgICAgbmFtZTogZ3JvdXAubmFtZSxcbiAgICAgICAgICAgIGNvbGxpZGVyczogZ3JvdXAuY29sbGlkZXJzLm1hcCgoYykgPT4gY29sbGlkZXJzW2NdKSxcbiAgICAgICAgfSkpO1xuICAgICAgICBmb3IgKGNvbnN0IHNwcmluZyBvZiBzcHJpbmdCb25lLnNwcmluZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGpvaW50cyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBqb2ludCBvZiBzcHJpbmcuam9pbnRzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3ByaW5nSm9pbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgIGhpdFJhZGl1czogMC4wLFxuICAgICAgICAgICAgICAgICAgICBzdGlmZm5lc3M6IDEuMCxcbiAgICAgICAgICAgICAgICAgICAgZ3Jhdml0eVBvd2VyOiAwLjAsXG4gICAgICAgICAgICAgICAgICAgIGdyYXZpdHlEaXI6IFswLjAsIC0xLjAsIDAuMF0sXG4gICAgICAgICAgICAgICAgICAgIGRyYWdGb3JjZTogMC41LFxuICAgICAgICAgICAgICAgICAgICBub2RlOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBzdGF0ZTogbnVsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oc3ByaW5nSm9pbnQsIGpvaW50KTtcbiAgICAgICAgICAgICAgICBzcHJpbmdKb2ludC5ub2RlID0gdGhpcy5lbmdpbmUud3JhcE9iamVjdChleHRlbnNpb25zLmlkTWFwcGluZ1tzcHJpbmdKb2ludC5ub2RlXSk7XG4gICAgICAgICAgICAgICAgam9pbnRzLnB1c2goc3ByaW5nSm9pbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc3ByaW5nQ2hhaW5Db2xsaWRlcnMgPSAoc3ByaW5nLmNvbGxpZGVyR3JvdXBzIHx8IFtdKS5mbGF0TWFwKChjZykgPT4gY29sbGlkZXJHcm91cHNbY2ddLmNvbGxpZGVycyk7XG4gICAgICAgICAgICB0aGlzLl9zcHJpbmdDaGFpbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgbmFtZTogc3ByaW5nLm5hbWUsXG4gICAgICAgICAgICAgICAgY2VudGVyOiBzcHJpbmcuY2VudGVyXG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5lbmdpbmUud3JhcE9iamVjdChleHRlbnNpb25zLmlkTWFwcGluZ1tzcHJpbmcuY2VudGVyXSlcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgICAgIGpvaW50cyxcbiAgICAgICAgICAgICAgICBzcGhlcmVDb2xsaWRlcnM6IHNwcmluZ0NoYWluQ29sbGlkZXJzLmZpbHRlcigoYykgPT4gIWMuc2hhcGUuaXNDYXBzdWxlKSxcbiAgICAgICAgICAgICAgICBjYXBzdWxlQ29sbGlkZXJzOiBzcHJpbmdDaGFpbkNvbGxpZGVycy5maWx0ZXIoKGMpID0+IGMuc2hhcGUuaXNDYXBzdWxlKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8qIEluaXRpYWxpemUgc3ByaW5nIGJvbmUgam9pbnQgc3RhdGUgKi9cbiAgICAgICAgZm9yIChjb25zdCBzcHJpbmdDaGFpbiBvZiB0aGlzLl9zcHJpbmdDaGFpbnMpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3ByaW5nQ2hhaW4uam9pbnRzLmxlbmd0aCAtIDE7ICsraSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNwcmluZ0JvbmVKb2ludCA9IHNwcmluZ0NoYWluLmpvaW50c1tpXTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZFNwcmluZ0JvbmVKb2ludCA9IHNwcmluZ0NoYWluLmpvaW50c1tpICsgMV07XG4gICAgICAgICAgICAgICAgY29uc3Qgc3ByaW5nQm9uZVBvc2l0aW9uID0gc3ByaW5nQm9uZUpvaW50Lm5vZGUuZ2V0VHJhbnNsYXRpb25Xb3JsZCh2ZWMzLmNyZWF0ZSgpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZFNwcmluZ0JvbmVQb3NpdGlvbiA9IGNoaWxkU3ByaW5nQm9uZUpvaW50Lm5vZGUuZ2V0VHJhbnNsYXRpb25Xb3JsZCh2ZWMzLmNyZWF0ZSgpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBib25lRGlyZWN0aW9uID0gdmVjMy5zdWJ0cmFjdCh0aGlzLl90ZW1wVjNBLCBzcHJpbmdCb25lUG9zaXRpb24sIGNoaWxkU3ByaW5nQm9uZVBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgcHJldlRhaWw6IGNoaWxkU3ByaW5nQm9uZVBvc2l0aW9uLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGFpbDogdmVjMy5jb3B5KHZlYzMuY3JlYXRlKCksIGNoaWxkU3ByaW5nQm9uZVBvc2l0aW9uKSxcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbExvY2FsUm90YXRpb246IHF1YXQuY29weShxdWF0LmNyZWF0ZSgpLCBzcHJpbmdCb25lSm9pbnQubm9kZS5yb3RhdGlvbkxvY2FsKSxcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbExvY2FsVHJhbnNmb3JtSW52ZXJ0OiBxdWF0Mi5pbnZlcnQocXVhdDIuY3JlYXRlKCksIHNwcmluZ0JvbmVKb2ludC5ub2RlLnRyYW5zZm9ybUxvY2FsKSxcbiAgICAgICAgICAgICAgICAgICAgYm9uZUF4aXM6IHZlYzMubm9ybWFsaXplKHZlYzMuY3JlYXRlKCksIGNoaWxkU3ByaW5nQm9uZUpvaW50Lm5vZGUuZ2V0VHJhbnNsYXRpb25Mb2NhbCh0aGlzLl90ZW1wVjMpKSxcbiAgICAgICAgICAgICAgICAgICAgLyogRW5zdXJlIGJvbmUgbGVuZ3RoIGlzIGF0IGxlYXN0IDFjbSB0byBhdm9pZCBqaXR0ZXJ5IGJlaGF2aW91ciBmcm9tIHplcm8tbGVuZ3RoIGJvbmVzICovXG4gICAgICAgICAgICAgICAgICAgIGJvbmVMZW5ndGg6IE1hdGgubWF4KDAuMDEsIHZlYzMubGVuZ3RoKGJvbmVEaXJlY3Rpb24pKSxcbiAgICAgICAgICAgICAgICAgICAgLyogVGFpbCBwb3NpdGlvbnMgaW4gY2VudGVyIHNwYWNlLCBpZiBuZWVkZWQgKi9cbiAgICAgICAgICAgICAgICAgICAgcHJldlRhaWxDZW50ZXI6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUYWlsQ2VudGVyOiBudWxsLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKHNwcmluZ0NoYWluLmNlbnRlcikge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5wcmV2VGFpbENlbnRlciA9IHNwcmluZ0NoYWluLmNlbnRlci50cmFuc2Zvcm1Qb2ludEludmVyc2VXb3JsZCh2ZWMzLmNyZWF0ZSgpLCBjaGlsZFNwcmluZ0JvbmVQb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmN1cnJlbnRUYWlsQ2VudGVyID0gdmVjMy5jb3B5KHZlYzMuY3JlYXRlKCksIGNoaWxkU3ByaW5nQm9uZVBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3ByaW5nQm9uZUpvaW50LnN0YXRlID0gc3RhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIGlmICghdGhpcy5faW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvKiAxLiBSZXNvbHZlIGh1bWFub2lkIGJvbmVzIChwZXJmb3JtZWQgYnkgdXNlcikgKi9cbiAgICAgICAgLyogMi4gUmVzb2x2ZSBMb29rQXQgKGJvbmUgdHlwZSkgYXMgdGhlIHBvc2l0aW9uIG9mIHRoZSBoZWFkIGlzIGRldGVybWluZWQgKi9cbiAgICAgICAgdGhpcy5fcmVzb2x2ZUxvb2tBdCgpO1xuICAgICAgICAvKiAzLiBFeHByZXNzaW9uIHVwZGF0ZSAoVE9ETykgKi9cbiAgICAgICAgLyogNC4gQXBwbHkgRXhwcmVzc2lvbiAoVE9ETykgKi9cbiAgICAgICAgLyogNS4gUmVzb2x2ZSBjb25zdHJhaW50cyAqL1xuICAgICAgICB0aGlzLl9yZXNvbHZlQ29uc3RyYWludHMoKTtcbiAgICAgICAgLyogNi4gUmVzb2x2ZSBTcHJpbmcgQm9uZSAqL1xuICAgICAgICB0aGlzLl91cGRhdGVTcHJpbmdCb25lcyhkdCk7XG4gICAgfVxuICAgIF9yYW5nZU1hcChyYW5nZU1hcCwgaW5wdXQpIHtcbiAgICAgICAgY29uc3QgbWF4VmFsdWUgPSByYW5nZU1hcC5pbnB1dE1heFZhbHVlO1xuICAgICAgICBjb25zdCBvdXRwdXRTY2FsZSA9IHJhbmdlTWFwLm91dHB1dFNjYWxlO1xuICAgICAgICByZXR1cm4gKE1hdGgubWluKGlucHV0LCBtYXhWYWx1ZSkgLyBtYXhWYWx1ZSkgKiBvdXRwdXRTY2FsZTtcbiAgICB9XG4gICAgX3Jlc29sdmVMb29rQXQoKSB7XG4gICAgICAgIGlmICghdGhpcy5fbG9va0F0IHx8ICF0aGlzLmxvb2tBdFRhcmdldCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxvb2tBdFNvdXJjZSA9IHRoaXMuYm9uZXMuaGVhZC50cmFuc2Zvcm1Qb2ludFdvcmxkKHRoaXMuX3RlbXBWM0EsIHRoaXMuX2xvb2tBdC5vZmZzZXRGcm9tSGVhZEJvbmUpO1xuICAgICAgICBjb25zdCBsb29rQXRUYXJnZXQgPSB0aGlzLmxvb2tBdFRhcmdldC5nZXRUcmFuc2xhdGlvbldvcmxkKHRoaXMuX3RlbXBWM0IpO1xuICAgICAgICBjb25zdCBsb29rQXREaXJlY3Rpb24gPSB2ZWMzLnN1Yih0aGlzLl90ZW1wVjNBLCBsb29rQXRUYXJnZXQsIGxvb2tBdFNvdXJjZSk7XG4gICAgICAgIHZlYzMubm9ybWFsaXplKGxvb2tBdERpcmVjdGlvbiwgbG9va0F0RGlyZWN0aW9uKTtcbiAgICAgICAgLyogQ29udmVydCB0aGUgZGlyZWN0aW9uIGludG8gTG9va0F0IHNwYWNlICovXG4gICAgICAgIHRoaXMuYm9uZXMuaGVhZC5wYXJlbnQudHJhbnNmb3JtVmVjdG9ySW52ZXJzZVdvcmxkKGxvb2tBdERpcmVjdGlvbik7XG4gICAgICAgIGNvbnN0IHogPSB2ZWMzLmRvdChsb29rQXREaXJlY3Rpb24sIHRoaXMuX2ZvcndhcmRWZWN0b3IpO1xuICAgICAgICBjb25zdCB4ID0gdmVjMy5kb3QobG9va0F0RGlyZWN0aW9uLCB0aGlzLl9yaWdodFZlY3Rvcik7XG4gICAgICAgIGNvbnN0IHlhdyA9IE1hdGguYXRhbjIoeCwgeikgKiB0aGlzLl9yYWQyZGVnO1xuICAgICAgICBjb25zdCB4eiA9IE1hdGguc3FydCh4ICogeCArIHogKiB6KTtcbiAgICAgICAgY29uc3QgeSA9IHZlYzMuZG90KGxvb2tBdERpcmVjdGlvbiwgdGhpcy5fdXBWZWN0b3IpO1xuICAgICAgICBsZXQgcGl0Y2ggPSBNYXRoLmF0YW4yKC15LCB4eikgKiB0aGlzLl9yYWQyZGVnO1xuICAgICAgICAvKiBMaW1pdCBwaXRjaCAqL1xuICAgICAgICBpZiAocGl0Y2ggPiAwKSB7XG4gICAgICAgICAgICBwaXRjaCA9IHRoaXMuX3JhbmdlTWFwKHRoaXMuX2xvb2tBdC52ZXJ0aWNhbERvd24sIHBpdGNoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBpdGNoID0gLXRoaXMuX3JhbmdlTWFwKHRoaXMuX2xvb2tBdC52ZXJ0aWNhbFVwLCAtcGl0Y2gpO1xuICAgICAgICB9XG4gICAgICAgIC8qIExlZnQgZXllIChsaW1pdCB5YXcpICovXG4gICAgICAgIGlmICh0aGlzLmJvbmVzLmxlZnRFeWUpIHtcbiAgICAgICAgICAgIGxldCB5YXdMZWZ0ID0geWF3O1xuICAgICAgICAgICAgaWYgKHlhd0xlZnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgeWF3TGVmdCA9IHRoaXMuX3JhbmdlTWFwKHRoaXMuX2xvb2tBdC5ob3Jpem9udGFsSW5uZXIsIHlhd0xlZnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgeWF3TGVmdCA9IC10aGlzLl9yYW5nZU1hcCh0aGlzLl9sb29rQXQuaG9yaXpvbnRhbE91dGVyLCAteWF3TGVmdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBleWVSb3RhdGlvbiA9IHF1YXQuZnJvbUV1bGVyKHRoaXMuX3RlbXBRdWF0QSwgcGl0Y2gsIHlhd0xlZnQsIDApO1xuICAgICAgICAgICAgdGhpcy5ib25lcy5sZWZ0RXllLnJvdGF0aW9uTG9jYWwgPSBxdWF0Lm11bHRpcGx5KGV5ZVJvdGF0aW9uLCB0aGlzLnJlc3RQb3NlLmxlZnRFeWUsIGV5ZVJvdGF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICAvKiBSaWdodCBleWUgKGxpbWl0IHlhdykgKi9cbiAgICAgICAgaWYgKHRoaXMuYm9uZXMucmlnaHRFeWUpIHtcbiAgICAgICAgICAgIGxldCB5YXdSaWdodCA9IHlhdztcbiAgICAgICAgICAgIGlmICh5YXdSaWdodCA+IDApIHtcbiAgICAgICAgICAgICAgICB5YXdSaWdodCA9IHRoaXMuX3JhbmdlTWFwKHRoaXMuX2xvb2tBdC5ob3Jpem9udGFsT3V0ZXIsIHlhd1JpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHlhd1JpZ2h0ID0gLXRoaXMuX3JhbmdlTWFwKHRoaXMuX2xvb2tBdC5ob3Jpem9udGFsSW5uZXIsIC15YXdSaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBleWVSb3RhdGlvbiA9IHF1YXQuZnJvbUV1bGVyKHRoaXMuX3RlbXBRdWF0QSwgcGl0Y2gsIHlhd1JpZ2h0LCAwKTtcbiAgICAgICAgICAgIHRoaXMuYm9uZXMucmlnaHRFeWUucm90YXRpb25Mb2NhbCA9IHF1YXQubXVsdGlwbHkoZXllUm90YXRpb24sIHRoaXMucmVzdFBvc2UucmlnaHRFeWUsIGV5ZVJvdGF0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfcmVzb2x2ZUNvbnN0cmFpbnRzKCkge1xuICAgICAgICBmb3IgKGNvbnN0IG5vZGVDb25zdHJhaW50IG9mIHRoaXMuX25vZGVDb25zdHJhaW50cykge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZUNvbnN0cmFpbnQobm9kZUNvbnN0cmFpbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9yZXNvbHZlQ29uc3RyYWludChub2RlQ29uc3RyYWludCkge1xuICAgICAgICBjb25zdCBkc3RSZXN0UXVhdCA9IG5vZGVDb25zdHJhaW50LmRlc3RpbmF0aW9uUmVzdExvY2FsUm90YXRpb247XG4gICAgICAgIGNvbnN0IHNyY1Jlc3RRdWF0SW52ID0gbm9kZUNvbnN0cmFpbnQuc291cmNlUmVzdExvY2FsUm90YXRpb25JbnY7XG4gICAgICAgIGNvbnN0IHRhcmdldFF1YXQgPSBxdWF0LmlkZW50aXR5KHRoaXMuX3RlbXBRdWF0QSk7XG4gICAgICAgIHN3aXRjaCAobm9kZUNvbnN0cmFpbnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSAncm9sbCc6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWx0YVNyY1F1YXQgPSBxdWF0Lm11bHRpcGx5KHRoaXMuX3RlbXBRdWF0QSwgc3JjUmVzdFF1YXRJbnYsIG5vZGVDb25zdHJhaW50LnNvdXJjZS5yb3RhdGlvbkxvY2FsKTtcbiAgICAgICAgICAgICAgICAgICAgLyogc291cmNlIHRvIHBhcmVudCAqL1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWx0YVNyY1F1YXRJblBhcmVudCA9IHF1YXQubXVsdGlwbHkodGhpcy5fdGVtcFF1YXRBLCBub2RlQ29uc3RyYWludC5zb3VyY2VSZXN0TG9jYWxSb3RhdGlvbiwgZGVsdGFTcmNRdWF0KTtcbiAgICAgICAgICAgICAgICAgICAgcXVhdC5tdWwoZGVsdGFTcmNRdWF0SW5QYXJlbnQsIGRlbHRhU3JjUXVhdEluUGFyZW50LCBzcmNSZXN0UXVhdEludik7XG4gICAgICAgICAgICAgICAgICAgIC8qIHBhcmVudCB0byBkZXN0aW5hdGlvbiAqL1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkc3RSZXN0UXVhdEludiA9IHF1YXQuaW52ZXJ0KHRoaXMuX3RlbXBRdWF0QiwgZHN0UmVzdFF1YXQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWx0YVNyY1F1YXRJbkRzdCA9IHF1YXQubXVsdGlwbHkodGhpcy5fdGVtcFF1YXRCLCBkc3RSZXN0UXVhdEludiwgZGVsdGFTcmNRdWF0SW5QYXJlbnQpO1xuICAgICAgICAgICAgICAgICAgICBxdWF0Lm11bHRpcGx5KGRlbHRhU3JjUXVhdEluRHN0LCBkZWx0YVNyY1F1YXRJbkRzdCwgZHN0UmVzdFF1YXQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b1ZlYyA9IHZlYzMudHJhbnNmb3JtUXVhdCh0aGlzLl90ZW1wVjNBLCBub2RlQ29uc3RyYWludC5heGlzLCBkZWx0YVNyY1F1YXRJbkRzdCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyb21Ub1F1YXQgPSBxdWF0LnJvdGF0aW9uVG8odGhpcy5fdGVtcFF1YXRBLCBub2RlQ29uc3RyYWludC5heGlzLCB0b1ZlYyk7XG4gICAgICAgICAgICAgICAgICAgIHF1YXQubXVsKHRhcmdldFF1YXQsIGRzdFJlc3RRdWF0LCBxdWF0LmludmVydCh0aGlzLl90ZW1wUXVhdCwgZnJvbVRvUXVhdCkpO1xuICAgICAgICAgICAgICAgICAgICBxdWF0Lm11bCh0YXJnZXRRdWF0LCB0YXJnZXRRdWF0LCBkZWx0YVNyY1F1YXRJbkRzdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYWltJzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRzdFBhcmVudFdvcmxkUXVhdCA9IG5vZGVDb25zdHJhaW50LmRlc3RpbmF0aW9uLnBhcmVudC5yb3RhdGlvbldvcmxkO1xuICAgICAgICAgICAgICAgICAgICAvKiBmcm9tVmVjID0gYWltQXhpcy5hcHBseVF1YXRlcm5pb24oIGRzdFBhcmVudFdvcmxkUXVhdCAqIGRzdFJlc3RRdWF0ICkgKi9cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJvbVZlYyA9IHZlYzMudHJhbnNmb3JtUXVhdCh0aGlzLl90ZW1wVjNBLCBub2RlQ29uc3RyYWludC5heGlzLCBkc3RSZXN0UXVhdCk7XG4gICAgICAgICAgICAgICAgICAgIHZlYzMudHJhbnNmb3JtUXVhdChmcm9tVmVjLCBmcm9tVmVjLCBkc3RQYXJlbnRXb3JsZFF1YXQpO1xuICAgICAgICAgICAgICAgICAgICAvKiB0b1ZlYyA9ICggc3JjV29ybGRQb3MgLSBkc3RXb3JsZFBvcyApLm5vcm1hbGl6ZWQgKi9cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9WZWMgPSBub2RlQ29uc3RyYWludC5zb3VyY2UuZ2V0VHJhbnNsYXRpb25Xb3JsZCh0aGlzLl90ZW1wVjNCKTtcbiAgICAgICAgICAgICAgICAgICAgdmVjMy5zdWIodG9WZWMsIHRvVmVjLCBub2RlQ29uc3RyYWludC5kZXN0aW5hdGlvbi5nZXRUcmFuc2xhdGlvbldvcmxkKHRoaXMuX3RlbXBWMykpO1xuICAgICAgICAgICAgICAgICAgICB2ZWMzLm5vcm1hbGl6ZSh0b1ZlYywgdG9WZWMpO1xuICAgICAgICAgICAgICAgICAgICAvKiBmcm9tVG9RdWF0ID0gUXVhdGVybmlvbi5mcm9tVG9Sb3RhdGlvbiggZnJvbVZlYywgdG9WZWMgKSAqL1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmcm9tVG9RdWF0ID0gcXVhdC5yb3RhdGlvblRvKHRoaXMuX3RlbXBRdWF0QSwgZnJvbVZlYywgdG9WZWMpO1xuICAgICAgICAgICAgICAgICAgICBxdWF0Lm11bCh0YXJnZXRRdWF0LCBxdWF0LmludmVydCh0aGlzLl90ZW1wUXVhdCwgZHN0UGFyZW50V29ybGRRdWF0KSwgZnJvbVRvUXVhdCk7XG4gICAgICAgICAgICAgICAgICAgIHF1YXQubXVsKHRhcmdldFF1YXQsIHRhcmdldFF1YXQsIGRzdFBhcmVudFdvcmxkUXVhdCk7XG4gICAgICAgICAgICAgICAgICAgIHF1YXQubXVsKHRhcmdldFF1YXQsIHRhcmdldFF1YXQsIGRzdFJlc3RRdWF0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdyb3RhdGlvbic6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzcmNEZWx0YVF1YXQgPSBxdWF0Lm11bCh0YXJnZXRRdWF0LCBzcmNSZXN0UXVhdEludiwgbm9kZUNvbnN0cmFpbnQuc291cmNlLnJvdGF0aW9uTG9jYWwpO1xuICAgICAgICAgICAgICAgICAgICBxdWF0Lm11bCh0YXJnZXRRdWF0LCBkc3RSZXN0UXVhdCwgc3JjRGVsdGFRdWF0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLyogQXBwbHkgY29uc3RyYWludCAqL1xuICAgICAgICBxdWF0LnNsZXJwKHRhcmdldFF1YXQsIGRzdFJlc3RRdWF0LCB0YXJnZXRRdWF0LCBub2RlQ29uc3RyYWludC53ZWlnaHQpO1xuICAgICAgICBub2RlQ29uc3RyYWludC5kZXN0aW5hdGlvbi5yb3RhdGlvbkxvY2FsID0gdGFyZ2V0UXVhdDtcbiAgICB9XG4gICAgX3VwZGF0ZVNwcmluZ0JvbmVzKGR0KSB7XG4gICAgICAgIC8qIFByZS1jb21wdXRlIGNvbGxpZGVyIHBvc2l0aW9ucyAqL1xuICAgICAgICB0aGlzLl9zcGhlcmVDb2xsaWRlcnMuZm9yRWFjaCgoeyBvYmplY3QsIHNoYXBlLCBjYWNoZSB9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSB2ZWMzLmNvcHkoY2FjaGUuaGVhZCwgc2hhcGUub2Zmc2V0KTtcbiAgICAgICAgICAgIG9iamVjdC50cmFuc2Zvcm1WZWN0b3JXb3JsZChvZmZzZXQpO1xuICAgICAgICAgICAgdmVjMy5hZGQoY2FjaGUuaGVhZCwgb2JqZWN0LmdldFRyYW5zbGF0aW9uV29ybGQodGhpcy5fdGVtcFYzKSwgb2Zmc2V0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2NhcHN1bGVDb2xsaWRlcnMuZm9yRWFjaCgoeyBvYmplY3QsIHNoYXBlLCBjYWNoZSB9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzaGFwZUNlbnRlciA9IG9iamVjdC5nZXRUcmFuc2xhdGlvbldvcmxkKHRoaXMuX3RlbXBWM0EpO1xuICAgICAgICAgICAgY29uc3QgaGVhZE9mZnNldCA9IHZlYzMuY29weShjYWNoZS5oZWFkLCBzaGFwZS5vZmZzZXQpO1xuICAgICAgICAgICAgb2JqZWN0LnRyYW5zZm9ybVZlY3RvcldvcmxkKGhlYWRPZmZzZXQpO1xuICAgICAgICAgICAgdmVjMy5hZGQoY2FjaGUuaGVhZCwgc2hhcGVDZW50ZXIsIGhlYWRPZmZzZXQpO1xuICAgICAgICAgICAgY29uc3QgdGFpbE9mZnNldCA9IHZlYzMuY29weShjYWNoZS50YWlsLCBzaGFwZS50YWlsKTtcbiAgICAgICAgICAgIG9iamVjdC50cmFuc2Zvcm1WZWN0b3JXb3JsZCh0YWlsT2Zmc2V0KTtcbiAgICAgICAgICAgIHZlYzMuYWRkKGNhY2hlLnRhaWwsIHNoYXBlQ2VudGVyLCB0YWlsT2Zmc2V0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8qIFVwZGF0ZSBzcHJpbmcgY2hhaW5zICovXG4gICAgICAgIHRoaXMuX3NwcmluZ0NoYWlucy5mb3JFYWNoKChzcHJpbmdDaGFpbikgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcHJpbmdDaGFpbi5qb2ludHMubGVuZ3RoIC0gMTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgam9pbnQgPSBzcHJpbmdDaGFpbi5qb2ludHNbaV07XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50V29ybGRSb3RhdGlvbiA9IGpvaW50Lm5vZGUucGFyZW50XG4gICAgICAgICAgICAgICAgICAgID8gam9pbnQubm9kZS5wYXJlbnQucm90YXRpb25Xb3JsZFxuICAgICAgICAgICAgICAgICAgICA6IHRoaXMuX2lkZW50aXR5UXVhdDtcbiAgICAgICAgICAgICAgICAvKiAxLiBGb3JjZXMgKi9cbiAgICAgICAgICAgICAgICAvKiBpbmVydGlhID0gKGN1cnJlbnRUYWlsIC0gcHJldlRhaWwpICogKDEuMGYgLSBkcmFnRm9yY2UpOyAqL1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZXJ0aWEgPSB0aGlzLl9pbmVydGlhO1xuICAgICAgICAgICAgICAgIGlmIChzcHJpbmdDaGFpbi5jZW50ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmVjMy5zdWIoaW5lcnRpYSwgam9pbnQuc3RhdGUuY3VycmVudFRhaWxDZW50ZXIsIGpvaW50LnN0YXRlLnByZXZUYWlsQ2VudGVyKTtcbiAgICAgICAgICAgICAgICAgICAgc3ByaW5nQ2hhaW4uY2VudGVyLnRyYW5zZm9ybVZlY3RvcldvcmxkKGluZXJ0aWEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmVjMy5zdWIoaW5lcnRpYSwgam9pbnQuc3RhdGUuY3VycmVudFRhaWwsIGpvaW50LnN0YXRlLnByZXZUYWlsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmVjMy5zY2FsZShpbmVydGlhLCBpbmVydGlhLCAxLjAgLSBqb2ludC5kcmFnRm9yY2UpO1xuICAgICAgICAgICAgICAgIC8qIHN0aWZmbmVzcyA9IGRlbHRhVGltZSAqIHBhcmVudFdvcmxkUm90YXRpb24gKiBsb2NhbFJvdGF0aW9uICogYm9uZUF4aXMgKiBzdGlmZm5lc3NGb3JjZTsgKi9cbiAgICAgICAgICAgICAgICBjb25zdCBzdGlmZm5lc3MgPSB2ZWMzLmNvcHkodGhpcy5fc3RpZmZuZXNzLCBqb2ludC5zdGF0ZS5ib25lQXhpcyk7XG4gICAgICAgICAgICAgICAgdmVjMy50cmFuc2Zvcm1RdWF0KHN0aWZmbmVzcywgc3RpZmZuZXNzLCBqb2ludC5zdGF0ZS5pbml0aWFsTG9jYWxSb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgdmVjMy50cmFuc2Zvcm1RdWF0KHN0aWZmbmVzcywgc3RpZmZuZXNzLCBwYXJlbnRXb3JsZFJvdGF0aW9uKTtcbiAgICAgICAgICAgICAgICB2ZWMzLnNjYWxlKHN0aWZmbmVzcywgc3RpZmZuZXNzLCBkdCAqIGpvaW50LnN0aWZmbmVzcyk7XG4gICAgICAgICAgICAgICAgLyogZXh0ZXJuYWwgPSBkZWx0YVRpbWUgKiBncmF2aXR5RGlyICogZ3Jhdml0eVBvd2VyOyAqL1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4dGVybmFsID0gdmVjMy5zY2FsZSh0aGlzLl9leHRlcm5hbCwgam9pbnQuZ3Jhdml0eURpciwgZHQgKiBqb2ludC5ncmF2aXR5UG93ZXIpO1xuICAgICAgICAgICAgICAgIC8qIG5leHRUYWlsID0gY3VycmVudFRhaWwgKyBpbmVydGlhICsgc3RpZmZuZXNzICsgZXh0ZXJuYWw7ICovXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dFRhaWwgPSB2ZWMzLmNvcHkodGhpcy5fdGVtcFYzQSwgam9pbnQuc3RhdGUuY3VycmVudFRhaWwpO1xuICAgICAgICAgICAgICAgIHZlYzMuYWRkKG5leHRUYWlsLCBuZXh0VGFpbCwgaW5lcnRpYSk7XG4gICAgICAgICAgICAgICAgdmVjMy5hZGQobmV4dFRhaWwsIG5leHRUYWlsLCBzdGlmZm5lc3MpO1xuICAgICAgICAgICAgICAgIHZlYzMuYWRkKG5leHRUYWlsLCBuZXh0VGFpbCwgZXh0ZXJuYWwpO1xuICAgICAgICAgICAgICAgIC8qIGNvbnN0cmFpbiB0aGUgbGVuZ3RoICovXG4gICAgICAgICAgICAgICAgLyogbmV4dFRhaWwgPSB3b3JsZFBvc2l0aW9uICsgKG5leHRUYWlsIC0gd29ybGRQb3NpdGlvbikubm9ybWFsaXplZCAqIGJvbmVMZW5ndGg7ICovXG4gICAgICAgICAgICAgICAgY29uc3Qgd29ybGRQb3NpdGlvbiA9IGpvaW50Lm5vZGUuZ2V0VHJhbnNsYXRpb25Xb3JsZCh0aGlzLl90ZW1wVjNCKTtcbiAgICAgICAgICAgICAgICB2ZWMzLnN1YihuZXh0VGFpbCwgbmV4dFRhaWwsIHdvcmxkUG9zaXRpb24pO1xuICAgICAgICAgICAgICAgIHZlYzMubm9ybWFsaXplKG5leHRUYWlsLCBuZXh0VGFpbCk7XG4gICAgICAgICAgICAgICAgdmVjMy5zY2FsZUFuZEFkZChuZXh0VGFpbCwgd29ybGRQb3NpdGlvbiwgbmV4dFRhaWwsIGpvaW50LnN0YXRlLmJvbmVMZW5ndGgpO1xuICAgICAgICAgICAgICAgIC8qIDIuIENvbGxpc2lvbiB3aXRoIGNvbGxpZGVycyAqL1xuICAgICAgICAgICAgICAgIC8qIFNwaGVyZSBjb2xsaWRlcnMgKi9cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHsgc2hhcGUsIGNhY2hlIH0gb2Ygc3ByaW5nQ2hhaW4uc3BoZXJlQ29sbGlkZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YWlsVG9TaGFwZSA9IHRoaXMuX3RhaWxUb1NoYXBlO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGhlcmVDZW50ZXIgPSBjYWNoZS5oZWFkO1xuICAgICAgICAgICAgICAgICAgICB0YWlsVG9TaGFwZSA9IHZlYzMuc3ViKHRhaWxUb1NoYXBlLCBuZXh0VGFpbCwgc3BoZXJlQ2VudGVyKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmFkaXVzID0gc2hhcGUucmFkaXVzICsgam9pbnQuaGl0UmFkaXVzO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXN0ID0gdmVjMy5sZW5ndGgodGFpbFRvU2hhcGUpIC0gcmFkaXVzO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdCA8IDAuMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUodGFpbFRvU2hhcGUsIHRhaWxUb1NoYXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMuc2NhbGVBbmRBZGQobmV4dFRhaWwsIG5leHRUYWlsLCB0YWlsVG9TaGFwZSwgLWRpc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogY29uc3RyYWludCB0aGUgbGVuZ3RoICovXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWMzLnN1YihuZXh0VGFpbCwgbmV4dFRhaWwsIHdvcmxkUG9zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUobmV4dFRhaWwsIG5leHRUYWlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMuc2NhbGVBbmRBZGQobmV4dFRhaWwsIHdvcmxkUG9zaXRpb24sIG5leHRUYWlsLCBqb2ludC5zdGF0ZS5ib25lTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvKiBDYXBzdWxlIGNvbGxpZGVycyAqL1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgeyBzaGFwZSwgY2FjaGUgfSBvZiBzcHJpbmdDaGFpbi5jYXBzdWxlQ29sbGlkZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YWlsVG9TaGFwZSA9IHRoaXMuX3RhaWxUb1NoYXBlO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkID0gY2FjaGUuaGVhZDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFpbCA9IGNhY2hlLnRhaWw7XG4gICAgICAgICAgICAgICAgICAgIC8qIE5haXZlbHkgc3RhcnQgd2l0aCBkaXN0YW5jZSB0byB0aGUgaGVhZCAqL1xuICAgICAgICAgICAgICAgICAgICB0YWlsVG9TaGFwZSA9IHZlYzMuc3ViKHRhaWxUb1NoYXBlLCBuZXh0VGFpbCwgaGVhZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRUb1RhaWwgPSB2ZWMzLnN1Yih0aGlzLl9oZWFkVG9UYWlsLCB0YWlsLCBoZWFkKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZG90ID0gdmVjMy5kb3QoaGVhZFRvVGFpbCwgdGFpbFRvU2hhcGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmVjMy5zcXVhcmVkTGVuZ3RoKGhlYWRUb1RhaWwpIDw9IGRvdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogQ2xvc2VzdCB0byB0YWlsICovXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWMzLnN1Yih0YWlsVG9TaGFwZSwgbmV4dFRhaWwsIHRhaWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRvdCA+IDAuMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogQ2xvc2VzdCB0byBtaWRkbGUgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMuc2NhbGUoaGVhZFRvVGFpbCwgaGVhZFRvVGFpbCwgZG90IC8gdmVjMy5zcXVhcmVkTGVuZ3RoKGhlYWRUb1RhaWwpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMuc3ViKHRhaWxUb1NoYXBlLCB0YWlsVG9TaGFwZSwgaGVhZFRvVGFpbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmFkaXVzID0gc2hhcGUucmFkaXVzICsgam9pbnQuaGl0UmFkaXVzO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXN0ID0gdmVjMy5sZW5ndGgodGFpbFRvU2hhcGUpIC0gcmFkaXVzO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdCA8IDAuMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUodGFpbFRvU2hhcGUsIHRhaWxUb1NoYXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMuc2NhbGVBbmRBZGQobmV4dFRhaWwsIG5leHRUYWlsLCB0YWlsVG9TaGFwZSwgLWRpc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogY29uc3RyYWludCB0aGUgbGVuZ3RoICovXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWMzLnN1YihuZXh0VGFpbCwgbmV4dFRhaWwsIHdvcmxkUG9zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUobmV4dFRhaWwsIG5leHRUYWlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMuc2NhbGVBbmRBZGQobmV4dFRhaWwsIHdvcmxkUG9zaXRpb24sIG5leHRUYWlsLCBqb2ludC5zdGF0ZS5ib25lTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvKiAzLiBBcHBseWluZyByb3RhdGlvbiAqL1xuICAgICAgICAgICAgICAgIHZlYzMuY29weShqb2ludC5zdGF0ZS5wcmV2VGFpbCwgam9pbnQuc3RhdGUuY3VycmVudFRhaWwpO1xuICAgICAgICAgICAgICAgIHZlYzMuY29weShqb2ludC5zdGF0ZS5jdXJyZW50VGFpbCwgbmV4dFRhaWwpO1xuICAgICAgICAgICAgICAgIGlmIChzcHJpbmdDaGFpbi5jZW50ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmVjMy5jb3B5KGpvaW50LnN0YXRlLnByZXZUYWlsQ2VudGVyLCBqb2ludC5zdGF0ZS5jdXJyZW50VGFpbENlbnRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZlYzMuY29weShqb2ludC5zdGF0ZS5jdXJyZW50VGFpbENlbnRlciwgbmV4dFRhaWwpO1xuICAgICAgICAgICAgICAgICAgICBzcHJpbmdDaGFpbi5jZW50ZXIudHJhbnNmb3JtUG9pbnRJbnZlcnNlV29ybGQoam9pbnQuc3RhdGUuY3VycmVudFRhaWxDZW50ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvKiB0byA9IChuZXh0VGFpbCAqIChub2RlLnBhcmVudC53b3JsZE1hdHJpeCAqIGluaXRpYWxMb2NhbE1hdHJpeCkuaW52ZXJzZSkubm9ybWFsaXplZCAqL1xuICAgICAgICAgICAgICAgIGpvaW50Lm5vZGUucGFyZW50LnRyYW5zZm9ybVBvaW50SW52ZXJzZVdvcmxkKG5leHRUYWlsKTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0VGFpbER1YWxRdWF0ID0gcXVhdDIuZnJvbVRyYW5zbGF0aW9uKHRoaXMuX3RlbXBRdWF0MiwgbmV4dFRhaWwpO1xuICAgICAgICAgICAgICAgIHF1YXQyLm11bHRpcGx5KG5leHRUYWlsRHVhbFF1YXQsIGpvaW50LnN0YXRlLmluaXRpYWxMb2NhbFRyYW5zZm9ybUludmVydCwgbmV4dFRhaWxEdWFsUXVhdCk7XG4gICAgICAgICAgICAgICAgcXVhdDIuZ2V0VHJhbnNsYXRpb24obmV4dFRhaWwsIG5leHRUYWlsRHVhbFF1YXQpO1xuICAgICAgICAgICAgICAgIHZlYzMubm9ybWFsaXplKG5leHRUYWlsLCBuZXh0VGFpbCk7XG4gICAgICAgICAgICAgICAgLyogbm9kZS5yb3RhdGlvbiA9IGluaXRpYWxMb2NhbFJvdGF0aW9uICogUXVhdGVybmlvbi5mcm9tVG9RdWF0ZXJuaW9uKGJvbmVBeGlzLCB0byk7ICovXG4gICAgICAgICAgICAgICAgY29uc3Qgam9pbnRSb3RhdGlvbiA9IHF1YXQucm90YXRpb25Ubyh0aGlzLl90ZW1wUXVhdEEsIGpvaW50LnN0YXRlLmJvbmVBeGlzLCBuZXh0VGFpbCk7XG4gICAgICAgICAgICAgICAgam9pbnQubm9kZS5yb3RhdGlvbkxvY2FsID0gcXVhdC5tdWwodGhpcy5fdGVtcFF1YXRBLCBqb2ludC5zdGF0ZS5pbml0aWFsTG9jYWxSb3RhdGlvbiwgam9pbnRSb3RhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGZpcnN0UGVyc29uIFdoZXRoZXIgdGhlIG1vZGVsIHNob3VsZCByZW5kZXIgZm9yIGZpcnN0IHBlcnNvbiBvciB0aGlyZCBwZXJzb24gdmlld3NcbiAgICAgKi9cbiAgICBzZXQgZmlyc3RQZXJzb24oZmlyc3RQZXJzb24pIHtcbiAgICAgICAgdGhpcy5fZmlyc3RQZXJzb25Bbm5vdGF0aW9ucy5mb3JFYWNoKChhbm5vdGF0aW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2aXNpYmxlID0gZmlyc3RQZXJzb24gPT0gYW5ub3RhdGlvbi5maXJzdFBlcnNvbiB8fFxuICAgICAgICAgICAgICAgIGZpcnN0UGVyc29uICE9IGFubm90YXRpb24udGhpcmRQZXJzb247XG4gICAgICAgICAgICBhbm5vdGF0aW9uLm5vZGUuZ2V0Q29tcG9uZW50cygnbWVzaCcpLmZvckVhY2goKG1lc2gpID0+IHtcbiAgICAgICAgICAgICAgICBtZXNoLmFjdGl2ZSA9IHZpc2libGU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IHsgVnJtIH07XG4iLCAiaW1wb3J0IHsgdmVjMyB9IGZyb20gJ2dsLW1hdHJpeCc7XG5pbXBvcnQgeyBDb21wb25lbnQsIFR5cGUgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuY29uc3QgX2RpcmVjdGlvbiA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4vKipcbiAqIEJhc2ljIG1vdmVtZW50IHdpdGggVy9BL1MvRCBrZXlzLlxuICovXG5jbGFzcyBXYXNkQ29udHJvbHNDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICd3YXNkLWNvbnRyb2xzJztcbiAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtcbiAgICAgICAgLyoqIE1vdmVtZW50IHNwZWVkIGluIG0vcy4gKi9cbiAgICAgICAgc3BlZWQ6IHsgdHlwZTogVHlwZS5GbG9hdCwgZGVmYXVsdDogMC4xIH0sXG4gICAgICAgIC8qKiBGbGFnIGZvciBvbmx5IG1vdmluZyB0aGUgb2JqZWN0IG9uIHRoZSBnbG9iYWwgeCAmIHogcGxhbmVzICovXG4gICAgICAgIGxvY2tZOiB7IHR5cGU6IFR5cGUuQm9vbCwgZGVmYXVsdDogZmFsc2UgfSxcbiAgICAgICAgLyoqIE9iamVjdCBvZiB3aGljaCB0aGUgb3JpZW50YXRpb24gaXMgdXNlZCB0byBkZXRlcm1pbmUgZm9yd2FyZCBkaXJlY3Rpb24gKi9cbiAgICAgICAgaGVhZE9iamVjdDogeyB0eXBlOiBUeXBlLk9iamVjdCB9LFxuICAgIH07XG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy51cCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJpZ2h0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZG93biA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxlZnQgPSBmYWxzZTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLnByZXNzLmJpbmQodGhpcykpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLnJlbGVhc2UuYmluZCh0aGlzKSk7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLmhlYWRPYmplY3QgPSB0aGlzLmhlYWRPYmplY3QgfHwgdGhpcy5vYmplY3Q7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgdmVjMy56ZXJvKF9kaXJlY3Rpb24pO1xuICAgICAgICBpZiAodGhpcy51cClcbiAgICAgICAgICAgIF9kaXJlY3Rpb25bMl0gLT0gMS4wO1xuICAgICAgICBpZiAodGhpcy5kb3duKVxuICAgICAgICAgICAgX2RpcmVjdGlvblsyXSArPSAxLjA7XG4gICAgICAgIGlmICh0aGlzLmxlZnQpXG4gICAgICAgICAgICBfZGlyZWN0aW9uWzBdIC09IDEuMDtcbiAgICAgICAgaWYgKHRoaXMucmlnaHQpXG4gICAgICAgICAgICBfZGlyZWN0aW9uWzBdICs9IDEuMDtcbiAgICAgICAgdmVjMy5ub3JtYWxpemUoX2RpcmVjdGlvbiwgX2RpcmVjdGlvbik7XG4gICAgICAgIF9kaXJlY3Rpb25bMF0gKj0gdGhpcy5zcGVlZDtcbiAgICAgICAgX2RpcmVjdGlvblsyXSAqPSB0aGlzLnNwZWVkO1xuICAgICAgICB2ZWMzLnRyYW5zZm9ybVF1YXQoX2RpcmVjdGlvbiwgX2RpcmVjdGlvbiwgdGhpcy5oZWFkT2JqZWN0LnRyYW5zZm9ybVdvcmxkKTtcbiAgICAgICAgaWYgKHRoaXMubG9ja1kpIHtcbiAgICAgICAgICAgIF9kaXJlY3Rpb25bMV0gPSAwO1xuICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUoX2RpcmVjdGlvbiwgX2RpcmVjdGlvbik7XG4gICAgICAgICAgICB2ZWMzLnNjYWxlKF9kaXJlY3Rpb24sIF9kaXJlY3Rpb24sIHRoaXMuc3BlZWQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2JqZWN0LnRyYW5zbGF0ZUxvY2FsKF9kaXJlY3Rpb24pO1xuICAgIH1cbiAgICBwcmVzcyhlKSB7XG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IDM4IC8qIHVwICovIHx8XG4gICAgICAgICAgICBlLmtleUNvZGUgPT09IDg3IC8qIHcgKi8gfHxcbiAgICAgICAgICAgIGUua2V5Q29kZSA9PT0gOTAgLyogeiAqLykge1xuICAgICAgICAgICAgdGhpcy51cCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZS5rZXlDb2RlID09PSAzOSAvKiByaWdodCAqLyB8fCBlLmtleUNvZGUgPT09IDY4IC8qIGQgKi8pIHtcbiAgICAgICAgICAgIHRoaXMucmlnaHQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gNDAgLyogZG93biAqLyB8fCBlLmtleUNvZGUgPT09IDgzIC8qIHMgKi8pIHtcbiAgICAgICAgICAgIHRoaXMuZG93biA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZS5rZXlDb2RlID09PSAzNyAvKiBsZWZ0ICovIHx8XG4gICAgICAgICAgICBlLmtleUNvZGUgPT09IDY1IC8qIGEgKi8gfHxcbiAgICAgICAgICAgIGUua2V5Q29kZSA9PT0gODEgLyogcSAqLykge1xuICAgICAgICAgICAgdGhpcy5sZWZ0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWxlYXNlKGUpIHtcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMzggLyogdXAgKi8gfHxcbiAgICAgICAgICAgIGUua2V5Q29kZSA9PT0gODcgLyogdyAqLyB8fFxuICAgICAgICAgICAgZS5rZXlDb2RlID09PSA5MCAvKiB6ICovKSB7XG4gICAgICAgICAgICB0aGlzLnVwID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZS5rZXlDb2RlID09PSAzOSAvKiByaWdodCAqLyB8fCBlLmtleUNvZGUgPT09IDY4IC8qIGQgKi8pIHtcbiAgICAgICAgICAgIHRoaXMucmlnaHQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlLmtleUNvZGUgPT09IDQwIC8qIGRvd24gKi8gfHwgZS5rZXlDb2RlID09PSA4MyAvKiBzICovKSB7XG4gICAgICAgICAgICB0aGlzLmRvd24gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlLmtleUNvZGUgPT09IDM3IC8qIGxlZnQgKi8gfHxcbiAgICAgICAgICAgIGUua2V5Q29kZSA9PT0gNjUgLyogYSAqLyB8fFxuICAgICAgICAgICAgZS5rZXlDb2RlID09PSA4MSAvKiBxICovKSB7XG4gICAgICAgICAgICB0aGlzLmxlZnQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCB7IFdhc2RDb250cm9sc0NvbXBvbmVudCB9O1xuIiwgInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IENvbXBvbmVudCwgRW1pdHRlciB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgeyBIYW5kVHJhY2tpbmcgfSBmcm9tICcuL2hhbmQtdHJhY2tpbmcuanMnO1xuaW1wb3J0IHsgdmVjMywgcXVhdCB9IGZyb20gJ2dsLW1hdHJpeCc7XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IFZyTW9kZUFjdGl2ZVN3aXRjaCB9IGZyb20gJy4vdnItbW9kZS1hY3RpdmUtc3dpdGNoLmpzJztcbmNvbnN0IF90ZW1wVmVjID0gdmVjMy5jcmVhdGUoKTtcbmNvbnN0IF90ZW1wUXVhdCA9IHF1YXQuY3JlYXRlKCk7XG5jb25zdCBfdGVtcFJvdGF0aW9uMSA9IG5ldyBGbG9hdDMyQXJyYXkoNCk7XG5jb25zdCBfdGVtcFJvdGF0aW9uMiA9IG5ldyBGbG9hdDMyQXJyYXkoNCk7XG5jb25zdCBtaW5UZW1wID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbmNvbnN0IG1heFRlbXAgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuY29uc3QgaGFuZHMgPSBbJ2xlZnQnLCAncmlnaHQnXTtcbi8qKlxuICogRHluYW1pY2FsbHkgbG9hZCBhbmQgbWFwIGlucHV0IHByb2ZpbGVzIGZvciBYUiBjb250cm9sbGVycy5cbiAqL1xuY2xhc3MgSW5wdXRQcm9maWxlIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnaW5wdXQtcHJvZmlsZSc7XG4gICAgLyoqXG4gICAgICogQSBjYWNoZSB0byBzdG9yZSBsb2FkZWQgcHJvZmlsZXMgZm9yIHJldXNlLlxuICAgICAqL1xuICAgIHN0YXRpYyBDYWNoZSA9IG5ldyBNYXAoKTtcbiAgICBfZ2FtZXBhZE9iamVjdHMgPSB7fTtcbiAgICBfY29udHJvbGxlck1vZGVsID0gbnVsbDtcbiAgICBfZGVmYXVsdENvbnRyb2xsZXJDb21wb25lbnRzO1xuICAgIF9oYW5kZWRuZXNzO1xuICAgIF9wcm9maWxlSlNPTiA9IG51bGw7XG4gICAgX2J1dHRvbnMgPSBbXTtcbiAgICBfYXhlcyA9IFtdO1xuICAgIC8qKlxuICAgICAqIFRoZSBYUiBnYW1lcGFkIGFzc29jaWF0ZWQgd2l0aCB0aGUgY3VycmVudCBpbnB1dCBzb3VyY2UuXG4gICAgICovXG4gICAgZ2FtZXBhZDtcbiAgICAvKipcbiAgICAgKiBBIHJlZmVyZW5jZSB0byB0aGUgZW1pdHRlciB3aGljaCB0cmlnZ2VyZWQgb24gbW9kZWwgbG9kYWVkIGV2ZW50LlxuICAgICAqL1xuICAgIG9uTW9kZWxMb2FkZWQgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdXJsIG9mIGlucHV0IHByb2ZpbGUganNvbiBmaWxlXG4gICAgICovXG4gICAgdXJsO1xuICAgIC8qKlxuICAgICAqIEEgc2V0IG9mIGNvbXBvbmVudHMgdG8gZmlsdGVyIGR1cmluZyBjb21wb25lbnQgcmV0cmlldmFsLlxuICAgICAqL1xuICAgIHRvRmlsdGVyID0gbmV3IFNldChbJ3ZyLW1vZGUtYWN0aXZlLW1vZGUtc3dpdGNoJ10pO1xuICAgIC8qKlxuICAgICAqIFRoZSBpbmRleCByZXByZXNlbnRpbmcgdGhlIGhhbmRlZG5lc3Mgb2YgdGhlIGNvbnRyb2xsZXIgKDAgZm9yIGxlZnQsIDEgZm9yIHJpZ2h0KS5cbiAgICAgKi9cbiAgICBoYW5kZWRuZXNzID0gMDtcbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBwYXRoIHdoZXJlIFhSIGlucHV0IHByb2ZpbGVzIGFyZSBzdG9yZWQuXG4gICAgICovXG4gICAgZGVmYXVsdEJhc2VQYXRoO1xuICAgIC8qKlxuICAgICAqIEFuIG9wdGlvbmFsIGZvbGRlciBwYXRoIGZvciBsb2FkaW5nIGN1c3RvbSBYUiBpbnB1dCBwcm9maWxlcy5cbiAgICAgKi9cbiAgICBjdXN0b21CYXNlUGF0aDtcbiAgICAvKipcbiAgICAgKiBUaGUgZGVmYXVsdCAzRCBjb250cm9sbGVyIG1vZGVsIHVzZWQgd2hlbiBhIGN1c3RvbSBtb2RlbCBmYWlscyB0byBsb2FkLlxuICAgICAqL1xuICAgIGRlZmF1bHRDb250cm9sbGVyO1xuICAgIC8qKlxuICAgICAqIFRoZSBvYmplY3Qgd2hpY2ggaGFzIEhhbmRUcmFja2luZyBjb21wb25lbnQgYWRkZWQgdG8gaXQuXG4gICAgICovXG4gICAgdHJhY2tlZEhhbmQ7XG4gICAgLyoqXG4gICAgICogSWYgdHJ1ZSwgdGhlIGlucHV0IHByb2ZpbGUgd2lsbCBiZSBtYXBwZWQgdG8gdGhlIGRlZmF1bHQgY29udHJvbGxlciwgYW5kIG5vIGR5bmFtaWMgM0QgbW9kZWwgb2YgY29udHJvbGxlciB3aWxsIGJlIGxvYWRlZC5cbiAgICAgKi9cbiAgICBtYXBUb0RlZmF1bHRDb250cm9sbGVyO1xuICAgIC8qKlxuICAgICAqIElmIHRydWUsIGFkZHMgYSBWUiBtb2RlIHN3aXRjaCBjb21wb25lbnQgdG8gdGhlIGxvYWRlZCBjb250cm9sbGVyIG1vZGVsLlxuICAgICAqL1xuICAgIGFkZFZyTW9kZVN3aXRjaDtcbiAgICBvbkFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLl9oYW5kZWRuZXNzID0gaGFuZHNbdGhpcy5oYW5kZWRuZXNzXTtcbiAgICAgICAgY29uc3QgZGVmYXVsdEhhbmROYW1lID0gJ0hhbmQnICsgdGhpcy5faGFuZGVkbmVzcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHRoaXMuX2hhbmRlZG5lc3Muc2xpY2UoMSk7XG4gICAgICAgIHRoaXMudHJhY2tlZEhhbmQgPVxuICAgICAgICAgICAgdGhpcy50cmFja2VkSGFuZCA/PyB0aGlzLm9iamVjdC5wYXJlbnQ/LmZpbmRCeU5hbWVSZWN1cnNpdmUoZGVmYXVsdEhhbmROYW1lKVswXTtcbiAgICAgICAgdGhpcy5kZWZhdWx0Q29udHJvbGxlciA9IHRoaXMuZGVmYXVsdENvbnRyb2xsZXIgfHwgdGhpcy5vYmplY3QuY2hpbGRyZW5bMF07XG4gICAgICAgIHRoaXMuX2RlZmF1bHRDb250cm9sbGVyQ29tcG9uZW50cyA9IHRoaXMuX2dldENvbXBvbmVudHModGhpcy5kZWZhdWx0Q29udHJvbGxlcik7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQuYWRkKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLnhyPy5zZXNzaW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0c291cmNlc2NoYW5nZScsIHRoaXMuX29uSW5wdXRTb3VyY2VzQ2hhbmdlLmJpbmQodGhpcykpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgb25EZWFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS54cj8uc2Vzc2lvbj8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW5wdXRzb3VyY2VzY2hhbmdlJywgdGhpcy5fb25JbnB1dFNvdXJjZXNDaGFuZ2UuYmluZCh0aGlzKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgbmV3bHkgbG9hZGVkIGNvbnRyb2xsZXJzIGZvciB0aGUgSGFuZFRyYWNraW5nIGNvbXBvbmVudCB0byBwcm9wZXIgc3dpdGNoaW5nLlxuICAgICAqIEBwYXJhbSBjb250cm9sbGVyT2JqZWN0IFRoZSBjb250cm9sbGVyIG9iamVjdC5cbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX3NldEhhbmRUcmFja2luZ0NvbnRyb2xsZXJzKGNvbnRyb2xsZXJPYmplY3QpIHtcbiAgICAgICAgY29uc3QgaGFuZHRyYWNraW5nQ29tcG9uZW50ID0gdGhpcy50cmFja2VkSGFuZC5nZXRDb21wb25lbnQoSGFuZFRyYWNraW5nKTtcbiAgICAgICAgaWYgKCFoYW5kdHJhY2tpbmdDb21wb25lbnQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGhhbmR0cmFja2luZ0NvbXBvbmVudC5jb250cm9sbGVyVG9EZWFjdGl2YXRlID0gY29udHJvbGxlck9iamVjdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBjb21wb25lbnRzIGZyb20gdGhlIHNwZWNpZmllZCBvYmplY3QgYW5kIGl0cyBjaGlsZHJlbi5cbiAgICAgKiBAcGFyYW0gb2JqIFRoZSBvYmplY3QgdG8gcmV0cmlldmUgY29tcG9uZW50cyBmcm9tLlxuICAgICAqIEByZXR1cm4gQW4gYXJyYXkgb2YgY29tcG9uZW50cy5cbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX2dldENvbXBvbmVudHMob2JqKSB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudHMgPSBbXTtcbiAgICAgICAgaWYgKG9iaiA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudHM7XG4gICAgICAgIGNvbnN0IHN0YWNrID0gW29ial07XG4gICAgICAgIHdoaWxlIChzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50T2JqID0gc3RhY2sucG9wKCk7XG4gICAgICAgICAgICBjb25zdCBjb21wcyA9IGN1cnJlbnRPYmpcbiAgICAgICAgICAgICAgICAuZ2V0Q29tcG9uZW50cygpXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoYykgPT4gIXRoaXMudG9GaWx0ZXIuaGFzKGMudHlwZSkpO1xuICAgICAgICAgICAgY29tcG9uZW50cy5wdXNoKC4uLmNvbXBzKTtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gY3VycmVudE9iai5jaGlsZHJlbjtcbiAgICAgICAgICAgIC8vIFB1c2ggY2hpbGRyZW4gb250byB0aGUgc3RhY2sgaW4gcmV2ZXJzZSBvcmRlciB0byBtYWludGFpbiB0aGUgY29ycmVjdCBvcmRlclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaChjaGlsZHJlbltpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFjdGl2YXRlcyBvciBkZWFjdGl2YXRlcyBjb21wb25lbnRzIGJhc2VkIG9uIHRoZSBzcGVjaWZpZWQgYm9vbGVhbiB2YWx1ZS5cbiAgICAgKiBAcGFyYW0gYWN0aXZlIElmIHRydWUsIGNvbXBvbmVudHMgYXJlIHNldCB0byBhY3RpdmU7IG90aGVyd2lzZSwgdGhleSBhcmUgc2V0IHRvIGluYWN0aXZlLlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfc2V0Q29tcG9uZW50c0FjdGl2ZShhY3RpdmUpIHtcbiAgICAgICAgY29uc3QgY29tcHMgPSB0aGlzLl9kZWZhdWx0Q29udHJvbGxlckNvbXBvbmVudHM7XG4gICAgICAgIGlmIChjb21wcyA9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29tcHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbXBzW2ldLmFjdGl2ZSA9IGFjdGl2ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBFdmVudCBoYW5kbGVyIHRyaWdnZXJlZCB3aGVuIFhSIGlucHV0IHNvdXJjZXMgY2hhbmdlLlxuICAgICAqIERldGVjdHMgbmV3IFhSIGlucHV0IHNvdXJjZXMgYW5kIGluaXRpYXRlcyB0aGUgbG9hZGluZyBvZiBpbnB1dCBwcm9maWxlcy5cbiAgICAgKiBAcGFyYW0gZXZlbnQgVGhlIFhSIGlucHV0IHNvdXJjZSBjaGFuZ2UgZXZlbnQuXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9vbklucHV0U291cmNlc0NoYW5nZShldmVudCkge1xuICAgICAgICBpZiAodGhpcy5faXNNb2RlbExvYWRlZCgpICYmICF0aGlzLm1hcFRvRGVmYXVsdENvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX3NldENvbXBvbmVudHNBY3RpdmUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGV2ZW50LmFkZGVkLmZvckVhY2goKHhySW5wdXRTb3VyY2UpID0+IHtcbiAgICAgICAgICAgIGlmICh4cklucHV0U291cmNlLmhhbmQgIT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBpZiAodGhpcy5faGFuZGVkbmVzcyAhPSB4cklucHV0U291cmNlLmhhbmRlZG5lc3MpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5nYW1lcGFkID0geHJJbnB1dFNvdXJjZS5nYW1lcGFkO1xuICAgICAgICAgICAgY29uc3QgcHJvZmlsZSA9IHRoaXMuY3VzdG9tQmFzZVBhdGggIT09ICcnXG4gICAgICAgICAgICAgICAgPyB0aGlzLmN1c3RvbUJhc2VQYXRoXG4gICAgICAgICAgICAgICAgOiB0aGlzLmRlZmF1bHRCYXNlUGF0aCArIHhySW5wdXRTb3VyY2UucHJvZmlsZXNbMF07XG4gICAgICAgICAgICB0aGlzLnVybCA9IHByb2ZpbGUgKyAnL3Byb2ZpbGUuanNvbic7XG4gICAgICAgICAgICB0aGlzLl9wcm9maWxlSlNPTiA9IElucHV0UHJvZmlsZS5DYWNoZS5nZXQodGhpcy51cmwpID8/IG51bGw7XG4gICAgICAgICAgICBpZiAodGhpcy5fcHJvZmlsZUpTT04gIT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBmZXRjaCh0aGlzLnVybClcbiAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgIC50aGVuKChvdXQpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9maWxlSlNPTiA9IG91dDtcbiAgICAgICAgICAgICAgICBJbnB1dFByb2ZpbGUuQ2FjaGUuc2V0KHRoaXMudXJsLCB0aGlzLl9wcm9maWxlSlNPTik7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9pc01vZGVsTG9hZGVkKCkpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRBbmRNYXBHYW1lcGFkKHByb2ZpbGUpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gbG9hZCBwcm9maWxlIGZyb20gJHt0aGlzLnVybH0uIFJlYXNvbjpgLCBlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSAzRCBjb250cm9sbGVyIG1vZGVsIGlzIGxvYWRlZC5cbiAgICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIG1vZGVsIGlzIGxvYWRlZDsgb3RoZXJ3aXNlLCBmYWxzZS5cbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX2lzTW9kZWxMb2FkZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb250cm9sbGVyTW9kZWwgIT09IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvYWRzIHRoZSAzRCBjb250cm9sbGVyIG1vZGVsIGFuZCBjYWNoZXMgdGhlIG1hcHBpbmcgdG8gdGhlIGdhbWVwYWQuXG4gICAgICogQHBhcmFtIHByb2ZpbGUgVGhlIHBhdGggdG8gdGhlIGlucHV0IHByb2ZpbGUuXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGFzeW5jIF9sb2FkQW5kTWFwR2FtZXBhZChwcm9maWxlKSB7XG4gICAgICAgIGNvbnN0IGFzc2V0UGF0aCA9IHByb2ZpbGUgKyAnLycgKyB0aGlzLl9oYW5kZWRuZXNzICsgJy5nbGInO1xuICAgICAgICB0aGlzLl9jb250cm9sbGVyTW9kZWwgPSB0aGlzLmRlZmF1bHRDb250cm9sbGVyO1xuICAgICAgICBpZiAoIXRoaXMubWFwVG9EZWZhdWx0Q29udHJvbGxlcikge1xuICAgICAgICAgICAgLyoqIGxvYWQgM2QgbW9kZWwgaW4gdGhlIHJ1bnRpbWUgd2l0aCBwcm9maWxlIHVybCAqL1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jb250cm9sbGVyTW9kZWwgPSAoYXdhaXQgdGhpcy5lbmdpbmUuc2NlbmUuYXBwZW5kKGFzc2V0UGF0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gbG9hZCBpLXAgY29udHJvbGxlciBtb2RlbC4gUmVhc29uOmAsIGUsIGBDb250aW51aW5nIHdpdGggJHt0aGlzLl9oYW5kZWRuZXNzfSBkZWZhdWx0IGNvbnRyb2xsZXIuYCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0Q29tcG9uZW50c0FjdGl2ZSh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2NvbnRyb2xsZXJNb2RlbC5wYXJlbnQgPSB0aGlzLm9iamVjdDtcbiAgICAgICAgICAgIHRoaXMuX2NvbnRyb2xsZXJNb2RlbC5zZXRQb3NpdGlvbkxvY2FsKFswLCAwLCAwXSk7XG4gICAgICAgICAgICB0aGlzLl9zZXRDb21wb25lbnRzQWN0aXZlKGZhbHNlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFkZFZyTW9kZVN3aXRjaClcbiAgICAgICAgICAgICAgICB0aGlzLl9jb250cm9sbGVyTW9kZWwuYWRkQ29tcG9uZW50KFZyTW9kZUFjdGl2ZVN3aXRjaCk7XG4gICAgICAgICAgICB0aGlzLm9uTW9kZWxMb2FkZWQubm90aWZ5KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY2FjaGVHYW1lcGFkT2JqZWN0c0Zyb21Qcm9maWxlKHRoaXMuX3Byb2ZpbGVKU09OLCB0aGlzLl9jb250cm9sbGVyTW9kZWwpO1xuICAgICAgICB0aGlzLl9zZXRIYW5kVHJhY2tpbmdDb250cm9sbGVycyh0aGlzLl9jb250cm9sbGVyTW9kZWwpO1xuICAgICAgICB0aGlzLnVwZGF0ZSA9ICgpID0+IHRoaXMuX21hcEdhbWVwYWRJbnB1dCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWNoZXMgZ2FtZXBhZCBvYmplY3RzIChidXR0b25zLCBheGVzKSBmcm9tIHRoZSBsb2FkZWQgaW5wdXQgcHJvZmlsZS5cbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX2NhY2hlR2FtZXBhZE9iamVjdHNGcm9tUHJvZmlsZShwcm9maWxlLCBvYmopIHtcbiAgICAgICAgY29uc3QgY29tcG9uZW50cyA9IHByb2ZpbGUubGF5b3V0c1t0aGlzLl9oYW5kZWRuZXNzXS5jb21wb25lbnRzO1xuICAgICAgICBpZiAoIWNvbXBvbmVudHMpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuX2J1dHRvbnMgPSBbXTtcbiAgICAgICAgdGhpcy5fYXhlcyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGkgaW4gY29tcG9uZW50cykge1xuICAgICAgICAgICAgY29uc3QgdmlzdWFsUmVzcG9uc2VzID0gY29tcG9uZW50c1tpXS52aXN1YWxSZXNwb25zZXM7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGogaW4gdmlzdWFsUmVzcG9uc2VzKSB7XG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIGJ1dHRvbnMgd2l0aCBuZXcgaW50ZXJmYWNlIG9mIGN1cnJlbnQgdmlzdWFsIHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgY29uc3QgdmlzdWFsUmVzcG9uc2UgPSB2aXN1YWxSZXNwb25zZXNbal07XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWVOb2RlID0gdmlzdWFsUmVzcG9uc2UudmFsdWVOb2RlTmFtZTtcbiAgICAgICAgICAgICAgICBjb25zdCBtaW5Ob2RlID0gdmlzdWFsUmVzcG9uc2UubWluTm9kZU5hbWU7XG4gICAgICAgICAgICAgICAgY29uc3QgbWF4Tm9kZSA9IHZpc3VhbFJlc3BvbnNlLm1heE5vZGVOYW1lO1xuICAgICAgICAgICAgICAgIHRoaXMuX2dhbWVwYWRPYmplY3RzW3ZhbHVlTm9kZV0gPSBvYmouZmluZEJ5TmFtZVJlY3Vyc2l2ZSh2YWx1ZU5vZGUpWzBdO1xuICAgICAgICAgICAgICAgIHRoaXMuX2dhbWVwYWRPYmplY3RzW21pbk5vZGVdID0gb2JqLmZpbmRCeU5hbWVSZWN1cnNpdmUobWluTm9kZSlbMF07XG4gICAgICAgICAgICAgICAgdGhpcy5fZ2FtZXBhZE9iamVjdHNbbWF4Tm9kZV0gPSBvYmouZmluZEJ5TmFtZVJlY3Vyc2l2ZShtYXhOb2RlKVswXTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRpY2UgPSB2aXN1YWxSZXNwb25zZXNbal0uY29tcG9uZW50UHJvcGVydHk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy5fZ2FtZXBhZE9iamVjdHNbdmFsdWVOb2RlXSxcbiAgICAgICAgICAgICAgICAgICAgbWluOiB0aGlzLl9nYW1lcGFkT2JqZWN0c1ttaW5Ob2RlXSxcbiAgICAgICAgICAgICAgICAgICAgbWF4OiB0aGlzLl9nYW1lcGFkT2JqZWN0c1ttYXhOb2RlXSxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbXBvbmVudHNbaV0uZ2FtZXBhZEluZGljZXNbaW5kaWNlXSwgLy8gQXNzaWduIGEgdW5pcXVlIElEXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGluZGljZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdidXR0b24nOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYnV0dG9ucy5wdXNoKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd4QXhpcyc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3lBeGlzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2F4ZXMucHVzaChyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQXNzaWducyBhIHRyYW5zZm9ybWVkIHBvc2l0aW9uIGFuZCByb3RhdGlvbiB0byB0aGUgdGFyZ2V0IGJhc2VkIG9uIG1pbmltdW0gYW5kIG1heGltdW0gdmFsdWVzIGFuZCBhIG5vcm1hbGl6ZWQgaW5wdXQgdmFsdWUuXG4gICAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IG9iamVjdCB0byBiZSB0cmFuc2Zvcm1lZC5cbiAgICAgKiBAcGFyYW0gbWluIFRoZSBtaW5pbXVtIG9iamVjdCBwcm92aWRpbmcgdHJhbnNmb3JtYXRpb24gbGltaXRzLlxuICAgICAqIEBwYXJhbSBtYXggVGhlIG1heGltdW0gb2JqZWN0IHByb3ZpZGluZyB0cmFuc2Zvcm1hdGlvbiBsaW1pdHMuXG4gICAgICogQHBhcmFtIHZhbHVlIFRoZSBub3JtYWxpemVkIGlucHV0IHZhbHVlLlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfYXNzaWduVHJhbnNmb3JtKHRhcmdldCwgbWluLCBtYXgsIHZhbHVlKSB7XG4gICAgICAgIHZlYzMubGVycChfdGVtcFZlYywgbWluLmdldFBvc2l0aW9uV29ybGQobWluVGVtcCksIG1heC5nZXRQb3NpdGlvbldvcmxkKG1heFRlbXApLCB2YWx1ZSk7XG4gICAgICAgIHRhcmdldC5zZXRQb3NpdGlvbldvcmxkKF90ZW1wVmVjKTtcbiAgICAgICAgcXVhdC5sZXJwKF90ZW1wUXVhdCwgbWluLmdldFJvdGF0aW9uV29ybGQoX3RlbXBSb3RhdGlvbjEpLCBtYXguZ2V0Um90YXRpb25Xb3JsZChfdGVtcFJvdGF0aW9uMiksIHZhbHVlKTtcbiAgICAgICAgcXVhdC5ub3JtYWxpemUoX3RlbXBRdWF0LCBfdGVtcFF1YXQpO1xuICAgICAgICB0YXJnZXQuc2V0Um90YXRpb25Xb3JsZChfdGVtcFF1YXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXBzIGlucHV0IHZhbHVlcyAoYnV0dG9ucywgYXhlcykgdG8gdGhlIDNEIGNvbnRyb2xsZXIgbW9kZWwuXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9tYXBHYW1lcGFkSW5wdXQoKSB7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHRoaXMuX2J1dHRvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvblZhbHVlID0gdGhpcy5nYW1lcGFkLmJ1dHRvbnNbYnV0dG9uLmlkXS52YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuX2Fzc2lnblRyYW5zZm9ybShidXR0b24udGFyZ2V0LCBidXR0b24ubWluLCBidXR0b24ubWF4LCBidXR0b25WYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBheGlzIG9mIHRoaXMuX2F4ZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGF4aXNWYWx1ZSA9IHRoaXMuZ2FtZXBhZC5heGVzW2F4aXMuaWRdO1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZEF4aXNWYWx1ZSA9IChheGlzVmFsdWUgKyAxKSAvIDI7XG4gICAgICAgICAgICB0aGlzLl9hc3NpZ25UcmFuc2Zvcm0oYXhpcy50YXJnZXQsIGF4aXMubWluLCBheGlzLm1heCwgbm9ybWFsaXplZEF4aXNWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5lbnVtKGhhbmRzLCAwKVxuXSwgSW5wdXRQcm9maWxlLnByb3RvdHlwZSwgXCJoYW5kZWRuZXNzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5zdHJpbmcoJ2h0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vQHdlYnhyLWlucHV0LXByb2ZpbGVzL2Fzc2V0c0BsYXRlc3QvZGlzdC9wcm9maWxlcy8nKVxuXSwgSW5wdXRQcm9maWxlLnByb3RvdHlwZSwgXCJkZWZhdWx0QmFzZVBhdGhcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LnN0cmluZygpXG5dLCBJbnB1dFByb2ZpbGUucHJvdG90eXBlLCBcImN1c3RvbUJhc2VQYXRoXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5vYmplY3QoKVxuXSwgSW5wdXRQcm9maWxlLnByb3RvdHlwZSwgXCJkZWZhdWx0Q29udHJvbGxlclwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkub2JqZWN0KClcbl0sIElucHV0UHJvZmlsZS5wcm90b3R5cGUsIFwidHJhY2tlZEhhbmRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmJvb2woZmFsc2UpXG5dLCBJbnB1dFByb2ZpbGUucHJvdG90eXBlLCBcIm1hcFRvRGVmYXVsdENvbnRyb2xsZXJcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmJvb2wodHJ1ZSlcbl0sIElucHV0UHJvZmlsZS5wcm90b3R5cGUsIFwiYWRkVnJNb2RlU3dpdGNoXCIsIHZvaWQgMCk7XG5leHBvcnQgeyBJbnB1dFByb2ZpbGUgfTtcbiIsICJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuaW1wb3J0IHsgcHJvcGVydHkgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGkvZGVjb3JhdG9ycy5qcyc7XG5pbXBvcnQgeyBkZWcycmFkLCByYWQyZGVnIH0gZnJvbSAnLi91dGlscy91dGlscy5qcyc7XG5pbXBvcnQgeyBxdWF0LCB2ZWMzIH0gZnJvbSAnZ2wtbWF0cml4JztcbmNvbnN0IHByZXZlbnREZWZhdWx0ID0gKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG59O1xuY29uc3QgdGVtcFZlYyA9IFswLCAwLCAwXTtcbmNvbnN0IHRlbXBxdWF0ID0gcXVhdC5jcmVhdGUoKTtcbmNvbnN0IHRlbXBxdWF0MiA9IHF1YXQuY3JlYXRlKCk7XG5jb25zdCB0ZW1wVmVjMyA9IHZlYzMuY3JlYXRlKCk7XG4vKipcbiAqIE9yYml0YWxDYW1lcmEgY29tcG9uZW50IGFsbG93cyB0aGUgdXNlciB0byBvcmJpdCBhcm91bmQgYSB0YXJnZXQgcG9pbnQsIHdoaWNoXG4gKiBpcyB0aGUgcG9zaXRpb24gb2YgdGhlIG9iamVjdCBpdHNlbGYuIEl0IHJvdGF0ZXMgYXQgdGhlIHNwZWNpZmllZCBkaXN0YW5jZS5cbiAqXG4gKiBAcmVtYXJrc1xuICogVGhlIGNvbXBvbmVudCB3b3JrcyB1c2luZyBtb3VzZSBvciB0b3VjaC4gVGhlcmVmb3IgaXQgZG9lcyBub3Qgd29yayBpbiBWUi5cbiAqL1xuY2xhc3MgT3JiaXRhbENhbWVyYSBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ29yYml0YWwtY2FtZXJhJztcbiAgICBtb3VzZUJ1dHRvbkluZGV4ID0gMDtcbiAgICByYWRpYWwgPSA1O1xuICAgIG1pbkVsZXZhdGlvbiA9IDAuMDtcbiAgICBtYXhFbGV2YXRpb24gPSA4OS45OTtcbiAgICBtaW5ab29tID0gMC4wMTtcbiAgICBtYXhab29tID0gMTAuMDtcbiAgICB4U2Vuc2l0aXZpdHkgPSAwLjU7XG4gICAgeVNlbnNpdGl2aXR5ID0gMC41O1xuICAgIHpvb21TZW5zaXRpdml0eSA9IDAuMDI7XG4gICAgZGFtcGluZyA9IDAuOTtcbiAgICBfbW91c2VEb3duID0gZmFsc2U7XG4gICAgX29yaWdpbiA9IFswLCAwLCAwXTtcbiAgICBfYXppbXV0aCA9IDA7XG4gICAgX3BvbGFyID0gNDU7XG4gICAgX2luaXRpYWxQaW5jaERpc3RhbmNlID0gMDtcbiAgICBfdG91Y2hTdGFydFggPSAwO1xuICAgIF90b3VjaFN0YXJ0WSA9IDA7XG4gICAgX2F6aW11dGhTcGVlZCA9IDA7XG4gICAgX3BvbGFyU3BlZWQgPSAwO1xuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LmdldFBvc2l0aW9uV29ybGQodGhpcy5fb3JpZ2luKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUNhbWVyYSgpO1xuICAgIH1cbiAgICBvbkFjdGl2YXRlKCkge1xuICAgICAgICBjb25zdCBjYW52YXMgPSB0aGlzLmVuZ2luZS5jYW52YXM7XG4gICAgICAgIGlmICh0aGlzLm1vdXNlQnV0dG9uSW5kZXggPT09IDIpIHtcbiAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIHByZXZlbnREZWZhdWx0LCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9vbk1vdXNlRG93bik7XG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIHRoaXMuX29uTW91c2VTY3JvbGwsIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5fb25Ub3VjaFN0YXJ0LCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5fb25Ub3VjaE1vdmUsIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX29uVG91Y2hFbmQpO1xuICAgIH1cbiAgICBvbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuZW5naW5lLmNhbnZhcztcbiAgICAgICAgaWYgKHRoaXMubW91c2VCdXR0b25JbmRleCA9PT0gMikge1xuICAgICAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgcHJldmVudERlZmF1bHQpO1xuICAgICAgICB9XG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9vbk1vdXNlTW92ZSk7XG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9vbk1vdXNlRG93bik7XG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCd3aGVlbCcsIHRoaXMuX29uTW91c2VTY3JvbGwpO1xuICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuX29uVG91Y2hTdGFydCk7XG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLl9vblRvdWNoTW92ZSk7XG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX29uVG91Y2hFbmQpO1xuICAgICAgICAvKiBSZXNldCBzdGF0ZSB0byBtYWtlIHN1cmUgbm90aGluZyBnZXRzIHN0dWNrICovXG4gICAgICAgIHRoaXMuX21vdXNlRG93biA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9pbml0aWFsUGluY2hEaXN0YW5jZSA9IDA7XG4gICAgICAgIHRoaXMuX3RvdWNoU3RhcnRYID0gMDtcbiAgICAgICAgdGhpcy5fdG91Y2hTdGFydFkgPSAwO1xuICAgICAgICB0aGlzLl9hemltdXRoU3BlZWQgPSAwO1xuICAgICAgICB0aGlzLl9wb2xhclNwZWVkID0gMDtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICAvKiBBbHdheXMgYXBwbHkgZGFtcGluZywgYmVjYXVzZSB0aGVyZSdzIG5vIGV2ZW50IGZvciBzdG9wIG1vdmluZyAqL1xuICAgICAgICB0aGlzLl9hemltdXRoU3BlZWQgKj0gdGhpcy5kYW1waW5nO1xuICAgICAgICB0aGlzLl9wb2xhclNwZWVkICo9IHRoaXMuZGFtcGluZztcbiAgICAgICAgLyogU3RvcCBjb21wbGV0ZWx5IGlmIHRoZSBzcGVlZCBpcyB2ZXJ5IGxvdyB0byBhdm9pZCBlbmRsZXNzIHRpbnkgbW92ZW1lbnRzICovXG4gICAgICAgIGlmIChNYXRoLmFicyh0aGlzLl9hemltdXRoU3BlZWQpIDwgMC4wMSlcbiAgICAgICAgICAgIHRoaXMuX2F6aW11dGhTcGVlZCA9IDA7XG4gICAgICAgIGlmIChNYXRoLmFicyh0aGlzLl9wb2xhclNwZWVkKSA8IDAuMDEpXG4gICAgICAgICAgICB0aGlzLl9wb2xhclNwZWVkID0gMDtcbiAgICAgICAgLyogQXBwbHkgdGhlIHNwZWVkIHRvIHRoZSBjYW1lcmEgYW5nbGVzICovXG4gICAgICAgIHRoaXMuX2F6aW11dGggKz0gdGhpcy5fYXppbXV0aFNwZWVkO1xuICAgICAgICB0aGlzLl9wb2xhciArPSB0aGlzLl9wb2xhclNwZWVkO1xuICAgICAgICAvKiBDbGFtcCB0aGUgcG9sYXIgYW5nbGUgKi9cbiAgICAgICAgdGhpcy5fcG9sYXIgPSBNYXRoLm1pbih0aGlzLm1heEVsZXZhdGlvbiwgTWF0aC5tYXgodGhpcy5taW5FbGV2YXRpb24sIHRoaXMuX3BvbGFyKSk7XG4gICAgICAgIC8qIFVwZGF0ZSB0aGUgY2FtZXJhIGlmIHRoZXJlJ3MgYW55IHNwZWVkICovXG4gICAgICAgIGlmICh0aGlzLl9hemltdXRoU3BlZWQgIT09IDAgfHwgdGhpcy5fcG9sYXJTcGVlZCAhPT0gMCkge1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlQ2FtZXJhKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjbG9zZXN0IHBvc2l0aW9uIHRvIHRoZSBnaXZlbiBwb3NpdGlvbiBvbiB0aGUgb3JiaXQgc3BoZXJlIG9mIHRoZSBjYW1lcmEuXG4gICAgICogVGhpcyBjYW4gYmUgdXNlZCB0byBnZXQgYSBwb3NpdGlvbiBhbmQgcm90YXRpb24gdG8gdHJhbnNpdGlvbiB0by5cbiAgICAgKlxuICAgICAqIFlvdSBwYXNzIHRoaXMgYSBwb3NpdGlvbiBvYmplY3QuIFRoZSBtZXRob2QgY2FsY3VsYXRlcyB0aGUgY2xvc2VzdCBwb3NpdGl0aW9uIGFuZCB1cGRhdGVzIHRoZSBwb3NpdGlvbiBwYXJhbWV0ZXIuXG4gICAgICogSXQgYWxzbyBzZXRzIHRoZSByb3RhdGlvbiBwYXJhbWV0ZXIgdG8gcmVmbGVjdCB0aGUgcm90YXRlIHRoZSBjYW1lcmEgd2lsbCBoYXZlIHdoZW4gaXQgaXMgb24gdGhlIG9yYml0IHNwaGVyZSxcbiAgICAgKiBwb2ludGluZyB0b3dhcmRzIHRoZSBjZW50ZXIuXG4gICAgICogQHBhcmFtIHBvc2l0aW9uIHRoZSBwb3NpdGlvbiB0byBnZXQgdGhlIGNsb3Nlc3QgcG9zaXRpb24gdG9cbiAgICAgKiBAcGFyYW0gcm90YXRpb24gdGhlIHJvdGF0aW9uIHRvIGdldCB0aGUgY2xvc2VzdCBwb3NpdGlvbiB0b1xuICAgICAqL1xuICAgIGdldENsb3Nlc3RQb3NpdGlvbihwb3NpdGlvbiwgcm90YXRpb24pIHtcbiAgICAgICAgLyogSXQncyBhIGJpdCBoYWNreSwgYnV0IHRoZSBlYXNpZXN0IHdheSB0byBnZXQgdGhlIHJvdGF0aW9uIG9mIHRoZSBjYW1lcmEgaXMganVzdCBicmllZmx5XG4gICAgICAgICBjaGFuZ2UgdGhlIHJvdGF0aW9uIHRvIGxvb2sgYXQgdGhlIGNlbnRlciBhbmQgdGhlbiBnZXQgdGhlIHJvdGF0aW9uLiAqL1xuICAgICAgICB0aGlzLm9iamVjdC5nZXRSb3RhdGlvbldvcmxkKHRlbXBxdWF0KTtcbiAgICAgICAgdGhpcy5vYmplY3QubG9va0F0KHRoaXMuX29yaWdpbik7XG4gICAgICAgIHRoaXMub2JqZWN0LmdldFJvdGF0aW9uV29ybGQodGVtcHF1YXQyKTtcbiAgICAgICAgaWYgKHF1YXQuZG90KHRlbXBxdWF0LCB0ZW1wcXVhdDIpIDwgMCkge1xuICAgICAgICAgICAgcXVhdC5zY2FsZSh0ZW1wcXVhdDIsIHRlbXBxdWF0MiwgLTEpOyAvKiBOZWdhdGUgdG8gZW5zdXJlIHNob3J0ZXN0IHBhdGggKi9cbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9iamVjdC5zZXRSb3RhdGlvbldvcmxkKHRlbXBxdWF0KTtcbiAgICAgICAgLyogQ2FsY3VsYXRlIHRoZSBkaXJlY3Rpb24gZnJvbSB0aGUgY2VudGVyIG9mIG9yYml0IHRvIHRoZSBjdXJyZW50IGNhbWVyYSBwb3NpdGlvbiAqL1xuICAgICAgICBjb25zdCBkaXJlY3Rpb25Ub0NhbWVyYSA9IHZlYzMuY3JlYXRlKCk7XG4gICAgICAgIHZlYzMuc3VidHJhY3QoZGlyZWN0aW9uVG9DYW1lcmEsIHBvc2l0aW9uLCB0aGlzLl9vcmlnaW4pO1xuICAgICAgICB2ZWMzLm5vcm1hbGl6ZShkaXJlY3Rpb25Ub0NhbWVyYSwgZGlyZWN0aW9uVG9DYW1lcmEpO1xuICAgICAgICAvKiBTY2FsZSB0aGlzIGRpcmVjdGlvbiBieSB0aGUgcmFkaXVzIG9mIHlvdXIgb3JiaXRhbCBzcGhlcmUgdG8gZ2V0IHRoZSBuZWFyZXN0IHBvaW50IG9uIHRoZSBzcGhlcmUgKi9cbiAgICAgICAgY29uc3QgbmVhcmVzdFBvaW50T25TcGhlcmUgPSB2ZWMzLmNyZWF0ZSgpO1xuICAgICAgICB2ZWMzLnNjYWxlKG5lYXJlc3RQb2ludE9uU3BoZXJlLCBkaXJlY3Rpb25Ub0NhbWVyYSwgdGhpcy5yYWRpYWwpO1xuICAgICAgICB2ZWMzLmFkZChuZWFyZXN0UG9pbnRPblNwaGVyZSwgbmVhcmVzdFBvaW50T25TcGhlcmUsIHRoaXMuX29yaWdpbik7XG4gICAgICAgIHZlYzMuY29weShwb3NpdGlvbiwgbmVhcmVzdFBvaW50T25TcGhlcmUpO1xuICAgICAgICBxdWF0LmNvcHkocm90YXRpb24sIHRlbXBxdWF0Mik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY2FtZXJhIHBvc2l0aW9uIGJhc2VkIG9uIHRoZSBnaXZlbiBwb3NpdGlvbiBhbmQgY2FsY3VsYXRlIHRoZSByb3RhdGlvbi5cbiAgICAgKiBAcGFyYW0gY2FtZXJhUG9zaXRpb24gdGhlIHBvc2l0aW9uIHRvIHNldCB0aGUgY2FtZXJhIHRvXG4gICAgICovXG4gICAgc2V0UG9zaXRpb24oY2FtZXJhUG9zaXRpb24pIHtcbiAgICAgICAgY29uc3QgY2VudGVyT2ZPcmJpdCA9IHRoaXMuX29yaWdpbjtcbiAgICAgICAgLyogQ29tcHV0ZSB0aGUgZGlyZWN0aW9uIHZlY3RvciAqL1xuICAgICAgICB2ZWMzLnN1YnRyYWN0KHRlbXBWZWMzLCBjYW1lcmFQb3NpdGlvbiwgY2VudGVyT2ZPcmJpdCk7XG4gICAgICAgIHZlYzMubm9ybWFsaXplKHRlbXBWZWMzLCB0ZW1wVmVjMyk7XG4gICAgICAgIC8qIENvbXB1dGUgdGhlIGF6aW11dGggYW5nbGUgKGluIHJhZGlhbnMpICovXG4gICAgICAgIGNvbnN0IGF6aW11dGggPSBNYXRoLmF0YW4yKHRlbXBWZWMzWzBdLCB0ZW1wVmVjM1syXSk7XG4gICAgICAgIC8qIENvbXB1dGUgdGhlIHBvbGFyIGFuZ2xlIChpbiByYWRpYW5zKSAqL1xuICAgICAgICBjb25zdCBwb2xhciA9IE1hdGguYWNvcyh0ZW1wVmVjM1sxXSk7XG4gICAgICAgIGNvbnN0IGF6aW11dGhEZWcgPSByYWQyZGVnKGF6aW11dGgpO1xuICAgICAgICAvKiBQb2xhciBpcyBpbnZlcnRlZCB0byBtYXRjaCB0aGUgb3JiaXRhbCBjYW1lcmEgKi9cbiAgICAgICAgY29uc3QgcG9sYXJEZWcgPSA5MCAtIHJhZDJkZWcocG9sYXIpO1xuICAgICAgICB0aGlzLl9hemltdXRoID0gYXppbXV0aERlZztcbiAgICAgICAgdGhpcy5fcG9sYXIgPSBwb2xhckRlZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBjYW1lcmEgcG9zaXRpb24gYmFzZWQgb24gdGhlIGN1cnJlbnQgYXppbXV0aCxcbiAgICAgKiBwb2xhciBhbmQgcmFkaWFsIHZhbHVlc1xuICAgICAqL1xuICAgIF91cGRhdGVDYW1lcmEoKSB7XG4gICAgICAgIGNvbnN0IGF6aW11dGhJblJhZGlhbnMgPSBkZWcycmFkKHRoaXMuX2F6aW11dGgpO1xuICAgICAgICBjb25zdCBwb2xhckluUmFkaWFucyA9IGRlZzJyYWQodGhpcy5fcG9sYXIpO1xuICAgICAgICB0ZW1wVmVjWzBdID0gdGhpcy5yYWRpYWwgKiBNYXRoLnNpbihhemltdXRoSW5SYWRpYW5zKSAqIE1hdGguY29zKHBvbGFySW5SYWRpYW5zKTtcbiAgICAgICAgdGVtcFZlY1sxXSA9IHRoaXMucmFkaWFsICogTWF0aC5zaW4ocG9sYXJJblJhZGlhbnMpO1xuICAgICAgICB0ZW1wVmVjWzJdID0gdGhpcy5yYWRpYWwgKiBNYXRoLmNvcyhhemltdXRoSW5SYWRpYW5zKSAqIE1hdGguY29zKHBvbGFySW5SYWRpYW5zKTtcbiAgICAgICAgdGhpcy5vYmplY3Quc2V0UG9zaXRpb25Xb3JsZCh0ZW1wVmVjKTtcbiAgICAgICAgdGhpcy5vYmplY3QudHJhbnNsYXRlV29ybGQodGhpcy5fb3JpZ2luKTtcbiAgICAgICAgdGhpcy5vYmplY3QubG9va0F0KHRoaXMuX29yaWdpbik7XG4gICAgfVxuICAgIC8qIE1vdXNlIEV2ZW50IEhhbmRsZXJzICovXG4gICAgX29uTW91c2VEb3duID0gKGUpID0+IHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9vbk1vdXNlVXApO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5fb25Nb3VzZU1vdmUpO1xuICAgICAgICBpZiAoZS5idXR0b24gPT09IHRoaXMubW91c2VCdXR0b25JbmRleCkge1xuICAgICAgICAgICAgdGhpcy5fbW91c2VEb3duID0gdHJ1ZTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJ2dyYWJiaW5nJztcbiAgICAgICAgICAgIGlmIChlLmJ1dHRvbiA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgLyogdG8gcHJldmVudCBzY3JvbGxpbmcgKi9cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIF9vbk1vdXNlVXAgPSAoZSkgPT4ge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX29uTW91c2VVcCk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9vbk1vdXNlTW92ZSk7XG4gICAgICAgIGlmIChlLmJ1dHRvbiA9PT0gdGhpcy5tb3VzZUJ1dHRvbkluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLl9tb3VzZURvd24gPSBmYWxzZTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJ2luaXRpYWwnO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBfb25Nb3VzZU1vdmUgPSAoZSkgPT4ge1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUgJiYgdGhpcy5fbW91c2VEb3duKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hY3RpdmUgJiYgdGhpcy5fbW91c2VEb3duKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYXppbXV0aFNwZWVkID0gLShlLm1vdmVtZW50WCAqIHRoaXMueFNlbnNpdGl2aXR5KTtcbiAgICAgICAgICAgICAgICB0aGlzLl9wb2xhclNwZWVkID0gZS5tb3ZlbWVudFkgKiB0aGlzLnlTZW5zaXRpdml0eTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgX29uTW91c2VTY3JvbGwgPSAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8qIHRvIHByZXZlbnQgc2Nyb2xsaW5nICovXG4gICAgICAgIHRoaXMucmFkaWFsICo9IDEgLSBlLmRlbHRhWSAqIHRoaXMuem9vbVNlbnNpdGl2aXR5ICogLTAuMDAxO1xuICAgICAgICB0aGlzLnJhZGlhbCA9IE1hdGgubWluKHRoaXMubWF4Wm9vbSwgTWF0aC5tYXgodGhpcy5taW5ab29tLCB0aGlzLnJhZGlhbCkpO1xuICAgICAgICB0aGlzLl91cGRhdGVDYW1lcmEoKTtcbiAgICB9O1xuICAgIC8qIFRvdWNoIGV2ZW50IGhhbmRsZXJzICovXG4gICAgX29uVG91Y2hTdGFydCA9IChlKSA9PiB7XG4gICAgICAgIGlmIChlLnRvdWNoZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAvKiB0byBwcmV2ZW50IHNjcm9sbGluZyBhbmQgYWxsb3cgdXMgdG8gdHJhY2sgdG91Y2ggbW92ZW1lbnQgKi9cbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuX3RvdWNoU3RhcnRYID0gZS50b3VjaGVzWzBdLmNsaWVudFg7XG4gICAgICAgICAgICB0aGlzLl90b3VjaFN0YXJ0WSA9IGUudG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgICAgICAgdGhpcy5fbW91c2VEb3duID0gdHJ1ZTsgLyogVHJlYXQgdG91Y2ggbGlrZSBtb3VzZSBkb3duICovXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZS50b3VjaGVzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgLyogQ2FsY3VsYXRlIGluaXRpYWwgcGluY2ggZGlzdGFuY2UgKi9cbiAgICAgICAgICAgIHRoaXMuX2luaXRpYWxQaW5jaERpc3RhbmNlID0gdGhpcy5fZ2V0RGlzdGFuY2VCZXR3ZWVuVG91Y2hlcyhlLnRvdWNoZXMpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvKiBQcmV2ZW50IGRlZmF1bHQgcGluY2ggYWN0aW9ucyAqL1xuICAgICAgICB9XG4gICAgfTtcbiAgICBfb25Ub3VjaE1vdmUgPSAoZSkgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlIHx8ICF0aGlzLl9tb3VzZURvd24pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8qIHRvIHByZXZlbnQgbW92aW5nIHRoZSBwYWdlICovXG4gICAgICAgIGlmIChlLnRvdWNoZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBjb25zdCBkZWx0YVggPSBlLnRvdWNoZXNbMF0uY2xpZW50WCAtIHRoaXMuX3RvdWNoU3RhcnRYO1xuICAgICAgICAgICAgY29uc3QgZGVsdGFZID0gZS50b3VjaGVzWzBdLmNsaWVudFkgLSB0aGlzLl90b3VjaFN0YXJ0WTtcbiAgICAgICAgICAgIHRoaXMuX2F6aW11dGhTcGVlZCA9IC0oZGVsdGFYICogdGhpcy54U2Vuc2l0aXZpdHkpO1xuICAgICAgICAgICAgdGhpcy5fcG9sYXJTcGVlZCA9IGRlbHRhWSAqIHRoaXMueVNlbnNpdGl2aXR5O1xuICAgICAgICAgICAgdGhpcy5fdG91Y2hTdGFydFggPSBlLnRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgICAgICAgIHRoaXMuX3RvdWNoU3RhcnRZID0gZS50b3VjaGVzWzBdLmNsaWVudFk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZS50b3VjaGVzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgLyogSGFuZGxlIHBpbmNoIHpvb20gKi9cbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRQaW5jaERpc3RhbmNlID0gdGhpcy5fZ2V0RGlzdGFuY2VCZXR3ZWVuVG91Y2hlcyhlLnRvdWNoZXMpO1xuICAgICAgICAgICAgY29uc3QgcGluY2hTY2FsZSA9IHRoaXMuX2luaXRpYWxQaW5jaERpc3RhbmNlIC8gY3VycmVudFBpbmNoRGlzdGFuY2U7XG4gICAgICAgICAgICB0aGlzLnJhZGlhbCAqPSBwaW5jaFNjYWxlO1xuICAgICAgICAgICAgdGhpcy5yYWRpYWwgPSBNYXRoLm1pbih0aGlzLm1heFpvb20sIE1hdGgubWF4KHRoaXMubWluWm9vbSwgdGhpcy5yYWRpYWwpKTtcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUNhbWVyYSgpO1xuICAgICAgICAgICAgLyogVXBkYXRlIGluaXRpYWwgcGluY2ggZGlzdGFuY2UgZm9yIG5leHQgbW92ZSAqL1xuICAgICAgICAgICAgdGhpcy5faW5pdGlhbFBpbmNoRGlzdGFuY2UgPSBjdXJyZW50UGluY2hEaXN0YW5jZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgX29uVG91Y2hFbmQgPSAoZSkgPT4ge1xuICAgICAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgIHRoaXMuX21vdXNlRG93biA9IGZhbHNlOyAvKiBUcmVhdCB0b3VjaCBlbmQgbGlrZSBtb3VzZSB1cCAqL1xuICAgICAgICB9XG4gICAgICAgIGlmIChlLnRvdWNoZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAvKiBQcmVwYXJlIGZvciBwb3NzaWJsZSBzaW5nbGUgdG91Y2ggbW92ZW1lbnQgKi9cbiAgICAgICAgICAgIHRoaXMuX3RvdWNoU3RhcnRYID0gZS50b3VjaGVzWzBdLmNsaWVudFg7XG4gICAgICAgICAgICB0aGlzLl90b3VjaFN0YXJ0WSA9IGUudG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gY2FsY3VsYXRlIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHR3byB0b3VjaCBwb2ludHNcbiAgICAgKiBAcGFyYW0gdG91Y2hlcyBsaXN0IG9mIHRvdWNoIHBvaW50c1xuICAgICAqIEByZXR1cm5zIGRpc3RhbmNlIGJldHdlZW4gdGhlIHR3byB0b3VjaCBwb2ludHNcbiAgICAgKi9cbiAgICBfZ2V0RGlzdGFuY2VCZXR3ZWVuVG91Y2hlcyh0b3VjaGVzKSB7XG4gICAgICAgIGNvbnN0IGR4ID0gdG91Y2hlc1swXS5jbGllbnRYIC0gdG91Y2hlc1sxXS5jbGllbnRYO1xuICAgICAgICBjb25zdCBkeSA9IHRvdWNoZXNbMF0uY2xpZW50WSAtIHRvdWNoZXNbMV0uY2xpZW50WTtcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuaW50KClcbl0sIE9yYml0YWxDYW1lcmEucHJvdG90eXBlLCBcIm1vdXNlQnV0dG9uSW5kZXhcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmZsb2F0KDUpXG5dLCBPcmJpdGFsQ2FtZXJhLnByb3RvdHlwZSwgXCJyYWRpYWxcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmZsb2F0KClcbl0sIE9yYml0YWxDYW1lcmEucHJvdG90eXBlLCBcIm1pbkVsZXZhdGlvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoODkuOTkpXG5dLCBPcmJpdGFsQ2FtZXJhLnByb3RvdHlwZSwgXCJtYXhFbGV2YXRpb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmZsb2F0KClcbl0sIE9yYml0YWxDYW1lcmEucHJvdG90eXBlLCBcIm1pblpvb21cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmZsb2F0KDEwLjApXG5dLCBPcmJpdGFsQ2FtZXJhLnByb3RvdHlwZSwgXCJtYXhab29tXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5mbG9hdCgwLjUpXG5dLCBPcmJpdGFsQ2FtZXJhLnByb3RvdHlwZSwgXCJ4U2Vuc2l0aXZpdHlcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmZsb2F0KDAuNSlcbl0sIE9yYml0YWxDYW1lcmEucHJvdG90eXBlLCBcInlTZW5zaXRpdml0eVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoMC4wMilcbl0sIE9yYml0YWxDYW1lcmEucHJvdG90eXBlLCBcInpvb21TZW5zaXRpdml0eVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoMC45KVxuXSwgT3JiaXRhbENhbWVyYS5wcm90b3R5cGUsIFwiZGFtcGluZ1wiLCB2b2lkIDApO1xuZXhwb3J0IHsgT3JiaXRhbENhbWVyYSB9O1xuIiwgImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXRDb21wb25lbnQsIE1lc2hDb21wb25lbnQsIFByb3BlcnR5IH0gZnJvbSBcIkB3b25kZXJsYW5kZW5naW5lL2FwaVwiO1xyXG5pbXBvcnQgeyBDdXJzb3JUYXJnZXQsIEhvd2xlckF1ZGlvU291cmNlIH0gZnJvbSBcIkB3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHNcIjtcclxuaW1wb3J0IHsgQ29seXNldXNDbGllbnQgfSBmcm9tIFwiLi9jb2x5c2V1cy1jbGllbnRcIjsgLy8gRW5zdXJlIHRoZSBjb3JyZWN0IHBhdGggdG8gY29seXNldXMtY2xpZW50LmpzXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGFwdGljRmVlZGJhY2sob2JqZWN0LCBzdHJlbmd0aCwgZHVyYXRpb24pIHtcclxuICBjb25zdCBpbnB1dCA9IG9iamVjdC5nZXRDb21wb25lbnQoSW5wdXRDb21wb25lbnQpO1xyXG4gIGlmIChpbnB1dCAmJiBpbnB1dC54cklucHV0U291cmNlKSB7XHJcbiAgICBjb25zdCBnYW1lcGFkID0gaW5wdXQueHJJbnB1dFNvdXJjZS5nYW1lcGFkO1xyXG4gICAgaWYgKGdhbWVwYWQgJiYgZ2FtZXBhZC5oYXB0aWNBY3R1YXRvcnMpIGdhbWVwYWQuaGFwdGljQWN0dWF0b3JzWzBdLnB1bHNlKHN0cmVuZ3RoLCBkdXJhdGlvbik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQnV0dG9uQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICBzdGF0aWMgVHlwZU5hbWUgPSBcImJ1dHRvbkNyZWF0ZVwiO1xyXG4gIHN0YXRpYyBQcm9wZXJ0aWVzID0ge1xyXG4gICAgYnV0dG9uTWVzaE9iamVjdDogUHJvcGVydHkub2JqZWN0KCksXHJcbiAgICBob3Zlck1hdGVyaWFsOiBQcm9wZXJ0eS5tYXRlcmlhbCgpLFxyXG4gIH07XHJcblxyXG4gIHN0YXRpYyBvblJlZ2lzdGVyKGVuZ2luZSkge1xyXG4gICAgZW5naW5lLnJlZ2lzdGVyQ29tcG9uZW50KEhvd2xlckF1ZGlvU291cmNlKTtcclxuICAgIGVuZ2luZS5yZWdpc3RlckNvbXBvbmVudChDdXJzb3JUYXJnZXQpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuUG9zID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcclxuXHJcbiAgc3RhcnQoKSB7XHJcbiAgICB0aGlzLm1lc2ggPSB0aGlzLmJ1dHRvbk1lc2hPYmplY3QuZ2V0Q29tcG9uZW50KE1lc2hDb21wb25lbnQpO1xyXG4gICAgdGhpcy5kZWZhdWx0TWF0ZXJpYWwgPSB0aGlzLm1lc2gubWF0ZXJpYWw7XHJcbiAgICB0aGlzLmJ1dHRvbk1lc2hPYmplY3QuZ2V0VHJhbnNsYXRpb25Mb2NhbCh0aGlzLnJldHVyblBvcyk7XHJcblxyXG4gICAgdGhpcy50YXJnZXQgPSB0aGlzLm9iamVjdC5nZXRDb21wb25lbnQoQ3Vyc29yVGFyZ2V0KSB8fCB0aGlzLm9iamVjdC5hZGRDb21wb25lbnQoQ3Vyc29yVGFyZ2V0KTtcclxuXHJcbiAgICB0aGlzLnNvdW5kQ2xpY2sgPSB0aGlzLm9iamVjdC5hZGRDb21wb25lbnQoSG93bGVyQXVkaW9Tb3VyY2UsIHtcclxuICAgICAgc3JjOiBcInNmeC9jbGljay53YXZcIixcclxuICAgICAgc3BhdGlhbDogdHJ1ZSxcclxuICAgIH0pO1xyXG4gICAgdGhpcy5zb3VuZFVuQ2xpY2sgPSB0aGlzLm9iamVjdC5hZGRDb21wb25lbnQoSG93bGVyQXVkaW9Tb3VyY2UsIHtcclxuICAgICAgc3JjOiBcInNmeC91bmNsaWNrLndhdlwiLFxyXG4gICAgICBzcGF0aWFsOiB0cnVlLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBvbkFjdGl2YXRlKCkge1xyXG4gICAgdGhpcy50YXJnZXQub25Ib3Zlci5hZGQodGhpcy5vbkhvdmVyKTtcclxuICAgIHRoaXMudGFyZ2V0Lm9uVW5ob3Zlci5hZGQodGhpcy5vblVuaG92ZXIpO1xyXG4gICAgdGhpcy50YXJnZXQub25Eb3duLmFkZCh0aGlzLm9uRG93bik7XHJcbiAgICB0aGlzLnRhcmdldC5vblVwLmFkZCh0aGlzLm9uVXApO1xyXG4gIH1cclxuXHJcbiAgb25EZWFjdGl2YXRlKCkge1xyXG4gICAgdGhpcy50YXJnZXQub25Ib3Zlci5yZW1vdmUodGhpcy5vbkhvdmVyKTtcclxuICAgIHRoaXMudGFyZ2V0Lm9uVW5ob3Zlci5yZW1vdmUodGhpcy5vblVuaG92ZXIpO1xyXG4gICAgdGhpcy50YXJnZXQub25Eb3duLnJlbW92ZSh0aGlzLm9uRG93bik7XHJcbiAgICB0aGlzLnRhcmdldC5vblVwLnJlbW92ZSh0aGlzLm9uVXApO1xyXG4gIH1cclxuXHJcbiAgb25Ib3ZlciA9IChfLCBjdXJzb3IpID0+IHtcclxuICAgIHRoaXMubWVzaC5tYXRlcmlhbCA9IHRoaXMuaG92ZXJNYXRlcmlhbDtcclxuICAgIGlmIChjdXJzb3IudHlwZSA9PT0gXCJmaW5nZXItY3Vyc29yXCIpIHtcclxuICAgICAgdGhpcy5vbkRvd24oXywgY3Vyc29yKTtcclxuICAgIH1cclxuXHJcbiAgICBoYXB0aWNGZWVkYmFjayhjdXJzb3Iub2JqZWN0LCAwLjUsIDUwKTtcclxuICB9O1xyXG5cclxuICBvbkRvd24gPSAoXywgY3Vyc29yKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhcIkJ1dHRvbiBwcmVzc2VkXCIpO1xyXG4gICAgdGhpcy5zb3VuZENsaWNrLnBsYXkoKTtcclxuICAgIHRoaXMuYnV0dG9uTWVzaE9iamVjdC50cmFuc2xhdGUoWzAuMCwgLTAuMSwgMC4wXSk7XHJcbiAgICBoYXB0aWNGZWVkYmFjayhjdXJzb3Iub2JqZWN0LCAxLjAsIDIwKTtcclxuXHJcbiAgICAvLyBUcmlnZ2VyIHRoZSBqb2luT3JDcmVhdGUgbWV0aG9kIGZyb20gQ29seXNldXNDbGllbnRcclxuICAgIGxldCBjb2x5c2V1c0NsaWVudCA9IHRoaXMub2JqZWN0LmdldENvbXBvbmVudChDb2x5c2V1c0NsaWVudCk7XHJcbiAgICBpZiAoIWNvbHlzZXVzQ2xpZW50KSB7XHJcbiAgICAgIGNvbHlzZXVzQ2xpZW50ID0gdGhpcy5vYmplY3QucGFyZW50LmdldENvbXBvbmVudChDb2x5c2V1c0NsaWVudCk7XHJcbiAgICB9XHJcbiAgICBpZiAoY29seXNldXNDbGllbnQpIHtcclxuICAgICAgY29seXNldXNDbGllbnQub25Ib3N0Q2xpY2soKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJDb2x5c2V1c0NsaWVudCBjb21wb25lbnQgbm90IGZvdW5kIVwiKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBvblVwID0gKF8sIGN1cnNvcikgPT4ge1xyXG4gICAgdGhpcy5zb3VuZFVuQ2xpY2sucGxheSgpO1xyXG4gICAgdGhpcy5idXR0b25NZXNoT2JqZWN0LnNldFRyYW5zbGF0aW9uTG9jYWwodGhpcy5yZXR1cm5Qb3MpO1xyXG4gICAgaGFwdGljRmVlZGJhY2soY3Vyc29yLm9iamVjdCwgMC43LCAyMCk7XHJcbiAgfTtcclxuXHJcbiAgb25VbmhvdmVyID0gKF8sIGN1cnNvcikgPT4ge1xyXG4gICAgdGhpcy5tZXNoLm1hdGVyaWFsID0gdGhpcy5kZWZhdWx0TWF0ZXJpYWw7XHJcbiAgICBpZiAoY3Vyc29yLnR5cGUgPT09IFwiZmluZ2VyLWN1cnNvclwiKSB7XHJcbiAgICAgIHRoaXMub25VcChfLCBjdXJzb3IpO1xyXG4gICAgfVxyXG5cclxuICAgIGhhcHRpY0ZlZWRiYWNrKGN1cnNvci5vYmplY3QsIDAuMywgNTApO1xyXG4gIH07XHJcbn1cclxuIiwgImltcG9ydCB7IENvbXBvbmVudCwgVHlwZSB9IGZyb20gXCJAd29uZGVybGFuZGVuZ2luZS9hcGlcIjtcbmltcG9ydCB7IENsaWVudCB9IGZyb20gXCJjb2x5c2V1cy5qc1wiO1xuXG5leHBvcnQgY2xhc3MgQ29seXNldXNDbGllbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICBzdGF0aWMgVHlwZU5hbWUgPSBcImNvbHlzZXVzLWNsaWVudFwiO1xuICBzdGF0aWMgUHJvcGVydGllcyA9IHtcbiAgICBzcGhlcmU6IHsgdHlwZTogVHlwZS5PYmplY3QgfSxcbiAgICBib3g6IHsgdHlwZTogVHlwZS5PYmplY3QgfSxcbiAgICBjb25lOiB7IHR5cGU6IFR5cGUuT2JqZWN0IH0sXG4gICAgaG9zdEJ1dHRvbjogeyB0eXBlOiBUeXBlLk9iamVjdCB9LFxuICAgIGpvaW5CdXR0b246IHsgdHlwZTogVHlwZS5PYmplY3QgfSxcbiAgICBsZWF2ZUJ1dHRvbjogeyB0eXBlOiBUeXBlLk9iamVjdCB9LFxuICB9O1xuICBcbiAgaW5pdCgpIHtcbiAgICB0aGlzLmNsaWVudCA9IG5ldyBDbGllbnQoXCJ3czovL2xvY2FsaG9zdDoyNTY3XCIpO1xuICAgIGRvY3VtZW50LmNsaWVudCA9IHRoaXMuY2xpZW50O1xuXG4gICAgLy8gQmluZCB0aGUgY2xpY2sgZXZlbnRzIHRvIHRoZSBidXR0b25zXG4gICAgdGhpcy5ob3N0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLm9uSG9zdENsaWNrLmJpbmQodGhpcykpO1xuICAgIHRoaXMuam9pbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5vbkpvaW5DbGljay5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmxlYXZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLm9uTGVhdmVDbGljay5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIG9uSG9zdENsaWNrKCkge1xuICAgIHRoaXMuY2xpZW50LmNyZWF0ZShcIm15X3Jvb21cIikudGhlbihcbiAgICAgIGZ1bmN0aW9uIChyb29tKSB7XG4gICAgICAgIHRoaXMuc2V0dXBSb29tKHJvb20pO1xuICAgICAgICBjb25zb2xlLmxvZyhyb29tLnNlc3Npb25JZCwgXCJjcmVhdGVkXCIsIHJvb20ubmFtZSk7XG4gICAgICB9LmJpbmQodGhpcylcbiAgICApLmNhdGNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkNSRUFURSBFUlJPUlwiLCBlKTtcbiAgICB9KTtcbiAgfVxuXG4gIG9uSm9pbkNsaWNrKCkge1xuICAgIHRoaXMuY2xpZW50LmpvaW4oXCJteV9yb29tXCIpLnRoZW4oXG4gICAgICBmdW5jdGlvbiAocm9vbSkge1xuICAgICAgICB0aGlzLnNldHVwUm9vbShyb29tKTtcbiAgICAgICAgY29uc29sZS5sb2cocm9vbS5zZXNzaW9uSWQsIFwiam9pbmVkXCIsIHJvb20ubmFtZSk7XG4gICAgICB9LmJpbmQodGhpcylcbiAgICApLmNhdGNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkpPSU4gRVJST1JcIiwgZSk7XG4gICAgfSk7XG4gIH1cblxuICBvbkxlYXZlQ2xpY2soKSB7XG4gICAgaWYgKHRoaXMucm9vbSkge1xuICAgICAgdGhpcy5yb29tLmxlYXZlKCkudGhlbihcbiAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiTGVmdCB0aGUgcm9vbVwiLCB0aGlzLnJvb20ubmFtZSk7XG4gICAgICAgICAgdGhpcy5yb29tID0gbnVsbDtcbiAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICApLmNhdGNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiTEVBVkUgRVJST1JcIiwgZSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coXCJObyByb29tIHRvIGxlYXZlXCIpO1xuICAgIH1cbiAgfVxuXG4gIHNldHVwUm9vbShyb29tKSB7XG4gICAgdGhpcy5yb29tID0gcm9vbTtcbiAgICB0aGlzLm5ld1Bvc0JveCA9IHt9O1xuICAgIHRoaXMubmV3UG9zQ29uZSA9IHt9O1xuICAgIHRoaXMubmV3UG9zU3BoZXJlID0ge307XG4gICAgcm9vbS5zdGF0ZS5ib3gub25DaGFuZ2UoKCkgPT4ge1xuICAgICAgdGhpcy5ib3guc2V0VHJhbnNsYXRpb25Xb3JsZChbdGhpcy5yb29tLnN0YXRlLmJveC54LCB0aGlzLnJvb20uc3RhdGUuYm94LnksIHRoaXMucm9vbS5zdGF0ZS5ib3guel0pO1xuICAgIH0pO1xuXG4gICAgcm9vbS5zdGF0ZS5jb25lLm9uQ2hhbmdlKCgpID0+IHtcbiAgICAgIHRoaXMuY29uZS5zZXRUcmFuc2xhdGlvbldvcmxkKFt0aGlzLnJvb20uc3RhdGUuY29uZS54LCB0aGlzLnJvb20uc3RhdGUuY29uZS55LCB0aGlzLnJvb20uc3RhdGUuY29uZS56XSk7XG4gICAgfSk7XG5cbiAgICByb29tLnN0YXRlLnNwaGVyZS5vbkNoYW5nZSgoKSA9PiB7XG4gICAgICB0aGlzLnNwaGVyZS5zZXRUcmFuc2xhdGlvbldvcmxkKFt0aGlzLnJvb20uc3RhdGUuc3BoZXJlLngsIHRoaXMucm9vbS5zdGF0ZS5zcGhlcmUueSwgdGhpcy5yb29tLnN0YXRlLnNwaGVyZS56XSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0Q29tcG9uZW50LCBNZXNoQ29tcG9uZW50LCBQcm9wZXJ0eSB9IGZyb20gXCJAd29uZGVybGFuZGVuZ2luZS9hcGlcIjtcclxuaW1wb3J0IHsgQ3Vyc29yVGFyZ2V0LCBIb3dsZXJBdWRpb1NvdXJjZSB9IGZyb20gXCJAd29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzXCI7XHJcbmltcG9ydCB7IENvbHlzZXVzQ2xpZW50IH0gZnJvbSBcIi4vY29seXNldXMtY2xpZW50XCI7IC8vIEVuc3VyZSB0aGUgY29ycmVjdCBwYXRoIHRvIGNvbHlzZXVzLWNsaWVudC5qc1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhcHRpY0ZlZWRiYWNrKG9iamVjdCwgc3RyZW5ndGgsIGR1cmF0aW9uKSB7XHJcbiAgY29uc3QgaW5wdXQgPSBvYmplY3QuZ2V0Q29tcG9uZW50KElucHV0Q29tcG9uZW50KTtcclxuICBpZiAoaW5wdXQgJiYgaW5wdXQueHJJbnB1dFNvdXJjZSkge1xyXG4gICAgY29uc3QgZ2FtZXBhZCA9IGlucHV0LnhySW5wdXRTb3VyY2UuZ2FtZXBhZDtcclxuICAgIGlmIChnYW1lcGFkICYmIGdhbWVwYWQuaGFwdGljQWN0dWF0b3JzKSBnYW1lcGFkLmhhcHRpY0FjdHVhdG9yc1swXS5wdWxzZShzdHJlbmd0aCwgZHVyYXRpb24pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEJ1dHRvbkNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgc3RhdGljIFR5cGVOYW1lID0gXCJidXR0b25Kb2luXCI7XHJcbiAgc3RhdGljIFByb3BlcnRpZXMgPSB7XHJcbiAgICBidXR0b25NZXNoT2JqZWN0OiBQcm9wZXJ0eS5vYmplY3QoKSxcclxuICAgIGhvdmVyTWF0ZXJpYWw6IFByb3BlcnR5Lm1hdGVyaWFsKCksXHJcbiAgfTtcclxuXHJcbiAgc3RhdGljIG9uUmVnaXN0ZXIoZW5naW5lKSB7XHJcbiAgICBlbmdpbmUucmVnaXN0ZXJDb21wb25lbnQoSG93bGVyQXVkaW9Tb3VyY2UpO1xyXG4gICAgZW5naW5lLnJlZ2lzdGVyQ29tcG9uZW50KEN1cnNvclRhcmdldCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm5Qb3MgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xyXG5cclxuICBzdGFydCgpIHtcclxuICAgIHRoaXMubWVzaCA9IHRoaXMuYnV0dG9uTWVzaE9iamVjdC5nZXRDb21wb25lbnQoTWVzaENvbXBvbmVudCk7XHJcbiAgICB0aGlzLmRlZmF1bHRNYXRlcmlhbCA9IHRoaXMubWVzaC5tYXRlcmlhbDtcclxuICAgIHRoaXMuYnV0dG9uTWVzaE9iamVjdC5nZXRUcmFuc2xhdGlvbkxvY2FsKHRoaXMucmV0dXJuUG9zKTtcclxuXHJcbiAgICB0aGlzLnRhcmdldCA9IHRoaXMub2JqZWN0LmdldENvbXBvbmVudChDdXJzb3JUYXJnZXQpIHx8IHRoaXMub2JqZWN0LmFkZENvbXBvbmVudChDdXJzb3JUYXJnZXQpO1xyXG5cclxuICAgIHRoaXMuc291bmRDbGljayA9IHRoaXMub2JqZWN0LmFkZENvbXBvbmVudChIb3dsZXJBdWRpb1NvdXJjZSwge1xyXG4gICAgICBzcmM6IFwic2Z4L2NsaWNrLndhdlwiLFxyXG4gICAgICBzcGF0aWFsOiB0cnVlLFxyXG4gICAgfSk7XHJcbiAgICB0aGlzLnNvdW5kVW5DbGljayA9IHRoaXMub2JqZWN0LmFkZENvbXBvbmVudChIb3dsZXJBdWRpb1NvdXJjZSwge1xyXG4gICAgICBzcmM6IFwic2Z4L3VuY2xpY2sud2F2XCIsXHJcbiAgICAgIHNwYXRpYWw6IHRydWUsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG9uQWN0aXZhdGUoKSB7XHJcbiAgICB0aGlzLnRhcmdldC5vbkhvdmVyLmFkZCh0aGlzLm9uSG92ZXIpO1xyXG4gICAgdGhpcy50YXJnZXQub25VbmhvdmVyLmFkZCh0aGlzLm9uVW5ob3Zlcik7XHJcbiAgICB0aGlzLnRhcmdldC5vbkRvd24uYWRkKHRoaXMub25Eb3duKTtcclxuICAgIHRoaXMudGFyZ2V0Lm9uVXAuYWRkKHRoaXMub25VcCk7XHJcbiAgfVxyXG5cclxuICBvbkRlYWN0aXZhdGUoKSB7XHJcbiAgICB0aGlzLnRhcmdldC5vbkhvdmVyLnJlbW92ZSh0aGlzLm9uSG92ZXIpO1xyXG4gICAgdGhpcy50YXJnZXQub25VbmhvdmVyLnJlbW92ZSh0aGlzLm9uVW5ob3Zlcik7XHJcbiAgICB0aGlzLnRhcmdldC5vbkRvd24ucmVtb3ZlKHRoaXMub25Eb3duKTtcclxuICAgIHRoaXMudGFyZ2V0Lm9uVXAucmVtb3ZlKHRoaXMub25VcCk7XHJcbiAgfVxyXG5cclxuICBvbkhvdmVyID0gKF8sIGN1cnNvcikgPT4ge1xyXG4gICAgdGhpcy5tZXNoLm1hdGVyaWFsID0gdGhpcy5ob3Zlck1hdGVyaWFsO1xyXG4gICAgaWYgKGN1cnNvci50eXBlID09PSBcImZpbmdlci1jdXJzb3JcIikge1xyXG4gICAgICB0aGlzLm9uRG93bihfLCBjdXJzb3IpO1xyXG4gICAgfVxyXG5cclxuICAgIGhhcHRpY0ZlZWRiYWNrKGN1cnNvci5vYmplY3QsIDAuNSwgNTApO1xyXG4gIH07XHJcblxyXG4gIG9uRG93biA9IChfLCBjdXJzb3IpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKFwiQnV0dG9uIHByZXNzZWRcIik7XHJcbiAgICB0aGlzLnNvdW5kQ2xpY2sucGxheSgpO1xyXG4gICAgdGhpcy5idXR0b25NZXNoT2JqZWN0LnRyYW5zbGF0ZShbMC4wLCAtMC4xLCAwLjBdKTtcclxuICAgIGhhcHRpY0ZlZWRiYWNrKGN1cnNvci5vYmplY3QsIDEuMCwgMjApO1xyXG5cclxuICAgIC8vIFRyaWdnZXIgdGhlIGpvaW5PckNyZWF0ZSBtZXRob2QgZnJvbSBDb2x5c2V1c0NsaWVudFxyXG4gICAgbGV0IGNvbHlzZXVzQ2xpZW50ID0gdGhpcy5vYmplY3QuZ2V0Q29tcG9uZW50KENvbHlzZXVzQ2xpZW50KTtcclxuICAgIGlmICghY29seXNldXNDbGllbnQpIHtcclxuICAgICAgY29seXNldXNDbGllbnQgPSB0aGlzLm9iamVjdC5wYXJlbnQuZ2V0Q29tcG9uZW50KENvbHlzZXVzQ2xpZW50KTtcclxuICAgIH1cclxuICAgIGlmIChjb2x5c2V1c0NsaWVudCkge1xyXG4gICAgICBjb2x5c2V1c0NsaWVudC5vbkpvaW5DbGljaygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkNvbHlzZXVzQ2xpZW50IGNvbXBvbmVudCBub3QgZm91bmQhXCIpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIG9uVXAgPSAoXywgY3Vyc29yKSA9PiB7XHJcbiAgICB0aGlzLnNvdW5kVW5DbGljay5wbGF5KCk7XHJcbiAgICB0aGlzLmJ1dHRvbk1lc2hPYmplY3Quc2V0VHJhbnNsYXRpb25Mb2NhbCh0aGlzLnJldHVyblBvcyk7XHJcbiAgICBoYXB0aWNGZWVkYmFjayhjdXJzb3Iub2JqZWN0LCAwLjcsIDIwKTtcclxuICB9O1xyXG5cclxuICBvblVuaG92ZXIgPSAoXywgY3Vyc29yKSA9PiB7XHJcbiAgICB0aGlzLm1lc2gubWF0ZXJpYWwgPSB0aGlzLmRlZmF1bHRNYXRlcmlhbDtcclxuICAgIGlmIChjdXJzb3IudHlwZSA9PT0gXCJmaW5nZXItY3Vyc29yXCIpIHtcclxuICAgICAgdGhpcy5vblVwKF8sIGN1cnNvcik7XHJcbiAgICB9XHJcblxyXG4gICAgaGFwdGljRmVlZGJhY2soY3Vyc29yLm9iamVjdCwgMC4zLCA1MCk7XHJcbiAgfTtcclxufVxyXG4iLCAiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dENvbXBvbmVudCwgTWVzaENvbXBvbmVudCwgUHJvcGVydHkgfSBmcm9tIFwiQHdvbmRlcmxhbmRlbmdpbmUvYXBpXCI7XHJcbmltcG9ydCB7IEN1cnNvclRhcmdldCwgSG93bGVyQXVkaW9Tb3VyY2UgfSBmcm9tIFwiQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50c1wiO1xyXG5pbXBvcnQgeyBDb2x5c2V1c0NsaWVudCB9IGZyb20gXCIuL2NvbHlzZXVzLWNsaWVudFwiOyAvLyBFbnN1cmUgdGhlIGNvcnJlY3QgcGF0aCB0byBjb2x5c2V1cy1jbGllbnQuanNcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoYXB0aWNGZWVkYmFjayhvYmplY3QsIHN0cmVuZ3RoLCBkdXJhdGlvbikge1xyXG4gIGNvbnN0IGlucHV0ID0gb2JqZWN0LmdldENvbXBvbmVudChJbnB1dENvbXBvbmVudCk7XHJcbiAgaWYgKGlucHV0ICYmIGlucHV0LnhySW5wdXRTb3VyY2UpIHtcclxuICAgIGNvbnN0IGdhbWVwYWQgPSBpbnB1dC54cklucHV0U291cmNlLmdhbWVwYWQ7XHJcbiAgICBpZiAoZ2FtZXBhZCAmJiBnYW1lcGFkLmhhcHRpY0FjdHVhdG9ycykgZ2FtZXBhZC5oYXB0aWNBY3R1YXRvcnNbMF0ucHVsc2Uoc3RyZW5ndGgsIGR1cmF0aW9uKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBCdXR0b25Db21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gIHN0YXRpYyBUeXBlTmFtZSA9IFwiYnV0dG9uTGVhdmVcIjtcclxuICBzdGF0aWMgUHJvcGVydGllcyA9IHtcclxuICAgIGJ1dHRvbk1lc2hPYmplY3Q6IFByb3BlcnR5Lm9iamVjdCgpLFxyXG4gICAgaG92ZXJNYXRlcmlhbDogUHJvcGVydHkubWF0ZXJpYWwoKSxcclxuICB9O1xyXG5cclxuICBzdGF0aWMgb25SZWdpc3RlcihlbmdpbmUpIHtcclxuICAgIGVuZ2luZS5yZWdpc3RlckNvbXBvbmVudChIb3dsZXJBdWRpb1NvdXJjZSk7XHJcbiAgICBlbmdpbmUucmVnaXN0ZXJDb21wb25lbnQoQ3Vyc29yVGFyZ2V0KTtcclxuICB9XHJcblxyXG4gIHJldHVyblBvcyA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XHJcblxyXG4gIHN0YXJ0KCkge1xyXG4gICAgdGhpcy5tZXNoID0gdGhpcy5idXR0b25NZXNoT2JqZWN0LmdldENvbXBvbmVudChNZXNoQ29tcG9uZW50KTtcclxuICAgIHRoaXMuZGVmYXVsdE1hdGVyaWFsID0gdGhpcy5tZXNoLm1hdGVyaWFsO1xyXG4gICAgdGhpcy5idXR0b25NZXNoT2JqZWN0LmdldFRyYW5zbGF0aW9uTG9jYWwodGhpcy5yZXR1cm5Qb3MpO1xyXG5cclxuICAgIHRoaXMudGFyZ2V0ID0gdGhpcy5vYmplY3QuZ2V0Q29tcG9uZW50KEN1cnNvclRhcmdldCkgfHwgdGhpcy5vYmplY3QuYWRkQ29tcG9uZW50KEN1cnNvclRhcmdldCk7XHJcblxyXG4gICAgdGhpcy5zb3VuZENsaWNrID0gdGhpcy5vYmplY3QuYWRkQ29tcG9uZW50KEhvd2xlckF1ZGlvU291cmNlLCB7XHJcbiAgICAgIHNyYzogXCJzZngvY2xpY2sud2F2XCIsXHJcbiAgICAgIHNwYXRpYWw6IHRydWUsXHJcbiAgICB9KTtcclxuICAgIHRoaXMuc291bmRVbkNsaWNrID0gdGhpcy5vYmplY3QuYWRkQ29tcG9uZW50KEhvd2xlckF1ZGlvU291cmNlLCB7XHJcbiAgICAgIHNyYzogXCJzZngvdW5jbGljay53YXZcIixcclxuICAgICAgc3BhdGlhbDogdHJ1ZSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgb25BY3RpdmF0ZSgpIHtcclxuICAgIHRoaXMudGFyZ2V0Lm9uSG92ZXIuYWRkKHRoaXMub25Ib3Zlcik7XHJcbiAgICB0aGlzLnRhcmdldC5vblVuaG92ZXIuYWRkKHRoaXMub25VbmhvdmVyKTtcclxuICAgIHRoaXMudGFyZ2V0Lm9uRG93bi5hZGQodGhpcy5vbkRvd24pO1xyXG4gICAgdGhpcy50YXJnZXQub25VcC5hZGQodGhpcy5vblVwKTtcclxuICB9XHJcblxyXG4gIG9uRGVhY3RpdmF0ZSgpIHtcclxuICAgIHRoaXMudGFyZ2V0Lm9uSG92ZXIucmVtb3ZlKHRoaXMub25Ib3Zlcik7XHJcbiAgICB0aGlzLnRhcmdldC5vblVuaG92ZXIucmVtb3ZlKHRoaXMub25VbmhvdmVyKTtcclxuICAgIHRoaXMudGFyZ2V0Lm9uRG93bi5yZW1vdmUodGhpcy5vbkRvd24pO1xyXG4gICAgdGhpcy50YXJnZXQub25VcC5yZW1vdmUodGhpcy5vblVwKTtcclxuICB9XHJcblxyXG4gIG9uSG92ZXIgPSAoXywgY3Vyc29yKSA9PiB7XHJcbiAgICB0aGlzLm1lc2gubWF0ZXJpYWwgPSB0aGlzLmhvdmVyTWF0ZXJpYWw7XHJcbiAgICBpZiAoY3Vyc29yLnR5cGUgPT09IFwiZmluZ2VyLWN1cnNvclwiKSB7XHJcbiAgICAgIHRoaXMub25Eb3duKF8sIGN1cnNvcik7XHJcbiAgICB9XHJcblxyXG4gICAgaGFwdGljRmVlZGJhY2soY3Vyc29yLm9iamVjdCwgMC41LCA1MCk7XHJcbiAgfTtcclxuXHJcbiAgb25Eb3duID0gKF8sIGN1cnNvcikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coXCJCdXR0b24gcHJlc3NlZFwiKTtcclxuICAgIHRoaXMuc291bmRDbGljay5wbGF5KCk7XHJcbiAgICB0aGlzLmJ1dHRvbk1lc2hPYmplY3QudHJhbnNsYXRlKFswLjAsIC0wLjEsIDAuMF0pO1xyXG4gICAgaGFwdGljRmVlZGJhY2soY3Vyc29yLm9iamVjdCwgMS4wLCAyMCk7XHJcblxyXG4gICAgLy8gVHJpZ2dlciB0aGUgam9pbk9yQ3JlYXRlIG1ldGhvZCBmcm9tIENvbHlzZXVzQ2xpZW50XHJcbiAgICBsZXQgY29seXNldXNDbGllbnQgPSB0aGlzLm9iamVjdC5nZXRDb21wb25lbnQoQ29seXNldXNDbGllbnQpO1xyXG4gICAgaWYgKCFjb2x5c2V1c0NsaWVudCkge1xyXG4gICAgICBjb2x5c2V1c0NsaWVudCA9IHRoaXMub2JqZWN0LnBhcmVudC5nZXRDb21wb25lbnQoQ29seXNldXNDbGllbnQpO1xyXG4gICAgfVxyXG4gICAgaWYgKGNvbHlzZXVzQ2xpZW50KSB7XHJcbiAgICAgIGNvbHlzZXVzQ2xpZW50Lm9uTGVhdmVDbGljaygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkNvbHlzZXVzQ2xpZW50IGNvbXBvbmVudCBub3QgZm91bmQhXCIpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIG9uVXAgPSAoXywgY3Vyc29yKSA9PiB7XHJcbiAgICB0aGlzLnNvdW5kVW5DbGljay5wbGF5KCk7XHJcbiAgICB0aGlzLmJ1dHRvbk1lc2hPYmplY3Quc2V0VHJhbnNsYXRpb25Mb2NhbCh0aGlzLnJldHVyblBvcyk7XHJcbiAgICBoYXB0aWNGZWVkYmFjayhjdXJzb3Iub2JqZWN0LCAwLjcsIDIwKTtcclxuICB9O1xyXG5cclxuICBvblVuaG92ZXIgPSAoXywgY3Vyc29yKSA9PiB7XHJcbiAgICB0aGlzLm1lc2gubWF0ZXJpYWwgPSB0aGlzLmRlZmF1bHRNYXRlcmlhbDtcclxuICAgIGlmIChjdXJzb3IudHlwZSA9PT0gXCJmaW5nZXItY3Vyc29yXCIpIHtcclxuICAgICAgdGhpcy5vblVwKF8sIGN1cnNvcik7XHJcbiAgICB9XHJcblxyXG4gICAgaGFwdGljRmVlZGJhY2soY3Vyc29yLm9iamVjdCwgMC4zLCA1MCk7XHJcbiAgfTtcclxufVxyXG4iLCAiaW1wb3J0IHsgQ29tcG9uZW50LCBUeXBlIH0gZnJvbSBcIkB3b25kZXJsYW5kZW5naW5lL2FwaVwiO1xuXG5leHBvcnQgY2xhc3MgTmV0d29ya0NvbnRyb2xsZXIgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9IFwibmV0d29yay1jb250cm9sbGVyXCI7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICAgIHNwaGVyZTogeyB0eXBlOiBUeXBlLk9iamVjdCB9LFxuICAgICAgICBib3g6IHsgdHlwZTogVHlwZS5PYmplY3QgfSxcbiAgICAgICAgY29uZTogeyB0eXBlOiBUeXBlLk9iamVjdCB9LFxuICAgICAgICBjb2x5c2V1c09iamVjdDogeyB0eXBlOiBUeXBlLk9iamVjdCB9LFxuICAgICAgICBzcGVlZDogeyB0eXBlOiBUeXBlLkZsb2F0LCBkZWZhdWx0OiAwLjEgfSxcbiAgICB9O1xuXG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLCB0aGlzLm9uS2V5UHJlc3MuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuY3VycmVudE9iamVjdCA9IFwiYm94XCI7XG4gICAgICAgIHRoaXMuY29seXNldXNDb21wb25lbnQgPSB0aGlzLmNvbHlzZXVzT2JqZWN0LmdldENvbXBvbmVudChcImNvbHlzZXVzLWNsaWVudFwiLCAwKTtcbiAgICAgICAgdGhpcy5uZXR3b3JrQXJyYXkgPSBbMCwgMCwgMF07XG5cbiAgICAgICAgdGhpcy51cCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJpZ2h0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZG93biA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxlZnQgPSBmYWxzZTtcblxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5wcmVzcy5iaW5kKHRoaXMpKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLnJlbGVhc2UuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgb25LZXlQcmVzcyhlKSB7XG4gICAgICAgIGNvbnN0IGJveENvbnRyb2xzID0gdGhpcy5ib3ggPyB0aGlzLmJveC5nZXRDb21wb25lbnQoJ3dhc2QtY29udHJvbHMnLCAwKSA6IG51bGw7XG4gICAgICAgIGNvbnN0IGNvbmVDb250cm9scyA9IHRoaXMuY29uZSA/IHRoaXMuY29uZS5nZXRDb21wb25lbnQoJ3dhc2QtY29udHJvbHMnLCAwKSA6IG51bGw7XG4gICAgICAgIGNvbnN0IHNwaGVyZUNvbnRyb2xzID0gdGhpcy5zcGhlcmUgPyB0aGlzLnNwaGVyZS5nZXRDb21wb25lbnQoJ3dhc2QtY29udHJvbHMnLCAwKSA6IG51bGw7XG5cbiAgICAgICAgc3dpdGNoIChlLmNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJLZXlCXCI6XG4gICAgICAgICAgICAgICAgaWYgKGJveENvbnRyb2xzKSBib3hDb250cm9scy5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChjb25lQ29udHJvbHMpIGNvbmVDb250cm9scy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoc3BoZXJlQ29udHJvbHMpIHNwaGVyZUNvbnRyb2xzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudE9iamVjdCA9IFwiYm94XCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiS2V5TlwiOlxuICAgICAgICAgICAgICAgIGlmIChib3hDb250cm9scykgYm94Q29udHJvbHMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmVDb250cm9scykgY29uZUNvbnRyb2xzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmIChzcGhlcmVDb250cm9scykgc3BoZXJlQ29udHJvbHMuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRPYmplY3QgPSBcInNwaGVyZVwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIktleU1cIjpcbiAgICAgICAgICAgICAgICBpZiAoYm94Q29udHJvbHMpIGJveENvbnRyb2xzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmIChjb25lQ29udHJvbHMpIGNvbmVDb250cm9scy5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChzcGhlcmVDb250cm9scykgc3BoZXJlQ29udHJvbHMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50T2JqZWN0ID0gXCJjb25lXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiS2V5QVwiOlxuICAgICAgICAgICAgY2FzZSBcIktleVNcIjpcbiAgICAgICAgICAgIGNhc2UgXCJLZXlXXCI6XG4gICAgICAgICAgICBjYXNlIFwiS2V5RFwiOlxuICAgICAgICAgICAgICAgIHRoaXMubW92ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIGlmICh0aGlzLmNvbHlzZXVzQ29tcG9uZW50ICYmIHRoaXMuY29seXNldXNDb21wb25lbnQucm9vbSkge1xuICAgICAgICAgICAgdGhpcy5uZXR3b3JrQXJyYXkgPSBbMCwgMCwgMF07XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnVwKSB0aGlzLm5ldHdvcmtBcnJheVsyXSAtPSAxLjA7XG4gICAgICAgICAgICBpZiAodGhpcy5kb3duKSB0aGlzLm5ldHdvcmtBcnJheVsyXSArPSAxLjA7XG4gICAgICAgICAgICBpZiAodGhpcy5sZWZ0KSB0aGlzLm5ldHdvcmtBcnJheVswXSAtPSAxLjA7XG4gICAgICAgICAgICBpZiAodGhpcy5yaWdodCkgdGhpcy5uZXR3b3JrQXJyYXlbMF0gKz0gMS4wO1xuXG4gICAgICAgICAgICB0aGlzLm5ldHdvcmtBcnJheVswXSAqPSB0aGlzLnNwZWVkO1xuICAgICAgICAgICAgdGhpcy5uZXR3b3JrQXJyYXlbMl0gKj0gdGhpcy5zcGVlZDtcbiAgICAgICAgICAgIGlmICh0aGlzLm5ldHdvcmtBcnJheS54ICE9IDAgJiYgdGhpcy5uZXR3b3JrQXJyYXkueiAhPSAwKVxuICAgICAgICAgICAgICAgIHRoaXMuY29seXNldXNDb21wb25lbnQucm9vbS5zZW5kKFwibW92ZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdDogdGhpcy5jdXJyZW50T2JqZWN0LFxuICAgICAgICAgICAgICAgICAgICB4OiB0aGlzLm5ldHdvcmtBcnJheVswXSxcbiAgICAgICAgICAgICAgICAgICAgejogdGhpcy5uZXR3b3JrQXJyYXlbMl0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcmVzcyhlKSB7XG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IDM4IC8qIHVwICovIHx8IGUua2V5Q29kZSA9PT0gODcgLyogdyAqLyB8fCBlLmtleUNvZGUgPT09IDkwIC8qIHogKi8pIHtcbiAgICAgICAgICAgIHRoaXMudXAgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gMzkgLyogcmlnaHQgKi8gfHwgZS5rZXlDb2RlID09PSA2OCAvKiBkICovKSB7XG4gICAgICAgICAgICB0aGlzLnJpZ2h0ID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT09IDQwIC8qIGRvd24gKi8gfHwgZS5rZXlDb2RlID09PSA4MyAvKiBzICovKSB7XG4gICAgICAgICAgICB0aGlzLmRvd24gPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gMzcgLyogbGVmdCAqLyB8fCBlLmtleUNvZGUgPT09IDY1IC8qIGEgKi8gfHwgZS5rZXlDb2RlID09PSA4MSAvKiBxICovKSB7XG4gICAgICAgICAgICB0aGlzLmxlZnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVsZWFzZShlKSB7XG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IDM4IC8qIHVwICovIHx8IGUua2V5Q29kZSA9PT0gODcgLyogdyAqLyB8fCBlLmtleUNvZGUgPT09IDkwIC8qIHogKi8pIHtcbiAgICAgICAgICAgIHRoaXMudXAgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT09IDM5IC8qIHJpZ2h0ICovIHx8IGUua2V5Q29kZSA9PT0gNjggLyogZCAqLykge1xuICAgICAgICAgICAgdGhpcy5yaWdodCA9IGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gNDAgLyogZG93biAqLyB8fCBlLmtleUNvZGUgPT09IDgzIC8qIHMgKi8pIHtcbiAgICAgICAgICAgIHRoaXMuZG93biA9IGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gMzcgLyogbGVmdCAqLyB8fCBlLmtleUNvZGUgPT09IDY1IC8qIGEgKi8gfHwgZS5rZXlDb2RlID09PSA4MSAvKiBxICovKSB7XG4gICAgICAgICAgICB0aGlzLmxlZnQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsICJpbXBvcnQgKiBhcyBfX3dvbmRlcmxhbmRlbmdpbmVfY29tcG9uZW50cyBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzJztcbl9yZWdpc3RlckVkaXRvcihfX3dvbmRlcmxhbmRlbmdpbmVfY29tcG9uZW50cyk7XG5pbXBvcnQgKiBhcyBfQ19fU2FmZUZpbGVfRG9jdW1lbnRzX1dvbmRlcmxhbmRFbmdpbmVfY29seXNldXNfanNfYnV0dG9uQ3JlYXRlX2pzIGZyb20gJ0M6L1NhZmVGaWxlL0RvY3VtZW50cy9Xb25kZXJsYW5kRW5naW5lL2NvbHlzZXVzL2pzL2J1dHRvbkNyZWF0ZS5qcyc7XG5fcmVnaXN0ZXJFZGl0b3IoX0NfX1NhZmVGaWxlX0RvY3VtZW50c19Xb25kZXJsYW5kRW5naW5lX2NvbHlzZXVzX2pzX2J1dHRvbkNyZWF0ZV9qcyk7XG5pbXBvcnQgKiBhcyBfQ19fU2FmZUZpbGVfRG9jdW1lbnRzX1dvbmRlcmxhbmRFbmdpbmVfY29seXNldXNfanNfYnV0dG9uSm9pbl9qcyBmcm9tICdDOi9TYWZlRmlsZS9Eb2N1bWVudHMvV29uZGVybGFuZEVuZ2luZS9jb2x5c2V1cy9qcy9idXR0b25Kb2luLmpzJztcbl9yZWdpc3RlckVkaXRvcihfQ19fU2FmZUZpbGVfRG9jdW1lbnRzX1dvbmRlcmxhbmRFbmdpbmVfY29seXNldXNfanNfYnV0dG9uSm9pbl9qcyk7XG5pbXBvcnQgKiBhcyBfQ19fU2FmZUZpbGVfRG9jdW1lbnRzX1dvbmRlcmxhbmRFbmdpbmVfY29seXNldXNfanNfYnV0dG9uTGVhdmVfanMgZnJvbSAnQzovU2FmZUZpbGUvRG9jdW1lbnRzL1dvbmRlcmxhbmRFbmdpbmUvY29seXNldXMvanMvYnV0dG9uTGVhdmUuanMnO1xuX3JlZ2lzdGVyRWRpdG9yKF9DX19TYWZlRmlsZV9Eb2N1bWVudHNfV29uZGVybGFuZEVuZ2luZV9jb2x5c2V1c19qc19idXR0b25MZWF2ZV9qcyk7XG5pbXBvcnQgKiBhcyBfQ19fU2FmZUZpbGVfRG9jdW1lbnRzX1dvbmRlcmxhbmRFbmdpbmVfY29seXNldXNfanNfY29seXNldXNfY2xpZW50X2pzIGZyb20gJ0M6L1NhZmVGaWxlL0RvY3VtZW50cy9Xb25kZXJsYW5kRW5naW5lL2NvbHlzZXVzL2pzL2NvbHlzZXVzLWNsaWVudC5qcyc7XG5fcmVnaXN0ZXJFZGl0b3IoX0NfX1NhZmVGaWxlX0RvY3VtZW50c19Xb25kZXJsYW5kRW5naW5lX2NvbHlzZXVzX2pzX2NvbHlzZXVzX2NsaWVudF9qcyk7XG5pbXBvcnQgKiBhcyBfQ19fU2FmZUZpbGVfRG9jdW1lbnRzX1dvbmRlcmxhbmRFbmdpbmVfY29seXNldXNfanNfbmV0d29ya19jb250cm9sbGVyX2pzIGZyb20gJ0M6L1NhZmVGaWxlL0RvY3VtZW50cy9Xb25kZXJsYW5kRW5naW5lL2NvbHlzZXVzL2pzL25ldHdvcmstY29udHJvbGxlci5qcyc7XG5fcmVnaXN0ZXJFZGl0b3IoX0NfX1NhZmVGaWxlX0RvY3VtZW50c19Xb25kZXJsYW5kRW5naW5lX2NvbHlzZXVzX2pzX25ldHdvcmtfY29udHJvbGxlcl9qcyk7XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQVVBLE9BQUMsV0FBVztBQUVWO0FBU0EsWUFBSUEsZ0JBQWUsV0FBVztBQUM1QixlQUFLLEtBQUs7QUFBQSxRQUNaO0FBQ0EsUUFBQUEsY0FBYSxZQUFZO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQUt2QixNQUFNLFdBQVc7QUFDZixnQkFBSUMsUUFBTyxRQUFRQztBQUduQixZQUFBRCxNQUFLLFdBQVc7QUFHaEIsWUFBQUEsTUFBSyxrQkFBa0IsQ0FBQztBQUN4QixZQUFBQSxNQUFLLGdCQUFnQjtBQUdyQixZQUFBQSxNQUFLLFVBQVUsQ0FBQztBQUNoQixZQUFBQSxNQUFLLFNBQVMsQ0FBQztBQUNmLFlBQUFBLE1BQUssU0FBUztBQUNkLFlBQUFBLE1BQUssVUFBVTtBQUNmLFlBQUFBLE1BQUssZ0JBQWdCO0FBQ3JCLFlBQUFBLE1BQUssYUFBYyxPQUFPLFdBQVcsZUFBZSxPQUFPLFlBQWEsT0FBTyxZQUFZO0FBRzNGLFlBQUFBLE1BQUssYUFBYTtBQUNsQixZQUFBQSxNQUFLLFVBQVU7QUFDZixZQUFBQSxNQUFLLGdCQUFnQjtBQUNyQixZQUFBQSxNQUFLLGNBQWM7QUFDbkIsWUFBQUEsTUFBSyxNQUFNO0FBR1gsWUFBQUEsTUFBSyxhQUFhO0FBR2xCLFlBQUFBLE1BQUssT0FBTztBQUVaLG1CQUFPQTtBQUFBLFVBQ1Q7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFPQSxRQUFRLFNBQVMsS0FBSztBQUNwQixnQkFBSUEsUUFBTyxRQUFRQztBQUNuQixrQkFBTSxX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QUk7QUFDVCxVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLEVBQUUsSUFBSTtBQUNWLFVBQUksRUFBRSxJQUFJO0FBQ1YsVUFBSSxFQUFFLElBQUk7QUFDVixVQUFJLEVBQUUsSUFBSTtBQUFBLElBQ1o7QUFFQSxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFdBQU87QUFBQSxFQUNUO0FBUU8sV0FBUyxNQUFNLEdBQUc7QUFDdkIsUUFBSSxNQUFNLElBQWEsV0FBVyxFQUFFO0FBQ3BDLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFdBQU87QUFBQSxFQUNUO0FBU08sV0FBUyxLQUFLLEtBQUssR0FBRztBQUMzQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxXQUFPO0FBQUEsRUFDVDtBQXVCTyxXQUFTLFdBQVcsS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUN6RyxRQUFJLE1BQU0sSUFBYSxXQUFXLEVBQUU7QUFDcEMsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixXQUFPO0FBQUEsRUFDVDtBQXdCTyxXQUFTLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO0FBQ3ZHLFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsV0FBTztBQUFBLEVBQ1Q7QUFRTyxXQUFTLFNBQVMsS0FBSztBQUM1QixRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFdBQU87QUFBQSxFQUNUO0FBU08sV0FBUyxVQUFVLEtBQUssR0FBRztBQUVoQyxRQUFJLFFBQVEsR0FBRztBQUNiLFVBQUksTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDO0FBQ2IsVUFBSSxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDO0FBQ2IsVUFBSSxNQUFNLEVBQUUsRUFBRTtBQUNkLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNiLFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osVUFBSSxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2IsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJO0FBQ1YsVUFBSSxFQUFFLElBQUk7QUFDVixVQUFJLEVBQUUsSUFBSTtBQUFBLElBQ1osT0FBTztBQUNMLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNiLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNiLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQztBQUNiLFVBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQztBQUNiLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUFBLElBQ2hCO0FBRUEsV0FBTztBQUFBLEVBQ1Q7QUFTTyxXQUFTLE9BQU8sS0FBSyxHQUFHO0FBQzdCLFFBQUksTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUM7QUFDYixRQUFJLE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDO0FBQ2IsUUFBSSxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRTtBQUNkLFFBQUksTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUU7QUFDZCxRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUU1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBRTVFLFFBQUksQ0FBQyxLQUFLO0FBQ1IsYUFBTztBQUFBLElBQ1Q7QUFFQSxVQUFNLElBQU07QUFDWixRQUFJLENBQUMsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxRQUFJLENBQUMsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxRQUFJLENBQUMsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxRQUFJLENBQUMsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxRQUFJLENBQUMsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxRQUFJLENBQUMsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxRQUFJLENBQUMsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxRQUFJLENBQUMsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxRQUFJLENBQUMsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxRQUFJLENBQUMsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxRQUFJLEVBQUUsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUNoRCxRQUFJLEVBQUUsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUNoRCxRQUFJLEVBQUUsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUNoRCxRQUFJLEVBQUUsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUNoRCxRQUFJLEVBQUUsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUNoRCxRQUFJLEVBQUUsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUNoRCxXQUFPO0FBQUEsRUFDVDtBQVNPLFdBQVMsUUFBUSxLQUFLLEdBQUc7QUFDOUIsUUFBSSxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQztBQUNiLFFBQUksTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUM7QUFDYixRQUFJLE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFO0FBQ2QsUUFBSSxNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRTtBQUNkLFFBQUksQ0FBQyxJQUFJLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNsRyxRQUFJLENBQUMsSUFBSSxFQUFFLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNwRyxRQUFJLENBQUMsSUFBSSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDbEcsUUFBSSxDQUFDLElBQUksRUFBRSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDcEcsUUFBSSxDQUFDLElBQUksRUFBRSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDcEcsUUFBSSxDQUFDLElBQUksT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ2xHLFFBQUksQ0FBQyxJQUFJLEVBQUUsT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ3BHLFFBQUksQ0FBQyxJQUFJLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNsRyxRQUFJLENBQUMsSUFBSSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDbEcsUUFBSSxDQUFDLElBQUksRUFBRSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDcEcsUUFBSSxFQUFFLElBQUksT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ25HLFFBQUksRUFBRSxJQUFJLEVBQUUsT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ3JHLFFBQUksRUFBRSxJQUFJLEVBQUUsT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ3JHLFFBQUksRUFBRSxJQUFJLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNuRyxRQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNyRyxRQUFJLEVBQUUsSUFBSSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDbkcsV0FBTztBQUFBLEVBQ1Q7QUFRTyxXQUFTLFlBQVksR0FBRztBQUM3QixRQUFJLE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDO0FBQ2IsUUFBSSxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQztBQUNiLFFBQUksTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUU7QUFDZCxRQUFJLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFO0FBQ2QsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFFNUIsV0FBTyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFBQSxFQUMzRTtBQVVPLFdBQVMsU0FBUyxLQUFLLEdBQUcsR0FBRztBQUNsQyxRQUFJLE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDO0FBQ2IsUUFBSSxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQztBQUNiLFFBQUksTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUU7QUFDZCxRQUFJLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFO0FBRWQsUUFBSSxLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDL0MsUUFBSSxDQUFDLElBQUksS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSztBQUMvQyxRQUFJLENBQUMsSUFBSSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQy9DLFFBQUksQ0FBQyxJQUFJLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDL0MsU0FBSyxFQUFFLENBQUM7QUFDUixTQUFLLEVBQUUsQ0FBQztBQUNSLFNBQUssRUFBRSxDQUFDO0FBQ1IsU0FBSyxFQUFFLENBQUM7QUFDUixRQUFJLENBQUMsSUFBSSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQy9DLFFBQUksQ0FBQyxJQUFJLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDL0MsUUFBSSxDQUFDLElBQUksS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSztBQUMvQyxRQUFJLENBQUMsSUFBSSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQy9DLFNBQUssRUFBRSxDQUFDO0FBQ1IsU0FBSyxFQUFFLENBQUM7QUFDUixTQUFLLEVBQUUsRUFBRTtBQUNULFNBQUssRUFBRSxFQUFFO0FBQ1QsUUFBSSxDQUFDLElBQUksS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSztBQUMvQyxRQUFJLENBQUMsSUFBSSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQy9DLFFBQUksRUFBRSxJQUFJLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDaEQsUUFBSSxFQUFFLElBQUksS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSztBQUNoRCxTQUFLLEVBQUUsRUFBRTtBQUNULFNBQUssRUFBRSxFQUFFO0FBQ1QsU0FBSyxFQUFFLEVBQUU7QUFDVCxTQUFLLEVBQUUsRUFBRTtBQUNULFFBQUksRUFBRSxJQUFJLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDaEQsUUFBSSxFQUFFLElBQUksS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSztBQUNoRCxRQUFJLEVBQUUsSUFBSSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQ2hELFFBQUksRUFBRSxJQUFJLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDaEQsV0FBTztBQUFBLEVBQ1Q7QUFVTyxXQUFTLFVBQVUsS0FBSyxHQUFHLEdBQUc7QUFDbkMsUUFBSSxJQUFJLEVBQUUsQ0FBQyxHQUNQLElBQUksRUFBRSxDQUFDLEdBQ1AsSUFBSSxFQUFFLENBQUM7QUFDWCxRQUFJLEtBQUssS0FBSyxLQUFLO0FBQ25CLFFBQUksS0FBSyxLQUFLLEtBQUs7QUFDbkIsUUFBSSxLQUFLLEtBQUssS0FBSztBQUVuQixRQUFJLE1BQU0sS0FBSztBQUNiLFVBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsSUFBSSxJQUFJLEVBQUUsRUFBRTtBQUMvQyxVQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLElBQUksSUFBSSxFQUFFLEVBQUU7QUFDL0MsVUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsSUFBSSxJQUFJLEVBQUUsRUFBRSxJQUFJLElBQUksRUFBRSxFQUFFO0FBQ2hELFVBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLElBQUksSUFBSSxFQUFFLEVBQUUsSUFBSSxJQUFJLEVBQUUsRUFBRTtBQUFBLElBQ2xELE9BQU87QUFDTCxZQUFNLEVBQUUsQ0FBQztBQUNULFlBQU0sRUFBRSxDQUFDO0FBQ1QsWUFBTSxFQUFFLENBQUM7QUFDVCxZQUFNLEVBQUUsQ0FBQztBQUNULFlBQU0sRUFBRSxDQUFDO0FBQ1QsWUFBTSxFQUFFLENBQUM7QUFDVCxZQUFNLEVBQUUsQ0FBQztBQUNULFlBQU0sRUFBRSxDQUFDO0FBQ1QsWUFBTSxFQUFFLENBQUM7QUFDVCxZQUFNLEVBQUUsQ0FBQztBQUNULFlBQU0sRUFBRSxFQUFFO0FBQ1YsWUFBTSxFQUFFLEVBQUU7QUFDVixVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksRUFBRSxJQUFJO0FBQ1YsVUFBSSxFQUFFLElBQUk7QUFDVixVQUFJLEVBQUUsSUFBSSxNQUFNLElBQUksTUFBTSxJQUFJLE1BQU0sSUFBSSxFQUFFLEVBQUU7QUFDNUMsVUFBSSxFQUFFLElBQUksTUFBTSxJQUFJLE1BQU0sSUFBSSxNQUFNLElBQUksRUFBRSxFQUFFO0FBQzVDLFVBQUksRUFBRSxJQUFJLE1BQU0sSUFBSSxNQUFNLElBQUksTUFBTSxJQUFJLEVBQUUsRUFBRTtBQUM1QyxVQUFJLEVBQUUsSUFBSSxNQUFNLElBQUksTUFBTSxJQUFJLE1BQU0sSUFBSSxFQUFFLEVBQUU7QUFBQSxJQUM5QztBQUVBLFdBQU87QUFBQSxFQUNUO0FBVU8sV0FBUyxNQUFNLEtBQUssR0FBRyxHQUFHO0FBQy9CLFFBQUksSUFBSSxFQUFFLENBQUMsR0FDUCxJQUFJLEVBQUUsQ0FBQyxHQUNQLElBQUksRUFBRSxDQUFDO0FBQ1gsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUk7QUFDbEIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUk7QUFDbEIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsV0FBTztBQUFBLEVBQ1Q7QUFXTyxXQUFTLE9BQU8sS0FBSyxHQUFHLEtBQUssTUFBTTtBQUN4QyxRQUFJLElBQUksS0FBSyxDQUFDLEdBQ1YsSUFBSSxLQUFLLENBQUMsR0FDVixJQUFJLEtBQUssQ0FBQztBQUNkLFFBQUlDLE9BQU0sS0FBSyxNQUFNLEdBQUcsR0FBRyxDQUFDO0FBQzVCLFFBQUksR0FBRyxHQUFHO0FBQ1YsUUFBSSxLQUFLLEtBQUssS0FBSztBQUNuQixRQUFJLEtBQUssS0FBSyxLQUFLO0FBQ25CLFFBQUksS0FBSyxLQUFLLEtBQUs7QUFDbkIsUUFBSSxLQUFLLEtBQUs7QUFDZCxRQUFJLEtBQUssS0FBSztBQUNkLFFBQUksS0FBSyxLQUFLO0FBRWQsUUFBSUEsT0FBZSxTQUFTO0FBQzFCLGFBQU87QUFBQSxJQUNUO0FBRUEsSUFBQUEsT0FBTSxJQUFJQTtBQUNWLFNBQUtBO0FBQ0wsU0FBS0E7QUFDTCxTQUFLQTtBQUNMLFFBQUksS0FBSyxJQUFJLEdBQUc7QUFDaEIsUUFBSSxLQUFLLElBQUksR0FBRztBQUNoQixRQUFJLElBQUk7QUFDUixVQUFNLEVBQUUsQ0FBQztBQUNULFVBQU0sRUFBRSxDQUFDO0FBQ1QsVUFBTSxFQUFFLENBQUM7QUFDVCxVQUFNLEVBQUUsQ0FBQztBQUNULFVBQU0sRUFBRSxDQUFDO0FBQ1QsVUFBTSxFQUFFLENBQUM7QUFDVCxVQUFNLEVBQUUsQ0FBQztBQUNULFVBQU0sRUFBRSxDQUFDO0FBQ1QsVUFBTSxFQUFFLENBQUM7QUFDVCxVQUFNLEVBQUUsQ0FBQztBQUNULFVBQU0sRUFBRSxFQUFFO0FBQ1YsVUFBTSxFQUFFLEVBQUU7QUFFVixVQUFNLElBQUksSUFBSSxJQUFJO0FBQ2xCLFVBQU0sSUFBSSxJQUFJLElBQUksSUFBSTtBQUN0QixVQUFNLElBQUksSUFBSSxJQUFJLElBQUk7QUFDdEIsVUFBTSxJQUFJLElBQUksSUFBSSxJQUFJO0FBQ3RCLFVBQU0sSUFBSSxJQUFJLElBQUk7QUFDbEIsVUFBTSxJQUFJLElBQUksSUFBSSxJQUFJO0FBQ3RCLFVBQU0sSUFBSSxJQUFJLElBQUksSUFBSTtBQUN0QixVQUFNLElBQUksSUFBSSxJQUFJLElBQUk7QUFDdEIsVUFBTSxJQUFJLElBQUksSUFBSTtBQUVsQixRQUFJLENBQUMsSUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDdkMsUUFBSSxDQUFDLElBQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQ3ZDLFFBQUksQ0FBQyxJQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUN2QyxRQUFJLENBQUMsSUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDdkMsUUFBSSxDQUFDLElBQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQ3ZDLFFBQUksQ0FBQyxJQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUN2QyxRQUFJLENBQUMsSUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDdkMsUUFBSSxDQUFDLElBQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQ3ZDLFFBQUksQ0FBQyxJQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUN2QyxRQUFJLENBQUMsSUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDdkMsUUFBSSxFQUFFLElBQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQ3hDLFFBQUksRUFBRSxJQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUV4QyxRQUFJLE1BQU0sS0FBSztBQUViLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUFBLElBQ2hCO0FBRUEsV0FBTztBQUFBLEVBQ1Q7QUFVTyxXQUFTLFFBQVEsS0FBSyxHQUFHLEtBQUs7QUFDbkMsUUFBSSxJQUFJLEtBQUssSUFBSSxHQUFHO0FBQ3BCLFFBQUksSUFBSSxLQUFLLElBQUksR0FBRztBQUNwQixRQUFJLE1BQU0sRUFBRSxDQUFDO0FBQ2IsUUFBSSxNQUFNLEVBQUUsQ0FB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LFFBQUksTUFBTSxFQUFFLENBQUM7QUFDYixRQUFJLE1BQU0sRUFBRSxDQUFDO0FBQ2IsUUFBSSxNQUFNLEVBQUUsQ0FBQztBQUNiLFFBQUksTUFBTSxFQUFFLENBQUM7QUFFYixRQUFJLE1BQU0sS0FBSztBQUViLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUFBLElBQ2hCO0FBR0EsUUFBSSxDQUFDLElBQUksTUFBTSxJQUFJLE1BQU07QUFDekIsUUFBSSxDQUFDLElBQUksTUFBTSxJQUFJLE1BQU07QUFDekIsUUFBSSxDQUFDLElBQUksTUFBTSxJQUFJLE1BQU07QUFDekIsUUFBSSxDQUFDLElBQUksTUFBTSxJQUFJLE1BQU07QUFDekIsUUFBSSxDQUFDLElBQUksTUFBTSxJQUFJLE1BQU07QUFDekIsUUFBSSxDQUFDLElBQUksTUFBTSxJQUFJLE1BQU07QUFDekIsUUFBSSxDQUFDLElBQUksTUFBTSxJQUFJLE1BQU07QUFDekIsUUFBSSxDQUFDLElBQUksTUFBTSxJQUFJLE1BQU07QUFDekIsV0FBTztBQUFBLEVBQ1Q7QUFhTyxXQUFTLGdCQUFnQixLQUFLLEdBQUc7QUFDdEMsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUksRUFBRSxDQUFDO0FBQ2IsUUFBSSxFQUFFLElBQUksRUFBRSxDQUFDO0FBQ2IsUUFBSSxFQUFFLElBQUksRUFBRSxDQUFDO0FBQ2IsUUFBSSxFQUFFLElBQUk7QUFDVixXQUFPO0FBQUEsRUFDVDtBQWFPLFdBQVMsWUFBWSxLQUFLLEdBQUc7QUFDbEMsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQztBQUNiLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixXQUFPO0FBQUEsRUFDVDtBQWNPLFdBQVMsYUFBYSxLQUFLLEtBQUssTUFBTTtBQUMzQyxRQUFJLElBQUksS0FBSyxDQUFDLEdBQ1YsSUFBSSxLQUFLLENBQUMsR0FDVixJQUFJLEtBQUssQ0FBQztBQUNkLFFBQUlBLE9BQU0sS0FBSyxNQUFNLEdBQUcsR0FBRyxDQUFDO0FBQzVCLFFBQUksR0FBRyxHQUFHO0FBRVYsUUFBSUEsT0FBZSxTQUFTO0FBQzFCLGFBQU87QUFBQSxJQUNUO0FBRUEsSUFBQUEsT0FBTSxJQUFJQTtBQUNWLFNBQUtBO0FBQ0wsU0FBS0E7QUFDTCxTQUFLQTtBQUNMLFFBQUksS0FBSyxJQUFJLEdBQUc7QUFDaEIsUUFBSSxLQUFLLElBQUksR0FBRztBQUNoQixRQUFJLElBQUk7QUFFUixRQUFJLENBQUMsSUFBSSxJQUFJLElBQUksSUFBSTtBQUNyQixRQUFJLENBQUMsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJO0FBQ3pCLFFBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxJQUFJLElBQUk7QUFDekIsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJO0FBQ3pCLFFBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxJQUFJO0FBQ3JCLFFBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxJQUFJLElBQUk7QUFDekIsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJO0FBQ3pCLFFBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxJQUFJLElBQUk7QUFDekIsUUFBSSxFQUFFLElBQUksSUFBSSxJQUFJLElBQUk7QUFDdEIsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFdBQU87QUFBQSxFQUNUO0FBYU8sV0FBUyxjQUFjLEtBQUssS0FBSztBQUN0QyxRQUFJLElBQUksS0FBSyxJQUFJLEdBQUc7QUFDcEIsUUFBSSxJQUFJLEtBQUssSUFBSSxHQUFHO0FBRXBCLFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJLENBQUM7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FB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T0FBTyxFQUFFLEVBQUUsSUFBSTtBQUFBLEVBQ2xQO0FBUU8sV0FBUyxLQUFLLEdBQUc7QUFDdEIsV0FBTyxLQUFLLE1BQU0sRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUM7QUFBQSxFQUN4SDtBQVVPLFdBQVMsSUFBSSxLQUFLLEdBQUcsR0FBRztBQUM3QixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ3RCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUN0QixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDdEIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ3RCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUN0QixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDdEIsV0FBTztBQUFBLEVBQ1Q7QUFVTyxXQUFTLFNBQVMsS0FBSyxHQUFHLEdBQUc7QUFDbEMsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUN0QixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDdEIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ3RCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUN0QixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDdEIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ3RCLFdBQU87QUFBQSxFQUNUO0FBVU8sV0FBUyxlQUFlLEtBQUssR0FBRyxHQUFHO0FBQ3hDLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJO0FBQ2xCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJO0FBQ2xCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJO0FBQ2xCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJO0FBQ2xCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJO0FBQ2xCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJO0FBQ2xCLFdBQU87QUFBQSxFQUNUO0FBV08sV0FBUyxxQkFBcUIsS0FBSyxHQUFHLEdBQUdDLFFBQU87QUFDckQsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUlBO0FBQ3ZCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJQTtBQUN2QixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSUE7QUFDdkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUlBO0FBQ3ZCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJQTtBQUN2QixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSUE7QUFDdkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUlBO0FBQ3ZCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJQTtBQUN2QixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSUE7QUFDdkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUlBO0FBQ3ZCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJQTtBQUMxQixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSUE7QUFDMUIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUlBO0FBQzFCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJQTtBQUMxQixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSUE7QUFDMUIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUlBO0FBQzFCLFdBQU87QUFBQSxFQUNUO0FBU08sV0FBUyxZQUFZLEdBQUcsR0FBRztBQUNoQyxXQUFPLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRTtBQUFBLEVBQ2hTO0FBU08sV0FBUyxPQUFPLEdBQUcsR0FBRztBQUMzQixRQUFJLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDO0FBQ1osUUFBSSxLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQztBQUNaLFFBQUksS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUU7QUFDZCxRQUFJLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFO0FBQ2QsUUFBSSxLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQztBQUNaLFFBQUksS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUM7QUFDWixRQUFJLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFO0FBQ2QsUUFBSSxNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRTtBQUNkLFdBQU8sS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLE1BQU0sR0FBRyxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEdBQUcsR0FBRyxLQUFLLElBQUksR0FBRyxDQUFDLEtBQUssS0FBSyxJQUFJLE1BQU0sR0FBRyxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEdBQUcsR0FBRyxLQUFLLElBQUksR0FBRyxDQUFDLEtBQUssS0FBSyxJQUFJLE1BQU0sR0FBRyxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEdBQUcsR0FBRyxLQUFLLElBQUksR0FBRyxDQUFDLEtBQUssS0FBSyxJQUFJLE1BQU0sR0FBRyxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEdBQUcsR0FBRyxLQUFLLElBQUksR0FBRyxDQUFDLEtBQUssS0FBSyxJQUFJLE1BQU0sR0FBRyxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEdBQUcsR0FBRyxLQUFLLElBQUksR0FBRyxDQUFDLEtBQUssS0FBSyxJQUFJLE1BQU0sR0FBRyxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEdBQUcsR0FBRyxLQUFLLElBQUksR0FBRyxDQUFDO0FBQUEsRUFDNTJDO0FBTU8sTUFBSSxNQUFNO0FBTVYsTUFBSSxNQUFNOzs7QUNyM0RqQjtBQUFBO0FBQUEsZUFBQUM7QUFBQSxJQUFBO0FBQUEsaUJBQUFDO0FBQUEsSUFBQTtBQUFBLGdCQUFBQztBQUFBLElBQUEsY0FBQUM7QUFBQSxJQUFBLFdBQUFDO0FBQUEsSUFBQSxjQUFBQztBQUFBLElBQUEsbUJBQUFDO0FBQUEsSUFBQTtBQUFBO0FBQUE7QUFBQSxzQkFBQUM7QUFB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O0FBQ1osUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUM1QyxRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO0FBQzVDLFFBQUksQ0FBQyxJQUFJLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFDNUMsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUM1QyxXQUFPO0FBQUEsRUFDVDtBQVVPLFdBQVNDLFNBQVEsS0FBSyxHQUFHLEtBQUs7QUFDbkMsV0FBTztBQUNQLFFBQUksS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUM7QUFDWixRQUFJLEtBQUssS0FBSyxJQUFJLEdBQUcsR0FDakIsS0FBSyxLQUFLLElBQUksR0FBRztBQUNyQixRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSztBQUN4QixRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSztBQUN4QixRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSztBQUN4QixRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSztBQUN4QixXQUFPO0FBQUEsRUFDVDtBQVVPLFdBQVNDLFNBQVEsS0FBSyxHQUFHLEtBQUs7QUFDbkMsV0FBTztBQUNQLFFBQUksS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUM7QUFDWixRQUFJLEtBQUssS0FBSyxJQUFJLEdBQUcsR0FDakIsS0FBSyxLQUFLLElBQUksR0FBRztBQUNyQixRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSztBQUN4QixRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSztBQUN4QixRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSztBQUN4QixRQUFJLENBQUMs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QUFTQyxLQUFJLEtBQUssSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJO0FBQ3ZELFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxXQUFPO0FBQUEsRUFDVDtBQVFPLE1BQUksVUFBZUY7QUFRbkIsV0FBUyxRQUFRLEtBQUssR0FBRztBQUM5QixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixXQUFPO0FBQUEsRUFDVDtBQVVPLE1BQUksVUFBZUE7QUFVbkIsV0FBUyxRQUFRLEtBQUssR0FBRztBQUM5QixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixXQUFPO0FBQUEsRUFDVDtBQVFPLFdBQVNHLGdCQUFlLEtBQUssR0FBRztBQUNyQyxRQUFJLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxDQUFDLEVBQUUsQ0FBQyxHQUNULEtBQUssQ0FBQyxFQUFFLENBQUMsR0FDVCxLQUFLLENBQUMsRUFBRSxDQUFDLEdBQ1QsS0FBSyxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLE1BQU07QUFDbkQsUUFBSSxDQUFDLEtBQUssS0FBSyxLQUFL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LENBQUM7QUFDVixRQUFJLENBQUMsSUFBSSxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNO0FBQ2hELFFBQUksQ0FBQyxJQUFJLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU07QUFDaEQsUUFBSSxDQUFDLElBQUksTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTTtBQUNoRCxRQUFJLENBQUMsSUFBSSxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNO0FBQ2hELFdBQU87QUFBQSxFQUNUO0FBVU8sV0FBUyxtQkFBbUIsS0FBSyxHQUFHLEdBQUc7QUFDNUMsUUFBSSxLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUM1QyxRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO0FBQzVDLFFBQUksQ0FBQyxJQUFJLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFDNUMsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUM1QyxTQUFLLEVBQUUsQ0FBQztBQUNSLFNBQUssRUFBRSxDQUFDO0FBQ1IsU0FBSyxFQUFFLENBQUM7QUFDUixTQUFLLEVBQUUsQ0FBQztBQUNSLFFBQUksQ0FBQyxJQUFJLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFDNUMsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUM1QyxRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSyxL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LEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUM1QyxXQUFPO0FBQUEsRUFDVDtBQVdPLFdBQVNRLEtBQUksS0FBSyxHQUFHLEdBQUc7QUFDN0IsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixXQUFPO0FBQUEsRUFDVDtBQVVPLFdBQVNDLFVBQVMsS0FBSyxHQUFHLEdBQUc7QUFDbEMsUUFBSSxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQztBQUNiLFFBQUksQ0FBQyxJQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDbkQsUUFBSSxDQUFDLElBQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUNuRCxRQUFJLENBQUMsSUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQ25ELFFBQUksQ0FBQyxJQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDbkQsUUFBSSxDQUFDLElBQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDbkcsUUFBSSxDQUFDLElBQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDbkcsUUFBSSxDQUFDLElBQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDbkcsUUFBSSxDQUFDLElBQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDbkcsV0FBTztBQUFBLEVBQ1Q7QUFNTyxNQUFJQyxPQUFNRDtBQVdWLFdBQVNFLE9BQU0sS0FBSyxHQUFHLEdBQUc7QUFDL0IsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsV0FBTztB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QUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUM7QUFDWixXQUFPLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQztBQUFBLEVBQzVxQjs7O0FDbDBCQSxNQUFJQyxjQUEwQyxTQUFVLFlBQVksUUFBUSxLQUFLLE1BQU07QUFDbkYsUUFBSSxJQUFJLFVBQVUsUUFBUSxJQUFJLElBQUksSUFBSSxTQUFTLFNBQVMsT0FBTyxPQUFPLE9BQU8seUJBQXlCLFFBQVEsR0FBRyxJQUFJLE1BQU07QUFDM0gsUUFBSSxPQUFPLFlBQVksWUFBWSxPQUFPLFFBQVEsYUFBYTtBQUFZLFVBQUksUUFBUSxTQUFTLFlBQVksUUFBUSxLQUFLLElBQUk7QUFBQTtBQUN4SCxlQUFTLElBQUksV0FBVyxTQUFTLEdBQUcsS0FBSyxHQUFHO0FBQUssWUFBSSxJQUFJLFdBQVcsQ0FBQztBQUFHLGVBQUssSUFBSSxJQUFJLEVBQUUsQ0FBQyxJQUFJLElBQUksSUFBSSxFQUFFLFFBQVEsS0FBSyxDQUFDLElBQUksRUFBRSxRQUFRLEdBQUcsTUFBTTtBQUNoSixXQUFPLElBQUksS0FBSyxLQUFLLE9BQU8sZUFBZSxRQUFRLEtBQUssQ0FBQyxHQUFHO0FBQUEsRUFDaEU7QUFZQSxNQUFNLGtCQUFOLGNBQThCLFVBQVU7QUFBQSxJQUVwQyxjQUFjLElBQUksYUFBYSxDQUFDO0FBQUEsSUFDaEMsVUFBVTtBQUFBLElBQ1Ysa0JBQWtCO0FBQUE7QUFBQSxJQUVsQixtQkFBbUI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBS25CLGNBQWM7QUFBQTtBQUFBLElBRWQsWUFBWSxJQUFJLFFBQVE7QUFBQTtBQUFBLElBRXhCLGFBQWEsSUFBSSxRQUFRO0FBQUEsSUFDekIseUJBQXlCO0FBQUEsSUFDekIsdUJBQXVCO0FBQUEsSUFDdkIsUUFBUTtBQUNKLFdBQUsseUJBQXlCLEtBQUssaUJBQWlCLEtBQUssSUFBSTtBQUM3RCxXQUFLLHVCQUF1QixLQUFLLGVBQWUsS0FBSyxJQUFJO0FBQ3pELFVBQUksS0FBSyxhQUFhO0FBQ2xCLGFBQUssWUFBWSxJQUFJLEtBQUssT0FBTyxZQUFZO0FBQzdDLGFBQUssT0FBTyxNQUFNLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUMzQixhQUFLLFVBQVUsSUFBSSxNQUFNO0FBQ3JCLGVBQUssWUFBWSxJQUFJLEtBQUssT0FBTyxZQUFZO0FBQzdDLGVBQUssT0FBTyxNQUFNLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLFFBQy9CLENBQUM7QUFDRCxhQUFLLFdBQVcsSUFBSSxNQUFNO0FBQ3RCLGVBQUssT0FBTyxhQUFhLElBQUksS0FBSyxXQUFXO0FBQzdDLGVBQUssT0FBTyxTQUFTO0FBQUEsUUFDekIsQ0FBQztBQUFBLE1BQ0w7QUFBQSxJQUNKO0FBQUEsSUFDQSxhQUFhO0FBQ1QsV0FBSyxPQUFPLGlCQUFpQixJQUFJLEtBQUssc0JBQXNCO0FBQzVELFdBQUssT0FBTyxlQUFlLElBQUksS0FBSyxvQkFBb0I7QUFBQSxJQUM1RDtBQUFBLElBQ0EsZUFBZTtBQUNYLFdBQUssT0FBTyxpQkFBaUIsT0FBTyxLQUFLLHNCQUFzQjtBQUMvRCxXQUFLLE9BQU8sZUFBZSxPQUFPLEtBQUssb0JBQW9CO0FBQUEsSUFDL0Q7QUFBQSxJQUNBLFNBQVM7QUFDTCxZQUFNLGFBQWEsS0FBSztBQUN4QixVQUFJLEtBQUssaUJBQWlCO0FBQ3RCLGNBQU0sUUFBUSxLQUFLLE9BQU87QUFDMUIsWUFBSSxDQUFDO0FBQ0Q7QUFDSixZQUFJLGlCQUFpQixNQUFNLGtCQUFrQixLQUFLLGVBQWU7QUFDakUsWUFBSSxlQUFlLFNBQVMsR0FBRztBQUMzQixjQUFJLE9BQU8sZUFBZSxDQUFDLEVBQUUsUUFBUSxLQUFLLE9BQU8sR0FBRyxxQkFBcUI7QUFDekUsZUFBSyxVQUFVLENBQUMsQ0FBQztBQUNqQixjQUFJLE1BQU07QUFDTixxQ0FBeUIsS0FBSyxRQUFRLEtBQUssU0FBUztBQUFBLFVBQ3hEO0FBQUEsUUFDSixPQUNLO0FBQ0QsZUFBSyxVQUFVO0FBQUEsUUFDbkI7QUFBQSxNQUNKO0FBRUEsVUFBSSxLQUFLLFdBQVcsWUFBWTtBQUM1QixTQUFDLEtBQUssVUFBVSxLQUFLLGFBQWEsS0FBSyxXQUFXLE9BQU8sSUFBSTtBQUFBLE1BQ2pFO0FBQUEsSUFDSjtBQUFBLElBQ0Esa0JBQWtCLFFBQVEsS0FBSyxPQUFPLElBQUksU0FBUyxNQUFNO0FBQ3JELFVBQUksQ0FBQztBQUNELGVBQU8sQ0FBQztBQUVaLFVBQUksQ0FBQyxLQUFLO0FBQ04sZUFBTyxDQUFDO0FBQ1osYUFBTyxNQUFNLGtCQUFrQixLQUFLLGVBQWU7QUFBQSxJQUN2RDtBQUFBLElBQ0EsaUJBQWlCLFNBQVM7QUFDdEIsVUFBSSxRQUFRLHlCQUF5QixRQUFXO0FBQzVDLGdCQUFRLE1BQU0sNEVBQTRFO0FBQzFGLGFBQUssU0FBUztBQUNkO0FBQUEsTUFDSjtBQUNBLGNBQ0sscUJBQXFCO0FBQUEsUUFDdEIsT0FBTyxLQUFLLG9CQUNSLEtBQUssT0FBTyxHQUFHLHNCQUFzQixRQUFRO0FBQUEsTUFDckQsQ0FBQyxFQUNJLEtBQUssQ0FBQyxrQkFBa0I7QUFDekIsYUFBSyxrQkFBa0I7QUFBQSxNQUMzQixDQUFDLEVBQ0ksTUFBTSxRQUFRLEtBQUs7QUFBQSxJQUM1QjtBQUFBLElBQ0EsaUJBQWlCO0FBQ2IsVUFBSSxDQUFDLEtBQUs7QUFDTjtBQUNKLFdBQUssZ0JBQWdCLE9BQU87QUFDNUIsV0FBSyxrQkFBa0I7QUFBQSxJQUMzQjtBQUFBLEVBQ0o7QUE5RkksZ0JBREUsaUJBQ0ssWUFBVztBQStGdEIsRUFBQUEsWUFBVztBQUFBLElBQ1AsU0FBUyxLQUFLLElBQUk7QUFBQSxFQUN0QixHQUFHLGdCQUFnQixXQUFXLGVBQWUsTUFBTTs7O0FDbkhuRCxNQUFJQyxjQUEwQyxTQUFVLFlBQVksUUFBUSxLQUFLLE1BQU07QUFDbkYsUUFBSSxJQUFJLFVBQVUsUUFBUSxJQUFJLElBQUksSUFBSSxTQUFTLFNBQVMsT0FBTyxPQUFPLE9BQU8seUJBQXlCLFFBQVEsR0FBRyxJQUFJLE1BQU07QUFDM0gsUUFBSSxPQUFPLFlBQVksWUFBWSxPQUFPLFFBQVEsYUFBYTtBQUFZLFVBQUksUUFBUSxTQUFTLFlBQVksUUFBUSxLQUFLLElBQUk7QUFBQTtBQUN4SCxlQUFTLElBQUksV0FBVyxTQUFTLEdBQUcsS0FBSyxHQUFHO0FBQUssWUFBSSxJQUFJLFdBQVcsQ0FBQztBQUFHLGVBQUssSUFBSSxJQUFJLEVBQUUsQ0FBQyxJQUFJLElBQUksSUFBSSxFQUFFLFFBQVEsS0FBSyxDQUFDLElBQUksRUFBRSxRQUFRLEdBQUcsTUFBTTtBQUNoSixXQUFPLElBQUksS0FBSyxLQUFLLE9BQU8sZUFBZSxRQUFRLEtBQUssQ0FBQyxHQUFHO0FBQUEsRUFDaEU7QUFNQSxNQUFNQyxXQUFVLElBQUksYUFBYSxDQUFDO0FBQ2xDLE1BQU0sT0FBTyxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBRXJCLE1BQU0sdUJBQU4sTUFBMkI7QUFBQTtBQUFBLElBRXZCLFVBQVUsSUFBSSxRQUFRO0FBQUE7QUFBQSxJQUV0QixZQUFZLElBQUksUUFBUTtBQUFBO0FBQUEsSUFFeEIsVUFBVSxJQUFJLFFBQVE7QUFBQTtBQUFBLElBRXRCLFNBQVMsSUFBSSxRQUFRO0FBQUE7QUFBQSxJQUVyQixTQUFTLElBQUksUUFBUTtBQUFBO0FBQUEsSUFFckIsT0FBTyxJQUFJLFFBQVE7QUFBQSxFQUN2QjtBQW1CQSxNQUFNLFNBQU4sY0FBcUIsVUFBVTtBQUFBLElBSzNCLE9BQU8sV0FBVyxRQUFRO0FBQ3RCLGFBQU8sa0JBQWtCLGVBQWU7QUFBQSxJQUM1QztBQUFBLElBQ0EsaUJBQWlCO0FBQUEsSUFDakIseUJBQXlCLENBQUM7QUFBQSxJQUMxQixTQUFTO0FBQUEsSUFDVCxVQUFVLElBQUksYUFBYSxDQUFDO0FBQUEsSUFDNUIsa0JBQWtCLElBQUksYUFBYSxDQUFDO0FBQUEsSUFDcEMsYUFBYSxJQUFJLGFBQWEsQ0FBQztBQUFBLElBQy9CLG9CQUFvQixJQUFJLGFBQWEsRUFBRTtBQUFBLElBQ3ZDLGlCQUFpQjtBQUFBLElBQ2pCLFVBQVU7QUFBQSxJQUNWLGNBQWM7QUFBQSxJQUNkLGVBQWU7QUFBQSxJQUNmLGtCQUFrQixJQUFJLGFBQWEsQ0FBQztBQUFBLElBQ3BDLHlCQUF5QixJQUFJLGFBQWEsQ0FBQztBQUFBLElBQzNDLG1CQUFtQjtBQUFBLElBQ25CLGlCQUFpQjtBQUFBLElBQ2pCLDBCQUEwQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFLMUIsVUFBVTtBQUFBO0FBQUEsSUFFVixpQkFBaUI7QUFBQTtBQUFBLElBRWpCLHVCQUF1QjtBQUFBO0FBQUEsSUFFdkIsa0JBQWtCO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFJbEIsZUFBZSxJQUFJLHFCQUFxQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQVl4QyxnQkFBZ0IsSUFBSSxxQkFBcUI7QUFBQTtBQUFBLElBRXpDLFlBQVksSUFBSSxhQUFhLENBQUM7QUFBQTtBQUFBLElBRTlCLGlCQUFpQjtBQUFBO0FBQUEsSUFFakIsa0JBQWtCO0FBQUE7QUFBQSxJQUVsQix1QkFBdUI7QUFBQTtBQUFBLElBRXZCLGVBQWU7QUFBQTtBQUFBLElBRWYsYUFBYTtBQUFBO0FBQUEsSUFFYixjQUFjO0FBQUE7QUFBQSxJQUVkLGNBQWM7QUFBQTtBQUFBLElBRWQsY0FBYztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBT2Qsa0JBQWtCO0FBQUEsSUFDbEIsb0JBQW9CLE1BQU07QUFDdEIsVUFBSSxDQUFDLEtBQUs7QUFDTjtBQUdKLG1CQUFLLE9BQU8sS0FBSyxtQkFBbUIsS0FBSyxlQUFlLGdCQUFnQjtBQUFBLElBQzVFO0FBQUEsSUFDQSxRQUFRO0FBQ0osV0FBSyxpQkFBaUIsS0FBSyxLQUFLO0FBQ2hDLFVBQUksS0FBSyxjQUFjLEdBQUc7QUFDdEIsY0FBTSxZQUFZLEtBQUssT0FBTyxhQUFhLE9BQU87QUFDbEQsWUFBSSxDQUFDLFdBQVc7QUFDWixrQkFBUSxLQUFLLDhCQUE4QixLQUFLLE9BQU8sTUFBTSxzRkFDckI7QUFBQSxRQUM1QyxPQUNLO0FBQ0QsZUFBSyxhQUFhLFVBQVUsY0FBYztBQUMxQyxlQUFLLFNBQVM7QUFBQSxRQUNsQjtBQUFBLE1BQ0osT0FDSztBQUNELGFBQUssYUFBYSxDQUFDLFFBQVEsU0FBUyxNQUFNLEVBQUUsS0FBSyxhQUFhLENBQUM7QUFBQSxNQUNuRTtBQUNBLFdBQUssaUJBQWlCLEtBQUssT0FBTyxhQUFhLGFBQWE7QUFDNUQsVUFBSSxLQUFLLGlCQUFpQjtBQUN0QixhQUFLLGlCQUFpQixLQUFLLE9BQU8sTUFBTSxVQUFVLEtBQUssTUFBTTtBQUM3RCxhQUFLLG1CQUNELEtBQUssZUFBZSxhQUFhLGlCQUFpQjtBQUFBLFVBQzlDLGFBQWE7QUFBQSxRQUNqQixDQUFDLEtBQUs7QUFBQSxNQUNkO0FBQ0EsV0FBSywwQkFBMEIsS0FBSyxjQUFjLEtBQUssSUFBSTtBQUFBLElBQy9EO0FBQUEsSUFDQSxhQUFhO0FBQ1QsV0FBSyxPQUFPLGlCQUFpQixJQUFJLEtBQUssdUJBQXVCO0FBQzdELFdBQUssT0FBTyxTQUFTLElBQUksS0FBSyxpQkFBaUI7QUFDL0MsV0FBSyxxQkFBcUIsSUFBSTtBQUc5QixVQUFJLEtBQUssa0JBQWtCLE1BQU07QUFDN0IsY0FBTUMsVUFBUyxLQUFLLE9BQU87QUFDM0IsY0FBTSxVQUFVLEtBQUssUUFBUSxLQUFLLElBQUk7QUFDdEMsY0FBTSxnQkFBZ0IsS0FBSyxjQUFjLEtBQUssSUFBSTtBQUNsRCxjQUFNLGdCQUFnQixLQUFLLGNBQWMsS0FBSyxJQUFJO0FBQ2xELGNBQU0sY0FBYyxLQUFLLFlBQVksS0FBSyxJQUFJO0FBQzlDLFFBQUFBLFFBQU8saUJBQWlCLFNBQVMsT0FBTztBQUN4QyxRQUFBQSxRQUFPLGlCQUFpQixlQUFlLGFBQWE7QUFDcEQsUUFBQUEsUUFBTyxpQkFBaUIsZUFBZSxhQUFhO0FBQ3BELFFBQUFBLFFBQU8saUJBQWlCLGFBQWEsV0FBVztBQUNoRCxhQUFLLHVCQUF1QixLQUFLLE1BQU07QUFDbkMsVUFBQUEsUUFBTyxvQkFBb0IsU0FBUyxPQUFPO0FBQzNDLFVBQUFBLFFBQU8sb0JBQW9CLGVBQWUsYUFBYTtBQUN2RCxVQUFBQSxRQUFPLG9CQUFvQixlQUFlLGFBQWE7QUFDdkQsVUFBQUEsUUFBTyxvQkFBb0IsYUFBYSxXQUFXO0FBQUEsUUFDdkQsQ0FBQztBQUFBLE1BQ0w7QUFDQSxXQUFLLGtCQUFrQjtBQUFBLElBQzNCO0FBQUEsSUFDQSx1QkFBdUIsYUFBYTtBQUNoQyxVQUFJLENBQUMsS0FBSztBQUNOO0FBQ0osWUFBTUMsUUFBTyxhQUFLLEtBQUssS0FBSyxTQUFTLFdBQVc7QUFDaEQsV0FBSyxnQkFBZ0IsaUJBQWlCLENBQUMsR0FBSyxHQUFLLENBQUNBLFFBQU8sQ0FBQyxDQUFDO0FBQzNELFVBQUksS0FBSyx3QkFBd0IsR0FBRztBQUVoQyxRQUFBRixTQUFRLEtBQUssQ0FBQztBQUNkLFFBQUFBLFNBQVEsS0FBSyxvQkFBb0IsSUFBSUUsUUFBTztBQUM1QyxhQUFLLGdCQUFnQixnQkFBZ0JGLFFBQU87QUFBQSxNQUNoRDtBQUFBLElBQ0o7QUFBQSxJQUNBLHFCQUFxQixTQUFTO0FBQzFCLFVBQUksS0FBSyxXQUFXO0FBQ2hCO0FBQ0osV0FBSyxVQUFVO0FBQ2YsVUFBSSxDQUFDLEtBQUs7QUFDTjtBQUNKLFVBQUksU0FBUztBQUNULGFBQUssYUFBYSxnQkFBZ0IsS0FBSyxlQUFlO0FBQUEsTUFDMUQsT0FDSztBQUNELGFBQUssYUFBYSxnQkFBZ0IsS0FBSyxlQUFlO0FBQ3RELGFBQUssYUFBYSxXQUFXLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQzFDO0FBQUEsSUFDSjtBQUFBLElBQ0EsU0FBUztBQUdMLFVBQUksS0FBSyxPQUFPLE1BQ1osS0FBSyxnQkFDTCxLQUFLLFVBQ0wsS0FBSyxPQUFPLEdBQUcsUUFBUSxhQUFhLENBQUMsRUFBRSxlQUFlLFVBQ3RELEtBQUssT0FBTyxHQUFHLFFBQVEsYUFBYSxDQUFDLEVBQUUsU0FBUztBQUVoRCxjQUFNLElBQUksS0FBSyxPQUFPLEdBQUcsUUFBUSxhQUFhLENBQUMsRUFBRSxRQUFRO0FBRXpELGFBQUssV0FBVyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ3hCLGFBQUssV0FBVyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7QUFDekIsYUFBSyxXQUFXLENBQUMsSUFBSTtBQUNyQixhQUFLLGtDQUFrQztBQUFBLE1BQzNDLFdBQ1MsS0FBSyxPQUFPLE1BQU0sS0FBSyxVQUFVLEtBQUssT0FBTyxlQUFlO0FBRWpFLGFBQUssV0FBVyxDQUFDLElBQUk7QUFDckIsYUFBSyxXQUFXLENBQUMsSUFBSTtBQUNyQixhQUFLLFdBQVcsQ0FBQyxJQUFJO0FBQ3JCLGFBQUssMEJBQTBCO0FBQUEsTUFDbkMsV0FDUyxLQUFLLGdCQUFnQjtBQUcxQixhQUFLLGdCQUFnQjtBQUFBLE1BQ3pCO0FBQ0EsV0FBSyxRQUFRLE1BQU0sS0FBSyxPQUFPLElBQUksS0FBSztBQUN4QyxVQUFJLEtBQUssY0FBYztBQUNuQixZQUFJLEtBQUssbUJBQ0osS0FBSyxVQUFVLENBQUMsS0FBSyxLQUFLLEtBQUssVUFBVSxDQUFDLEtBQUssS0FBSyxLQUFLLFVBQVUsQ0FBQyxLQUFLLElBQUk7QUFDOUUsZUFBSyxxQkFBcUIsSUFBSTtBQUM5QixlQUFLLGFBQWEsaUJBQWlCLEtBQUssU0FBUztBQUNqRCxlQUFLLHVCQUF1QixLQUFLLFNBQVM7QUFBQSxRQUM5QyxPQUNLO0FBQ0QsZUFBSyxxQkFBcUIsS0FBSztBQUFBLFFBQ25DO0FBQUEsTUFDSjtBQUFBLElBQ0o7QUFBQTtBQUFBLElBRUEsT0FBTyxPQUFPLGVBQWU7QUFDekIsWUFBTSxTQUFTLEtBQUs7QUFDcEIsVUFBSSxRQUFRO0FBQ1IsY0FBTSxlQUFlLEtBQUs7QUFDMUIsWUFBSTtBQUNBLHVCQUFhLEtBQUssRUFBRSxPQUFPLFFBQVEsTUFBTSxpQkFBaUIsTUFBUztBQUN2RSxhQUFLLGFBQWEsS0FBSyxFQUFFLE9BQU8sUUFBUSxNQUFNLGlCQUFpQixNQUFTO0FBQUEsTUFDNUU7QUFBQSxJQUNKO0FBQUEsSUFDQSxlQUFlLFFBQVEsZUFBZSxTQUFTLGVBQWU7QUFFMUQsWUFBTSxNQUFNLENBQUMsS0FBSyxtQkFBbUIsT0FBTyxXQUFXLElBQUksT0FBTyxRQUFRLENBQUMsSUFBSTtBQUMvRSxVQUFJLEtBQUs7QUFDTCxZQUFJLENBQUMsS0FBSyxrQkFBa0IsQ0FBQyxLQUFLLGVBQWUsT0FBTyxHQUFHLEdBQUc7QUFFMUQsY0FBSSxLQUFLLGdCQUFnQjtBQUNyQixpQkFBSyxPQUFPLGFBQWEsYUFBYTtBQUFBLFVBQzFDO0FBRUEsZUFBSyxpQkFBaUI7QUFDdEIsZUFBSyx1QkFBdUIsS0FBSyxlQUFlLGFBQWEsWUFBWTtBQUN6RSxjQUFJLEtBQUs7QUFDTCxpQkFBSyxPQUFPLE9BQU8sTUFBTSxTQUFTO0FBQ3RDLGVBQUssT0FBTyxXQUFXLGFBQWE7QUFBQSxRQUN4QztBQUFBLE1BQ0osV0FDUyxLQUFLLGdCQUFnQjtBQUUxQixhQUFLLE9BQU8sYUFBYSxhQUFhO0FBQ3RDLGFBQUssaUJBQWlCO0FBQ3RCLGFBQUssdUJBQXVCO0FBQzVCLFlBQUksS0FBSztBQUNMLGVBQUssT0FBTyxPQUFPLE1BQU0sU0FBUztBQUFBLE1BQzFDO0FBQ0EsVUFBSSxLQUFLLGdCQUFnQjtBQUVyQixZQUFJLEtBQUssWUFBWSxLQUFLLGFBQWE7QUFDbkMsZUFBSyxPQUFPLEtBQUssVUFBVSxXQUFXLFFBQVEsYUFBYTtBQUFBLFFBQy9EO0FBRUEsWUFBSTtBQUNBLGVBQUssT0FBTyxXQUFXLGFBQWE7QUFBQSxNQUM1QyxXQUNTLEtBQUssaUJBQWlCO0FBRTNCLFlBQUksS0FBSyxZQUFZLEtBQUssYUFBYTtBQUNuQyxXQUFDLEtBQUssVUFBVSxLQUFLLGNBQWMsU0FBUyxLQUFLLGNBQWMsTUFBTSxPQUFPLGVBQWUsTUFBTSxpQkFBaUIsTUFBUztBQUFBLFFBQy9IO0FBRUEsWUFBSTtBQUNBLGVBQUssY0FBYyxRQUFRLE9BQU8sZUFBZSxNQUFNLGlCQUFpQixNQUFTO0FBQUEsTUFDekY7QUFFQSxVQUFJLEtBQUs7QUFDTCxZQUFJLEtBQUssZ0JBQWdCO0FBQ3JCLGVBQUssZUFBZSwyQkFBMkJBLFVBQVMsS0FBSyxTQUFTO0FBQUEsUUFDMUUsT0FDSztBQUNELFVBQUFBLFNBQVEsSUFBSSxLQUFLLFNBQVM7QUFBQSxRQUM5QjtBQUNBLFlBQUksQ0FBQyxhQUFLLE9BQU8sS0FBSyx3QkFBd0JBLFFBQU8sR0FBRztBQUNwRCxlQUFLLE9BQU8sVUFBVSxhQUFhO0FBQ25DLGVBQUssdUJBQXVCLElBQUlBLFFBQU87QUFBQSxRQUMzQztBQUFBLE1BQ0osV0FDUyxLQUFLLGlCQUFpQjtBQUMzQixZQUFJLENBQUMsYUFBSyxPQUFPLEtBQUssd0JBQXdCLEtBQUssU0FBUyxHQUFHO0FBQzNELGVBQUssY0FBYyxPQUFPLE9BQU8sZUFBZSxNQUFNLGlCQUFpQixNQUFTO0FBQ2hGLGVBQUssdUJBQXVCLElBQUksS0FBSyxTQUFTO0FBQUEsUUFDbEQ7QUFBQSxNQUNKLE9BQ0s7QUFDRCxhQUFLLHVCQUF1QixJQUFJLEtBQUssU0FBUztBQUFBLE1BQ2xEO0FBQ0EsV0FBSyxjQUFjLEtBQUs7QUFBQSxJQUM1QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBT0EsY0FBYyxHQUFHO0FBQ2IsVUFBSSxDQUFDO0FBQ0QsZ0JBQVEsTUFBTSw4Q0FBOEM7QUFJaEUsVUFBSSxDQUFDLEtBQUs7QUFDTjtBQUVKLFlBQU0sV0FBVyxLQUFLLFNBQVMsS0FBSyxJQUFJO0FBQ3hDLFFBQUUsaUJBQWlCLFVBQVUsUUFBUTtBQUNyQyxZQUFNLGdCQUFnQixLQUFLLGNBQWMsS0FBSyxJQUFJO0FBQ2xELFFBQUUsaUJBQWlCLGVBQWUsYUFBYTtBQUMvQyxZQUFNLGNBQWMsS0FBSyxZQUFZLEtBQUssSUFBSTtBQUM5QyxRQUFFLGlCQUFpQixhQUFhLFdBQVc7QUFDM0MsV0FBSyx1QkFBdUIsS0FBSyxNQUFNO0FBQ25DLFlBQUksQ0FBQyxLQUFLLE9BQU87QUFDYjtBQUNKLFVBQUUsb0JBQW9CLFVBQVUsUUFBUTtBQUN4QyxVQUFFLG9CQUFvQixlQUFlLGFBQWE7QUFDbEQsVUFBRSxvQkFBb0IsYUFBYSxXQUFXO0FBQUEsTUFDbEQsQ0FBQztBQUVELFdBQUssa0JBQWtCO0FBQUEsSUFDM0I7QUFBQSxJQUNBLGVBQWU7QUFDWCxXQUFLLE9BQU8saUJBQWlCLE9BQU8sS0FBSyx1QkFBdUI7QUFDaEUsV0FBSyxPQUFPLFNBQVMsT0FBTyxLQUFLLGlCQUFpQjtBQUNsRCxXQUFLLHFCQUFxQixLQUFLO0FBQy9CLFVBQUksS0FBSztBQUNMLGFBQUssT0FBTyxhQUFhLElBQUk7QUFDakMsVUFBSSxLQUFLO0FBQ0wsYUFBSyxnQkFBZ0IsZ0JBQWdCLElBQUk7QUFFN0MsaUJBQVcsS0FBSyxLQUFLO0FBQ2pCLFVBQUU7QUFDTixXQUFLLHVCQUF1QixTQUFTO0FBQUEsSUFDekM7QUFBQSxJQUNBLFlBQVk7QUFDUixXQUFLLGdCQUFnQixRQUFRO0FBQUEsSUFDakM7QUFBQTtBQUFBLElBRUEsU0FBUyxHQUFHO0FBQ1IsVUFBSSxFQUFFLFlBQVksY0FBYyxLQUFLO0FBQ2pDO0FBQ0osV0FBSyxRQUFRLEdBQUcsRUFBRSxPQUFPLElBQUk7QUFBQSxJQUNqQztBQUFBO0FBQUEsSUFFQSxjQUFjLEdBQUc7QUFDYixXQUFLLGVBQWU7QUFDcEIsVUFBSSxFQUFFLFlBQVksY0FBYyxLQUFLLFlBQVk7QUFDN0MsYUFBSyxVQUFVO0FBQ2YsYUFBSyxRQUFRLEdBQUcsRUFBRSxLQUFLO0FBQUEsTUFDM0I7QUFBQSxJQUNKO0FBQUE7QUFBQSxJQUVBLFlBQVksR0FBRztBQUNYLFdBQUssZUFBZTtBQUNwQixVQUFJLEVBQUUsWUFBWSxjQUFjLEtBQUssWUFBWTtBQUM3QyxhQUFLLFVBQVU7QUFDZixhQUFLLFFBQVEsR0FBRyxFQUFFLEtBQUs7QUFBQSxNQUMzQjtBQUFBLElBQ0o7QUFBQTtBQUFBLElBRUEsY0FBYyxHQUFHO0FBRWIsVUFBSSxDQUFDLEVBQUU7QUFDSDtBQUNKLFdBQUssZUFBZSxDQUFDO0FBQ3JCLFdBQUssUUFBUSxHQUFHLElBQUk7QUFBQSxJQUN4QjtBQUFBO0FBQUEsSUFFQSxRQUFRLEdBQUc7QUFDUCxXQUFLLGVBQWUsQ0FBQztBQUNyQixXQUFLLFFBQVEsR0FBRyxNQUFNLElBQUk7QUFBQSxJQUM5QjtBQUFBO0FBQUEsSUFFQSxjQUFjLEdBQUc7QUFFYixVQUFJLENBQUMsRUFBRSxhQUFhLEVBQUUsV0FBVztBQUM3QjtBQUNKLFdBQUssZUFBZSxDQUFDO0FBQ3JCLFdBQUssVUFBVTtBQUNmLFdBQUssUUFBUSxDQUFDO0FBQUEsSUFDbEI7QUFBQTtBQUFBLElBRUEsWUFBWSxHQUFHO0FBRVgsVUFBSSxDQUFDLEVBQUUsYUFBYSxFQUFFLFdBQVc7QUFDN0I7QUFDSixXQUFLLGVBQWUsQ0FBQztBQUNyQixXQUFLLFVBQVU7QUFDZixXQUFLLFFBQVEsQ0FBQztBQUFBLElBQ2xCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUtBLGVBQWUsR0FBRztBQUNkLFdBQUssZ0JBQWdCLENBQUMsSUFBSSxFQUFFO0FBQzVCLFdBQUssZ0JBQWdCLENBQUMsSUFBSSxFQUFFO0FBQzVCLFdBQUssZ0JBQWdCO0FBQUEsSUFDekI7QUFBQSxJQUNBLGtCQUFrQjtBQUNkLFlBQU0sU0FBUyxLQUFLLE9BQU8sT0FBTyxzQkFBc0I7QUFFeEQsWUFBTSxPQUFPLEtBQUssZ0JBQWdCLENBQUMsSUFBSSxPQUFPO0FBQzlDLFlBQU0sTUFBTSxLQUFLLGdCQUFnQixDQUFDLElBQUksT0FBTztBQUM3QyxXQUFLLFdBQVcsQ0FBQyxJQUFJLE9BQU8sSUFBSTtBQUNoQyxXQUFLLFdBQVcsQ0FBQyxJQUFJLENBQUMsTUFBTSxJQUFJO0FBQ2hDLFdBQUssV0FBVyxDQUFDLElBQUk7QUFDckIsV0FBSyxrQ0FBa0M7QUFBQSxJQUMzQztBQUFBLElBQ0Esb0NBQW9DO0FBRWhDLG1CQUFLLGNBQWMsS0FBSyxZQUFZLEtBQUssWUFBWSxLQUFLLGlCQUFpQjtBQUMzRSxtQkFBSyxVQUFVLEtBQUssWUFBWSxLQUFLLFVBQVU7QUFDL0MsV0FBSywwQkFBMEI7QUFBQSxJQUNuQztBQUFBLElBQ0EsNEJBQTRCO0FBQ3hCLFdBQUssT0FBTyxxQkFBcUIsS0FBSyxZQUFZLEtBQUssVUFBVTtBQUNqRSxXQUFLLE9BQU8saUJBQWlCLEtBQUssT0FBTztBQUFBLElBQzdDO0FBQUEsSUFDQSxRQUFRLGVBQWUsUUFBUSxNQUFNLFVBQVUsT0FBTztBQUNsRCxZQUFNLFNBQVMsS0FBSyxlQUFlLElBQzdCLEtBQUssT0FBTyxNQUFNLFFBQVEsS0FBSyxTQUFTLEtBQUssWUFBWSxLQUFLLGNBQWMsSUFDNUUsS0FBSyxPQUFPLFFBQVEsUUFBUSxLQUFLLFNBQVMsS0FBSyxZQUFZLEtBQUssZ0JBQWdCLEtBQUssV0FBVztBQUN0RyxVQUFJLG9CQUFvQjtBQUN4QixVQUFJLGdCQUFnQjtBQUNwQixVQUFJLEtBQUssa0JBQWtCLFNBQVM7QUFDaEMsYUFBSyxlQUFlLGlCQUFpQixLQUFLLFNBQVM7QUFDbkQsNEJBQW9CLGFBQUssU0FBUyxLQUFLLE9BQU8saUJBQWlCQSxRQUFPLEdBQUcsS0FBSyxTQUFTO0FBQ3ZGLHdCQUFnQixLQUFLLGtCQUFrQixrQkFBa0IsS0FBSyxFQUFFLENBQUM7QUFBQSxNQUNyRTtBQUNBLFVBQUksa0JBQWtCO0FBQ3RCLFVBQUksT0FBTyxXQUFXLEdBQUc7QUFDckIsY0FBTSxJQUFJLE9BQU8sVUFBVSxDQUFDO0FBQzVCLFlBQUkscUJBQXFCLEdBQUc7QUFFeEIsZUFBSyxVQUFVLElBQUksT0FBTyxVQUFVLENBQUMsQ0FBQztBQUFBLFFBQzFDLE9BQ0s7QUFDRCw0QkFBa0I7QUFBQSxRQUN0QjtBQUFBLE1BQ0osV0FDUyxvQkFBb0IsVUFBVTtBQUFBLE1BRXZDLE9BQ0s7QUFDRCxhQUFLLFVBQVUsS0FBSyxDQUFDO0FBQUEsTUFDekI7QUFDQSxVQUFJLG1CQUFtQixDQUFDLEtBQUssaUJBQWlCO0FBQzFDLGFBQUssY0FBYyxRQUFRLE9BQU8sZUFBZSxJQUFJO0FBQUEsTUFDekQsV0FDUyxDQUFDLG1CQUFtQixLQUFLLGlCQUFpQjtBQUMvQyxhQUFLLGNBQWMsVUFBVSxPQUFPLGVBQWUsSUFBSTtBQUFBLE1BQzNEO0FBQ0EsV0FBSyxrQkFBa0I7QUFDdkIsV0FBSyxlQUFlLFFBQVEsZUFBZSxTQUFTLGFBQWE7QUFDakUsYUFBTztBQUFBLElBQ1g7QUFBQSxFQUNKO0FBNWJJLGdCQURFLFFBQ0ssWUFBVztBQUdsQjtBQUFBO0FBQUEsZ0JBSkUsUUFJSyxnQkFBZSxDQUFDLGVBQWU7QUEwYjFDLEVBQUFELFlBQVc7QUFBQSxJQUNQLFNBQVMsSUFBSSxDQUFDO0FBQUEsRUFDbEIsR0FBRyxPQUFPLFdBQVcsa0JBQWtCLE1BQU07QUFDN0MsRUFBQUEsWUFBVztBQUFBLElBQ1AsU0FBUyxPQUFPO0FBQUEsRUFDcEIsR0FBRyxPQUFPLFdBQVcsbUJBQW1CLE1BQU07QUFDOUMsRUFBQUEsWUFBVztBQUFBLElBQ1AsU0FBUyxLQUFLLENBQUMsS0FBSyxLQUFLLEtBQUssTUFBTSxHQUFHLEdBQUc7QUFBQSxFQUM5QyxHQUFHLE9BQU8sV0FBVyx3QkFBd0IsTUFBTTtBQUNuRCxFQUFBQSxZQUFXO0FBQUEsSUFDUCxTQUFTLE9BQU87QUFBQSxFQUNwQixHQUFHLE9BQU8sV0FBVyxnQkFBZ0IsTUFBTTtBQUMzQyxFQUFBQSxZQUFXO0FBQUEsSUFDUCxTQUFTLEtBQUssQ0FBQyxtQkFBbUIsUUFBUSxTQUFTLE1BQU0sR0FBRyxpQkFBaUI7QUFBQSxFQUNqRixHQUFHLE9BQU8sV0FBVyxjQUFjLE1BQU07QUFDekMsRUFBQUEsWUFBVztBQUFBLElBQ1AsU0FBUyxLQUFLLENBQUMsYUFBYSxPQUFPLEdBQUcsV0FBVztBQUFBLEVBQ3JELEdBQUcsT0FBTyxXQUFXLGVBQWUsTUFBTTtBQUMxQyxFQUFBQSxZQUFXO0FBQUEsSUFDUCxTQUFTLE1BQU0sR0FBRztBQUFBLEVBQ3RCLEdBQUcsT0FBTyxXQUFXLGVBQWUsTUFBTTtBQUMxQyxFQUFBQSxZQUFXO0FBQUEsSUFDUCxTQUFTLEtBQUssSUFBSTtBQUFBLEVBQ3RCLEdBQUcsT0FBTyxXQUFXLGVBQWUsTUFBTTtBQUMxQyxFQUFBQSxZQUFXO0FBQUEsSUFDUCxTQUFTLEtBQUssS0FBSztBQUFBLEVBQ3ZCLEdBQUcsT0FBTyxXQUFXLG1CQUFtQixNQUFNOzs7QUN0Z0I5QyxNQUFJSSxjQUEwQyxTQUFVLFlBQVksUUFBUSxLQUFLLE1BQU07QUFDbkYsUUFBSSxJQUFJLFVBQVUsUUFBUSxJQUFJLElBQUksSUFBSSxTQUFTLFNBQVMsT0FBTyxPQUFPLE9BQU8seUJBQXlCLFFBQVEsR0FBRyxJQUFJLE1BQU07QUFDM0gsUUFBSSxPQUFPLFlBQVksWUFBWSxPQUFPLFFBQVEsYUFBYTtBQUFZLFVBQUksUUFBUSxTQUFTLFlBQVksUUFBUSxLQUFLLElBQUk7QUFBQTtBQUN4SCxlQUFTLElBQUksV0FBVyxTQUFTLEdBQUcsS0FBSyxHQUFHO0FBQUssWUFBSSxJQUFJLFdBQVcsQ0FBQztBQUFHLGVBQUssSUFBSSxJQUFJLEVBQUUsQ0FBQyxJQUFJLElBQUksSUFBSSxFQUFFLFFBQVEsS0FBSyxDQUFDLElBQUksRUFBRSxRQUFRLEdBQUcsTUFBTTtBQUNoSixXQUFPLElBQUksS0FBSyxLQUFLLE9BQU8sZUFBZSxRQUFRLEtBQUssQ0FBQyxHQUFHO0FBQUEsRUFDaEU7QUFZQSxNQUFNLGNBQU4sY0FBMEIsVUFBVTtBQUFBO0FBQUEsSUFHaEMsTUFBTTtBQUFBLElBQ04sUUFBUTtBQUNKLFVBQUksU0FBUyxJQUFJLGFBQWEsQ0FBQztBQUMvQixvQkFBTSxlQUFlLFFBQVEsS0FBSyxPQUFPLGNBQWM7QUFDdkQsY0FBUSxJQUFJLGlCQUFpQixLQUFLLE9BQU8sSUFBSTtBQUM3QyxjQUFRLElBQUksaUJBQWlCLEtBQUssS0FBSyxJQUFJO0FBQzNDLGNBQVEsSUFBSSxnQkFBaUIsTUFBTTtBQUNuQyxjQUFRLElBQUksbUJBQW9CLEtBQUssT0FBTyxjQUFjO0FBQzFELGNBQVEsSUFBSSxtQkFBb0IsS0FBSyxPQUFPLGNBQWM7QUFBQSxJQUM5RDtBQUFBLEVBQ0o7QUFaSSxnQkFERSxhQUNLLFlBQVc7QUFhdEIsRUFBQUEsWUFBVztBQUFBLElBQ1AsU0FBUyxPQUFPO0FBQUEsRUFDcEIsR0FBRyxZQUFZLFdBQVcsT0FBTyxNQUFNOzs7QUM3QnZDLFdBQVMsaUJBQWlCLEtBQUssR0FBRyxHQUFHLEdBQUc7QUFDcEMsVUFBTSxLQUFLLEtBQUssSUFBSSxJQUFJLENBQUM7QUFDekIsVUFBTSxLQUFLLEtBQUssSUFBSSxJQUFJLENBQUM7QUFDekIsVUFBTSxLQUFLLEtBQUssSUFBSSxJQUFJLENBQUM7QUFDekIsVUFBTSxLQUFLLEtBQUssSUFBSSxJQUFJLENBQUM7QUFDekIsVUFBTSxLQUFLLEtBQUssSUFBSSxJQUFJLENBQUM7QUFDekIsVUFBTSxLQUFLLEtBQUssSUFBSSxJQUFJLENBQUM7QUFDekIsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO0FBQ2xDLFFBQUksQ0FBQyxJQUFJLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUNsQyxRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFDbEMsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO0FBQUEsRUFDdEM7QUFPQSxNQUFNLHdCQUFOLGNBQW9DLFVBQVU7QUFBQSxJQUcxQyxRQUFRO0FBQ0osV0FBSyxZQUFZO0FBQ2pCLFdBQUssWUFBWTtBQUNqQixXQUFLLGNBQWM7QUFDbkIsV0FBSyxjQUFjO0FBQUEsSUFDdkI7QUFBQSxJQUNBLE9BQU87QUFFSCxXQUFLLG9CQUFvQixDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7QUFDcEMsV0FBSyxvQkFBb0IsT0FBTyxjQUFjLE9BQU8sYUFBYSxJQUFJO0FBQ3RFLFdBQUssVUFBVSxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQ3ZCLGFBQU8saUJBQWlCLHFCQUFxQixTQUFVLEdBQUc7QUFDdEQsWUFBSSxRQUFRLEVBQUUsU0FBUztBQUN2QixZQUFJLE9BQU8sRUFBRSxRQUFRO0FBQ3JCLFlBQUksUUFBUSxFQUFFLFNBQVM7QUFDdkIsY0FBTSxRQUFRLEtBQUssS0FBSztBQUN4Qix5QkFBaUIsS0FBSyxtQkFBbUIsT0FBTyxPQUFPLFFBQVEsT0FBTyxDQUFDLFFBQVEsS0FBSztBQUFBLE1BQ3hGLEVBQUUsS0FBSyxJQUFJLENBQUM7QUFDWixhQUFPLGlCQUFpQixxQkFBcUIsU0FBVSxHQUFHO0FBQ3RELGFBQUssb0JBQW9CLE9BQU8sZUFBZTtBQUFBLE1BQ25ELEVBQUUsS0FBSyxJQUFJLEdBQUcsS0FBSztBQUFBLElBQ3ZCO0FBQUEsSUFDQSxTQUFTO0FBRUwsVUFBSSxLQUFLLE9BQU87QUFDWjtBQUNKLFdBQUssT0FBTyxvQkFBb0IsS0FBSyxPQUFPO0FBQzVDLFdBQUssT0FBTyxlQUFlO0FBQzNCLFVBQUksS0FBSyxxQkFBcUIsR0FBRztBQUM3QixhQUFLLE9BQU8sbUJBQW1CLENBQUMsR0FBRyxHQUFHLEVBQUUsR0FBRyxLQUFLLGlCQUFpQjtBQUFBLE1BQ3JFO0FBQ0EsV0FBSyxPQUFPLE9BQU8sQ0FBQyxDQUFDLEtBQUssS0FBSyxHQUFHLEdBQUcsR0FBRyxHQUFHLEtBQUssS0FBSyxHQUFHLENBQUMsQ0FBQztBQUMxRCxXQUFLLE9BQU8sT0FBTyxLQUFLLGlCQUFpQjtBQUN6QyxXQUFLLE9BQU8sVUFBVSxLQUFLLE9BQU87QUFBQSxJQUN0QztBQUFBLEVBQ0o7QUFyQ0ksZ0JBREUsdUJBQ0ssWUFBVztBQUNsQixnQkFGRSx1QkFFSyxjQUFhLENBQUM7OztBQ2R6QixNQUFNLGVBQU4sY0FBMkIsVUFBVTtBQUFBLElBR2pDLE9BQU87QUFDSCxXQUFLLGFBQWE7QUFBQSxJQUN0QjtBQUFBLElBQ0EsUUFBUTtBQUNKLFdBQUssTUFBTSxLQUFLLE9BQU8sYUFBYSxXQUFXO0FBQUEsSUFDbkQ7QUFBQSxJQUNBLFNBQVM7QUFDTCxZQUFNLFdBQVcsS0FBSyxJQUFJLGNBQWM7QUFDeEMsVUFBSSxlQUFlO0FBQ25CLGVBQVMsSUFBSSxHQUFHLElBQUksU0FBUyxRQUFRLEVBQUUsR0FBRztBQUN0QyxjQUFNLElBQUksU0FBUyxDQUFDLEVBQUU7QUFDdEIsY0FBTSxTQUFTLEVBQUUsYUFBYSxlQUFlO0FBQzdDLFlBQUksUUFBUTtBQUNSLGNBQUksQ0FBQyxPQUFPLE9BQU8sS0FBSyxVQUFVLEdBQUc7QUFDakMsbUJBQU8sUUFBUSxHQUFHLElBQUk7QUFDdEIsbUJBQU8sUUFBUSxHQUFHLElBQUk7QUFBQSxVQUMxQjtBQUNBLHlCQUFlO0FBQ2Y7QUFBQSxRQUNKO0FBQUEsTUFDSjtBQUNBLFVBQUksQ0FBQyxjQUFjO0FBQ2YsWUFBSSxLQUFLO0FBQ0wsZUFBSyxXQUFXLFVBQVUsS0FBSyxXQUFXLFFBQVEsSUFBSTtBQUMxRCxhQUFLLGFBQWE7QUFDbEI7QUFBQSxNQUNKLE9BQ0s7QUFDRCxhQUFLLGFBQWE7QUFBQSxNQUN0QjtBQUFBLElBQ0o7QUFBQSxFQUNKO0FBakNJLGdCQURFLGNBQ0ssWUFBVztBQUNsQixnQkFGRSxjQUVLLGNBQWEsQ0FBQzs7O0FDSnpCLE1BQU0saUJBQU4sY0FBNkIsVUFBVTtBQUFBLElBTW5DLFFBQVE7QUFDSixXQUFLLHlCQUF5QixLQUFLLGtCQUFrQixLQUFLLElBQUk7QUFBQSxJQUNsRTtBQUFBLElBQ0EsYUFBYTtBQUNULFdBQUssT0FBTyxpQkFBaUIsSUFBSSxLQUFLLHNCQUFzQjtBQUFBLElBQ2hFO0FBQUEsSUFDQSxlQUFlO0FBQ1gsV0FBSyxPQUFPLGlCQUFpQixPQUFPLEtBQUssc0JBQXNCO0FBQUEsSUFDbkU7QUFBQSxJQUNBLG9CQUFvQjtBQUNoQixXQUFLLE9BQU8sR0FBRyxVQUFVLGlCQUFpQixLQUFLO0FBQUEsSUFDbkQ7QUFBQSxFQUNKO0FBakJJLGdCQURFLGdCQUNLLFlBQVc7QUFDbEIsZ0JBRkUsZ0JBRUssY0FBYTtBQUFBO0FBQUEsSUFFaEIsZ0JBQWdCLEVBQUUsTUFBTSxLQUFLLE9BQU8sU0FBUyxJQUFJO0FBQUEsRUFDckQ7OztBQ2JKLE1BQUlDLGNBQTBDLFNBQVUsWUFBWSxRQUFRLEtBQUssTUFBTTtBQUNuRixRQUFJLElBQUksVUFBVSxRQUFRLElBQUksSUFBSSxJQUFJLFNBQVMsU0FBUyxPQUFPLE9BQU8sT0FBTyx5QkFBeUIsUUFBUSxHQUFHLElBQUksTUFBTTtBQUMzSCxRQUFJLE9BQU8sWUFBWSxZQUFZLE9BQU8sUUFBUSxhQUFhO0FBQVksVUFBSSxRQUFRLFNBQVMsWUFBWSxRQUFRLEtBQUssSUFBSTtBQUFBO0FBQ3hILGVBQVMsSUFBSSxXQUFXLFNBQVMsR0FBRyxLQUFLLEdBQUc7QUFBSyxZQUFJLElBQUksV0FBVyxDQUFDO0FBQUcsZUFBSyxJQUFJLElBQUksRUFBRSxDQUFDLElBQUksSUFBSSxJQUFJLEVBQUUsUUFBUSxLQUFLLENBQUMsSUFBSSxFQUFFLFFBQVEsR0FBRyxNQUFNO0FBQ2hKLFdBQU8sSUFBSSxLQUFLLEtBQUssT0FBTyxlQUFlLFFBQVEsS0FBSyxDQUFDLEdBQUc7QUFBQSxFQUNoRTtBQUtBLE1BQU0saUJBQWlCO0FBQUEsSUFDbkI7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxFQUNKO0FBQ0EsTUFBTSxpQkFBaUIsYUFBSyxPQUFPO0FBQ25DLE1BQU0sY0FBYyxhQUFLLE9BQU87QUFDaEMsTUFBTSxXQUFXLGFBQUssT0FBTztBQUM3QixNQUFNLFdBQVcsYUFBSyxPQUFPO0FBd0I3QixNQUFNLGVBQU4sY0FBMkIsVUFBVTtBQUFBO0FBQUEsSUFHakMsYUFBYTtBQUFBO0FBQUEsSUFFYixZQUFZO0FBQUE7QUFBQSxJQUVaLGdCQUFnQjtBQUFBO0FBQUE7QUFBQSxJQUdoQixXQUFXO0FBQUE7QUFBQSxJQUVYLGdDQUFnQztBQUFBO0FBQUEsSUFFaEMseUJBQXlCO0FBQUEsSUFDekIsT0FBTztBQUNILFdBQUssYUFBYSxDQUFDLFFBQVEsT0FBTyxFQUFFLEtBQUssVUFBVTtBQUFBLElBQ3ZEO0FBQUEsSUFDQSxTQUFTLENBQUM7QUFBQSxJQUNWLFVBQVU7QUFBQTtBQUFBLElBRVYsVUFBVTtBQUFBLElBQ1Ysa0JBQWtCO0FBQUEsSUFDbEIsUUFBUTtBQUNKLFVBQUksRUFBRSxZQUFZLFNBQVM7QUFDdkIsZ0JBQVEsS0FBSyxvREFBb0Q7QUFDakUsYUFBSyxTQUFTO0FBQ2Q7QUFBQSxNQUNKO0FBQ0EsVUFBSSxLQUFLLFVBQVU7QUFDZixjQUFNLE9BQU8sS0FBSztBQUNsQixjQUFNLFdBQVcsS0FBSztBQUV0QixhQUFLLE9BQU8sZUFBZSxDQUFDLENBQUMsSUFBSSxLQUFLLE9BQU8sV0FBVyxTQUFTLENBQUMsQ0FBQztBQUduRSxpQkFBUyxJQUFJLEdBQUcsSUFBSSxTQUFTLFFBQVEsRUFBRSxHQUFHO0FBQ3RDLGdCQUFNLFFBQVEsS0FBSyxPQUFPLFdBQVcsU0FBUyxDQUFDLENBQUM7QUFFaEQsZUFBSyxPQUFPLE1BQU0sSUFBSSxJQUFJO0FBQUEsUUFDOUI7QUFFQTtBQUFBLE1BQ0o7QUFFQSxZQUFNLGVBQWUsS0FBSyxPQUFPLE1BQU0sV0FBVyxlQUFlLFFBQVEsS0FBSyxRQUFRLGVBQWUsTUFBTTtBQUMzRyxlQUFTLElBQUksR0FBRyxJQUFJLGVBQWUsUUFBUSxFQUFFLEdBQUc7QUFDNUMsY0FBTSxRQUFRLGFBQWEsQ0FBQztBQUM1QixjQUFNLGFBQWEsZUFBZTtBQUFBLFVBQzlCLE1BQU0sS0FBSztBQUFBLFVBQ1gsVUFBVSxLQUFLO0FBQUEsUUFDbkIsQ0FBQztBQUNELGFBQUssT0FBTyxlQUFlLENBQUMsQ0FBQyxJQUFJO0FBQ2pDLGNBQU0sT0FBTyxlQUFlLENBQUM7QUFBQSxNQUNqQztBQUFBLElBQ0o7QUFBQSxJQUNBLE9BQU8sSUFBSTtBQUNQLFVBQUksQ0FBQyxLQUFLLE9BQU87QUFDYjtBQUNKLFdBQUssVUFBVTtBQUNmLFVBQUksS0FBSyxPQUFPLEdBQUcsUUFBUSxjQUFjO0FBQ3JDLGlCQUFTLElBQUksR0FBRyxJQUFJLEtBQUssT0FBTyxHQUFHLFFBQVEsYUFBYSxRQUFRLEVBQUUsR0FBRztBQUNqRSxnQkFBTSxjQUFjLEtBQUssT0FBTyxHQUFHLFFBQVEsYUFBYSxDQUFDO0FBQ3pELGNBQUksQ0FBQyxhQUFhLFFBQVEsYUFBYSxjQUFjLEtBQUs7QUFDdEQ7QUFDSixnQkFBTSxhQUFhLFlBQVksS0FBSyxJQUFJLE9BQU87QUFDL0MsY0FBSSxZQUFZO0FBQ1osa0JBQU0sSUFBSSxLQUFLLE9BQU8sR0FBRyxNQUFNLGFBQWEsWUFBWSxLQUFLLE9BQU8sR0FBRyxxQkFBcUI7QUFDNUYsZ0JBQUksR0FBRztBQUNILHVDQUF5QixLQUFLLFFBQVEsRUFBRSxTQUFTO0FBQUEsWUFDckQ7QUFBQSxVQUNKO0FBQ0EsZUFBSyxPQUFPLGlCQUFpQixXQUFXO0FBQ3hDLHVCQUFLLFVBQVUsYUFBYSxXQUFXO0FBQ3ZDLGVBQUssT0FBTyxpQkFBaUIsY0FBYztBQUkzQyxlQUFLLE9BQU8sT0FBTyxFQUFFLGVBQWU7QUFFcEMsbUJBQVMsSUFBSSxHQUFHLElBQUksZUFBZSxRQUFRLEVBQUUsR0FBRztBQUM1QyxrQkFBTSxZQUFZLGVBQWUsQ0FBQztBQUNsQyxrQkFBTSxRQUFRLEtBQUssT0FBTyxTQUFTO0FBQ25DLGdCQUFJLENBQUM7QUFDRDtBQUNKLGdCQUFJLFlBQVk7QUFDaEIsa0JBQU0sYUFBYSxZQUFZLEtBQUssSUFBSSxTQUFTO0FBQ2pELGdCQUFJLFlBQVk7QUFDWiwwQkFBWSxLQUFLLE9BQU8sR0FBRyxNQUFNLGFBQWEsWUFBWSxLQUFLLE9BQU8sR0FBRyxxQkFBcUI7QUFBQSxZQUNsRztBQUNBLGdCQUFJLFdBQVc7QUFDWCxtQkFBSyxVQUFVO0FBQ2Ysb0JBQU0sc0JBQXNCO0FBQzVCLG9CQUFNLGVBQWU7QUFBQSxnQkFDakIsVUFBVSxVQUFVLFNBQVMsSUFBSSxlQUFlLENBQUM7QUFBQSxnQkFDakQsVUFBVSxVQUFVLFNBQVMsSUFBSSxlQUFlLENBQUM7QUFBQSxnQkFDakQsVUFBVSxVQUFVLFNBQVMsSUFBSSxlQUFlLENBQUM7QUFBQSxjQUNyRCxDQUFDO0FBQ0Qsb0JBQU0sWUFBWSxXQUFXO0FBQzdCLG9CQUFNLGFBQWE7QUFBQSxnQkFDZixVQUFVLFVBQVUsWUFBWTtBQUFBLGdCQUNoQyxVQUFVLFVBQVUsWUFBWTtBQUFBLGdCQUNoQyxVQUFVLFVBQVUsWUFBWTtBQUFBLGdCQUNoQyxVQUFVLFVBQVUsWUFBWTtBQUFBLGNBQ3BDLENBQUM7QUFDRCxrQkFBSSxDQUFDLEtBQUssVUFBVTtBQUVoQixzQkFBTSxJQUFJLFVBQVUsVUFBVTtBQUM5QixzQkFBTSxnQkFBZ0IsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsY0FDbkM7QUFBQSxZQUNKO0FBQUEsVUFDSjtBQUFBLFFBQ0o7QUFBQSxNQUNKO0FBQ0EsVUFBSSxDQUFDLEtBQUssV0FBVyxLQUFLLGlCQUFpQjtBQUN2QyxhQUFLLGtCQUFrQjtBQUN2QixZQUFJLEtBQUssK0JBQStCO0FBQ3BDLGVBQUssa0JBQWtCLEtBQUs7QUFBQSxRQUNoQztBQUNBLFlBQUksS0FBSyx3QkFBd0I7QUFDN0IsZUFBSyx1QkFBdUIsU0FBUztBQUNyQyxlQUFLLGtCQUFrQixNQUFNLEtBQUssc0JBQXNCO0FBQUEsUUFDNUQ7QUFBQSxNQUNKLFdBQ1MsS0FBSyxXQUFXLENBQUMsS0FBSyxpQkFBaUI7QUFDNUMsYUFBSyxrQkFBa0I7QUFDdkIsWUFBSSxLQUFLLCtCQUErQjtBQUNwQyxlQUFLLGtCQUFrQixJQUFJO0FBQUEsUUFDL0I7QUFDQSxZQUFJLEtBQUssd0JBQXdCO0FBQzdCLGVBQUssdUJBQXVCLFNBQVM7QUFDckMsZUFBSyxrQkFBa0IsT0FBTyxLQUFLLHNCQUFzQjtBQUFBLFFBQzdEO0FBQUEsTUFDSjtBQUFBLElBQ0o7QUFBQSxJQUNBLGtCQUFrQixRQUFRLFFBQVE7QUFDOUIsZUFBUyxVQUFVLEtBQUs7QUFDeEIsWUFBTSxXQUFXLE9BQU87QUFDeEIsaUJBQVcsS0FBSyxVQUFVO0FBQ3RCLFVBQUUsU0FBUztBQUNYLGFBQUssa0JBQWtCLFFBQVEsQ0FBQztBQUFBLE1BQ3BDO0FBQUEsSUFDSjtBQUFBLElBQ0EsYUFBYTtBQUNULFdBQUssT0FBTyxrQkFBa0IsRUFBRSxpQkFBaUIsUUFBUTtBQUN6RCxXQUFLLE9BQU8sV0FBVyxFQUFFLGlCQUFpQixRQUFRO0FBQ2xELGFBQU8sYUFBSyxRQUFRLFVBQVUsUUFBUSxJQUFJO0FBQUEsSUFDOUM7QUFBQSxFQUNKO0FBbkpJLGdCQURFLGNBQ0ssWUFBVztBQW9KdEIsRUFBQUEsWUFBVztBQUFBLElBQ1AsU0FBUyxLQUFLLENBQUMsUUFBUSxPQUFPLENBQUM7QUFBQSxFQUNuQyxHQUFHLGFBQWEsV0FBVyxjQUFjLE1BQU07QUFDL0MsRUFBQUEsWUFBVztBQUFBLElBQ1AsU0FBUyxLQUFLO0FBQUEsRUFDbEIsR0FBRyxhQUFhLFdBQVcsYUFBYSxNQUFNO0FBQzlDLEVBQUFBLFlBQVc7QUFBQSxJQUNQLFNBQVMsU0FBUztBQUFBLEVBQ3RCLEdBQUcsYUFBYSxXQUFXLGlCQUFpQixNQUFNO0FBQ2xELEVBQUFBLFlBQVc7QUFBQSxJQUNQLFNBQVMsS0FBSztBQUFBLEVBQ2xCLEdBQUcsYUFBYSxXQUFXLFlBQVksTUFBTTtBQUM3QyxFQUFBQSxZQUFXO0FBQUEsSUFDUCxTQUFTLEtBQUssSUFBSTtBQUFBLEVBQ3RCLEdBQUcsYUFBYSxXQUFXLGlDQUFpQyxNQUFNO0FBQ2xFLEVBQUFBLFlBQVc7QUFBQSxJQUNQLFNBQVMsT0FBTztBQUFBLEVBQ3BCLEdBQUcsYUFBYSxXQUFXLDBCQUEwQixNQUFNOzs7QUNyTzNELHNCQUFPO0FBUVAsTUFBTSxzQkFBTixjQUFrQyxVQUFVO0FBQUEsSUFNeEMsT0FBTztBQUNILFdBQUssU0FBUyxJQUFJLGFBQWEsQ0FBQztBQUNoQyxXQUFLLE1BQU0sSUFBSSxhQUFhLENBQUM7QUFDN0IsV0FBSyxLQUFLLElBQUksYUFBYSxDQUFDO0FBQUEsSUFDaEM7QUFBQSxJQUNBLFNBQVM7QUFDTCxVQUFJLENBQUMsS0FBSztBQUNOO0FBQ0osV0FBSyxPQUFPLG9CQUFvQixLQUFLLE1BQU07QUFDM0MsV0FBSyxPQUFPLFdBQVcsS0FBSyxHQUFHO0FBQy9CLFdBQUssT0FBTyxNQUFNLEtBQUssRUFBRTtBQUN6QixhQUFPLElBQUksS0FBSyxPQUFPLENBQUMsR0FBRyxLQUFLLE9BQU8sQ0FBQyxHQUFHLEtBQUssT0FBTyxDQUFDLENBQUM7QUFDekQsYUFBTyxZQUFZLEtBQUssSUFBSSxDQUFDLEdBQUcsS0FBSyxJQUFJLENBQUMsR0FBRyxLQUFLLElBQUksQ0FBQyxHQUFHLEtBQUssR0FBRyxDQUFDLEdBQUcsS0FBSyxHQUFHLENBQUMsR0FBRyxLQUFLLEdBQUcsQ0FBQyxDQUFDO0FBQUEsSUFDaEc7QUFBQSxFQUNKO0FBbkJJLGdCQURFLHFCQUNLLFlBQVc7QUFDbEIsZ0JBRkUscUJBRUssY0FBYTtBQUFBO0FBQUEsSUFFaEIsU0FBUyxFQUFFLE1BQU0sS0FBSyxNQUFNLFNBQVMsS0FBSztBQUFBLEVBQzlDOzs7QUNiSixNQUFBQyxpQkFBTztBQVlQLE1BQU0sb0JBQU4sY0FBZ0MsVUFBVTtBQUFBLElBY3RDLFFBQVE7QUFDSixXQUFLLFFBQVEsSUFBSSxLQUFLO0FBQUEsUUFDbEIsS0FBSyxDQUFDLEtBQUssR0FBRztBQUFBLFFBQ2QsTUFBTSxLQUFLO0FBQUEsUUFDWCxRQUFRLEtBQUs7QUFBQSxRQUNiLFVBQVUsS0FBSztBQUFBLE1BQ25CLENBQUM7QUFDRCxXQUFLLG9CQUFvQjtBQUN6QixXQUFLLFNBQVMsSUFBSSxhQUFhLENBQUM7QUFDaEMsV0FBSyxhQUFhLElBQUksYUFBYSxDQUFDO0FBQ3BDLFVBQUksS0FBSyxXQUFXLEtBQUssVUFBVTtBQUMvQixhQUFLLGVBQWU7QUFDcEIsYUFBSyxLQUFLO0FBQUEsTUFDZDtBQUFBLElBQ0o7QUFBQSxJQUNBLFNBQVM7QUFDTCxVQUFJLENBQUMsS0FBSyxXQUFXLENBQUMsS0FBSztBQUN2QjtBQUNKLFdBQUssT0FBTyxvQkFBb0IsS0FBSyxNQUFNO0FBSzNDLFVBQUksS0FBSyxJQUFJLEtBQUssV0FBVyxDQUFDLElBQUksS0FBSyxPQUFPLENBQUMsQ0FBQyxJQUFJLFFBQ2hELEtBQUssSUFBSSxLQUFLLFdBQVcsQ0FBQyxJQUFJLEtBQUssT0FBTyxDQUFDLENBQUMsSUFBSSxRQUNoRCxLQUFLLElBQUksS0FBSyxXQUFXLENBQUMsSUFBSSxLQUFLLE9BQU8sQ0FBQyxDQUFDLElBQUksTUFBTztBQUN2RCxhQUFLLGVBQWU7QUFBQSxNQUN4QjtBQUFBLElBQ0o7QUFBQSxJQUNBLGlCQUFpQjtBQUNiLFdBQUssTUFBTSxJQUFJLEtBQUssT0FBTyxDQUFDLEdBQUcsS0FBSyxPQUFPLENBQUMsR0FBRyxLQUFLLE9BQU8sQ0FBQyxHQUFHLEtBQUssaUJBQWlCO0FBQ3JGLFdBQUssV0FBVyxJQUFJLEtBQUssTUFBTTtBQUFBLElBQ25DO0FBQUEsSUFDQSxPQUFPO0FBQ0gsVUFBSSxLQUFLO0FBQ0wsYUFBSyxNQUFNLEtBQUssS0FBSyxpQkFBaUI7QUFDMUMsV0FBSyxvQkFBb0IsS0FBSyxNQUFNLEtBQUs7QUFDekMsVUFBSSxLQUFLO0FBQ0wsYUFBSyxlQUFlO0FBQUEsSUFDNUI7QUFBQSxJQUNBLE9BQU87QUFDSCxVQUFJLENBQUMsS0FBSztBQUNOO0FBQ0osV0FBSyxNQUFNLEtBQUssS0FBSyxpQkFBaUI7QUFDdEMsV0FBSyxvQkFBb0I7QUFBQSxJQUM3QjtBQUFBLElBQ0EsZUFBZTtBQUdYLFdBQUssS0FBSztBQUFBLElBQ2Q7QUFBQSxFQUNKO0FBaEVJLGdCQURFLG1CQUNLLFlBQVc7QUFDbEIsZ0JBRkUsbUJBRUssY0FBYTtBQUFBO0FBQUEsSUFFaEIsUUFBUSxFQUFFLE1BQU0sS0FBSyxPQUFPLFNBQVMsRUFBSTtBQUFBO0FBQUEsSUFFekMsU0FBUyxFQUFFLE1BQU0sS0FBSyxNQUFNLFNBQVMsS0FBSztBQUFBO0FBQUEsSUFFMUMsTUFBTSxFQUFFLE1BQU0sS0FBSyxNQUFNLFNBQVMsTUFBTTtBQUFBO0FBQUEsSUFFeEMsVUFBVSxFQUFFLE1BQU0sS0FBSyxNQUFNLFNBQVMsTUFBTTtBQUFBO0FBQUEsSUFFNUMsS0FBSyxFQUFFLE1BQU0sS0FBSyxRQUFRLFNBQVMsR0FBRztBQUFBLEVBQzFDOzs7QUNqQkcsV0FBUyx3QkFBd0IsS0FBSyxTQUFTLHVCQUF1QjtBQUN6RSxRQUFJLDBCQUEwQixRQUFRO0FBRWxDLFVBQUkscUJBQXFCLElBQUk7QUFDN0IsYUFBTztBQUFBLElBQ1g7QUFDQSxVQUFNLFNBQVMsSUFBSTtBQUNuQixRQUFJLFdBQVcsd0JBQXdCO0FBRW5DLFVBQUksY0FBYztBQUNsQixhQUFPO0FBQUEsSUFDWCxXQUNTLFdBQVcsMkJBQ2hCLFdBQVcsYUFDWCxXQUFXLHdCQUNYLFdBQVcscUJBQXFCO0FBRWhDLFVBQUksaUJBQWlCO0FBQ3JCLGFBQU87QUFBQSxJQUNYLFdBQ1MsV0FBVyxZQUFZO0FBRTVCLFVBQUksY0FBYztBQUNsQixhQUFPO0FBQUEsSUFDWCxXQUNTLFdBQVcsdUJBQXVCO0FBRXZDLFVBQUksZ0JBQWdCO0FBQ3BCLGFBQU87QUFBQSxJQUNYLFdBQ1MsV0FBVyxnQkFBZ0IsV0FBVyxPQUFPO0FBRWxELFVBQUksVUFBVTtBQUNkLGFBQU87QUFBQSxJQUNYLFdBQ1MsV0FBVyw0QkFBNEI7QUFFNUMsVUFBSSxnQkFBZ0I7QUFDcEIsYUFBTztBQUFBLElBQ1g7QUFDQSxXQUFPO0FBQUEsRUFDWDtBQUNPLFdBQVMsUUFBUSxPQUFPO0FBQzNCLFdBQU8sUUFBUSxLQUFLLEtBQUs7QUFBQSxFQUM3QjtBQUNPLFdBQVMsUUFBUSxPQUFPO0FBQzNCLFdBQVEsUUFBUSxNQUFTLEtBQUs7QUFBQSxFQUNsQzs7O0FDM0NBLE1BQU0sZUFBTixjQUEyQixVQUFVO0FBQUEsSUFVakMsUUFBUTtBQUNKLFVBQUksQ0FBQyxLQUFLLFVBQVU7QUFDaEIsY0FBTSxNQUFNLDBDQUEwQztBQUFBLE1BQzFEO0FBQ0EsV0FBSyxPQUFPLFNBQ1AsS0FBSyxLQUFLLEtBQUssV0FBVyxFQUMxQixLQUFLLENBQUMsWUFBWTtBQUNuQixjQUFNLE1BQU0sS0FBSztBQUNqQixZQUFJLENBQUMsd0JBQXdCLEtBQUssU0FBUyxLQUFLLGVBQWUsR0FBRztBQUM5RCxrQkFBUSxNQUFNLFVBQVUsSUFBSSxRQUFRLGdDQUFnQztBQUFBLFFBQ3hFO0FBQUEsTUFDSixDQUFDLEVBQ0ksTUFBTSxRQUFRLEdBQUc7QUFBQSxJQUMxQjtBQUFBLEVBQ0o7QUF2QkksZ0JBREUsY0FDSyxZQUFXO0FBQ2xCLGdCQUZFLGNBRUssY0FBYTtBQUFBO0FBQUEsSUFFaEIsS0FBSyxTQUFTLE9BQU87QUFBQTtBQUFBLElBRXJCLFVBQVUsU0FBUyxTQUFTO0FBQUE7QUFBQSxJQUU1QixpQkFBaUIsU0FBUyxPQUFPLE1BQU07QUFBQSxFQUMzQzs7O0FDdEJKLE1BQUlDLGNBQTBDLFNBQVUsWUFBWSxRQUFRLEtBQUssTUFBTTtBQUNuRixRQUFJLElBQUksVUFBVSxRQUFRLElBQUksSUFBSSxJQUFJLFNBQVMsU0FBUyxPQUFPLE9BQU8sT0FBTyx5QkFBeUIsUUFBUSxHQUFHLElBQUksTUFBTTtBQUMzSCxRQUFJLE9BQU8sWUFBWSxZQUFZLE9BQU8sUUFBUSxhQUFhO0FBQVksVUFBSSxRQUFRLFNBQVMsWUFBWSxRQUFRLEtBQUssSUFBSTtBQUFBO0FBQ3hILGVBQVMsSUFBSSxXQUFXLFNBQVMsR0FBRyxLQUFLLEdBQUc7QUFBSyxZQUFJLElBQUksV0FBVyxDQUFDO0FBQUcsZUFBSyxJQUFJLElBQUksRUFBRSxDQUFDLElBQUksSUFBSSxJQUFJLEVBQUUsUUFBUSxLQUFLLENBQUMsSUFBSSxFQUFFLFFBQVEsR0FBRyxNQUFNO0FBQ2hKLFdBQU8sSUFBSSxLQUFLLEtBQUssT0FBTyxlQUFlLFFBQVEsS0FBSyxDQUFDLEdBQUc7QUFBQSxFQUNoRTtBQUlBLE1BQU0saUJBQWlCLENBQUMsTUFBTTtBQUFFLE1BQUUsZUFBZTtBQUFBLEVBQUc7QUFPcEQsTUFBTSxxQkFBTixjQUFpQyxVQUFVO0FBQUE7QUFBQSxJQUd2QyxZQUFZO0FBQUE7QUFBQTtBQUFBLElBR1osbUJBQW1CO0FBQUE7QUFBQTtBQUFBLElBR25CLG1CQUFtQjtBQUFBO0FBQUEsSUFFbkIscUJBQXFCO0FBQUEsSUFDckIsbUJBQW1CO0FBQUEsSUFDbkIsbUJBQW1CO0FBQUEsSUFDbkIsU0FBUyxJQUFJLGFBQWEsQ0FBQztBQUFBLElBQzNCLGVBQWUsSUFBSSxhQUFhLENBQUM7QUFBQSxJQUNqQyxZQUFZO0FBQUEsSUFDWixZQUFZO0FBQUEsSUFDWixZQUFZO0FBQUEsSUFDWixhQUFhO0FBQ1QsZUFBUyxpQkFBaUIsYUFBYSxLQUFLLFdBQVc7QUFDdkQsWUFBTUMsVUFBUyxLQUFLLE9BQU87QUFDM0IsVUFBSSxLQUFLLG9CQUFvQjtBQUN6QixRQUFBQSxRQUFPLGlCQUFpQixhQUFhLEtBQUssa0JBQWtCO0FBQUEsTUFDaEU7QUFDQSxVQUFJLEtBQUssa0JBQWtCO0FBQ3ZCLFlBQUksS0FBSyxxQkFBcUIsR0FBRztBQUM3QixVQUFBQSxRQUFPLGlCQUFpQixlQUFlLGdCQUFnQixLQUFLO0FBQUEsUUFDaEU7QUFDQSxRQUFBQSxRQUFPLGlCQUFpQixhQUFhLEtBQUssV0FBVztBQUNyRCxRQUFBQSxRQUFPLGlCQUFpQixXQUFXLEtBQUssU0FBUztBQUFBLE1BQ3JEO0FBQUEsSUFDSjtBQUFBLElBQ0EsZUFBZTtBQUNYLGVBQVMsb0JBQW9CLGFBQWEsS0FBSyxXQUFXO0FBQzFELFlBQU1BLFVBQVMsS0FBSyxPQUFPO0FBQzNCLFVBQUksS0FBSyxvQkFBb0I7QUFDekIsUUFBQUEsUUFBTyxvQkFBb0IsYUFBYSxLQUFLLGtCQUFrQjtBQUFBLE1BQ25FO0FBQ0EsVUFBSSxLQUFLLGtCQUFrQjtBQUN2QixZQUFJLEtBQUsscUJBQXFCLEdBQUc7QUFDN0IsVUFBQUEsUUFBTyxvQkFBb0IsZUFBZSxnQkFBZ0IsS0FBSztBQUFBLFFBQ25FO0FBQ0EsUUFBQUEsUUFBTyxvQkFBb0IsYUFBYSxLQUFLLFdBQVc7QUFDeEQsUUFBQUEsUUFBTyxvQkFBb0IsV0FBVyxLQUFLLFNBQVM7QUFBQSxNQUN4RDtBQUFBLElBQ0o7QUFBQSxJQUNBLHFCQUFxQixNQUFNO0FBQ3ZCLFlBQU1BLFVBQVMsS0FBSyxPQUFPO0FBQzNCLE1BQUFBLFFBQU8scUJBQ0hBLFFBQU8sc0JBQ0hBLFFBQU8seUJBQ1BBLFFBQU87QUFDZixNQUFBQSxRQUFPLG1CQUFtQjtBQUFBLElBQzlCO0FBQUEsSUFDQSxjQUFjLENBQUMsTUFBTTtBQUNqQixVQUFJLEVBQUUsV0FBVyxLQUFLLGtCQUFrQjtBQUNwQyxhQUFLLFlBQVk7QUFDakIsaUJBQVMsS0FBSyxNQUFNLFNBQVM7QUFDN0IsWUFBSSxFQUFFLFdBQVcsR0FBRztBQUNoQixZQUFFLGVBQWU7QUFFakIsaUJBQU87QUFBQSxRQUNYO0FBQUEsTUFDSjtBQUFBLElBQ0o7QUFBQSxJQUNBLFlBQVksQ0FBQyxNQUFNO0FBQ2YsVUFBSSxFQUFFLFdBQVcsS0FBSyxrQkFBa0I7QUFDcEMsYUFBSyxZQUFZO0FBQ2pCLGlCQUFTLEtBQUssTUFBTSxTQUFTO0FBQUEsTUFDakM7QUFBQSxJQUNKO0FBQUEsSUFDQSxjQUFjLENBQUMsTUFBTTtBQUNqQixVQUFJLEtBQUssV0FBVyxLQUFLLGFBQWEsQ0FBQyxLQUFLLG1CQUFtQjtBQUMzRCxhQUFLLFlBQWEsQ0FBQyxLQUFLLFlBQVksRUFBRSxZQUFhO0FBQ25ELGFBQUssWUFBYSxDQUFDLEtBQUssWUFBWSxFQUFFLFlBQWE7QUFDbkQsYUFBSyxvQkFBb0IsS0FBSztBQUM5QixhQUFLLG9CQUFvQixLQUFLO0FBRTlCLGFBQUssbUJBQW1CLEtBQUssSUFBSSxPQUFPLEtBQUssZ0JBQWdCO0FBQzdELGFBQUssbUJBQW1CLEtBQUssSUFBSSxRQUFRLEtBQUssZ0JBQWdCO0FBQzlELGFBQUssT0FBTyxpQkFBaUIsS0FBSyxNQUFNO0FBQ3hDLGNBQU0sU0FBUyxLQUFLLE9BQU87QUFDM0IsWUFBSSxRQUFRO0FBQ1IsaUJBQU8saUJBQWlCLEtBQUssWUFBWTtBQUN6Qyx1QkFBSyxJQUFJLEtBQUssUUFBUSxLQUFLLFFBQVEsS0FBSyxZQUFZO0FBQUEsUUFDeEQ7QUFDQSxhQUFLLE9BQU8sc0JBQXNCO0FBQ2xDLGFBQUssT0FBTyx3QkFBd0IsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEtBQUssZ0JBQWdCO0FBQ3BFLGFBQUssT0FBTyx3QkFBd0IsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEtBQUssZ0JBQWdCO0FBQ3BFLGFBQUssT0FBTyxlQUFlLEtBQUssTUFBTTtBQUFBLE1BQzFDO0FBQUEsSUFDSjtBQUFBLEVBQ0o7QUE1RkksZ0JBREUsb0JBQ0ssWUFBVztBQTZGdEIsRUFBQUQsWUFBVztBQUFBLElBQ1AsU0FBUyxNQUFNLElBQUk7QUFBQSxFQUN2QixHQUFHLG1CQUFtQixXQUFXLGFBQWEsTUFBTTtBQUNwRCxFQUFBQSxZQUFXO0FBQUEsSUFDUCxTQUFTLEtBQUssSUFBSTtBQUFBLEVBQ3RCLEdBQUcsbUJBQW1CLFdBQVcsb0JBQW9CLE1BQU07QUFDM0QsRUFBQUEsWUFBVztBQUFBLElBQ1AsU0FBUyxJQUFJO0FBQUEsRUFDakIsR0FBRyxtQkFBbUIsV0FBVyxvQkFBb0IsTUFBTTtBQUMzRCxFQUFBQSxZQUFXO0FBQUEsSUFDUCxTQUFTLEtBQUssS0FBSztBQUFBLEVBQ3ZCLEdBQUcsbUJBQW1CLFdBQVcsc0JBQXNCLE1BQU07OztBQ3pIN0QsTUFBSUUsY0FBMEMsU0FBVSxZQUFZLFFBQVEsS0FBSyxNQUFNO0FBQ25GLFFBQUksSUFBSSxVQUFVLFFBQVEsSUFBSSxJQUFJLElBQUksU0FBUyxTQUFTLE9BQU8sT0FBTyxPQUFPLHlCQUF5QixRQUFRLEdBQUcsSUFBSSxNQUFNO0FBQzNILFFBQUksT0FBTyxZQUFZLFlBQVksT0FBTyxRQUFRLGFBQWE7QUFBWSxVQUFJLFFBQVEsU0FBUyxZQUFZLFFBQVEsS0FBSyxJQUFJO0FBQUE7QUFDeEgsZUFBUyxJQUFJLFdBQVcsU0FBUyxHQUFHLEtBQUssR0FBRztBQUFLLFlBQUksSUFBSSxXQUFXLENBQUM7QUFBRyxlQUFLLElBQUksSUFBSSxFQUFFLENBQUMsSUFBSSxJQUFJLElBQUksRUFBRSxRQUFRLEtBQUssQ0FBQyxJQUFJLEVBQUUsUUFBUSxHQUFHLE1BQU07QUFDaEosV0FBTyxJQUFJLEtBQUssS0FBSyxPQUFPLGVBQWUsUUFBUSxLQUFLLENBQUMsR0FBRztBQUFBLEVBQ2hFO0FBT0EsTUFBTSxlQUFOLGNBQTJCLFVBQVU7QUFBQSxJQUVqQyxTQUFTO0FBQUEsSUFDVDtBQUFBLElBQ0E7QUFBQSxJQUNBLFFBQVE7QUFDSixXQUFLLE9BQU8sc0JBQXNCO0FBQ2xDLFdBQUssT0FBTyxlQUFlLENBQUMsR0FBSyxLQUFLLFFBQVEsQ0FBRyxDQUFDO0FBQ2xELFdBQUsseUJBQXlCLEtBQUssaUJBQWlCLEtBQUssSUFBSTtBQUM3RCxXQUFLLHVCQUF1QixLQUFLLGVBQWUsS0FBSyxJQUFJO0FBQUEsSUFDN0Q7QUFBQSxJQUNBLGFBQWE7QUFDVCxXQUFLLE9BQU8saUJBQWlCLElBQUksS0FBSyxzQkFBc0I7QUFDNUQsV0FBSyxPQUFPLGVBQWUsSUFBSSxLQUFLLG9CQUFvQjtBQUFBLElBQzVEO0FBQUEsSUFDQSxlQUFlO0FBQ1gsV0FBSyxPQUFPLGlCQUFpQixPQUFPLEtBQUssc0JBQXNCO0FBQy9ELFdBQUssT0FBTyxlQUFlLE9BQU8sS0FBSyxvQkFBb0I7QUFBQSxJQUMvRDtBQUFBLElBQ0EsbUJBQW1CO0FBQ2YsWUFBTSxPQUFPLEtBQUssT0FBTyxJQUFJO0FBQzdCLFVBQUksU0FBUyxXQUFXLFNBQVMsVUFBVTtBQUN2QyxhQUFLLE9BQU8sc0JBQXNCO0FBQUEsTUFDdEM7QUFBQSxJQUNKO0FBQUEsSUFDQSxpQkFBaUI7QUFDYixZQUFNLE9BQU8sS0FBSyxPQUFPLElBQUk7QUFDN0IsVUFBSSxTQUFTLFdBQVcsU0FBUyxVQUFVO0FBQ3ZDLGFBQUssT0FBTyxzQkFBc0I7QUFDbEMsYUFBSyxPQUFPLGVBQWUsQ0FBQyxHQUFLLEtBQUssUUFBUSxDQUFHLENBQUM7QUFBQSxNQUN0RDtBQUFBLElBQ0o7QUFBQSxFQUNKO0FBL0JJLGdCQURFLGNBQ0ssWUFBVztBQWdDdEIsRUFBQUEsWUFBVztBQUFBLElBQ1AsU0FBUyxNQUFNLElBQUk7QUFBQSxFQUN2QixHQUFHLGFBQWEsV0FBVyxVQUFVLE1BQU07OztBQzlCM0MsTUFBTSxrQkFBTixjQUE4QixVQUFVO0FBQUEsSUFLcEMsUUFBUTtBQUNKLFdBQUsseUJBQXlCLEtBQUssbUJBQW1CLEtBQUssSUFBSTtBQUFBLElBQ25FO0FBQUEsSUFDQSxhQUFhO0FBQ1QsV0FBSyxPQUFPLGlCQUFpQixJQUFJLEtBQUssc0JBQXNCO0FBQUEsSUFDaEU7QUFBQSxJQUNBLGVBQWU7QUFDWCxXQUFLLE9BQU8saUJBQWlCLE9BQU8sS0FBSyxzQkFBc0I7QUFBQSxJQUNuRTtBQUFBLElBQ0EsbUJBQW1CLEdBQUc7QUFDbEIsVUFBSSxFQUFFLHVCQUF1QixFQUFFLHVCQUF1QjtBQUNsRCxjQUFNLElBQUksS0FBSyxPQUFPLEdBQUcsUUFBUTtBQUNqQyxVQUFFLEtBQUssQ0FBQ0MsSUFBRyxNQUFNLEtBQUssSUFBSUEsS0FBSSxLQUFLLFNBQVMsSUFBSSxLQUFLLElBQUksSUFBSSxLQUFLLFNBQVMsQ0FBQztBQUM1RSxhQUFLLE9BQU8sR0FBRyxRQUFRLHNCQUFzQixFQUFFLENBQUMsQ0FBQztBQUFBLE1BQ3JEO0FBQUEsSUFDSjtBQUFBLEVBQ0o7QUFwQkksZ0JBREUsaUJBQ0ssWUFBVztBQUNsQixnQkFGRSxpQkFFSyxjQUFhO0FBQUEsSUFDaEIsV0FBVyxFQUFFLE1BQU0sS0FBSyxPQUFPLFNBQVMsR0FBSztBQUFBLEVBQ2pEOzs7QUNkSixNQUFNLG9CQUFOLGNBQWdDLFVBQVU7QUFBQSxJQW9DdEMsT0FBTztBQUNILFdBQUssc0JBQXNCLElBQUksYUFBYSxDQUFDO0FBQzdDLFdBQUssV0FBVyxJQUFJLGFBQWEsQ0FBQztBQUNsQyxXQUFLLFlBQVksSUFBSSxhQUFhLENBQUM7QUFDbkMsV0FBSyw0QkFBNEI7QUFDakMsV0FBSyxRQUFRLEtBQUssT0FBTyxhQUFhLE9BQU87QUFDN0MsVUFBSSxDQUFDLEtBQUssT0FBTztBQUNiLGdCQUFRLE1BQU0sS0FBSyxPQUFPLE1BQU0sMEVBQTBFO0FBQzFHO0FBQUEsTUFDSjtBQUNBLFVBQUksQ0FBQyxLQUFLLDZCQUE2QjtBQUNuQyxnQkFBUSxNQUFNLEtBQUssT0FBTyxNQUFNLG1FQUFtRTtBQUNuRztBQUFBLE1BQ0o7QUFDQSxVQUFJLENBQUMsS0FBSyxTQUFTO0FBQ2YsZ0JBQVEsTUFBTSxLQUFLLE9BQU8sTUFBTSxnREFBZ0Q7QUFDaEY7QUFBQSxNQUNKO0FBQ0EsV0FBSyxlQUFlO0FBQ3BCLFdBQUssa0JBQWtCO0FBQ3ZCLFdBQUssVUFBVSxJQUFJLGFBQWEsQ0FBQztBQUNqQyxXQUFLLFVBQVU7QUFDZixXQUFLLGlCQUFpQjtBQUN0QixXQUFLLG9CQUFvQixJQUFJLGFBQWEsQ0FBQztBQUFBLElBQy9DO0FBQUEsSUFDQSxRQUFRO0FBQ0osVUFBSSxLQUFLLEtBQUs7QUFDVixhQUFLLG9CQUFvQjtBQUN6QixlQUFPLGlCQUFpQixhQUFhLEtBQUssWUFBWSxLQUFLLElBQUksQ0FBQztBQUNoRSxlQUFPLGlCQUFpQixXQUFXLEtBQUssVUFBVSxLQUFLLElBQUksQ0FBQztBQUFBLE1BQ2hFO0FBQ0EsVUFBSSxLQUFLLGNBQWMsR0FBRztBQUN0QixjQUFNLFlBQVksS0FBSyxPQUFPLGFBQWEsT0FBTztBQUNsRCxZQUFJLENBQUMsV0FBVztBQUNaLGtCQUFRLEtBQUssZ0NBQWdDLEtBQUssT0FBTyxNQUFNLHNGQUN2QjtBQUFBLFFBQzVDLE9BQ0s7QUFDRCxlQUFLLGFBQWEsVUFBVTtBQUM1QixlQUFLLFFBQVE7QUFBQSxRQUNqQjtBQUFBLE1BQ0osT0FDSztBQUNELGFBQUssYUFBYSxDQUFDLFFBQVEsT0FBTyxFQUFFLEtBQUssYUFBYSxDQUFDO0FBQUEsTUFDM0Q7QUFDQSxXQUFLLHlCQUF5QixLQUFLLGNBQWMsS0FBSyxJQUFJO0FBQzFELFdBQUssNEJBQTRCLFNBQVM7QUFBQSxJQUM5QztBQUFBLElBQ0EsYUFBYTtBQUNULFdBQUssT0FBTyxpQkFBaUIsSUFBSSxLQUFLLHNCQUFzQjtBQUFBLElBQ2hFO0FBQUEsSUFDQSxlQUFlO0FBQ1gsV0FBSyxPQUFPLGlCQUFpQixPQUFPLEtBQUssc0JBQXNCO0FBQUEsSUFDbkU7QUFBQTtBQUFBLElBRUEsa0JBQWtCO0FBQ2QsV0FBSyxRQUFRLFdBQVcsS0FBSyxRQUFRO0FBQ3JDLFdBQUssU0FBUyxDQUFDLElBQUk7QUFDbkIsbUJBQUssVUFBVSxLQUFLLFVBQVUsS0FBSyxRQUFRO0FBQzNDLGFBQU8sS0FBSyxNQUFNLEtBQUssU0FBUyxDQUFDLEdBQUcsS0FBSyxTQUFTLENBQUMsQ0FBQztBQUFBLElBQ3hEO0FBQUEsSUFDQSxTQUFTO0FBQ0wsVUFBSSxjQUFjO0FBQ2xCLFVBQUksS0FBSyxXQUFXLEtBQUssUUFBUSxNQUFNO0FBQ25DLGFBQUssa0JBQWtCLENBQUMsSUFBSSxLQUFLLFFBQVEsS0FBSyxDQUFDO0FBQy9DLGFBQUssa0JBQWtCLENBQUMsSUFBSSxLQUFLLFFBQVEsS0FBSyxDQUFDO0FBQy9DLHNCQUNJLEtBQUssSUFBSSxLQUFLLGtCQUFrQixDQUFDLENBQUMsSUFBSSxLQUFLLElBQUksS0FBSyxrQkFBa0IsQ0FBQyxDQUFDO0FBQUEsTUFDaEY7QUFDQSxVQUFJLENBQUMsS0FBSyxnQkFDTixLQUFLLG9CQUFvQixDQUFDLEtBQUssS0FBSyxrQ0FDcEMsS0FBSyxrQkFBa0IsQ0FBQyxJQUFJLEtBQUssZ0NBQWdDO0FBQ2pFLGFBQUssZUFBZTtBQUFBLE1BQ3hCLFdBQ1MsS0FBSyxnQkFDVixjQUFjLEtBQUssa0NBQWtDO0FBQ3JELGFBQUssZUFBZTtBQUNwQixhQUFLLDRCQUE0QixTQUFTO0FBQzFDLFlBQUksS0FBSyxTQUFTO0FBQ2QsZUFBSyxnQkFBZ0IsS0FBSyxTQUFTLEtBQUssY0FBYztBQUFBLFFBQzFEO0FBQUEsTUFDSjtBQUNBLFVBQUksS0FBSyxnQkFBZ0IsS0FBSywrQkFBK0IsS0FBSyxPQUFPO0FBQ3JFLGNBQU0sU0FBUyxLQUFLO0FBQ3BCLGFBQUssT0FBTyxpQkFBaUIsTUFBTTtBQUNuQyxjQUFNQyxhQUFZLEtBQUssT0FBTyxnQkFBZ0IsS0FBSyxRQUFRO0FBQzNELFlBQUksU0FBVSxLQUFLLFNBQ2YsS0FBSyxlQUFlLElBQ2QsS0FBSyxPQUFPLE1BQU0sUUFBUSxRQUFRQSxZQUFXLEtBQUssS0FBSyxVQUFVLElBQ2pFLEtBQUssT0FBTyxRQUFRLFFBQVEsUUFBUUEsWUFBVyxLQUFLLEtBQUssWUFBWSxLQUFLLFdBQVc7QUFDL0YsWUFBSSxPQUFPLFdBQVcsR0FBRztBQUNyQixlQUFLLGtCQUFrQjtBQUN2QixlQUFLLGlCQUNELEtBQUssS0FDRCxLQUFLLE1BQU0sS0FBSyxrQkFBa0IsQ0FBQyxHQUFHLEtBQUssa0JBQWtCLENBQUMsQ0FBQztBQUN2RSxlQUFLLDRCQUNELEtBQUssZ0JBQWdCLEtBQUssS0FBSyxpQkFBaUIsS0FBSztBQUN6RCxlQUFLLDRCQUE0QixzQkFBc0I7QUFDdkQsZUFBSyw0QkFBNEIsbUJBQW1CLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxLQUFLLHlCQUF5QjtBQUM3RixlQUFLLDRCQUE0QixVQUFVLE9BQU8sVUFBVSxDQUFDLENBQUM7QUFDOUQsZUFBSyw0QkFBNEIsVUFBVTtBQUFBLFlBQ3ZDO0FBQUEsWUFDQSxLQUFLO0FBQUEsWUFDTDtBQUFBLFVBQ0osQ0FBQztBQUNELGVBQUssNEJBQTRCLFNBQVM7QUFDMUMsZUFBSyxRQUFRLElBQUksT0FBTyxVQUFVLENBQUMsQ0FBQztBQUNwQyxlQUFLLFVBQVU7QUFBQSxRQUNuQixPQUNLO0FBQ0QsY0FBSSxDQUFDLEtBQUssaUJBQWlCO0FBQ3ZCLGlCQUFLLDRCQUE0QixTQUFTO0FBQzFDLGlCQUFLLGtCQUFrQjtBQUFBLFVBQzNCO0FBQ0EsZUFBSyxVQUFVO0FBQUEsUUFDbkI7QUFBQSxNQUNKLFdBQ1MsS0FBSywrQkFBK0IsS0FBSyxtQkFBbUI7QUFDakUsYUFBSyxlQUFlO0FBQUEsTUFDeEI7QUFDQSxXQUFLLG9CQUFvQixJQUFJLEtBQUssaUJBQWlCO0FBQUEsSUFDdkQ7QUFBQSxJQUNBLGNBQWMsR0FBRztBQUViLFdBQUssVUFBVTtBQUNmLFFBQUUsaUJBQWlCLE9BQU8sV0FBWTtBQUdsQyxhQUFLLFVBQVU7QUFDZixhQUFLLFVBQVU7QUFBQSxNQUNuQixFQUFFLEtBQUssSUFBSSxDQUFDO0FBQ1osVUFBSSxFQUFFLGdCQUFnQixFQUFFLGFBQWEsUUFBUTtBQUN6QyxpQkFBUyxJQUFJLEdBQUcsSUFBSSxFQUFFLGFBQWEsUUFBUSxLQUFLO0FBQzVDLGNBQUksY0FBYyxFQUFFLGFBQWEsQ0FBQztBQUNsQyxjQUFJLFlBQVksY0FBYyxLQUFLLFlBQVk7QUFDM0MsaUJBQUssVUFBVSxZQUFZO0FBQUEsVUFDL0I7QUFBQSxRQUNKO0FBQUEsTUFDSjtBQUNBLFFBQUUsaUJBQWlCLHNCQUFzQixTQUFVLEdBQUc7QUFDbEQsWUFBSSxFQUFFLFNBQVMsRUFBRSxNQUFNLFFBQVE7QUFDM0IsbUJBQVMsSUFBSSxHQUFHLElBQUksRUFBRSxNQUFNLFFBQVEsS0FBSztBQUNyQyxnQkFBSSxjQUFjLEVBQUUsTUFBTSxDQUFDO0FBQzNCLGdCQUFJLFlBQVksY0FBYyxLQUFLLFlBQVk7QUFDM0MsbUJBQUssVUFBVSxZQUFZO0FBQUEsWUFDL0I7QUFBQSxVQUNKO0FBQUEsUUFDSjtBQUFBLE1BQ0osRUFBRSxLQUFLLElBQUksQ0FBQztBQUFBLElBQ2hCO0FBQUEsSUFDQSxjQUFjO0FBQ1YsV0FBSyxvQkFBb0I7QUFBQSxJQUM3QjtBQUFBLElBQ0EsWUFBWTtBQUNSLFdBQUssb0JBQW9CO0FBQ3pCLFdBQUssNEJBQTRCLFNBQVM7QUFDMUMsVUFBSSxLQUFLLFNBQVM7QUFDZCxhQUFLLGdCQUFnQixLQUFLLFNBQVMsQ0FBRztBQUFBLE1BQzFDO0FBQUEsSUFDSjtBQUFBLElBQ0EsaUJBQWlCO0FBQ2IsVUFBSSxTQUFTLENBQUMsR0FBRyxHQUFHLENBQUM7QUFDckIsV0FBSyxJQUFJLGlCQUFpQixNQUFNO0FBQ2hDLFlBQU1BLGFBQVksS0FBSyxJQUFJLFdBQVcsS0FBSyxRQUFRO0FBQ25ELFVBQUksU0FBVSxLQUFLLFNBQ2YsS0FBSyxlQUFlLElBQ2QsS0FBSyxPQUFPLE1BQU0sUUFBUSxRQUFRQSxZQUFXLEtBQUssS0FBSyxVQUFVLElBQ2pFLEtBQUssT0FBTyxRQUFRLFFBQVEsUUFBUUEsWUFBVyxLQUFLLEtBQUssWUFBWSxLQUFLLFdBQVc7QUFDL0YsVUFBSSxPQUFPLFdBQVcsR0FBRztBQUNyQixhQUFLLGtCQUFrQjtBQUN2QixRQUFBQSxXQUFVLENBQUMsSUFBSTtBQUNmLHFCQUFLLFVBQVVBLFlBQVdBLFVBQVM7QUFDbkMsYUFBSyw0QkFDRCxDQUFDLEtBQUssS0FBS0EsV0FBVSxDQUFDLENBQUMsSUFBSSxLQUFLLEtBQUtBLFdBQVUsQ0FBQyxDQUFDLElBQUksS0FBSyxLQUFLO0FBQ25FLGFBQUssNEJBQTRCLHNCQUFzQjtBQUN2RCxhQUFLLDRCQUE0QixtQkFBbUIsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEtBQUsseUJBQXlCO0FBQzdGLGFBQUssNEJBQTRCLFVBQVUsT0FBTyxVQUFVLENBQUMsQ0FBQztBQUM5RCxhQUFLLDRCQUE0QixTQUFTO0FBQzFDLGFBQUssVUFBVSxPQUFPLFVBQVUsQ0FBQztBQUNqQyxhQUFLLFVBQVU7QUFBQSxNQUNuQixPQUNLO0FBQ0QsWUFBSSxDQUFDLEtBQUssaUJBQWlCO0FBQ3ZCLGVBQUssNEJBQTRCLFNBQVM7QUFDMUMsZUFBSyxrQkFBa0I7QUFBQSxRQUMzQjtBQUNBLGFBQUssVUFBVTtBQUFBLE1BQ25CO0FBQUEsSUFDSjtBQUFBLElBQ0EsZ0JBQWdCLGFBQWEsZUFBZTtBQUN4QyxXQUFLLFFBQVEsbUJBQW1CLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxhQUFhO0FBQ3hELFlBQU0sSUFBSSxLQUFLO0FBQ2YsWUFBTSxLQUFLLEtBQUs7QUFDaEIsVUFBSSxLQUFLLFNBQVM7QUFDZCxhQUFLLFFBQVEsaUJBQWlCLENBQUM7QUFDL0IsYUFBSyxTQUFTLGlCQUFpQixFQUFFO0FBQ2pDLHFCQUFLLElBQUksR0FBRyxHQUFHLEVBQUU7QUFDakIscUJBQUssTUFBTSxHQUFHLEdBQUcsR0FBRztBQUFBLE1BQ3hCLE9BQ0s7QUFDRCxhQUFLLElBQUksaUJBQWlCLENBQUM7QUFBQSxNQUMvQjtBQUNBLFdBQUssUUFBUSxpQkFBaUIsRUFBRTtBQUNoQyxtQkFBSyxJQUFJLEdBQUcsSUFBSSxDQUFDO0FBQ2pCLFFBQUUsQ0FBQyxLQUFLLFlBQVksQ0FBQztBQUNyQixRQUFFLENBQUMsSUFBSSxZQUFZLENBQUM7QUFDcEIsUUFBRSxDQUFDLEtBQUssWUFBWSxDQUFDO0FBQ3JCLFdBQUssUUFBUSxpQkFBaUIsQ0FBQztBQUFBLElBQ25DO0FBQUEsRUFDSjtBQXBQSSxnQkFERSxtQkFDSyxZQUFXO0FBQ2xCLGdCQUZFLG1CQUVLLGNBQWE7QUFBQTtBQUFBLElBRWhCLDZCQUE2QixFQUFFLE1BQU0sS0FBSyxPQUFPO0FBQUE7QUFBQSxJQUVqRCxTQUFTLEVBQUUsTUFBTSxLQUFLLE9BQU87QUFBQTtBQUFBLElBRTdCLEtBQUssRUFBRSxNQUFNLEtBQUssT0FBTztBQUFBO0FBQUEsSUFFekIsU0FBUyxFQUFFLE1BQU0sS0FBSyxPQUFPO0FBQUE7QUFBQSxJQUU3QixVQUFVLEVBQUUsTUFBTSxLQUFLLE9BQU87QUFBQTtBQUFBLElBRTlCLFlBQVk7QUFBQSxNQUNSLE1BQU0sS0FBSztBQUFBLE1BQ1gsUUFBUSxDQUFDLG1CQUFtQixRQUFRLFNBQVMsTUFBTTtBQUFBLE1BQ25ELFNBQVM7QUFBQSxJQUNiO0FBQUE7QUFBQSxJQUVBLFlBQVksRUFBRSxNQUFNLEtBQUssS0FBSyxTQUFTLEVBQUU7QUFBQTtBQUFBLElBRXpDLGdDQUFnQyxFQUFFLE1BQU0sS0FBSyxPQUFPLFNBQVMsS0FBSztBQUFBO0FBQUEsSUFFbEUsa0NBQWtDLEVBQUUsTUFBTSxLQUFLLE9BQU8sU0FBUyxJQUFJO0FBQUE7QUFBQSxJQUVuRSxrQkFBa0IsRUFBRSxNQUFNLEtBQUssT0FBTyxTQUFTLEtBQUs7QUFBQTtBQUFBLElBRXBELGFBQWE7QUFBQSxNQUNULE1BQU0sS0FBSztBQUFBLE1BQ1gsUUFBUSxDQUFDLGFBQWEsT0FBTztBQUFBLE1BQzdCLFNBQVM7QUFBQSxJQUNiO0FBQUE7QUFBQSxJQUVBLGFBQWEsRUFBRSxNQUFNLEtBQUssT0FBTyxTQUFTLElBQU07QUFBQSxFQUNwRDs7O0FDMUNKLE1BQUlDLGNBQTBDLFNBQVUsWUFBWSxRQUFRLEtBQUssTUFBTTtBQUNuRixRQUFJLElBQUksVUFBVSxRQUFRLElBQUksSUFBSSxJQUFJLFNBQVMsU0FBUyxPQUFPLE9BQU8sT0FBTyx5QkFBeUIsUUFBUSxHQUFHLElBQUksTUFBTTtBQUMzSCxRQUFJLE9BQU8sWUFBWSxZQUFZLE9BQU8sUUFBUSxhQUFhO0FBQVksVUFBSSxRQUFRLFNBQVMsWUFBWSxRQUFRLEtBQUssSUFBSTtBQUFBO0FBQ3hILGVBQVMsSUFBSSxXQUFXLFNBQVMsR0FBRyxLQUFLLEdBQUc7QUFBSyxZQUFJLElBQUksV0FBVyxDQUFDO0FBQUcsZUFBSyxJQUFJLElBQUksRUFBRSxDQUFDLElBQUksSUFBSSxJQUFJLEVBQUUsUUFBUSxLQUFLLENBQUMsSUFBSSxFQUFFLFFBQVEsR0FBRyxNQUFNO0FBQ2hKLFdBQU8sSUFBSSxLQUFLLEtBQUssT0FBTyxlQUFlLFFBQVEsS0FBSyxDQUFDLEdBQUc7QUFBQSxFQUNoRTtBQUlBLE1BQU0sWUFBWSxhQUFLLE9BQU87QUFDOUIsTUFBTSxTQUFTLGFBQUssT0FBTztBQUMzQixNQUFNLFNBQVMsYUFBSyxPQUFPO0FBQzNCLE1BQU0sS0FBSyxhQUFLLFdBQVcsR0FBRyxHQUFHLENBQUM7QUFXbEMsTUFBTSxRQUFOLGNBQW9CLFVBQVU7QUFBQTtBQUFBLElBRzFCLFdBQVc7QUFBQTtBQUFBLElBRVgsV0FBVztBQUFBO0FBQUEsSUFFWCxXQUFXO0FBQUE7QUFBQSxJQUVYLFFBQVE7QUFBQTtBQUFBLElBRVIsUUFBUTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQU1SLGlCQUFpQjtBQUFBLElBQ2pCLHFCQUFxQjtBQUFBLElBQ3JCLGdCQUFnQjtBQUFBLElBQ2hCLFVBQVUsQ0FBQztBQUFBLElBQ1gsa0JBQWtCO0FBQUEsSUFDbEIsWUFBWTtBQUFBLElBQ1osUUFBUTtBQUFBLElBQ1IsYUFBYTtBQUFBLElBQ2IsUUFBUTtBQUNKLFdBQUssVUFBVSxJQUFJLE1BQU0sS0FBSyxXQUFXLENBQUM7QUFDMUMsZUFBUyxJQUFJLEdBQUcsSUFBSSxLQUFLLFFBQVEsUUFBUSxFQUFFLEdBQUc7QUFDMUMsYUFBSyxRQUFRLENBQUMsSUFBSSxhQUFLLE9BQU87QUFBQSxNQUNsQztBQUVBLFdBQUssZ0JBQWdCLEtBQUs7QUFDMUIsV0FBSyxrQkFBa0IsS0FBSyxPQUFPLE1BQU0sVUFBVTtBQUNuRCxXQUFLLFlBQVksS0FBSyxnQkFBZ0IsYUFBYSxNQUFNO0FBQ3pELFdBQUssVUFBVSxXQUFXLEtBQUs7QUFFL0IsWUFBTSxjQUFjLElBQUksS0FBSyxRQUFRO0FBRXJDLFdBQUssYUFBYSxJQUFJLFlBQVksSUFBSSxLQUFLLFFBQVE7QUFDbkQsZUFBUyxJQUFJLEdBQUcsSUFBSSxHQUFHLElBQUksY0FBYyxHQUFHLEtBQUssR0FBRyxLQUFLLEdBQUc7QUFDeEQsYUFBSyxXQUNBLFNBQVMsR0FBRyxJQUFJLENBQUMsRUFDakIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLEdBQUcsSUFBSSxHQUFHLElBQUksR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDLENBQUM7QUFBQSxNQUN2RDtBQUNBLFdBQUssUUFBUSxJQUFJLEtBQUssS0FBSyxRQUFRO0FBQUEsUUFDL0I7QUFBQSxRQUNBLFdBQVcsS0FBSztBQUFBLFFBQ2hCLFdBQVcsY0FBYztBQUFBLE1BQzdCLENBQUM7QUFDRCxXQUFLLFVBQVUsT0FBTyxLQUFLO0FBQUEsSUFDL0I7QUFBQSxJQUNBLGlCQUFpQjtBQUNiLFVBQUksQ0FBQyxLQUFLO0FBQ047QUFDSixZQUFNLFlBQVksS0FBSyxNQUFNLFVBQVUsY0FBYyxRQUFRO0FBQzdELFlBQU0sWUFBWSxLQUFLLE1BQU0sVUFBVSxjQUFjLGlCQUFpQjtBQUN0RSxZQUFNLFVBQVUsS0FBSyxNQUFNLFVBQVUsY0FBYyxNQUFNO0FBQ3pELG1CQUFLLElBQUksV0FBVyxHQUFHLEdBQUcsQ0FBQztBQUMzQixlQUFTLElBQUksR0FBRyxJQUFJLEtBQUssUUFBUSxRQUFRLEVBQUUsR0FBRztBQUMxQyxjQUFNLE9BQU8sS0FBSyxTQUFTLEtBQUsscUJBQXFCLElBQUksS0FBSyxLQUFLLFFBQVEsTUFBTTtBQUNqRixjQUFNLE9BQU8sS0FBSyxTQUFTLEtBQUsscUJBQXFCLElBQUksS0FBSyxLQUFLLFFBQVEsTUFBTTtBQUVqRixZQUFJLE1BQU0sS0FBSyxRQUFRLFNBQVMsR0FBRztBQUMvQix1QkFBSyxJQUFJLFdBQVcsTUFBTSxJQUFJO0FBQUEsUUFDbEM7QUFDQSxxQkFBSyxNQUFNLFFBQVEsSUFBSSxTQUFTO0FBQ2hDLHFCQUFLLFVBQVUsUUFBUSxNQUFNO0FBQzdCLGNBQU0sZUFBZSxJQUFNLEtBQUssZ0JBQWdCLEtBQUs7QUFDckQsY0FBTSxZQUFZLElBQUksZ0JBQWdCLEtBQUs7QUFDM0MscUJBQUssTUFBTSxRQUFRLFNBQVUsS0FBSyxRQUFRLFdBQVcsS0FBTyxLQUFLLFFBQVMsQ0FBRztBQUM3RSxrQkFBVSxJQUFJLElBQUksR0FBRztBQUFBLFVBQ2pCLEtBQUssQ0FBQyxJQUFJLE9BQU8sQ0FBQztBQUFBLFVBQ2xCLEtBQUssQ0FBQyxJQUFJLE9BQU8sQ0FBQztBQUFBLFVBQ2xCLEtBQUssQ0FBQyxJQUFJLE9BQU8sQ0FBQztBQUFBLFFBQ3RCLENBQUM7QUFDRCxrQkFBVSxJQUFJLElBQUksSUFBSSxHQUFHO0FBQUEsVUFDckIsS0FBSyxDQUFDLElBQUksT0FBTyxDQUFDO0FBQUEsVUFDbEIsS0FBSyxDQUFDLElBQUksT0FBTyxDQUFDO0FBQUEsVUFDbEIsS0FBSyxDQUFDLElBQUksT0FBTyxDQUFDO0FBQUEsUUFDdEIsQ0FBQztBQUNELFlBQUksU0FBUztBQUNULHVCQUFLLE1BQU0sUUFBUSxXQUFXLE1BQU07QUFDcEMsdUJBQUssVUFBVSxRQUFRLE1BQU07QUFDN0Isa0JBQVEsSUFBSSxJQUFJLEdBQUcsTUFBTTtBQUN6QixrQkFBUSxJQUFJLElBQUksSUFBSSxHQUFHLE1BQU07QUFBQSxRQUNqQztBQUNBLFlBQUksV0FBVztBQUNYLG9CQUFVLElBQUksSUFBSSxHQUFHLENBQUMsR0FBRyxRQUFRLENBQUM7QUFDbEMsb0JBQVUsSUFBSSxJQUFJLElBQUksR0FBRyxDQUFDLEdBQUcsUUFBUSxDQUFDO0FBQUEsUUFDMUM7QUFBQSxNQUNKO0FBRUEsV0FBSyxNQUFNLE9BQU87QUFBQSxJQUN0QjtBQUFBLElBQ0EsYUFBYTtBQUNULFdBQUssT0FBTyxpQkFBaUIsS0FBSyxRQUFRLENBQUMsQ0FBQztBQUM1QyxlQUFTLElBQUksR0FBRyxJQUFJLEtBQUssUUFBUSxRQUFRLEVBQUUsR0FBRztBQUMxQyxxQkFBSyxLQUFLLEtBQUssUUFBUSxDQUFDLEdBQUcsS0FBSyxRQUFRLENBQUMsQ0FBQztBQUFBLE1BQzlDO0FBQ0EsV0FBSyxxQkFBcUI7QUFDMUIsV0FBSyxnQkFBZ0IsS0FBSztBQUFBLElBQzlCO0FBQUEsSUFDQSxPQUFPLElBQUk7QUFDUCxXQUFLLGlCQUFpQjtBQUN0QixVQUFJLEtBQUssS0FBSyxnQkFBZ0I7QUFDMUIsYUFBSyxXQUFXO0FBQUEsTUFDcEI7QUFDQSxVQUFJLEtBQUssZ0JBQWdCLEdBQUc7QUFDeEIsYUFBSyxzQkFBc0IsS0FBSyxxQkFBcUIsS0FBSyxLQUFLLFFBQVE7QUFDdkUsYUFBSyxnQkFBaUIsS0FBSyxnQkFBZ0IsS0FBSyxXQUFZLEtBQUs7QUFBQSxNQUNyRTtBQUNBLFdBQUssT0FBTyxpQkFBaUIsS0FBSyxRQUFRLEtBQUssa0JBQWtCLENBQUM7QUFDbEUsV0FBSyxlQUFlO0FBQUEsSUFDeEI7QUFBQSxJQUNBLGFBQWE7QUFDVCxXQUFLLFdBQVc7QUFDaEIsVUFBSSxLQUFLO0FBQ0wsYUFBSyxVQUFVLFNBQVM7QUFBQSxJQUNoQztBQUFBLElBQ0EsZUFBZTtBQUNYLFVBQUksS0FBSztBQUNMLGFBQUssVUFBVSxTQUFTO0FBQUEsSUFDaEM7QUFBQSxJQUNBLFlBQVk7QUFDUixVQUFJLEtBQUs7QUFDTCxhQUFLLGdCQUFnQixRQUFRO0FBQ2pDLFVBQUksS0FBSztBQUNMLGFBQUssVUFBVSxRQUFRO0FBQzNCLFVBQUksS0FBSztBQUNMLGFBQUssTUFBTSxRQUFRO0FBQUEsSUFDM0I7QUFBQSxFQUNKO0FBbElJLGdCQURFLE9BQ0ssWUFBVztBQW1JdEIsRUFBQUEsWUFBVztBQUFBLElBQ1AsU0FBUyxTQUFTO0FBQUEsRUFDdEIsR0FBRyxNQUFNLFdBQVcsWUFBWSxNQUFNO0FBQ3RDLEVBQUFBLFlBQVc7QUFBQSxJQUNQLFNBQVMsSUFBSSxFQUFFO0FBQUEsRUFDbkIsR0FBRyxNQUFNLFdBQVcsWUFBWSxNQUFNO0FBQ3RDLEVBQUFBLFlBQVc7QUFBQSxJQUNQLFNBQVMsTUFBTSxFQUFFO0FBQUEsRUFDckIsR0FBRyxNQUFNLFdBQVcsWUFBWSxNQUFNO0FBQ3RDLEVBQUFBLFlBQVc7QUFBQSxJQUNQLFNBQVMsTUFBTSxDQUFHO0FBQUEsRUFDdEIsR0FBRyxNQUFNLFdBQVcsU0FBUyxNQUFNO0FBQ25DLEVBQUFBLFlBQVc7QUFBQSxJQUNQLFNBQVMsS0FBSyxJQUFJO0FBQUEsRUFDdEIsR0FBRyxNQUFNLFdBQVcsU0FBUyxNQUFNO0FBQ25DLEVBQUFBLFlBQVc7QUFBQSxJQUNQLFNBQVMsTUFBTSxDQUFHO0FBQUEsRUFDdEIsR0FBRyxNQUFNLFdBQVcsa0JBQWtCLE1BQU07OztBQzFLNUMsV0FBU0MsT0FBTSxHQUFHLEdBQUcsR0FBRztBQUNwQixXQUFPLEtBQUssSUFBSSxHQUFHLEtBQUssSUFBSSxHQUFHLENBQUMsQ0FBQztBQUFBLEVBQ3JDO0FBQ0EsTUFBTSxjQUFjLElBQUksYUFBYSxDQUFDO0FBQ3RDLE1BQU1DLFlBQVcsSUFBSSxhQUFhLENBQUM7QUFDbkMsTUFBTSxZQUFZLElBQUksYUFBYSxDQUFDO0FBQ3BDLE1BQU0sU0FBUyxJQUFJLGFBQWEsQ0FBQztBQUNqQyxNQUFNLFlBQVksSUFBSSxhQUFhLENBQUM7QUFDcEMsTUFBTSxZQUFZLElBQUksYUFBYSxDQUFDO0FBQ3BDLE1BQU0sZ0JBQWdCLElBQUksYUFBYSxDQUFDO0FBQ3hDLE1BQU0sa0JBQWtCLElBQUksYUFBYSxDQUFDO0FBQzFDLE1BQU0sZUFBZSxJQUFJLGFBQWEsQ0FBQztBQU12QyxNQUFNLGFBQWMsV0FBWTtBQUM1QixVQUFNLEtBQUssSUFBSSxhQUFhLENBQUM7QUFDN0IsVUFBTSxLQUFLLElBQUksYUFBYSxDQUFDO0FBQzdCLFVBQU0sS0FBSyxJQUFJLGFBQWEsQ0FBQztBQUM3QixVQUFNLEtBQUssSUFBSSxhQUFhLENBQUM7QUFDN0IsVUFBTSxLQUFLLElBQUksYUFBYSxDQUFDO0FBQzdCLFVBQU0sUUFBUSxJQUFJLGFBQWEsQ0FBQztBQUNoQyxVQUFNLFFBQVEsSUFBSSxhQUFhLENBQUM7QUFDaEMsVUFBTSxPQUFPLElBQUksYUFBYSxDQUFDO0FBQy9CLFdBQU8sU0FBVSxNQUFNLFFBQVEsR0FBRyxHQUFHQyxZQUFXLEtBQUssUUFBUTtBQUV6RCxTQUFHLElBQUksQ0FBQztBQUNSLFlBQU0sTUFBTSxhQUFLLE9BQU8sRUFBRTtBQUMxQixtQkFBSyxJQUFJLElBQUksR0FBRyxDQUFDO0FBQ2pCLFlBQU0sTUFBTSxhQUFLLE9BQU8sRUFBRTtBQUMxQixTQUFHLElBQUlBLFVBQVM7QUFDaEIsWUFBTSxNQUFNRixPQUFNLGFBQUssT0FBTyxFQUFFLEdBQUcsS0FBSyxNQUFNLE1BQU0sR0FBRztBQUN2RCxTQUFHLElBQUksQ0FBQztBQUNSLG1CQUFLLE1BQU0sSUFBSSxHQUFHLEVBQUU7QUFDcEIsbUJBQUssSUFBSSxJQUFJLEdBQUcsQ0FBQztBQUNqQixtQkFBSyxVQUFVLElBQUksRUFBRTtBQUNyQixtQkFBSyxVQUFVLElBQUksRUFBRTtBQUNyQixtQkFBSyxVQUFVLElBQUksRUFBRTtBQUNyQixtQkFBSyxVQUFVLElBQUksRUFBRTtBQUNyQixtQkFBSyxVQUFVLElBQUksRUFBRTtBQUVyQixZQUFNLFVBQVUsS0FBSyxLQUFLQSxPQUFNLGFBQUssSUFBSSxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQztBQUN4RCxZQUFNLFVBQVUsS0FBSyxLQUFLQSxPQUFNLGFBQUssSUFBSSxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQztBQUN4RCxZQUFNLFVBQVUsS0FBSyxLQUFLQSxPQUFNLGFBQUssSUFBSSxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQztBQUN4RCxZQUFNLFVBQVUsS0FBSyxLQUFLQSxRQUFPLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxRQUFRLEtBQUssTUFBTSxNQUFNLElBQUksQ0FBQyxDQUFDO0FBQzlGLFlBQU0sVUFBVSxLQUFLLEtBQUtBLFFBQU8sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLFFBQVEsS0FBSyxNQUFNLE1BQU0sSUFBSSxDQUFDLENBQUM7QUFDOUYsVUFBSSxRQUFRO0FBQ1IscUJBQUssSUFBSSxJQUFJLFFBQVEsQ0FBQztBQUN0QixxQkFBSyxVQUFVLElBQUksRUFBRTtBQUFBLE1BQ3pCO0FBQ0EsbUJBQUssTUFBTSxPQUFPLElBQUksRUFBRTtBQUN4QixtQkFBSyxVQUFVLE9BQU8sS0FBSztBQUMzQixtQkFBSyxNQUFNLE9BQU8sR0FBR0UsVUFBUztBQUM5QixtQkFBSyxVQUFVLE9BQU8sS0FBSztBQUMzQixhQUFPLDRCQUE0QixNQUFNLEtBQUs7QUFDOUMsV0FBSyx5QkFBeUIsT0FBTyxPQUFPO0FBQzVDLFdBQUsseUJBQXlCLE9BQU8sVUFBVSxPQUFPO0FBQ3RELGFBQU8seUJBQXlCLE9BQU8sVUFBVSxPQUFPO0FBQUEsSUFDNUQ7QUFBQSxFQUNKLEVBQUc7QUFJSCxNQUFNLG1CQUFOLGNBQStCLFVBQVU7QUFBQSxJQWdCckMsT0FBTztBQUFBLElBQ1AsUUFBUTtBQUNKLFdBQUssS0FBSyxrQkFBa0IsYUFBYTtBQUN6QyxXQUFLLE9BQU8sa0JBQWtCLGVBQWU7QUFDN0MsV0FBSyxJQUFJLGtCQUFrQixZQUFZO0FBQUEsSUFDM0M7QUFBQSxJQUNBLE9BQU8sSUFBSTtBQUNQLFdBQUssUUFBUTtBQUViLFdBQUssS0FBSyxrQkFBa0IsYUFBYTtBQUN6QyxXQUFLLE9BQU8sa0JBQWtCLGVBQWU7QUFDN0MsV0FBSyxJQUFJLGtCQUFrQixZQUFZO0FBQ3ZDLFdBQUssS0FBSyxnQkFBZ0IsV0FBVztBQUVyQyxXQUFLLE9BQU8saUJBQWlCLFNBQVM7QUFDdEMsV0FBSyxJQUFJLGlCQUFpQixNQUFNO0FBQ2hDLFdBQUssT0FBTyxvQkFBb0IsUUFBUSxNQUFNO0FBQzlDLFVBQUksS0FBSyxRQUFRO0FBRWIsYUFBSyxPQUFPLGlCQUFpQixTQUFTO0FBQ3RDLGFBQUssS0FBSywyQkFBMkIsV0FBVyxTQUFTO0FBQ3pELHFCQUFLLElBQUksV0FBVyxXQUFXLFdBQVc7QUFBQSxNQUM5QztBQUVBLFdBQUssT0FBTyxpQkFBaUIsU0FBUztBQUN0QyxXQUFLLEtBQUssMkJBQTJCLFdBQVcsU0FBUztBQUN6RCxtQkFBSyxJQUFJLFdBQVcsV0FBVyxXQUFXO0FBQzFDLGlCQUFXLEtBQUssTUFBTSxLQUFLLFFBQVEsV0FBVyxRQUFRLFdBQVcsTUFBTSxLQUFLLFNBQVMsWUFBWSxNQUFNLEtBQUssSUFBSTtBQUNoSCxVQUFJLEtBQUssb0JBQW9CO0FBQ3pCLGFBQUssSUFBSSxpQkFBaUIsS0FBSyxPQUFPLGlCQUFpQkQsU0FBUSxDQUFDO0FBQUEsTUFDcEU7QUFBQSxJQUNKO0FBQUEsRUFDSjtBQS9DSSxnQkFERSxrQkFDSyxZQUFXO0FBQ2xCLGdCQUZFLGtCQUVLLGNBQWE7QUFBQTtBQUFBLElBRWhCLE1BQU0sU0FBUyxPQUFPO0FBQUE7QUFBQSxJQUV0QixRQUFRLFNBQVMsT0FBTztBQUFBO0FBQUEsSUFFeEIsS0FBSyxTQUFTLE9BQU87QUFBQTtBQUFBLElBRXJCLFFBQVEsU0FBUyxPQUFPO0FBQUE7QUFBQSxJQUV4QixvQkFBb0IsU0FBUyxLQUFLLElBQUk7QUFBQTtBQUFBLElBRXRDLFFBQVEsU0FBUyxPQUFPO0FBQUEsRUFDNUI7OztBQ3RESixNQUFNLGVBQU4sY0FBMkIsVUFBVTtBQUFBLElBZ0JqQyxPQUFPO0FBQ0gsVUFBSSxDQUFDLEtBQUssVUFBVTtBQUNoQixjQUFNLE1BQU0sMENBQTBDO0FBQUEsTUFDMUQ7QUFDQSxXQUFLLFNBQVM7QUFDZCxXQUFLLHVCQUF1QjtBQUFBLElBQ2hDO0FBQUEsSUFDQSxRQUFRO0FBQ0osV0FBSyxRQUFRLFNBQVMsY0FBYyxPQUFPO0FBQzNDLFdBQUssTUFBTSxNQUFNLEtBQUs7QUFDdEIsV0FBSyxNQUFNLGNBQWM7QUFDekIsV0FBSyxNQUFNLGNBQWM7QUFDekIsV0FBSyxNQUFNLE9BQU8sS0FBSztBQUN2QixXQUFLLE1BQU0sUUFBUSxLQUFLO0FBQ3hCLFdBQUssTUFBTSxpQkFBaUIsV0FBVyxNQUFNO0FBQ3pDLGFBQUssU0FBUztBQUFBLE1BQ2xCLENBQUM7QUFDRCxVQUFJLEtBQUssVUFBVTtBQUNmLGNBQU0sdUJBQXVCLE1BQU07QUFDL0IsZUFBSyxNQUFNLEtBQUs7QUFDaEIsaUJBQU8sb0JBQW9CLFNBQVMsb0JBQW9CO0FBQ3hELGlCQUFPLG9CQUFvQixjQUFjLG9CQUFvQjtBQUFBLFFBQ2pFO0FBQ0EsZUFBTyxpQkFBaUIsU0FBUyxvQkFBb0I7QUFDckQsZUFBTyxpQkFBaUIsY0FBYyxvQkFBb0I7QUFBQSxNQUM5RDtBQUFBLElBQ0o7QUFBQSxJQUNBLGVBQWU7QUFDWCxZQUFNLE1BQU0sS0FBSztBQUNqQixZQUFNLFNBQVMsSUFBSTtBQUNuQixZQUFNLFVBQVcsS0FBSyxVQUFVLElBQUksUUFBUSxLQUFLLFFBQVEsS0FBSyxLQUFLO0FBQ25FLFVBQUksQ0FBQyx3QkFBd0IsS0FBSyxTQUFTLEtBQUssZUFBZSxHQUFHO0FBQzlELGdCQUFRLE1BQU0sVUFBVSxRQUFRLGdDQUFnQztBQUFBLE1BQ3BFO0FBQ0EsVUFBSSwrQkFBK0IsS0FBSyxPQUFPO0FBQzNDLGFBQUssTUFBTSwwQkFBMEIsS0FBSyxZQUFZLEtBQUssSUFBSSxDQUFDO0FBQUEsTUFDcEUsT0FDSztBQUNELGFBQUssTUFBTSxpQkFBaUIsY0FBYyxNQUFNO0FBQzVDLGVBQUssdUJBQXVCO0FBQUEsUUFDaEMsQ0FBQztBQUFBLE1BQ0w7QUFBQSxJQUNKO0FBQUEsSUFDQSxPQUFPLElBQUk7QUFDUCxVQUFJLEtBQUssVUFBVSxLQUFLLHNCQUFzQjtBQUMxQyxZQUFJLEtBQUssU0FBUztBQUNkLGVBQUssUUFBUSxPQUFPO0FBQUEsUUFDeEIsT0FDSztBQUVELGVBQUssYUFBYTtBQUFBLFFBQ3RCO0FBQ0EsYUFBSyx1QkFBdUI7QUFBQSxNQUNoQztBQUFBLElBQ0o7QUFBQSxJQUNBLGNBQWM7QUFDVixXQUFLLHVCQUF1QjtBQUM1QixXQUFLLE1BQU0sMEJBQTBCLEtBQUssWUFBWSxLQUFLLElBQUksQ0FBQztBQUFBLElBQ3BFO0FBQUEsRUFDSjtBQTFFSSxnQkFERSxjQUNLLFlBQVc7QUFDbEIsZ0JBRkUsY0FFSyxjQUFhO0FBQUE7QUFBQSxJQUVoQixLQUFLLFNBQVMsT0FBTztBQUFBO0FBQUEsSUFFckIsVUFBVSxTQUFTLFNBQVM7QUFBQTtBQUFBLElBRTVCLE1BQU0sU0FBUyxLQUFLLElBQUk7QUFBQTtBQUFBLElBRXhCLFVBQVUsU0FBUyxLQUFLLElBQUk7QUFBQTtBQUFBLElBRTVCLE9BQU8sU0FBUyxLQUFLLElBQUk7QUFBQTtBQUFBLElBRXpCLGlCQUFpQixTQUFTLE9BQU8sTUFBTTtBQUFBLEVBQzNDOzs7QUNwQ0osTUFBTSxxQkFBTixjQUFpQyxVQUFVO0FBQUEsSUFZdkMsUUFBUTtBQUNKLFdBQUssYUFBYSxDQUFDO0FBQ25CLFdBQUssY0FBYyxLQUFLLE1BQU07QUFFOUIsV0FBSyxlQUFlO0FBQ3BCLFdBQUsseUJBQXlCLEtBQUssaUJBQWlCLEtBQUssSUFBSTtBQUM3RCxXQUFLLHVCQUF1QixLQUFLLGVBQWUsS0FBSyxJQUFJO0FBQUEsSUFDN0Q7QUFBQSxJQUNBLGFBQWE7QUFDVCxXQUFLLE9BQU8saUJBQWlCLElBQUksS0FBSyxzQkFBc0I7QUFDNUQsV0FBSyxPQUFPLGVBQWUsSUFBSSxLQUFLLG9CQUFvQjtBQUFBLElBQzVEO0FBQUEsSUFDQSxlQUFlO0FBQ1gsV0FBSyxPQUFPLGlCQUFpQixPQUFPLEtBQUssc0JBQXNCO0FBQy9ELFdBQUssT0FBTyxlQUFlLE9BQU8sS0FBSyxvQkFBb0I7QUFBQSxJQUMvRDtBQUFBLElBQ0EsY0FBYyxLQUFLO0FBQ2YsWUFBTSxRQUFRLElBQUksY0FBYyxFQUFFLE9BQU8sQ0FBQyxNQUFNLEVBQUUsU0FBUyx1QkFBdUI7QUFDbEYsV0FBSyxhQUFhLEtBQUssV0FBVyxPQUFPLEtBQUs7QUFDOUMsVUFBSSxLQUFLLGdCQUFnQjtBQUNyQixZQUFJLFdBQVcsSUFBSTtBQUNuQixpQkFBUyxJQUFJLEdBQUcsSUFBSSxTQUFTLFFBQVEsRUFBRSxHQUFHO0FBQ3RDLGVBQUssY0FBYyxTQUFTLENBQUMsQ0FBQztBQUFBLFFBQ2xDO0FBQUEsTUFDSjtBQUFBLElBQ0o7QUFBQSxJQUNBLG9CQUFvQixRQUFRO0FBQ3hCLFlBQU0sUUFBUSxLQUFLO0FBQ25CLGVBQVMsSUFBSSxHQUFHLElBQUksTUFBTSxRQUFRLEVBQUUsR0FBRztBQUNuQyxjQUFNLENBQUMsRUFBRSxTQUFTO0FBQUEsTUFDdEI7QUFBQSxJQUNKO0FBQUEsSUFDQSxtQkFBbUI7QUFDZixXQUFLLG9CQUFvQixLQUFLLHNCQUFzQixDQUFDO0FBQUEsSUFDekQ7QUFBQSxJQUNBLGlCQUFpQjtBQUNiLFdBQUssb0JBQW9CLEtBQUssc0JBQXNCLENBQUM7QUFBQSxJQUN6RDtBQUFBLEVBQ0o7QUFqREksZ0JBREUsb0JBQ0ssWUFBVztBQUNsQixnQkFGRSxvQkFFSyxjQUFhO0FBQUE7QUFBQSxJQUVoQixvQkFBb0I7QUFBQSxNQUNoQixNQUFNLEtBQUs7QUFBQSxNQUNYLFFBQVEsQ0FBQyxTQUFTLFdBQVc7QUFBQSxNQUM3QixTQUFTO0FBQUEsSUFDYjtBQUFBO0FBQUEsSUFFQSxnQkFBZ0IsRUFBRSxNQUFNLEtBQUssTUFBTSxTQUFTLEtBQUs7QUFBQSxFQUNyRDs7O0FDUkosc0JBQW1CO0FBVm5CLE1BQUlFLGVBQTBDLFNBQVUsWUFBWSxRQUFRLEtBQUssTUFBTTtBQUNuRixRQUFJLElBQUksVUFBVSxRQUFRLElBQUksSUFBSSxJQUFJLFNBQVMsU0FBUyxPQUFPLE9BQU8sT0FBTyx5QkFBeUIsUUFBUSxHQUFHLElBQUksTUFBTTtBQUMzSCxRQUFJLE9BQU8sWUFBWSxZQUFZLE9BQU8sUUFBUSxhQUFhO0FBQVksVUFBSSxRQUFRLFNBQVMsWUFBWSxRQUFRLEtBQUssSUFBSTtBQUFBO0FBQ3hILGVBQVMsSUFBSSxXQUFXLFNBQVMsR0FBRyxLQUFLLEdBQUc7QUFBSyxZQUFJLElBQUksV0FBVyxDQUFDO0FBQUcsZUFBSyxJQUFJLElBQUksRUFBRSxDQUFDLElBQUksSUFBSSxJQUFJLEVBQUUsUUFBUSxLQUFLLENBQUMsSUFBSSxFQUFFLFFBQVEsR0FBRyxNQUFNO0FBQ2hKLFdBQU8sSUFBSSxLQUFLLEtBQUssT0FBTyxlQUFlLFFBQVEsS0FBSyxDQUFDLEdBQUc7QUFBQSxFQUNoRTtBQU1BLE1BQU1DLFlBQVcsSUFBSSxhQUFhLENBQUM7QUFFbkMsV0FBUyxtQkFBbUIsS0FBSyxRQUFRO0FBQ3JDLFFBQUksT0FBTyxVQUFVO0FBQ2pCLGFBQU87QUFDWCxRQUFJLFVBQVUsS0FBSyxJQUFJLE9BQU8sQ0FBQyxFQUFFLENBQUM7QUFDbEMsUUFBSSxVQUFVLEtBQUssSUFBSSxPQUFPLENBQUMsRUFBRSxDQUFDO0FBQ2xDLGFBQVMsSUFBSSxHQUFHLElBQUksT0FBTyxRQUFRLEVBQUUsR0FBRztBQUNwQyxnQkFBVSxLQUFLLElBQUksU0FBUyxLQUFLLElBQUksT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ2pELGdCQUFVLEtBQUssSUFBSSxTQUFTLEtBQUssSUFBSSxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7QUFBQSxJQUNyRDtBQUNBLFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUFBLEVBQ2I7QUFFQSxXQUFTLE9BQU8sR0FBRyxHQUFHLEdBQUc7QUFDckIsUUFBSSxJQUFJO0FBQ0osYUFBTyxJQUFJLEtBQUssSUFBSTtBQUN4QixXQUFPLElBQUksS0FBSyxJQUFJO0FBQUEsRUFDeEI7QUFTTyxXQUFTLDZCQUE2QixHQUFHLE9BQU87QUFDbkQsVUFBTSxTQUFTLE1BQU07QUFDckIsUUFBSSxPQUFPLFNBQVM7QUFDaEIsYUFBTztBQUVYLFVBQU0sS0FBSyxFQUFFLENBQUM7QUFDZCxVQUFNLEtBQUssRUFBRSxDQUFDO0FBQ2QsUUFBSSxnQkFBZ0I7QUFDcEIsYUFBUyxJQUFJLEdBQUcsSUFBSSxPQUFPLFNBQVMsR0FBRyxJQUFJLE9BQU8sUUFBUSxFQUFFLEdBQUc7QUFDM0QsWUFBTSxLQUFLLE9BQU8sQ0FBQyxFQUFFO0FBQ3JCLFlBQU0sS0FBSyxPQUFPLENBQUMsRUFBRTtBQUNyQixZQUFNLEtBQUssT0FBTyxDQUFDLEVBQUUsSUFBSSxPQUFPLE9BQU8sQ0FBQyxFQUFFLElBQUk7QUFDOUMsWUFBTSxJQUFJLEtBQUssS0FBSyxLQUFLLE1BQU0sQ0FBQztBQUNoQyxVQUFJLEtBQUssS0FBTyxLQUFLLEtBQU8sT0FBTyxJQUFJLElBQUksSUFBSSxPQUFPLENBQUMsRUFBRSxDQUFDO0FBQ3RELFVBQUU7QUFDTixVQUFJO0FBQUEsSUFDUjtBQUNBLFlBQVEsZ0JBQWdCLE1BQU07QUFBQSxFQUNsQztBQVNPLFdBQVMsNkJBQTZCLFFBQVEsR0FBRyxPQUFPO0FBQzNELFFBQUksTUFBTSxRQUFRLFNBQVM7QUFDdkIsYUFBTztBQUNYLGlDQUE2QixPQUFPLDJCQUEyQkEsV0FBVSxDQUFDLEdBQUcsS0FBSztBQUFBLEVBQ3RGO0FBUUEsV0FBUyxxQkFBcUIsUUFBUSxRQUFRLGVBQWUsTUFBTTtBQUMvRCxVQUFNLGNBQWMsT0FBTztBQUMzQixVQUFNLFdBQVcsSUFBSSxhQUFhLGNBQWMsQ0FBQztBQUNqRCxhQUFTLElBQUksR0FBRyxJQUFJLEdBQUcsSUFBSSxhQUFhLEVBQUUsR0FBRyxLQUFLLEdBQUc7QUFDakQsZUFBUyxDQUFDLElBQUksT0FBTyxDQUFDLEVBQUU7QUFDeEIsZUFBUyxJQUFJLENBQUMsSUFBSSxPQUFPLENBQUMsRUFBRTtBQUFBLElBQ2hDO0FBQ0EsVUFBTSxnQkFBWSxjQUFBQyxTQUFPLFFBQVE7QUFDakMsVUFBTSxPQUFPLGdCQUNULElBQUksS0FBSyxRQUFRO0FBQUEsTUFDYjtBQUFBO0FBQUE7QUFBQSxNQUdBLFdBQVcsY0FBYztBQUFBLE1BQ3pCLFdBQVc7QUFBQSxJQUNmLENBQUM7QUFDTCxRQUFJLEtBQUssZ0JBQWdCLGFBQWE7QUFDbEMsY0FBUSxLQUFLLGdFQUFnRTtBQUM3RSxhQUFPO0FBQUEsSUFDWDtBQUNBLFVBQU0sWUFBWSxLQUFLLFVBQVUsY0FBYyxRQUFRO0FBQ3ZELFVBQU0sZ0JBQWdCLEtBQUssVUFBVSxjQUFjLGlCQUFpQjtBQUNwRSxVQUFNLFVBQVUsS0FBSyxVQUFVLGNBQWMsTUFBTTtBQUNuRCxJQUFBRCxVQUFTLENBQUMsSUFBSTtBQUNkLGFBQVMsSUFBSSxHQUFHLElBQUksR0FBRyxJQUFJLGFBQWEsRUFBRSxHQUFHLEtBQUssR0FBRztBQUNqRCxNQUFBQSxVQUFTLENBQUMsSUFBSSxTQUFTLENBQUM7QUFDeEIsTUFBQUEsVUFBUyxDQUFDLElBQUksU0FBUyxJQUFJLENBQUM7QUFDNUIsZ0JBQVUsSUFBSSxHQUFHQSxTQUFRO0FBQUEsSUFDN0I7QUFDQSxtQkFBZSxJQUFJLEdBQUcsUUFBUTtBQUM5QixRQUFJLFNBQVM7QUFDVCxNQUFBQSxVQUFTLENBQUMsSUFBSTtBQUNkLE1BQUFBLFVBQVMsQ0FBQyxJQUFJO0FBQ2QsTUFBQUEsVUFBUyxDQUFDLElBQUk7QUFDZCxlQUFTLElBQUksR0FBRyxJQUFJLGFBQWEsRUFBRSxHQUFHO0FBQ2xDLGdCQUFRLElBQUksR0FBR0EsU0FBUTtBQUFBLE1BQzNCO0FBQUEsSUFDSjtBQUNBLFFBQUk7QUFDQSxXQUFLLE9BQU87QUFDaEIsV0FBTztBQUFBLEVBQ1g7QUF4SEE7QUE0SEEsTUFBTSxpQkFBTixjQUE2QixVQUFVO0FBQUEsSUFBdkM7QUFBQTtBQStDSTtBQVFBO0FBcUJBO0FBT0E7QUE5RUE7QUFBQTtBQUFBO0FBQUEsMkNBQWdCO0FBS2hCO0FBQUE7QUFBQTtBQUFBO0FBQUEsMkNBQWdCO0FBRWhCO0FBQUEsb0NBQVMsb0JBQUksSUFBSTtBQUVqQjtBQUFBLDBDQUFlLG9CQUFJLElBQUk7QUFFdkI7QUFBQSwwQ0FBZSxJQUFJLFFBQVE7QUFFM0I7QUFBQSx5Q0FBYyxJQUFJLFFBQVE7QUFBQTtBQUFBLElBQzFCLFNBQVM7QUFDTCxVQUFJLENBQUMsS0FBSyxPQUFPLElBQUk7QUFDakI7QUFFSixVQUFJLEtBQUssT0FBTyxHQUFHLE1BQU0sbUJBQW1CLFFBQVc7QUFDbkQsZ0JBQVEsTUFBTSwrQ0FBK0M7QUFDN0QsYUFBSyxTQUFTO0FBQ2Q7QUFBQSxNQUNKO0FBRUEsWUFBTSxpQkFBaUIsS0FBSyxPQUFPLEdBQUcsTUFBTTtBQUM1QyxpQkFBVyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEtBQUssUUFBUTtBQUNsQyxZQUFJLENBQUMsZUFBZSxJQUFJLEtBQUssR0FBRztBQUM1QixnQ0FBSywwQkFBTCxXQUFnQjtBQUFBLFFBQ3BCO0FBQUEsTUFDSjtBQUNBLHFCQUFlLFFBQVEsQ0FBQyxVQUFVO0FBQzlCLFlBQUksS0FBSyxPQUFPLElBQUksS0FBSyxHQUFHO0FBQ3hCLGNBQUksTUFBTSxrQkFBa0IsS0FBSyxPQUFPLElBQUksS0FBSyxHQUFHO0FBQ2hELGtDQUFLLDhCQUFMLFdBQWtCO0FBQUEsVUFDdEI7QUFBQSxRQUNKLE9BQ0s7QUFDRCxnQ0FBSyw0QkFBTCxXQUFpQjtBQUFBLFFBQ3JCO0FBQ0EsOEJBQUssc0NBQUwsV0FBc0I7QUFBQSxNQUMxQixDQUFDO0FBQUEsSUFDTDtBQUFBLEVBOENKO0FBN0NJO0FBQUEsaUJBQVUsU0FBQyxPQUFPO0FBQ2QsU0FBSyxPQUFPLE9BQU8sS0FBSztBQUN4QixVQUFNLElBQUksS0FBSyxhQUFhLElBQUksS0FBSztBQUNyQyxTQUFLLFlBQVksT0FBTyxPQUFPLENBQUM7QUFFaEMsUUFBSSxFQUFFLFdBQVc7QUFDYixRQUFFLFFBQVE7QUFBQSxFQUNsQjtBQUNBO0FBQUEsa0JBQVcsU0FBQyxPQUFPO0FBQ2YsU0FBSyxPQUFPLElBQUksT0FBTyxNQUFNLGVBQWU7QUFDNUMsVUFBTSxJQUFJLEtBQUssT0FBTyxNQUFNLFVBQVUsS0FBSyxNQUFNO0FBQ2pELFNBQUssYUFBYSxJQUFJLE9BQU8sQ0FBQztBQUM5QixRQUFJLEtBQUssZUFBZTtBQUNwQixRQUFFLGFBQWEsZUFBZTtBQUFBLFFBQzFCLE1BQU0scUJBQXFCLEtBQUssUUFBUSxNQUFNLE9BQU87QUFBQSxRQUNyRCxVQUFVLEtBQUs7QUFBQSxNQUNuQixDQUFDO0FBQUEsSUFDTDtBQUNBLFFBQUksS0FBSyxpQkFBaUIsR0FBRztBQUN6Qix5QkFBbUJBLFdBQVUsTUFBTSxPQUFPO0FBQzFDLE1BQUFBLFVBQVMsQ0FBQyxJQUFJO0FBQ2QsUUFBRSxhQUFhLG9CQUFvQjtBQUFBLFFBQy9CLE9BQU8sS0FBSztBQUFBLFFBQ1osVUFBVSxTQUFTO0FBQUEsUUFDbkIsU0FBU0E7QUFBQSxNQUNiLENBQUM7QUFBQSxJQUNMO0FBQ0EsU0FBSyxhQUFhLE9BQU8sT0FBTyxDQUFDO0FBQUEsRUFDckM7QUFDQTtBQUFBLG1CQUFZLFNBQUMsT0FBTztBQUNoQixTQUFLLE9BQU8sSUFBSSxPQUFPLE1BQU0sZUFBZTtBQUM1QyxVQUFNLFlBQVksS0FBSyxhQUFhLElBQUksS0FBSyxFQUFFLGFBQWEsYUFBYTtBQUN6RSxRQUFJLENBQUM7QUFDRDtBQUNKLHlCQUFxQixLQUFLLFFBQVEsTUFBTSxTQUFTLFVBQVUsSUFBSTtBQUFBLEVBQ25FO0FBQ0E7QUFBQSx1QkFBZ0IsU0FBQyxPQUFPO0FBQ3BCLFVBQU0sSUFBSSxLQUFLLGFBQWEsSUFBSSxLQUFLO0FBQ3JDLFVBQU0sT0FBTyxLQUFLLE9BQU8sR0FBRyxNQUFNLFFBQVEsTUFBTSxZQUFZLEtBQUssT0FBTyxHQUFHLHFCQUFxQjtBQUNoRyxRQUFJLENBQUMsTUFBTTtBQUNQLFFBQUUsU0FBUztBQUNYO0FBQUEsSUFDSjtBQUNBLDZCQUF5QixHQUFHLEtBQUssU0FBUztBQUFBLEVBQzlDO0FBMUZBLGdCQURFLGdCQUNLLFlBQVc7QUE0RnRCLEVBQUFELGFBQVc7QUFBQSxJQUNQLFNBQVMsU0FBUztBQUFBLEVBQ3RCLEdBQUcsZUFBZSxXQUFXLGlCQUFpQixNQUFNO0FBQ3BELEVBQUFBLGFBQVc7QUFBQSxJQUNQLFNBQVMsSUFBSTtBQUFBLEVBQ2pCLEdBQUcsZUFBZSxXQUFXLGlCQUFpQixNQUFNOzs7QUM1TnBELE1BQU0sZ0JBQWdCO0FBQUEsSUFDbEIsR0FBRyxDQUFDLEdBQUssR0FBSyxDQUFHO0FBQUEsSUFDakIsR0FBRyxDQUFDLEdBQUssR0FBSyxDQUFHO0FBQUEsSUFDakIsR0FBRyxDQUFDLEdBQUssR0FBSyxDQUFHO0FBQUEsRUFDckI7QUFDQSxNQUFNLGVBQWU7QUFBQSxJQUNqQixXQUFXLENBQUMsR0FBSyxHQUFLLENBQUc7QUFBQSxJQUN6QixXQUFXLENBQUMsSUFBTSxHQUFLLENBQUc7QUFBQSxJQUMxQixXQUFXLENBQUMsR0FBSyxHQUFLLENBQUc7QUFBQSxJQUN6QixXQUFXLENBQUMsR0FBSyxJQUFNLENBQUc7QUFBQSxJQUMxQixXQUFXLENBQUMsR0FBSyxHQUFLLENBQUc7QUFBQSxJQUN6QixXQUFXLENBQUMsR0FBSyxHQUFLLEVBQUk7QUFBQSxFQUM5QjtBQXlCQSxNQUFNLE1BQU4sY0FBa0IsVUFBVTtBQUFBO0FBQUEsSUFTeEIsT0FBTztBQUFBO0FBQUEsSUFFUCxRQUFRO0FBQUE7QUFBQSxNQUVKLE1BQU07QUFBQSxNQUNOLE9BQU87QUFBQSxNQUNQLE9BQU87QUFBQSxNQUNQLFlBQVk7QUFBQSxNQUNaLE1BQU07QUFBQTtBQUFBLE1BRU4sTUFBTTtBQUFBLE1BQ04sU0FBUztBQUFBLE1BQ1QsVUFBVTtBQUFBLE1BQ1YsS0FBSztBQUFBO0FBQUEsTUFFTCxjQUFjO0FBQUEsTUFDZCxjQUFjO0FBQUEsTUFDZCxVQUFVO0FBQUEsTUFDVixVQUFVO0FBQUEsTUFDVixlQUFlO0FBQUEsTUFDZixlQUFlO0FBQUEsTUFDZixXQUFXO0FBQUEsTUFDWCxXQUFXO0FBQUE7QUFBQSxNQUVYLGNBQWM7QUFBQSxNQUNkLGNBQWM7QUFBQSxNQUNkLGNBQWM7QUFBQSxNQUNkLFVBQVU7QUFBQSxNQUNWLGVBQWU7QUFBQSxNQUNmLGVBQWU7QUFBQSxNQUNmLGVBQWU7QUFBQSxNQUNmLFdBQVc7QUFBQTtBQUFBLE1BRVgscUJBQXFCO0FBQUEsTUFDckIsbUJBQW1CO0FBQUEsTUFDbkIsaUJBQWlCO0FBQUEsTUFDakIsbUJBQW1CO0FBQUEsTUFDbkIsdUJBQXVCO0FBQUEsTUFDdkIsaUJBQWlCO0FBQUEsTUFDakIsb0JBQW9CO0FBQUEsTUFDcEIsd0JBQXdCO0FBQUEsTUFDeEIsa0JBQWtCO0FBQUEsTUFDbEIsa0JBQWtCO0FBQUEsTUFDbEIsc0JBQXNCO0FBQUEsTUFDdEIsZ0JBQWdCO0FBQUEsTUFDaEIsb0JBQW9CO0FBQUEsTUFDcEIsd0JBQXdCO0FBQUEsTUFDeEIsa0JBQWtCO0FBQUEsTUFDbEIsc0JBQXNCO0FBQUEsTUFDdEIsb0JBQW9CO0FBQUEsTUFDcEIsa0JBQWtCO0FBQUEsTUFDbEIsb0JBQW9CO0FBQUEsTUFDcEIsd0JBQXdCO0FBQUEsTUFDeEIsa0JBQWtCO0FBQUEsTUFDbEIscUJBQXFCO0FBQUEsTUFDckIseUJBQXlCO0FBQUEsTUFDekIsbUJBQW1CO0FBQUEsTUFDbkIsbUJBQW1CO0FBQUEsTUFDbkIsdUJBQXVCO0FBQUEsTUFDdkIsaUJBQWlCO0FBQUEsTUFDakIscUJBQXFCO0FBQUEsTUFDckIseUJBQXlCO0FBQUEsTUFDekIsbUJBQW1CO0FBQUEsSUFDdkI7QUFBQTtBQUFBLElBRUEsV0FBVyxDQUFDO0FBQUE7QUFBQSxJQUVaLG1CQUFtQixDQUFDO0FBQUE7QUFBQSxJQUVwQixnQkFBZ0IsQ0FBQztBQUFBO0FBQUEsSUFFakIsbUJBQW1CLENBQUM7QUFBQTtBQUFBLElBRXBCLG9CQUFvQixDQUFDO0FBQUE7QUFBQSxJQUVyQiwwQkFBMEIsQ0FBQztBQUFBO0FBQUEsSUFFM0IsVUFBVTtBQUFBO0FBQUEsSUFFVixlQUFlO0FBQUEsSUFDZixPQUFPO0FBQ0gsV0FBSyxVQUFVLGFBQUssT0FBTztBQUMzQixXQUFLLFdBQVcsYUFBSyxPQUFPO0FBQzVCLFdBQUssV0FBVyxhQUFLLE9BQU87QUFDNUIsV0FBSyxZQUFZLGFBQUssT0FBTztBQUM3QixXQUFLLGFBQWEsYUFBSyxPQUFPO0FBQzlCLFdBQUssYUFBYSxhQUFLLE9BQU87QUFDOUIsV0FBSyxhQUFhLGFBQUssT0FBTztBQUM5QixXQUFLLGFBQWEsY0FBTSxPQUFPO0FBQy9CLFdBQUssZUFBZSxhQUFLLE9BQU87QUFDaEMsV0FBSyxjQUFjLGFBQUssT0FBTztBQUMvQixXQUFLLFdBQVcsYUFBSyxPQUFPO0FBQzVCLFdBQUssYUFBYSxhQUFLLE9BQU87QUFDOUIsV0FBSyxZQUFZLGFBQUssT0FBTztBQUM3QixXQUFLLGVBQWUsYUFBSyxJQUFJLGFBQUssT0FBTyxHQUFHLEdBQUcsR0FBRyxDQUFDO0FBQ25ELFdBQUssWUFBWSxhQUFLLElBQUksYUFBSyxPQUFPLEdBQUcsR0FBRyxHQUFHLENBQUM7QUFDaEQsV0FBSyxpQkFBaUIsYUFBSyxJQUFJLGFBQUssT0FBTyxHQUFHLEdBQUcsR0FBRyxDQUFDO0FBQ3JELFdBQUssZ0JBQWdCLGFBQUssU0FBUyxhQUFLLE9BQU8sQ0FBQztBQUNoRCxXQUFLLFdBQVcsTUFBUSxLQUFLO0FBQUEsSUFDakM7QUFBQSxJQUNBLFFBQVE7QUFDSixVQUFJLENBQUMsS0FBSyxLQUFLO0FBQ1gsZ0JBQVEsTUFBTSwyQkFBMkI7QUFDekM7QUFBQSxNQUNKO0FBQ0EsV0FBSyxPQUFPLE1BQ1AsT0FBTyxLQUFLLEtBQUssRUFBRSxvQkFBb0IsS0FBSyxDQUFDLEVBQzdDLEtBQUssQ0FBQyxFQUFFLE1BQU0sV0FBVyxNQUFNO0FBQ2hDLGFBQUssU0FBUyxRQUFRLENBQUMsVUFBVyxNQUFNLFNBQVMsS0FBSyxNQUFPO0FBQzdELGFBQUssZUFBZSxVQUFVO0FBQzlCLGFBQUssUUFBUTtBQUFBLE1BQ2pCLENBQUM7QUFBQSxJQUNMO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUtBLGVBQWUsWUFBWTtBQUN2QixVQUFJLEtBQUssY0FBYztBQUNuQixjQUFNLE1BQU0sNENBQTRDO0FBQUEsTUFDNUQ7QUFDQSxZQUFNLFdBQVcsV0FBVyxLQUFLLFVBQVU7QUFDM0MsVUFBSSxDQUFDLFVBQVU7QUFDWCxjQUFNLE1BQU0sd0JBQXdCO0FBQUEsTUFDeEM7QUFDQSxVQUFJLFNBQVMsZ0JBQWdCLE9BQU87QUFDaEMsY0FBTSxNQUFNLG9FQUFvRSxTQUFTLGNBQWM7QUFBQSxNQUMzRztBQUNBLFdBQUssT0FBTyxTQUFTO0FBQ3JCLFdBQUssZUFBZSxTQUFTLFVBQVUsVUFBVTtBQUNqRCxVQUFJLFNBQVMsYUFBYTtBQUN0QixhQUFLLGtCQUFrQixTQUFTLGFBQWEsVUFBVTtBQUFBLE1BQzNEO0FBQ0EsVUFBSSxTQUFTLFFBQVE7QUFDakIsYUFBSyxhQUFhLFNBQVMsTUFBTTtBQUFBLE1BQ3JDO0FBQ0EsV0FBSyw2QkFBNkIsVUFBVTtBQUM1QyxZQUFNLGFBQWEsV0FBVyxLQUFLLGlCQUFpQjtBQUNwRCxVQUFJLFlBQVk7QUFDWixhQUFLLCtCQUErQixZQUFZLFVBQVU7QUFBQSxNQUM5RDtBQUNBLFdBQUssZUFBZTtBQUFBLElBQ3hCO0FBQUEsSUFDQSxlQUFlLFVBQVUsWUFBWTtBQUNqQyxpQkFBVyxZQUFZLFNBQVMsWUFBWTtBQUN4QyxZQUFJLEVBQUUsWUFBWSxLQUFLLFFBQVE7QUFDM0Isa0JBQVEsS0FBSyxzQkFBc0IsV0FBVztBQUM5QztBQUFBLFFBQ0o7QUFDQSxjQUFNLE9BQU8sU0FBUyxXQUFXLFFBQVEsRUFBRTtBQUMzQyxjQUFNLFdBQVcsV0FBVyxVQUFVLElBQUk7QUFDMUMsYUFBSyxNQUFNLFFBQVEsSUFBSSxLQUFLLE9BQU8sV0FBVyxRQUFRO0FBQ3RELGFBQUssU0FBUyxRQUFRLElBQUksYUFBSyxLQUFLLGFBQUssT0FBTyxHQUFHLEtBQUssTUFBTSxRQUFRLEVBQUUsYUFBYTtBQUFBLE1BQ3pGO0FBQUEsSUFDSjtBQUFBLElBQ0Esa0JBQWtCLGFBQWEsWUFBWTtBQUN2QyxpQkFBVyxrQkFBa0IsWUFBWSxpQkFBaUI7QUFDdEQsY0FBTSxhQUFhO0FBQUEsVUFDZixNQUFNLEtBQUssT0FBTyxXQUFXLFdBQVcsVUFBVSxlQUFlLElBQUksQ0FBQztBQUFBLFVBQ3RFLGFBQWE7QUFBQSxVQUNiLGFBQWE7QUFBQSxRQUNqQjtBQUNBLGdCQUFRLGVBQWUsTUFBTTtBQUFBLFVBQ3pCLEtBQUs7QUFDRCx1QkFBVyxjQUFjO0FBQ3pCO0FBQUEsVUFDSixLQUFLO0FBQ0QsdUJBQVcsY0FBYztBQUN6QjtBQUFBLFVBQ0osS0FBSztBQUNEO0FBQUEsVUFDSixLQUFLO0FBQ0Qsb0JBQVEsS0FBSyxnRkFBZ0Y7QUFDN0Y7QUFBQSxVQUNKO0FBQ0ksb0JBQVEsTUFBTSxpQ0FBaUMsZUFBZSxPQUFPO0FBQ3JFO0FBQUEsUUFDUjtBQUNBLGFBQUssd0JBQXdCLEtBQUssVUFBVTtBQUFBLE1BQ2hEO0FBQUEsSUFDSjtBQUFBLElBQ0EsYUFBYUcsU0FBUTtBQUNqQixVQUFJQSxRQUFPLFNBQVMsUUFBUTtBQUN4QixnQkFBUSxLQUFLLDRCQUE0QkEsUUFBTyxpQ0FBaUM7QUFDakY7QUFBQSxNQUNKO0FBQ0EsWUFBTSxnQkFBZ0IsQ0FBQyxhQUFhO0FBQ2hDLGVBQU87QUFBQSxVQUNILGVBQWUsU0FBUztBQUFBLFVBQ3hCLGFBQWEsU0FBUztBQUFBLFFBQzFCO0FBQUEsTUFDSjtBQUNBLFdBQUssVUFBVTtBQUFBLFFBQ1gsb0JBQW9CQSxRQUFPLHNCQUFzQixDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQUEsUUFDekQsaUJBQWlCLGNBQWNBLFFBQU8sdUJBQXVCO0FBQUEsUUFDN0QsaUJBQWlCLGNBQWNBLFFBQU8sdUJBQXVCO0FBQUEsUUFDN0QsY0FBYyxjQUFjQSxRQUFPLG9CQUFvQjtBQUFBLFFBQ3ZELFlBQVksY0FBY0EsUUFBTyxrQkFBa0I7QUFBQSxNQUN2RDtBQUFBLElBQ0o7QUFBQSxJQUNBLDZCQUE2QixZQUFZO0FBQ3JDLFlBQU0sV0FBVyxDQUFDLFdBQVc7QUFDekIsY0FBTSxpQkFBaUIsV0FBVyxLQUFLLE9BQU8sUUFBUTtBQUN0RCxZQUFJLGtCQUFrQiwwQkFBMEIsZ0JBQWdCO0FBQzVELGdCQUFNLDBCQUEwQixlQUFlLHNCQUFzQjtBQUNyRSxnQkFBTSxhQUFhLHdCQUF3QjtBQUMzQyxjQUFJLE1BQU07QUFDVixjQUFJLFVBQVUsWUFBWTtBQUN0QixtQkFBTztBQUNQLG1CQUFPLGNBQWMsV0FBVyxLQUFLLFFBQVE7QUFBQSxVQUNqRCxXQUNTLFNBQVMsWUFBWTtBQUMxQixtQkFBTztBQUNQLG1CQUFPLGFBQWEsV0FBVyxJQUFJLE9BQU87QUFBQSxVQUM5QyxXQUNTLGNBQWMsWUFBWTtBQUMvQixtQkFBTztBQUFBLFVBQ1g7QUFDQSxjQUFJLE1BQU07QUFDTixrQkFBTSxTQUFTLEtBQUssT0FBTyxXQUFXLFdBQVcsVUFBVSxXQUFXLElBQUksRUFBRSxNQUFNLENBQUM7QUFDbkYsaUJBQUssaUJBQWlCLEtBQUs7QUFBQSxjQUN2QjtBQUFBLGNBQ0E7QUFBQSxjQUNBLGFBQWE7QUFBQSxjQUNiO0FBQUEsY0FDQSxRQUFRLFdBQVcsSUFBSSxFQUFFO0FBQUE7QUFBQSxjQUV6Qiw4QkFBOEIsYUFBSyxLQUFLLGFBQUssT0FBTyxHQUFHLE9BQU8sYUFBYTtBQUFBLGNBQzNFLHlCQUF5QixhQUFLLEtBQUssYUFBSyxPQUFPLEdBQUcsT0FBTyxhQUFhO0FBQUEsY0FDdEUsNEJBQTRCLGFBQUssT0FBTyxhQUFLLE9BQU8sR0FBRyxPQUFPLGFBQWE7QUFBQSxZQUMvRSxDQUFDO0FBQUEsVUFDTCxPQUNLO0FBQ0Qsb0JBQVEsS0FBSywyREFBMkQ7QUFBQSxVQUM1RTtBQUFBLFFBQ0o7QUFDQSxtQkFBVyxTQUFTLE9BQU8sVUFBVTtBQUNqQyxtQkFBUyxLQUFLO0FBQUEsUUFDbEI7QUFBQSxNQUNKO0FBQ0EsZUFBUyxLQUFLLE1BQU07QUFBQSxJQUN4QjtBQUFBLElBQ0EsK0JBQStCLFlBQVksWUFBWTtBQUNuRCxZQUFNLGFBQWEsV0FBVyxhQUFhLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxNQUFNO0FBQ2hFLGNBQU0sWUFBWSxhQUFhLFNBQVMsUUFBUSxZQUFZO0FBQzVELGVBQU87QUFBQSxVQUNILElBQUk7QUFBQSxVQUNKLFFBQVEsS0FBSyxPQUFPLFdBQVcsV0FBVyxVQUFVLFNBQVMsSUFBSSxDQUFDO0FBQUEsVUFDbEUsT0FBTztBQUFBLFlBQ0gsV0FBVyxjQUFjO0FBQUEsWUFDekIsUUFBUSxTQUFTLE1BQU0sU0FBUyxFQUFFO0FBQUEsWUFDbEMsUUFBUSxTQUFTLE1BQU0sU0FBUyxFQUFFO0FBQUEsWUFDbEMsTUFBTSxTQUFTLE1BQU0sU0FBUyxFQUFFO0FBQUEsVUFDcEM7QUFBQSxVQUNBLE9BQU87QUFBQSxZQUNILE1BQU0sYUFBSyxPQUFPO0FBQUEsWUFDbEIsTUFBTSxhQUFLLE9BQU87QUFBQSxVQUN0QjtBQUFBLFFBQ0o7QUFBQSxNQUNKLENBQUM7QUFDRCxXQUFLLG1CQUFtQixVQUFVLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxNQUFNLFNBQVM7QUFDbEUsV0FBSyxvQkFBb0IsVUFBVSxPQUFPLENBQUMsTUFBTSxFQUFFLE1BQU0sU0FBUztBQUNsRSxZQUFNLGtCQUFrQixXQUFXLGtCQUFrQixDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVc7QUFBQSxRQUNyRSxNQUFNLE1BQU07QUFBQSxRQUNaLFdBQVcsTUFBTSxVQUFVLElBQUksQ0FBQyxNQUFNLFVBQVUsQ0FBQyxDQUFDO0FBQUEsTUFDdEQsRUFBRTtBQUNGLGlCQUFXLFVBQVUsV0FBVyxTQUFTO0FBQ3JDLGNBQU0sU0FBUyxDQUFDO0FBQ2hCLG1CQUFXLFNBQVMsT0FBTyxRQUFRO0FBQy9CLGdCQUFNLGNBQWM7QUFBQSxZQUNoQixXQUFXO0FBQUEsWUFDWCxXQUFXO0FBQUEsWUFDWCxjQUFjO0FBQUEsWUFDZCxZQUFZLENBQUMsR0FBSyxJQUFNLENBQUc7QUFBQSxZQUMzQixXQUFXO0FBQUEsWUFDWCxNQUFNO0FBQUEsWUFDTixPQUFPO0FBQUEsVUFDWDtBQUNBLGlCQUFPLE9BQU8sYUFBYSxLQUFLO0FBQ2hDLHNCQUFZLE9BQU8sS0FBSyxPQUFPLFdBQVcsV0FBVyxVQUFVLFlBQVksSUFBSSxDQUFDO0FBQ2hGLGlCQUFPLEtBQUssV0FBVztBQUFBLFFBQzNCO0FBQ0EsY0FBTSx3QkFBd0IsT0FBTyxrQkFBa0IsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxPQUFPLGVBQWUsRUFBRSxFQUFFLFNBQVM7QUFDdkcsYUFBSyxjQUFjLEtBQUs7QUFBQSxVQUNwQixNQUFNLE9BQU87QUFBQSxVQUNiLFFBQVEsT0FBTyxTQUNULEtBQUssT0FBTyxXQUFXLFdBQVcsVUFBVSxPQUFPLE1BQU0sQ0FBQyxJQUMxRDtBQUFBLFVBQ047QUFBQSxVQUNBLGlCQUFpQixxQkFBcUIsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFLE1BQU0sU0FBUztBQUFBLFVBQ3RFLGtCQUFrQixxQkFBcUIsT0FBTyxDQUFDLE1BQU0sRUFBRSxNQUFNLFNBQVM7QUFBQSxRQUMxRSxDQUFDO0FBQUEsTUFDTDtBQUVBLGlCQUFXLGVBQWUsS0FBSyxlQUFlO0FBQzFDLGlCQUFTLElBQUksR0FBRyxJQUFJLFlBQVksT0FBTyxTQUFTLEdBQUcsRUFBRSxHQUFHO0FBQ3BELGdCQUFNLGtCQUFrQixZQUFZLE9BQU8sQ0FBQztBQUM1QyxnQkFBTSx1QkFBdUIsWUFBWSxPQUFPLElBQUksQ0FBQztBQUNyRCxnQkFBTSxxQkFBcUIsZ0JBQWdCLEtBQUssb0JBQW9CLGFBQUssT0FBTyxDQUFDO0FBQ2pGLGdCQUFNLDBCQUEwQixxQkFBcUIsS0FBSyxvQkFBb0IsYUFBSyxPQUFPLENBQUM7QUFDM0YsZ0JBQU0sZ0JBQWdCLGFBQUssU0FBUyxLQUFLLFVBQVUsb0JBQW9CLHVCQUF1QjtBQUM5RixnQkFBTSxRQUFRO0FBQUEsWUFDVixVQUFVO0FBQUEsWUFDVixhQUFhLGFBQUssS0FBSyxhQUFLLE9BQU8sR0FBRyx1QkFBdUI7QUFBQSxZQUM3RCxzQkFBc0IsYUFBSyxLQUFLLGFBQUssT0FBTyxHQUFHLGdCQUFnQixLQUFLLGFBQWE7QUFBQSxZQUNqRiw2QkFBNkIsY0FBTSxPQUFPLGNBQU0sT0FBTyxHQUFHLGdCQUFnQixLQUFLLGNBQWM7QUFBQSxZQUM3RixVQUFVLGFBQUssVUFBVSxhQUFLLE9BQU8sR0FBRyxxQkFBcUIsS0FBSyxvQkFBb0IsS0FBSyxPQUFPLENBQUM7QUFBQTtBQUFBLFlBRW5HLFlBQVksS0FBSyxJQUFJLE1BQU0sYUFBSyxPQUFPLGFBQWEsQ0FBQztBQUFBO0FBQUEsWUFFckQsZ0JBQWdCO0FBQUEsWUFDaEIsbUJBQW1CO0FBQUEsVUFDdkI7QUFDQSxjQUFJLFlBQVksUUFBUTtBQUNwQixrQkFBTSxpQkFBaUIsWUFBWSxPQUFPLDJCQUEyQixhQUFLLE9BQU8sR0FBRyx1QkFBdUI7QUFDM0csa0JBQU0sb0JBQW9CLGFBQUssS0FBSyxhQUFLLE9BQU8sR0FBRyx1QkFBdUI7QUFBQSxVQUM5RTtBQUNBLDBCQUFnQixRQUFRO0FBQUEsUUFDNUI7QUFBQSxNQUNKO0FBQUEsSUFDSjtBQUFBLElBQ0EsT0FBTyxJQUFJO0FBQ1AsVUFBSSxDQUFDLEtBQUssY0FBYztBQUNwQjtBQUFBLE1BQ0o7QUFHQSxXQUFLLGVBQWU7QUFJcEIsV0FBSyxvQkFBb0I7QUFFekIsV0FBSyxtQkFBbUIsRUFBRTtBQUFBLElBQzlCO0FBQUEsSUFDQSxVQUFVLFVBQVUsT0FBTztBQUN2QixZQUFNLFdBQVcsU0FBUztBQUMxQixZQUFNLGNBQWMsU0FBUztBQUM3QixhQUFRLEtBQUssSUFBSSxPQUFPLFFBQVEsSUFBSSxXQUFZO0FBQUEsSUFDcEQ7QUFBQSxJQUNBLGlCQUFpQjtBQUNiLFVBQUksQ0FBQyxLQUFLLFdBQVcsQ0FBQyxLQUFLLGNBQWM7QUFDckM7QUFBQSxNQUNKO0FBQ0EsWUFBTSxlQUFlLEtBQUssTUFBTSxLQUFLLG9CQUFvQixLQUFLLFVBQVUsS0FBSyxRQUFRLGtCQUFrQjtBQUN2RyxZQUFNLGVBQWUsS0FBSyxhQUFhLG9CQUFvQixLQUFLLFFBQVE7QUFDeEUsWUFBTSxrQkFBa0IsYUFBSyxJQUFJLEtBQUssVUFBVSxjQUFjLFlBQVk7QUFDMUUsbUJBQUssVUFBVSxpQkFBaUIsZUFBZTtBQUUvQyxXQUFLLE1BQU0sS0FBSyxPQUFPLDRCQUE0QixlQUFlO0FBQ2xFLFlBQU0sSUFBSSxhQUFLLElBQUksaUJBQWlCLEtBQUssY0FBYztBQUN2RCxZQUFNLElBQUksYUFBSyxJQUFJLGlCQUFpQixLQUFLLFlBQVk7QUFDckQsWUFBTSxNQUFNLEtBQUssTUFBTSxHQUFHLENBQUMsSUFBSSxLQUFLO0FBQ3BDLFlBQU0sS0FBSyxLQUFLLEtBQUssSUFBSSxJQUFJLElBQUksQ0FBQztBQUNsQyxZQUFNLElBQUksYUFBSyxJQUFJLGlCQUFpQixLQUFLLFNBQVM7QUFDbEQsVUFBSSxRQUFRLEtBQUssTUFBTSxDQUFDLEdBQUcsRUFBRSxJQUFJLEtBQUs7QUFFdEMsVUFBSSxRQUFRLEdBQUc7QUFDWCxnQkFBUSxLQUFLLFVBQVUsS0FBSyxRQUFRLGNBQWMsS0FBSztBQUFBLE1BQzNELE9BQ0s7QUFDRCxnQkFBUSxDQUFDLEtBQUssVUFBVSxLQUFLLFFBQVEsWUFBWSxDQUFDLEtBQUs7QUFBQSxNQUMzRDtBQUVBLFVBQUksS0FBSyxNQUFNLFNBQVM7QUFDcEIsWUFBSSxVQUFVO0FBQ2QsWUFBSSxVQUFVLEdBQUc7QUFDYixvQkFBVSxLQUFLLFVBQVUsS0FBSyxRQUFRLGlCQUFpQixPQUFPO0FBQUEsUUFDbEUsT0FDSztBQUNELG9CQUFVLENBQUMsS0FBSyxVQUFVLEtBQUssUUFBUSxpQkFBaUIsQ0FBQyxPQUFPO0FBQUEsUUFDcEU7QUFDQSxjQUFNLGNBQWMsYUFBSyxVQUFVLEtBQUssWUFBWSxPQUFPLFNBQVMsQ0FBQztBQUNyRSxhQUFLLE1BQU0sUUFBUSxnQkFBZ0IsYUFBSyxTQUFTLGFBQWEsS0FBSyxTQUFTLFNBQVMsV0FBVztBQUFBLE1BQ3BHO0FBRUEsVUFBSSxLQUFLLE1BQU0sVUFBVTtBQUNyQixZQUFJLFdBQVc7QUFDZixZQUFJLFdBQVcsR0FBRztBQUNkLHFCQUFXLEtBQUssVUFBVSxLQUFLLFFBQVEsaUJBQWlCLFFBQVE7QUFBQSxRQUNwRSxPQUNLO0FBQ0QscUJBQVcsQ0FBQyxLQUFLLFVBQVUsS0FBSyxRQUFRLGlCQUFpQixDQUFDLFFBQVE7QUFBQSxRQUN0RTtBQUNBLGNBQU0sY0FBYyxhQUFLLFVBQVUsS0FBSyxZQUFZLE9BQU8sVUFBVSxDQUFDO0FBQ3RFLGFBQUssTUFBTSxTQUFTLGdCQUFnQixhQUFLLFNBQVMsYUFBYSxLQUFLLFNBQVMsVUFBVSxXQUFXO0FBQUEsTUFDdEc7QUFBQSxJQUNKO0FBQUEsSUFDQSxzQkFBc0I7QUFDbEIsaUJBQVcsa0JBQWtCLEtBQUssa0JBQWtCO0FBQ2hELGFBQUssbUJBQW1CLGNBQWM7QUFBQSxNQUMxQztBQUFBLElBQ0o7QUFBQSxJQUNBLG1CQUFtQixnQkFBZ0I7QUFDL0IsWUFBTSxjQUFjLGVBQWU7QUFDbkMsWUFBTSxpQkFBaUIsZUFBZTtBQUN0QyxZQUFNLGFBQWEsYUFBSyxTQUFTLEtBQUssVUFBVTtBQUNoRCxjQUFRLGVBQWUsTUFBTTtBQUFBLFFBQ3pCLEtBQUs7QUFDRDtBQUNJLGtCQUFNLGVBQWUsYUFBSyxTQUFTLEtBQUssWUFBWSxnQkFBZ0IsZUFBZSxPQUFPLGFBQWE7QUFFdkcsa0JBQU0sdUJBQXVCLGFBQUssU0FBUyxLQUFLLFlBQVksZUFBZSx5QkFBeUIsWUFBWTtBQUNoSCx5QkFBSyxJQUFJLHNCQUFzQixzQkFBc0IsY0FBYztBQUVuRSxrQkFBTSxpQkFBaUIsYUFBSyxPQUFPLEtBQUssWUFBWSxXQUFXO0FBQy9ELGtCQUFNLG9CQUFvQixhQUFLLFNBQVMsS0FBSyxZQUFZLGdCQUFnQixvQkFBb0I7QUFDN0YseUJBQUssU0FBUyxtQkFBbUIsbUJBQW1CLFdBQVc7QUFDL0Qsa0JBQU0sUUFBUSxhQUFLLGNBQWMsS0FBSyxVQUFVLGVBQWUsTUFBTSxpQkFBaUI7QUFDdEYsa0JBQU0sYUFBYSxhQUFLLFdBQVcsS0FBSyxZQUFZLGVBQWUsTUFBTSxLQUFLO0FBQzlFLHlCQUFLLElBQUksWUFBWSxhQUFhLGFBQUssT0FBTyxLQUFLLFdBQVcsVUFBVSxDQUFDO0FBQ3pFLHlCQUFLLElBQUksWUFBWSxZQUFZLGlCQUFpQjtBQUFBLFVBQ3REO0FBQ0E7QUFBQSxRQUNKLEtBQUs7QUFDRDtBQUNJLGtCQUFNLHFCQUFxQixlQUFlLFlBQVksT0FBTztBQUU3RCxrQkFBTSxVQUFVLGFBQUssY0FBYyxLQUFLLFVBQVUsZUFBZSxNQUFNLFdBQVc7QUFDbEYseUJBQUssY0FBYyxTQUFTLFNBQVMsa0JBQWtCO0FBRXZELGtCQUFNLFFBQVEsZUFBZSxPQUFPLG9CQUFvQixLQUFLLFFBQVE7QUFDckUseUJBQUssSUFBSSxPQUFPLE9BQU8sZUFBZSxZQUFZLG9CQUFvQixLQUFLLE9BQU8sQ0FBQztBQUNuRix5QkFBSyxVQUFVLE9BQU8sS0FBSztBQUUzQixrQkFBTSxhQUFhLGFBQUssV0FBVyxLQUFLLFlBQVksU0FBUyxLQUFLO0FBQ2xFLHlCQUFLLElBQUksWUFBWSxhQUFLLE9BQU8sS0FBSyxXQUFXLGtCQUFrQixHQUFHLFVBQVU7QUFDaEYseUJBQUssSUFBSSxZQUFZLFlBQVksa0JBQWtCO0FBQ25ELHlCQUFLLElBQUksWUFBWSxZQUFZLFdBQVc7QUFBQSxVQUNoRDtBQUNBO0FBQUEsUUFDSixLQUFLO0FBQ0Q7QUFDSSxrQkFBTSxlQUFlLGFBQUssSUFBSSxZQUFZLGdCQUFnQixlQUFlLE9BQU8sYUFBYTtBQUM3Rix5QkFBSyxJQUFJLFlBQVksYUFBYSxZQUFZO0FBQUEsVUFDbEQ7QUFDQTtBQUFBLE1BQ1I7QUFFQSxtQkFBSyxNQUFNLFlBQVksYUFBYSxZQUFZLGVBQWUsTUFBTTtBQUNyRSxxQkFBZSxZQUFZLGdCQUFnQjtBQUFBLElBQy9DO0FBQUEsSUFDQSxtQkFBbUIsSUFBSTtBQUVuQixXQUFLLGlCQUFpQixRQUFRLENBQUMsRUFBRSxRQUFRLE9BQU8sTUFBTSxNQUFNO0FBQ3hELGNBQU1DLFVBQVMsYUFBSyxLQUFLLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDakQsZUFBTyxxQkFBcUJBLE9BQU07QUFDbEMscUJBQUssSUFBSSxNQUFNLE1BQU0sT0FBTyxvQkFBb0IsS0FBSyxPQUFPLEdBQUdBLE9BQU07QUFBQSxNQUN6RSxDQUFDO0FBQ0QsV0FBSyxrQkFBa0IsUUFBUSxDQUFDLEVBQUUsUUFBUSxPQUFPLE1BQU0sTUFBTTtBQUN6RCxjQUFNLGNBQWMsT0FBTyxvQkFBb0IsS0FBSyxRQUFRO0FBQzVELGNBQU0sYUFBYSxhQUFLLEtBQUssTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUNyRCxlQUFPLHFCQUFxQixVQUFVO0FBQ3RDLHFCQUFLLElBQUksTUFBTSxNQUFNLGFBQWEsVUFBVTtBQUM1QyxjQUFNLGFBQWEsYUFBSyxLQUFLLE1BQU0sTUFBTSxNQUFNLElBQUk7QUFDbkQsZUFBTyxxQkFBcUIsVUFBVTtBQUN0QyxxQkFBSyxJQUFJLE1BQU0sTUFBTSxhQUFhLFVBQVU7QUFBQSxNQUNoRCxDQUFDO0FBRUQsV0FBSyxjQUFjLFFBQVEsQ0FBQyxnQkFBZ0I7QUFDeEMsaUJBQVMsSUFBSSxHQUFHLElBQUksWUFBWSxPQUFPLFNBQVMsR0FBRyxFQUFFLEdBQUc7QUFDcEQsZ0JBQU0sUUFBUSxZQUFZLE9BQU8sQ0FBQztBQUNsQyxnQkFBTSxzQkFBc0IsTUFBTSxLQUFLLFNBQ2pDLE1BQU0sS0FBSyxPQUFPLGdCQUNsQixLQUFLO0FBR1gsZ0JBQU0sVUFBVSxLQUFLO0FBQ3JCLGNBQUksWUFBWSxRQUFRO0FBQ3BCLHlCQUFLLElBQUksU0FBUyxNQUFNLE1BQU0sbUJBQW1CLE1BQU0sTUFBTSxjQUFjO0FBQzNFLHdCQUFZLE9BQU8scUJBQXFCLE9BQU87QUFBQSxVQUNuRCxPQUNLO0FBQ0QseUJBQUssSUFBSSxTQUFTLE1BQU0sTUFBTSxhQUFhLE1BQU0sTUFBTSxRQUFRO0FBQUEsVUFDbkU7QUFDQSx1QkFBSyxNQUFNLFNBQVMsU0FBUyxJQUFNLE1BQU0sU0FBUztBQUVsRCxnQkFBTSxZQUFZLGFBQUssS0FBSyxLQUFLLFlBQVksTUFBTSxNQUFNLFFBQVE7QUFDakUsdUJBQUssY0FBYyxXQUFXLFdBQVcsTUFBTSxNQUFNLG9CQUFvQjtBQUN6RSx1QkFBSyxjQUFjLFdBQVcsV0FBVyxtQkFBbUI7QUFDNUQsdUJBQUssTUFBTSxXQUFXLFdBQVcsS0FBSyxNQUFNLFNBQVM7QUFFckQsZ0JBQU0sV0FBVyxhQUFLLE1BQU0sS0FBSyxXQUFXLE1BQU0sWUFBWSxLQUFLLE1BQU0sWUFBWTtBQUVyRixnQkFBTSxXQUFXLGFBQUssS0FBSyxLQUFLLFVBQVUsTUFBTSxNQUFNLFdBQVc7QUFDakUsdUJBQUssSUFBSSxVQUFVLFVBQVUsT0FBTztBQUNwQyx1QkFBSyxJQUFJLFVBQVUsVUFBVSxTQUFTO0FBQ3RDLHVCQUFLLElBQUksVUFBVSxVQUFVLFFBQVE7QUFHckMsZ0JBQU0sZ0JBQWdCLE1BQU0sS0FBSyxvQkFBb0IsS0FBSyxRQUFRO0FBQ2xFLHVCQUFLLElBQUksVUFBVSxVQUFVLGFBQWE7QUFDMUMsdUJBQUssVUFBVSxVQUFVLFFBQVE7QUFDakMsdUJBQUssWUFBWSxVQUFVLGVBQWUsVUFBVSxNQUFNLE1BQU0sVUFBVTtBQUcxRSxxQkFBVyxFQUFFLE9BQU8sTUFBTSxLQUFLLFlBQVksaUJBQWlCO0FBQ3hELGdCQUFJLGNBQWMsS0FBSztBQUN2QixrQkFBTSxlQUFlLE1BQU07QUFDM0IsMEJBQWMsYUFBSyxJQUFJLGFBQWEsVUFBVSxZQUFZO0FBQzFELGtCQUFNLFNBQVMsTUFBTSxTQUFTLE1BQU07QUFDcEMsa0JBQU1DLFFBQU8sYUFBSyxPQUFPLFdBQVcsSUFBSTtBQUN4QyxnQkFBSUEsUUFBTyxHQUFLO0FBQ1osMkJBQUssVUFBVSxhQUFhLFdBQVc7QUFDdkMsMkJBQUssWUFBWSxVQUFVLFVBQVUsYUFBYSxDQUFDQSxLQUFJO0FBRXZELDJCQUFLLElBQUksVUFBVSxVQUFVLGFBQWE7QUFDMUMsMkJBQUssVUFBVSxVQUFVLFFBQVE7QUFDakMsMkJBQUssWUFBWSxVQUFVLGVBQWUsVUFBVSxNQUFNLE1BQU0sVUFBVTtBQUFBLFlBQzlFO0FBQUEsVUFDSjtBQUVBLHFCQUFXLEVBQUUsT0FBTyxNQUFNLEtBQUssWUFBWSxrQkFBa0I7QUFDekQsZ0JBQUksY0FBYyxLQUFLO0FBQ3ZCLGtCQUFNLE9BQU8sTUFBTTtBQUNuQixrQkFBTSxPQUFPLE1BQU07QUFFbkIsMEJBQWMsYUFBSyxJQUFJLGFBQWEsVUFBVSxJQUFJO0FBQ2xELGtCQUFNLGFBQWEsYUFBSyxJQUFJLEtBQUssYUFBYSxNQUFNLElBQUk7QUFDeEQsa0JBQU1DLE9BQU0sYUFBSyxJQUFJLFlBQVksV0FBVztBQUM1QyxnQkFBSSxhQUFLLGNBQWMsVUFBVSxLQUFLQSxNQUFLO0FBRXZDLDJCQUFLLElBQUksYUFBYSxVQUFVLElBQUk7QUFBQSxZQUN4QyxXQUNTQSxPQUFNLEdBQUs7QUFFaEIsMkJBQUssTUFBTSxZQUFZLFlBQVlBLE9BQU0sYUFBSyxjQUFjLFVBQVUsQ0FBQztBQUN2RSwyQkFBSyxJQUFJLGFBQWEsYUFBYSxVQUFVO0FBQUEsWUFDakQ7QUFDQSxrQkFBTSxTQUFTLE1BQU0sU0FBUyxNQUFNO0FBQ3BDLGtCQUFNRCxRQUFPLGFBQUssT0FBTyxXQUFXLElBQUk7QUFDeEMsZ0JBQUlBLFFBQU8sR0FBSztBQUNaLDJCQUFLLFVBQVUsYUFBYSxXQUFXO0FBQ3ZDLDJCQUFLLFlBQVksVUFBVSxVQUFVLGFBQWEsQ0FBQ0EsS0FBSTtBQUV2RCwyQkFBSyxJQUFJLFVBQVUsVUFBVSxhQUFhO0FBQzFDLDJCQUFLLFVBQVUsVUFBVSxRQUFRO0FBQ2pDLDJCQUFLLFlBQVksVUFBVSxlQUFlLFVBQVUsTUFBTSxNQUFNLFVBQVU7QUFBQSxZQUM5RTtBQUFBLFVBQ0o7QUFFQSx1QkFBSyxLQUFLLE1BQU0sTUFBTSxVQUFVLE1BQU0sTUFBTSxXQUFXO0FBQ3ZELHVCQUFLLEtBQUssTUFBTSxNQUFNLGFBQWEsUUFBUTtBQUMzQyxjQUFJLFlBQVksUUFBUTtBQUNwQix5QkFBSyxLQUFLLE1BQU0sTUFBTSxnQkFBZ0IsTUFBTSxNQUFNLGlCQUFpQjtBQUNuRSx5QkFBSyxLQUFLLE1BQU0sTUFBTSxtQkFBbUIsUUFBUTtBQUNqRCx3QkFBWSxPQUFPLDJCQUEyQixNQUFNLE1BQU0saUJBQWlCO0FBQUEsVUFDL0U7QUFFQSxnQkFBTSxLQUFLLE9BQU8sMkJBQTJCLFFBQVE7QUFDckQsZ0JBQU0sbUJBQW1CLGNBQU0sZ0JBQWdCLEtBQUssWUFBWSxRQUFRO0FBQ3hFLHdCQUFNLFNBQVMsa0JBQWtCLE1BQU0sTUFBTSw2QkFBNkIsZ0JBQWdCO0FBQzFGLHdCQUFNLGVBQWUsVUFBVSxnQkFBZ0I7QUFDL0MsdUJBQUssVUFBVSxVQUFVLFFBQVE7QUFFakMsZ0JBQU0sZ0JBQWdCLGFBQUssV0FBVyxLQUFLLFlBQVksTUFBTSxNQUFNLFVBQVUsUUFBUTtBQUNyRixnQkFBTSxLQUFLLGdCQUFnQixhQUFLLElBQUksS0FBSyxZQUFZLE1BQU0sTUFBTSxzQkFBc0IsYUFBYTtBQUFBLFFBQ3hHO0FBQUEsTUFDSixDQUFDO0FBQUEsSUFDTDtBQUFBO0FBQUE7QUFBQTtBQUFBLElBSUEsSUFBSSxZQUFZLGFBQWE7QUFDekIsV0FBSyx3QkFBd0IsUUFBUSxDQUFDLGVBQWU7QUFDakQsY0FBTSxVQUFVLGVBQWUsV0FBVyxlQUN0QyxlQUFlLFdBQVc7QUFDOUIsbUJBQVcsS0FBSyxjQUFjLE1BQU0sRUFBRSxRQUFRLENBQUMsU0FBUztBQUNwRCxlQUFLLFNBQVM7QUFBQSxRQUNsQixDQUFDO0FBQUEsTUFDTCxDQUFDO0FBQUEsSUFDTDtBQUFBLEVBQ0o7QUFwa0JJLGdCQURFLEtBQ0ssWUFBVztBQUNsQixnQkFGRSxLQUVLLGNBQWE7QUFBQTtBQUFBLElBRWhCLEtBQUssRUFBRSxNQUFNLEtBQUssT0FBTztBQUFBO0FBQUEsSUFFekIsY0FBYyxFQUFFLE1BQU0sS0FBSyxPQUFPO0FBQUEsRUFDdEM7OztBQzVDSixNQUFNLGFBQWEsSUFBSSxhQUFhLENBQUM7QUFJckMsTUFBTSx3QkFBTixjQUFvQyxVQUFVO0FBQUEsSUFVMUMsT0FBTztBQUNILFdBQUssS0FBSztBQUNWLFdBQUssUUFBUTtBQUNiLFdBQUssT0FBTztBQUNaLFdBQUssT0FBTztBQUNaLGFBQU8saUJBQWlCLFdBQVcsS0FBSyxNQUFNLEtBQUssSUFBSSxDQUFDO0FBQ3hELGFBQU8saUJBQWlCLFNBQVMsS0FBSyxRQUFRLEtBQUssSUFBSSxDQUFDO0FBQUEsSUFDNUQ7QUFBQSxJQUNBLFFBQVE7QUFDSixXQUFLLGFBQWEsS0FBSyxjQUFjLEtBQUs7QUFBQSxJQUM5QztBQUFBLElBQ0EsU0FBUztBQUNMLG1CQUFLLEtBQUssVUFBVTtBQUNwQixVQUFJLEtBQUs7QUFDTCxtQkFBVyxDQUFDLEtBQUs7QUFDckIsVUFBSSxLQUFLO0FBQ0wsbUJBQVcsQ0FBQyxLQUFLO0FBQ3JCLFVBQUksS0FBSztBQUNMLG1CQUFXLENBQUMsS0FBSztBQUNyQixVQUFJLEtBQUs7QUFDTCxtQkFBVyxDQUFDLEtBQUs7QUFDckIsbUJBQUssVUFBVSxZQUFZLFVBQVU7QUFDckMsaUJBQVcsQ0FBQyxLQUFLLEtBQUs7QUFDdEIsaUJBQVcsQ0FBQyxLQUFLLEtBQUs7QUFDdEIsbUJBQUssY0FBYyxZQUFZLFlBQVksS0FBSyxXQUFXLGNBQWM7QUFDekUsVUFBSSxLQUFLLE9BQU87QUFDWixtQkFBVyxDQUFDLElBQUk7QUFDaEIscUJBQUssVUFBVSxZQUFZLFVBQVU7QUFDckMscUJBQUssTUFBTSxZQUFZLFlBQVksS0FBSyxLQUFLO0FBQUEsTUFDakQ7QUFDQSxXQUFLLE9BQU8sZUFBZSxVQUFVO0FBQUEsSUFDekM7QUFBQSxJQUNBLE1BQU0sR0FBRztBQUNMLFVBQUksRUFBRSxZQUFZLE1BQ2QsRUFBRSxZQUFZLE1BQ2QsRUFBRSxZQUFZLElBQVk7QUFDMUIsYUFBSyxLQUFLO0FBQUEsTUFDZCxXQUNTLEVBQUUsWUFBWSxNQUFrQixFQUFFLFlBQVksSUFBWTtBQUMvRCxhQUFLLFFBQVE7QUFBQSxNQUNqQixXQUNTLEVBQUUsWUFBWSxNQUFpQixFQUFFLFlBQVksSUFBWTtBQUM5RCxhQUFLLE9BQU87QUFBQSxNQUNoQixXQUNTLEVBQUUsWUFBWSxNQUNuQixFQUFFLFlBQVksTUFDZCxFQUFFLFlBQVksSUFBWTtBQUMxQixhQUFLLE9BQU87QUFBQSxNQUNoQjtBQUFBLElBQ0o7QUFBQSxJQUNBLFFBQVEsR0FBRztBQUNQLFVBQUksRUFBRSxZQUFZLE1BQ2QsRUFBRSxZQUFZLE1BQ2QsRUFBRSxZQUFZLElBQVk7QUFDMUIsYUFBSyxLQUFLO0FBQUEsTUFDZCxXQUNTLEVBQUUsWUFBWSxNQUFrQixFQUFFLFlBQVksSUFBWTtBQUMvRCxhQUFLLFFBQVE7QUFBQSxNQUNqQixXQUNTLEVBQUUsWUFBWSxNQUFpQixFQUFFLFlBQVksSUFBWTtBQUM5RCxhQUFLLE9BQU87QUFBQSxNQUNoQixXQUNTLEVBQUUsWUFBWSxNQUNuQixFQUFFLFlBQVksTUFDZCxFQUFFLFlBQVksSUFBWTtBQUMxQixhQUFLLE9BQU87QUFBQSxNQUNoQjtBQUFBLElBQ0o7QUFBQSxFQUNKO0FBN0VJLGdCQURFLHVCQUNLLFlBQVc7QUFDbEIsZ0JBRkUsdUJBRUssY0FBYTtBQUFBO0FBQUEsSUFFaEIsT0FBTyxFQUFFLE1BQU0sS0FBSyxPQUFPLFNBQVMsSUFBSTtBQUFBO0FBQUEsSUFFeEMsT0FBTyxFQUFFLE1BQU0sS0FBSyxNQUFNLFNBQVMsTUFBTTtBQUFBO0FBQUEsSUFFekMsWUFBWSxFQUFFLE1BQU0sS0FBSyxPQUFPO0FBQUEsRUFDcEM7OztBQ2ZKLE1BQUlFLGVBQTBDLFNBQVUsWUFBWSxRQUFRLEtBQUssTUFBTTtBQUNuRixRQUFJLElBQUksVUFBVSxRQUFRLElBQUksSUFBSSxJQUFJLFNBQVMsU0FBUyxPQUFPLE9BQU8sT0FBTyx5QkFBeUIsUUFBUSxHQUFHLElBQUksTUFBTTtBQUMzSCxRQUFJLE9BQU8sWUFBWSxZQUFZLE9BQU8sUUFBUSxhQUFhO0FBQVksVUFBSSxRQUFRLFNBQVMsWUFBWSxRQUFRLEtBQUssSUFBSTtBQUFBO0FBQ3hILGVBQVMsSUFBSSxXQUFXLFNBQVMsR0FBRyxLQUFLLEdBQUc7QUFBSyxZQUFJLElBQUksV0FBVyxDQUFDO0FBQUcsZUFBSyxJQUFJLElBQUksRUFBRSxDQUFDLElBQUksSUFBSSxJQUFJLEVBQUUsUUFBUSxLQUFLLENBQUMsSUFBSSxFQUFFLFFBQVEsR0FBRyxNQUFNO0FBQ2hKLFdBQU8sSUFBSSxLQUFLLEtBQUssT0FBTyxlQUFlLFFBQVEsS0FBSyxDQUFDLEdBQUc7QUFBQSxFQUNoRTtBQU1BLE1BQU0sV0FBVyxhQUFLLE9BQU87QUFDN0IsTUFBTSxZQUFZLGFBQUssT0FBTztBQUM5QixNQUFNLGlCQUFpQixJQUFJLGFBQWEsQ0FBQztBQUN6QyxNQUFNLGlCQUFpQixJQUFJLGFBQWEsQ0FBQztBQUN6QyxNQUFNLFVBQVUsSUFBSSxhQUFhLENBQUM7QUFDbEMsTUFBTSxVQUFVLElBQUksYUFBYSxDQUFDO0FBQ2xDLE1BQU0sUUFBUSxDQUFDLFFBQVEsT0FBTztBQUk5QixNQUFNLGdCQUFOLGNBQTJCLFVBQVU7QUFBQSxJQU1qQyxrQkFBa0IsQ0FBQztBQUFBLElBQ25CLG1CQUFtQjtBQUFBLElBQ25CO0FBQUEsSUFDQTtBQUFBLElBQ0EsZUFBZTtBQUFBLElBQ2YsV0FBVyxDQUFDO0FBQUEsSUFDWixRQUFRLENBQUM7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUlUO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFJQSxnQkFBZ0IsSUFBSSxRQUFRO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFJNUI7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUlBLFdBQVcsb0JBQUksSUFBSSxDQUFDLDRCQUE0QixDQUFDO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFJakQsYUFBYTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBSWI7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUlBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBSUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUlBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFJQTtBQUFBLElBQ0EsYUFBYTtBQUNULFdBQUssY0FBYyxNQUFNLEtBQUssVUFBVTtBQUN4QyxZQUFNLGtCQUFrQixTQUFTLEtBQUssWUFBWSxPQUFPLENBQUMsRUFBRSxZQUFZLElBQUksS0FBSyxZQUFZLE1BQU0sQ0FBQztBQUNwRyxXQUFLLGNBQ0QsS0FBSyxlQUFlLEtBQUssT0FBTyxRQUFRLG9CQUFvQixlQUFlLEVBQUUsQ0FBQztBQUNsRixXQUFLLG9CQUFvQixLQUFLLHFCQUFxQixLQUFLLE9BQU8sU0FBUyxDQUFDO0FBQ3pFLFdBQUssK0JBQStCLEtBQUssZUFBZSxLQUFLLGlCQUFpQjtBQUM5RSxXQUFLLE9BQU8saUJBQWlCLElBQUksTUFBTTtBQUNuQyxhQUFLLE9BQU8sSUFBSSxRQUFRLGlCQUFpQixzQkFBc0IsS0FBSyxzQkFBc0IsS0FBSyxJQUFJLENBQUM7QUFBQSxNQUN4RyxDQUFDO0FBQUEsSUFDTDtBQUFBLElBQ0EsZUFBZTtBQUNYLFdBQUssT0FBTyxJQUFJLFNBQVMsb0JBQW9CLHNCQUFzQixLQUFLLHNCQUFzQixLQUFLLElBQUksQ0FBQztBQUFBLElBQzVHO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBTUEsNEJBQTRCLGtCQUFrQjtBQUMxQyxZQUFNLHdCQUF3QixLQUFLLFlBQVksYUFBYSxZQUFZO0FBQ3hFLFVBQUksQ0FBQztBQUNEO0FBQ0osNEJBQXNCLHlCQUF5QjtBQUFBLElBQ25EO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFPQSxlQUFlLEtBQUs7QUFDaEIsWUFBTSxhQUFhLENBQUM7QUFDcEIsVUFBSSxPQUFPO0FBQ1AsZUFBTztBQUNYLFlBQU0sUUFBUSxDQUFDLEdBQUc7QUFDbEIsYUFBTyxNQUFNLFNBQVMsR0FBRztBQUNyQixjQUFNLGFBQWEsTUFBTSxJQUFJO0FBQzdCLGNBQU0sUUFBUSxXQUNULGNBQWMsRUFDZCxPQUFPLENBQUMsTUFBTSxDQUFDLEtBQUssU0FBUyxJQUFJLEVBQUUsSUFBSSxDQUFDO0FBQzdDLG1CQUFXLEtBQUssR0FBRyxLQUFLO0FBQ3hCLGNBQU0sV0FBVyxXQUFXO0FBRTVCLGlCQUFTLElBQUksU0FBUyxTQUFTLEdBQUcsS0FBSyxHQUFHLEVBQUUsR0FBRztBQUMzQyxnQkFBTSxLQUFLLFNBQVMsQ0FBQyxDQUFDO0FBQUEsUUFDMUI7QUFBQSxNQUNKO0FBQ0EsYUFBTztBQUFBLElBQ1g7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFNQSxxQkFBcUIsUUFBUTtBQUN6QixZQUFNLFFBQVEsS0FBSztBQUNuQixVQUFJLFNBQVM7QUFDVDtBQUNKLGVBQVMsSUFBSSxHQUFHLElBQUksTUFBTSxRQUFRLEVBQUUsR0FBRztBQUNuQyxjQUFNLENBQUMsRUFBRSxTQUFTO0FBQUEsTUFDdEI7QUFBQSxJQUNKO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFPQSxzQkFBc0IsT0FBTztBQUN6QixVQUFJLEtBQUssZUFBZSxLQUFLLENBQUMsS0FBSyx3QkFBd0I7QUFDdkQsYUFBSyxxQkFBcUIsS0FBSztBQUFBLE1BQ25DO0FBQ0EsWUFBTSxNQUFNLFFBQVEsQ0FBQyxrQkFBa0I7QUFDbkMsWUFBSSxjQUFjLFFBQVE7QUFDdEI7QUFDSixZQUFJLEtBQUssZUFBZSxjQUFjO0FBQ2xDO0FBQ0osYUFBSyxVQUFVLGNBQWM7QUFDN0IsY0FBTSxVQUFVLEtBQUssbUJBQW1CLEtBQ2xDLEtBQUssaUJBQ0wsS0FBSyxrQkFBa0IsY0FBYyxTQUFTLENBQUM7QUFDckQsYUFBSyxNQUFNLFVBQVU7QUFDckIsYUFBSyxlQUFlLGNBQWEsTUFBTSxJQUFJLEtBQUssR0FBRyxLQUFLO0FBQ3hELFlBQUksS0FBSyxnQkFBZ0I7QUFDckI7QUFDSixjQUFNLEtBQUssR0FBRyxFQUNULEtBQUssQ0FBQyxRQUFRLElBQUksS0FBSyxDQUFDLEVBQ3hCLEtBQUssQ0FBQyxRQUFRO0FBQ2YsZUFBSyxlQUFlO0FBQ3BCLHdCQUFhLE1BQU0sSUFBSSxLQUFLLEtBQUssS0FBSyxZQUFZO0FBQ2xELGNBQUksQ0FBQyxLQUFLLGVBQWU7QUFDckIsaUJBQUssbUJBQW1CLE9BQU87QUFBQSxRQUN2QyxDQUFDLEVBQ0ksTUFBTSxDQUFDLE1BQU07QUFDZCxrQkFBUSxNQUFNLCtCQUErQixLQUFLLGdCQUFnQixDQUFDO0FBQUEsUUFDdkUsQ0FBQztBQUFBLE1BQ0wsQ0FBQztBQUFBLElBQ0w7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFNQSxpQkFBaUI7QUFDYixhQUFPLEtBQUsscUJBQXFCO0FBQUEsSUFDckM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFNQSxNQUFNLG1CQUFtQixTQUFTO0FBQzlCLFlBQU0sWUFBWSxVQUFVLE1BQU0sS0FBSyxjQUFjO0FBQ3JELFdBQUssbUJBQW1CLEtBQUs7QUFDN0IsVUFBSSxDQUFDLEtBQUssd0JBQXdCO0FBRTlCLFlBQUk7QUFDQSxlQUFLLG1CQUFvQixNQUFNLEtBQUssT0FBTyxNQUFNLE9BQU8sU0FBUztBQUFBLFFBQ3JFLFNBQ08sR0FBUDtBQUNJLGtCQUFRLE1BQU0sZ0RBQWdELEdBQUcsbUJBQW1CLEtBQUssaUNBQWlDO0FBQzFILGVBQUsscUJBQXFCLElBQUk7QUFBQSxRQUNsQztBQUNBLGFBQUssaUJBQWlCLFNBQVMsS0FBSztBQUNwQyxhQUFLLGlCQUFpQixpQkFBaUIsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQ2hELGFBQUsscUJBQXFCLEtBQUs7QUFDL0IsWUFBSSxLQUFLO0FBQ0wsZUFBSyxpQkFBaUIsYUFBYSxrQkFBa0I7QUFDekQsYUFBSyxjQUFjLE9BQU87QUFBQSxNQUM5QjtBQUNBLFdBQUssZ0NBQWdDLEtBQUssY0FBYyxLQUFLLGdCQUFnQjtBQUM3RSxXQUFLLDRCQUE0QixLQUFLLGdCQUFnQjtBQUN0RCxXQUFLLFNBQVMsTUFBTSxLQUFLLGlCQUFpQjtBQUFBLElBQzlDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUtBLGdDQUFnQyxTQUFTLEtBQUs7QUFDMUMsWUFBTSxhQUFhLFFBQVEsUUFBUSxLQUFLLFdBQVcsRUFBRTtBQUNyRCxVQUFJLENBQUM7QUFDRDtBQUNKLFdBQUssV0FBVyxDQUFDO0FBQ2pCLFdBQUssUUFBUSxDQUFDO0FBQ2QsaUJBQVcsS0FBSyxZQUFZO0FBQ3hCLGNBQU0sa0JBQWtCLFdBQVcsQ0FBQyxFQUFFO0FBQ3RDLG1CQUFXLEtBQUssaUJBQWlCO0FBRTdCLGdCQUFNLGlCQUFpQixnQkFBZ0IsQ0FBQztBQUN4QyxnQkFBTSxZQUFZLGVBQWU7QUFDakMsZ0JBQU0sVUFBVSxlQUFlO0FBQy9CLGdCQUFNLFVBQVUsZUFBZTtBQUMvQixlQUFLLGdCQUFnQixTQUFTLElBQUksSUFBSSxvQkFBb0IsU0FBUyxFQUFFLENBQUM7QUFDdEUsZUFBSyxnQkFBZ0IsT0FBTyxJQUFJLElBQUksb0JBQW9CLE9BQU8sRUFBRSxDQUFDO0FBQ2xFLGVBQUssZ0JBQWdCLE9BQU8sSUFBSSxJQUFJLG9CQUFvQixPQUFPLEVBQUUsQ0FBQztBQUNsRSxnQkFBTSxTQUFTLGdCQUFnQixDQUFDLEVBQUU7QUFDbEMsZ0JBQU0sV0FBVztBQUFBLFlBQ2IsUUFBUSxLQUFLLGdCQUFnQixTQUFTO0FBQUEsWUFDdEMsS0FBSyxLQUFLLGdCQUFnQixPQUFPO0FBQUEsWUFDakMsS0FBSyxLQUFLLGdCQUFnQixPQUFPO0FBQUEsWUFDakMsSUFBSSxXQUFXLENBQUMsRUFBRSxlQUFlLE1BQU07QUFBQTtBQUFBLFVBQzNDO0FBQ0Esa0JBQVEsUUFBUTtBQUFBLFlBQ1osS0FBSztBQUNELG1CQUFLLFNBQVMsS0FBSyxRQUFRO0FBQzNCO0FBQUEsWUFDSixLQUFLO0FBQUEsWUFDTCxLQUFLO0FBQ0QsbUJBQUssTUFBTSxLQUFLLFFBQVE7QUFDeEI7QUFBQSxVQUNSO0FBQUEsUUFDSjtBQUFBLE1BQ0o7QUFBQSxJQUNKO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBU0EsaUJBQWlCLFFBQVFDLE1BQUtDLE1BQUssT0FBTztBQUN0QyxtQkFBSyxLQUFLLFVBQVVELEtBQUksaUJBQWlCLE9BQU8sR0FBR0MsS0FBSSxpQkFBaUIsT0FBTyxHQUFHLEtBQUs7QUFDdkYsYUFBTyxpQkFBaUIsUUFBUTtBQUNoQyxtQkFBSyxLQUFLLFdBQVdELEtBQUksaUJBQWlCLGNBQWMsR0FBR0MsS0FBSSxpQkFBaUIsY0FBYyxHQUFHLEtBQUs7QUFDdEcsbUJBQUssVUFBVSxXQUFXLFNBQVM7QUFDbkMsYUFBTyxpQkFBaUIsU0FBUztBQUFBLElBQ3JDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUtBLG1CQUFtQjtBQUNmLGlCQUFXLFVBQVUsS0FBSyxVQUFVO0FBQ2hDLGNBQU0sY0FBYyxLQUFLLFFBQVEsUUFBUSxPQUFPLEVBQUUsRUFBRTtBQUNwRCxhQUFLLGlCQUFpQixPQUFPLFFBQVEsT0FBTyxLQUFLLE9BQU8sS0FBSyxXQUFXO0FBQUEsTUFDNUU7QUFDQSxpQkFBVyxRQUFRLEtBQUssT0FBTztBQUMzQixjQUFNLFlBQVksS0FBSyxRQUFRLEtBQUssS0FBSyxFQUFFO0FBQzNDLGNBQU0sdUJBQXVCLFlBQVksS0FBSztBQUM5QyxhQUFLLGlCQUFpQixLQUFLLFFBQVEsS0FBSyxLQUFLLEtBQUssS0FBSyxtQkFBbUI7QUFBQSxNQUM5RTtBQUFBLElBQ0o7QUFBQSxFQUNKO0FBdFFBLE1BQU0sZUFBTjtBQUNJLGdCQURFLGNBQ0ssWUFBVztBQUlsQjtBQUFBO0FBQUE7QUFBQSxnQkFMRSxjQUtLLFNBQVEsb0JBQUksSUFBSTtBQWtRM0IsRUFBQUYsYUFBVztBQUFBLElBQ1AsU0FBUyxLQUFLLE9BQU8sQ0FBQztBQUFBLEVBQzFCLEdBQUcsYUFBYSxXQUFXLGNBQWMsTUFBTTtBQUMvQyxFQUFBQSxhQUFXO0FBQUEsSUFDUCxTQUFTLE9BQU8saUZBQWlGO0FBQUEsRUFDckcsR0FBRyxhQUFhLFdBQVcsbUJBQW1CLE1BQU07QUFDcEQsRUFBQUEsYUFBVztBQUFBLElBQ1AsU0FBUyxPQUFPO0FBQUEsRUFDcEIsR0FBRyxhQUFhLFdBQVcsa0JBQWtCLE1BQU07QUFDbkQsRUFBQUEsYUFBVztBQUFBLElBQ1AsU0FBUyxPQUFPO0FBQUEsRUFDcEIsR0FBRyxhQUFhLFdBQVcscUJBQXFCLE1BQU07QUFDdEQsRUFBQUEsYUFBVztBQUFBLElBQ1AsU0FBUyxPQUFPO0FBQUEsRUFDcEIsR0FBRyxhQUFhLFdBQVcsZUFBZSxNQUFNO0FBQ2hELEVBQUFBLGFBQVc7QUFBQSxJQUNQLFNBQVMsS0FBSyxLQUFLO0FBQUEsRUFDdkIsR0FBRyxhQUFhLFdBQVcsMEJBQTBCLE1BQU07QUFDM0QsRUFBQUEsYUFBVztBQUFBLElBQ1AsU0FBUyxLQUFLLElBQUk7QUFBQSxFQUN0QixHQUFHLGFBQWEsV0FBVyxtQkFBbUIsTUFBTTs7O0FDaFRwRCxNQUFJRyxlQUEwQyxTQUFVLFlBQVksUUFBUSxLQUFLLE1BQU07QUFDbkYsUUFBSSxJQUFJLFVBQVUsUUFBUSxJQUFJLElBQUksSUFBSSxTQUFTLFNBQVMsT0FBTyxPQUFPLE9BQU8seUJBQXlCLFFBQVEsR0FBRyxJQUFJLE1BQU07QUFDM0gsUUFBSSxPQUFPLFlBQVksWUFBWSxPQUFPLFFBQVEsYUFBYTtBQUFZLFVBQUksUUFBUSxTQUFTLFlBQVksUUFBUSxLQUFLLElBQUk7QUFBQTtBQUN4SCxlQUFTLElBQUksV0FBVyxTQUFTLEdBQUcsS0FBSyxHQUFHO0FBQUssWUFBSSxJQUFJLFdBQVcsQ0FBQztBQUFHLGVBQUssSUFBSSxJQUFJLEVBQUUsQ0FBQyxJQUFJLElBQUksSUFBSSxFQUFFLFFBQVEsS0FBSyxDQUFDLElBQUksRUFBRSxRQUFRLEdBQUcsTUFBTTtBQUNoSixXQUFPLElBQUksS0FBSyxLQUFLLE9BQU8sZUFBZSxRQUFRLEtBQUssQ0FBQyxHQUFHO0FBQUEsRUFDaEU7QUFLQSxNQUFNQyxrQkFBaUIsQ0FBQyxNQUFNO0FBQzFCLE1BQUUsZUFBZTtBQUFBLEVBQ3JCO0FBQ0EsTUFBTUMsV0FBVSxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQ3hCLE1BQU0sV0FBVyxhQUFLLE9BQU87QUFDN0IsTUFBTSxZQUFZLGFBQUssT0FBTztBQUM5QixNQUFNQyxZQUFXLGFBQUssT0FBTztBQVE3QixNQUFNLGdCQUFOLGNBQTRCLFVBQVU7QUFBQSxJQUVsQyxtQkFBbUI7QUFBQSxJQUNuQixTQUFTO0FBQUEsSUFDVCxlQUFlO0FBQUEsSUFDZixlQUFlO0FBQUEsSUFDZixVQUFVO0FBQUEsSUFDVixVQUFVO0FBQUEsSUFDVixlQUFlO0FBQUEsSUFDZixlQUFlO0FBQUEsSUFDZixrQkFBa0I7QUFBQSxJQUNsQixVQUFVO0FBQUEsSUFDVixhQUFhO0FBQUEsSUFDYixVQUFVLENBQUMsR0FBRyxHQUFHLENBQUM7QUFBQSxJQUNsQixXQUFXO0FBQUEsSUFDWCxTQUFTO0FBQUEsSUFDVCx3QkFBd0I7QUFBQSxJQUN4QixlQUFlO0FBQUEsSUFDZixlQUFlO0FBQUEsSUFDZixnQkFBZ0I7QUFBQSxJQUNoQixjQUFjO0FBQUEsSUFDZCxPQUFPO0FBQ0gsV0FBSyxPQUFPLGlCQUFpQixLQUFLLE9BQU87QUFBQSxJQUM3QztBQUFBLElBQ0EsUUFBUTtBQUNKLFdBQUssY0FBYztBQUFBLElBQ3ZCO0FBQUEsSUFDQSxhQUFhO0FBQ1QsWUFBTUMsVUFBUyxLQUFLLE9BQU87QUFDM0IsVUFBSSxLQUFLLHFCQUFxQixHQUFHO0FBQzdCLFFBQUFBLFFBQU8saUJBQWlCLGVBQWVILGlCQUFnQixFQUFFLFNBQVMsTUFBTSxDQUFDO0FBQUEsTUFDN0U7QUFDQSxNQUFBRyxRQUFPLGlCQUFpQixhQUFhLEtBQUssWUFBWTtBQUN0RCxNQUFBQSxRQUFPLGlCQUFpQixTQUFTLEtBQUssZ0JBQWdCLEVBQUUsU0FBUyxNQUFNLENBQUM7QUFDeEUsTUFBQUEsUUFBTyxpQkFBaUIsY0FBYyxLQUFLLGVBQWUsRUFBRSxTQUFTLE1BQU0sQ0FBQztBQUM1RSxNQUFBQSxRQUFPLGlCQUFpQixhQUFhLEtBQUssY0FBYyxFQUFFLFNBQVMsTUFBTSxDQUFDO0FBQzFFLE1BQUFBLFFBQU8saUJBQWlCLFlBQVksS0FBSyxXQUFXO0FBQUEsSUFDeEQ7QUFBQSxJQUNBLGVBQWU7QUFDWCxZQUFNQSxVQUFTLEtBQUssT0FBTztBQUMzQixVQUFJLEtBQUsscUJBQXFCLEdBQUc7QUFDN0IsUUFBQUEsUUFBTyxvQkFBb0IsZUFBZUgsZUFBYztBQUFBLE1BQzVEO0FBQ0EsTUFBQUcsUUFBTyxvQkFBb0IsYUFBYSxLQUFLLFlBQVk7QUFDekQsTUFBQUEsUUFBTyxvQkFBb0IsYUFBYSxLQUFLLFlBQVk7QUFDekQsTUFBQUEsUUFBTyxvQkFBb0IsU0FBUyxLQUFLLGNBQWM7QUFDdkQsTUFBQUEsUUFBTyxvQkFBb0IsY0FBYyxLQUFLLGFBQWE7QUFDM0QsTUFBQUEsUUFBTyxvQkFBb0IsYUFBYSxLQUFLLFlBQVk7QUFDekQsTUFBQUEsUUFBTyxvQkFBb0IsWUFBWSxLQUFLLFdBQVc7QUFFdkQsV0FBSyxhQUFhO0FBQ2xCLFdBQUssd0JBQXdCO0FBQzdCLFdBQUssZUFBZTtBQUNwQixXQUFLLGVBQWU7QUFDcEIsV0FBSyxnQkFBZ0I7QUFDckIsV0FBSyxjQUFjO0FBQUEsSUFDdkI7QUFBQSxJQUNBLFNBQVM7QUFFTCxXQUFLLGlCQUFpQixLQUFLO0FBQzNCLFdBQUssZUFBZSxLQUFLO0FBRXpCLFVBQUksS0FBSyxJQUFJLEtBQUssYUFBYSxJQUFJO0FBQy9CLGFBQUssZ0JBQWdCO0FBQ3pCLFVBQUksS0FBSyxJQUFJLEtBQUssV0FBVyxJQUFJO0FBQzdCLGFBQUssY0FBYztBQUV2QixXQUFLLFlBQVksS0FBSztBQUN0QixXQUFLLFVBQVUsS0FBSztBQUVwQixXQUFLLFNBQVMsS0FBSyxJQUFJLEtBQUssY0FBYyxLQUFLLElBQUksS0FBSyxjQUFjLEtBQUssTUFBTSxDQUFDO0FBRWxGLFVBQUksS0FBSyxrQkFBa0IsS0FBSyxLQUFLLGdCQUFnQixHQUFHO0FBQ3BELGFBQUssY0FBYztBQUFBLE1BQ3ZCO0FBQUEsSUFDSjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFXQSxtQkFBbUIsVUFBVSxVQUFVO0FBR25DLFdBQUssT0FBTyxpQkFBaUIsUUFBUTtBQUNyQyxXQUFLLE9BQU8sT0FBTyxLQUFLLE9BQU87QUFDL0IsV0FBSyxPQUFPLGlCQUFpQixTQUFTO0FBQ3RDLFVBQUksYUFBSyxJQUFJLFVBQVUsU0FBUyxJQUFJLEdBQUc7QUFDbkMscUJBQUssTUFBTSxXQUFXLFdBQVcsRUFBRTtBQUFBLE1BQ3ZDO0FBQ0EsV0FBSyxPQUFPLGlCQUFpQixRQUFRO0FBRXJDLFlBQU0sb0JBQW9CLGFBQUssT0FBTztBQUN0QyxtQkFBSyxTQUFTLG1CQUFtQixVQUFVLEtBQUssT0FBTztBQUN2RCxtQkFBSyxVQUFVLG1CQUFtQixpQkFBaUI7QUFFbkQsWUFBTSx1QkFBdUIsYUFBSyxPQUFPO0FBQ3pDLG1CQUFLLE1BQU0sc0JBQXNCLG1CQUFtQixLQUFLLE1BQU07QUFDL0QsbUJBQUssSUFBSSxzQkFBc0Isc0JBQXNCLEtBQUssT0FBTztBQUNqRSxtQkFBSyxLQUFLLFVBQVUsb0JBQW9CO0FBQ3hDLG1CQUFLLEtBQUssVUFBVSxTQUFTO0FBQUEsSUFDakM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBS0EsWUFBWSxnQkFBZ0I7QUFDeEIsWUFBTSxnQkFBZ0IsS0FBSztBQUUzQixtQkFBSyxTQUFTRCxXQUFVLGdCQUFnQixhQUFhO0FBQ3JELG1CQUFLLFVBQVVBLFdBQVVBLFNBQVE7QUFFakMsWUFBTSxVQUFVLEtBQUssTUFBTUEsVUFBUyxDQUFDLEdBQUdBLFVBQVMsQ0FBQyxDQUFDO0FBRW5ELFlBQU0sUUFBUSxLQUFLLEtBQUtBLFVBQVMsQ0FBQyxDQUFDO0FBQ25DLFlBQU0sYUFBYSxRQUFRLE9BQU87QUFFbEMsWUFBTSxXQUFXLEtBQUssUUFBUSxLQUFLO0FBQ25DLFdBQUssV0FBVztBQUNoQixXQUFLLFNBQVM7QUFBQSxJQUNsQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFLQSxnQkFBZ0I7QUFDWixZQUFNLG1CQUFtQixRQUFRLEtBQUssUUFBUTtBQUM5QyxZQUFNLGlCQUFpQixRQUFRLEtBQUssTUFBTTtBQUMxQyxNQUFBRCxTQUFRLENBQUMsSUFBSSxLQUFLLFNBQVMsS0FBSyxJQUFJLGdCQUFnQixJQUFJLEtBQUssSUFBSSxjQUFjO0FBQy9FLE1BQUFBLFNBQVEsQ0FBQyxJQUFJLEtBQUssU0FBUyxLQUFLLElBQUksY0FBYztBQUNsRCxNQUFBQSxTQUFRLENBQUMsSUFBSSxLQUFLLFNBQVMsS0FBSyxJQUFJLGdCQUFnQixJQUFJLEtBQUssSUFBSSxjQUFjO0FBQy9FLFdBQUssT0FBTyxpQkFBaUJBLFFBQU87QUFDcEMsV0FBSyxPQUFPLGVBQWUsS0FBSyxPQUFPO0FBQ3ZDLFdBQUssT0FBTyxPQUFPLEtBQUssT0FBTztBQUFBLElBQ25DO0FBQUE7QUFBQSxJQUVBLGVBQWUsQ0FBQyxNQUFNO0FBQ2xCLGFBQU8saUJBQWlCLFdBQVcsS0FBSyxVQUFVO0FBQ2xELGFBQU8saUJBQWlCLGFBQWEsS0FBSyxZQUFZO0FBQ3RELFVBQUksRUFBRSxXQUFXLEtBQUssa0JBQWtCO0FBQ3BDLGFBQUssYUFBYTtBQUNsQixpQkFBUyxLQUFLLE1BQU0sU0FBUztBQUM3QixZQUFJLEVBQUUsV0FBVyxHQUFHO0FBQ2hCLFlBQUUsZUFBZTtBQUNqQixpQkFBTztBQUFBLFFBQ1g7QUFBQSxNQUNKO0FBQUEsSUFDSjtBQUFBLElBQ0EsYUFBYSxDQUFDLE1BQU07QUFDaEIsYUFBTyxvQkFBb0IsV0FBVyxLQUFLLFVBQVU7QUFDckQsYUFBTyxvQkFBb0IsYUFBYSxLQUFLLFlBQVk7QUFDekQsVUFBSSxFQUFFLFdBQVcsS0FBSyxrQkFBa0I7QUFDcEMsYUFBSyxhQUFhO0FBQ2xCLGlCQUFTLEtBQUssTUFBTSxTQUFTO0FBQUEsTUFDakM7QUFBQSxJQUNKO0FBQUEsSUFDQSxlQUFlLENBQUMsTUFBTTtBQUNsQixVQUFJLEtBQUssVUFBVSxLQUFLLFlBQVk7QUFDaEMsWUFBSSxLQUFLLFVBQVUsS0FBSyxZQUFZO0FBQ2hDLGVBQUssZ0JBQWdCLEVBQUUsRUFBRSxZQUFZLEtBQUs7QUFDMUMsZUFBSyxjQUFjLEVBQUUsWUFBWSxLQUFLO0FBQUEsUUFDMUM7QUFBQSxNQUNKO0FBQUEsSUFDSjtBQUFBLElBQ0EsaUJBQWlCLENBQUMsTUFBTTtBQUNwQixRQUFFLGVBQWU7QUFDakIsV0FBSyxVQUFVLElBQUksRUFBRSxTQUFTLEtBQUssa0JBQWtCO0FBQ3JELFdBQUssU0FBUyxLQUFLLElBQUksS0FBSyxTQUFTLEtBQUssSUFBSSxLQUFLLFNBQVMsS0FBSyxNQUFNLENBQUM7QUFDeEUsV0FBSyxjQUFjO0FBQUEsSUFDdkI7QUFBQTtBQUFBLElBRUEsZ0JBQWdCLENBQUMsTUFBTTtBQUNuQixVQUFJLEVBQUUsUUFBUSxXQUFXLEdBQUc7QUFFeEIsVUFBRSxlQUFlO0FBQ2pCLGFBQUssZUFBZSxFQUFFLFFBQVEsQ0FBQyxFQUFFO0FBQ2pDLGFBQUssZUFBZSxFQUFFLFFBQVEsQ0FBQyxFQUFFO0FBQ2pDLGFBQUssYUFBYTtBQUFBLE1BQ3RCLFdBQ1MsRUFBRSxRQUFRLFdBQVcsR0FBRztBQUU3QixhQUFLLHdCQUF3QixLQUFLLDJCQUEyQixFQUFFLE9BQU87QUFDdEUsVUFBRSxlQUFlO0FBQUEsTUFDckI7QUFBQSxJQUNKO0FBQUEsSUFDQSxlQUFlLENBQUMsTUFBTTtBQUNsQixVQUFJLENBQUMsS0FBSyxVQUFVLENBQUMsS0FBSyxZQUFZO0FBQ2xDO0FBQUEsTUFDSjtBQUNBLFFBQUUsZUFBZTtBQUNqQixVQUFJLEVBQUUsUUFBUSxXQUFXLEdBQUc7QUFDeEIsY0FBTSxTQUFTLEVBQUUsUUFBUSxDQUFDLEVBQUUsVUFBVSxLQUFLO0FBQzNDLGNBQU0sU0FBUyxFQUFFLFFBQVEsQ0FBQyxFQUFFLFVBQVUsS0FBSztBQUMzQyxhQUFLLGdCQUFnQixFQUFFLFNBQVMsS0FBSztBQUNyQyxhQUFLLGNBQWMsU0FBUyxLQUFLO0FBQ2pDLGFBQUssZUFBZSxFQUFFLFFBQVEsQ0FBQyxFQUFFO0FBQ2pDLGFBQUssZUFBZSxFQUFFLFFBQVEsQ0FBQyxFQUFFO0FBQUEsTUFDckMsV0FDUyxFQUFFLFFBQVEsV0FBVyxHQUFHO0FBRTdCLGNBQU0sdUJBQXVCLEtBQUssMkJBQTJCLEVBQUUsT0FBTztBQUN0RSxjQUFNLGFBQWEsS0FBSyx3QkFBd0I7QUFDaEQsYUFBSyxVQUFVO0FBQ2YsYUFBSyxTQUFTLEtBQUssSUFBSSxLQUFLLFNBQVMsS0FBSyxJQUFJLEtBQUssU0FBUyxLQUFLLE1BQU0sQ0FBQztBQUN4RSxhQUFLLGNBQWM7QUFFbkIsYUFBSyx3QkFBd0I7QUFBQSxNQUNqQztBQUFBLElBQ0o7QUFBQSxJQUNBLGNBQWMsQ0FBQyxNQUFNO0FBQ2pCLFVBQUksRUFBRSxRQUFRLFNBQVMsR0FBRztBQUN0QixhQUFLLGFBQWE7QUFBQSxNQUN0QjtBQUNBLFVBQUksRUFBRSxRQUFRLFdBQVcsR0FBRztBQUV4QixhQUFLLGVBQWUsRUFBRSxRQUFRLENBQUMsRUFBRTtBQUNqQyxhQUFLLGVBQWUsRUFBRSxRQUFRLENBQUMsRUFBRTtBQUFBLE1BQ3JDO0FBQUEsSUFDSjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQU1BLDJCQUEyQixTQUFTO0FBQ2hDLFlBQU0sS0FBSyxRQUFRLENBQUMsRUFBRSxVQUFVLFFBQVEsQ0FBQyxFQUFFO0FBQzNDLFlBQU0sS0FBSyxRQUFRLENBQUMsRUFBRSxVQUFVLFFBQVEsQ0FBQyxFQUFFO0FBQzNDLGFBQU8sS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEVBQUU7QUFBQSxJQUN0QztBQUFBLEVBQ0o7QUF6T0ksZ0JBREUsZUFDSyxZQUFXO0FBME90QixFQUFBRixhQUFXO0FBQUEsSUFDUCxTQUFTLElBQUk7QUFBQSxFQUNqQixHQUFHLGNBQWMsV0FBVyxvQkFBb0IsTUFBTTtBQUN0RCxFQUFBQSxhQUFXO0FBQUEsSUFDUCxTQUFTLE1BQU0sQ0FBQztBQUFBLEVBQ3BCLEdBQUcsY0FBYyxXQUFXLFVBQVUsTUFBTTtBQUM1QyxFQUFBQSxhQUFXO0FBQUEsSUFDUCxTQUFTLE1BQU07QUFBQSxFQUNuQixHQUFHLGNBQWMsV0FBVyxnQkFBZ0IsTUFBTTtBQUNsRCxFQUFBQSxhQUFXO0FBQUEsSUFDUCxTQUFTLE1BQU0sS0FBSztBQUFBLEVBQ3hCLEdBQUcsY0FBYyxXQUFXLGdCQUFnQixNQUFNO0FBQ2xELEVBQUFBLGFBQVc7QUFBQSxJQUNQLFNBQVMsTUFBTTtBQUFBLEVBQ25CLEdBQUcsY0FBYyxXQUFXLFdBQVcsTUFBTTtBQUM3QyxFQUFBQSxhQUFXO0FBQUEsSUFDUCxTQUFTLE1BQU0sRUFBSTtBQUFBLEVBQ3ZCLEdBQUcsY0FBYyxXQUFXLFdBQVcsTUFBTTtBQUM3QyxFQUFBQSxhQUFXO0FBQUEsSUFDUCxTQUFTLE1BQU0sR0FBRztBQUFBLEVBQ3RCLEdBQUcsY0FBYyxXQUFXLGdCQUFnQixNQUFNO0FBQ2xELEVBQUFBLGFBQVc7QUFBQSxJQUNQLFNBQVMsTUFBTSxHQUFHO0FBQUEsRUFDdEIsR0FBRyxjQUFjLFdBQVcsZ0JBQWdCLE1BQU07QUFDbEQsRUFBQUEsYUFBVztBQUFBLElBQ1AsU0FBUyxNQUFNLElBQUk7QUFBQSxFQUN2QixHQUFHLGNBQWMsV0FBVyxtQkFBbUIsTUFBTTtBQUNyRCxFQUFBQSxhQUFXO0FBQUEsSUFDUCxTQUFTLE1BQU0sR0FBRztBQUFBLEVBQ3RCLEdBQUcsY0FBYyxXQUFXLFdBQVcsTUFBTTs7O0FDaFM3QztBQUFBO0FBQUE7QUFBQTtBQUFBOzs7QUNBQTtBQUFBO0FBQUE7QUFBQTtBQUNBLHdCQUF1QjtBQUVoQixNQUFNLGlCQUFOLGNBQTZCLFVBQVU7QUFBQSxJQVc1QyxPQUFPO0FBQ0wsV0FBSyxTQUFTLElBQUksdUJBQU8scUJBQXFCO0FBQzlDLGVBQVMsU0FBUyxLQUFLO0FBR3ZCLFdBQUssV0FBVyxpQkFBaUIsU0FBUyxLQUFLLFlBQVksS0FBSyxJQUFJLENBQUM7QUFDckUsV0FBSyxXQUFXLGlCQUFpQixTQUFTLEtBQUssWUFBWSxLQUFLLElBQUksQ0FBQztBQUNyRSxXQUFLLFlBQVksaUJBQWlCLFNBQVMsS0FBSyxhQUFhLEtBQUssSUFBSSxDQUFDO0FBQUEsSUFDekU7QUFBQSxJQUVBLGNBQWM7QUFDWixXQUFLLE9BQU8sT0FBTyxTQUFTLEVBQUU7QUFBQSxRQUM1QixTQUFVLE1BQU07QUFDZCxlQUFLLFVBQVUsSUFBSTtBQUNuQixrQkFBUSxJQUFJLEtBQUssV0FBVyxXQUFXLEtBQUssSUFBSTtBQUFBLFFBQ2xELEVBQUUsS0FBSyxJQUFJO0FBQUEsTUFDYixFQUFFLE1BQU0sU0FBVSxHQUFHO0FBQ25CLGdCQUFRLElBQUksZ0JBQWdCLENBQUM7QUFBQSxNQUMvQixDQUFDO0FBQUEsSUFDSDtBQUFBLElBRUEsY0FBYztBQUNaLFdBQUssT0FBTyxLQUFLLFNBQVMsRUFBRTtBQUFBLFFBQzFCLFNBQVUsTUFBTTtBQUNkLGVBQUssVUFBVSxJQUFJO0FBQ25CLGtCQUFRLElBQUksS0FBSyxXQUFXLFVBQVUsS0FBSyxJQUFJO0FBQUEsUUFDakQsRUFBRSxLQUFLLElBQUk7QUFBQSxNQUNiLEVBQUUsTUFBTSxTQUFVLEdBQUc7QUFDbkIsZ0JBQVEsSUFBSSxjQUFjLENBQUM7QUFBQSxNQUM3QixDQUFDO0FBQUEsSUFDSDtBQUFBLElBRUEsZUFBZTtBQUNiLFVBQUksS0FBSyxNQUFNO0FBQ2IsYUFBSyxLQUFLLE1BQU0sRUFBRTtBQUFBLFVBQ2hCLFdBQVk7QUFDVixvQkFBUSxJQUFJLGlCQUFpQixLQUFLLEtBQUssSUFBSTtBQUMzQyxpQkFBSyxPQUFPO0FBQUEsVUFDZCxFQUFFLEtBQUssSUFBSTtBQUFBLFFBQ2IsRUFBRSxNQUFNLFNBQVUsR0FBRztBQUNuQixrQkFBUSxJQUFJLGVBQWUsQ0FBQztBQUFBLFFBQzlCLENBQUM7QUFBQSxNQUNILE9BQU87QUFDTCxnQkFBUSxJQUFJLGtCQUFrQjtBQUFBLE1BQ2hDO0FBQUEsSUFDRjtBQUFBLElBRUEsVUFBVSxNQUFNO0FBQ2QsV0FBSyxPQUFPO0FBQ1osV0FBSyxZQUFZLENBQUM7QUFDbEIsV0FBSyxhQUFhLENBQUM7QUFDbkIsV0FBSyxlQUFlLENBQUM7QUFDckIsV0FBSyxNQUFNLElBQUksU0FBUyxNQUFNO0FBQzVCLGFBQUssSUFBSSxvQkFBb0IsQ0FBQyxLQUFLLEtBQUssTUFBTSxJQUFJLEdBQUcsS0FBSyxLQUFLLE1BQU0sSUFBSSxHQUFHLEtBQUssS0FBSyxNQUFNLElBQUksQ0FBQyxDQUFDO0FBQUEsTUFDcEcsQ0FBQztBQUVELFdBQUssTUFBTSxLQUFLLFNBQVMsTUFBTTtBQUM3QixhQUFLLEtBQUssb0JBQW9CLENBQUMsS0FBSyxLQUFLLE1BQU0sS0FBSyxHQUFHLEtBQUssS0FBSyxNQUFNLEtBQUssR0FBRyxLQUFLLEtBQUssTUFBTSxLQUFLLENBQUMsQ0FBQztBQUFBLE1BQ3hHLENBQUM7QUFFRCxXQUFLLE1BQU0sT0FBTyxTQUFTLE1BQU07QUFDL0IsYUFBSyxPQUFPLG9CQUFvQixDQUFDLEtBQUssS0FBSyxNQUFNLE9BQU8sR0FBRyxLQUFLLEtBQUssTUFBTSxPQUFPLEdBQUcsS0FBSyxLQUFLLE1BQU0sT0FBTyxDQUFDLENBQUM7QUFBQSxNQUNoSCxDQUFDO0FBQUEsSUFDSDtBQUFBLEVBQ0Y7QUExRUUsZ0JBRFcsZ0JBQ0osWUFBVztBQUNsQixnQkFGVyxnQkFFSixjQUFhO0FBQUEsSUFDbEIsUUFBUSxFQUFFLE1BQU0sS0FBSyxPQUFPO0FBQUEsSUFDNUIsS0FBSyxFQUFFLE1BQU0sS0FBSyxPQUFPO0FBQUEsSUFDekIsTUFBTSxFQUFFLE1BQU0sS0FBSyxPQUFPO0FBQUEsSUFDMUIsWUFBWSxFQUFFLE1BQU0sS0FBSyxPQUFPO0FBQUEsSUFDaEMsWUFBWSxFQUFFLE1BQU0sS0FBSyxPQUFPO0FBQUEsSUFDaEMsYUFBYSxFQUFFLE1BQU0sS0FBSyxPQUFPO0FBQUEsRUFDbkM7OztBRFJLLFdBQVMsZUFBZSxRQUFRLFVBQVUsVUFBVTtBQUN6RCxVQUFNLFFBQVEsT0FBTyxhQUFhLGNBQWM7QUFDaEQsUUFBSSxTQUFTLE1BQU0sZUFBZTtBQUNoQyxZQUFNLFVBQVUsTUFBTSxjQUFjO0FBQ3BDLFVBQUksV0FBVyxRQUFRO0FBQWlCLGdCQUFRLGdCQUFnQixDQUFDLEVBQUUsTUFBTSxVQUFVLFFBQVE7QUFBQSxJQUM3RjtBQUFBLEVBQ0Y7QUFFTyxNQUFNLGtCQUFOLGNBQThCLFVBQVU7QUFBQSxJQU83QyxPQUFPLFdBQVcsUUFBUTtBQUN4QixhQUFPLGtCQUFrQixpQkFBaUI7QUFDMUMsYUFBTyxrQkFBa0IsWUFBWTtBQUFBLElBQ3ZDO0FBQUEsSUFFQSxZQUFZLElBQUksYUFBYSxDQUFDO0FBQUEsSUFFOUIsUUFBUTtBQUNOLFdBQUssT0FBTyxLQUFLLGlCQUFpQixhQUFhLGFBQWE7QUFDNUQsV0FBSyxrQkFBa0IsS0FBSyxLQUFLO0FBQ2pDLFdBQUssaUJBQWlCLG9CQUFvQixLQUFLLFNBQVM7QUFFeEQsV0FBSyxTQUFTLEtBQUssT0FBTyxhQUFhLFlBQVksS0FBSyxLQUFLLE9BQU8sYUFBYSxZQUFZO0FBRTdGLFdBQUssYUFBYSxLQUFLLE9BQU8sYUFBYSxtQkFBbUI7QUFBQSxRQUM1RCxLQUFLO0FBQUEsUUFDTCxTQUFTO0FBQUEsTUFDWCxDQUFDO0FBQ0QsV0FBSyxlQUFlLEtBQUssT0FBTyxhQUFhLG1CQUFtQjtBQUFBLFFBQzlELEtBQUs7QUFBQSxRQUNMLFNBQVM7QUFBQSxNQUNYLENBQUM7QUFBQSxJQUNIO0FBQUEsSUFFQSxhQUFhO0FBQ1gsV0FBSyxPQUFPLFFBQVEsSUFBSSxLQUFLLE9BQU87QUFDcEMsV0FBSyxPQUFPLFVBQVUsSUFBSSxLQUFLLFNBQVM7QUFDeEMsV0FBSyxPQUFPLE9BQU8sSUFBSSxLQUFLLE1BQU07QUFDbEMsV0FBSyxPQUFPLEtBQUssSUFBSSxLQUFLLElBQUk7QUFBQSxJQUNoQztBQUFBLElBRUEsZUFBZTtBQUNiLFdBQUssT0FBTyxRQUFRLE9BQU8sS0FBSyxPQUFPO0FBQ3ZDLFdBQUssT0FBTyxVQUFVLE9BQU8sS0FBSyxTQUFTO0FBQzNDLFdBQUssT0FBTyxPQUFPLE9BQU8sS0FBSyxNQUFNO0FBQ3JDLFdBQUssT0FBTyxLQUFLLE9BQU8sS0FBSyxJQUFJO0FBQUEsSUFDbkM7QUFBQSxJQUVBLFVBQVUsQ0FBQyxHQUFHLFdBQVc7QUFDdkIsV0FBSyxLQUFLLFdBQVcsS0FBSztBQUMxQixVQUFJLE9BQU8sU0FBUyxpQkFBaUI7QUFDbkMsYUFBSyxPQUFPLEdBQUcsTUFBTTtBQUFBLE1BQ3ZCO0FBRUEscUJBQWUsT0FBTyxRQUFRLEtBQUssRUFBRTtBQUFBLElBQ3ZDO0FBQUEsSUFFQSxTQUFTLENBQUMsR0FBRyxXQUFXO0FBQ3RCLGNBQVEsSUFBSSxnQkFBZ0I7QUFDNUIsV0FBSyxXQUFXLEtBQUs7QUFDckIsV0FBSyxpQkFBaUIsVUFBVSxDQUFDLEdBQUssTUFBTSxDQUFHLENBQUM7QUFDaEQscUJBQWUsT0FBTyxRQUFRLEdBQUssRUFBRTtBQUdyQyxVQUFJLGlCQUFpQixLQUFLLE9BQU8sYUFBYSxjQUFjO0FBQzVELFVBQUksQ0FBQyxnQkFBZ0I7QUFDbkIseUJBQWlCLEtBQUssT0FBTyxPQUFPLGFBQWEsY0FBYztBQUFBLE1BQ2pFO0FBQ0EsVUFBSSxnQkFBZ0I7QUFDbEIsdUJBQWUsWUFBWTtBQUFBLE1BQzdCLE9BQU87QUFDTCxnQkFBUSxNQUFNLHFDQUFxQztBQUFBLE1BQ3JEO0FBQUEsSUFDRjtBQUFBLElBRUEsT0FBTyxDQUFDLEdBQUcsV0FBVztBQUNwQixXQUFLLGFBQWEsS0FBSztBQUN2QixXQUFLLGlCQUFpQixvQkFBb0IsS0FBSyxTQUFTO0FBQ3hELHFCQUFlLE9BQU8sUUFBUSxLQUFLLEVBQUU7QUFBQSxJQUN2QztBQUFBLElBRUEsWUFBWSxDQUFDLEdBQUcsV0FBVztBQUN6QixXQUFLLEtBQUssV0FBVyxLQUFLO0FBQzFCLFVBQUksT0FBTyxTQUFTLGlCQUFpQjtBQUNuQyxhQUFLLEtBQUssR0FBRyxNQUFNO0FBQUEsTUFDckI7QUFFQSxxQkFBZSxPQUFPLFFBQVEsS0FBSyxFQUFFO0FBQUEsSUFDdkM7QUFBQSxFQUNGO0FBckZFLGdCQURXLGlCQUNKLFlBQVc7QUFDbEIsZ0JBRlcsaUJBRUosY0FBYTtBQUFBLElBQ2xCLGtCQUFrQixTQUFTLE9BQU87QUFBQSxJQUNsQyxlQUFlLFNBQVMsU0FBUztBQUFBLEVBQ25DOzs7QUVqQkY7QUFBQTtBQUFBLDJCQUFBSztBQUFBLElBQUEsc0JBQUFDO0FBQUE7QUFJTyxXQUFTQyxnQkFBZSxRQUFRLFVBQVUsVUFBVTtBQUN6RCxVQUFNLFFBQVEsT0FBTyxhQUFhLGNBQWM7QUFDaEQsUUFBSSxTQUFTLE1BQU0sZUFBZTtBQUNoQyxZQUFNLFVBQVUsTUFBTSxjQUFjO0FBQ3BDLFVBQUksV0FBVyxRQUFRO0FBQWlCLGdCQUFRLGdCQUFnQixDQUFDLEVBQUUsTUFBTSxVQUFVLFFBQVE7QUFBQSxJQUM3RjtBQUFBLEVBQ0Y7QUFFTyxNQUFNQyxtQkFBTixjQUE4QixVQUFVO0FBQUEsSUFPN0MsT0FBTyxXQUFXLFFBQVE7QUFDeEIsYUFBTyxrQkFBa0IsaUJBQWlCO0FBQzFDLGFBQU8sa0JBQWtCLFlBQVk7QUFBQSxJQUN2QztBQUFBLElBRUEsWUFBWSxJQUFJLGFBQWEsQ0FBQztBQUFBLElBRTlCLFFBQVE7QUFDTixXQUFLLE9BQU8sS0FBSyxpQkFBaUIsYUFBYSxhQUFhO0FBQzVELFdBQUssa0JBQWtCLEtBQUssS0FBSztBQUNqQyxXQUFLLGlCQUFpQixvQkFBb0IsS0FBSyxTQUFTO0FBRXhELFdBQUssU0FBUyxLQUFLLE9BQU8sYUFBYSxZQUFZLEtBQUssS0FBSyxPQUFPLGFBQWEsWUFBWTtBQUU3RixXQUFLLGFBQWEsS0FBSyxPQUFPLGFBQWEsbUJBQW1CO0FBQUEsUUFDNUQsS0FBSztBQUFBLFFBQ0wsU0FBUztBQUFBLE1BQ1gsQ0FBQztBQUNELFdBQUssZUFBZSxLQUFLLE9BQU8sYUFBYSxtQkFBbUI7QUFBQSxRQUM5RCxLQUFLO0FBQUEsUUFDTCxTQUFTO0FBQUEsTUFDWCxDQUFDO0FBQUEsSUFDSDtBQUFBLElBRUEsYUFBYTtBQUNYLFdBQUssT0FBTyxRQUFRLElBQUksS0FBSyxPQUFPO0FBQ3BDLFdBQUssT0FBTyxVQUFVLElBQUksS0FBSyxTQUFTO0FBQ3hDLFdBQUssT0FBTyxPQUFPLElBQUksS0FBSyxNQUFNO0FBQ2xDLFdBQUssT0FBTyxLQUFLLElBQUksS0FBSyxJQUFJO0FBQUEsSUFDaEM7QUFBQSxJQUVBLGVBQWU7QUFDYixXQUFLLE9BQU8sUUFBUSxPQUFPLEtBQUssT0FBTztBQUN2QyxXQUFLLE9BQU8sVUFBVSxPQUFPLEtBQUssU0FBUztBQUMzQyxXQUFLLE9BQU8sT0FBTyxPQUFPLEtBQUssTUFBTTtBQUNyQyxXQUFLLE9BQU8sS0FBSyxPQUFPLEtBQUssSUFBSTtBQUFBLElBQ25DO0FBQUEsSUFFQSxVQUFVLENBQUMsR0FBRyxXQUFXO0FBQ3ZCLFdBQUssS0FBSyxXQUFXLEtBQUs7QUFDMUIsVUFBSSxPQUFPLFNBQVMsaUJBQWlCO0FBQ25DLGFBQUssT0FBTyxHQUFHLE1BQU07QUFBQSxNQUN2QjtBQUVBLE1BQUFELGdCQUFlLE9BQU8sUUFBUSxLQUFLLEVBQUU7QUFBQSxJQUN2QztBQUFBLElBRUEsU0FBUyxDQUFDLEdBQUcsV0FBVztBQUN0QixjQUFRLElBQUksZ0JBQWdCO0FBQzVCLFdBQUssV0FBVyxLQUFLO0FBQ3JCLFdBQUssaUJBQWlCLFVBQVUsQ0FBQyxHQUFLLE1BQU0sQ0FBRyxDQUFDO0FBQ2hELE1BQUFBLGdCQUFlLE9BQU8sUUFBUSxHQUFLLEVBQUU7QUFHckMsVUFBSSxpQkFBaUIsS0FBSyxPQUFPLGFBQWEsY0FBYztBQUM1RCxVQUFJLENBQUMsZ0JBQWdCO0FBQ25CLHlCQUFpQixLQUFLLE9BQU8sT0FBTyxhQUFhLGNBQWM7QUFBQSxNQUNqRTtBQUNBLFVBQUksZ0JBQWdCO0FBQ2xCLHVCQUFlLFlBQVk7QUFBQSxNQUM3QixPQUFPO0FBQ0wsZ0JBQVEsTUFBTSxxQ0FBcUM7QUFBQSxNQUNyRDtBQUFBLElBQ0Y7QUFBQSxJQUVBLE9BQU8sQ0FBQyxHQUFHLFdBQVc7QUFDcEIsV0FBSyxhQUFhLEtBQUs7QUFDdkIsV0FBSyxpQkFBaUIsb0JBQW9CLEtBQUssU0FBUztBQUN4RCxNQUFBQSxnQkFBZSxPQUFPLFFBQVEsS0FBSyxFQUFFO0FBQUEsSUFDdkM7QUFBQSxJQUVBLFlBQVksQ0FBQyxHQUFHLFdBQVc7QUFDekIsV0FBSyxLQUFLLFdBQVcsS0FBSztBQUMxQixVQUFJLE9BQU8sU0FBUyxpQkFBaUI7QUFDbkMsYUFBSyxLQUFLLEdBQUcsTUFBTTtBQUFBLE1BQ3JCO0FBRUEsTUFBQUEsZ0JBQWUsT0FBTyxRQUFRLEtBQUssRUFBRTtBQUFBLElBQ3ZDO0FBQUEsRUFDRjtBQXJGRSxnQkFEV0Msa0JBQ0osWUFBVztBQUNsQixnQkFGV0Esa0JBRUosY0FBYTtBQUFBLElBQ2xCLGtCQUFrQixTQUFTLE9BQU87QUFBQSxJQUNsQyxlQUFlLFNBQVMsU0FBUztBQUFBLEVBQ25DOzs7QUNqQkY7QUFBQTtBQUFBLDJCQUFBQztBQUFBLElBQUEsc0JBQUFDO0FBQUE7QUFJTyxXQUFTQyxnQkFBZSxRQUFRLFVBQVUsVUFBVTtBQUN6RCxVQUFNLFFBQVEsT0FBTyxhQUFhLGNBQWM7QUFDaEQsUUFBSSxTQUFTLE1BQU0sZUFBZTtBQUNoQyxZQUFNLFVBQVUsTUFBTSxjQUFjO0FBQ3BDLFVBQUksV0FBVyxRQUFRO0FBQWlCLGdCQUFRLGdCQUFnQixDQUFDLEVBQUUsTUFBTSxVQUFVLFFBQVE7QUFBQSxJQUM3RjtBQUFBLEVBQ0Y7QUFFTyxNQUFNQyxtQkFBTixjQUE4QixVQUFVO0FBQUEsSUFPN0MsT0FBTyxXQUFXLFFBQVE7QUFDeEIsYUFBTyxrQkFBa0IsaUJBQWlCO0FBQzFDLGFBQU8sa0JBQWtCLFlBQVk7QUFBQSxJQUN2QztBQUFBLElBRUEsWUFBWSxJQUFJLGFBQWEsQ0FBQztBQUFBLElBRTlCLFFBQVE7QUFDTixXQUFLLE9BQU8sS0FBSyxpQkFBaUIsYUFBYSxhQUFhO0FBQzVELFdBQUssa0JBQWtCLEtBQUssS0FBSztBQUNqQyxXQUFLLGlCQUFpQixvQkFBb0IsS0FBSyxTQUFTO0FBRXhELFdBQUssU0FBUyxLQUFLLE9BQU8sYUFBYSxZQUFZLEtBQUssS0FBSyxPQUFPLGFBQWEsWUFBWTtBQUU3RixXQUFLLGFBQWEsS0FBSyxPQUFPLGFBQWEsbUJBQW1CO0FBQUEsUUFDNUQsS0FBSztBQUFBLFFBQ0wsU0FBUztBQUFBLE1BQ1gsQ0FBQztBQUNELFdBQUssZUFBZSxLQUFLLE9BQU8sYUFBYSxtQkFBbUI7QUFBQSxRQUM5RCxLQUFLO0FBQUEsUUFDTCxTQUFTO0FBQUEsTUFDWCxDQUFDO0FBQUEsSUFDSDtBQUFBLElBRUEsYUFBYTtBQUNYLFdBQUssT0FBTyxRQUFRLElBQUksS0FBSyxPQUFPO0FBQ3BDLFdBQUssT0FBTyxVQUFVLElBQUksS0FBSyxTQUFTO0FBQ3hDLFdBQUssT0FBTyxPQUFPLElBQUksS0FBSyxNQUFNO0FBQ2xDLFdBQUssT0FBTyxLQUFLLElBQUksS0FBSyxJQUFJO0FBQUEsSUFDaEM7QUFBQSxJQUVBLGVBQWU7QUFDYixXQUFLLE9BQU8sUUFBUSxPQUFPLEtBQUssT0FBTztBQUN2QyxXQUFLLE9BQU8sVUFBVSxPQUFPLEtBQUssU0FBUztBQUMzQyxXQUFLLE9BQU8sT0FBTyxPQUFPLEtBQUssTUFBTTtBQUNyQyxXQUFLLE9BQU8sS0FBSyxPQUFPLEtBQUssSUFBSTtBQUFBLElBQ25DO0FBQUEsSUFFQSxVQUFVLENBQUMsR0FBRyxXQUFXO0FBQ3ZCLFdBQUssS0FBSyxXQUFXLEtBQUs7QUFDMUIsVUFBSSxPQUFPLFNBQVMsaUJBQWlCO0FBQ25DLGFBQUssT0FBTyxHQUFHLE1BQU07QUFBQSxNQUN2QjtBQUVBLE1BQUFELGdCQUFlLE9BQU8sUUFBUSxLQUFLLEVBQUU7QUFBQSxJQUN2QztBQUFBLElBRUEsU0FBUyxDQUFDLEdBQUcsV0FBVztBQUN0QixjQUFRLElBQUksZ0JBQWdCO0FBQzVCLFdBQUssV0FBVyxLQUFLO0FBQ3JCLFdBQUssaUJBQWlCLFVBQVUsQ0FBQyxHQUFLLE1BQU0sQ0FBRyxDQUFDO0FBQ2hELE1BQUFBLGdCQUFlLE9BQU8sUUFBUSxHQUFLLEVBQUU7QUFHckMsVUFBSSxpQkFBaUIsS0FBSyxPQUFPLGFBQWEsY0FBYztBQUM1RCxVQUFJLENBQUMsZ0JBQWdCO0FBQ25CLHlCQUFpQixLQUFLLE9BQU8sT0FBTyxhQUFhLGNBQWM7QUFBQSxNQUNqRTtBQUNBLFVBQUksZ0JBQWdCO0FBQ2xCLHVCQUFlLGFBQWE7QUFBQSxNQUM5QixPQUFPO0FBQ0wsZ0JBQVEsTUFBTSxxQ0FBcUM7QUFBQSxNQUNyRDtBQUFBLElBQ0Y7QUFBQSxJQUVBLE9BQU8sQ0FBQyxHQUFHLFdBQVc7QUFDcEIsV0FBSyxhQUFhLEtBQUs7QUFDdkIsV0FBSyxpQkFBaUIsb0JBQW9CLEtBQUssU0FBUztBQUN4RCxNQUFBQSxnQkFBZSxPQUFPLFFBQVEsS0FBSyxFQUFFO0FBQUEsSUFDdkM7QUFBQSxJQUVBLFlBQVksQ0FBQyxHQUFHLFdBQVc7QUFDekIsV0FBSyxLQUFLLFdBQVcsS0FBSztBQUMxQixVQUFJLE9BQU8sU0FBUyxpQkFBaUI7QUFDbkMsYUFBSyxLQUFLLEdBQUcsTUFBTTtBQUFBLE1BQ3JCO0FBRUEsTUFBQUEsZ0JBQWUsT0FBTyxRQUFRLEtBQUssRUFBRTtBQUFBLElBQ3ZDO0FBQUEsRUFDRjtBQXJGRSxnQkFEV0Msa0JBQ0osWUFBVztBQUNsQixnQkFGV0Esa0JBRUosY0FBYTtBQUFBLElBQ2xCLGtCQUFrQixTQUFTLE9BQU87QUFBQSxJQUNsQyxlQUFlLFNBQVMsU0FBUztBQUFBLEVBQ25DOzs7QUNqQkY7QUFBQTtBQUFBO0FBQUE7QUFFTyxNQUFNLG9CQUFOLGNBQWdDLFVBQVU7QUFBQSxJQVU3QyxRQUFRO0FBQ0osZUFBUyxpQkFBaUIsWUFBWSxLQUFLLFdBQVcsS0FBSyxJQUFJLENBQUM7QUFDaEUsV0FBSyxnQkFBZ0I7QUFDckIsV0FBSyxvQkFBb0IsS0FBSyxlQUFlLGFBQWEsbUJBQW1CLENBQUM7QUFDOUUsV0FBSyxlQUFlLENBQUMsR0FBRyxHQUFHLENBQUM7QUFFNUIsV0FBSyxLQUFLO0FBQ1YsV0FBSyxRQUFRO0FBQ2IsV0FBSyxPQUFPO0FBQ1osV0FBSyxPQUFPO0FBRVosYUFBTyxpQkFBaUIsV0FBVyxLQUFLLE1BQU0sS0FBSyxJQUFJLENBQUM7QUFDeEQsYUFBTyxpQkFBaUIsU0FBUyxLQUFLLFFBQVEsS0FBSyxJQUFJLENBQUM7QUFBQSxJQUM1RDtBQUFBLElBRUEsV0FBVyxHQUFHO0FBQ1YsWUFBTSxjQUFjLEtBQUssTUFBTSxLQUFLLElBQUksYUFBYSxpQkFBaUIsQ0FBQyxJQUFJO0FBQzNFLFlBQU0sZUFBZSxLQUFLLE9BQU8sS0FBSyxLQUFLLGFBQWEsaUJBQWlCLENBQUMsSUFBSTtBQUM5RSxZQUFNLGlCQUFpQixLQUFLLFNBQVMsS0FBSyxPQUFPLGFBQWEsaUJBQWlCLENBQUMsSUFBSTtBQUVwRixjQUFRLEVBQUUsTUFBTTtBQUFBLFFBQ1osS0FBSztBQUNELGNBQUk7QUFBYSx3QkFBWSxTQUFTO0FBQ3RDLGNBQUk7QUFBYyx5QkFBYSxTQUFTO0FBQ3hDLGNBQUk7QUFBZ0IsMkJBQWUsU0FBUztBQUM1QyxlQUFLLGdCQUFnQjtBQUNyQjtBQUFBLFFBQ0osS0FBSztBQUNELGNBQUk7QUFBYSx3QkFBWSxTQUFTO0FBQ3RDLGNBQUk7QUFBYyx5QkFBYSxTQUFTO0FBQ3hDLGNBQUk7QUFBZ0IsMkJBQWUsU0FBUztBQUM1QyxlQUFLLGdCQUFnQjtBQUNyQjtBQUFBLFFBQ0osS0FBSztBQUNELGNBQUk7QUFBYSx3QkFBWSxTQUFTO0FBQ3RDLGNBQUk7QUFBYyx5QkFBYSxTQUFTO0FBQ3hDLGNBQUk7QUFBZ0IsMkJBQWUsU0FBUztBQUM1QyxlQUFLLGdCQUFnQjtBQUNyQjtBQUFBLFFBQ0osS0FBSztBQUFBLFFBQ0wsS0FBSztBQUFBLFFBQ0wsS0FBSztBQUFBLFFBQ0wsS0FBSztBQUNELGVBQUssUUFBUTtBQUNiO0FBQUEsTUFDUjtBQUFBLElBQ0o7QUFBQSxJQUVBLE9BQU8sSUFBSTtBQUNQLFVBQUksS0FBSyxxQkFBcUIsS0FBSyxrQkFBa0IsTUFBTTtBQUN2RCxhQUFLLGVBQWUsQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUU1QixZQUFJLEtBQUs7QUFBSSxlQUFLLGFBQWEsQ0FBQyxLQUFLO0FBQ3JDLFlBQUksS0FBSztBQUFNLGVBQUssYUFBYSxDQUFDLEtBQUs7QUFDdkMsWUFBSSxLQUFLO0FBQU0sZUFBSyxhQUFhLENBQUMsS0FBSztBQUN2QyxZQUFJLEtBQUs7QUFBTyxlQUFLLGFBQWEsQ0FBQyxLQUFLO0FBRXhDLGFBQUssYUFBYSxDQUFDLEtBQUssS0FBSztBQUM3QixhQUFLLGFBQWEsQ0FBQyxLQUFLLEtBQUs7QUFDN0IsWUFBSSxLQUFLLGFBQWEsS0FBSyxLQUFLLEtBQUssYUFBYSxLQUFLO0FBQ25ELGVBQUssa0JBQWtCLEtBQUssS0FBSyxRQUFRO0FBQUEsWUFDckMsUUFBUSxLQUFLO0FBQUEsWUFDYixHQUFHLEtBQUssYUFBYSxDQUFDO0FBQUEsWUFDdEIsR0FBRyxLQUFLLGFBQWEsQ0FBQztBQUFBLFVBQzFCLENBQUM7QUFBQSxNQUNUO0FBQUEsSUFDSjtBQUFBLElBRUEsTUFBTSxHQUFHO0FBQ0wsVUFBSSxFQUFFLFlBQVksTUFBZSxFQUFFLFlBQVksTUFBYyxFQUFFLFlBQVksSUFBWTtBQUNuRixhQUFLLEtBQUs7QUFBQSxNQUNkLFdBQVcsRUFBRSxZQUFZLE1BQWtCLEVBQUUsWUFBWSxJQUFZO0FBQ2pFLGFBQUssUUFBUTtBQUFBLE1BQ2pCLFdBQVcsRUFBRSxZQUFZLE1BQWlCLEVBQUUsWUFBWSxJQUFZO0FBQ2hFLGFBQUssT0FBTztBQUFBLE1BQ2hCLFdBQVcsRUFBRSxZQUFZLE1BQWlCLEVBQUUsWUFBWSxNQUFjLEVBQUUsWUFBWSxJQUFZO0FBQzVGLGFBQUssT0FBTztBQUFBLE1BQ2hCO0FBQUEsSUFDSjtBQUFBLElBRUEsUUFBUSxHQUFHO0FBQ1AsVUFBSSxFQUFFLFlBQVksTUFBZSxFQUFFLFlBQVksTUFBYyxFQUFFLFlBQVksSUFBWTtBQUNuRixhQUFLLEtBQUs7QUFBQSxNQUNkLFdBQVcsRUFBRSxZQUFZLE1BQWtCLEVBQUUsWUFBWSxJQUFZO0FBQ2pFLGFBQUssUUFBUTtBQUFBLE1BQ2pCLFdBQVcsRUFBRSxZQUFZLE1BQWlCLEVBQUUsWUFBWSxJQUFZO0FBQ2hFLGFBQUssT0FBTztBQUFBLE1BQ2hCLFdBQVcsRUFBRSxZQUFZLE1BQWlCLEVBQUUsWUFBWSxNQUFjLEVBQUUsWUFBWSxJQUFZO0FBQzVGLGFBQUssT0FBTztBQUFBLE1BQ2hCO0FBQUEsSUFDSjtBQUFBLEVBQ0o7QUFwR0ksZ0JBRFMsbUJBQ0YsWUFBVztBQUNsQixnQkFGUyxtQkFFRixjQUFhO0FBQUEsSUFDaEIsUUFBUSxFQUFFLE1BQU0sS0FBSyxPQUFPO0FBQUEsSUFDNUIsS0FBSyxFQUFFLE1BQU0sS0FBSyxPQUFPO0FBQUEsSUFDekIsTUFBTSxFQUFFLE1BQU0sS0FBSyxPQUFPO0FBQUEsSUFDMUIsZ0JBQWdCLEVBQUUsTUFBTSxLQUFLLE9BQU87QUFBQSxJQUNwQyxPQUFPLEVBQUUsTUFBTSxLQUFLLE9BQU8sU0FBUyxJQUFJO0FBQUEsRUFDNUM7OztBQ1RKLGtCQUFnQixZQUE2QjtBQUU3QyxrQkFBZ0Isb0JBQW1FO0FBRW5GLGtCQUFnQixrQkFBaUU7QUFFakYsa0JBQWdCLG1CQUFrRTtBQUVsRixrQkFBZ0IsdUJBQXNFO0FBRXRGLGtCQUFnQiwwQkFBeUU7IiwKICAibmFtZXMiOiBbIkhvd2xlckdsb2JhbCIsICJzZWxmIiwgIkhvd2xlciIsICJlIiwgImkiLCAiSG93bCIsICJzdHIiLCAiU291bmQiLCAibGVuIiwgImVhcmN1dCIsICJlcXVhbHMiLCAibGVuIiwgIkNsb3NlQ29kZSIsICJvZmZzZXQiLCAibGVuZ3RoIiwgImRlY29kZSIsICJzdHIiLCAiUHJvdG9jb2wiLCAiRXJyb3JDb2RlIiwgIm9mZnNldCIsICJsZW5ndGgiLCAic3RyIiwgImxlbmd0aCIsICJfYSIsICJnbG9iYWwiLCAiZXhwb3J0cyIsICJkIiwgImIiLCAiX19kZWNvcmF0ZSIsICJDaGFuZ2VUcmVlIiwgInZhbHVlIiwgImxlbiIsICJBcnJheVNjaGVtYSIsICJ0eXBlIiwgImxlbmd0aCIsICJjb3B5IiwgIk1hcFNjaGVtYSIsICJrIiwgIlNjaGVtYURlZmluaXRpb24iLCAiQ29udGV4dCIsICJzdHIiLCAib2Zmc2V0IiwgInN0cmluZyIsICJkZWNvZGUiLCAiQ29sbGVjdGlvblNjaGVtYSIsICJTZXRTY2hlbWEiLCAiQ2xpZW50U3RhdGUiLCAiUmVmZXJlbmNlVHJhY2tlciIsICJFbmNvZGVTY2hlbWFFcnJvciIsICJTY2hlbWEiLCAicHJvcGVydHkiLCAiaSIsICJmaWx0ZXIiLCAiZGVwcmVjYXRlZCIsICJfYSIsICJSZWZsZWN0aW9uRmllbGQiLCAiUmVmbGVjdGlvblR5cGUiLCAiUmVmbGVjdGlvbiIsICJfc3VwZXIiLCAiZmllbGRUeXBlIiwgIm9mZnNldCIsICJjb2RlIiwgInN0ciIsICJDbGllbnQiLCAiVHlwZSIsICJUcmFuc2FjdGlvblR5cGUiLCAiTG9nVGFnIiwgIkNvbGxpZGVyIiwgIkFsaWdubWVudCIsICJWZXJ0aWNhbEFsaWdubWVudCIsICJUZXh0RWZmZWN0IiwgIlRleHRXcmFwTW9kZSIsICJJbnB1dFR5cGUiLCAiTGlnaHRUeXBlIiwgIkFuaW1hdGlvblN0YXRlIiwgIkZvcmNlTW9kZSIsICJDb2xsaXNpb25FdmVudFR5cGUiLCAiU2hhcGUiLCAiTWVzaEF0dHJpYnV0ZSIsICJwcm9wZXJ0eSIsICJvZmZzZXQiLCAibGVuZ3RoIiwgImFuZ2xlIiwgIkxvY2tBeGlzIiwgIk1lc2hJbmRleFR5cGUiLCAiTWVzaFNraW5uaW5nVHlwZSIsICJjYW52YXMiLCAiTWF0ZXJpYWxQYXJhbVR5cGUiLCAiU2NlbmVUeXBlIiwgIkxvZ0xldmVsIiwgIm9mZnNldCIsICJsZW5ndGgiLCAidGhyZWFkcyIsICJzdHIiLCAicHJvcGVydHkiLCAibWF4IiwgIl9fZGVjb3JhdGUiLCAidGVtcFF1YXQiLCAiY3JlYXRlIiwgImNyZWF0ZSIsICJsZW4iLCAic2NhbGUiLCAiYWRkIiwgImNsb25lIiwgImNvcHkiLCAiY3JlYXRlIiwgImRvdCIsICJlcXVhbHMiLCAiZXhhY3RFcXVhbHMiLCAiZnJvbVZhbHVlcyIsICJpZGVudGl0eSIsICJpbnZlcnQiLCAibGVuIiwgImxlbmd0aCIsICJsZXJwIiwgIm11bCIsICJtdWx0aXBseSIsICJub3JtYWxpemUiLCAicmFuZG9tIiwgInJvdGF0ZVgiLCAicm90YXRlWSIsICJyb3RhdGVaIiwgInNjYWxlIiwgInNldCIsICJzcXJMZW4iLCAic3F1YXJlZExlbmd0aCIsICJzdHIiLCAiYWRkIiwgImNsb25lIiwgImNvcHkiLCAiY3JlYXRlIiwgImVxdWFscyIsICJleGFjdEVxdWFscyIsICJmcm9tVmFsdWVzIiwgIm11bCIsICJtdWx0aXBseSIsICJyb3RhdGVYIiwgInJvdGF0ZVkiLCAicm90YXRlWiIsICJzY2FsZSIsICJzZXQiLCAic3RyIiwgInN1YiIsICJzdWJ0cmFjdCIsICJjcmVhdGUiLCAiY2xvbmUiLCAiZnJvbVZhbHVlcyIsICJjb3B5IiwgInNldCIsICJhZGQiLCAic3VidHJhY3QiLCAibXVsdGlwbHkiLCAic2NhbGUiLCAibGVuIiwgInJvdGF0ZVgiLCAicm90YXRlWSIsICJyb3RhdGVaIiwgInN0ciIsICJleGFjdEVxdWFscyIsICJlcXVhbHMiLCAic3ViIiwgIm11bCIsICJvZmZzZXQiLCAiY3JlYXRlIiwgImNsb25lIiwgImZyb21WYWx1ZXMiLCAiY29weSIsICJzZXQiLCAiYWRkIiwgInNjYWxlIiwgImxlbmd0aCIsICJzcXVhcmVkTGVuZ3RoIiwgIm5vcm1hbGl6ZSIsICJsZW4iLCAiZG90IiwgImxlcnAiLCAiZXhhY3RFcXVhbHMiLCAiZXF1YWxzIiwgImZvckVhY2giLCAiY3JlYXRlIiwgIm9mZnNldCIsICJjcmVhdGUiLCAiaWRlbnRpdHkiLCAiZG90IiwgIm11bHRpcGx5IiwgInJvdGF0ZVgiLCAicm90YXRlWSIsICJyb3RhdGVaIiwgInNjYWxlIiwgInJhbmRvbSIsICJpbnZlcnQiLCAic3RyIiwgImNsb25lIiwgImZyb21WYWx1ZXMiLCAiY29weSIsICJzZXQiLCAiYWRkIiwgIm11bCIsICJsZXJwIiwgImxlbmd0aCIsICJsZW4iLCAic3F1YXJlZExlbmd0aCIsICJzcXJMZW4iLCAibm9ybWFsaXplIiwgImV4YWN0RXF1YWxzIiwgImVxdWFscyIsICJhZGQiLCAiY2xvbmUiLCAiY29uanVnYXRlIiwgImNvcHkiLCAiY3JlYXRlIiwgImRvdCIsICJlcXVhbHMiLCAiZXhhY3RFcXVhbHMiLCAiZnJvbVJvdGF0aW9uIiwgImZyb21Sb3RhdGlvblRyYW5zbGF0aW9uIiwgImZyb21UcmFuc2xhdGlvbiIsICJmcm9tVmFsdWVzIiwgImdldFRyYW5zbGF0aW9uIiwgImlkZW50aXR5IiwgImludmVydCIsICJsZW4iLCAibGVuZ3RoIiwgImxlcnAiLCAibXVsIiwgIm11bHRpcGx5IiwgIm5vcm1hbGl6ZSIsICJyb3RhdGVYIiwgInJvdGF0ZVkiLCAicm90YXRlWiIsICJzY2FsZSIsICJzZXQiLCAic3FyTGVuIiwgInNxdWFyZWRMZW5ndGgiLCAic3RyIiwgInRyYW5zbGF0ZSIsICJjcmVhdGUiLCAiY2xvbmUiLCAiZnJvbVZhbHVlcyIsICJmcm9tUm90YXRpb25UcmFuc2xhdGlvbiIsICJmcm9tVHJhbnNsYXRpb24iLCAiZnJvbVJvdGF0aW9uIiwgImNvcHkiLCAiaWRlbnRpdHkiLCAic2V0IiwgImdldFRyYW5zbGF0aW9uIiwgInRyYW5zbGF0ZSIsICJyb3RhdGVYIiwgInJvdGF0ZVkiLCAicm90YXRlWiIsICJhZGQiLCAibXVsdGlwbHkiLCAibXVsIiwgInNjYWxlIiwgImRvdCIsICJsZXJwIiwgImludmVydCIsICJzcXVhcmVkTGVuZ3RoIiwgImNvbmp1Z2F0ZSIsICJsZW5ndGgiLCAibGVuIiwgInNxckxlbiIsICJub3JtYWxpemUiLCAic3RyIiwgImV4YWN0RXF1YWxzIiwgImVxdWFscyIsICJfX2RlY29yYXRlIiwgIl9fZGVjb3JhdGUiLCAidGVtcFZlYyIsICJjYW52YXMiLCAiZGlzdCIsICJfX2RlY29yYXRlIiwgIl9fZGVjb3JhdGUiLCAiaW1wb3J0X2hvd2xlciIsICJfX2RlY29yYXRlIiwgImNhbnZhcyIsICJfX2RlY29yYXRlIiwgImEiLCAiZGlyZWN0aW9uIiwgIl9fZGVjb3JhdGUiLCAiY2xhbXAiLCAidGVtcFF1YXQiLCAidGFyZ2V0UG9zIiwgIl9fZGVjb3JhdGUiLCAidGVtcFZlYzMiLCAiZWFyY3V0IiwgImxvb2tBdCIsICJvZmZzZXQiLCAiZGlzdCIsICJkb3QiLCAiX19kZWNvcmF0ZSIsICJtaW4iLCAibWF4IiwgIl9fZGVjb3JhdGUiLCAicHJldmVudERlZmF1bHQiLCAidGVtcFZlYyIsICJ0ZW1wVmVjMyIsICJjYW52YXMiLCAiQnV0dG9uQ29tcG9uZW50IiwgImhhcHRpY0ZlZWRiYWNrIiwgImhhcHRpY0ZlZWRiYWNrIiwgIkJ1dHRvbkNvbXBvbmVudCIsICJCdXR0b25Db21wb25lbnQiLCAiaGFwdGljRmVlZGJhY2siLCAiaGFwdGljRmVlZGJhY2siLCAiQnV0dG9uQ29tcG9uZW50Il0KfQo=
